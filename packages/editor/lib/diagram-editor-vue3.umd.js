(function(vr,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(vr=typeof globalThis<"u"?globalThis:vr||self,l(vr["meta2d-editor-lib"]={},vr.Vue))})(this,function(vr,l){"use strict";var r8e=Object.defineProperty;var a8e=(vr,l,Xs)=>l in vr?r8e(vr,l,{enumerable:!0,configurable:!0,writable:!0,value:Xs}):vr[l]=Xs;var de=(vr,l,Xs)=>a8e(vr,typeof l!="symbol"?l+"":l,Xs);function Xs(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const fB=Xs(l);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function r0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a0(t,e){if(t){if(typeof t=="string")return r0(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r0(t,e):void 0}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function hB(t){if(Array.isArray(t))return r0(t)}function wC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(t){return hB(t)||wC(t)||a0(t)||vB()}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function wt(t){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(t)}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function pB(t,e){if(wt(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xC(t){var e=pB(t,"string");return wt(e)=="symbol"?e:e+""}function V(t,e,n){return(e=xC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gB(t){var e=wt(t);return t!=null&&(e=="object"||e=="function")}var ot=gB;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var mB=wt(Jn)=="object"&&Jn&&Jn.Object===Object&&Jn,CC=mB,yB=CC,bB=(typeof self>"u"?"undefined":wt(self))=="object"&&self&&self.Object===Object&&self,wB=yB||bB||Function("return this")(),Xa=wB,xB=Xa,CB=xB.Symbol,Js=CB,_C=Js,SC=Object.prototype,_B=SC.hasOwnProperty,SB=SC.toString,hd=_C?_C.toStringTag:void 0;function TB(t){var e=_B.call(t,hd),n=t[hd];try{t[hd]=void 0;var r=!0}catch{}var a=SB.call(t);return r&&(e?t[hd]=n:delete t[hd]),a}var kB=TB,OB=Object.prototype,EB=OB.toString;function PB(t){return EB.call(t)}var IB=PB,TC=Js,AB=kB,NB=IB,DB="[object Null]",RB="[object Undefined]",kC=TC?TC.toStringTag:void 0;function MB(t){return t==null?t===void 0?RB:DB:kC&&kC in Object(t)?AB(t):NB(t)}var _i=MB;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var LB=_i,FB=ot,BB="[object AsyncFunction]",jB="[object Function]",$B="[object GeneratorFunction]",UB="[object Proxy]";function zB(t){if(!FB(t))return!1;var e=LB(t);return e==jB||e==$B||e==BB||e==UB}var Re=zB;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var HB=Xa,WB=HB["__core-js_shared__"],KB=WB,i0=KB,OC=function(){var t=/[^.]+$/.exec(i0&&i0.keys&&i0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qB(t){return!!OC&&OC in t}var GB=qB,YB=Function.prototype,XB=YB.toString;function JB(t){if(t!=null){try{return XB.call(t)}catch{}try{return t+""}catch{}}return""}var EC=JB,QB=Re,ZB=GB,VB=ot,e7=EC,t7=/[\\^$.*+?()[\]{}|]/g,n7=/^\[object .+?Constructor\]$/,r7=Function.prototype,a7=Object.prototype,i7=r7.toString,o7=a7.hasOwnProperty,l7=RegExp("^"+i7.call(o7).replace(t7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function s7(t){if(!VB(t)||ZB(t))return!1;var e=QB(t)?l7:n7;return e.test(e7(t))}var c7=s7;function u7(t,e){return t==null?void 0:t[e]}var d7=u7,f7=c7,h7=d7;function v7(t,e){var n=h7(t,e);return f7(n)?n:void 0}var Ml=v7,p7=Ml,g7=Xa,m7=p7(g7,"Map"),o0=m7;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var y7=Ml,b7=function(){try{var t=y7(Object,"defineProperty");return t({},"",{}),t}catch{}}(),PC=b7;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function w7(t,e){return t===e||t!==t&&e!==e}var vd=w7;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var IC=PC;function x7(t,e,n){e=="__proto__"&&IC?IC(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Dh=x7,C7=Dh,_7=vd,S7=Object.prototype,T7=S7.hasOwnProperty;function k7(t,e,n){var r=t[e];(!(T7.call(t,e)&&_7(r,n))||n===void 0&&!(e in t))&&C7(t,e,n)}var l0=k7;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function O7(){this.__data__=[],this.size=0}var E7=O7,P7=vd;function I7(t,e){for(var n=t.length;n--;)if(P7(t[n][0],e))return n;return-1}var Rh=I7,A7=Rh,N7=Array.prototype,D7=N7.splice;function R7(t){var e=this.__data__,n=A7(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():D7.call(e,n,1),--this.size,!0}var M7=R7,L7=Rh;function F7(t){var e=this.__data__,n=L7(e,t);return n<0?void 0:e[n][1]}var B7=F7,j7=Rh;function $7(t){return j7(this.__data__,t)>-1}var U7=$7,z7=Rh;function H7(t,e){var n=this.__data__,r=z7(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var W7=H7,K7=E7,q7=M7,G7=B7,Y7=U7,X7=W7;function Qs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qs.prototype.clear=K7,Qs.prototype.delete=q7,Qs.prototype.get=G7,Qs.prototype.has=Y7,Qs.prototype.set=X7;var Mh=Qs,J7=Ml,Q7=J7(Object,"create"),Lh=Q7,AC=Lh;function Z7(){this.__data__=AC?AC(null):{},this.size=0}var V7=Z7;function ej(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tj=ej,nj=Lh,rj="__lodash_hash_undefined__",aj=Object.prototype,ij=aj.hasOwnProperty;function oj(t){var e=this.__data__;if(nj){var n=e[t];return n===rj?void 0:n}return ij.call(e,t)?e[t]:void 0}var lj=oj,sj=Lh,cj=Object.prototype,uj=cj.hasOwnProperty;function dj(t){var e=this.__data__;return sj?e[t]!==void 0:uj.call(e,t)}var fj=dj,hj=Lh,vj="__lodash_hash_undefined__";function pj(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=hj&&e===void 0?vj:e,this}var gj=pj,mj=V7,yj=tj,bj=lj,wj=fj,xj=gj;function Zs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zs.prototype.clear=mj,Zs.prototype.delete=yj,Zs.prototype.get=bj,Zs.prototype.has=wj,Zs.prototype.set=xj;var Cj=Zs,NC=Cj,_j=Mh,Sj=o0;function Tj(){this.size=0,this.__data__={hash:new NC,map:new(Sj||_j),string:new NC}}var kj=Tj;function Oj(t){var e=wt(t);return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ej=Oj,Pj=Ej;function Ij(t,e){var n=t.__data__;return Pj(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Fh=Ij,Aj=Fh;function Nj(t){var e=Aj(this,t).delete(t);return this.size-=e?1:0,e}var Dj=Nj,Rj=Fh;function Mj(t){return Rj(this,t).get(t)}var Lj=Mj,Fj=Fh;function Bj(t){return Fj(this,t).has(t)}var jj=Bj,$j=Fh;function Uj(t,e){var n=$j(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var zj=Uj,Hj=kj,Wj=Dj,Kj=Lj,qj=jj,Gj=zj;function Vs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Vs.prototype.clear=Hj,Vs.prototype.delete=Wj,Vs.prototype.get=Kj,Vs.prototype.has=qj,Vs.prototype.set=Gj;var s0=Vs;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Yj=9007199254740991;function Xj(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Yj}var c0=Xj,Jj=Re,Qj=c0;function Zj(t){return t!=null&&Qj(t.length)&&!Jj(t)}var ec=Zj;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vj(t){return t!=null&&wt(t)=="object"}var oa=Vj;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function e$(t){return function(e){return t(e)}}var tc=e$;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qo={exports:{}};function t$(){return!1}var n$=t$;(function(t,e){var n=Xa,r=n$,a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,s=o?n.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||r;t.exports=u})(Qo,Qo.exports),Qo.exports;var r$=_i,a$=c0,i$=oa,o$="[object Arguments]",l$="[object Array]",s$="[object Boolean]",c$="[object Date]",u$="[object Error]",d$="[object Function]",f$="[object Map]",h$="[object Number]",v$="[object Object]",p$="[object RegExp]",g$="[object Set]",m$="[object String]",y$="[object WeakMap]",b$="[object ArrayBuffer]",w$="[object DataView]",x$="[object Float32Array]",C$="[object Float64Array]",_$="[object Int8Array]",S$="[object Int16Array]",T$="[object Int32Array]",k$="[object Uint8Array]",O$="[object Uint8ClampedArray]",E$="[object Uint16Array]",P$="[object Uint32Array]",dn={};dn[x$]=dn[C$]=dn[_$]=dn[S$]=dn[T$]=dn[k$]=dn[O$]=dn[E$]=dn[P$]=!0,dn[o$]=dn[l$]=dn[b$]=dn[s$]=dn[w$]=dn[c$]=dn[u$]=dn[d$]=dn[f$]=dn[h$]=dn[v$]=dn[p$]=dn[g$]=dn[m$]=dn[y$]=!1;function I$(t){return i$(t)&&a$(t.length)&&!!dn[r$(t)]}var A$=I$,Ll={exports:{}};(function(t,e){var n=CC,r=e&&!e.nodeType&&e,a=r&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Ll,Ll.exports),Ll.exports;var N$=A$,D$=tc,DC=Ll.exports,RC=DC&&DC.isTypedArray,R$=RC?D$(RC):N$,Bh=R$,M$=Object.prototype;function L$(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||M$;return t===n}var jh=L$;function F$(t,e){return function(n){return t(e(n))}}var MC=F$;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var B$=_i,j$=oa,$$="[object Arguments]";function U$(t){return j$(t)&&B$(t)==$$}var z$=U$,LC=z$,H$=oa,FC=Object.prototype,W$=FC.hasOwnProperty,K$=FC.propertyIsEnumerable,q$=LC(function(){return arguments}())?LC:function(t){return H$(t)&&W$.call(t,"callee")&&!K$.call(t,"callee")},pd=q$;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var G$=Array.isArray,Ke=G$;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Y$=9007199254740991,X$=/^(?:0|[1-9]\d*)$/;function J$(t,e){var n=wt(t);return e=e??Y$,!!e&&(n=="number"||n!="symbol"&&X$.test(t))&&t>-1&&t%1==0&&t<e}var gd=J$;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Q$(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Z$=Q$,V$=Z$,eU=pd,tU=Ke,nU=Qo.exports,rU=gd,aU=Bh,iU=Object.prototype,oU=iU.hasOwnProperty;function lU(t,e){var n=tU(t),r=!n&&eU(t),a=!n&&!r&&nU(t),i=!n&&!r&&!a&&aU(t),o=n||r||a||i,s=o?V$(t.length,String):[],c=s.length;for(var u in t)(e||oU.call(t,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||rU(u,c)))&&s.push(u);return s}var BC=lU,sU=Mh;function cU(){this.__data__=new sU,this.size=0}var uU=cU;function dU(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var fU=dU;function hU(t){return this.__data__.get(t)}var vU=hU;function pU(t){return this.__data__.has(t)}var gU=pU,mU=Mh,yU=o0,bU=s0,wU=200;function xU(t,e){var n=this.__data__;if(n instanceof mU){var r=n.__data__;if(!yU||r.length<wU-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bU(r)}return n.set(t,e),this.size=n.size,this}var CU=xU,_U=Mh,SU=uU,TU=fU,kU=vU,OU=gU,EU=CU;function nc(t){var e=this.__data__=new _U(t);this.size=e.size}nc.prototype.clear=SU,nc.prototype.delete=TU,nc.prototype.get=kU,nc.prototype.has=OU,nc.prototype.set=EU;var $h=nc,PU=Xa,IU=PU.Uint8Array,jC=IU,md={exports:{}};(function(t,e){var n=Xa,r=e&&!e.nodeType&&e,a=r&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===r,o=i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var f=u.length,h=s?s(f):new u.constructor(f);return u.copy(h),h}t.exports=c})(md,md.exports),md.exports;var $C=jC;function AU(t){var e=new t.constructor(t.byteLength);return new $C(e).set(new $C(t)),e}var u0=AU,NU=u0;function DU(t,e){var n=e?NU(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var UC=DU;function RU(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var zC=RU,MU=ot,HC=Object.create,LU=function(){function t(){}return function(e){if(!MU(e))return{};if(HC)return HC(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),FU=LU,BU=MC,jU=BU(Object.getPrototypeOf,Object),d0=jU,$U=FU,UU=d0,zU=jh;function HU(t){return typeof t.constructor=="function"&&!zU(t)?$U(UU(t)):{}}var WC=HU,WU=l0,KU=Dh;function qU(t,e,n,r){var a=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],c=r?r(n[s],t[s],s,n,t):void 0;c===void 0&&(c=t[s]),a?KU(n,s,c):WU(n,s,c)}return n}var rc=qU;function GU(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var YU=GU,XU=ot,JU=jh,QU=YU,ZU=Object.prototype,VU=ZU.hasOwnProperty;function ez(t){if(!XU(t))return QU(t);var e=JU(t),n=[];for(var r in t)r=="constructor"&&(e||!VU.call(t,r))||n.push(r);return n}var tz=ez,nz=BC,rz=tz,az=ec;function iz(t){return az(t)?nz(t,!0):rz(t)}var yd=iz;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function oz(t){return t}var ac=oz;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function lz(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var sz=lz,cz=sz,KC=Math.max;function uz(t,e,n){return e=KC(e===void 0?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=KC(r.length-e,0),o=Array(i);++a<i;)o[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(o),cz(t,this,s)}}var qC=uz;function dz(t){return function(){return t}}var fz=dz,hz=fz,GC=PC,vz=ac,pz=GC?function(t,e){return GC(t,"toString",{configurable:!0,enumerable:!1,value:hz(e),writable:!0})}:vz,gz=pz,mz=800,yz=16,bz=Date.now;function wz(t){var e=0,n=0;return function(){var r=bz(),a=yz-(r-n);if(n=r,a>0){if(++e>=mz)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var xz=wz,Cz=gz,_z=xz,Sz=_z(Cz),YC=Sz;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Tz=ec,kz=oa;function Oz(t){return kz(t)&&Tz(t)}var Uh=Oz,Ez=ac,Pz=qC,Iz=YC;function Az(t,e){return Iz(Pz(t,e,Ez),t+"")}var zh=Az;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nz=_i,Dz=d0,Rz=oa,Mz="[object Object]",Lz=Function.prototype,Fz=Object.prototype,XC=Lz.toString,Bz=Fz.hasOwnProperty,jz=XC.call(Object);function $z(t){if(!Rz(t)||Nz(t)!=Mz)return!1;var e=Dz(t);if(e===null)return!0;var n=Bz.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&XC.call(n)==jz}var Hh=$z;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Uz=vd,zz=ec,Hz=gd,Wz=ot;function Kz(t,e,n){if(!Wz(n))return!1;var r=wt(e);return(r=="number"?zz(n)&&Hz(e,n.length):r=="string"&&e in n)?Uz(n[e],t):!1}var f0=Kz;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var qz={classPrefix:"t",animation:{include:["ripple","expand","fade"],exclude:[]},attach:null,calendar:{firstDayOfWeek:1,fillWithZero:!0,controllerConfig:void 0},icon:{},input:{autocomplete:""},dialog:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,confirmBtnTheme:{default:"primary",info:"primary",warning:"primary",danger:"primary",success:"primary"}},message:{},popconfirm:{confirmBtnTheme:{default:"primary",warning:"primary",danger:"primary"}},table:{expandIcon:void 0,sortIcon:void 0,filterIcon:void 0,treeExpandAndFoldIcon:void 0,hideSortTips:!1,size:"medium"},select:{clearIcon:void 0,filterable:!1},drawer:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,size:"small"},tree:{folderIcon:void 0},datePicker:{firstDayOfWeek:1},steps:{checkIcon:void 0,errorIcon:void 0},tag:{closeIcon:void 0},form:{requiredMark:void 0},empty:{titleText:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0},image:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var h0={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){var n=1e3,r=6e4,a=36e5,i="millisecond",o="second",s="minute",c="hour",u="day",d="week",f="month",h="quarter",v="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var M=["th","st","nd","rd"],$=A%100;return"["+A+(M[($-20)%10]||M[$]||M[0])+"]"}},w=function(A,M,$){var U=String(A);return!U||U.length>=M?A:""+Array(M+1-U.length).join($)+A},x={s:w,z:function(A){var M=-A.utcOffset(),$=Math.abs(M),U=Math.floor($/60),F=$%60;return(M<=0?"+":"-")+w(U,2,"0")+":"+w(F,2,"0")},m:function I(A,M){if(A.date()<M.date())return-I(M,A);var $=12*(M.year()-A.year())+(M.month()-A.month()),U=A.clone().add($,f),F=M-U<0,j=A.clone().add($+(F?-1:1),f);return+(-($+(M-U)/(F?U-j:j-U))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:f,y:v,w:d,d:u,D:p,h:c,m:s,s:o,ms:i,Q:h}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},C="en",S={};S[C]=b;var _="$isDayjsObject",O=function(A){return A instanceof k||!(!A||!A[_])},N=function I(A,M,$){var U;if(!A)return C;if(typeof A=="string"){var F=A.toLowerCase();S[F]&&(U=F),M&&(S[F]=M,U=F);var j=A.split("-");if(!U&&j.length>1)return I(j[0])}else{var W=A.name;S[W]=A,U=W}return!$&&U&&(C=U),U||!$&&C},B=function(A,M){if(O(A))return A.clone();var $=wt(M)=="object"?M:{};return $.date=A,$.args=arguments,new k($)},T=x;T.l=N,T.i=O,T.w=function(I,A){return B(I,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var k=function(){function I(M){this.$L=N(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[_]=!0}var A=I.prototype;return A.parse=function(M){this.$d=function($){var U=$.date,F=$.utc;if(U===null)return new Date(NaN);if(T.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var j=U.match(m);if(j){var W=j[2]-1||0,H=(j[7]||"0").substring(0,3);return F?new Date(Date.UTC(j[1],W,j[3]||1,j[4]||0,j[5]||0,j[6]||0,H)):new Date(j[1],W,j[3]||1,j[4]||0,j[5]||0,j[6]||0,H)}}return new Date(U)}(M),this.init()},A.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},A.$utils=function(){return T},A.isValid=function(){return this.$d.toString()!==g},A.isSame=function(M,$){var U=B(M);return this.startOf($)<=U&&U<=this.endOf($)},A.isAfter=function(M,$){return B(M)<this.startOf($)},A.isBefore=function(M,$){return this.endOf($)<B(M)},A.$g=function(M,$,U){return T.u(M)?this[$]:this.set(U,M)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(M,$){var U=this,F=!!T.u($)||$,j=T.p(M),W=function(R,X){var ee=T.w(U.$u?Date.UTC(U.$y,X,R):new Date(U.$y,X,R),U);return F?ee:ee.endOf(u)},H=function(R,X){return T.w(U.toDate()[R].apply(U.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(X)),U)},J=this.$W,Y=this.$M,D=this.$D,q="set"+(this.$u?"UTC":"");switch(j){case v:return F?W(1,0):W(31,11);case f:return F?W(1,Y):W(0,Y+1);case d:var z=this.$locale().weekStart||0,K=(J<z?J+7:J)-z;return W(F?D-K:D+(6-K),Y);case u:case p:return H(q+"Hours",0);case c:return H(q+"Minutes",1);case s:return H(q+"Seconds",2);case o:return H(q+"Milliseconds",3);default:return this.clone()}},A.endOf=function(M){return this.startOf(M,!1)},A.$set=function(M,$){var U,F=T.p(M),j="set"+(this.$u?"UTC":""),W=(U={},U[u]=j+"Date",U[p]=j+"Date",U[f]=j+"Month",U[v]=j+"FullYear",U[c]=j+"Hours",U[s]=j+"Minutes",U[o]=j+"Seconds",U[i]=j+"Milliseconds",U)[F],H=F===u?this.$D+($-this.$W):$;if(F===f||F===v){var J=this.clone().set(p,1);J.$d[W](H),J.init(),this.$d=J.set(p,Math.min(this.$D,J.daysInMonth())).$d}else W&&this.$d[W](H);return this.init(),this},A.set=function(M,$){return this.clone().$set(M,$)},A.get=function(M){return this[T.p(M)]()},A.add=function(M,$){var U,F=this;M=Number(M);var j=T.p($),W=function(D){var q=B(F);return T.w(q.date(q.date()+Math.round(D*M)),F)};if(j===f)return this.set(f,this.$M+M);if(j===v)return this.set(v,this.$y+M);if(j===u)return W(1);if(j===d)return W(7);var H=(U={},U[s]=r,U[c]=a,U[o]=n,U)[j]||1,J=this.$d.getTime()+M*H;return T.w(J,this)},A.subtract=function(M,$){return this.add(-1*M,$)},A.format=function(M){var $=this,U=this.$locale();if(!this.isValid())return U.invalidDate||g;var F=M||"YYYY-MM-DDTHH:mm:ssZ",j=T.z(this),W=this.$H,H=this.$m,J=this.$M,Y=U.weekdays,D=U.months,q=U.meridiem,z=function(X,ee,re,ae){return X&&(X[ee]||X($,F))||re[ee].slice(0,ae)},K=function(X){return T.s(W%12||12,X,"0")},P=q||function(R,X,ee){var re=R<12?"AM":"PM";return ee?re.toLowerCase():re};return F.replace(y,function(R,X){return X||function(ee){switch(ee){case"YY":return String($.$y).slice(-2);case"YYYY":return T.s($.$y,4,"0");case"M":return J+1;case"MM":return T.s(J+1,2,"0");case"MMM":return z(U.monthsShort,J,D,3);case"MMMM":return z(D,J);case"D":return $.$D;case"DD":return T.s($.$D,2,"0");case"d":return String($.$W);case"dd":return z(U.weekdaysMin,$.$W,Y,2);case"ddd":return z(U.weekdaysShort,$.$W,Y,3);case"dddd":return Y[$.$W];case"H":return String(W);case"HH":return T.s(W,2,"0");case"h":return K(1);case"hh":return K(2);case"a":return P(W,H,!0);case"A":return P(W,H,!1);case"m":return String(H);case"mm":return T.s(H,2,"0");case"s":return String($.$s);case"ss":return T.s($.$s,2,"0");case"SSS":return T.s($.$ms,3,"0");case"Z":return j}return null}(R)||j.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(M,$,U){var F,j=this,W=T.p($),H=B(M),J=(H.utcOffset()-this.utcOffset())*r,Y=this-H,D=function(){return T.m(j,H)};switch(W){case v:F=D()/12;break;case f:F=D();break;case h:F=D()/3;break;case d:F=(Y-J)/6048e5;break;case u:F=(Y-J)/864e5;break;case c:F=Y/a;break;case s:F=Y/r;break;case o:F=Y/n;break;default:F=Y}return U?F:T.a(F)},A.daysInMonth=function(){return this.endOf(f).$D},A.$locale=function(){return S[this.$L]},A.locale=function(M,$){if(!M)return this.$L;var U=this.clone(),F=N(M,$,!0);return F&&(U.$L=F),U},A.clone=function(){return T.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},I}(),E=k.prototype;return B.prototype=E,[["$ms",i],["$s",o],["$m",s],["$H",c],["$W",u],["$M",f],["$y",v],["$D",p]].forEach(function(I){E[I[1]]=function(A){return this.$g(A,I[0],I[1])}}),B.extend=function(I,A){return I.$i||(I(A,k,B),I.$i=!0),B},B.locale=N,B.isDayjs=O,B.unix=function(I){return B(1e3*I)},B.en=S[C],B.Ls=S,B.p={},B})})(h0);var ke=h0.exports;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gz={autoComplete:{empty:"暂无数据"},pagination:{itemsPerPage:"{size} 条/页",jumpTo:"跳至",page:"页",total:"共 {total} 条数据"},cascader:{empty:"暂无数据",loadingText:"加载中",placeholder:"请选择"},calendar:{yearSelection:"{year} 年",monthSelection:"{month} 月",yearRadio:"年",monthRadio:"月",hideWeekend:"隐藏周末",showWeekend:"显示周末",today:"今天",thisMonth:"本月",week:"一,二,三,四,五,六,日",cellMonth:"1 月,2 月,3 月,4 月,5 月,6 月,7 月,8 月,9 月,10 月,11 月,12 月"},transfer:{title:"{checked} / {total} 项",empty:"暂无数据",placeholder:"请输入关键词搜索"},timePicker:{dayjsLocale:"zh-cn",now:"此刻",confirm:"确定",anteMeridiem:"上午",postMeridiem:"下午",placeholder:"选择时间"},dialog:{confirm:"确认",cancel:"取消"},drawer:{confirm:"确认",cancel:"取消"},popconfirm:{confirm:{content:"确定"},cancel:{content:"取消"}},table:{empty:"暂无数据",loadingText:"正在加载中，请稍后",loadingMoreText:"点击加载更多",filterInputPlaceholder:"请输入内容（无默认值）",sortAscendingOperationText:"点击升序",sortCancelOperationText:"点击取消排序",sortDescendingOperationText:"点击降序",clearFilterResultButtonText:"清空筛选",columnConfigButtonText:"列配置",columnConfigTitleText:"表格列配置",columnConfigDescriptionText:"请选择需要在表格中显示的数据列",confirmText:"确认",cancelText:"取消",resetText:"重置",selectAllText:"全选",searchResultText:"搜索“{result}”，找到 {count} 条结果"},select:{empty:"暂无数据",loadingText:"加载中",placeholder:"请选择"},tree:{empty:"暂无数据"},treeSelect:{empty:"暂无数据",loadingText:"加载中",placeholder:"请选择"},datePicker:{dayjsLocale:"zh-cn",placeholder:{date:"请选择日期",month:"请选择月份",year:"请选择年份",quarter:"请选择季度",week:"请选择周"},weekdays:["一","二","三","四","五","六","日"],months:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],quarters:["一季度","二季度","三季度","四季度"],rangeSeparator:" - ",direction:"ltr",format:"YYYY-MM-DD",dayAriaLabel:"日",weekAbbreviation:"周",yearAriaLabel:"年",monthAriaLabel:"月",confirm:"确定",selectTime:"选择时间",selectDate:"选择日期",nextYear:"下一年",preYear:"上一年",nextMonth:"下个月",preMonth:"上个月",preDecade:"上个十年",nextDecade:"下个十年",now:"当前"},upload:{sizeLimitMessage:"文件大小不能超过 {sizeLimit}",cancelUploadText:"取消上传",triggerUploadText:{fileInput:"选择文件",image:"点击上传图片",normal:"点击上传",reupload:"重新选择",continueUpload:"继续选择",delete:"删除",uploading:"上传中"},dragger:{dragDropText:"释放鼠标",draggingText:"拖拽到此区域",clickAndDragText:"点击上方“选择文件”或将文件拖拽到此区域"},file:{fileNameText:"文件名",fileSizeText:"文件大小",fileStatusText:"状态",fileOperationText:"操作",fileOperationDateText:"上传日期"},progress:{uploadingText:"上传中",waitingText:"待上传",failText:"上传失败",successText:"上传成功"}},form:{errorMessage:{date:"请输入正确的${name}",url:"请输入正确的${name}",required:"${name}必填",whitespace:"${name}不能为空",max:"${name}字符长度不能超过 ${validate} 个字符，一个中文等于两个字符",min:"${name}字符长度不能少于 ${validate} 个字符，一个中文等于两个字符",len:"${name}字符长度必须是 ${validate}",enum:"${name}只能是${validate}等",idcard:"请输入正确的${name}",telnumber:"请输入正确的${name}",pattern:"请输入正确的${name}",validator:"${name}不符合要求",boolean:"${name}数据类型必须是布尔类型",number:"${name}必须是数字"},colonText:"："},input:{placeholder:"请输入"},list:{loadingText:"正在加载中，请稍等",loadingMoreText:"点击加载更多"},alert:{expandText:"展开更多",collapseText:"收起"},anchor:{copySuccessText:"链接复制成功",copyText:"复制链接"},colorPicker:{swatchColorTitle:"系统预设颜色",recentColorTitle:"最近使用颜色",clearConfirmText:"确定清空最近使用的颜色吗？",singleColor:"单色",gradientColor:"渐变"},guide:{finishButtonProps:{content:"完成",theme:"primary"},nextButtonProps:{content:"下一步",theme:"primary"},skipButtonProps:{content:"跳过",theme:"default"},prevButtonProps:{content:"上一步",theme:"default"}},image:{errorText:"图片无法显示",loadingText:"图片加载中"},imageViewer:{errorText:"图片加载失败，可尝试重新加载",mirrorTipText:"镜像",rotateTipText:"旋转",originalSizeTipText:"原始大小"},typography:{expandText:"展开",collapseText:"收起",copiedText:"复制成功"},rate:{rateText:["极差","失望","一般","满意","惊喜"]},empty:{titleText:{maintenance:"建设中",success:"成功",fail:"失败",empty:"暂无数据",networkError:"网络错误"}},descriptions:{colonText:"："}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Yz(t){return function(e,n,r){for(var a=-1,i=Object(e),o=r(e),s=o.length;s--;){var c=o[t?s:++a];if(n(i[c],c,i)===!1)break}return e}}var Xz=Yz,Jz=Xz,Qz=Jz(),JC=Qz,Zz=Dh,Vz=vd;function eH(t,e,n){(n!==void 0&&!Vz(t[e],n)||n===void 0&&!(e in t))&&Zz(t,e,n)}var QC=eH;function tH(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var ZC=tH,nH=rc,rH=yd;function aH(t){return nH(t,rH(t))}var iH=aH,VC=QC,oH=md.exports,lH=UC,sH=zC,cH=WC,e_=pd,t_=Ke,uH=Uh,dH=Qo.exports,fH=Re,hH=ot,vH=Hh,pH=Bh,n_=ZC,gH=iH;function mH(t,e,n,r,a,i,o){var s=n_(t,n),c=n_(e,n),u=o.get(c);if(u){VC(t,n,u);return}var d=i?i(s,c,n+"",t,e,o):void 0,f=d===void 0;if(f){var h=t_(c),v=!h&&dH(c),p=!h&&!v&&pH(c);d=c,h||v||p?t_(s)?d=s:uH(s)?d=sH(s):v?(f=!1,d=oH(c,!0)):p?(f=!1,d=lH(c,!0)):d=[]:vH(c)||e_(c)?(d=s,e_(s)?d=gH(s):(!hH(s)||fH(s))&&(d=cH(c))):f=!1}f&&(o.set(c,d),a(d,c,r,i,o),o.delete(c)),VC(t,n,d)}var yH=mH,bH=$h,wH=QC,xH=JC,CH=yH,_H=ot,SH=yd,TH=ZC;function r_(t,e,n,r,a){t!==e&&xH(e,function(i,o){if(a||(a=new bH),_H(i))CH(t,e,o,n,r_,r,a);else{var s=r?r(TH(t,o),i,o+"",t,e,a):void 0;s===void 0&&(s=i),wH(t,o,s)}},SH)}var a_=r_,kH=zh,OH=f0;function EH(t){return kH(function(e,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(a--,i):void 0,o&&OH(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),e=Object(e);++r<a;){var s=n[r];s&&t(e,s,r,i)}return e})}var i_=EH,PH=a_,IH=i_,AH=IH(function(t,e,n){PH(t,e,n)}),Wh=AH,NH=a_,DH=i_,RH=DH(function(t,e,n,r){NH(t,e,n,r)}),MH=RH,Kh=function(t){return t.ripple="ripple",t.expand="expand",t.fade="fade",t}(Kh||{}),o_=Wh(qz,Gz),l_=Symbol("configProvide"),LH=function(e,n){return MH(e,n,function(r,a){if(Ke(r))return a})};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var FH=Ml,BH=Xa,jH=FH(BH,"Set"),s_=jH;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $H=MC,UH=$H(Object.keys,Object),zH=UH,HH=jh,WH=zH,KH=Object.prototype,qH=KH.hasOwnProperty;function GH(t){if(!HH(t))return WH(t);var e=[];for(var n in Object(t))qH.call(t,n)&&n!="constructor"&&e.push(n);return e}var c_=GH,YH=Ml,XH=Xa,JH=YH(XH,"DataView"),QH=JH,ZH=Ml,VH=Xa,eW=ZH(VH,"Promise"),tW=eW,nW=Ml,rW=Xa,aW=nW(rW,"WeakMap"),iW=aW,v0=QH,p0=o0,g0=tW,m0=s_,y0=iW,u_=_i,ic=EC,d_="[object Map]",oW="[object Object]",f_="[object Promise]",h_="[object Set]",v_="[object WeakMap]",p_="[object DataView]",lW=ic(v0),sW=ic(p0),cW=ic(g0),uW=ic(m0),dW=ic(y0),Fl=u_;(v0&&Fl(new v0(new ArrayBuffer(1)))!=p_||p0&&Fl(new p0)!=d_||g0&&Fl(g0.resolve())!=f_||m0&&Fl(new m0)!=h_||y0&&Fl(new y0)!=v_)&&(Fl=function(e){var n=u_(e),r=n==oW?e.constructor:void 0,a=r?ic(r):"";if(a)switch(a){case lW:return p_;case sW:return d_;case cW:return f_;case uW:return h_;case dW:return v_}return n});var bd=Fl;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function fW(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t}var b0=fW;function hW(t,e){for(var n=-1,r=t==null?0:t.length,a=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[a++]=o)}return i}var w0=hW;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vW=BC,pW=c_,gW=ec;function mW(t){return gW(t)?vW(t):pW(t)}var wd=mW,yW=b0,bW=Ke;function wW(t,e,n){var r=e(t);return bW(t)?r:yW(r,n(t))}var g_=wW;function xW(){return[]}var m_=xW,CW=w0,_W=m_,SW=Object.prototype,TW=SW.propertyIsEnumerable,y_=Object.getOwnPropertySymbols,kW=y_?function(t){return t==null?[]:(t=Object(t),CW(y_(t),function(e){return TW.call(t,e)}))}:_W,x0=kW,OW=g_,EW=x0,PW=wd;function IW(t){return OW(t,PW,EW)}var b_=IW;function AW(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var NW=AW,DW=rc,RW=wd;function MW(t,e){return t&&DW(e,RW(e),t)}var LW=MW,FW=rc,BW=yd;function jW(t,e){return t&&FW(e,BW(e),t)}var $W=jW,UW=rc,zW=x0;function HW(t,e){return UW(t,zW(t),e)}var WW=HW,KW=b0,qW=d0,GW=x0,YW=m_,XW=Object.getOwnPropertySymbols,JW=XW?function(t){for(var e=[];t;)KW(e,GW(t)),t=qW(t);return e}:YW,w_=JW,QW=rc,ZW=w_;function VW(t,e){return QW(t,ZW(t),e)}var eK=VW,tK=g_,nK=w_,rK=yd;function aK(t){return tK(t,rK,nK)}var C0=aK,iK=Object.prototype,oK=iK.hasOwnProperty;function lK(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&oK.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var sK=lK,cK=u0;function uK(t,e){var n=e?cK(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var dK=uK,fK=/\w*$/;function hK(t){var e=new t.constructor(t.source,fK.exec(t));return e.lastIndex=t.lastIndex,e}var vK=hK,x_=Js,C_=x_?x_.prototype:void 0,__=C_?C_.valueOf:void 0;function pK(t){return __?Object(__.call(t)):{}}var gK=pK,mK=u0,yK=dK,bK=vK,wK=gK,xK=UC,CK="[object Boolean]",_K="[object Date]",SK="[object Map]",TK="[object Number]",kK="[object RegExp]",OK="[object Set]",EK="[object String]",PK="[object Symbol]",IK="[object ArrayBuffer]",AK="[object DataView]",NK="[object Float32Array]",DK="[object Float64Array]",RK="[object Int8Array]",MK="[object Int16Array]",LK="[object Int32Array]",FK="[object Uint8Array]",BK="[object Uint8ClampedArray]",jK="[object Uint16Array]",$K="[object Uint32Array]";function UK(t,e,n){var r=t.constructor;switch(e){case IK:return mK(t);case CK:case _K:return new r(+t);case AK:return yK(t,n);case NK:case DK:case RK:case MK:case LK:case FK:case BK:case jK:case $K:return xK(t,n);case SK:return new r;case TK:case EK:return new r(t);case kK:return bK(t);case OK:return new r;case PK:return wK(t)}}var zK=UK,HK=bd,WK=oa,KK="[object Map]";function qK(t){return WK(t)&&HK(t)==KK}var GK=qK,YK=GK,XK=tc,S_=Ll.exports,T_=S_&&S_.isMap,JK=T_?XK(T_):YK,QK=JK,ZK=bd,VK=oa,eq="[object Set]";function tq(t){return VK(t)&&ZK(t)==eq}var nq=tq,rq=nq,aq=tc,k_=Ll.exports,O_=k_&&k_.isSet,iq=O_?aq(O_):rq,oq=iq,lq=$h,sq=NW,cq=l0,uq=LW,dq=$W,fq=md.exports,hq=zC,vq=WW,pq=eK,gq=b_,mq=C0,yq=bd,bq=sK,wq=zK,xq=WC,Cq=Ke,_q=Qo.exports,Sq=QK,Tq=ot,kq=oq,Oq=wd,Eq=yd,Pq=1,Iq=2,Aq=4,E_="[object Arguments]",Nq="[object Array]",Dq="[object Boolean]",Rq="[object Date]",Mq="[object Error]",P_="[object Function]",Lq="[object GeneratorFunction]",Fq="[object Map]",Bq="[object Number]",I_="[object Object]",jq="[object RegExp]",$q="[object Set]",Uq="[object String]",zq="[object Symbol]",Hq="[object WeakMap]",Wq="[object ArrayBuffer]",Kq="[object DataView]",qq="[object Float32Array]",Gq="[object Float64Array]",Yq="[object Int8Array]",Xq="[object Int16Array]",Jq="[object Int32Array]",Qq="[object Uint8Array]",Zq="[object Uint8ClampedArray]",Vq="[object Uint16Array]",eG="[object Uint32Array]",sn={};sn[E_]=sn[Nq]=sn[Wq]=sn[Kq]=sn[Dq]=sn[Rq]=sn[qq]=sn[Gq]=sn[Yq]=sn[Xq]=sn[Jq]=sn[Fq]=sn[Bq]=sn[I_]=sn[jq]=sn[$q]=sn[Uq]=sn[zq]=sn[Qq]=sn[Zq]=sn[Vq]=sn[eG]=!0,sn[Mq]=sn[P_]=sn[Hq]=!1;function qh(t,e,n,r,a,i){var o,s=e&Pq,c=e&Iq,u=e&Aq;if(n&&(o=a?n(t,r,a,i):n(t)),o!==void 0)return o;if(!Tq(t))return t;var d=Cq(t);if(d){if(o=bq(t),!s)return hq(t,o)}else{var f=yq(t),h=f==P_||f==Lq;if(_q(t))return fq(t,s);if(f==I_||f==E_||h&&!a){if(o=c||h?{}:xq(t),!s)return c?pq(t,dq(o,t)):vq(t,uq(o,t))}else{if(!sn[f])return a?t:{};o=wq(t,f,s)}}i||(i=new lq);var v=i.get(t);if(v)return v;i.set(t,o),kq(t)?t.forEach(function(m){o.add(qh(m,e,n,m,t,i))}):Sq(t)&&t.forEach(function(m,y){o.set(y,qh(m,e,n,y,t,i))});var p=u?c?mq:gq:c?Eq:Oq,g=d?void 0:p(t);return sq(g||t,function(m,y){g&&(y=m,m=t[y]),cq(o,y,qh(m,e,n,y,t,i))}),o}var A_=qh;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var tG="__lodash_hash_undefined__";function nG(t){return this.__data__.set(t,tG),this}var rG=nG;function aG(t){return this.__data__.has(t)}var iG=aG,oG=s0,lG=rG,sG=iG;function Gh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new oG;++e<n;)this.add(t[e])}Gh.prototype.add=Gh.prototype.push=lG,Gh.prototype.has=sG;var Yh=Gh;function cG(t,e){return t.has(e)}var Xh=cG;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function uG(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var _0=uG;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function dG(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var fG=dG,hG=Yh,vG=fG,pG=Xh,gG=1,mG=2;function yG(t,e,n,r,a,i){var o=n&gG,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var u=i.get(t),d=i.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,v=n&mG?new hG:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var p=t[f],g=e[f];if(r)var m=o?r(g,p,f,e,t,i):r(p,g,f,t,e,i);if(m!==void 0){if(m)continue;h=!1;break}if(v){if(!vG(e,function(y,b){if(!pG(v,b)&&(p===y||a(p,y,n,r,i)))return v.push(b)})){h=!1;break}}else if(!(p===g||a(p,g,n,r,i))){h=!1;break}}return i.delete(t),i.delete(e),h}var N_=yG;function bG(t){var e=-1,n=Array(t.size);return t.forEach(function(r,a){n[++e]=[a,r]}),n}var wG=bG,D_=Js,R_=jC,xG=vd,CG=N_,_G=wG,SG=_0,TG=1,kG=2,OG="[object Boolean]",EG="[object Date]",PG="[object Error]",IG="[object Map]",AG="[object Number]",NG="[object RegExp]",DG="[object Set]",RG="[object String]",MG="[object Symbol]",LG="[object ArrayBuffer]",FG="[object DataView]",M_=D_?D_.prototype:void 0,S0=M_?M_.valueOf:void 0;function BG(t,e,n,r,a,i,o){switch(n){case FG:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case LG:return!(t.byteLength!=e.byteLength||!i(new R_(t),new R_(e)));case OG:case EG:case AG:return xG(+t,+e);case PG:return t.name==e.name&&t.message==e.message;case NG:case RG:return t==e+"";case IG:var s=_G;case DG:var c=r&TG;if(s||(s=SG),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=kG,o.set(t,e);var d=CG(s(t),s(e),r,a,i,o);return o.delete(t),d;case MG:if(S0)return S0.call(t)==S0.call(e)}return!1}var jG=BG,L_=b_,$G=1,UG=Object.prototype,zG=UG.hasOwnProperty;function HG(t,e,n,r,a,i){var o=n&$G,s=L_(t),c=s.length,u=L_(e),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=s[f];if(!(o?h in e:zG.call(e,h)))return!1}var v=i.get(t),p=i.get(e);if(v&&p)return v==e&&p==t;var g=!0;i.set(t,e),i.set(e,t);for(var m=o;++f<c;){h=s[f];var y=t[h],b=e[h];if(r)var w=o?r(b,y,h,e,t,i):r(y,b,h,t,e,i);if(!(w===void 0?y===b||a(y,b,n,r,i):w)){g=!1;break}m||(m=h=="constructor")}if(g&&!m){var x=t.constructor,C=e.constructor;x!=C&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof C=="function"&&C instanceof C)&&(g=!1)}return i.delete(t),i.delete(e),g}var WG=HG,T0=$h,KG=N_,qG=jG,GG=WG,F_=bd,B_=Ke,j_=Qo.exports,YG=Bh,XG=1,$_="[object Arguments]",U_="[object Array]",Jh="[object Object]",JG=Object.prototype,z_=JG.hasOwnProperty;function QG(t,e,n,r,a,i){var o=B_(t),s=B_(e),c=o?U_:F_(t),u=s?U_:F_(e);c=c==$_?Jh:c,u=u==$_?Jh:u;var d=c==Jh,f=u==Jh,h=c==u;if(h&&j_(t)){if(!j_(e))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new T0),o||YG(t)?KG(t,e,n,r,a,i):qG(t,e,c,n,r,a,i);if(!(n&XG)){var v=d&&z_.call(t,"__wrapped__"),p=f&&z_.call(e,"__wrapped__");if(v||p){var g=v?t.value():t,m=p?e.value():e;return i||(i=new T0),a(g,m,n,r,i)}}return h?(i||(i=new T0),GG(t,e,n,r,a,i)):!1}var ZG=QG,VG=ZG,H_=oa;function W_(t,e,n,r,a){return t===e?!0:t==null||e==null||!H_(t)&&!H_(e)?t!==t&&e!==e:VG(t,e,n,r,W_,a)}var k0=W_,eY=k0;function tY(t,e){return eY(t,e)}var K_=tY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var nY=_i,rY=oa,aY="[object Symbol]";function iY(t){return wt(t)=="symbol"||rY(t)&&nY(t)==aY}var xd=iY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function oY(t,e){for(var n=-1,r=t==null?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a}var oc=oY,q_=Js,lY=oc,sY=Ke,cY=xd,G_=q_?q_.prototype:void 0,Y_=G_?G_.toString:void 0;function X_(t){if(typeof t=="string")return t;if(sY(t))return lY(t,X_)+"";if(cY(t))return Y_?Y_.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var J_=X_,uY=J_;function dY(t){return t==null?"":uY(t)}var Zo=dY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var fY=Ke,hY=xd,vY=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pY=/^\w*$/;function gY(t,e){if(fY(t))return!1;var n=wt(t);return n=="number"||n=="symbol"||n=="boolean"||t==null||hY(t)?!0:pY.test(t)||!vY.test(t)||e!=null&&t in Object(e)}var O0=gY,Q_=s0,mY="Expected a function";function E0(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(mY);var n=function(){var a=arguments,i=e?e.apply(this,a):a[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,a);return n.cache=o.set(i,s)||o,s};return n.cache=new(E0.Cache||Q_),n}E0.Cache=Q_;var yY=E0,bY=yY,wY=500;function xY(t){var e=bY(t,function(r){return n.size===wY&&n.clear(),r}),n=e.cache;return e}var CY=xY,_Y=CY,SY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TY=/\\(\\)?/g,kY=_Y(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(SY,function(n,r,a,i){e.push(a?i.replace(TY,"$1"):r||n)}),e}),OY=kY,EY=Ke,PY=O0,IY=OY,AY=Zo;function NY(t,e){return EY(t)?t:PY(t,e)?[t]:IY(AY(t))}var lc=NY,DY=xd;function RY(t){if(typeof t=="string"||DY(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var sc=RY,MY=lc,LY=sc;function FY(t,e){e=MY(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[LY(e[n++])];return n&&n==r?t:void 0}var Qh=FY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var BY=Qh;function jY(t,e,n){var r=t==null?void 0:BY(t,e);return r===void 0?n:r}var je=jY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $Y(t,e){return t!=null&&e in Object(t)}var UY=$Y,zY=lc,HY=pd,WY=Ke,KY=gd,qY=c0,GY=sc;function YY(t,e,n){e=zY(e,t);for(var r=-1,a=e.length,i=!1;++r<a;){var o=GY(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=a?i:(a=t==null?0:t.length,!!a&&qY(a)&&KY(o,a)&&(WY(t)||HY(t)))}var XY=YY,JY=UY,QY=XY;function ZY(t,e){return t!=null&&QY(t,e,JY)}var Z_=ZY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function VY(t){return function(e){return e==null?void 0:e[t]}}var V_=VY;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function eS(t){if(Array.isArray(t))return t}function eX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,o,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function tS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(t,e){return eS(t)||eX(t,e)||a0(t,e)||tS()}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Bl(t,e){var n=Object.keys(e);n.forEach(function(r){t.style[r]=e[r]})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function tX(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Vo(t,e){if(t==null)return{};var n,r,a=tX(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var nX=_i,rX=Ke,aX=oa,iX="[object String]";function oX(t){return typeof t=="string"||!rX(t)&&aX(t)&&nX(t)==iX}var Je=oX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function lX(t){return t===null}var P0=lX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function sX(t){return t===void 0}var Bn=sX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var cX=_i,uX=oa,dX="[object Number]";function fX(t){return typeof t=="number"||uX(t)&&cX(t)==dX}var Et=fX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function oo(){if(typeof navigator>"u"||!navigator)return Number.MAX_SAFE_INTEGER;var t=navigator,e=t.userAgent,n=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,r=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(n){var a=new RegExp("MSIE (\\d+\\.\\d+);"),i=e.match(a);if(!i)return-1;var o=parseFloat(i[1]);return o<7?6:o}return r?11:Number.MAX_SAFE_INTEGER}function hX(){var t,e,n;if(typeof navigator>"u"||!navigator)return!1;var r=navigator.userAgent,a=r.match(/AppleWebKit.+Chrome\/(.+) Safari\/.+/i);if(Number(a==null||(t=a[1])===null||t===void 0?void 0:t.split(".")[0])<100)return!0;var i=r.match(/AppleWebKit.+Version\/(.+) Safari\/.+/i);if(Number(i==null||(e=i[1])===null||e===void 0?void 0:e.split(".")[0])<12)return!0;var o=oo();if(o<=11)return!0;var s=r.match(/Firefox\/(.+)/i);return Number(s==null||(n=s[1])===null||n===void 0?void 0:n.split(".")[0])<100}function jl(t,e){var n=Et(e);if(!t||t.length===0)return n?{length:0,characters:t}:0;for(var r=0,a=0;a<t.length;a++){var i=0;if(t.charCodeAt(a)>127?i=2:i=1,n&&r+i>e)return{length:r,characters:t.slice(0,a)};r+=i}return n?{length:r,characters:t}:r}function vX(t){return Ee(t??"").length}function pX(t,e,n){return Ee("").slice().length===e?n||"":Ee(t??"").slice(0,e).join("")}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function nS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nS(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gX(t){var e,n,r,a={};if(!(!t||typeof window>"u")){var i=(e=window)===null||e===void 0||(n=e.getComputedStyle)===null||n===void 0?void 0:n.call(e,t),o=i.color,s=i.fontSize,c=(r=window)===null||r===void 0||(r=r.navigator)===null||r===void 0?void 0:r.userAgent,u=/Safari/.test(c)&&!/Chrome/.test(c),d=/(?=.*iPhone)[?=.*MicroMessenger]/.test(c)&&!/Chrome/.test(c);if((u||d)&&(a={transformOrigin:"0px 0px",transform:"scale(".concat(parseInt(s,10)/12,")")}),o&&oo()>11){var f=o.match(/[\d.]+/g),h=f?"rgba(".concat(f[0],", ").concat(f[1],", ").concat(f[2],", 0)"):"";Bl(t,Zh(Zh({},a),{},{background:"conic-gradient(from 90deg at 50% 50%,".concat(h," 0deg, ").concat(o," 360deg)")}))}else Bl(t,Zh(Zh({},a),{},{background:""}))}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var mX=A_,yX=1,bX=4;function wX(t){return mX(t,yX|bX)}var Br=wX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var I0=l.ref();function Qe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=arguments.length>1?arguments[1]:void 0,n=l.getCurrentInstance()?l.inject(l_,null):I0,r=l.computed(function(){return(n==null?void 0:n.value)||o_}),a=l.computed(function(){return Object.assign({},r.value[t],e)}),i=l.computed(function(){return r.value.classPrefix}),o=function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];var h=d[0];if(Je(c)){if(!h)return c;var v=/\{\s*([\w-]+)\s*\}/g,p=c.replace(v,function(g,m){return h?String(h[m]):""});return p}return Re(c)?d.length?c.apply(void 0,d):c(l.h):""};return{t:o,global:a,globalConfig:a,classPrefix:i}}var xX=function(e){var n=Br(o_),r=l.computed(function(){return Object.assign({},LH(n,e.globalConfig))});return l.provide(l_,r),I0.value||(I0.value=r.value),r};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ve(t){var e=Qe("classPrefix"),n=e.classPrefix;return l.computed(function(){return t?"".concat(n.value,"-").concat(t):n.value})}function Lt(){var t=Qe("classPrefix"),e=t.classPrefix;return{SIZE:l.computed(function(){return{small:"".concat(e.value,"-size-s"),medium:"".concat(e.value,"-size-m"),large:"".concat(e.value,"-size-l"),default:"",xs:"".concat(e.value,"-size-xs"),xl:"".concat(e.value,"-size-xl"),block:"".concat(e.value,"-size-full-width")}}),STATUS:l.computed(function(){return{loading:"".concat(e.value,"-is-loading"),loadMore:"".concat(e.value,"-is-load-more"),disabled:"".concat(e.value,"-is-disabled"),focused:"".concat(e.value,"-is-focused"),success:"".concat(e.value,"-is-success"),error:"".concat(e.value,"-is-error"),warning:"".concat(e.value,"-is-warning"),selected:"".concat(e.value,"-is-selected"),active:"".concat(e.value,"-is-active"),checked:"".concat(e.value,"-is-checked"),current:"".concat(e.value,"-is-current"),hidden:"".concat(e.value,"-is-hidden"),visible:"".concat(e.value,"-is-visible"),expanded:"".concat(e.value,"-is-expanded"),indeterminate:"".concat(e.value,"-is-indeterminate")}})}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var CX=l.defineComponent({name:"TLoadingGradient",setup:function(){var e=ve();return l.onMounted(function(){var n=l.getCurrentInstance().refs.circle;l.nextTick(function(){gX(n)})}),{classPrefix:e}},render:function(){var e=this.classPrefix,n="".concat(e,"-loading__gradient"),r=[n,"".concat(e,"-icon-loading")];return l.createVNode("svg",{class:r,viewBox:"0 0 12 12",version:"1.1",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("foreignObject",{x:"0",y:"0",width:"12",height:"12"},[l.createVNode("div",{class:"".concat(n,"-conic"),ref:"circle"},null)])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var _X=function(e,n,r,a){var i=(r-n)/2,o=e/(a/2);return o<1?i*o*o*o+n:(o-=2,i*(o*o*o+2)+n)};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vh={exports:{}},Cd={exports:{}};(function(){var t,e,n,r,a,i;typeof performance<"u"&&performance!==null&&performance.now?Cd.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Cd.exports=function(){return(t()-a)/1e6},e=process.hrtime,t=function(){var s;return s=e(),s[0]*1e9+s[1]},r=t(),i=process.uptime()*1e9,a=r-i):Date.now?(Cd.exports=function(){return Date.now()-n},n=Date.now()):(Cd.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(Jn);for(var SX=Cd.exports,lo=typeof window>"u"?Jn:window,ev=["moz","webkit"],cc="AnimationFrame",uc=lo["request"+cc],_d=lo["cancel"+cc]||lo["cancelRequest"+cc],Sd=0;!uc&&Sd<ev.length;Sd++)uc=lo[ev[Sd]+"Request"+cc],_d=lo[ev[Sd]+"Cancel"+cc]||lo[ev[Sd]+"CancelRequest"+cc];if(!uc||!_d){var A0=0,rS=0,$l=[],TX=1e3/60;uc=function(e){if($l.length===0){var n=SX(),r=Math.max(0,TX-(n-A0));A0=r+n,setTimeout(function(){var a=$l.slice(0);$l.length=0;for(var i=function(){if(!a[o].cancelled)try{a[o].callback(A0)}catch(c){setTimeout(function(){throw c},0)}},o=0;o<a.length;o++)i()},Math.round(r))}return $l.push({handle:++rS,callback:e,cancelled:!1}),rS},_d=function(e){for(var n=0;n<$l.length;n++)$l[n].handle===e&&($l[n].cancelled=!0)}}Vh.exports=function(t){return uc.call(lo,t)},Vh.exports.cancel=function(){_d.apply(lo,arguments)},Vh.exports.polyfill=function(t){t||(t=lo),t.requestAnimationFrame=uc,t.cancelAnimationFrame=_d};var N0=Vh.exports,Si=typeof window>"u",kX=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},qt=function(){return!Si&&document.addEventListener?function(t,e,n,r){t&&e&&n&&t.addEventListener(e,n,r)}:function(t,e,n){t&&e&&n&&t.attachEvent("on".concat(e),n)}}(),At=function(){return!Si&&document.removeEventListener?function(t,e,n,r){t&&e&&t.removeEventListener(e,n,r)}:function(t,e,n){t&&e&&t.detachEvent("on".concat(e),n)}}();function OX(t,e,n,r){var a=Re(n)?n:n.handleEvent,i=function(s){a(s),At(t,e,i,r)};qt(t,e,i,r)}function D0(t,e){if(!t||!e)return!1;if(e.indexOf(" ")!==-1)throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):" ".concat(t.className," ").indexOf(" ".concat(e," "))>-1}function Td(t,e){if(t){for(var n=t.className,r=(e||"").split(" "),a=0,i=r.length;a<i;a++){var o=r[a];o&&(t.classList?t.classList.add(o):D0(t,o)||(n+=" ".concat(o)))}t.classList||(t.className=n)}}function tv(t,e){if(!(!t||!e)){for(var n=e.split(" "),r=" ".concat(t.className," "),a=0,i=n.length;a<i;a++){var o=n[a];o&&(t.classList?t.classList.remove(o):D0(t,o)&&(r=r.replace(" ".concat(o," ")," ")))}t.classList||(t.className=kX(r))}}var dc=function(e,n){var r=Re(e)?e(n):e;return r?Je(r)?document.querySelector(r):r instanceof HTMLElement?r:document.body:document.body},aS=function(){if(process.env.NODE_ENV==="test-snap")return"body"},iS=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"body";return Je(e)?document.querySelector(e):Re(e)?e():e};function oS(t){return t&&t===t.window}function lS(t,e){if(Si||!t)return 0;var n="scrollTop",r=0;return oS(t)?r=t.pageYOffset:t instanceof Document?r=t.documentElement[n]:t&&(r=t[n]),r}function R0(t,e){var n=e.container,r=n===void 0?window:n,a=e.duration,i=a===void 0?450:a,o=e.easing,s=o===void 0?_X:o,c=lS(r),u=Date.now();return new Promise(function(d){var f=function(){var v=Date.now(),p=v-u,g=s(Math.min(p,i),c,t,i);oS(r)?r.scrollTo(window.pageXOffset,g):r instanceof Document||r.constructor.name==="HTMLDocument"?r.documentElement.scrollTop=g:r.scrollTop=g,p<i?N0(f):N0(d)};N0(f)})}var nv=function(e){var n=e.clientWidth,r=n===void 0?0:n,a=e.scrollWidth,i=a===void 0?0:a;return i>r},EX=function(e){if(!(e instanceof HTMLFormElement))throw new Error("target must be HTMLFormElement");var n=document.createElement("input");n.type="submit",n.hidden=!0,e.appendChild(n),n.click(),e.removeChild(n)};function sS(t,e){var n=t.getBoundingClientRect();if(e){var r=e.getBoundingClientRect();return n.top>=r.top&&n.left>=r.left&&n.bottom<=r.bottom&&n.right<=r.right}return n.top>=0&&n.left>=0&&n.bottom+80<=window.innerHeight&&n.right<=window.innerWidth}function cS(t,e){var n="";return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),n&&n.toLowerCase?n.toLowerCase():n}function M0(t){var e=t.parentNode;return!e||e.nodeName==="HTML"?!1:cS(t,"position")==="fixed"?!0:M0(e)}function uS(){var t=document,e=t.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||e.scrollTop,a=window.pageXOffset||n.scrollLeft||e.scrollLeft;return{scrollTop:r,scrollLeft:a}}function PX(){if(window.innerWidth!==void 0)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var IX=c_,AX=bd,NX=pd,DX=Ke,RX=ec,MX=Qo.exports,LX=jh,FX=Bh,BX="[object Map]",jX="[object Set]",$X=Object.prototype,UX=$X.hasOwnProperty;function zX(t){if(t==null)return!0;if(RX(t)&&(DX(t)||typeof t=="string"||typeof t.splice=="function"||MX(t)||FX(t)||NX(t)))return!t.length;var e=AX(t);if(e==BX||e==jX)return!t.size;if(LX(t))return!IX(t).length;for(var n in t)if(UX.call(t,n))return!1;return!0}var jr=zX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function HX(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(a);++r<a;)i[r]=t[r+e];return i}var L0=HX;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var WX=L0;function KX(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:WX(t,e,n)}var dS=KX,qX="\\ud800-\\udfff",GX="\\u0300-\\u036f",YX="\\ufe20-\\ufe2f",XX="\\u20d0-\\u20ff",JX=GX+YX+XX,QX="\\ufe0e\\ufe0f",ZX="\\u200d",VX=RegExp("["+ZX+qX+JX+QX+"]");function eJ(t){return VX.test(t)}var rv=eJ;function tJ(t){return t.split("")}var nJ=tJ,fS="\\ud800-\\udfff",rJ="\\u0300-\\u036f",aJ="\\ufe20-\\ufe2f",iJ="\\u20d0-\\u20ff",oJ=rJ+aJ+iJ,lJ="\\ufe0e\\ufe0f",sJ="["+fS+"]",F0="["+oJ+"]",B0="\\ud83c[\\udffb-\\udfff]",cJ="(?:"+F0+"|"+B0+")",hS="[^"+fS+"]",vS="(?:\\ud83c[\\udde6-\\uddff]){2}",pS="[\\ud800-\\udbff][\\udc00-\\udfff]",uJ="\\u200d",gS=cJ+"?",mS="["+lJ+"]?",dJ="(?:"+uJ+"(?:"+[hS,vS,pS].join("|")+")"+mS+gS+")*",fJ=mS+gS+dJ,hJ="(?:"+[hS+F0+"?",F0,vS,pS,sJ].join("|")+")",vJ=RegExp(B0+"(?="+B0+")|"+hJ+fJ,"g");function pJ(t){return t.match(vJ)||[]}var gJ=pJ,mJ=nJ,yJ=rv,bJ=gJ;function wJ(t){return yJ(t)?bJ(t):mJ(t)}var yS=wJ;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function xJ(t,e,n,r){var a=-1,i=t==null?0:t.length;for(r&&i&&(n=t[++a]);++a<i;)n=e(n,t[a],a,t);return n}var CJ=xJ;function _J(t){return function(e){return t==null?void 0:t[e]}}var SJ=_J,TJ=SJ,kJ={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},OJ=TJ(kJ),EJ=OJ,PJ=EJ,IJ=Zo,AJ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,NJ="\\u0300-\\u036f",DJ="\\ufe20-\\ufe2f",RJ="\\u20d0-\\u20ff",MJ=NJ+DJ+RJ,LJ="["+MJ+"]",FJ=RegExp(LJ,"g");function BJ(t){return t=IJ(t),t&&t.replace(AJ,PJ).replace(FJ,"")}var jJ=BJ,$J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function UJ(t){return t.match($J)||[]}var zJ=UJ,HJ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function WJ(t){return HJ.test(t)}var KJ=WJ,bS="\\ud800-\\udfff",qJ="\\u0300-\\u036f",GJ="\\ufe20-\\ufe2f",YJ="\\u20d0-\\u20ff",XJ=qJ+GJ+YJ,wS="\\u2700-\\u27bf",xS="a-z\\xdf-\\xf6\\xf8-\\xff",JJ="\\xac\\xb1\\xd7\\xf7",QJ="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ZJ="\\u2000-\\u206f",VJ=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",CS="A-Z\\xc0-\\xd6\\xd8-\\xde",eQ="\\ufe0e\\ufe0f",_S=JJ+QJ+ZJ+VJ,SS="['’]",TS="["+_S+"]",tQ="["+XJ+"]",kS="\\d+",nQ="["+wS+"]",OS="["+xS+"]",ES="[^"+bS+_S+kS+wS+xS+CS+"]",rQ="\\ud83c[\\udffb-\\udfff]",aQ="(?:"+tQ+"|"+rQ+")",iQ="[^"+bS+"]",PS="(?:\\ud83c[\\udde6-\\uddff]){2}",IS="[\\ud800-\\udbff][\\udc00-\\udfff]",fc="["+CS+"]",oQ="\\u200d",AS="(?:"+OS+"|"+ES+")",lQ="(?:"+fc+"|"+ES+")",NS="(?:"+SS+"(?:d|ll|m|re|s|t|ve))?",DS="(?:"+SS+"(?:D|LL|M|RE|S|T|VE))?",RS=aQ+"?",MS="["+eQ+"]?",sQ="(?:"+oQ+"(?:"+[iQ,PS,IS].join("|")+")"+MS+RS+")*",cQ="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uQ="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dQ=MS+RS+sQ,fQ="(?:"+[nQ,PS,IS].join("|")+")"+dQ,hQ=RegExp([fc+"?"+OS+"+"+NS+"(?="+[TS,fc,"$"].join("|")+")",lQ+"+"+DS+"(?="+[TS,fc+AS,"$"].join("|")+")",fc+"?"+AS+"+"+NS,fc+"+"+DS,uQ,cQ,kS,fQ].join("|"),"g");function vQ(t){return t.match(hQ)||[]}var pQ=vQ,gQ=zJ,mQ=KJ,yQ=Zo,bQ=pQ;function wQ(t,e,n){return t=yQ(t),e=n?void 0:e,e===void 0?mQ(t)?bQ(t):gQ(t):t.match(e)||[]}var xQ=wQ,CQ=CJ,_Q=jJ,SQ=xQ,TQ="['’]",kQ=RegExp(TQ,"g");function OQ(t){return function(e){return CQ(SQ(_Q(e).replace(kQ,"")),t,"")}}var j0=OQ;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var EQ=dS,PQ=rv,IQ=yS,AQ=Zo;function NQ(t){return function(e){e=AQ(e);var n=PQ(e)?IQ(e):void 0,r=n?n[0]:e.charAt(0),a=n?EQ(n,1).join(""):e.slice(1);return r[t]()+a}}var DQ=NQ,RQ=DQ,MQ=RQ("toUpperCase"),av=MQ,LQ=Zo,FQ=av;function BQ(t){return FQ(LQ(t).toLowerCase())}var jQ=BQ,$Q=jQ,UQ=j0,zQ=UQ(function(t,e,n){return e=e.toLowerCase(),t+(n?$Q(e):e)}),Ti=zQ;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var HQ=j0,WQ=HQ(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),hc=WQ;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ul(t){var e;return ot(t)&&"defaultNode"in t?e=t.defaultNode:(l.isVNode(t)||Je(t))&&(e=t),e}function LS(t){var e=[],n=function(a){if(Ke(a))return a.forEach(function(i){if(i.children&&Ke(i.children)){if(i.type!==l.Fragment)return;n(i.children)}else e.push(i)}),e};return n(t)}function iv(t){return ot(t)&&"params"in t?t.params:{}}function KQ(t){return ot(t)&&"slotFirst"in t?t.slotFirst:{}}function FS(t,e,n){var r,a,i,o,s=(r=(a=t.$slots)[Ti(n)])===null||r===void 0?void 0:r.call(a,e);return s||(s=(i=(o=t.$slots)[hc(n)])===null||i===void 0?void 0:i.call(o,e),s)?s:null}var jn=function(e,n,r){var a=iv(r),i=Ul(r),o;if(n in e&&(o=e[n]),!(o===!1||o===null)){if(o===!0&&i)return FS(e,a,n)||i;if(Re(o))return o(l.h,a);var s=[void 0,a,""].includes(o);return s&&(e.$slots[Ti(n)]||e.$slots[hc(n)])?FS(e,a,n):o}},qQ=function(e,n,r){var a=Ul(r);return jn(e,n,r)||a},Ja=function(e,n,r,a){var i=iv(a),o=Ul(a),s=i?{params:i}:void 0,c=jn(e,n,s),u=jn(e,r,s),d=jr(c)?u:c;return jr(d)?o:d};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var GQ={attach:{type:[String,Function],default:""},content:{type:[String,Function]},default:{type:[String,Function]},delay:{type:Number,default:0},fullscreen:Boolean,indicator:{type:[Boolean,Function],default:!0},inheritColor:Boolean,loading:{type:Boolean,default:!0},preventScrollThrough:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},size:{type:String,default:"medium"},text:{type:[String,Function]},zIndex:{type:Number}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ov=function(e,n){var r=Re(e)?l.computed(e):l.ref(e),a=Re(n)?l.computed(n):l.ref(n),i=l.ref(),o=function(){i.value=aS()||dc(r.value,a.value)};return l.onMounted(function(){return o()}),l.watch([r,a],function(){return o()}),i};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var YQ=function(){return{name:ve("loading"),centerClass:ve("loading--center"),fullscreenClass:ve("loading__fullscreen"),lockClass:ve("loading--lock"),overlayClass:ve("loading__overlay"),relativeClass:ve("loading__parent"),fullClass:ve("loading--full"),inheritColorClass:ve("loading--inherit-color")}},$0=l.defineComponent({name:"TLoading",inheritAttrs:!1,props:GQ,setup:function(e,n){var r=n.slots,a=l.ref(!1),i=YQ(),o=i.name,s=i.centerClass,c=i.fullscreenClass,u=i.lockClass,d=i.overlayClass,f=i.relativeClass,h=i.fullClass,v=i.inheritColorClass,p=ve(),g=Lt(),m=g.SIZE,y=function(){a.value=!1;var M=setTimeout(function(){a.value=!0,clearTimeout(M)},e.delay)},b=ov(function(){return e.attach}),w=l.computed(function(){return!!(!e.delay||e.delay&&a.value)}),x=l.computed(function(){var A={};return e.zIndex!==void 0&&(A.zIndex=e.zIndex),["small","medium","large"].includes(e.size)||(A["font-size"]=e.size),A}),C=l.computed(function(){return!!(e.default||r.default||e.content||r.content)}),S=l.computed(function(){return e.preventScrollThrough&&e.fullscreen}),_=l.computed(function(){return!!(e.text||r.text)}),O=l.computed(function(){return C.value&&e.loading&&w.value}),N=l.computed(function(){return e.fullscreen&&e.loading&&w.value}),B=l.computed(function(){return e.attach&&e.loading&&w.value}),T=l.computed(function(){return e.attach&&e.loading&&w.value}),k=l.computed(function(){var A=[s.value,m.value[e.size],V({},v.value,e.inheritColor)],M=[o.value,c.value,s.value,d.value];return{baseClasses:A,attachClasses:A.concat([o.value,h.value,V({},d.value,e.showOverlay)]),withContentClasses:A.concat([o.value,h.value,V({},d.value,e.showOverlay)]),fullScreenClasses:M,normalClasses:A.concat([o.value])}}),E=l.toRefs(e),I=E.loading;return l.watch([I],function(A){var M=$e(A,1),$=M[0];$?(y(),S.value&&Td(document.body,u.value)):S.value&&tv(document.body,u.value)}),l.onMounted(function(){e.delay&&y()}),{classPrefix:p,relativeClass:f,delayShowLoading:a,styles:x,showText:_,hasContent:C,classes:k,lockFullscreen:S,showWrapLoading:O,showNormalLoading:B,showFullScreenLoading:N,showAttachedLoading:T,teleportElement:b}},render:function(){var e=this,n=this.classes,r=n.fullScreenClasses,a=n.baseClasses,i=n.withContentClasses,o=n.attachClasses,s=n.normalClasses,c=l.createVNode(CX,{size:this.size},null),u=this.loading&&jn(this,"indicator",c),d=this.showText&&l.createVNode("div",{class:"".concat(this.classPrefix,"-loading__text")},[jn(this,"text")]);return this.fullscreen?!this.showFullScreenLoading||!this.loading?null:l.createVNode(l.Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[l.createVNode("div",l.mergeProps({class:r,style:e.styles},e.$attrs),[l.createVNode("div",{class:a},[u,d])])]}}):this.hasContent?l.createVNode("div",l.mergeProps({class:this.relativeClass},this.$attrs),[Ja(this,"default","content"),this.showWrapLoading&&l.createVNode("div",{class:i,style:this.styles},[u,d])]):this.attach?!this.showAttachedLoading||!this.loading?null:l.createVNode(l.Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[l.createVNode("div",l.mergeProps({class:o,style:e.styles},e.$attrs),[u,d])]}}):this.loading?l.createVNode("div",l.mergeProps({class:s,style:this.styles},this.$attrs),[u,d]):null}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function BS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function XQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BS(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vc=null;function JQ(t){var e=Wh({fullscreen:!1,attach:"body",loading:!0,preventScrollThrough:!0},t);return e}function jS(t){var e=JQ(t);if(e.fullscreen&&vc)return vc;var n=l.defineComponent({setup:function(){var f=l.reactive(e);return{loadingOptions:f}},render:function(){return l.h($0,XQ({},this.loadingOptions))}}),r=dc(e.fullscreen?"body":e.attach),a=l.createApp(n),i=a.mount(document.createElement("div")),o=ve("loading__parent--relative").value,s=ve("loading--lock"),c=e.preventScrollThrough&&e.fullscreen;c&&Td(document.body,s.value),r?Td(r,o):console.error("attach is not exist");var u={hide:function(){i.loading=!1,tv(r,o),tv(document.body,s.value),a.unmount()}};return u}function $S(t){if(t===!0)return vc=jS({fullscreen:!0,loading:!0,attach:"body",preventScrollThrough:!0}),vc;if(t===!1){var e;(e=vc)===null||e===void 0||e.hide(),vc=null;return}return jS(t)}var U0=$S;U0.install=function(t){t.config.globalProperties.$loading=$S};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var QQ=JC,ZQ=wd;function VQ(t,e){return t&&QQ(t,e,ZQ)}var US=VQ,eZ=$h,tZ=k0,nZ=1,rZ=2;function aZ(t,e,n,r){var a=n.length,i=a,o=!r;if(t==null)return!i;for(t=Object(t);a--;){var s=n[a];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<i;){s=n[a];var c=s[0],u=t[c],d=s[1];if(o&&s[2]){if(u===void 0&&!(c in t))return!1}else{var f=new eZ;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?tZ(d,u,nZ|rZ,r,f):h))return!1}}return!0}var iZ=aZ,oZ=ot;function lZ(t){return t===t&&!oZ(t)}var zS=lZ,sZ=zS,cZ=wd;function uZ(t){for(var e=cZ(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,sZ(a)]}return e}var dZ=uZ;function fZ(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var HS=fZ,hZ=iZ,vZ=dZ,pZ=HS;function gZ(t){var e=vZ(t);return e.length==1&&e[0][2]?pZ(e[0][0],e[0][1]):function(n){return n===t||hZ(n,t,e)}}var mZ=gZ,yZ=k0,bZ=je,wZ=Z_,xZ=O0,CZ=zS,_Z=HS,SZ=sc,TZ=1,kZ=2;function OZ(t,e){return xZ(t)&&CZ(e)?_Z(SZ(t),e):function(n){var r=bZ(n,t);return r===void 0&&r===e?wZ(n,t):yZ(e,r,TZ|kZ)}}var EZ=OZ,PZ=Qh;function IZ(t){return function(e){return PZ(e,t)}}var AZ=IZ,NZ=V_,DZ=AZ,RZ=O0,MZ=sc;function LZ(t){return RZ(t)?NZ(MZ(t)):DZ(t)}var FZ=LZ,BZ=mZ,jZ=EZ,$Z=ac,UZ=Ke,zZ=FZ;function HZ(t){return typeof t=="function"?t:t==null?$Z:wt(t)=="object"?UZ(t)?jZ(t[0],t[1]):BZ(t):zZ(t)}var lv=HZ,WZ=Dh,KZ=US,qZ=lv;function GZ(t,e){var n={};return e=qZ(e),KZ(t,function(r,a,i){WZ(n,e(r,a,i),r)}),n}var YZ=GZ,z0=Symbol("TdLoading"),WS=function(e,n){var r=n.modifiers,a=r.fullscreen,i=r.inheritColor,o={attach:function(){return e},fullscreen:a??!1,inheritColor:i??!1,loading:n.value};ot(n.value)&&YZ(n.value,function(s,c){o[c]=s}),e[z0]={options:o,instance:U0(o)}},KS={mounted:function(e,n){n.value&&WS(e,n)},updated:function(e,n){var r=e[z0],a=n.value,i=n.oldValue;if(!K_(a,i)){var o,s=(o=a==null?void 0:a.loading)!==null&&o!==void 0?o:a;s?WS(e,n):r==null||r.instance.hide()}},unmounted:function(e){var n;(n=e[z0])===null||n===void 0||n.instance.hide()}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Be(t,e,n){var r=t;return r.install=function(a,i){a.component(e||i||r.name,t),n&&a.directive(n.name,n.comp)},r}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lr=Be($0,$0.name,{name:"loading",comp:KS});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var XZ={block:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},form:{type:String,default:void 0},ghost:Boolean,href:{type:String,default:""},icon:{type:Function},loading:Boolean,loadingProps:{type:Object},shape:{type:String,default:"rectangle",validator:function(e){return e?["rectangle","square","round","circle"].includes(e):!0}},size:{type:String,default:"medium",validator:function(e){return e?["extra-small","small","medium","large"].includes(e):!0}},suffix:{type:Function},tag:{type:String,validator:function(e){return e?["button","a","div"].includes(e):!0}},theme:{type:String,validator:function(e){return e?["default","primary","danger","warning","success"].includes(e):!0}},type:{type:String,default:"button",validator:function(e){return e?["submit","reset","button"].includes(e):!0}},variant:{type:String,default:"base",validator:function(e){return e?["base","outline","dashed","text"].includes(e):!0}},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var JZ=Kh.expand,QZ=Kh.ripple,ZZ=Kh.fade;function VZ(){var t=Qe("animation"),e=t.globalConfig,n=function(a){var i,o,s=e.value;return s&&!((i=s.exclude)!==null&&i!==void 0&&i.includes(a))&&((o=s.include)===null||o===void 0?void 0:o.includes(a))};return{keepExpand:n(JZ),keepRipple:n(QZ),keepFade:n(ZZ)}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qS(t,e){var n=Object.keys(e);n.forEach(function(r){t.style[r]=e[r]})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var H0=200,eV="rgba(0, 0, 0, 0)",tV="rgba(0, 0, 0, 0.35)",nV=function(e,n){var r;if(n)return n;if(e!=null&&(r=e.dataset)!==null&&r!==void 0&&r.ripple){var a=e.dataset.ripple;return a}var i=getComputedStyle(e).getPropertyValue("--ripple-color");return i||tV};function el(t,e){var n=l.ref(null),r=ve(),a=VZ(),i=a.keepRipple,o=function(c){var u=t.value,d=nV(u,e==null?void 0:e.value);if(!(c.button!==0||!t||!i)&&!(u.classList.contains("".concat(r.value,"-is-active"))||u.classList.contains("".concat(r.value,"-is-disabled"))||u.classList.contains("".concat(r.value,"-is-checked"))||u.classList.contains("".concat(r.value,"-is-loading")))){var f=getComputedStyle(u),h=parseInt(f.borderWidth,10),v=h>0?h:0,p=u.offsetWidth,g=u.offsetHeight;n.value.parentNode===null&&(qS(n.value,{position:"absolute",left:"".concat(0-v,"px"),top:"".concat(0-v,"px"),width:"".concat(p,"px"),height:"".concat(g,"px"),borderRadius:f.borderRadius,pointerEvents:"none",overflow:"hidden"}),u.appendChild(n.value));var m=document.createElement("div");qS(m,{marginTop:"0",marginLeft:"0",right:"".concat(p,"px"),width:"".concat(p+20,"px"),height:"100%",transition:"transform ".concat(H0,"ms cubic-bezier(.38, 0, .24, 1), background ").concat(H0*2,"ms linear"),transform:"skewX(-8deg)",pointerEvents:"none",position:"absolute",zIndex:0,backgroundColor:d,opacity:"0.9"});for(var y=new WeakMap,b=u.children.length,w=0;w<b;++w){var x=u.children[w];x.style.zIndex===""&&x!==n.value&&(x.style.zIndex="1",y.set(x,!0))}var C=u.style.position?u.style.position:getComputedStyle(u).position;(C===""||C==="static")&&(u.style.position="relative"),n.value.insertBefore(m,n.value.firstChild),setTimeout(function(){m.style.transform="translateX(".concat(p,"px)")},0);var S=function(){m.style.backgroundColor=eV,t.value&&(t.value.removeEventListener("pointerup",S,!1),t.value.removeEventListener("pointerleave",S,!1),setTimeout(function(){m.remove(),n.value.children.length===0&&n.value.remove()},H0*2+100))};t.value.addEventListener("pointerup",S,!1),t.value.addEventListener("pointerleave",S,!1)}};l.onMounted(function(){var s=t==null?void 0:t.value;s&&(n.value=document.createElement("div"),s.addEventListener("pointerdown",o,!1))}),l.onUnmounted(function(){var s;t==null||(s=t.value)===null||s===void 0||s.removeEventListener("pointerdown",o,!1)})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function GS(t,e,n){var r,a,i,o,s=(r=(a=t.slots)[Ti(e)])===null||r===void 0?void 0:r.call(a,n);return s&&s.filter(function(c){return c.type.toString()!=="Symbol(v-cmt)"}).length||(s=(i=(o=t.slots)[hc(e)])===null||i===void 0?void 0:i.call(o,n),s&&s.filter(function(c){return c.type.toString()!=="Symbol(v-cmt)"}).length)?s:null}function YS(t){if([void 0,null,""].includes(t))return!0;var e=t instanceof Array?t:[t],n=e.filter(function(r){var a;return(r==null||(a=r.type)===null||a===void 0?void 0:a.toString())!=="Symbol(Comment)"});return!n.length}var We=function(){var e=l.getCurrentInstance();return function(n,r){var a=iv(r),i=Ul(r),o=KQ(r),s;if(Object.keys(e.props).includes(n)&&(s=e.props[n]),!(s===!1||s===null)){if(s===!0)return GS(e,n,a)||i;if(Re(s))return s(l.h,a);var c=[void 0,a,""].includes(s);return(c||o)&&(e.slots[Ti(n)]||e.slots[hc(n)])?GS(e,n,a):s}}},Qa=function(){var e=We();return function(n,r){var a=Ul(r);return e(n,r)||a}},Ut=function(){var e=We();return function(n,r,a){var i=iv(a),o=Ul(a),s=i?{params:i}:void 0,c=e(n,s),u=e(r,s),d=YS(c)?u:c;return YS(d)?o:d}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var rV=_i,aV=oa,iV="[object Boolean]";function oV(t){return t===!0||t===!1||aV(t)&&rV(t)==iV}var Nn=oV;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vt(t){var e=l.getCurrentInstance(),n=l.computed(function(){return e.props.disabled}),r=l.inject("formDisabled",Object.create(null));return l.computed(function(){var a,i,o;return Nn(t==null||(a=t.beforeDisabled)===null||a===void 0?void 0:a.value)?t.beforeDisabled.value:Nn(n.value)?n.value:Nn(t==null||(i=t.afterDisabled)===null||i===void 0?void 0:i.value)?t.afterDisabled.value:Nn((o=r.disabled)===null||o===void 0?void 0:o.value)?r.disabled.value:!1})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function XS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XS(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cv=l.defineComponent({name:"TButton",props:XZ,setup:function(e,n){var r=n.attrs,a=n.slots,i=We(),o=Ut(),s=ve("button"),c=Lt(),u=c.STATUS,d=c.SIZE,f=l.ref();el(f);var h=Vt(),v=l.computed(function(){var g=e.theme,m=e.variant;return g||(m==="base"?"primary":"default")}),p=l.computed(function(){return["".concat(s.value),"".concat(s.value,"--variant-").concat(e.variant),"".concat(s.value,"--theme-").concat(v.value),V(V(V(V(V(V({},d.value[e.size],e.size!=="medium"),u.value.disabled,h.value),u.value.loading,e.loading),"".concat(s.value,"--shape-").concat(e.shape),e.shape!=="rectangle"),"".concat(s.value,"--ghost"),e.ghost),d.value.block,e.block)]});return function(){var g=o("default","content"),m=e.loading?l.createVNode(lr,sv({inheritColor:!0},e.loadingProps),null):i("icon"),y=m&&!g,b=e.suffix||a.suffix?l.createVNode("span",{className:"".concat(s.value,"__suffix")},[i("suffix")]):null;g=g?l.createVNode("span",{class:"".concat(s.value,"__text")},[g]):"",m&&(g=[m,g]),b&&(g=[g].concat(b));var w=function(){return!e.tag&&e.href?"a":e.tag||"button"},x={class:[].concat(Ee(p.value),[V({},"".concat(s.value,"--icon-only"),y)]),type:e.type,disabled:h.value||e.loading,href:e.href,tabindex:h.value?void 0:"0"};return l.h(w(),sv(sv(sv({ref:f},r),x),{},{onClick:e.onClick}),[g])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zt=Be(cv);function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function QS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lV(t){var e=["fillOpacity","fillRule","clipRule"];return e.includes(t)?t.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase():t}function ct(t,e){var n=Object.keys(t.attrs).reduce((r,a)=>(r[lV(a)]=t.attrs[a],r),{});return l.h(t.tag,QS(QS({},n),e),(t.children||[]).map(r=>ct(r,{})))}var sV="t",ZS={classPrefix:sV};function cV(){var{classPrefix:t}=ZS;return{SIZE:{default:"",xs:"".concat(t,"-size-xs"),small:"".concat(t,"-size-s"),medium:"".concat(t,"-size-m"),large:"".concat(t,"-size-l"),xl:"".concat(t,"-size-xl"),block:"".concat(t,"-size-full-width")},STATUS:{loading:"".concat(t,"-is-loading"),disabled:"".concat(t,"-is-disabled"),focused:"".concat(t,"-is-focused"),success:"".concat(t,"-is-success"),error:"".concat(t,"-is-error"),warning:"".concat(t,"-is-warning"),selected:"".concat(t,"-is-selected"),active:"".concat(t,"-is-active"),checked:"".concat(t,"-is-checked"),current:"".concat(t,"-is-current"),hidden:"".concat(t,"-is-hidden"),visible:"".concat(t,"-is-visible"),expanded:"".concat(t,"-is-expanded"),indeterminate:"".concat(t,"-is-indeterminate")}}}function ut(t){var e=cV().SIZE,n=l.computed(()=>t.value in e?e[t.value]:""),r=l.computed(()=>t.value===void 0||t.value in e?{}:{fontSize:t.value});return{style:r,className:n}}function VS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function e2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VS(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var uV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 2v16h16V4H4zm9 2.5V11h4.5v2H13v4.5h-2V13H6.5v-2H11V6.5h2z"}}]},dV=l.defineComponent({name:"AddRectangleIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-add-rectangle",a.value]),s=l.computed(()=>e2(e2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(uV,c.value)}});function t2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function n2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 4v7h7v2h-7v7h-2v-7H4v-2h7V4h2z"}}]},uv=l.defineComponent({name:"AddIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-add",a.value]),s=l.computed(()=>n2(n2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(fV,c.value)}});function r2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function a2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15 12h4.5L12 22 4.5 12H9V2h6v10z"}}]},vV=l.defineComponent({name:"ArrowTriangleDownFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-arrow-triangle-down-filled",a.value]),s=l.computed(()=>a2(a2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(hV,c.value)}});function i2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function o2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15 12h4.5L12 2 4.5 12H9v10h6V12z"}}]},gV=l.defineComponent({name:"ArrowTriangleUpFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-arrow-triangle-up-filled",a.value]),s=l.computed(()=>o2(o2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(pV,c.value)}});function l2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function s2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 4h16v2H4V4zm8 3.59l6.91 6.91-1.41 1.41-4.5-4.5V21h-2v-9.59l-4.5 4.5-1.41-1.41L12 7.59z"}}]},yV=l.defineComponent({name:"BacktopIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-backtop",a.value]),s=l.computed(()=>s2(s2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(mV,c.value)}});function c2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function u2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 26 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 1.59l6.17 6.17 7.07 7.07L23.41 21 22 22.41l-2.97-2.96A12.5 12.5 0 011.08 12.3L1 12l.1-.3c.77-2.4 2.24-4.5 4.18-6.02L2.59 3 4 1.59zM6.7 7.1A10.53 10.53 0 003.1 12a10.5 10.5 0 0014.45 5.97l-1.8-1.8a5 5 0 01-6.93-6.93L6.7 7.11zm3.6 3.6a3 3 0 004 4l-4-4zM13 5c-.58 0-1.14.05-1.7.14l-.98.16L10 3.32l.99-.16A12.5 12.5 0 0124.9 11.7l.1.31-.1.3c-.41 1.3-1.03 2.5-1.82 3.58l-.59.8-1.61-1.18.59-.8c.6-.82 1.08-1.73 1.42-2.7A10.5 10.5 0 0013 5zm.51 1.93l.96.29a5 5 0 013.31 3.31l.3.96-1.92.58-.3-.95a3 3 0 00-1.98-1.99l-.95-.3.58-1.9z"}}]},wV=l.defineComponent({name:"BrowseOffIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-browse-off",a.value]),s=l.computed(()=>u2(u2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(bV,c.value)}});function d2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function f2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"g",attrs:{clipPath:"url(#clip0_8726_7319)"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2.1 12a10.5 10.5 0 0019.8 0 10.5 10.5 0 00-19.8 0zm-2.01-.3a12.5 12.5 0 0123.82 0l.1.3-.1.3a12.5 12.5 0 01-23.82 0l-.1-.3.1-.3zM12 9a3 3 0 100 6 3 3 0 000-6zm-5 3a5 5 0 1110 0 5 5 0 01-10 0z"}}]}]},W0=l.defineComponent({name:"BrowseIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-browse",a.value]),s=l.computed(()=>f2(f2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(xV,c.value)}});function h2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function v2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var CV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M6 4V1.5h2V4h8V1.5h2V4h4v18H2V4h4zM4 6v3h16V6H4zm16 5H4v9h16v-9z"}}]},p2=l.defineComponent({name:"CalendarIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-calendar",a.value]),s=l.computed(()=>v2(v2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(CV,c.value)}});function g2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function m2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _V={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15 12L9.5 6.5v11L15 12z"}}]},SV=l.defineComponent({name:"CaretRightSmallIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-caret-right-small",a.value]),s=l.computed(()=>m2(m2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(_V,c.value)}});function y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function b2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var TV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM7.5 10.59l3 3 6-6L17.91 9l-7.41 7.41L6.09 12l1.41-1.41z"}}]},so=l.defineComponent({name:"CheckCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-check-circle-filled",a.value]),s=l.computed(()=>b2(b2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(TV,c.value)}});function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function x2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var kV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M20.99 7.38l-10.61 10.6L4 11.63l1.42-1.41 4.95 4.95 9.2-9.2 1.4 1.42z"}}]},K0=l.defineComponent({name:"CheckIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-check",a.value]),s=l.computed(()=>x2(x2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(kV,c.value)}});function C2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var OV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M17.5 8.09l-5.5 5.5-5.5-5.5L5.09 9.5 12 16.41l6.91-6.91-1.41-1.41z"}}]},dv=l.defineComponent({name:"ChevronDownIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-down",a.value]),s=l.computed(()=>_2(_2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(OV,c.value)}});function S2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function T2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var EV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M18.41 7.5l-4.5 4.5 4.5 4.5L17 17.91 11.09 12 17 6.09l1.41 1.41zm-6.5 0L7.41 12l4.5 4.5-1.41 1.41L4.59 12l5.91-5.91 1.41 1.41z"}}]},PV=l.defineComponent({name:"ChevronLeftDoubleIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-left-double",a.value]),s=l.computed(()=>T2(T2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(EV,c.value)}});function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function O2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var IV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.91 17.5l-5.5-5.5 5.5-5.5-1.41-1.41L7.59 12l6.91 6.91 1.41-1.41z"}}]},pc=l.defineComponent({name:"ChevronLeftIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-left",a.value]),s=l.computed(()=>O2(O2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(IV,c.value)}});function E2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function P2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var AV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 3a9 9 0 100 18 9 9 0 000-18zM1 12a11 11 0 1122 0 11 11 0 01-22 0zm9.5-5.41L15.91 12l-5.41 5.41L9.09 16l4-4-4-4 1.41-1.41z"}}]},NV=l.defineComponent({name:"ChevronRightCircleIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-right-circle",a.value]),s=l.computed(()=>P2(P2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(AV,c.value)}});function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function A2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var DV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M5.59 16.5l4.5-4.5-4.5-4.5L7 6.09 12.91 12 7 17.91 5.59 16.5zm6.5 0l4.5-4.5-4.5-4.5 1.41-1.41L19.41 12l-5.91 5.91-1.41-1.41z"}}]},RV=l.defineComponent({name:"ChevronRightDoubleIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-right-double",a.value]),s=l.computed(()=>A2(A2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(DV,c.value)}});function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function D2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var MV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M8.09 17.5l5.5-5.5-5.5-5.5L9.5 5.09 16.41 12 9.5 18.91 8.09 17.5z"}}]},tl=l.defineComponent({name:"ChevronRightIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-right",a.value]),s=l.computed(()=>D2(D2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(MV,c.value)}});function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function M2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M17.5 15.91l-5.5-5.5-5.5 5.5-1.41-1.41L12 7.59l6.91 6.91-1.41 1.41z"}}]},L2=l.defineComponent({name:"ChevronUpIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-chevron-up",a.value]),s=l.computed(()=>M2(M2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(LV,c.value)}});function F2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function B2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var FV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM8.82 7.4L12 10.6l3.18-3.19 1.42 1.42L13.4 12l3.19 3.18-1.42 1.42L12 13.4 8.82 16.6 7.4 15.18 10.6 12 7.4 8.82 8.82 7.4z"}}]},gc=l.defineComponent({name:"CloseCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-close-circle-filled",a.value]),s=l.computed(()=>B2(B2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(FV,c.value)}});function j2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var BV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M7.05 5.64L12 10.59l4.95-4.95 1.41 1.41L13.41 12l4.95 4.95-1.41 1.41L12 13.41l-4.95 4.95-1.41-1.41L10.59 12 5.64 7.05l1.41-1.41z"}}]},Za=l.defineComponent({name:"CloseIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-close",a.value]),s=l.computed(()=>$2($2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(BV,c.value)}});function U2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function z2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h13v5.5h-2V4H4v9h3.5v2H2V2zm7 7h13v13H9V9zm2 2v9h9v-9h-9z"}}]},$V=l.defineComponent({name:"CopyIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-copy",a.value]),s=l.computed(()=>z2(z2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(jV,c.value)}});function H2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function W2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var UV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M7.5 1h9v3H22v2h-2.03l-.5 17H4.53l-.5-17H2V4h5.5V1zm2 3h5V3h-5v1zM6.03 6l.44 15h11.06l.44-15H6.03zM13 8v11h-2V8h2z"}}]},q0=l.defineComponent({name:"DeleteIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-delete",a.value]),s=l.computed(()=>W2(W2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(UV,c.value)}});function K2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function q2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 3v9.59l3.5-3.5 1.41 1.41L12 16.41 6.09 10.5 7.5 9.09l3.5 3.5V3h2zM4.5 14v5h15v-5h2v7h-19v-7h2z"}}]},HV=l.defineComponent({name:"DownloadIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-download",a.value]),s=l.computed(()=>q2(q2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(zV,c.value)}});function G2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Y2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var WV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M16.83 1.42l5.75 5.75L7.75 22H2v-5.75L16.83 1.42zm0 8.68l2.92-2.93-2.92-2.93-2.93 2.93 2.93 2.93zm-4.34-1.51L4 17.07V20h2.93l8.48-8.49L12.5 8.6z"}}]},KV=l.defineComponent({name:"Edit1Icon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-edit-1",a.value]),s=l.computed(()=>Y2(Y2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(WV,c.value)}});function X2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function J2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 10.5h3v3H3v-3zm7.5 0h3v3h-3v-3zm7.5 0h3v3h-3v-3z"}}]},GV=l.defineComponent({name:"EllipsisIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-ellipsis",a.value]),s=l.computed(()=>J2(J2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(qV,c.value)}});function Q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Z2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var YV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"}}]},ki=l.defineComponent({name:"ErrorCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-error-circle-filled",a.value]),s=l.computed(()=>Z2(Z2({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(YV,c.value)}});function V2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function eT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V2(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var XV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 2v14.5h-2V2h2zm-2 17h2v2h-2v-2z"}}]},JV=l.defineComponent({name:"ErrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-error",a.value]),s=l.computed(()=>eT(eT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(XV,c.value)}});function tT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function nT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var QV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M6 1h9.41L21 6.59V19H6V1zm2 2v14h11V9h-6V3H8zm7 .41V7h3.59L15 3.41zM4 5v16h11v2H2V5h2z"}}]},ZV=l.defineComponent({name:"FileCopyIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file-copy",a.value]),s=l.computed(()=>nT(nT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(QV,c.value)}});function rT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function aT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var VV={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 1h12.41L21 6.59V23H3V1zm2 2v18h14V9h-6V3H5zm10 .41V7h3.59L15 3.41zM15 10v1.65a2 2 0 01-.61 1.44l-.95.91.95.91c.39.38.61.9.61 1.44V18h-2v-1.65l-1-.96-1 .96V18H9v-1.65a2 2 0 01.61-1.44l.95-.91-.95-.91A2 2 0 019 11.65V10h2v1.65l1 .96 1-.96V10h2z"}}]},eee=l.defineComponent({name:"FileExcelIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file-excel",a.value]),s=l.computed(()=>aT(aT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(VV,c.value)}});function iT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function oT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 1h12.41L21 6.59V11h-2V9h-6V3H5v18h16v2H3V1zm12 2.41V7h3.59L15 3.41zM6 12h3.71c.71 0 1.29.58 1.29 1.29v2.42c0 .71-.58 1.29-1.29 1.29H8v3H6v-8zm2 3h1v-1H8v1zm3.5-3h3.71c.71 0 1.29.58 1.29 1.29v5.42c0 .71-.58 1.29-1.29 1.29H11.5v-8zm2 2v4h1v-4h-1zm3.5-.71c0-.71.58-1.29 1.29-1.29h3.38v2H19v1h2.67v2H19v3h-2v-6.71z"}}]},nee=l.defineComponent({name:"FilePdfIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file-pdf",a.value]),s=l.computed(()=>oT(oT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(tee,c.value)}});function lT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ree={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 1h12.41L21 6.59V23H3V1zm2 2v18h14V9h-6V3H5zm10 .41V7h3.59L15 3.41zM9 10h4a2 2 0 012 2v1.6a2 2 0 01-2 2h-2V18H9v-8zm2 3.6h2V12h-2v1.6z"}}]},aee=l.defineComponent({name:"FilePowerpointIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file-powerpoint",a.value]),s=l.computed(()=>sT(sT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(ree,c.value)}});function cT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function uT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var iee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 1h12.41L21 6.59V23H3V1zm2 2v18h14V9h-6V3H5zm10 .41V7h3.59L15 3.41zM10 11v5h1v-5h2v5h1v-5h2v5a2 2 0 01-2 2h-4a2 2 0 01-2-2v-5h2z"}}]},oee=l.defineComponent({name:"FileWordIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file-word",a.value]),s=l.computed(()=>uT(uT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(iee,c.value)}});function dT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var lee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M3 1h12.41L21 6.59V23H3V1zm2 2v18h14V9h-6V3H5zm10 .41V7h3.59L15 3.41z"}}]},see=l.defineComponent({name:"FileIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-file",a.value]),s=l.computed(()=>fT(fT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(lee,c.value)}});function hT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function vT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2.57 3h18.86l-6.93 9.82V21h-5v-8.18L2.57 3zm3.86 2l5.07 7.18V19h1v-6.82L17.57 5H6.43z"}}]},uee=l.defineComponent({name:"FilterIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-filter",a.value]),s=l.computed(()=>vT(vT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(cee,c.value)}});function pT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var dee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zm-.17-11.11c.43-.53.97-.97 1.4-1.32A2 2 0 0012 7a2 2 0 00-1.89 1.33l-.33.95L7.9 8.6l.34-.94a4 4 0 116.24 4.47 7 7 0 00-1.1 1.01c-.27.34-.37.61-.37.85v1.25h-2V14c0-.87.39-1.57.83-2.11zM11 18.25v-2h2v2h-2z"}}]},mT=l.defineComponent({name:"HelpCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-help-circle-filled",a.value]),s=l.computed(()=>gT(gT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(dee,c.value)}});function yT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v10h-2V4H4v9.59l5-5L14.41 14 13 15.41l-4-4-5 5V20h8v2H2V2zm13.55 5a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0zm3.62 6.76L19 17.59l2.83-2.83 1.41 1.41L20.41 19l2.83 2.83-1.41 1.41L19 20.41l-2.83 2.83-1.41-1.41L17.59 19l-2.83-2.83 1.41-1.41z"}}]},wT=l.defineComponent({name:"ImageErrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-image-error",a.value]),s=l.computed(()=>bT(bT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(fee,c.value)}});function xT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function CT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 18h13.59L9 11.41l-5 5V20zm16-.41V4H4v9.59l5-5 11 11zM15.55 7a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0z"}}]},_T=l.defineComponent({name:"ImageIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-image",a.value]),s=l.computed(()=>CT(CT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(hee,c.value)}});function ST(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function TT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ST(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ST(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"}}]},kd=l.defineComponent({name:"InfoCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-info-circle-filled",a.value]),s=l.computed(()=>TT(TT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(vee,c.value)}});function kT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function OT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 2v16h16V4H4zm2.5 7h11v2h-11v-2z"}}]},gee=l.defineComponent({name:"MinusRectangleIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-minus-rectangle",a.value]),s=l.computed(()=>OT(OT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(pee,c.value)}});function ET(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function PT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 2v20h-2V2h2zM9 4.64V18.5H1.3L9 4.64zm6 0l7.7 13.86H15V4.64zM4.7 16.5H7v-4.14L4.7 16.5zM17 12.36v4.14h2.3L17 12.36z"}}]},yee=l.defineComponent({name:"MirrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-mirror",a.value]),s=l.computed(()=>PT(PT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(mee,c.value)}});function IT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function AT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M8.5 5v14h-2V5h2zm9.16 1.75L12.41 12l5.25 5.25-1.41 1.41L9.59 12l6.66-6.66 1.41 1.41z"}}]},wee=l.defineComponent({name:"PageFirstIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-page-first",a.value]),s=l.computed(()=>AT(AT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(bee,c.value)}});function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function DT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M17.5 5v14h-2V5h2zm-9.75.34L14.41 12l-6.66 6.66-1.41-1.41L11.59 12 6.34 6.75l1.41-1.41z"}}]},Cee=l.defineComponent({name:"PageLastIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-page-last",a.value]),s=l.computed(()=>DT(DT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(xee,c.value)}});function RT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function MT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _ee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 11h16v2H4v-2z"}}]},See=l.defineComponent({name:"RemoveIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-remove",a.value]),s=l.computed(()=>MT(MT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(_ee,c.value)}});function LT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function FT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Tee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 2v9a9 9 0 019 9h9v2H2V2h2zm0 18h7a7 7 0 00-7-7v7z"}}]},kee=l.defineComponent({name:"RotationIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-rotation",a.value]),s=l.computed(()=>FT(FT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Tee,c.value)}});function BT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function jT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Oee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 6a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1116 0 8 8 0 01-16 0z"}}]},Eee=l.defineComponent({name:"RoundIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-round",a.value]),s=l.computed(()=>jT(jT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Oee,c.value)}});function $T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function UT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$T(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Pee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49z"}}]},Iee=l.defineComponent({name:"SearchIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-search",a.value]),s=l.computed(()=>UT(UT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Pee,c.value)}});function zT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function HT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Aee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 .85l9.66 5.57v11.16L12 23.15l-9.66-5.57V6.42L12 .85zm0 2.3L4.34 7.58v8.84L12 20.85l7.66-4.43V7.58L12 3.15zM12 9a3 3 0 100 6 3 3 0 000-6zm-5 3a5 5 0 1110 0 5 5 0 01-10 0z"}}]},Nee=l.defineComponent({name:"SettingIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-setting",a.value]),s=l.computed(()=>HT(HT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Aee,c.value)}});function WT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Dee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 .63l2.9 8.35 8.84.18-7.04 5.34 2.56 8.46L12 17.91l-7.26 5.05L7.3 14.5.26 9.16l8.84-.18L12 .63z"}}]},Ree=l.defineComponent({name:"StarFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-star-filled",a.value]),s=l.computed(()=>KT(KT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Dee,c.value)}});function qT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function GT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Mee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 110-22 11 11 0 010 22zm1-17.5h-2v6.91l4 4L16.41 15 13 11.59V5.5z"}}]},YT=l.defineComponent({name:"TimeFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-time-filled",a.value]),s=l.computed(()=>GT(GT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Mee,c.value)}});function XT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function JT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Lee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm11-9a11 11 0 11-22 0 11 11 0 0122 0zm-8 4.41l-4-4V5.5h2v6.09L16.41 15 15 16.41z"}}]},QT=l.defineComponent({name:"TimeIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-time",a.value]),s=l.computed(()=>JT(JT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Lee,c.value)}});function ZT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function VT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Fee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 2.59l5.91 5.91-1.41 1.41-3.5-3.5V16h-2V6.41l-3.5 3.5L6.09 8.5 12 2.59zM4.5 14v5h15v-5h2v7h-19v-7h2z"}}]},Bee=l.defineComponent({name:"UploadIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-upload",a.value]),s=l.computed(()=>VT(VT({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Fee,c.value)}});function ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ek(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 2v16h16V4H4zm4 2.37L17.75 12 8 17.63V6.37zm2 3.46v4.34L13.75 12 10 9.83z"}}]},$ee=l.defineComponent({name:"VideoIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-video",a.value]),s=l.computed(()=>tk(tk({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(jee,c.value)}});function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Uee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM11.5 6.5v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2z"}}]},zee=l.defineComponent({name:"ZoomInIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-zoom-in",a.value]),s=l.computed(()=>rk(rk({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Uee,c.value)}});function ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ik(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Hee={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM6.5 11.5v-2h8v2h-8z"}}]},Wee=l.defineComponent({name:"ZoomOutIcon",props:{size:{type:String},onClick:{type:Function}},setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),{className:a,style:i}=ut(r),o=l.computed(()=>["t-icon","t-icon-zoom-out",a.value]),s=l.computed(()=>ik(ik({},i.value),n.style)),c=l.computed(()=>({class:o.value,style:s.value,onClick:u=>{var d;return(d=t.onClick)===null||d===void 0?void 0:d.call(t,{e:u})}}));return()=>ct(Hee,c.value)}}),Kee=typeof window>"u";function qee(t,e){if(!Kee&&!(!document||!t||typeof t!="string")&&!(document.querySelectorAll(".".concat(e,'[src="').concat(t,'"]')).length>0)){var n=document.createElement("script");n.setAttribute("class",e),n.setAttribute("src",t),document.body.appendChild(n)}}var Gee={name:{type:String,default:""},size:{type:String,default:void 0},url:{type:[String,Array],default:void 0},loadDefaultIcons:{type:Boolean,default:!0},onClick:Function};function ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ok(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var{classPrefix:G0}=ZS,Yee="https://tdesign.gtimg.com/icon/0.3.1/fonts/index.js",Xee=l.defineComponent({name:"Icon",props:Gee,setup(t,e){var{attrs:n}=e,r=l.computed(()=>t.size),a=l.computed(()=>t.name||""),{className:i,style:o}=ut(r),s=l.computed(()=>{var f=[];return f=t.url instanceof Array?t.url.concat():[t.url],t.loadDefaultIcons&&f.push(Yee),f}),c=l.computed(()=>["".concat(G0,"-icon"),"".concat(G0,"-icon-").concat(a.value),i.value]),u=l.computed(()=>lk(lk({},o.value),n.style));l.onMounted(()=>{Array.from(new Set(s.value)).forEach(f=>{qee(f,"".concat(G0,"-svg-js-stylesheet--unique-class"))})});var d=l.computed(()=>({class:c.value,style:u.value,onClick:f=>{var h;return(h=t.onClick)===null||h===void 0?void 0:h.call(t,{e:f})}}));return()=>l.h("svg",d.value,l.h("use",{href:t.url?"#".concat(a.value):"#t-icon-".concat(a.value)}))}}),Jee=Xee;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Y0=Be(Jee,"TIcon");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qee={content:{type:[String,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},download:{type:[String,Boolean]},hover:{type:String,default:"underline",validator:function(e){return e?["color","underline"].includes(e):!0}},href:{type:String,default:""},prefixIcon:{type:Function},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},suffixIcon:{type:Function},target:{type:String,default:""},theme:{type:String,default:"default",validator:function(e){return e?["default","primary","danger","warning","success"].includes(e):!0}},underline:Boolean,onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Zee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Vee=l.defineComponent({name:"TLink",props:Zee({},Qee),emits:["click"],setup:function(e,n){var r=n.emit,a=Ut(),i=We(),o=ve("link"),s=Lt(),c=s.STATUS,u=s.SIZE,d=Qe("classPrefix"),f=d.classPrefix,h=Vt(),v=l.computed(function(){return["".concat(o.value),"".concat(o.value,"--theme-").concat(e.theme),V(V(V(V({},u.value[e.size],e.size!=="medium"),c.value.disabled,h.value),"".concat(f.value,"-is-underline"),e.underline),"".concat(o.value,"--hover-").concat(e.hover),!h.value)]}),p=function(m){h.value||r("click",m)};return function(){var g=a("default","content"),m=i("prefixIcon"),y=i("suffixIcon");return l.createVNode("a",{class:Ee(v.value),href:h.value||!e.href?void 0:e.href,target:e.target?e.target:void 0,download:e.download?e.download:void 0,onClick:p},[m?l.createVNode("span",{class:"".concat(o.value,"__prefix-icon")},[m]):null,g,y?l.createVNode("span",{class:"".concat(o.value,"__suffix-icon")},[y]):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var fv=Be(Vee);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ete={align:{type:String,default:"top",validator:function(e){return e?["start","end","center","stretch","baseline","top","middle","bottom"].includes(e):!0}},gutter:{type:[Number,Object,Array],default:0},justify:{type:String,default:"start",validator:function(e){return e?["start","end","center","space-around","space-between"].includes(e):!0}},tag:{type:String,default:"div"}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ck=function(e){var n="xs";return e<768?n="xs":e>=768&&e<992?n="sm":e>=992&&e<1200?n="md":e>=1200&&e<1400?n="lg":e>=1400&&e<1880?n="xl":n="xxl",n};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function uk(t,e){l.onMounted(function(){window.addEventListener(t,e)}),l.onBeforeUnmount(function(){window.removeEventListener(t,e)})}function tte(t,e){uk("resize",t);var n=null;l.onMounted(function(){!window.ResizeObserver||!e||(n=new window.ResizeObserver(t),n.observe(e))}),l.onBeforeUnmount(function(){var r;(r=n)===null||r===void 0||r.disconnect()})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function X0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fk(){var t=l.ref(ck(Si?0:window.innerWidth)),e=function(){t.value=ck(Si?0:window.innerWidth)};return uk("resize",e),t}function nte(t,e){var n=e.justify,r=e.align;return[t,V(V({},"".concat(t,"--").concat(n),n),"".concat(t,"--align-").concat(r),r)]}function rte(t,e){var n={},r=function(s){return Object.assign(n,{marginLeft:"".concat(s/-2,"px"),marginRight:"".concat(s/-2,"px")})},a=function(s){return Object.assign(n,{rowGap:"".concat(s,"px")})},i={isNumber:function(s){Et(s)&&r(s)},isArray:function(s){Ke(s)&&s.length&&(i.isNumber(s[0]),Et(s[1])&&a(s[1]),ot(s[0])&&!Bn(s[0][e])&&r(s[0][e]),ot(s[1])&&!Bn(s[1][e])&&a(s[1][e]))},isObject:function(s){ot(s)&&s[e]&&(Ke(s)&&s.length?(r(s[e][0]),a(s[e][1])):r(s[e]))}};return Object.keys(i).forEach(function(o){i[o](t)}),n}function ate(t){return Et(t)?"".concat(t," ").concat(t," 0"):/^\d+(\.\d+)?(px|r?em|%)$/.test(t)?"0 0 ".concat(t):t}function ite(t,e){var n={},r=function(o){return Object.assign(n,{paddingLeft:"".concat(o/2,"px"),paddingRight:"".concat(o/2,"px")})},a={isNumber:function(o){Et(o)&&r(o)},isArray:function(o){Ke(o)&&o.length&&(Et(o[0])&&r(o[0]),ot(o[0])&&o[0][e]&&r(o[0][e]))},isObject:function(o){ot(o)&&o[e]&&r(o[e])}};return Object.keys(a).forEach(function(i){a[i](t)}),n}function ote(t,e){var n=e.span,r=e.order,a=e.offset,i=e.push,o=e.pull,s=["xs","sm","md","lg","xl","xxl"],c=s.reduce(function(u,d){var f=e[d],h={};return Et(f)?h.span=f:ot(f)&&(h=f||{}),X0(X0({},u),{},V(V(V(V(V({},"".concat(t,"-").concat(d,"-").concat(h.span),!Bn(h.span)),"".concat(t,"-").concat(d,"-order-").concat(h.order),parseInt(h.order,10)>=0),"".concat(t,"-").concat(d,"-offset-").concat(h.offset),parseInt(h.offset,10)>=0),"".concat(t,"-").concat(d,"-push-").concat(h.push),parseInt(h.push,10)>=0),"".concat(t,"-").concat(d,"-pull-").concat(h.pull),parseInt(h.pull,10)>=0))},{});return X0(V(V(V(V(V(V({},"".concat(t),!0),"".concat(t,"-").concat(n),!Bn(n)),"".concat(t,"-order-").concat(r),r),"".concat(t,"-offset-").concat(a),a),"".concat(t,"-push-").concat(i),i),"".concat(t,"-pull-").concat(o),o),c)}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function lte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ste(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var cte=l.defineComponent({name:"TRow",props:lte({},ete),setup:function(e){var n=l.toRefs(e),r=n.gutter,a=We();l.provide("rowContext",l.reactive({gutter:r}));var i=fk(),o=ve("row"),s=l.computed(function(){return nte(o.value,e)}),c=l.computed(function(){return rte(e.gutter,i.value)});return function(){var u,d=e.tag;return l.createVNode(d,{class:s.value,style:c.value},ste(u=a("default"))?u:{default:function(){return[u]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ute={flex:{type:[String,Number]},lg:{type:[Number,Object]},md:{type:[Number,Object]},offset:{type:Number,default:0},order:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},sm:{type:[Number,Object]},span:{type:Number},tag:{type:String,default:"div"},xl:{type:[Number,Object]},xs:{type:[Number,Object]},xxl:{type:[Number,Object]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fte(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var hte=l.defineComponent({name:"TCol",inject:["rowContext"],props:dte({},ute),setup:function(e){var n=ve("col"),r=We(),a=l.inject("rowContext",Object.create(null)),i=fk(),o=l.computed(function(){return ote(n.value,e)}),s=l.computed(function(){var c={},u=e.flex;if(u&&(c.flex=ate(u)),a){var d=a.gutter;Object.assign(c,ite(d,i.value))}return c});return function(){var c,u=e.tag;return l.createVNode(u,{class:o.value,style:s.value},fte(c=r("default"))?c:{default:function(){return[c]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vte=Be(cte),pte=Be(hte);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var gte=l.defineComponent({name:"TLayout",setup:function(){var e=l.ref(!1),n=We(),r=ve("layout"),a=l.computed(function(){return[r.value,V({},"".concat(r.value,"--with-sider"),e.value)]});return l.provide("layout",{hasSide:e}),function(){return l.createVNode("section",{class:a.value},[n("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var mte={height:{type:String,default:""}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yte=l.defineComponent({name:"THeader",props:mte,setup:function(e){var n=ve("layout__header"),r=We();return function(){return l.createVNode("header",{class:n.value,style:e.height?{height:e.height}:{}},[r("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var bte={height:{type:String,default:""}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var wte=l.defineComponent({name:"TFooter",props:bte,setup:function(e){var n=ve("layout__footer"),r=We();return function(){return l.createVNode("footer",{class:n.value,style:e.height?{height:e.height}:{}},[r("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var xte={width:{type:String,default:""}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Cte=l.defineComponent({name:"TAside",props:xte,setup:function(e){var n=l.inject("layout",Object.create(null)),r=n.hasSide,a=ve("layout__sider"),i=We();if(r)return l.onMounted(function(){r.value=!0}),l.onUnmounted(function(){r.value=!1}),function(){var o=e.width?{width:e.width}:{};return l.createVNode("aside",{class:a.value,style:o},[i("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var _te=l.defineComponent({name:"TContent",setup:function(){var e=ve("layout__content"),n=We();return function(){return l.createVNode("main",{class:e.value},[n("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ste=Be(Cte),Tte=Be(gte),kte=Be(yte),Ote=Be(wte),Ete=Be(_te);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Pte={align:{type:String,default:"center",validator:function(e){return e?["left","right","center"].includes(e):!0}},content:{type:[String,Function]},dashed:Boolean,default:{type:[String,Function]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},theme:{type:String,validator:function(e){return e?["horizontal","vertical"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ite(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ate=l.defineComponent({name:"TDivider",props:Ite({},Pte),setup:function(e){var n=ve("divider"),r=Ut();return function(){var a=e.layout,i=e.dashed,o=e.align,s=r("default","content"),c=["".concat(n.value),["".concat(n.value,"--").concat(a)],V(V(V({},"".concat(n.value,"--dashed"),!!i),"".concat(n.value,"--with-text"),!!s),"".concat(n.value,"--with-text-").concat(o),!!s)];return l.createVNode("div",{class:c},[s&&l.createVNode("span",{class:"".concat(n.value,"__inner-text")},[s])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var J0=Be(Ate);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nte={align:{type:String,validator:function(e){return e?["start","end","center","baseline"].includes(e):!0}},breakLine:Boolean,direction:{type:String,default:"horizontal",validator:function(e){return e?["vertical","horizontal"].includes(e):!0}},separator:{type:[String,Function]},size:{type:[String,Number,Array],default:"medium"}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function co(){var t=l.getCurrentInstance();return function(e,n){var r,a;n||(n=t.slots);var i=((r=n)===null||r===void 0||(a=r.default)===null||a===void 0?void 0:a.call(r))||[];return LS(i).filter(function(o){var s;return(s=o.type.name)===null||s===void 0?void 0:s.endsWith(e)})}}function gk(){var t=l.getCurrentInstance();return function(){var e,n=t.slots,r=(n==null||(e=n.default)===null||e===void 0?void 0:e.call(n))||[];return r.filter(function(a){return wt(a.type)==="symbol"&&!a.children?!1:a.type!==l.Comment}).map(function(a){return a.children&&Ke(a.children)&&a.type===l.Fragment?a.children:a}).flat()}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bk={small:"8px",medium:"16px",large:"24px"},Dte=hX(),Rte=l.defineComponent({name:"TSpace",props:yk(yk({},Nte),{},{forceFlexGapPolyfill:Boolean}),setup:function(e){var n=ve("space"),r=We(),a=gk(),i=l.computed(function(){return e.forceFlexGapPolyfill||Dte}),o=l.computed(function(){var c="";Ke(e.size)?c=e.size.map(function(p){return Et(p)?"".concat(p,"px"):Je(p)&&bk[p]||p}).join(" "):Je(e.size)?c=bk[e.size]||e.size:Et(e.size)&&(c="".concat(e.size,"px"));var u={};if(i.value){var d=c.split(" "),f=$e(d,2),h=f[0],v=f[1];u["--td-space-column-gap"]=h,u["--td-space-row-gap"]=v||h}else u.gap=c;return u});function s(){var c=a(),u=r("separator");return c.filter(function(d){return l.isVNode(d)?d.type!==l.Comment:!0}).map(function(d,f){var h=f+1!==c.length&&u;return l.createVNode(l.Fragment,null,[l.createVNode("div",{class:"".concat(n.value,"-item")},[d]),h&&l.createVNode("div",{class:"".concat(n.value,"-item-separator")},[u])])})}return function(){var c=["".concat(n.value),V(V(V(V({},"".concat(n.value,"-align-").concat(e.align),e.align),"".concat(n.value,"-").concat(e.direction),e.direction),"".concat(n.value,"--break-line"),e.breakLine),"".concat(n.value,"--polyfill"),i.value)];return l.createVNode("div",{class:c,style:o.value},[s()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Q0=Be(Rte);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Mte(t){return t==null}var zl=Mte;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Lte={bordered:Boolean,colon:Boolean,column:{type:Number,default:2},contentStyle:{type:Object},itemLayout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},items:{type:Array},labelStyle:{type:Object},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},tableLayout:{type:String,default:"fixed",validator:function(e){return e?["fixed","auto"].includes(e):!0}},title:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var wk=Symbol("TDescriptions");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Od=function(t){return t.props="props",t.slots="slots",t}(Od||{});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function xk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Je(t)?t:Re(t)?t(l.h,e):Re(t==null?void 0:t.render)?t.render(l.h,e):t}function Ck(t,e,n){var r,a=(r=t.props)===null||r===void 0?void 0:r[e];if(a)return a;var i=t.children,o=(i==null?void 0:i[e])||(i==null?void 0:i[n]);return o?o==null?void 0:o():null}function hv(t,e){return t===Od.props}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Fte=l.defineComponent({name:"TDescriptionsRow",props:{row:Array,itemType:String},setup:function(e){var n=l.inject(wk),r=ve("descriptions"),a=Qe("descriptions"),i=a.globalConfig,o=l.computed(function(){return n.layout==="horizontal"}),s=l.computed(function(){return n.itemLayout==="horizontal"}),c=function(g){var m=["".concat(r.value,"__label")],y=null,b=null;hv(e.itemType)?(y=g.label,b=g.span):(y=Ck(g,"label"),b=g.props.span);var w=o.value?s.value?1:b:1;return l.createVNode("td",l.mergeProps({colspan:w,class:m},{style:n.labelStyle}),[y,n.colon&&i.value.colonText])},u=function(g){var m=["".concat(r.value,"__content")],y=null,b=null;hv(e.itemType)?(y=g.content,b=g.span):(y=Ck(g,"content","default"),b=g.props.span);var w=o.value?b>1&&s.value?b*2-1:b:1;return l.createVNode("td",l.mergeProps({colspan:w,class:m},{style:n.contentStyle}),[y])},d=function(){return l.createVNode("tr",null,[e.row.map(function(g){return l.createVNode(l.Fragment,null,[c(g),u(g)])})])},f=function(){return l.createVNode(l.Fragment,null,[l.createVNode("tr",null,[e.row.map(function(g){return c(g)})]),l.createVNode("tr",null,[e.row.map(function(g){return u(g)})])])},h=function(){return l.createVNode(l.Fragment,null,[e.row.map(function(g){return l.createVNode("tr",null,[c(g),u(g)])})])},v=function(){return l.createVNode(l.Fragment,null,[e.row.map(function(g){return l.createVNode(l.Fragment,null,[l.createVNode("tr",null,[c(g)]),l.createVNode("tr",null,[u(g)])])})])};return function(){return l.createVNode(l.Fragment,null,[o.value?s.value?d():f():s.value?h():v()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bte=l.defineComponent({name:"TDescriptions",props:Lte,setup:function(e){var n=ve("descriptions"),r=Lt(),a=r.SIZE,i=co(),o=We(),s=l.ref(Od.props),c=function(){var h=e.column,v=e.layout,p=[];if(Ke(e.items))p=e.items.map(function(w){return{label:xk(w.label),content:xk(w.content),span:w.span||1}}),s.value=Od.props;else{var g=i("TDescriptionsItem");g.length!==0&&(p=g,s.value=Od.slots)}if(v==="vertical")return[p];var m=[],y=h,b=[];return p.forEach(function(w,x){var C=1;if(hv(s.value))C=zl(w.span)?C:w.span,C=C>h?h:C;else{var S;w.props=w.props||{},C=zl((S=w.props)===null||S===void 0?void 0:S.span)?C:w.props.span,C=C>h?h:C,w.props.span=C}y>=C?(m.push(w),y-=C):(b.push(m),m=[w],y=h-C),x===p.length-1&&(hv(s.value)?w.span+=y:w.props.span+=y,b.push(m))}),b};l.provide(wk,e);var u=function(){var h=["".concat(n.value,"__body"),a.value[e.size],V({},"".concat(n.value,"__body--fixed"),e.tableLayout==="fixed"),V({},"".concat(n.value,"__body--border"),e.bordered)];return l.createVNode("table",{class:h},[l.createVNode("tbody",null,[c().map(function(v){return l.createVNode(Fte,{"item-type":s.value,row:v},null)})])])},d=function(){var h=o("title");return h?l.createVNode("div",{class:"".concat(n.value,"__header")},[h]):""};return function(){return l.createVNode("div",{class:n.value},[d(),u()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jte={content:{type:[String,Function]},default:{type:[String,Function]},label:{type:[String,Function]},span:{type:Number,default:1}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $te=l.defineComponent({name:"TDescriptionsItem",props:jte});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ute=Be(Bte),zte=Be($te);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function _k(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function fn(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(c){_k(i,r,a,o,s,"next",c)}function s(c){_k(i,r,a,o,s,"throw",c)}o(void 0)})}}var Z0={exports:{}},Sk={exports:{}};(function(t){function e(n){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Sk),function(t){var e=Sk.exports.default;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=n=function(){return a},t.exports.__esModule=!0,t.exports.default=t.exports;var r,a={},i=Object.prototype,o=i.hasOwnProperty,s=Object.defineProperty||function(F,j,W){F[j]=W.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function h(F,j,W){return Object.defineProperty(F,j,{value:W,enumerable:!0,configurable:!0,writable:!0}),F[j]}try{h({},"")}catch{h=function(W,H,J){return W[H]=J}}function v(F,j,W,H){var J=j&&j.prototype instanceof x?j:x,Y=Object.create(J.prototype),D=new $(H||[]);return s(Y,"_invoke",{value:E(F,W,D)}),Y}function p(F,j,W){try{return{type:"normal",arg:F.call(j,W)}}catch(H){return{type:"throw",arg:H}}}a.wrap=v;var g="suspendedStart",m="suspendedYield",y="executing",b="completed",w={};function x(){}function C(){}function S(){}var _={};h(_,u,function(){return this});var O=Object.getPrototypeOf,N=O&&O(O(U([])));N&&N!==i&&o.call(N,u)&&(_=N);var B=S.prototype=x.prototype=Object.create(_);function T(F){["next","throw","return"].forEach(function(j){h(F,j,function(W){return this._invoke(j,W)})})}function k(F,j){function W(J,Y,D,q){var z=p(F[J],F,Y);if(z.type!=="throw"){var K=z.arg,P=K.value;return P&&e(P)=="object"&&o.call(P,"__await")?j.resolve(P.__await).then(function(R){W("next",R,D,q)},function(R){W("throw",R,D,q)}):j.resolve(P).then(function(R){K.value=R,D(K)},function(R){return W("throw",R,D,q)})}q(z.arg)}var H;s(this,"_invoke",{value:function(Y,D){function q(){return new j(function(z,K){W(Y,D,z,K)})}return H=H?H.then(q,q):q()}})}function E(F,j,W){var H=g;return function(J,Y){if(H===y)throw Error("Generator is already running");if(H===b){if(J==="throw")throw Y;return{value:r,done:!0}}for(W.method=J,W.arg=Y;;){var D=W.delegate;if(D){var q=I(D,W);if(q){if(q===w)continue;return q}}if(W.method==="next")W.sent=W._sent=W.arg;else if(W.method==="throw"){if(H===g)throw H=b,W.arg;W.dispatchException(W.arg)}else W.method==="return"&&W.abrupt("return",W.arg);H=y;var z=p(F,j,W);if(z.type==="normal"){if(H=W.done?b:m,z.arg===w)continue;return{value:z.arg,done:W.done}}z.type==="throw"&&(H=b,W.method="throw",W.arg=z.arg)}}}function I(F,j){var W=j.method,H=F.iterator[W];if(H===r)return j.delegate=null,W==="throw"&&F.iterator.return&&(j.method="return",j.arg=r,I(F,j),j.method==="throw")||W!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+W+"' method")),w;var J=p(H,F.iterator,j.arg);if(J.type==="throw")return j.method="throw",j.arg=J.arg,j.delegate=null,w;var Y=J.arg;return Y?Y.done?(j[F.resultName]=Y.value,j.next=F.nextLoc,j.method!=="return"&&(j.method="next",j.arg=r),j.delegate=null,w):Y:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,w)}function A(F){var j={tryLoc:F[0]};1 in F&&(j.catchLoc=F[1]),2 in F&&(j.finallyLoc=F[2],j.afterLoc=F[3]),this.tryEntries.push(j)}function M(F){var j=F.completion||{};j.type="normal",delete j.arg,F.completion=j}function $(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(A,this),this.reset(!0)}function U(F){if(F||F===""){var j=F[u];if(j)return j.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var W=-1,H=function J(){for(;++W<F.length;)if(o.call(F,W))return J.value=F[W],J.done=!1,J;return J.value=r,J.done=!0,J};return H.next=H}}throw new TypeError(e(F)+" is not iterable")}return C.prototype=S,s(B,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:C,configurable:!0}),C.displayName=h(S,f,"GeneratorFunction"),a.isGeneratorFunction=function(F){var j=typeof F=="function"&&F.constructor;return!!j&&(j===C||(j.displayName||j.name)==="GeneratorFunction")},a.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,S):(F.__proto__=S,h(F,f,"GeneratorFunction")),F.prototype=Object.create(B),F},a.awrap=function(F){return{__await:F}},T(k.prototype),h(k.prototype,d,function(){return this}),a.AsyncIterator=k,a.async=function(F,j,W,H,J){J===void 0&&(J=Promise);var Y=new k(v(F,j,W,H),J);return a.isGeneratorFunction(j)?Y:Y.next().then(function(D){return D.done?D.value:Y.next()})},T(B),h(B,f,"Generator"),h(B,u,function(){return this}),h(B,"toString",function(){return"[object Generator]"}),a.keys=function(F){var j=Object(F),W=[];for(var H in j)W.push(H);return W.reverse(),function J(){for(;W.length;){var Y=W.pop();if(Y in j)return J.value=Y,J.done=!1,J}return J.done=!0,J}},a.values=U,$.prototype={constructor:$,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!j)for(var W in this)W.charAt(0)==="t"&&o.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=r)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var W=this;function H(K,P){return D.type="throw",D.arg=j,W.next=K,P&&(W.method="next",W.arg=r),!!P}for(var J=this.tryEntries.length-1;J>=0;--J){var Y=this.tryEntries[J],D=Y.completion;if(Y.tryLoc==="root")return H("end");if(Y.tryLoc<=this.prev){var q=o.call(Y,"catchLoc"),z=o.call(Y,"finallyLoc");if(q&&z){if(this.prev<Y.catchLoc)return H(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return H(Y.finallyLoc)}else if(q){if(this.prev<Y.catchLoc)return H(Y.catchLoc,!0)}else{if(!z)throw Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return H(Y.finallyLoc)}}}},abrupt:function(j,W){for(var H=this.tryEntries.length-1;H>=0;--H){var J=this.tryEntries[H];if(J.tryLoc<=this.prev&&o.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Y=J;break}}Y&&(j==="break"||j==="continue")&&Y.tryLoc<=W&&W<=Y.finallyLoc&&(Y=null);var D=Y?Y.completion:{};return D.type=j,D.arg=W,Y?(this.method="next",this.next=Y.finallyLoc,w):this.complete(D)},complete:function(j,W){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&W&&(this.next=W),w},finish:function(j){for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W];if(H.finallyLoc===j)return this.complete(H.completion,H.afterLoc),M(H),w}},catch:function(j){for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W];if(H.tryLoc===j){var J=H.completion;if(J.type==="throw"){var Y=J.arg;M(H)}return Y}}throw Error("illegal catch attempt")},delegateYield:function(j,W,H){return this.delegate={iterator:U(j),resultName:W,nextLoc:H},this.method==="next"&&(this.arg=r),w}},a}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(Z0),Z0.exports;var vv=Z0.exports(),mt=vv;try{regeneratorRuntime=vv}catch{(typeof globalThis>"u"?"undefined":wt(globalThis))==="object"?globalThis.regeneratorRuntime=vv:Function("r","regeneratorRuntime = r")(vv)}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hte={container:{type:[String,Function],default:function(){return function(){return window}}},content:{type:[String,Function]},default:{type:[String,Function]},offsetBottom:{type:Number,default:0},offsetTop:{type:Number,default:0},zIndex:{type:Number},onFixedChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wte=l.defineComponent({name:"TAffix",props:Hte,emits:["fixedChange"],setup:function(e,n){var r,a=ve("affix"),i=We(),o=l.ref(null),s=l.ref(null),c=l.ref((r=document)===null||r===void 0?void 0:r.createElement("div")),u=l.ref(!1),d=l.ref(!1),f=l.ref(),h=l.ref(),v=0,p=function(){u.value||(v=window.requestAnimationFrame(function(){var b,w;v=0;var x=(b=(w=o.value)===null||w===void 0?void 0:w.getBoundingClientRect())!==null&&b!==void 0?b:{top:0,width:0,height:0},C=x.top,S=x.width,_=x.height,O=0;f.value instanceof HTMLElement&&(O=f.value.getBoundingClientRect().top);var N,B=C-O,T=f.value[f.value instanceof Window?"innerHeight":"clientHeight"]-_,k=O+T-e.offsetBottom;if(!Bn(e.offsetTop)&&B<=e.offsetTop?N=O+e.offsetTop:!Bn(e.offsetBottom)&&C>=k?N=k:N=!1,s.value){var E=N!==!1,I=o.value.contains(c.value);E?(s.value.className=a.value,h.value={top:"".concat(N,"px"),width:"".concat(S,"px"),height:"".concat(_,"px"),zIndex:e.zIndex},I||(c.value.style.width="".concat(S,"px"),c.value.style.height="".concat(_,"px"),o.value.appendChild(c.value))):(s.value.removeAttribute("class"),h.value=void 0,I&&c.value.remove()),n.emit("fixedChange",E,{top:Number(N)}),Re(e.onFixedChange)&&e.onFixedChange(E,{top:Number(N)})}u.value=!1}),u.value=!0)},g=function(){var y=fn(mt.mark(function b(){return mt.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,l.nextTick();case 2:if(!d.value){x.next=4;break}return x.abrupt("return");case 4:f.value=iS(e.container),qt(f.value,"scroll",p),qt(window,"resize",p),d.value=!0;case 8:case"end":return x.stop()}},b)}));return function(){return y.apply(this,arguments)}}(),m=function(){!f.value||!d.value||(At(f.value,"scroll",p),At(window,"resize",p),v&&window.cancelAnimationFrame(v),d.value=!1)};return l.watch(function(){return e.offsetTop},function(){p()}),l.watch(function(){return e.offsetBottom},function(){p()}),l.watch(function(){return e.zIndex},function(){p()}),l.onMounted(g),l.onActivated(g),l.onDeactivated(m),l.onBeforeUnmount(m),{affixWrapRef:o,affixRef:s,bindScroll:g,unbindScroll:m,handleScroll:p,scrollContainer:f,renderTNodeJSX:i,affixStyle:h}},render:function(){return l.createVNode("div",{ref:"affixWrapRef"},[l.createVNode("div",{ref:"affixRef",style:this.affixStyle},[this.renderTNodeJSX("default")])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var mc=Be(Wte);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var V0=/#(\S+)$/;function Tk(t,e){var n=t.getBoundingClientRect(),r=n.top;return e===window?r-document.documentElement.clientTop:r-e.getBoundingClientRect().top}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kte={affixProps:{type:Object},bounds:{type:Number,default:5},container:{type:[String,Function],default:function(){return function(){return window}}},cursor:{type:Function},size:{type:String,default:"medium",validator:function(e){return["small","medium","large"].includes(e)}},targetOffset:{type:Number,default:0},onChange:Function,onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var kk=Symbol("AnchorInjectionProvide");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qte(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Gte=l.defineComponent({name:"TAnchor",inheritAttrs:!1,props:Kte,setup:function(e,n){var r=n.attrs,a=l.ref(null),i=l.ref([]),o=l.ref(""),s=l.ref(null),c=l.ref(!1),u=l.reactive({}),d=ve("anchor"),f=ve("anchor__line"),h=ve("anchor__line-cursor"),v=Lt(),p=v.STATUS,g=v.SIZE,m=We(),y=function(){if(!Si){var k=e.container;s.value=iS(k),qt(s.value,"scroll",b),b()}},b=function(){if(!c.value){var k=e.bounds,E=e.targetOffset,I=[],A="";if(i.value.forEach(function($){var U=w($);if(U){var F=Tk(U,s.value);F<k+E&&I.push({link:$,top:F})}}),I.length){var M=I.reduce(function($,U){return $.top>U.top?$:U});A=M.link}S(A)}},w=function(k){var E=k.match(V0);if(E){var I=document.getElementById(E[1]);if(I)return I}},x=function(k){!V0.test(k)||i.value.indexOf(k)!==-1||i.value.push(k)},C=function(k){i.value=i.value.filter(function(E){return E!==k})},S=function(){var T=fn(mt.mark(function k(E){var I;return mt.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(o.value!==E){M.next=2;break}return M.abrupt("return");case 2:return o.value=E,(I=e.onChange)===null||I===void 0||I.call(e,E,o.value),M.next=6,l.nextTick();case 6:_();case 7:case"end":return M.stop()}},k)}));return function(E){return T.apply(this,arguments)}}(),_=function(){var k,E=(k=a.value)===null||k===void 0?void 0:k.querySelector(".".concat(p.value.active,">a"));if(!E){Object.assign(u,{});return}var I=E.offsetTop,A=E.offsetHeight;Object.assign(u,{top:"".concat(I,"px"),height:"".concat(A,"px"),opacity:1})},O=function(k){var E;(E=e.onClick)===null||E===void 0||E.call(e,k)},N=function(){var T=fn(mt.mark(function k(E){var I,A,M,$,U;return mt.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(I=w(E),S(E),I){j.next=4;break}return j.abrupt("return");case 4:return c.value=!0,A=e.targetOffset,M=lS(s.value),$=Tk(I,s.value),U=M+$-A,j.next=11,R0(U,{container:s.value});case 11:c.value=!1;case 12:case"end":return j.stop()}},k)}));return function(E){return T.apply(this,arguments)}}(),B=function(){var k=m("cursor");return k||l.createVNode("div",{class:h.value},null)};return l.onMounted(fn(mt.mark(function T(){return mt.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(y(),!o.value){E.next=5;break}return E.next=4,l.nextTick();case 4:N(o.value);case 5:case"end":return E.stop()}},T)}))),l.onUnmounted(function(){s.value&&At(s.value,"scroll",b)}),l.watchEffect(function(){s.value&&At(s.value,"scroll",b),y()}),l.provide(kk,l.reactive({registerLink:x,unregisterLink:C,handleScrollTo:N,handleLinkClick:O,active:o})),function(){var T=e.size,k=e.affixProps,E=[d.value,g.value[T]],I=l.createVNode("div",l.mergeProps({ref:a,class:E},r),[l.createVNode("div",{class:f.value},[l.createVNode("div",{class:"".concat(h.value,"-wrapper"),style:u},[B()])]),m("default")]);return k?l.createVNode(mc,k,qte(I)?I:{default:function(){return[I]}}):I}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Yte={href:{type:String,default:"",required:!0},target:{type:String,default:"_self",validator:function(e){return["_self","_blank","_parent","_top"].includes(e)}},title:{type:[String,Function],default:""},customScroll:{type:Boolean,default:!1}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xte=Ek(Ek({},Yte),{},{href:{type:String,required:!0,validator:function(e){return V0.test(e)}}}),Jte=l.defineComponent({name:"TAnchorItem",inject:{tAnchor:{default:void 0}},props:Xte,setup:function(e,n){var r=n.slots,a=l.inject(kk,void 0),i=ve("anchor__item"),o=Lt(),s=o.STATUS,c=function(){a.registerLink(e.href)},u=function(){var v=e.href;v&&a.unregisterLink(v)},d=function(v){var p=e.href,g=e.title;e.customScroll||a.handleScrollTo(p),a.handleLinkClick({href:p,title:Je(g)?g:void 0,e:v})},f=function(){var v=e.title,p=r.title,g;return Je(v)?g=v:Re(v)?g=v(l.h):p&&(g=p(null)),g};return l.watch(function(){return e.href},function(){u(),c()},{immediate:!0}),l.onMounted(function(){c()}),l.onUnmounted(function(){u()}),function(){var h=e.href,v=e.target,p=r.default,g=r.title,m=f(),y=Je(m)?m:null,b=a.active===h,w=V(V({},i.value,!0),s.value.active,b),x=V({},"".concat(i.value,"-link"),!0);return l.createVNode("div",{class:w},[l.createVNode("a",{href:h,title:y,class:x,target:v,onClick:d},[g?g(null):m]),p&&p(null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Pk={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(t,e){(function(r,a){t.exports=a()})(Jn,function(){return function(){var n={686:function(o,s,c){c.d(s,{default:function(){return H}});var u=c(279),d=c.n(u),f=c(370),h=c.n(f),v=c(817),p=c.n(v);function g(J){try{return document.execCommand(J)}catch{return!1}}var m=function(Y){var D=p()(Y);return g("cut"),D},y=m;function b(J){var Y=document.documentElement.getAttribute("dir")==="rtl",D=document.createElement("textarea");D.style.fontSize="12pt",D.style.border="0",D.style.padding="0",D.style.margin="0",D.style.position="absolute",D.style[Y?"right":"left"]="-9999px";var q=window.pageYOffset||document.documentElement.scrollTop;return D.style.top="".concat(q,"px"),D.setAttribute("readonly",""),D.value=J,D}var w=function(Y,D){var q=b(Y);D.container.appendChild(q);var z=p()(q);return g("copy"),q.remove(),z},x=function(Y){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},q="";return typeof Y=="string"?q=w(Y,D):Y instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(Y==null?void 0:Y.type)?q=w(Y.value,D):(q=p()(Y),g("copy")),q},C=x;function S(J){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(D){return typeof D}:S=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},S(J)}var _=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=Y.action,q=D===void 0?"copy":D,z=Y.container,K=Y.target,P=Y.text;if(q!=="copy"&&q!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(K!==void 0)if(K&&S(K)==="object"&&K.nodeType===1){if(q==="copy"&&K.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(q==="cut"&&(K.hasAttribute("readonly")||K.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(P)return C(P,{container:z});if(K)return q==="cut"?y(K):C(K,{container:z})},O=_;function N(J){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(D){return typeof D}:N=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},N(J)}function B(J,Y){if(!(J instanceof Y))throw new TypeError("Cannot call a class as a function")}function T(J,Y){for(var D=0;D<Y.length;D++){var q=Y[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(J,q.key,q)}}function k(J,Y,D){return Y&&T(J.prototype,Y),D&&T(J,D),J}function E(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(Y&&Y.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Y&&I(J,Y)}function I(J,Y){return I=Object.setPrototypeOf||function(q,z){return q.__proto__=z,q},I(J,Y)}function A(J){var Y=U();return function(){var q=F(J),z;if(Y){var K=F(this).constructor;z=Reflect.construct(q,arguments,K)}else z=q.apply(this,arguments);return M(this,z)}}function M(J,Y){return Y&&(N(Y)==="object"||typeof Y=="function")?Y:$(J)}function $(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(J){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},F(J)}function j(J,Y){var D="data-clipboard-".concat(J);if(Y.hasAttribute(D))return Y.getAttribute(D)}var W=function(J){E(D,J);var Y=A(D);function D(q,z){var K;return B(this,D),K=Y.call(this),K.resolveOptions(z),K.listenClick(q),K}return k(D,[{key:"resolveOptions",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof z.action=="function"?z.action:this.defaultAction,this.target=typeof z.target=="function"?z.target:this.defaultTarget,this.text=typeof z.text=="function"?z.text:this.defaultText,this.container=N(z.container)==="object"?z.container:document.body}},{key:"listenClick",value:function(z){var K=this;this.listener=h()(z,"click",function(P){return K.onClick(P)})}},{key:"onClick",value:function(z){var K=z.delegateTarget||z.currentTarget,P=this.action(K)||"copy",R=O({action:P,container:this.container,target:this.target(K),text:this.text(K)});this.emit(R?"success":"error",{action:P,text:R,trigger:K,clearSelection:function(){K&&K.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(z){return j("action",z)}},{key:"defaultTarget",value:function(z){var K=j("target",z);if(K)return document.querySelector(K)}},{key:"defaultText",value:function(z){return j("text",z)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(z){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return C(z,K)}},{key:"cut",value:function(z){return y(z)}},{key:"isSupported",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],K=typeof z=="string"?[z]:z,P=!!document.queryCommandSupported;return K.forEach(function(R){P=P&&!!document.queryCommandSupported(R)}),P}}]),D}(d()),H=W},828:function(o){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var c=Element.prototype;c.matches=c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector}function u(d,f){for(;d&&d.nodeType!==s;){if(typeof d.matches=="function"&&d.matches(f))return d;d=d.parentNode}}o.exports=u},438:function(o,s,c){var u=c(828);function d(v,p,g,m,y){var b=h.apply(this,arguments);return v.addEventListener(g,b,y),{destroy:function(){v.removeEventListener(g,b,y)}}}function f(v,p,g,m,y){return typeof v.addEventListener=="function"?d.apply(null,arguments):typeof g=="function"?d.bind(null,document).apply(null,arguments):(typeof v=="string"&&(v=document.querySelectorAll(v)),Array.prototype.map.call(v,function(b){return d(b,p,g,m,y)}))}function h(v,p,g,m){return function(y){y.delegateTarget=u(y.target,p),y.delegateTarget&&m.call(v,y)}}o.exports=f},879:function(o,s){s.node=function(c){return c!==void 0&&c instanceof HTMLElement&&c.nodeType===1},s.nodeList=function(c){var u=Object.prototype.toString.call(c);return c!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in c&&(c.length===0||s.node(c[0]))},s.string=function(c){return typeof c=="string"||c instanceof String},s.fn=function(c){var u=Object.prototype.toString.call(c);return u==="[object Function]"}},370:function(o,s,c){var u=c(879),d=c(438);function f(g,m,y){if(!g&&!m&&!y)throw new Error("Missing required arguments");if(!u.string(m))throw new TypeError("Second argument must be a String");if(!u.fn(y))throw new TypeError("Third argument must be a Function");if(u.node(g))return h(g,m,y);if(u.nodeList(g))return v(g,m,y);if(u.string(g))return p(g,m,y);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function h(g,m,y){return g.addEventListener(m,y),{destroy:function(){g.removeEventListener(m,y)}}}function v(g,m,y){return Array.prototype.forEach.call(g,function(b){b.addEventListener(m,y)}),{destroy:function(){Array.prototype.forEach.call(g,function(w){w.removeEventListener(m,y)})}}}function p(g,m,y){return d(document.body,g,m,y)}o.exports=f},817:function(o){function s(c){var u;if(c.nodeName==="SELECT")c.focus(),u=c.value;else if(c.nodeName==="INPUT"||c.nodeName==="TEXTAREA"){var d=c.hasAttribute("readonly");d||c.setAttribute("readonly",""),c.select(),c.setSelectionRange(0,c.value.length),d||c.removeAttribute("readonly"),u=c.value}else{c.hasAttribute("contenteditable")&&c.focus();var f=window.getSelection(),h=document.createRange();h.selectNodeContents(c),f.removeAllRanges(),f.addRange(h),u=f.toString()}return u}o.exports=s},279:function(o){function s(){}s.prototype={on:function(u,d,f){var h=this.e||(this.e={});return(h[u]||(h[u]=[])).push({fn:d,ctx:f}),this},once:function(u,d,f){var h=this;function v(){h.off(u,v),d.apply(f,arguments)}return v._=d,this.on(u,v,f)},emit:function(u){var d=[].slice.call(arguments,1),f=((this.e||(this.e={}))[u]||[]).slice(),h=0,v=f.length;for(h;h<v;h++)f[h].fn.apply(f[h].ctx,d);return this},off:function(u,d){var f=this.e||(this.e={}),h=f[u],v=[];if(h&&d)for(var p=0,g=h.length;p<g;p++)h[p].fn!==d&&h[p].fn._!==d&&v.push(h[p]);return v.length?f[u]=v:delete f[u],this}},o.exports=s,o.exports.TinyEmitter=s}},r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={exports:{}};return n[i](o,o.exports,a),o.exports}return function(){a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,{a:o}),o}}(),function(){a.d=function(i,o){for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})}}(),function(){a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)}}(),a(686)}().default})})(Pk);var Qte=fd(Pk.exports);function Zte(t){var e=document.createElement("div"),n=new Qte(e,{text:function(){return t}});e.click(),n.destroy(),e.remove()}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vte=["info","success","warning","error","question","loading"],Ea="32px",Ik={top:{top:Ea,left:"50%",transform:"translateX(-50%)"},center:{left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"},left:{left:Ea,top:"50%",transform:"translateY(-50%)"},bottom:{bottom:Ea,left:"50%",transform:"translateX(-50%)"},right:{right:Ea,top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"flex-end"},"top-left":{left:Ea,top:Ea},"top-right":{right:Ea,top:Ea,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-right":{right:Ea,bottom:Ea,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-left":{left:Ea,bottom:Ea}},Ak=Object.keys(Ik);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ene={closeBtn:{type:[String,Boolean,Function],default:void 0},content:{type:[String,Function]},duration:{type:Number,default:3e3},icon:{type:[Boolean,Function],default:!0},theme:{type:String,default:"info",validator:function(e){return e?["info","success","warning","error","question","loading"].includes(e):!0}},onClose:Function,onCloseBtnClick:Function,onDurationEnd:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function St(t){var e=Qe("icon"),n=e.globalConfig,r={};return Object.keys(t).forEach(function(a){var i;r[a]=((i=n.value)===null||i===void 0?void 0:i[a])||t[a]}),r}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nk={duration:200,easing:"linear"};function tne(t,e){if(t){var n=(t==null?void 0:t.offsetWidth)||0,r=(t==null?void 0:t.offsetHeight)||0,a=rne(e,n,r);if(a){var i=a[a.length-1];Dk(t,i),t.animate&&t.animate(a,Nk)}}}function nne(t,e,n){if(t){var r=(t==null?void 0:t.offsetHeight)||0,a=ane(e,r);if(!a)return n();var i=a[a.length-1];Dk(t,i);var o=t.animate&&t.animate(a,Nk);o?o.onfinish=function(){t.style.display="none",n()}:(t.style.display="none",n())}}function Dk(t,e){for(var n=Object.keys(e),r=0;r<n.length;r+=1){var a=n[r];t.style[a]=e[a]}}function rne(t,e,n){if(!Ak.includes(t))return null;if(["top-left","left","bottom-left"].includes(t))return[{opacity:0,marginLeft:"-".concat(e,"px")},{opacity:1,marginLeft:"0"}];if(["top-right","right","bottom-right"].includes(t))return[{opacity:0,marginRight:"-".concat(e,"px")},{opacity:1,marginRight:"0"}];if(["top","center"].includes(t))return[{opacity:0,marginTop:"-".concat(n,"px")},{opacity:1,marginTop:"0"}];if(["bottom"].includes(t))return[{opacity:0,transform:"translate3d(0, ".concat(n,"px, 0)")},{opacity:1,transform:"translate3d(0, 0, 0)"}]}function ane(t,e){if(!Ak.includes(t))return null;if(["bottom-left","bottom","bottom-right"].includes(t)){var n="".concat(e,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:n}]}var r="-".concat(e,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:r}]}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Lk=l.defineComponent({name:"TMessage",props:Mk(Mk({},ene),{},{placement:String}),setup:function(e,n){var r=n.slots,a=n.expose,i=ve("message"),o=St({InfoCircleFilledIcon:kd,CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki,HelpCircleFilledIcon:mT,CloseIcon:Za}),s=o.InfoCircleFilledIcon,c=o.CheckCircleFilledIcon,u=o.ErrorCircleFilledIcon,d=o.HelpCircleFilledIcon,f=o.CloseIcon,h=ve(),v=We(),p=Ut(),g=l.ref(null),m=l.ref(null),y=l.computed(function(){var _={};return Vte.forEach(function(O){return _["".concat(h.value,"-is-").concat(O)]=e.theme===O}),[i.value,_,V({},"".concat(h.value,"-is-closable"),e.closeBtn||r.closeBtn)]}),b=function(O){var N,B;(N=e.onClose)===null||N===void 0||N.call(e,{trigger:"close-click",e:O}),(B=e.onCloseBtnClick)===null||B===void 0||B.call(e,{e:O})},w=function(){e.duration&&clearTimeout(m.value)},x=function(){e.duration&&(m.value=Number(setTimeout(function(){w();var O=g.value;nne(O,e.placement,function(){var N,B;(N=e.onClose)===null||N===void 0||N.call(e,{trigger:"duration-end"}),(B=e.onDurationEnd)===null||B===void 0||B.call(e)})},e.duration)))},C=function(){var O=l.createVNode(f,null,null);return l.createVNode("span",{class:"".concat(i.value,"__close"),onClick:b},[v("closeBtn",O)])},S=function(){if(e.icon!==!1){if(Re(e.icon))return e.icon(l.h);if(r.icon)return r.icon(null);var O={info:s,success:c,warning:u,error:u,question:d,loading:lr}[e.theme];return l.createVNode(O,null,null)}};return l.onBeforeMount(function(){e.duration&&x()}),l.onMounted(function(){var _=g.value;tne(_,e.placement)}),a({close:b}),function(){return l.createVNode("div",{ref:g,class:y.value,onMouseenter:w,onMouseleave:x},[S(),p("content","default"),C()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ey=6e3,ine=function(){var t=0;return function(){return t+=1,t}}(),one=l.defineComponent({name:"TMessageList",props:{zIndex:{type:Number,default:0},placement:{type:String,default:""}},setup:function(e,n){var r=n.expose,a=ve("message__list"),i=l.ref([]),o=l.ref([]),s=l.computed(function(){return yc(yc({},Ik[e.placement]),{},{zIndex:e.zIndex!==ey?e.zIndex:ey})}),c=function(m){var y=yc(yc({},m),{},{key:ine()});return i.value.push(y),y.key},u=function(m){i.value.splice(m,1)},d=function(){i.value=[]},f=function(m){if(m)return isNaN(Number(m))?m:"".concat(m,"px")},h=function(m){return m.offset&&{position:"relative",left:f(m.offset[0]),top:f(m.offset[1])}},v=function(m,y){return yc(yc({},y),{},{onCloseBtnClick:function(w){return y.onCloseBtnClick&&y.onCloseBtnClick(w),u(m)},onDurationEnd:function(){return y.onDurationEnd&&y.onDurationEnd(),u(m)}})},p=function(m){m&&o.value.push(m)};return r({add:c,removeAll:d,list:i,messageList:o}),function(){if(i.value.length)return l.createVNode("div",{class:a.value,style:s.value},[i.value.map(function(g,m){return l.createVNode(Lk,l.mergeProps({key:g.key,style:h(g),ref:p},v(m,g)),null)})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ty(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Hl=new Map;function lne(t){var e=ty({duration:3e3,attach:"body",zIndex:ey,placement:"top"},t);return e.content=t.content,e}var sne=function(e){var n=lne(e),r=n.attach,a=n.placement,i=dc(r);Hl.get(i)||Hl.set(i,{});var o=Hl.get(i)[a],s;if(o)s=o.add(n);else{var c=document.createElement("div"),u=l.createApp(one,{zIndex:n.zIndex,placement:n.placement}).mount(c);s=u.add(n),Hl.get(i)[a]=u,i.appendChild(c)}return new Promise(function(d){var f=Hl.get(i)[a];l.nextTick(function(){var h=f.messageList;d(h==null?void 0:h.find(function(v){var p;return((p=v.$)===null||p===void 0||(p=p.vnode)===null||p===void 0?void 0:p.key)===s}))})})},nl=function(e,n,r){var a={theme:e};return Je(n)?a.content=n:ot(n)&&!(n instanceof Array)&&(a=ty(ty({},a),n)),(r||r===0)&&(a.duration=r),sne(a)},pv={info:function(e,n){return nl("info",e,n)},success:function(e,n){return nl("success",e,n)},warning:function(e,n){return nl("warning",e,n)},error:function(e,n){return nl("error",e,n)},question:function(e,n){return nl("question",e,n)},loading:function(e,n){return nl("loading",e,n)},close:function(e){e.then(function(n){return n==null?void 0:n.close()})},closeAll:function(){Hl instanceof Map&&Hl.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];r.list=[]})})}},$r=nl;$r.install=function(t){t.config.globalProperties.$message=nl,Object.keys(pv).forEach(function(e){t.config.globalProperties.$message[e]=pv[e]})},Object.keys(pv).forEach(function(t){$r[t]=pv[t]});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var cne={id:{type:String,default:"",required:!0},tag:{type:String,default:"div"}},Ur="top",Pa="bottom",Ia="right",zr="left",ny="auto",Ed=[Ur,Pa,Ia,zr],bc="start",Pd="end",une="clippingParents",jk="viewport",Id="popper",dne="reference",$k=Ed.reduce(function(t,e){return t.concat([e+"-"+bc,e+"-"+Pd])},[]),Uk=[].concat(Ed,[ny]).reduce(function(t,e){return t.concat([e,e+"-"+bc,e+"-"+Pd])},[]),fne="beforeRead",hne="read",vne="afterRead",pne="beforeMain",gne="main",mne="afterMain",yne="beforeWrite",bne="write",wne="afterWrite",xne=[fne,hne,vne,pne,gne,mne,yne,bne,wne];function Oi(t){return t?(t.nodeName||"").toLowerCase():null}function la(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wl(t){var e=la(t).Element;return t instanceof e||t instanceof Element}function Aa(t){var e=la(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ry(t){if(typeof ShadowRoot>"u")return!1;var e=la(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Cne(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},a=e.attributes[n]||{},i=e.elements[n];!Aa(i)||!Oi(i)||(Object.assign(i.style,r),Object.keys(a).forEach(function(o){var s=a[o];s===!1?i.removeAttribute(o):i.setAttribute(o,s===!0?"":s)}))})}function _ne(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var a=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=o.reduce(function(c,u){return c[u]="",c},{});!Aa(a)||!Oi(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(c){a.removeAttribute(c)}))})}}const Sne={name:"applyStyles",enabled:!0,phase:"write",fn:Cne,effect:_ne,requires:["computeStyles"]};function Ei(t){return t.split("-")[0]}var Kl=Math.max,gv=Math.min,wc=Math.round;function ay(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function zk(){return!/^((?!chrome|android).)*safari/i.test(ay())}function xc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),a=1,i=1;e&&Aa(t)&&(a=t.offsetWidth>0&&wc(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&wc(r.height)/t.offsetHeight||1);var o=Wl(t)?la(t):window,s=o.visualViewport,c=!zk()&&n,u=(r.left+(c&&s?s.offsetLeft:0))/a,d=(r.top+(c&&s?s.offsetTop:0))/i,f=r.width/a,h=r.height/i;return{width:f,height:h,top:d,right:u+f,bottom:d+h,left:u,x:u,y:d}}function iy(t){var e=xc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Hk(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ry(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function uo(t){return la(t).getComputedStyle(t)}function Tne(t){return["table","td","th"].indexOf(Oi(t))>=0}function rl(t){return((Wl(t)?t.ownerDocument:t.document)||window.document).documentElement}function mv(t){return Oi(t)==="html"?t:t.assignedSlot||t.parentNode||(ry(t)?t.host:null)||rl(t)}function Wk(t){return!Aa(t)||uo(t).position==="fixed"?null:t.offsetParent}function kne(t){var e=/firefox/i.test(ay()),n=/Trident/i.test(ay());if(n&&Aa(t)){var r=uo(t);if(r.position==="fixed")return null}var a=mv(t);for(ry(a)&&(a=a.host);Aa(a)&&["html","body"].indexOf(Oi(a))<0;){var i=uo(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Ad(t){for(var e=la(t),n=Wk(t);n&&Tne(n)&&uo(n).position==="static";)n=Wk(n);return n&&(Oi(n)==="html"||Oi(n)==="body"&&uo(n).position==="static")?e:n||kne(t)||e}function oy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Nd(t,e,n){return Kl(t,gv(e,n))}function One(t,e,n){var r=Nd(t,e,n);return r>n?n:r}function Kk(){return{top:0,right:0,bottom:0,left:0}}function qk(t){return Object.assign({},Kk(),t)}function Gk(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Ene=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,qk(typeof e!="number"?e:Gk(e,Ed))};function Pne(t){var e,n=t.state,r=t.name,a=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Ei(n.placement),c=oy(s),u=[zr,Ia].indexOf(s)>=0,d=u?"height":"width";if(!(!i||!o)){var f=Ene(a.padding,n),h=iy(i),v=c==="y"?Ur:zr,p=c==="y"?Pa:Ia,g=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],m=o[c]-n.rects.reference[c],y=Ad(i),b=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,w=g/2-m/2,x=f[v],C=b-h[d]-f[p],S=b/2-h[d]/2+w,_=Nd(x,S,C),O=c;n.modifiersData[r]=(e={},e[O]=_,e.centerOffset=_-S,e)}}function Ine(t){var e=t.state,n=t.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||Hk(e.elements.popper,a)&&(e.elements.arrow=a))}const Ane={name:"arrow",enabled:!0,phase:"main",fn:Pne,effect:Ine,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cc(t){return t.split("-")[1]}var Nne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dne(t,e){var n=t.x,r=t.y,a=e.devicePixelRatio||1;return{x:wc(n*a)/a||0,y:wc(r*a)/a||0}}function Yk(t){var e,n=t.popper,r=t.popperRect,a=t.placement,i=t.variation,o=t.offsets,s=t.position,c=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,f=t.isFixed,h=o.x,v=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof d=="function"?d({x:v,y:g}):{x:v,y:g};v=m.x,g=m.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),w=zr,x=Ur,C=window;if(u){var S=Ad(n),_="clientHeight",O="clientWidth";if(S===la(n)&&(S=rl(n),uo(S).position!=="static"&&s==="absolute"&&(_="scrollHeight",O="scrollWidth")),S=S,a===Ur||(a===zr||a===Ia)&&i===Pd){x=Pa;var N=f&&S===C&&C.visualViewport?C.visualViewport.height:S[_];g-=N-r.height,g*=c?1:-1}if(a===zr||(a===Ur||a===Pa)&&i===Pd){w=Ia;var B=f&&S===C&&C.visualViewport?C.visualViewport.width:S[O];v-=B-r.width,v*=c?1:-1}}var T=Object.assign({position:s},u&&Nne),k=d===!0?Dne({x:v,y:g},la(n)):{x:v,y:g};if(v=k.x,g=k.y,c){var E;return Object.assign({},T,(E={},E[x]=b?"0":"",E[w]=y?"0":"",E.transform=(C.devicePixelRatio||1)<=1?"translate("+v+"px, "+g+"px)":"translate3d("+v+"px, "+g+"px, 0)",E))}return Object.assign({},T,(e={},e[x]=b?g+"px":"",e[w]=y?v+"px":"",e.transform="",e))}function Rne(t){var e=t.state,n=t.options,r=n.gpuAcceleration,a=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,s=n.roundOffsets,c=s===void 0?!0:s,u={placement:Ei(e.placement),variation:Cc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Yk(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Yk(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Mne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Rne,data:{}};var yv={passive:!0};function Lne(t){var e=t.state,n=t.instance,r=t.options,a=r.scroll,i=a===void 0?!0:a,o=r.resize,s=o===void 0?!0:o,c=la(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",n.update,yv)}),s&&c.addEventListener("resize",n.update,yv),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",n.update,yv)}),s&&c.removeEventListener("resize",n.update,yv)}}const Fne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Lne,data:{}};var Bne={left:"right",right:"left",bottom:"top",top:"bottom"};function bv(t){return t.replace(/left|right|bottom|top/g,function(e){return Bne[e]})}var jne={start:"end",end:"start"};function Xk(t){return t.replace(/start|end/g,function(e){return jne[e]})}function ly(t){var e=la(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function sy(t){return xc(rl(t)).left+ly(t).scrollLeft}function $ne(t,e){var n=la(t),r=rl(t),a=n.visualViewport,i=r.clientWidth,o=r.clientHeight,s=0,c=0;if(a){i=a.width,o=a.height;var u=zk();(u||!u&&e==="fixed")&&(s=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:s+sy(t),y:c}}function Une(t){var e,n=rl(t),r=ly(t),a=(e=t.ownerDocument)==null?void 0:e.body,i=Kl(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Kl(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+sy(t),c=-r.scrollTop;return uo(a||n).direction==="rtl"&&(s+=Kl(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:c}}function cy(t){var e=uo(t),n=e.overflow,r=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function Jk(t){return["html","body","#document"].indexOf(Oi(t))>=0?t.ownerDocument.body:Aa(t)&&cy(t)?t:Jk(mv(t))}function Dd(t,e){var n;e===void 0&&(e=[]);var r=Jk(t),a=r===((n=t.ownerDocument)==null?void 0:n.body),i=la(r),o=a?[i].concat(i.visualViewport||[],cy(r)?r:[]):r,s=e.concat(o);return a?s:s.concat(Dd(mv(o)))}function uy(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zne(t,e){var n=xc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Qk(t,e,n){return e===jk?uy($ne(t,n)):Wl(e)?zne(e,n):uy(Une(rl(t)))}function Hne(t){var e=Dd(mv(t)),n=["absolute","fixed"].indexOf(uo(t).position)>=0,r=n&&Aa(t)?Ad(t):t;return Wl(r)?e.filter(function(a){return Wl(a)&&Hk(a,r)&&Oi(a)!=="body"}):[]}function Wne(t,e,n,r){var a=e==="clippingParents"?Hne(t):[].concat(e),i=[].concat(a,[n]),o=i[0],s=i.reduce(function(c,u){var d=Qk(t,u,r);return c.top=Kl(d.top,c.top),c.right=gv(d.right,c.right),c.bottom=gv(d.bottom,c.bottom),c.left=Kl(d.left,c.left),c},Qk(t,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Zk(t){var e=t.reference,n=t.element,r=t.placement,a=r?Ei(r):null,i=r?Cc(r):null,o=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,c;switch(a){case Ur:c={x:o,y:e.y-n.height};break;case Pa:c={x:o,y:e.y+e.height};break;case Ia:c={x:e.x+e.width,y:s};break;case zr:c={x:e.x-n.width,y:s};break;default:c={x:e.x,y:e.y}}var u=a?oy(a):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case bc:c[u]=c[u]-(e[d]/2-n[d]/2);break;case Pd:c[u]=c[u]+(e[d]/2-n[d]/2);break}}return c}function Rd(t,e){e===void 0&&(e={});var n=e,r=n.placement,a=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,s=n.boundary,c=s===void 0?une:s,u=n.rootBoundary,d=u===void 0?jk:u,f=n.elementContext,h=f===void 0?Id:f,v=n.altBoundary,p=v===void 0?!1:v,g=n.padding,m=g===void 0?0:g,y=qk(typeof m!="number"?m:Gk(m,Ed)),b=h===Id?dne:Id,w=t.rects.popper,x=t.elements[p?b:h],C=Wne(Wl(x)?x:x.contextElement||rl(t.elements.popper),c,d,o),S=xc(t.elements.reference),_=Zk({reference:S,element:w,placement:a}),O=uy(Object.assign({},w,_)),N=h===Id?O:S,B={top:C.top-N.top+y.top,bottom:N.bottom-C.bottom+y.bottom,left:C.left-N.left+y.left,right:N.right-C.right+y.right},T=t.modifiersData.offset;if(h===Id&&T){var k=T[a];Object.keys(B).forEach(function(E){var I=[Ia,Pa].indexOf(E)>=0?1:-1,A=[Ur,Pa].indexOf(E)>=0?"y":"x";B[E]+=k[A]*I})}return B}function Kne(t,e){e===void 0&&(e={});var n=e,r=n.placement,a=n.boundary,i=n.rootBoundary,o=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?Uk:c,d=Cc(r),f=d?s?$k:$k.filter(function(p){return Cc(p)===d}):Ed,h=f.filter(function(p){return u.indexOf(p)>=0});h.length===0&&(h=f);var v=h.reduce(function(p,g){return p[g]=Rd(t,{placement:g,boundary:a,rootBoundary:i,padding:o})[Ei(g)],p},{});return Object.keys(v).sort(function(p,g){return v[p]-v[g]})}function qne(t){if(Ei(t)===ny)return[];var e=bv(t);return[Xk(t),e,Xk(e)]}function Gne(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var a=n.mainAxis,i=a===void 0?!0:a,o=n.altAxis,s=o===void 0?!0:o,c=n.fallbackPlacements,u=n.padding,d=n.boundary,f=n.rootBoundary,h=n.altBoundary,v=n.flipVariations,p=v===void 0?!0:v,g=n.allowedAutoPlacements,m=e.options.placement,y=Ei(m),b=y===m,w=c||(b||!p?[bv(m)]:qne(m)),x=[m].concat(w).reduce(function(Y,D){return Y.concat(Ei(D)===ny?Kne(e,{placement:D,boundary:d,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:g}):D)},[]),C=e.rects.reference,S=e.rects.popper,_=new Map,O=!0,N=x[0],B=0;B<x.length;B++){var T=x[B],k=Ei(T),E=Cc(T)===bc,I=[Ur,Pa].indexOf(k)>=0,A=I?"width":"height",M=Rd(e,{placement:T,boundary:d,rootBoundary:f,altBoundary:h,padding:u}),$=I?E?Ia:zr:E?Pa:Ur;C[A]>S[A]&&($=bv($));var U=bv($),F=[];if(i&&F.push(M[k]<=0),s&&F.push(M[$]<=0,M[U]<=0),F.every(function(Y){return Y})){N=T,O=!1;break}_.set(T,F)}if(O)for(var j=p?3:1,W=function(D){var q=x.find(function(z){var K=_.get(z);if(K)return K.slice(0,D).every(function(P){return P})});if(q)return N=q,"break"},H=j;H>0;H--){var J=W(H);if(J==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}const Yne={name:"flip",enabled:!0,phase:"main",fn:Gne,requiresIfExists:["offset"],data:{_skip:!1}};function Vk(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function eO(t){return[Ur,Ia,Pa,zr].some(function(e){return t[e]>=0})}function Xne(t){var e=t.state,n=t.name,r=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=Rd(e,{elementContext:"reference"}),s=Rd(e,{altBoundary:!0}),c=Vk(o,r),u=Vk(s,a,i),d=eO(c),f=eO(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const Jne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Xne};function Qne(t,e,n){var r=Ei(t),a=[zr,Ur].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[zr,Ia].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function Zne(t){var e=t.state,n=t.options,r=t.name,a=n.offset,i=a===void 0?[0,0]:a,o=Uk.reduce(function(d,f){return d[f]=Qne(f,e.rects,i),d},{}),s=o[e.placement],c=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const Vne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Zne};function ere(t){var e=t.state,n=t.name;e.modifiersData[n]=Zk({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const tre={name:"popperOffsets",enabled:!0,phase:"read",fn:ere,data:{}};function nre(t){return t==="x"?"y":"x"}function rre(t){var e=t.state,n=t.options,r=t.name,a=n.mainAxis,i=a===void 0?!0:a,o=n.altAxis,s=o===void 0?!1:o,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,f=n.padding,h=n.tether,v=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=Rd(e,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),y=Ei(e.placement),b=Cc(e.placement),w=!b,x=oy(y),C=nre(x),S=e.modifiersData.popperOffsets,_=e.rects.reference,O=e.rects.popper,N=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,B=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(S){if(i){var E,I=x==="y"?Ur:zr,A=x==="y"?Pa:Ia,M=x==="y"?"height":"width",$=S[x],U=$+m[I],F=$-m[A],j=v?-O[M]/2:0,W=b===bc?_[M]:O[M],H=b===bc?-O[M]:-_[M],J=e.elements.arrow,Y=v&&J?iy(J):{width:0,height:0},D=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Kk(),q=D[I],z=D[A],K=Nd(0,_[M],Y[M]),P=w?_[M]/2-j-K-q-B.mainAxis:W-K-q-B.mainAxis,R=w?-_[M]/2+j+K+z+B.mainAxis:H+K+z+B.mainAxis,X=e.elements.arrow&&Ad(e.elements.arrow),ee=X?x==="y"?X.clientTop||0:X.clientLeft||0:0,re=(E=T==null?void 0:T[x])!=null?E:0,ae=$+P-re-ee,oe=$+R-re,ce=Nd(v?gv(U,ae):U,$,v?Kl(F,oe):F);S[x]=ce,k[x]=ce-$}if(s){var ge,pe=x==="x"?Ur:zr,_e=x==="x"?Pa:Ia,be=S[C],Se=C==="y"?"height":"width",Ne=be+m[pe],Ae=be-m[_e],Pe=[Ur,zr].indexOf(y)!==-1,Me=(ge=T==null?void 0:T[C])!=null?ge:0,me=Pe?Ne:be-_[Se]-O[Se]-Me+B.altAxis,ie=Pe?be+_[Se]+O[Se]-Me-B.altAxis:Ae,ye=v&&Pe?One(me,be,ie):Nd(v?me:Ne,be,v?ie:Ae);S[C]=ye,k[C]=ye-be}e.modifiersData[r]=k}}const are={name:"preventOverflow",enabled:!0,phase:"main",fn:rre,requiresIfExists:["offset"]};function ire(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ore(t){return t===la(t)||!Aa(t)?ly(t):ire(t)}function lre(t){var e=t.getBoundingClientRect(),n=wc(e.width)/t.offsetWidth||1,r=wc(e.height)/t.offsetHeight||1;return n!==1||r!==1}function sre(t,e,n){n===void 0&&(n=!1);var r=Aa(e),a=Aa(e)&&lre(e),i=rl(e),o=xc(t,a,n),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((Oi(e)!=="body"||cy(i))&&(s=ore(e)),Aa(e)?(c=xc(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):i&&(c.x=sy(i))),{x:o.left+s.scrollLeft-c.x,y:o.top+s.scrollTop-c.y,width:o.width,height:o.height}}function cre(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function a(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var c=e.get(s);c&&a(c)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||a(i)}),r}function ure(t){var e=cre(t);return xne.reduce(function(n,r){return n.concat(e.filter(function(a){return a.phase===r}))},[])}function dre(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function fre(t){var e=t.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var tO={placement:"bottom",modifiers:[],strategy:"absolute"};function nO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function hre(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,a=e.defaultOptions,i=a===void 0?tO:a;return function(s,c,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},tO,i),modifiersData:{},elements:{reference:s,popper:c},attributes:{},styles:{}},f=[],h=!1,v={state:d,setOptions:function(y){var b=typeof y=="function"?y(d.options):y;g(),d.options=Object.assign({},i,d.options,b),d.scrollParents={reference:Wl(s)?Dd(s):s.contextElement?Dd(s.contextElement):[],popper:Dd(c)};var w=ure(fre([].concat(r,d.options.modifiers)));return d.orderedModifiers=w.filter(function(x){return x.enabled}),p(),v.update()},forceUpdate:function(){if(!h){var y=d.elements,b=y.reference,w=y.popper;if(nO(b,w)){d.rects={reference:sre(b,Ad(w),d.options.strategy==="fixed"),popper:iy(w)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(B){return d.modifiersData[B.name]=Object.assign({},B.data)});for(var x=0;x<d.orderedModifiers.length;x++){if(d.reset===!0){d.reset=!1,x=-1;continue}var C=d.orderedModifiers[x],S=C.fn,_=C.options,O=_===void 0?{}:_,N=C.name;typeof S=="function"&&(d=S({state:d,options:O,name:N,instance:v})||d)}}}},update:dre(function(){return new Promise(function(m){v.forceUpdate(),m(d)})}),destroy:function(){g(),h=!0}};if(!nO(s,c))return v;v.setOptions(u).then(function(m){!h&&u.onFirstUpdate&&u.onFirstUpdate(m)});function p(){d.orderedModifiers.forEach(function(m){var y=m.name,b=m.options,w=b===void 0?{}:b,x=m.effect;if(typeof x=="function"){var C=x({state:d,name:y,instance:v,options:w}),S=function(){};f.push(C||S)}})}function g(){f.forEach(function(m){return m()}),f=[]}return v}}var vre=[Fne,tre,Mne,Sne,Vne,Yne,are,Ane,Jne],pre=hre({defaultModifiers:vre});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var gre=/\s/;function mre(t){for(var e=t.length;e--&&gre.test(t.charAt(e)););return e}var yre=mre,bre=yre,wre=/^\s+/;function xre(t){return t&&t.slice(0,bre(t)+1).replace(wre,"")}var Cre=xre,_re=Cre,rO=ot,Sre=xd,aO=NaN,Tre=/^[-+]0x[0-9a-f]+$/i,kre=/^0b[01]+$/i,Ore=/^0o[0-7]+$/i,Ere=parseInt;function Pre(t){if(typeof t=="number")return t;if(Sre(t))return aO;if(rO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=rO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=_re(t);var n=kre.test(t);return n||Ore.test(t)?Ere(t.slice(2),n?2:8):Tre.test(t)?aO:+t}var iO=Pre;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ire=Xa,Are=function(){return Ire.Date.now()},Nre=Are,Dre=ot,dy=Nre,oO=iO,Rre="Expected a function",Mre=Math.max,Lre=Math.min;function Fre(t,e,n){var r,a,i,o,s,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Rre);e=oO(e)||0,Dre(n)&&(d=!!n.leading,f="maxWait"in n,i=f?Mre(oO(n.maxWait)||0,e):i,h="trailing"in n?!!n.trailing:h);function v(S){var _=r,O=a;return r=a=void 0,u=S,o=t.apply(O,_),o}function p(S){return u=S,s=setTimeout(y,e),d?v(S):o}function g(S){var _=S-c,O=S-u,N=e-_;return f?Lre(N,i-O):N}function m(S){var _=S-c,O=S-u;return c===void 0||_>=e||_<0||f&&O>=i}function y(){var S=dy();if(m(S))return b(S);s=setTimeout(y,g(S))}function b(S){return s=void 0,h&&r?v(S):(r=a=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,r=c=a=s=void 0}function x(){return s===void 0?o:b(dy())}function C(){var S=dy(),_=m(S);if(r=arguments,a=this,c=S,_){if(s===void 0)return p(c);if(f)return clearTimeout(s),s=setTimeout(y,e),v(c)}return s===void 0&&(s=setTimeout(y,e)),o}return C.cancel=w,C.flush=x,C}var fo=Fre;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Bre(){var t=l.getCurrentInstance();return function(n,r){var a;if(Re(t.props[n]))a=t.props[n](l.h);else if(t.slots[n])a=t.slots[n]&&t.slots[n](null)[0];else if(r){var i=r[t.props.theme];a=l.createVNode(i,null,null)}return a}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function wv(){var t=Qe(),e=t.classPrefix,n={small:"".concat(e.value,"-size-s"),medium:"".concat(e.value,"-size-m"),large:"".concat(e.value,"-size-l"),default:"",xs:"".concat(e.value,"-size-xs"),xl:"".concat(e.value,"-size-xl"),block:"".concat(e.value,"-size-full-width")},r={loading:"".concat(e.value,"-is-loading"),loadMore:"".concat(e.value,"-is-load-more"),disabled:"".concat(e.value,"-is-disabled"),focused:"".concat(e.value,"-is-focused"),success:"".concat(e.value,"-is-success"),error:"".concat(e.value,"-is-error"),warning:"".concat(e.value,"-is-warning"),selected:"".concat(e.value,"-is-selected"),active:"".concat(e.value,"-is-active"),checked:"".concat(e.value,"-is-checked"),current:"".concat(e.value,"-is-current"),hidden:"".concat(e.value,"-is-hidden"),visible:"".concat(e.value,"-is-visible"),expanded:"".concat(e.value,"-is-expanded"),indeterminate:"".concat(e.value,"-is-indeterminate")};return{classPrefix:e,sizeClassNames:n,statusClassNames:r,classNames:{size:n,status:r}}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gn(t,e,n,r){var a=l.getCurrentInstance(),i=a.emit,o=a.vnode,s=l.ref(),c=o.props||{},u=Object.prototype.hasOwnProperty.call(c,r)||Object.prototype.hasOwnProperty.call(c,hc(r));return u?[t,function(d){i("update:".concat(r),d);for(var f=arguments.length,h=new Array(f>1?f-1:0),v=1;v<f;v++)h[v-1]=arguments[v];n==null||n.apply(void 0,[d].concat(h))}]:(s.value=e,[s,function(d){s.value=d;for(var f=arguments.length,h=new Array(f>1?f-1:0),v=1;v<f;v++)h[v-1]=arguments[v];n==null||n.apply(void 0,[d].concat(h))}])}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jre="t-display-none-element-refresh";function lO(){var t=l.ref(0);l.provide(jre,t),l.onUpdated(function(){t.value+=1})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function sO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function cO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $re=function(e){var n=e.data,r=e.container,a=e.fixedHeight,i=a===void 0?!1:a,o=e.lineHeight,s=o===void 0?30:o,c=e.bufferSize,u=c===void 0?20:c,d=e.threshold,f=d===void 0?100:d,h=l.reactive({visibleData:[],cachedHeight:[],cachedScrollY:[]}),v=l.computed(function(){return n.value.length>f}),p=l.ref(0),g=new Map,m=0,y=0,b=0,w=0,x=0,C=0,S=function(){n.value.forEach(function(M,$){M.$index=$,i&&(h.cachedScrollY[$]=$*s)}),i||(h.cachedScrollY[n.value.length-1]=void 0)};S();var _=l.computed(function(){var A=h.cachedHeight,M=A.length;if(M){var $=A.reduce(function(F,j){return F+j||s},0);if(A.length===n.value.length)return $;var U=$/A.length;return $+(n.value.length-A.length)*U}return v.value?n.value.length*s:0}),O=l.computed(function(){var A=h.visibleData,M=A[0];return M?A.length===1?0:h.cachedScrollY[M.$index]:0}),N=function(){C=Math.min(x+m+u*2,n.value.length),h.visibleData=n.value.slice(x,C)},B=function(){var M,$=g.get(b);if($){var U=$==null||(M=$.getBoundingClientRect())===null||M===void 0?void 0:M.height;h.cachedScrollY[b]=r.value.scrollTop-w,h.cachedHeight[b]=U;for(var F=b+1;F<=((j=h.visibleData[h.visibleData.length-1])===null||j===void 0?void 0:j.$index);F++){var j,W=g.get(F),H=(W==null?void 0:W.getBoundingClientRect())||{},J=H.height;h.cachedHeight[F]=J;var Y=h.cachedScrollY[F-1]+h.cachedHeight[F-1];h.cachedScrollY.splice(F,1,Y)}for(var D=b-1;D>=((q=h.visibleData[0])===null||q===void 0?void 0:q.$index);D--){var q,z=g.get(D),K=(z==null?void 0:z.getBoundingClientRect())||{},P=K.height;h.cachedHeight[D]=P;var R=h.cachedScrollY[D+1]-h.cachedHeight[D];h.cachedScrollY.splice(D,1,R)}if(h.cachedScrollY[0]>0){for(var X=h.cachedScrollY[0],ee=Math.min(C,n.value.length),re=0;re<ee;re++)h.cachedScrollY.splice(re,1,h.cachedScrollY[re]-X);var ae=h.cachedScrollY[b-1]?h.cachedScrollY[b-1]+w:w;r.value.scrollTop=ae,y=ae}if(h.cachedScrollY[x]<0){var oe=h.cachedHeight.slice(0,Math.max(0,b)).reduce(function(ce,ge){return ce+ge},0)+w;r.value.scrollTop=oe,y=oe,oe===0&&(b=0,w=0)}l.nextTick(function(){var ce=r.value,ge=ce.scrollTop,pe=ce.scrollHeight,_e=ce.clientHeight;if(ge+_e===pe)for(var be=C-1;be>=x;be--)be===C-1?h.cachedScrollY.splice(be,1,pe.value-h.cachedHeight[be]):h.cachedScrollY.splice(be,1,h.cachedScrollY[be+1]-h.cachedHeight[be])})}},T=function(){if(v.value){var M=r.value.scrollTop,$=M-y;y=M,$+=w;var U=b;if($){if($>=0){for(;U<n.value.length&&$>(h.cachedHeight[U]||s);)h.cachedHeight[U]||(h.cachedHeight[U]=s),$-=h.cachedHeight[U],U++;U>=n.value.length?(b=n.value.length-1,w=0):(b=U,w=$);var F=r.value,j=F.clientHeight,W=F.scrollHeight;M+j===W&&(b=n.value.length-m+1),x<=b-u&&(x=Math.min(n.value.length-m,b-u),x<0&&(x=0))}else{for(;$<0;)U--,h.cachedHeight[U]||(h.cachedHeight[U]=s),$+=h.cachedHeight[U];U<0?(b=0,w=0):(b=U,w=$),B(),x>b-u&&(x=Math.max(0,b-u))}N()}}};!i&&l.watch(p,B,{flush:"post"});var k=function(){v.value&&p.value++};l.watch(n,function(){S(),h.visibleData=[],h.cachedScrollY=[],h.cachedHeight=[],y=0,b=0,w=0,x=0,g.clear(),n.value.length<=f?h.visibleData=n.value:N(),r.value&&(r.value.scrollTop=0)});var E=!1,I=function(){E&&(m=Math.ceil(r.value.offsetHeight/s),N())};return l.onMounted(function(){if(!(!window||!window.IntersectionObserver)){var A=new window.IntersectionObserver(function(M){var $=M[0];($.isIntersecting||$.intersectionRatio)&&(E=!0,v.value&&I(),A.unobserve(r.value))});r.value&&A.observe(r.value)}}),cO(cO({trs:g,scrollHeight:_},l.toRefs(h)),{},{translateY:O,handleScroll:T,handleRowMounted:k,refreshContainer:I,fixedHeight:i,calculateScrollY:B})};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Mt(t,e,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"value",i=l.getCurrentInstance(),o=i.emit,s=i.vnode,c=l.ref(),u=s.props||{},d=Object.prototype.hasOwnProperty.call(u,"modelValue")||Object.prototype.hasOwnProperty.call(u,"model-value"),f=Object.prototype.hasOwnProperty.call(u,a)||Object.prototype.hasOwnProperty.call(u,hc(a));return d?[e,function(h){o("update:modelValue",h);for(var v=arguments.length,p=new Array(v>1?v-1:0),g=1;g<v;g++)p[g-1]=arguments[g];r==null||r.apply(void 0,[h].concat(p))}]:f?[t,function(h){o("update:".concat(a),h);for(var v=arguments.length,p=new Array(v>1?v-1:0),g=1;g<v;g++)p[g-1]=arguments[g];r==null||r.apply(void 0,[h].concat(p))}]:(c.value=n,[c,function(h){c.value=h;for(var v=arguments.length,p=new Array(v>1?v-1:0),g=1;g<v;g++)p[g-1]=arguments[g];r==null||r.apply(void 0,[h].concat(p))}])}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var xv=new Set,st={warn:function(e,n){console.warn("TDesign ".concat(e," Warn: ").concat(n))},warnOnce:function(e,n){var r="TDesign ".concat(e," Warn: ").concat(n);xv.has(r)||(xv.add(r),console.warn(r))},error:function(e,n){console.error("TDesign ".concat(e," Error: ").concat(n))},errorOnce:function(e,n){var r="TDesign ".concat(e," Error: ").concat(n);xv.has(r)||(xv.add(r),console.error(r))},info:function(e,n){console.info("TDesign ".concat(e," Info: ").concat(n))}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ure=/(.png|.jpg|.jpeg|.jpe|.webp|.avif|.svg|.gif|.bmp)/i,zre=/(.png|.jpg|.jpeg|.jpe|.webp|.avif|.svg|.gif|.bmp|.dwg|.dxf|.svf|.tif|.tiff|.arw)/i,Hre=/(.pdf)/i,Wre=/(.xlsx|.xls|.csv|.xlc|.xlm|.xlt|.xlw)/i,Kre=/(.dox|docx|.document|.wps|.wdb|.msword)/i,qre=/(.ppt|.pptx|.key)/i,uO=/(.avi|.mp4|.wmv|.mpg|.mpeg|.mov|.rm|.ram|.swf|.flv|.rmvb|.flash|.mid|.3gp)/i,Gre=/(.mp2|.mp3|.mp4|.ogg|.3gpp|.ac3|.au)/i,dO={"audio/*":Gre,"video/*":uO,"image/*":zre,".ico":/image\/vnd.microsoft.icon/i,".doc":/application\/msword/i,".docx":/application\/vnd.openxmlformats-officedocument.wordprocessingml.document/i,".xls":/application\/vnd.ms-excel/i,".xlsx":/application\/vnd.openxmlformats-officedocument.spreadsheetml.sheet/i,".ppt":/application\/vnd.ms-powerpoint/i,".pptx":/application\/vnd.openxmlformats-officedocument.presentationml.presentation/i,".vsd":/application\/vnd.visio/i,".txt":/text\/plain/i,".abw":/application\/x-abiword/i,".avi":/video\/x-msvideo/i,".azw":/application\/vnd.amazon.ebook/i,".bin":/application\/octet-stream/i,".cda":/application\/x-cdf/i,".mpkg":/application\/vnd.apple.installer+xml/i,".odp":/application\/vnd.oasis.opendocument.presentation/i,".ods":/application\/vnd.oasis.opendocument.spreadsheet/i,".odt":/application\/vnd.oasis.opendocument.text/i,".oga":/audio\/ogg/i,".ogv":/video\/ogg/i,".ogx":/application\/ogg/i},Pi={B:1,KB:1024,MB:1048576,GB:1073741824};function Yre(t){return t<Pi.KB?"".concat(t," Bytes"):t>=Pi.KB&&t<Pi.MB?"".concat((t/Pi.KB).toFixed(1)," KB"):t>=Pi.MB&&t<Pi.GB?"".concat((t/Pi.MB).toFixed(1)," MB"):t>=Pi.GB?"".concat((t/Pi.GB).toFixed(1)," GB"):""}function fO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=new Date,n=e.getMonth()+1;n=n<10?"0".concat(n):n;var r="".concat(e.getFullYear(),"-").concat(n,"-").concat(e.getDate()),a="".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds());return t?[r,a].join(" "):r}function _c(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=t,a=0,i=0;if(!r)return"";for(var o=0;o<r.length;o++){var s=r[o],c=escape(s).indexOf("%u")===0;o<e*2&&a<e?c?a+=1:a+=2:o>o-n&&i<n&&(c?i+=1:i+=2)}return r.replace(new RegExp("^(.{".concat(a,"})(.+)(.{").concat(i,"})$")),"$1…$3")}function Xre(t){return t<1024?"".concat(t," Bytes"):t>=1024&&t<1048576?"".concat((t/1024).toFixed(1)," KB"):t>=1048576?"".concat((t/1048576).toFixed(1)," MB"):""}function Jre(t,e,n){var r=["B","KB","MB","GB"],a=1,i=r.indexOf(n);i===-1&&(st.warn("Upload","`sizeLimit.unit` can only be one of ".concat(r.join())),i=a);var o=Pi[n];return t>e*o}function Qre(t){return new Promise(function(e){if(!t){e("");return}var n=new FileReader;n.readAsDataURL(t),n.onload=function(r){var a;e((a=r.target)===null||a===void 0?void 0:a.result)}})}function Zre(t,e,n){var r=e||n;if(!t)return!0;if(!r)return!1;for(var a=t.split(",").map(function(u){return u.trim()}),i=0,o=a.length;i<o;i++){var s=a[i];if(dO[s]&&dO[s].test(r))return!0;var c=new RegExp(s,"i");if(c.test(r))return!0}return!1}function hO(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=[],r=0;r<t.length;r++)Zre(e,t[r].type,t[r].name)&&n.push(t[r]);return n}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Cv(t){var e=l.ref("");return l.watch([t],function(n,r){var a=$e(n,1),i=a[0],o=$e(r,1),s=o[0];if(s!==i){if(typeof i=="string"){e.value=i;return}Qre(i).then(function(c){e.value=c})}},{immediate:!0}),{previewUrl:e}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var fy={attach:{type:[String,Function],default:"body"},content:{type:[String,Function]},default:{type:[String,Function]},delay:{type:[Number,Array]},destroyOnClose:Boolean,disabled:Boolean,hideEmptyPopup:Boolean,overlayClassName:{type:[String,Object,Array]},overlayInnerClassName:{type:[String,Object,Array]},overlayInnerStyle:{type:[Boolean,Object,Function]},overlayStyle:{type:[Boolean,Object,Function]},placement:{type:String,default:"top"},popperOptions:{type:Object},showArrow:Boolean,trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click","focus","mousedown","context-menu"].includes(e):!0}},triggerElement:{type:[String,Function]},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onOverlayClick:Function,onScroll:Function,onScrollToBottom:Function,onVisibleChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Sc(t,e){if(!(typeof window>"u")){var n=window&&window.ResizeObserver;if(n){var r=null,a=function(){!r||!t.value||(r.unobserve(t.value),r.disconnect(),r=null)},i=function(s){r=new ResizeObserver(e),r.observe(s)};t&&l.watch(t,function(o){a(),o&&i(o)},{immediate:!0,flush:"post"}),l.onBeforeUnmount(function(){a()})}}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vre(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}function vO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];return t.forEach(function(n){Ke(n)?e.push.apply(e,Ee(n)):n.type===l.Fragment?e.push.apply(e,Ee(vO(n.children))):e.push(n)}),e.filter(function(n){return!(n&&(n.type===l.Comment||n.type===l.Fragment&&n.children.length===0||n.type===l.Text&&n.children.trim()===""))})}function eae(t,e){return!t&&!e?!1:!!(!t||!e||["width","height","x","y"].some(function(n){return t[n]!==e[n]}))}function pO(t){var e=l.getCurrentInstance(),n=l.ref();return l.onMounted(function(){n.value=t(e)}),l.onUpdated(function(){var r=t(e);n.value!==r&&(n.value=r)}),n}var tae=l.defineComponent({name:"TPopupTrigger",props:{forwardRef:Function},emits:["resize"],setup:function(e,n){var r=n.emit,a=n.slots,i=pO(function(s){var c=s.parent.vnode;return c.el.nextElementSibling}),o=l.ref();return l.watch(i,function(){var s;(s=e.forwardRef)===null||s===void 0||s.call(e,i.value)}),Sc(i,function(s){var c=$e(s,1),u=c[0].contentRect;o.value=u}),l.watch(o,function(s,c){eae(s,c)&&r("resize")}),function(){var s,c,u=vO((s=a.default)===null||s===void 0?void 0:s.call(a));return u.length>1||((c=u[0])===null||c===void 0?void 0:c.type)===l.Text?l.createVNode("span",null,[u]):u[0]}}}),nae=l.defineComponent({name:"TPopupContent",emits:["resize"],setup:function(e,n){var r=n.emit,a=n.slots,i=pO(function(o){return o.vnode.el.children[0]});return Sc(i,function(){r("resize")}),function(){return l.createVNode("div",{style:"position: absolute; top: 0px; left: 0px; width: 100%"},[a.default()])}}}),rae=l.defineComponent({name:"TPopupContainer",inheritAttrs:!1,props:{parent:Object,visible:Boolean,attach:fy.attach,forwardRef:Function},emits:["resize","contentMounted"],setup:function(e,n){var r=n.emit,a=n.attrs,i=n.slots,o=n.expose,s=l.ref(),c=l.ref(!1);function u(){r("resize")}return l.onMounted(function(){requestAnimationFrame(function(){c.value=e.visible})}),l.watch(function(){return e.visible},function(d){d&&(c.value=e.visible)}),o({unmountContent:function(){c.value=!1}}),function(){var d,f=function(){return aS()||dc(e.attach,s.value)};return l.createVNode(l.Fragment,null,[l.createVNode(tae,{class:a.class,forwardRef:function(v){e.forwardRef(v),s.value=v},onResize:u},Vre(d=i.default())?d:{default:function(){return[d]}}),c.value&&l.createVNode(l.Teleport,{disabled:!f(),to:f()},{default:function(){return[l.createVNode(nae,{onResize:u,onVnodeMounted:function(){return r("contentMounted")}},{default:function(){return[i.content&&i.content()]}})]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function hy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aae(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var mO="data-td-popup",vy="data-td-popup-parent";function py(t,e){var n=[],r=[vy,mO];if(!t)return n;return e&&r.unshift(r.pop()),a(t),n;function a(i){var o=document.querySelectorAll("[".concat(r[0],'="').concat(i,'"]'));o.forEach(function(s){n.push(s);var c=s.getAttribute(r[1]);c&&c!==i&&a(c)})}}var yO=Symbol();function iae(t){return t.replace(/-(left|top)$/,"-start").replace(/-(right|bottom)$/,"-end")}function oae(t){var e=[];return{add:function(r,a){r&&(qt(t.value,r,a),e.push(function(){At(t.value,r,a)}))},clean:function(){e.forEach(function(r){return r==null?void 0:r()}),e.length=0}}}var lae=l.defineComponent({name:"TPopup",props:hy(hy({},fy),{},{expandAnimation:{type:Boolean}}),setup:function(e,n){var r,a=n.expose,i=l.toRefs(e),o=i.visible,s=i.modelValue,c=Mt(o,s,e.defaultVisible,e.onVisibleChange,"visible"),u=$e(c,2),d=u[0],f=u[1],h=We(),v=Ut(),p,g,m,y=l.ref(null),b=l.ref(null),w=l.ref(null),x=l.ref(null),C=l.ref(!1),S=typeof process<"u"&&(r=process.env)!==null&&r!==void 0&&r.TEST?"":Date.now().toString(36),_=l.inject(yO,void 0);l.provide(yO,{id:S,assertMouseLeave:H});var O=ve("popup"),N=Lt(),B=N.STATUS,T=l.computed(function(){var z,K,P=e.trigger!=="hover"?[0,0]:[].concat((z=e.delay)!==null&&z!==void 0?z:[250,150]);return{show:P[0],hide:(K=P[1])!==null&&K!==void 0?K:P[0]}}),k=oae(y);l.watch(function(){return[e.trigger,y.value]},function(){y.value&&(k.clean(),k.add({hover:"mouseenter",focus:"focusin","context-menu":"contextmenu",click:"click"}[e.trigger],function(z){if(!e.disabled){if(z.type==="contextmenu"&&z.preventDefault(),(z.type==="click"||z.type==="contextmenu")&&d.value){U(z);return}$(z)}}),k.add({hover:"mouseleave",focus:"focusout"}[e.trigger],U))}),l.watch(function(){return[e.overlayStyle,e.overlayInnerStyle,b.value]},function(){I(),A()}),l.watch(function(){return e.placement},function(){M(),A()}),l.watch(function(){return d.value},function(z){if(z){qt(document,"mousedown",W,!0),e.trigger==="focus"&&OX(y.value,"keydown",function(K){var P,R=typeof process<"u"&&(P=process.env)!==null&&P!==void 0&&P.TEST?"27":"Escape";K.code===R&&U(K)});return}At(document,"mousedown",W,!0)}),l.onUnmounted(function(){M(),F(),At(document,"mousedown",W,!0)}),a({update:A,getOverlay:function(){return b.value},getOverlayState:function(){return{hover:C.value}},close:function(){return U()}});function E(){var z=e.overlayStyle;if(!(!y.value||!b.value)){if(Re(z))return z(y.value,b.value);if(ot(z))return z}}function I(){var z=e.overlayInnerStyle;!y.value||!b.value||(Re(z)?Bl(b.value,z(y.value,b.value)):ot(z)&&Bl(b.value,z))}function A(){if(!(!w.value||!d.value)){if(p){if(y.value.getRootNode()instanceof ShadowRoot)p.state.elements.reference=y.value,p.update();else{for(var z=y.value.getBoundingClientRect(),K=y.value;K&&K!==document.body;)K=K.parentElement;var P=K!==document.body||z.width===0&&z.height===0;P?f(!1,{trigger:j({type:"mouseenter"})}):(p.state.elements.reference=y.value,p.update())}return}p=pre(y.value,w.value,hy({placement:iae(e.placement),onFirstUpdate:function(){l.nextTick(A)}},e.popperOptions))}}function M(){if(p){var z;(z=p)===null||z===void 0||z.destroy(),p=null}if(e.destroyOnClose){var K;(K=x.value)===null||K===void 0||K.unmountContent()}}function $(z){F(),g=setTimeout(function(){f(!0,{trigger:j(z)})},T.value.show)}function U(z){F(),m=setTimeout(function(){f(!1,{trigger:j(z),e:z})},T.value.hide)}function F(){clearTimeout(g),clearTimeout(m)}function j(z){switch(z==null?void 0:z.type){case"mouseenter":return"trigger-element-hover";case"mouseleave":return"trigger-element-hover";case"focusin":return"trigger-element-focus";case"focusout":return"trigger-element-blur";case"click":return"trigger-element-click";case"context-menu":case"keydown":return"keydown-esc";case"mousedown":return"document";default:return"trigger-element-close"}}function W(z){var K,P;if(!((K=w.value)!==null&&K!==void 0&&K.contains(z.target))&&!((P=y.value)!==null&&P!==void 0&&P.contains(z.target))){var R=py(S).find(function(X){return X.contains(z.target)});R&&py(R.getAttribute(vy),!0).some(function(X){return X===w.value})||U(z)}}function H(z){if(C.value=!1,!(e.trigger!=="hover"||y.value.contains(z.target))){var K=py(S).some(function(P){var R=P.getBoundingClientRect();return z.x>R.x&&z.x<R.x+R.width&&z.y>R.y&&z.y<R.y+R.height});K||(U(z),_==null||_.assertMouseLeave(z))}}function J(){C.value=!0,d.value&&e.trigger==="hover"&&F()}function Y(z){var K;(K=e.onOverlayClick)===null||K===void 0||K.call(e,{e:z})}var D=l.inject("updateScrollTop",void 0);function q(z){var K,P=z.target,R=P.scrollTop,X=P.clientHeight,ee=P.scrollHeight,re=fo(function(ae){var oe;return(oe=e.onScrollToBottom)===null||oe===void 0?void 0:oe.call(e,{e:ae})},100);X+Math.floor(R)===ee&&re(z),(K=e.onScroll)===null||K===void 0||K.call(e,{e:z})}return l.watch(function(){return[d.value,b.value]},function(){d.value&&b.value&&D&&(D==null||D(b.value))}),function(){var z=h("content"),K=e.hideEmptyPopup&&["",void 0,null].includes(z),P=d.value||!e.destroyOnClose?l.withDirectives(l.createVNode("div",l.mergeProps(V(V({},mO,S),vy,_==null?void 0:_.id),{class:[O.value,e.overlayClassName],ref:function(X){return w.value=X},style:[{zIndex:e.zIndex},E(),K&&{visibility:"hidden"}],onClick:Y,onMouseenter:J,onMouseleave:H}),[l.createVNode("div",{class:["".concat(O.value,"__content"),V(V(V({},"".concat(O.value,"__content--text"),Je(e.content)),"".concat(O.value,"__content--arrow"),e.showArrow),B.value.disabled,e.disabled),e.overlayInnerClassName],ref:b,onScroll:q},[z,e.showArrow&&l.createVNode("div",{class:"".concat(O.value,"__arrow")},null)])]),[[l.vShow,d.value]]):null;return l.createVNode(rae,{ref:function(X){return x.value=X},forwardRef:function(X){return y.value=X},onContentMounted:function(){if(d.value){A();var X=setTimeout(function(){I(),clearTimeout(X)},60)}},onResize:function(){d.value&&A()},visible:d.value,attach:e.attach},{content:function(){return l.createVNode(l.Transition,{name:"".concat(O.value,"--animation").concat(e.expandAnimation?"-expand":""),appear:!0,onEnter:A,onAfterLeave:M},aae(P)?P:{default:function(){return[P]}})},default:function(){return v("default","triggerElement")}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var sa=Be(lae);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var sae=l.defineComponent({name:"TAnchorTarget",props:cne,setup:function(e,n){var r=n.slots,a=Qe("anchor"),i=a.globalConfig,o=a.classPrefix,s=St({FileCopyIcon:ZV}),c=s.FileCopyIcon,u=ve("anchor"),d=function(){var h=document.createElement("a");h.href="#".concat(e.id),Zte(h.href),$r.success(i.value.copySuccessText,1e3)};return function(){var f=r.default,h=e.tag,v=e.id,p=["".concat(u.value,"__target")],g="".concat(o.value,"-copy");return l.createVNode(h,{id:v,class:p},{default:function(){return[f&&f(null),l.createVNode(sa,{content:i.value.copyText,placement:"top",showArrow:!0,class:g},{default:function(){return[l.createVNode(c,{onClick:d},null)]}})]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var cae=Be(Gte),uae=Be(Jte),dae=Be(sae);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var fae={maxItemWidth:{type:String,default:void 0},options:{type:Array},separator:{type:[String,Function]},theme:{type:String,default:"light",validator:function(e){return e?["light"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var hae={content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,href:{type:String,default:""},icon:{type:Function},maxWidth:{type:String,default:void 0},replace:Boolean,router:{type:Object},target:{type:String,default:"_self",validator:function(e){return e?["_blank","_self","_parent","_top"].includes(e):!0}},to:{type:[String,Object]},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vae(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var bO=vae;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var wO=Js,pae=pd,gae=Ke,xO=wO?wO.isConcatSpreadable:void 0;function mae(t){return gae(t)||pae(t)||!!(xO&&t&&t[xO])}var yae=mae,bae=b0,wae=yae;function CO(t,e,n,r,a){var i=-1,o=t.length;for(n||(n=wae),a||(a=[]);++i<o;){var s=t[i];e>0&&n(s)?e>1?CO(s,e-1,n,r,a):bae(a,s):r||(a[a.length]=s)}return a}var gy=CO,xae=gy;function Cae(t){var e=t==null?0:t.length;return e?xae(t,1):[]}var _ae=Cae,Sae=_ae,Tae=qC,kae=YC;function Oae(t){return kae(Tae(t,void 0,Sae),t+"")}var _O=Oae;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Eae=Qh,Pae=L0;function Iae(t,e){return e.length<2?t:Eae(t,Pae(e,0,-1))}var Aae=Iae,Nae=lc,Dae=bO,Rae=Aae,Mae=sc;function Lae(t,e){return e=Nae(e,t),t=Rae(t,e),t==null||delete t[Mae(Dae(e))]}var SO=Lae,Fae=Hh;function Bae(t){return Fae(t)?void 0:t}var jae=Bae,$ae=oc,Uae=A_,zae=SO,Hae=lc,Wae=rc,Kae=jae,qae=_O,Gae=C0,Yae=1,Xae=2,Jae=4,Qae=qae(function(t,e){var n={};if(t==null)return n;var r=!1;e=$ae(e,function(i){return i=Hae(i,t),r||(r=i.length>1),i}),Wae(t,Gae(t),n),r&&(n=Uae(n,Yae|Xae|Jae,Kae));for(var a=e.length;a--;)zae(n,e[a]);return n}),Sr=Qae;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zae={delay:{type:Number},destroyOnClose:{type:Boolean,default:!0},duration:{type:Number},placement:{type:String,default:"top"},showArrow:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(e){return e?["default","primary","success","danger","warning","light"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vae=function(){var e=l.ref(0),n=l.ref(0),r=function(i){e.value=i.clientX,n.value=i.clientY};return Si||(l.onMounted(function(){window.addEventListener("mousemove",r,{passive:!0})}),l.onUnmounted(function(){window.removeEventListener("mousemove",r)})),{x:e,y:n}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var eie=l.defineComponent({name:"TTooltip",props:Tc(Tc({},fy),Zae),setup:function(e,n){var r=l.ref(null),a=l.ref(null),i=l.toRefs(e),o=i.visible,s=i.modelValue,c=Mt(o,s,e.defaultVisible,e.onVisibleChange,"visible"),u=$e(c,2),d=u[0],f=u[1],h=l.getCurrentInstance(),v=l.ref(e.visible||e.defaultVisible),p=ve(),g=We(),m=Ut(),y=Vae(),b=y.x,w=l.ref(b.value);l.onMounted(function(){e.duration&&v.value&&(r.value=setTimeout(function(){f(!1,{}),clearTimeout(r.value),r.value=null},e.duration))});var x=function(B,T){r.value&&(T==null?void 0:T.trigger)!=="document"||(B&&(w.value=b.value),f(B,T))},C=l.computed(function(){return["".concat(p.value,"-tooltip"),V({},"".concat(p.value,"-tooltip--").concat(e.theme),e.theme),e.overlayClassName]}),S=l.computed(function(){return Tc(Tc({},(h==null?void 0:h.vnode.props)||{}),{},{placement:e.placement==="mouse"?"bottom-left":e.placement,showArrow:e.placement==="mouse"?!1:e.showArrow,overlayClassName:C.value,onVisibleChange:x,disabled:e.disabled})}),_=l.computed(function(){if(e.placement!=="mouse"||w.value===0)return e.overlayInnerStyle;var N=function(T){return{transform:"translateX(".concat(w.value-T.getBoundingClientRect().left,"px)")}};return e.overlayInnerStyle?function(B,T){return Tc(Tc({},N(B)),Re(e.overlayInnerStyle)?e.overlayInnerStyle(B,T):e.overlayInnerStyle)}:N});l.watch(function(){return v.value},function(){r.value&&!v.value&&(clearTimeout(r.value),r.value=null)});var O=function(){var B,T;(B=a.value)===null||B===void 0||(T=B.update)===null||T===void 0||T.call(B)};return n.expose({updatePopper:O}),function(){var N=g("content");return!N&&!e.content?m("default","triggerElement"):l.createVNode(sa,l.mergeProps(Sr(S.value,["content","default"]),{ref:a,overlayInnerStyle:_.value,visible:d.value}),{default:function(){return[m("default","triggerElement")]},content:function(){return N}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Tr=Be(eie);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function kO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function OO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tie(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var nie={separator:"",theme:"light",slots:{separator:""},maxItemWidth:void 0},EO=l.defineComponent({name:"TBreadcrumbItem",inheritAttrs:!1,props:OO({},hae),setup:function(e,n){var r,a=n.attrs,i=Ut(),o=We(),s=l.ref(),c=l.inject("tBreadcrumb",nie),u=l.ref(c==null?void 0:c.theme),d=l.ref(!1),f=ve("breadcrumb__item"),h=ve("breadcrumb__separator"),v=ve("is-disabled"),p=ve("link"),g=ve("breadcrumb__inner"),m=ve("breadcrumb--text-overflow"),y=St({ChevronRightIcon:tl}),b=y.ChevronRightIcon,w=l.computed(function(){var T=c==null?void 0:c.maxItemWidth,k=e.maxWidth||T||"120";return{maxWidth:"".concat(k,"px")}});l.onMounted(function(){d.value=nv(s.value)}),l.onBeforeUpdate(function(){d.value=nv(s.value)});var x=c==null?void 0:c.separator,C=c==null||(r=c.slots)===null||r===void 0?void 0:r.separator,S=x||C||l.createVNode(b,{color:"rgba(0,0,0,.3)"},null),_=l.getCurrentInstance(),O=_.proxy,N=function(){var k=e.router||O.$router;e.to&&k?e.replace?k.replace(e.to):k.push(e.to):window.location.href=e.href},B=function(k){e.disabled||(k.preventDefault(),e.target==="_blank"?e.href?window.open(e.href):window.open(e.to):N())};return function(){var T=[f.value,u.value],k=[m.value];e.disabled&&k.push(v.value);var E={onClick:function(U){if(e.disabled){U.stopPropagation();return}}},I=i("default","content"),A=l.createVNode("span",{class:g.value,style:w.value},[o("icon"),l.createVNode("span",{ref:s,class:"".concat(g.value,"-text")},[I])]),M=l.createVNode("span",OO({class:k},E),[A]);return(e.href||e.to)&&!e.disabled&&(k.push(p.value),M=l.createVNode("a",l.mergeProps({class:k,href:e.href,target:e.target},E,{onClick:B}),[A])),l.createVNode("div",l.mergeProps({class:T},a,{onClick:!e.disabled&&e.onClick}),[d.value?l.createVNode(Tr,{content:function(){return I}},tie(M)?M:{default:function(){return[M]}}):M,l.createVNode("span",{class:h.value,style:{textOverflow:d.value?"ellipsis":"clip"}},[Re(S)?S():S])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var rie=l.defineComponent({name:"TBreadcrumb",props:fae,setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.separator,o=a.theme,s=a.maxItemWidth,c=ve("breadcrumb");l.provide("tBreadcrumb",l.reactive({separator:i,theme:o,slots:{separator:r.separator},maxItemWidth:s}));var u=We();return function(){var d=u("default");return e.options&&e.options.length&&(d=e.options.map(function(f,h){return l.createVNode(EO,l.mergeProps(f,{key:h}),{default:function(){return[f.default||f.content]}})})),l.createVNode("div",{class:c.value},[d])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var aie=Be(rie),iie=Be(EO);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var oie={active:Boolean,content:{type:[String,Function],default:""},disabled:Boolean,divider:Boolean,prefixIcon:{type:Function},theme:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},value:{type:[String,Number,Object]},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lie=["from","to","direction"];function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function my(t,e){for(var n=sie({},t),r=0;r<e.length;r++){var a=e[r];delete n[a]}return n}function cie(t){if(Je(t))return t;if(Ke(t))return t[0]&&t[0][0]==="#"&&t.unshift("90deg"),"linear-gradient( ".concat(t.join(",")," )");var e=t.from,n=t.to,r=t.direction,a=r===void 0?"to right":r,i=Vo(t,lie),o=Object.keys(i);if(o.length){o=o.sort(function(c,u){return parseFloat(c.substr(0,c.length-1))-parseFloat(u.substr(0,u.length-1))});var s=o.map(function(c){return"".concat(i[c]," ").concat(c)});return"linear-gradient(".concat(a,", ").concat(s.join(","),")")}return"linear-gradient(".concat(a,", ").concat(e,", ").concat(n,")")}function uie(t){return Ti("on-".concat(t))}function IO(t){return Et(t)?"".concat(t,"px"):t}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function AO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function NO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var yy=l.defineComponent({name:"TDropdownItem",props:NO(NO({},oie),{},{maxColumnWidth:{type:[String,Number],default:100},minColumnWidth:{type:[String,Number],default:10},isSubmenu:Boolean}),setup:function(e){var n=We(),r=Ut(),a=l.ref();el(e.isSubmenu?null:a);var i=n("prefixIcon"),o=ve("dropdown__item"),s=function(u){var d;e.disabled||(d=e.onClick)===null||d===void 0||d.call(e,e.value,{e:u})};return function(){var c=r("default","content"),u=[o.value,"".concat(o.value,"--theme-").concat(e.theme),V(V({},"".concat(o.value,"--active"),e.active),"".concat(o.value,"--disabled"),e.disabled)];return l.createVNode("li",{class:u,onClick:s,style:{maxWidth:IO(e.maxColumnWidth),minWidth:IO(e.minColumnWidth)},ref:a},[e.prefixIcon?l.createVNode("div",{class:"".concat(o.value,"-icon")},[i]):null,c])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var DO={direction:{type:String,default:"right",validator:function(e){return e?["left","right"].includes(e):!0}},disabled:Boolean,hideAfterItemClick:{type:Boolean,default:!0},maxColumnWidth:{type:[String,Number],default:100},maxHeight:{type:Number,default:300},minColumnWidth:{type:[String,Number],default:10},options:{type:Array,default:function(){return[]}},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placement:{type:String,default:"bottom-left",validator:function(e){return e?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(e):!0}},popupProps:{type:Object},trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click","focus","context-menu"].includes(e):!0}},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function RO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function MO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LO=l.defineComponent({name:"TDropdownMenu",props:MO({},DO),setup:function(e){var n=ve("dropdown"),r=ve("dropdown__menu"),a=l.reactive({}),i=l.ref(null),o=l.ref(),s=l.ref(!1),c=St({ChevronRightIcon:tl}),u=c.ChevronRightIcon,d=function(g){var m,y,b=g.data,w=g.context;b==null||(m=b.onClick)===null||m===void 0||m.call(b,b,w),(y=e.onClick)===null||y===void 0||y.call(e,b,w)},f=function(g,m){var y=g.target.scrollTop;a[m]=y};l.onMounted(function(){if(o.value){var p,g=parseInt((p=window)===null||p===void 0?void 0:p.getComputedStyle(o.value).height,10);g>=e.maxHeight&&(s.value=!0)}i.value=document.querySelector(".".concat(n.value,"__item")).scrollHeight+2});var h=function(g){return Re(g)?g(l.h):g},v=function(g,m){var y,b=[],w;return(y=g.forEach)===null||y===void 0||y.call(g,function(x,C){var S=MO({},x),_=C-Math.ceil(a[m]/i.value),O=_>=0?_:C;S.children?(S.children=v(S.children,m+1),w=l.createVNode("div",{key:C},[l.createVNode(yy,{style:S.style,class:["".concat(n.value,"__item"),"".concat(n.value,"__item--suffix"),S.class],value:S.value,theme:S.theme,active:S.active,prefixIcon:S.prefixIcon,disabled:S.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,isSubmenu:!0},{default:function(){return[l.createVNode("div",{class:"".concat(n.value,"__item-content")},[l.createVNode("span",{class:"".concat(n.value,"__item-text")},[h(S.content)]),l.createVNode(u,{class:"".concat(n.value,"__item-direction"),size:"16"},null)]),l.createVNode("div",{class:["".concat(n.value,"__submenu-wrapper"),V({},"".concat(n.value,"__submenu-wrapper--").concat(e.direction),e.direction)],style:{position:"absolute",top:"".concat(O*i.value,"px")}},[l.createVNode("div",{class:["".concat(n.value,"__submenu"),V({},"".concat(n.value,"__submenu--disabled"),S.disabled)],style:{position:"static",maxHeight:"".concat(e.maxHeight,"px")},onScroll:function(T){return f(T,m+1)}},[l.createVNode("ul",null,[S.children])])])]}}),S.divider?l.createVNode(J0,null,null):null])):w=l.createVNode("div",{key:C},[l.createVNode(yy,{style:S.style,class:["".concat(n.value,"__item"),S.class],value:S.value,theme:S.theme,active:S.active,prefixIcon:S.prefixIcon,disabled:S.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,onClick:S.disabled||S.children?function(){return null}:function(N,B){return d({data:S,context:B})}},{default:function(){return[l.createVNode("span",{class:"".concat(n.value,"__item-text")},[h(S.content)])]}}),S.divider?l.createVNode(J0,null,null):null]),b.push(w)}),b};return function(){return l.createVNode("div",{class:[r.value,"".concat(r.value,"--").concat(e.direction),V({},"".concat(r.value,"--overflow"),s.value)],style:{maxHeight:"".concat(e.maxHeight,"px")},ref:o,onScroll:function(g){return f(g,0)}},[v(e.options,0)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function by(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _v=function(e){var n,r,a;if(!e)return[];if(((n=e[0])===null||n===void 0||(n=n.type)===null||n===void 0?void 0:n.name)==="TDropdownMenu"){var i,o,s=(i=e[0])===null||i===void 0||(i=i.children)===null||i===void 0||(o=i.default)===null||o===void 0?void 0:o.call(i);if(Ke(s))return _v(s)}return Ke(e)?(e=e.reduce(function(c,u){return c=c.concat(Ke(u.children)?u.children:u),c},[]),e.map(function(c){var u,d,f,h,v,p,g,m,y,b,w=(u=c.children)===null||u===void 0||(d=u.content)===null||d===void 0?void 0:d.call(u),x=((f=c.children)===null||f===void 0||(h=f.prefixIcon)===null||h===void 0?void 0:h.call(f))||((v=c.children)===null||v===void 0||(p=v["prefix-icon"])===null||p===void 0?void 0:p.call(v)),C=(g=c.children)===null||g===void 0||(m=g.default)===null||m===void 0?void 0:m.call(g),S=C==null||(y=C.filter)===null||y===void 0?void 0:y.call(C,function(N){var B;return!["TDropdownMenu","TDropdownItem"].includes((B=N.type)===null||B===void 0?void 0:B.name)}),_=C==null||(b=C.filter)===null||b===void 0?void 0:b.call(C,function(N){var B;return!Je(N.children)&&["TDropdownMenu","TDropdownItem"].includes((B=N.type)===null||B===void 0?void 0:B.name)}),O=Object.keys(c.props||{}).reduce(function(N,B){var T;return c.props[B]===""&&((T=c.type)===null||T===void 0?void 0:T.name)==="TDropdownItem"&&["active","divider","disabled"].includes(B)?N[Ti(B)]=!0:N[Ti(B)]=c.props[B],N},{});return by(by(by({content:w||S||C},O),x?{prefixIcon:function(){return x}}:{}),{},{children:(_==null?void 0:_.length)>0?_v(_):null})}).filter(function(c){return!!c.content})):Ke((r=e[0])===null||r===void 0?void 0:r.children)?_v((a=e[0])===null||a===void 0?void 0:a.children):[]};function die(t){var e,n,r,a,i=co(),o=l.getCurrentInstance(),s=((e=i("DropdownMenu"))===null||e===void 0||(e=e[0])===null||e===void 0||(e=e.children)===null||e===void 0||(n=e.default)===null||n===void 0?void 0:n.call(e))||((r=o.slots)===null||r===void 0||(a=r.dropdown)===null||a===void 0?void 0:a.call(r)),c=l.computed(function(){return t.options&&t.options.length>0?t.options:_v(s)});return c}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fie=l.defineComponent({name:"TDropdown",props:DO,setup:function(e,n){var r=n.attrs,a=We(),i=ve("dropdown"),o=l.ref(null),s=l.ref(!1),c=l.computed(function(){var f,h,v=(f=e.popupProps)===null||f===void 0?void 0:f.delay;return Et(v)?v+10:Ke(v)?((h=v[1])!==null&&h!==void 0?h:v[0])+10:160}),u=function(h,v){var p;if(e.hideAfterItemClick){var g,m,y,b;setTimeout(function(){return s.value=!1},c.value),(g=e.popupProps)===null||g===void 0||(m=g.onVisibleChange)===null||m===void 0||m.call(g,!1,v),(y=e.popupProps)===null||y===void 0||(b=y["on-visible-change"])===null||b===void 0||b.call(y,!1,v)}e==null||(p=e.onClick)===null||p===void 0||p.call(e,h,v)},d=function(h,v){var p,g,m,y;s.value=h,(p=e.popupProps)===null||p===void 0||(g=p.onVisibleChange)===null||g===void 0||g.call(p,h,v),(m=e.popupProps)===null||m===void 0||(y=m["on-visible-change"])===null||y===void 0||y.call(m,h,v)};return function(){var f,h,v=(f=a("default"))===null||f===void 0?void 0:f[0],p=die(e),g=wy(wy(wy({},r),{},{disabled:e.disabled,placement:e.placement,trigger:e.trigger},Sr(e.popupProps,["onVisibleChange","on-visible-change"])),{},{overlayInnerClassName:[i.value,(h=e.popupProps)===null||h===void 0?void 0:h.overlayInnerClassName]});return l.createVNode(sa,l.mergeProps({destroyOnClose:!0,ref:o,visible:s.value,onVisibleChange:d,expandAnimation:!0},g),{default:function(){return[v]},content:function(){var y;return l.createVNode(l.Fragment,null,[a("panelTopContent"),(y=p.value)!==null&&y!==void 0&&y.length?l.createVNode(LO,l.mergeProps(Sr(e,"onClick"),{options:p.value,onClick:u}),null):null,a("panelBottomContent")])}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var hie=Be(fie),vie=Be(yy),pie=Be(LO);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var gie={collapsed:Boolean,expanded:{type:Array,default:void 0},defaultExpanded:{type:Array,default:[]},expandMutex:Boolean,expandType:{type:String,default:"normal",validator:function(e){return e?["normal","popup"].includes(e):!0}},logo:{type:Function},operations:{type:Function},theme:{type:String,default:"light",validator:function(e){return e?["light","dark"].includes(e):!0}},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},width:{type:[String,Number,Array],default:"232px"},onChange:Function,onExpand:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xC(r.key),r)}}function vo(t,e,n){return e&&jO(t.prototype,e),n&&jO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var UO=function(e,n,r){if(e)for(var a=0;a<e.children.length;++a){var i=e.children[a];if(i.value===n)return[].concat(Ee(r),[e.value]);var o=UO(i,n,[].concat(Ee(r),[e.value]));if(o)return o}},zO=function(e,n){if(!e)return[];for(var r=0;r<e.children.length;++r){var a=e.children[r];if(a.value===n)return e.children;var i=zO(a,n);if(i)return i}},xy=function(e,n){if(e.value===n)return e;if(e.children.length>0)for(var r=0,a=e.children.length;r<a;r++){var i=xy(e.children[r],n);if(i)return i}},HO=function(){function t(e){ho(this,t),V(this,"data",null),V(this,"cache",new Set),V(this,"isMutex",l.ref(!1)),V(this,"expandValues",null);var n={value:null,parent:null,children:[]};this.data=n,this.isMutex=e==null?void 0:e.isMutex,this.expandValues=new Set(e==null?void 0:e.expandValues)}return vo(t,[{key:"add",value:function(n){var r=n.value,a=n.parent,i=n.vnode,o=mie({value:r,parent:a,children:[],vnode:i},n);if(this.cache.forEach(function(c,u,d){n.value===c.parent&&(o.children.push(c),d.delete(c))}),n.parent==null)this.data.children.push(o),o.parent=this.data;else if(this.data.children.length>0){var s=xy(this.data,a);s&&!s.children.some(function(c){return c.value===o.value})?s.children.push(o):this.cache.add(o)}else this.cache.add(o)}},{key:"select",value:function(n){var r=UO(this.data,n,[])||[];return r.push(n),r.filter(function(a){return a!=null})}},{key:"expand",value:function(n){var r=this;if(this.expandValues.has(n))return this.expandValues.delete(n),Ee(this.expandValues);if(this.expandValues.add(n),!this.isMutex.value)return Ee(this.expandValues);var a=zO(this.data,n)||[],i=new Set(a.filter(function(o){var s;return((s=o.children)===null||s===void 0?void 0:s.length)>0&&o.value!==n}).map(function(o){return o.value}));return this.expandValues.forEach(function(o){var s=i.has(o);s&&r.expandValues.delete(o)}),Ee(this.expandValues)}},{key:"getChild",value:function(n){var r=xy(this.data,n);return r?r.children:[]}}])}();/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var yie=l.defineComponent({name:"TMenu",props:KO(KO({},gie),{},{onCollapsed:Function}),setup:function(e,n){var r=ve();l.watchEffect(function(){n.slots.options&&st.warnOnce("TMenu","`options` slot is going to be deprecated, please use `operations` for slot instead.")});var a=l.ref(e.expandType),i=l.computed(function(){return e.theme}),o=l.computed(function(){return e.expandMutex}),s=l.computed(function(){return e.collapsed}),c=l.computed(function(){return["".concat(r.value,"-default-menu"),"".concat(r.value,"-menu--").concat(e.theme),V({},"".concat(r.value,"-is-collapsed"),e.collapsed)]}),u=l.computed(function(){return["".concat(r.value,"-menu"),"".concat(r.value,"-menu--scroll")]}),d=l.computed(function(){var T=e.width,k=function(I){return Et(I)?"".concat(I,"px"):I};return Ke(T)?T.map(function(E){return k(E)}):[k(T),"64px"]}),f=l.computed(function(){return{height:"100%",width:e.collapsed?d.value[1]:d.value[0]}}),h=l.toRefs(e),v=h.value,p=h.modelValue,g=h.expanded,m=Mt(v,p,e.defaultValue,e.onChange),y=$e(m,2),b=y[0],w=y[1],x=gn(g,e.defaultExpanded,e.onExpand,"expanded"),C=$e(x,2),S=C[0],_=C[1],O=l.ref([]);l.watchEffect(function(){var T;a.value=e.collapsed?"popup":e.expandType,(T=e.onCollapsed)===null||T===void 0||T.call(e,{collapsed:e.collapsed})});var N=new HO({isMutex:o,expandValues:S.value?Ee(S.value):[]});l.provide("TdMenu",{activeValue:b,activeValues:O,expandValues:S,mode:a,theme:i,isHead:!1,vMenu:N,collapsed:s,select:function(k){k!==b.value&&w(k)},open:function(k,E){if(a.value==="normal")_(N.expand(k));else if(E==="add")S.value.indexOf(k)===-1&&_([].concat(Ee(S.value),[k]));else if(E==="remove"){var I=S.value.indexOf(k),A=Ee(S.value);A.splice(I,1),_(A)}}}),l.watch(function(){return e.expanded},function(T){N.expandValues=new Set(T)}),l.watch(function(){return e.collapsed},function(T,k){!T&&k&&_(Ee(N.expandValues))});var B=function(k){O.value=N.select(k)};return l.watch(b,B),l.onMounted(function(){O.value=N.select(b.value)}),{styles:f,classPrefix:r,menuClass:c,innerClasses:u,activeValue:b,activeValues:O,expandValues:S}},render:function(){var e=Ja(this,"operations","options"),n=jn(this,"logo");return l.createVNode("div",{class:this.menuClass,style:this.styles},[l.createVNode("div",{class:"".concat(this.classPrefix,"-default-menu__inner")},[n&&l.createVNode("div",{class:"".concat(this.classPrefix,"-menu__logo")},[n]),l.createVNode("ul",{class:this.innerClasses},[Ja(this,"default","content")]),e&&l.createVNode("div",{class:"".concat(this.classPrefix,"-menu__operations")},[e])])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var bie={expanded:{type:Array,default:void 0},defaultExpanded:{type:Array,default:[]},expandType:{type:String,default:"normal",validator:function(e){return e?["normal","popup"].includes(e):!0}},logo:{type:Function},operations:{type:Function},theme:{type:String,default:"light",validator:function(e){return e?["light","dark"].includes(e):!0}},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onChange:Function,onExpand:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Sv={default:{type:Function},destroyOnHide:{type:Boolean,default:!0},disabled:Boolean,draggable:{type:Boolean,default:!0},label:{type:[String,Function]},lazy:Boolean,panel:{type:[String,Function]},removable:Boolean,value:{type:[String,Number]},onRemove:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var GO=l.defineComponent({name:"TTabPanel",props:wie({},Sv),setup:function(e){var n=ve("tab-panel"),r=Lt(),a=r.STATUS,i=Ut();lO();var o=l.inject("tabs"),s=l.computed(function(){return e.value===o.value.value}),c=l.ref(e.lazy?s.value:!0);l.watch(s,function(){s.value?c.value||(c.value=!0):e.destroyOnHide&&(c.value=!1)},{immediate:!0});var u=l.computed(function(){return[n.value,V({},a.value.hidden,!s.value)]});return function(){return c.value?l.createVNode("div",{class:u.value},[i("default","panel")]):null}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qn={action:{type:[String,Function]},addable:Boolean,disabled:Boolean,dragSort:Boolean,list:{type:Array},placement:{type:String,default:"top",validator:function(e){return e?["left","top","bottom","right"].includes(e):!0}},scrollPosition:{type:String,default:"auto",validator:function(e){return e?["auto","start","center","end"].includes(e):!0}},size:{type:String,default:"medium",validator:function(e){return e?["medium","large"].includes(e):!0}},theme:{type:String,default:"normal",validator:function(e){return e?["normal","card"].includes(e):!0}},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onAdd:Function,onChange:Function,onDragSort:Function,onRemove:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ii=function(e){return(e==null?void 0:e.offsetWidth)||0},xie=function(e){return(e==null?void 0:e.offsetLeft)||0};function Cie(t,e,n){var r=t.navsContainer,a=t.activeTab,i=t.rightOperations,o=t.leftOperations,s=Ii(a),c=Ii(r),u=xie(a),d=Ii(i),f=Ii(o);if(n==="auto"){if(u-f<e)return u-f;if(u+s>e+c-d)return u+s-c+d}else{if(n==="start")return u-f;if(n==="center")return u+(s-c)/2;if(n==="end")return u+s-c+d}return e}function _ie(t,e,n){var r=t.navsContainer,a=t.activeTab,i=Ii(r),o=Ii(a);return n==="next"?e+i-o:e-i+o}function Sie(t){var e=t.navsWrap,n=t.navsContainer,r=t.rightOperations,a=t.toRightBtn,i=Ii(e),o=Ii(n),s=Ii(r),c=Ii(a);return i-o+s-c}function Tie(t,e){return Math.max(0,Math.min(t,e))}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var kie=l.defineComponent({name:"TTabNavItem",props:{index:Number,active:{type:Boolean},theme:Qn.theme,size:Qn.size,placement:Qn.placement,label:{type:null},disabled:Sv.disabled,removable:Sv.removable,value:Sv.value,onClick:Function,onRemove:Function},setup:function(e){var n=l.ref();el(n);var r=ve("tabs__nav-item"),a=St({CloseIcon:Za}),i=a.CloseIcon,o=ve(),s=Lt(),c=s.STATUS,u=s.SIZE,d=function(m){var y=m.e;y&&y.stopPropagation(),e.onRemove({e:y,value:e.value,index:e.index})},f=function(m){e.disabled||e.onClick(m)},h=l.computed(function(){return V(V(V(V(V(V(V(V({},r.value,!0),"".concat(o.value,"-tabs__nav--card"),e.theme==="card"),c.value.disabled,e.disabled),c.value.active,e.active),"".concat(o.value,"-is-left"),e.placement==="left"),"".concat(o.value,"-is-right"),e.placement==="right"),u.value.medium,e.size==="medium"),u.value.large,e.size==="large")}),v=function(){return l.createVNode("div",{class:h.value,onClick:f,ref:n},[l.createVNode("span",{class:"".concat(r.value,"-text-wrapper")},[e.label]),e.removable&&!e.disabled?l.createVNode(i,{class:"remove-btn",onClick:d},null):null])},p=function(){return l.createVNode("div",{class:h.value,onClick:f},[l.createVNode("div",{class:["".concat(r.value,"-wrapper"),V(V({},c.value.disabled,e.disabled),c.value.active,e.active)],ref:n},[l.createVNode("span",{class:"".concat(r.value,"-text-wrapper")},[e.label])]),e.removable&&!e.disabled?l.createVNode(i,{class:"remove-btn",onClick:d},null):null])};return function(){return e.theme==="card"?v():p()}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Oie=l.defineComponent({props:{navs:{type:Array},placement:Qn.placement,value:Qn.value},setup:function(e){var n=ve("tabs"),r=ve(),a=l.ref(),i=l.computed(function(){return["".concat(n.value,"__bar"),"".concat(r.value,"-is-").concat(e.placement)]}),o=l.ref(null),s=function(){for(var d=["left","right"].includes(e.placement.toLowerCase()),f=d?["height","top"]:["width","left"],h=$e(f,2),v=h[0],p=h[1],g=0,m=0;m<e.navs.length;m++){var y;if(e.navs[m].props.value===e.value)break;if((y=e.navs[m])!==null&&y!==void 0&&y.el){var b=getComputedStyle(e.navs[m].el)[v],w=parseFloat(b);g+=w}}return e.navs[m]?V(V({},p,"".concat(g,"px")),v,e.navs[m].el?getComputedStyle(e.navs[m].el)[v]:"0px"):{}},c=function(){return o.value=s()};return l.onMounted(function(){l.nextTick(function(){c()})}),l.watch([function(){return e.navs},function(){return e.value},function(){return e.placement}],function(){l.nextTick(function(){c()})}),Sc(a,fo(function(){c()},35)),function(){return l.createVNode("div",{class:i.value,style:o.value,ref:a},null)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Eie(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Pie(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function Pie(t,e){if(t){if(typeof t=="string")return YO(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YO(t,e):void 0}}function YO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var XO=function(e,n){var r=Eie(e),a;try{for(r.s();!(a=r.n()).done;){var i=a.value;i.getAttribute("draggable")&&n(i)}}catch(o){r.e(o)}finally{r.f()}},JO=function(e,n){var r;return XO(n,function(a){a.contains(e)&&(r=a)}),r};function Iie(t){var e=null,n,r=[],a=function(h){var v=h.target;n=v,v.style.opacity="0.5"},i=function(h){h.target.style.opacity=""},o=function(h){h.preventDefault()},s=function(h){var v=JO(h.target,e.children);v&&v!==n&&v.draggable&&(v.firstChild.style.outline="1px dashed #0052d9",r.includes(v)||r.push(v))},c=function(h){for(var v=h.target,p=0,g=r;p<g.length;p++){var m=g[p];m.contains(v)||(m.firstChild.style.outline="none")}},u=function(h){h.preventDefault(),XO(e.children,function(w){w.firstChild.style.outline="none"});var v=JO(h.target,e.children);if(v&&v.parentNode!==n&&v.draggable){var p,g=[].indexOf.call(e.children,n),m=[].indexOf.call(e.children,v);m>g&&(v=e.children[m+1]);var y=t.theme==="card"?g:g-1,b=t.theme==="card"?m:m-1;(p=t.onDragSort)===null||p===void 0||p.call(t,{currentIndex:y,current:t.panels[y].value,targetIndex:b,target:t.panels[b].value})}};function d(f){e=f,e.addEventListener("dragstart",a,!1),e.addEventListener("dragend",i,!1),e.addEventListener("dragover",o,!1),e.addEventListener("dragenter",s,!1),document.addEventListener("dragleave",c,!1),document.addEventListener("mousemove",c,!1),e.addEventListener("drop",u,!1)}return l.onUnmounted(function(){e.removeEventListener("dragstart",a),e.removeEventListener("dragend",i),e.removeEventListener("dragover",o),e.removeEventListener("dragenter",s),document.removeEventListener("dragleave",c),document.removeEventListener("mousemove",c),e.removeEventListener("drop",u)}),{setNavsWrap:d}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function QO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Md(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QO(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Aie=l.defineComponent(Md(Md({name:"TTabNav"},{resizeObserver:null}),{},{props:{theme:Qn.theme,panels:{type:Array,default:function(){return[]}},action:Array,value:Qn.value,placement:Qn.placement,scrollPosition:Qn.scrollPosition,size:Qn.size,disabled:Qn.disabled,addable:Qn.addable,onChange:Qn.onChange,onAdd:Qn.onAdd,onRemove:Qn.onRemove,dragSort:Qn.dragSort,onDragSort:Qn.onDragSort},setup:function(e){var n=ve("tabs"),r=St({ChevronLeftIcon:pc,ChevronRightIcon:tl,AddIcon:uv}),a=r.ChevronLeftIcon,i=r.ChevronRightIcon,o=r.AddIcon,s=ve(),c=Lt(),u=c.SIZE,d=l.ref(0),f=l.ref(),h=l.ref(),v=l.ref(),p=l.ref(),g=l.ref(),m=l.ref(),y=l.ref(0),b=function(){return{navsContainer:f.value,navsWrap:h.value,leftOperations:v.value,rightOperations:p.value,toRightBtn:g.value,activeTab:m.value}},w=l.computed(function(){return["left","right"].includes(e.placement.toLowerCase())}),x=l.computed(function(){return d.value>1}),C=l.computed(function(){return d.value<y.value-1}),S=l.computed(function(){return w.value?{}:{transform:"translate3d(".concat(-d.value,"px, 0, 0)")}}),_=l.computed(function(){return e.addable?{"min-height":"48px"}:null}),O=l.computed(function(){return V(V(V({},"".concat(n.value,"__btn"),!0),u.value.medium,e.size==="medium"),u.value.large,e.size==="large")}),N=l.computed(function(){return Md(V({},"".concat(n.value,"__btn--left"),!0),O.value)}),B=l.computed(function(){return Md(V({},"".concat(n.value,"__btn--right"),!0),O.value)}),T=l.computed(function(){return Md(V({},"".concat(n.value,"__add-btn"),!0),O.value)}),k=l.computed(function(){return V(V(V(V({},"".concat(n.value,"__nav-container"),!0),"".concat(n.value,"__nav--card"),e.theme==="card"),"".concat(s.value,"-is-").concat(e.placement),!0),"".concat(s.value,"-is-addable"),e.addable)}),E=l.computed(function(){return V(V({},"".concat(n.value,"__nav-scroll"),!0),"".concat(s.value,"-is-scrollable"),x.value||C.value)}),I=l.computed(function(){return["".concat(n.value,"__nav-wrap"),"".concat(s.value,"-is-smooth"),V({},"".concat(s.value,"-is-vertical"),w.value)]}),A=function(R){d.value=Tie(R,y.value)},M=function(R){A(_ie(b(),d.value,R))},$=function(R){if(!(!x.value&&!C.value)){R.preventDefault();var X=R.deltaX,ee=R.deltaY;Math.abs(X)>Math.abs(ee)?A(d.value+X):A(d.value+ee)}},U=function(){setTimeout(function(){A(Cie(b(),d.value,e.scrollPosition))},0)},F=function(){l.nextTick(function(){y.value=Sie(b())})};l.watch([function(){return e.placement},function(){return e.panels}],F),l.watch([function(){return e.scrollPosition}],U),tte(fo(F),f.value);var j=function(R){var X;(X=e.onAdd)===null||X===void 0||X.call(e,{e:R})},W=function(R,X){var ee=X.value,re=X.disabled;if(re||e.value===ee)return!1;e.onChange(ee)},H=function(R){var X=R.e,ee=R.value,re=R.index;e.onRemove({e:X,value:ee,index:re})},J=function(R){R!=null&&R.$el&&(R==null?void 0:R.value)===e.value&&m.value!==R.$el&&(m.value=R.$el,U())},Y=Iie(e),D=Y.setNavsWrap;l.onMounted(function(){D(h.value),F(),U()});var q=function(){return e.panels.map(function(R,X){var ee,re;R!=null&&(ee=R.children)!==null&&ee!==void 0&&ee.label?re=R.children.label():Re(R.label)?re=R.label(l.h):re=R.label||"选项卡".concat(X+1);var ae=e.dragSort;return ae&&R.draggable===!1&&(ae=R.draggable),l.createVNode(kie,{ref:J,draggable:ae,key:R.value,index:X,theme:e.theme,size:e.size,placement:e.placement,label:re,active:R.value===e.value,disabled:e.disabled||R.disabled,removable:R.removable,value:R.value,onClick:function(ce){return W(ce,R)},onRemove:H},null)})},z=function(){return[l.createVNode("div",{ref:v,class:["".concat(n.value,"__operations"),"".concat(n.value,"__operations--left")]},[l.createVNode(l.Transition,{name:"fade",mode:"out-in",appear:!0},{default:function(){return[x.value?l.createVNode("div",{class:N.value,onClick:function(){return M("prev")}},[l.createVNode(a,null,null)]):null]}})]),l.createVNode("div",{ref:p,class:["".concat(n.value,"__operations"),"".concat(n.value,"__operations--right")]},[l.createVNode(l.Transition,{name:"fade",mode:"out-in",appear:!0},{default:function(){return[C.value?l.createVNode("div",{ref:g,class:B.value,onClick:function(){return M("next")}},[l.createVNode(i,null,null)]):null]}}),e.addable?l.createVNode("div",{class:T.value,onClick:j},[l.createVNode(o,null,null)]):null,e.action])]},K=function(){var R=q();return l.createVNode("div",{class:k.value},[l.createVNode("div",{class:E.value,onWheel:$},[l.createVNode("div",{ref:h,class:I.value,style:S.value},[e.theme!=="card"&&l.createVNode(Oie,{placement:e.placement,value:e.value,navs:R},null),R])])])};return function(){return l.createVNode("div",{ref:f,class:["".concat(n.value,"__nav")],style:_.value},[z(),K()])}}}));/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nie=l.defineComponent({name:"TTabs",props:Qn,setup:function(e){var n=ve("tabs"),r=ve(),a=We(),i=l.toRefs(e),o=i.value,s=i.modelValue,c=Mt(o,s,e.defaultValue||"",e.onChange),u=$e(c,2),d=u[0],f=u[1];l.provide("tabs",{value:d});var h=function(w){var x;(x=e.onAdd)===null||x===void 0||x.call(e,{e:w.e})},v=function(w){f(w)},p=function(w){var x,C=w.e,S=w.value,_=w.index;(x=e.onRemove)===null||x===void 0||x.call(e,{value:S,index:_,e:C})},g=function(){var w=a("default");if(!w)return[];var x=function(S){return S.map(function(_){return _.children&&Ke(_.children)?x(_.children):_}).flat().filter(function(_){return _.type.name==="TTabPanel"})};return x(w)},m=function(){var w,x=((w=e.list)!==null&&w!==void 0&&w.length?e.list:g())||[],C=a("action"),S=x.map(function(O){var N=O;return O.props&&Object.keys(O.props).forEach(function(B){N[B]=O.props[B]}),N}),_={theme:e.theme,value:d.value,size:e.size,disabled:e.disabled,placement:e.placement,scrollPosition:e.scrollPosition,addable:e.addable,panels:S,dragSort:e.dragSort,action:C};return l.createVNode("div",{class:V(V({},"".concat(r.value,"-tabs__header"),!0),"".concat(r.value,"-is-").concat(e.placement),!0)},[l.createVNode(Aie,l.mergeProps(_,{onDragSort:e.onDragSort,onChange:v,onAdd:h,onRemove:p}),null)])},y=function(){var w,x=g();if((w=e.list)!==null&&w!==void 0&&w.length)return e.list.map(function(C){return l.createVNode(GO,l.mergeProps(C,{onRemove:p}),null)});if(x&&x.length)return l.createVNode("div",{class:["".concat(r.value,"-tabs__content")]},[x])};return function(){return l.createVNode("div",{class:[n.value]},[e.placement!=="bottom"?[m(),y()]:[y(),m()]])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ZO=Be(Nie),VO=Be(GO);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Die={content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,icon:{type:Function},popupProps:{type:Object},title:{type:[String,Function]},value:{type:[String,Number]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ql=l.defineComponent({name:"TFakeArrow",props:{isActive:{type:Boolean},overlayClassName:{type:[String,Object,Array]},overlayStyle:{type:Object||String}},setup:function(e){var n=ve("fake-arrow"),r=l.computed(function(){return[n.value,V({},"".concat(n.value,"--active"),e.isActive),e.overlayClassName]});return{classes:r}},render:function(){return l.createVNode("svg",{class:this.classes,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:this.overlayStyle},[l.createVNode("path",{d:"M3.75 5.7998L7.99274 10.0425L12.2361 5.79921",stroke:"black","stroke-opacity":"0.9","stroke-width":"1.3"},null)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function eE(){var t=function(s){s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.style.height="0",s.style.paddingTop="0",s.style.paddingBottom="0"},e=function(s){s.dataset.oldOverflow=s.style.overflow,s.style.height="".concat(s.scrollHeight,"px"),s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom,s.style.overflow="hidden"},n=function(s){s.style.height="",s.style.overflow=s.dataset.oldOverflow},r=function(s){s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.dataset.oldOverflow=s.style.overflow,s.style.height="".concat(s.scrollHeight,"px"),s.style.overflow="hidden"},a=function(s){s.scrollHeight!==0&&(s.style.height="0",s.style.paddingTop="0",s.style.paddingBottom="0")},i=function(s){s.style.height="",s.style.overflow=s.dataset.oldOverflow,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom};return{beforeEnter:t,enter:e,afterEnter:n,beforeLeave:r,leave:a,afterLeave:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function tE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Rie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Mie=l.defineComponent({name:"TSubmenu",props:Die,setup:function(e,n){var r=ve(),a=l.inject("TdMenu"),i=a.theme,o=a.activeValues,s=a.expandValues,c=a.isHead,u=a.open,d=l.inject("TdSubmenu",{}),f=d.setSubPopup,h=d.closeParentPopup,v=l.computed(function(){return n.attrs.expandType||a.mode.value}),p=l.ref([]),g=l.computed(function(){return o.value.indexOf(e.value)>-1}),m=l.ref(!1),y=l.ref(!1),b=l.computed(function(){return i.value==="light"?"#E7E7E7":"#383838"}),w=l.computed(function(){var D;return v.value==="popup"?m.value:s?(D=s.value)===null||D===void 0?void 0:D.includes(e.value):!1}),x=l.ref(!1),C=l.ref(),S=l.ref(),_=l.ref(),O=ve("slide-down");el(_,b);var N=l.computed(function(){return["".concat(r.value,"-submenu"),V(V({},"".concat(r.value,"-is-disabled"),e.disabled),"".concat(r.value,"-is-opened"),w.value)]}),B=l.computed(function(){var D;return["".concat(r.value,"-menu__popup"),"".concat(r.value,"-is-").concat(c?"horizontal":"vertical"),V({},"".concat(r.value,"-is-opened"),m.value),(D=e.popupProps)===null||D===void 0?void 0:D.overlayInnerClassName]}),T=l.computed(function(){var D;return["".concat(r.value,"-menu--").concat(i.value),c&&"".concat(r.value,"-is-head-menu"),V({},"".concat(r.value,"-menu-is-nested"),x.value),(D=e.popupProps)===null||D===void 0?void 0:D.overlayClassName]}),k=l.computed(function(){return["".concat(r.value,"-menu__item"),"".concat(r.value,"-menu__item-spacer"),"".concat(r.value,"-menu__item-spacer--").concat(c&&!x.value?"bottom":"right"),V(V(V({},"".concat(r.value,"-is-disabled"),e.disabled),"".concat(r.value,"-is-opened"),w.value),"".concat(r.value,"-is-active"),g.value)]}),E=l.computed(function(){return["".concat(r.value,"-menu__sub"),V({},"".concat(r.value,"-is-opened"),w.value)]}),I=l.computed(function(){return[V({},"".concat(r.value,"-fake-arrow--active"),w.value)]}),A=function(q){Re(f)&&f(q)},M=function(){e.disabled||setTimeout(function(){m.value||(u(e.value),l.nextTick().then(function(){A(C.value)})),m.value=!0},0)},$=function(q){return q==null?void 0:q.classList.contains("".concat(r.value,"-menu__popup"))},U=function(q){return q?$(q)||U(q.parentElement):!1},F=function(q){setTimeout(function(){var z=$(q.relatedTarget);y.value||z||(m.value=!1)},0)},j=function(q){var z=q.toElement,K=q.relatedTarget,P=z||K;if(P!==S.value){for(var R=function(ee){return ee===_.value};P!==null&&P!==document&&!R(P);)P=P.parentNode;y.value=!1,R(P)||(m.value=!1),h==null||h(q)}},W=function(){y.value=!0},H=function(){e.disabled||u(e.value)};l.watch(m,function(D){a.open(e.value,D?"add":"remove")});var J=l.toRefs(e),Y=J.value;return l.provide("TdSubmenu",l.reactive({value:Y,addMenuItem:function(q){p.value.push(q),d&&d.addMenuItem(q)},setSubPopup:function(q){S.value=q},closeParentPopup:function(q){var z=q.relatedTarget;U(z)||j(q)}})),l.watch(C,function(){A(C.value)}),l.onMounted(function(){var D;a==null||(D=a.vMenu)===null||D===void 0||D.add({value:e.value,parent:d==null?void 0:d.value,vnode:n.slots.default});for(var q=l.getCurrentInstance(),z=q.parent;z&&!/^t(head)?menu/i.test((K=z)===null||K===void 0?void 0:K.type.name);){var K,P,R;if(/submenu/i.test((P=z)===null||P===void 0?void 0:P.type.name)){x.value=!0;break}z=(R=z)===null||R===void 0?void 0:R.parent}}),{classPrefix:r,menuItems:p,mode:v,theme:i,isHead:c,isNested:x,classes:N,subClass:E,isOpen:w,transitionClass:O,arrowClass:I,overlayInnerClassName:B,overlayClassName:T,submenuClass:k,submenuRef:_,popupWrapperRef:C,popupVisible:m,isCursorInPopup:y,handleEnterPopup:W,handleMouseEnter:M,handleMouseLeave:F,handleMouseLeavePopup:j,handleSubmenuItemClick:H}},methods:{renderPopup:function(e){var n,r=this,a="right-top";!this.isNested&&this.isHead&&(a="bottom-left");var i=l.createVNode("div",{ref:"popupWrapperRef",class:["".concat(this.classPrefix,"-menu__spacer"),"".concat(this.classPrefix,"-menu__spacer--").concat(!this.isNested&&this.isHead?"top":"left")],onMouseenter:this.handleEnterPopup,onMouseleave:this.handleMouseLeavePopup},[l.createVNode("ul",{class:"".concat(this.classPrefix,"-menu__popup-wrapper")},[Ja(this,"default","content")])]),o={content:function(){return i}},s=l.createVNode(sa,l.mergeProps((n=this.popupProps)!==null&&n!==void 0?n:{},{overlayInnerClassName:Ee(this.overlayInnerClassName),overlayClassName:Ee(this.overlayClassName),visible:this.popupVisible,placement:a}),Rie({default:function(){return[l.createVNode("div",{ref:"submenuRef",class:r.submenuClass},[e])]}},o));return s},renderHeadSubmenu:function(){var e=jn(this,"icon"),n=[l.createVNode("div",{ref:"submenuRef",class:this.submenuClass,onClick:this.handleSubmenuItemClick},[e,l.createVNode("span",{class:["".concat(this.classPrefix,"-menu__content")]},[jn(this,"title",{silent:!0})])]),l.createVNode("ul",{style:"opacity: 0; width: 0; height: 0; overflow: hidden"},[Ja(this,"default","content")])],r=this.mode==="popup"&&this.isNested,a=[e,l.createVNode("span",{class:["".concat(this.classPrefix,"-menu__content")]},[jn(this,"title",{silent:!0})]),l.createVNode(ql,{overlayClassName:/menu/i.test(this.$parent.$options.name)?this.arrowClass:null,overlayStyle:{transform:"rotate(".concat(r?-90:0,"deg)")}},null)];return this.mode==="normal"?n:this.renderPopup(a)},renderSubmenu:function(){for(var e=this,n=this.$slots.content||this.$slots.default,r=jn(this,"icon"),a=Ja(this,"default","content"),i=l.getCurrentInstance(),o=i.parent,s=44;o&&o.type.name!=="TMenu";)o.type.name==="TSubmenu"&&(s+=16),o=o.parent;var c=eE(),u=c.beforeEnter,d=c.enter,f=c.afterEnter,h=c.beforeLeave,v=c.leave,p=c.afterLeave,g=this.mode==="popup"&&this.isNested,m=[l.createVNode("div",{ref:"submenuRef",class:this.submenuClass,onClick:this.handleSubmenuItemClick},[r,l.createVNode("span",{class:["".concat(this.classPrefix,"-menu__content")]},[jn(this,"title",{silent:!0})]),n&&l.createVNode(ql,{overlayClassName:this.arrowClass,overlayStyle:{transform:"rotate(".concat(g?-90:0,"deg)")}},null)]),l.createVNode(l.Transition,{name:this.transitionClass,onBeforeEnter:u,onEnter:d,onAfterEnter:f,onBeforeLeave:h,onLeave:v,onAfterLeave:p},{default:function(){return[l.withDirectives(l.createVNode("ul",{class:e.subClass,style:{"--padding-left":"".concat(s,"px")}},[a]),[[l.vShow,e.isOpen]])]}})],y=[r,l.createVNode("span",{class:["".concat(this.classPrefix,"-menu__content")]},[jn(this,"title",{silent:!0})]),l.createVNode(ql,{overlayClassName:/menu/i.test(this.$parent.$options.name)?this.arrowClass:null,overlayStyle:{transform:"rotate(".concat(g?-90:0,"deg)"),"margin-left":"auto"}},null)];return this.mode==="normal"?m:this.renderPopup(y)}},render:function(){var e=null,n={};return this.mode==="popup"&&(n={onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave}),Object.keys(this.$slots).length>0&&(e=this.isHead?this.renderHeadSubmenu():this.renderSubmenu()),l.createVNode("li",l.mergeProps({class:this.classes},n),[e])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function nE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lie(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Fie=l.defineComponent({name:"THeadMenu",props:rE({},bie),setup:function(e,n){var r,a,i,o,s=ve(),c=l.getCurrentInstance(),u=c.proxy;l.watchEffect(function(){n.slots.options&&st.warnOnce("TMenu","`options` slot is going to be deprecated, please use `operations` for slot instead.")});var d=l.toRefs(e),f=d.value,h=d.modelValue,v=d.expanded,p=Mt(f,h,e.defaultValue,e.onChange),g=$e(p,2),m=g[0],y=g[1],b=gn(v,e.defaultExpanded,e.onExpand,"expanded"),w=$e(b,2),x=w[0],C=w[1],S=l.ref([]),_=l.computed(function(){return e.theme}),O=l.computed(function(){return["".concat(s.value,"-menu"),"".concat(s.value,"-head-menu"),"".concat(s.value,"-menu--").concat(e.theme)]}),N=l.ref(e.expandType),B=l.reactive([]),T=new HO({isMutex:!0,expandValues:x.value});l.provide("TdMenu",{mode:N,theme:_,vMenu:T,isHead:!0,expandValues:x,activeValue:m,activeValues:S,select:function(J){y(J)},open:function(J,Y){var D=Ee(x.value),q=D.indexOf(J);N.value==="popup"?Y==="add"?q===-1&&D.push(J):Y==="remove"&&D.splice(q,1):N.value==="normal"&&J!==void 0&&(D.splice(0,1),q===-1&&D.push(J)),C(D)}});var k=function(J){y(J),A(J)},E=function(J){var Y=T.getChild(J);B.length=0,B.push.apply(B,Ee(Y))};l.watch(x,function(H){N.value==="normal"&&E(H[0])});var I=function(J){S.value=T.select(J)};l.watch(m,I),l.watch(function(){return e.expandType},function(H){N.value=H}),l.onMounted(function(){var H;S.value=T.select(m.value),((H=x.value)===null||H===void 0?void 0:H.length)>0&&E(x.value[0])});var A=function(J){var Y,D=B.find(function(R){return R.value===J});(Y=D.onClick)===null||Y===void 0||Y.call(D,{value:J});var q=D.to,z=D.href,K=D.replace;z&&(window.location.href=D.href);var P=D.router||u.$router;q&&P&&(K?P.replace(q):P.push(q))},M=function(){var J;return B.length===0?null:l.createVNode("ul",{class:["".concat(s.value,"-head-menu__submenu"),"".concat(s.value,"-submenu")]},[l.createVNode(ZO,{value:m.value,onChange:k},Lie(J=B.map(function(Y){var D;return l.createVNode(VO,{value:Y.value,label:(D=Y.vnode()[0])===null||D===void 0?void 0:D.children},null)}))?J:{default:function(){return[J]}})])},$=l.ref(),U=l.ref(),F=l.ref(),j=l.ref(),W=function(J,Y){J.forEach(function(D){var q,z,K,P,R=(q=D.props)===null||q===void 0?void 0:q.value;if((((z=D.type)===null||z===void 0?void 0:z.name)==="TSubmenu"||((K=D.type)===null||K===void 0?void 0:K.name)==="TMenuItem")&&T.add(rE({value:R,parent:Y,vnode:D.children.default},D.props)),Re((P=D.children)===null||P===void 0?void 0:P.default)){W(D.children.default(),R);return}Ke(D.children)&&W(D.children,R)})};return W(((r=(a=n.slots).default)===null||r===void 0?void 0:r.call(a))||((i=(o=n.slots).content)===null||i===void 0?void 0:i.call(o))||[]),function(){var H,J,Y,D,q,z,K,P,R,X,ee,re,ae=((H=e.logo)===null||H===void 0?void 0:H.call(e,l.h))||((J=(Y=n.slots).logo)===null||J===void 0?void 0:J.call(Y)),oe=((D=e.operations)===null||D===void 0?void 0:D.call(e,l.h))||((q=(z=n.slots).operations)===null||q===void 0?void 0:q.call(z))||((K=(P=n.slots).options)===null||K===void 0?void 0:K.call(P)),ce=((R=(X=n.slots).default)===null||R===void 0?void 0:R.call(X))||((ee=(re=n.slots).content)===null||ee===void 0?void 0:ee.call(re))||[];return l.createVNode("div",{class:O.value},[l.createVNode("div",{class:"".concat(s.value,"-head-menu__inner"),ref:U},[ae&&l.createVNode("div",{class:"".concat(s.value,"-menu__logo"),ref:F},[ae]),l.createVNode("ul",{class:"".concat(s.value,"-menu"),ref:$},[ce]),oe&&l.createVNode("div",{class:"".concat(s.value,"-menu__operations"),ref:j},[oe])]),N.value==="normal"&&M()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bie={content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,href:{type:String,default:""},icon:{type:Function},replace:Boolean,router:{type:Object},routerLink:Boolean,target:{type:String,default:"_self",validator:function(e){return e?["_blank","_self","_parent","_top"].includes(e):!0}},to:{type:[String,Object]},value:{type:[String,Number]},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function jie(t,e){var n;Je(e)&&(n=uie(e));for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(Re(t.$props[n])){var o;(o=t.$props)[n].apply(o,a)}else t.$emit.apply(t,[e].concat(a))}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function aE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function iE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ie(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Uie=l.defineComponent({name:"TMenuItem",props:iE({},Bie),emits:["click"],setup:function(e,n){var r=l.toRefs(e),a=r.href,i=r.target,o=ve(),s=l.inject("TdMenu"),c=l.ref();el(c);var u=l.inject("TdSubmenu",null),d=l.computed(function(){return s.activeValue.value===e.value}),f=l.computed(function(){var v;return(v=s.collapsed)===null||v===void 0?void 0:v.value}),h=l.computed(function(){return["".concat(o.value,"-menu__item"),V(V(V(V({},"".concat(o.value,"-is-active"),d.value),"".concat(o.value,"-is-disabled"),e.disabled),"".concat(o.value,"-menu__item--plain"),!n.slots.icon&&!e.icon),"".concat(o.value,"-submenu__item"),!!u&&!s.isHead)]});return l.onMounted(function(){var v;s==null||(v=s.vMenu)===null||v===void 0||v.add(iE({value:e.value,parent:u==null?void 0:u.value,vnode:n.slots.default},e))}),{classPrefix:o,menu:s,active:d,collapsed:f,classes:h,itemRef:c,href:a,target:i,submenu:u}},methods:{handleClick:function(e){var n,r;if(e.stopPropagation(),!this.disabled){if(this.menu.select(this.value),jie(this,"click",{e,value:this.value}),this.to||this.routerLink&&this.href){var a=this.router||this.$router,i=this.replace?"replace":"push";a[i](this.to||this.href).catch(function(o){if(o.name!=="NavigationDuplicated"&&!o.message.includes("Avoided redundant navigation to current location"))throw o})}(n=this.submenu)===null||n===void 0||(r=n.closeParentPopup)===null||r===void 0||r.call(n,e)}}},render:function(){var e,n=this,r=l.createVNode("li",{ref:"itemRef",class:this.classes,onClick:this.handleClick},[jn(this,"icon"),this.routerLink?l.createVNode("a",{href:this.href?this.href:this.to?(e=this.router||this.$router)===null||e===void 0?void 0:e.resolve(this.to).href:"",target:this.target,class:"".concat(this.classPrefix,"-menu__item-link"),onClick:function(s){return s.preventDefault()}},[l.createVNode("span",{class:"".concat(this.classPrefix,"-menu__content")},[Ja(this,"default","content")])]):this.href?l.createVNode("a",{href:this.href,target:this.target,class:"".concat(this.classPrefix,"-menu__item-link"),onClick:function(s){return n.disabled&&s.preventDefault()}},[l.createVNode("span",{class:"".concat(this.classPrefix,"-menu__content")},[Ja(this,"default","content")])]):l.createVNode("span",{class:"".concat(this.classPrefix,"-menu__content")},[Ja(this,"default","content")])]),a=l.getCurrentInstance(),i=a.parent;return this.collapsed&&/tmenu/i.test(i==null?void 0:i.type.name)?l.createVNode(Tr,{content:function(){return Ja(n,"default","content")},placement:"right"},$ie(r)?r:{default:function(){return[r]}}):r}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zie={title:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hie=l.defineComponent({name:"TMenuGroup",props:zie,setup:function(){var e=ve();return{classPrefix:e}},render:function(){var e=this.classPrefix;return l.createVNode("div",{class:"".concat(e,"-menu-group")},[l.createVNode("div",{class:"".concat(e,"-menu-group__title")},[jn(this,"title",{silent:!1})]),jn(this,"default")])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wie=Be(yie),Kie=Be(Fie),qie=Be(Mie),Gie=Be(Uie),Yie=Be(Hie);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Xie={align:{type:String,default:"left",validator:function(e){return e?["left","center","right"].includes(e):!0}},allowInputOverMax:Boolean,autoWidth:Boolean,autocomplete:{type:String,default:void 0},autofocus:Boolean,borderless:Boolean,clearable:Boolean,disabled:{type:Boolean,default:void 0},format:{type:Function},inputClass:{type:[String,Object,Array]},label:{type:[String,Function]},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},showClearIconOnEmpty:Boolean,showLimitNumber:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},spellCheck:Boolean,status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tips:{type:[String,Function]},type:{type:String,default:"text",validator:function(e){return e?["text","number","url","tel","password","search","submit","hidden"].includes(e):!0}},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onClear:Function,onClick:Function,onCompositionend:Function,onCompositionstart:Function,onEnter:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onValidate:Function,onWheel:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Pn(t){var e=l.getCurrentInstance(),n=l.computed(function(){return e.props.readonly}),r=l.inject("formReadonly",Object.create(null));return l.computed(function(){var a,i,o;return Nn(t==null||(a=t.beforeReadonly)===null||a===void 0?void 0:a.value)?t.beforeReadonly.value:Nn(n==null?void 0:n.value)?n.value:Nn(t==null||(i=t.afterReadonly)===null||i===void 0?void 0:i.value)?t.afterReadonly.value:Nn((o=r.readonly)===null||o===void 0?void 0:o.value)?r.readonly.value:!1})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var oE=function(){var e=ve();return l.computed(function(){var n="".concat(e.value,"-form"),r="".concat(e.value,"-input"),a="".concat(e.value,"-is");return{form:n,label:"".concat(n,"__label"),labelTop:"".concat(n,"__label--top"),inline:"".concat(n,"-inline"),formItem:"".concat(n,"__item"),formItemWithHelp:"".concat(n,"__item-with-help"),formItemWithExtra:"".concat(n,"__item-with-extra"),controls:"".concat(n,"__controls"),controlsContent:"".concat(n,"__controls-content"),status:"".concat(n,"__status"),extra:"".concat(r,"__extra"),help:"".concat(r,"__help"),success:"".concat(a,"-success"),successBorder:"".concat(n,"--success-border"),error:"".concat(a,"-error"),warning:"".concat(a,"-warning")}})},po=function(t){return t.TO_BE_VALIDATED="not",t.SUCCESS="success",t.FAIL="fail",t}(po||{}),lE=Symbol("FormProvide"),Cy=Symbol("FormItemProvide");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function sE(t){var e=function(s){var c=t.value,u=c.allowInputOverMax,d=c.maxlength,f=c.maxcharacter;if(!(d||f)||u||!s)return s;if(d)return pX(s,d);if(f){var h=jl(s,f);if(ot(h))return h.characters}},n=l.computed(function(){var o=t.value,s=o.maxlength,c=o.maxcharacter,u=o.value;if(Et(u))return String(u);if(s&&c&&st.warn("Input","Pick one of maxlength and maxcharacter please."),s){var d=u!=null&&u.length?vX(u):0;return"".concat(d,"/").concat(s)}return c?"".concat(jl(u||""),"/").concat(c):""}),r=l.computed(function(){if(n.value){var o=n.value.split("/"),s=$e(o,2),c=s[0],u=s[1];return Number(c)>Number(u)?"error":""}return""}),a=l.computed(function(){var o=t.value.status;return o||r.value}),i=function(){var s,c;(s=(c=t.value).onValidate)===null||s===void 0||s.call(c,{error:r.value?"exceed-maximum":void 0})};return l.watch(r,i),l.onMounted(function(){r.value&&i()}),{tStatus:a,limitNumber:n,getValueByLimitNumber:e}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Tv(t,e){return e==="number"?t||t===0?Number(t):void 0:t}function Jie(t,e){var n=l.toRefs(t),r=n.value,a=n.modelValue,i=l.ref(),o=l.ref(!1),s=l.ref(),c=l.ref(null),u=l.ref(),d=Vt(),f=Pn(),h=Mt(r,a,t.defaultValue,t.onChange),v=$e(h,2),p=v[0],g=v[1],m=l.ref(!1),y=l.ref(!1),b=l.ref(t.type),w=l.ref(null),x=l.computed(function(){return{value:[void 0,null].includes(p.value)?void 0:String(p.value),status:t.status,maxlength:Number(t.maxlength),maxcharacter:t.maxcharacter,allowInputOverMax:t.allowInputOverMax,onValidate:t.onValidate}}),C=sE(x),S=C.limitNumber,_=C.getValueByLimitNumber,O=C.tStatus,N=l.computed(function(){return(p.value&&!d.value&&t.clearable&&!f.value||t.showClearIconOnEmpty)&&m.value}),B=function(){var q;y.value=!0,(q=w.value)===null||q===void 0||q.focus()},T=function(){var q;y.value=!1,(q=w.value)===null||q===void 0||q.blur()},k=function(q){var z;m.value&&y.value||(i.value=p.value,!t.disabled&&(y.value=!0,(z=t.onFocus)===null||z===void 0||z.call(t,p.value,{e:q})))},E=function(q){var z,K=q.e,P=t.type==="number"?void 0:"";g(P,{e:K,trigger:"clear"}),(z=t.onClear)===null||z===void 0||z.call(t,{e:K})},I=function(q){u.value=q.target},A=function(){if(!d.value){var q=b.value==="password"?"text":"password";b.value=q}},M=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",z=w.value;if(z){var K=String(q);z.value&&z.value!==K&&(z.value=K)}},$=function(q){var z,K=q.target,P=K.value;t.type!=="number"&&typeof p.value=="string"&&P.length>((z=p.value)===null||z===void 0?void 0:z.length)&&(P=_(P)),g(Tv(P,t.type),{e:q,trigger:"input"}),l.nextTick(function(){t.type==="number"&&/\.(\d+)?0$/.test(P)?M(P):M(p.value)})},U=function(q){var z=q.inputType&&q.inputType==="insertCompositionText",K=q.currentTarget.value;if(z||o.value){s.value=K;return}$(q)},F=function(){var q,z=u.value;if(!z||!z.tagName||!((q=c.value)!==null&&q!==void 0&&q.$el)||!["path","svg"].includes(z.tagName))return!1;for(;z;){var K;if(((K=c.value)===null||K===void 0?void 0:K.$el)===z)return!0;z=z.parentNode}return!1},j=l.inject(Cy,void 0),W=function(q){if(F())B();else{var z;t.format&&(i.value=typeof p.value=="number"||t.type==="number"?p.value:t.format(p.value)),y.value=!1,(z=t.onBlur)===null||z===void 0||z.call(t,p.value,{e:q}),j==null||j.handleBlur()}},H=function(q){var z;o.value=!1,s.value="",$(q),(z=t.onCompositionend)===null||z===void 0||z.call(t,String(p.value),{e:q})},J=function(q){var z;o.value=!0;var K=q.currentTarget.value;s.value=K,(z=t.onCompositionstart)===null||z===void 0||z.call(t,String(p.value),{e:q})},Y=function(q){var z,K;(z=w.value)===null||z===void 0||z.focus(),(K=t.onClick)===null||K===void 0||K.call(t,{e:q})};return l.watch(function(){return t.autofocus},function(D){D===!0&&l.nextTick(function(){var q;(q=w.value)===null||q===void 0||q.focus()})},{immediate:!0}),l.watch(p,function(D,q){var z=t.type==="number";q===void 0&&t.format&&typeof D!="number"&&!z?i.value=t.format(D):i.value=D;var K=typeof D=="number"?D:_(D);K!==D&&!z&&g(K,{trigger:"initial"})},{immediate:!0}),l.watch(function(){return t.type},function(D){b.value=D},{immediate:!0}),e({inputRef:w,focus:B,blur:T}),{isHover:m,focused:y,renderType:b,showClear:N,inputRef:w,clearIconRef:c,inputValue:i,isComposition:o,compositionValue:s,limitNumber:S,tStatus:O,emitFocus:k,formatAndEmitBlur:W,onHandleCompositionend:H,onHandleCompositionstart:J,onRootClick:Y,emitPassword:A,handleInput:U,emitClear:E,onClearIconMousedown:I,innerValue:p}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Qie(t,e){var n=function(f){if(!t.disabled){var h=f.code,v=Tv(f.currentTarget.value,t.type);if(/enter/i.test(h)||/enter/i.test(f.key)){var p;(p=t.onEnter)===null||p===void 0||p.call(t,v,{e:f})}else{var g;(g=t.onKeydown)===null||g===void 0||g.call(t,v,{e:f})}}},r=function(f){var h;if(!t.disabled){var v=Tv(f.currentTarget.value,t.type);(h=t.onKeyup)===null||h===void 0||h.call(t,v,{e:f})}},a=function(f){var h;if(!t.disabled){var v=Tv(f.currentTarget.value,t.type);(h=t.onKeypress)===null||h===void 0||h.call(t,v,{e:f})}},i=function(f){var h;if(!t.disabled){var v=f.clipboardData||window.clipboardData;(h=t.onPaste)===null||h===void 0||h.call(t,{e:f,pasteValue:v==null?void 0:v.getData("text/plain")})}},o=function(f){return e.value=f},s=function(f){var h;return(h=t.onWheel)===null||h===void 0?void 0:h.call(t,{e:f})},c=function(f){var h;o(!0),(h=t.onMouseenter)===null||h===void 0||h.call(t,{e:f})},u=function(f){var h;o(!1),(h=t.onMouseleave)===null||h===void 0||h.call(t,{e:f})};return{isHover:e,handleKeydown:n,handleKeyUp:r,handleKeypress:a,onHandlePaste:i,onHandleMousewheel:s,onInputMouseenter:c,onInputMouseleave:u}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zie=100;function Vie(t,e,n){var r=l.toRefs(t),a=r.autoWidth,i=r.placeholder,o=l.ref(null),s=l.ref(null),c=function(){!o.value||!e.value||(e.value.style.width=getComputedStyle(o.value).width)};Sc(o,function(){a.value&&(s.value=setTimeout(function(){c(),clearTimeout(s.value)},Zie))}),l.onBeforeUnmount(function(){clearTimeout(s.value)});var u=function(){l.watch([n,i],function(){a.value&&l.nextTick(function(){c()})},{immediate:!0})};return l.onMounted(function(){a.value&&u()}),{inputPreRef:o}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var eoe=["isHover","tStatus","inputRef","renderType","showClear","focused","inputValue","isComposition","compositionValue","innerValue","limitNumber"];function cE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function uE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dE(t){var e={};return Object.keys(t).forEach(function(n){Bn(t[n])||(e[n]=t[n])}),e}var toe=l.defineComponent({name:"TInput",props:uE(uE({},Xie),{},{showInput:{type:Boolean,default:!0},keepWrapperWidth:{type:Boolean,default:!1}}),setup:function(e,n){var r=n.expose,a=Qe("input"),i=a.globalConfig,o=St({BrowseIcon:W0,BrowseOffIcon:wV,CloseCircleFilledIcon:gc}),s=o.BrowseIcon,c=o.BrowseOffIcon,u=o.CloseCircleFilledIcon,d=Pn(),f=Vt(),h=ve("input"),v=ve("input__wrap"),p=ve("input__tips"),g=Lt(),m=g.STATUS,y=g.SIZE,b=ve(),w=We(),x=Jie(e,r),C=x.isHover,S=x.tStatus,_=x.inputRef,O=x.renderType,N=x.showClear,B=x.focused,T=x.inputValue,k=x.isComposition,E=x.compositionValue,I=x.innerValue,A=x.limitNumber,M=Vo(x,eoe),$=Vie(e,_,I),U=$.inputPreRef,F=Qie(e,C),j=l.computed(function(){var Y;return(Y=e.placeholder)!==null&&Y!==void 0?Y:i.value.placeholder}),W=l.computed(function(){var Y;return dE({autofocus:e.autofocus,disabled:f.value,readonly:d.value,placeholder:j.value,name:e.name||void 0,type:O.value,autocomplete:(Y=e.autocomplete)!==null&&Y!==void 0?Y:i.value.autocomplete||void 0,unselectable:d.value?"on":void 0,spellcheck:e.spellCheck})}),H=l.computed(function(){return[v.value,V({},"".concat(h.value,"--auto-width"),e.autoWidth&&!e.keepWrapperWidth)]}),J=dE({onFocus:M.emitFocus,onBlur:M.formatAndEmitBlur,onKeydown:F.handleKeydown,onKeyup:F.handleKeyUp,onKeypress:F.handleKeypress,onPaste:F.onHandlePaste,onCompositionend:M.onHandleCompositionend,onCompositionstart:M.onHandleCompositionstart});return function(){var Y,D,q,z=w("prefixIcon"),K=w("suffixIcon"),P=w("passwordIcon"),R=w("label",{silent:!0}),X=w("suffix"),ee=A.value&&e.showLimitNumber?l.createVNode("div",{class:["".concat(b.value,"-input__limit-number"),V({},"".concat(b.value,"-is-disabled"),f.value)]},[A.value]):null,re=R?l.createVNode("div",{class:"".concat(h.value,"__prefix")},[R]):null,ae=X||ee?l.createVNode("div",{class:"".concat(h.value,"__suffix")},[X,ee]):null;if(e.type==="password"){var oe=[V({},"".concat(h.value,"__suffix-clear"),!f.value)];O.value==="password"?K=l.createVNode(c,{class:oe,onClick:M.emitPassword},null):O.value==="text"&&(K=l.createVNode(s,{class:oe,onClick:M.emitPassword},null))}N.value&&(e.type==="password"?P=l.createVNode(u,{ref:M.clearIconRef,class:"".concat(h.value,"__suffix-clear"),onClick:M.emitClear,onMousedown:M.onClearIconMousedown},null):K=l.createVNode(u,{ref:M.clearIconRef,class:"".concat(h.value,"__suffix-clear"),onClick:M.emitClear,onMousedown:M.onClearIconMousedown},null));var ce=[h.value,e.inputClass,V(V(V(V(V(V(V(V(V(V({},y.value[e.size],e.size!=="medium"),m.value.disabled,f.value),m.value.focused,f.value?!1:B.value),"".concat(b.value,"-is-").concat(S.value),S.value&&S.value!=="default"),"".concat(b.value,"-align-").concat(e.align),e.align!=="left"),"".concat(b.value,"-is-readonly"),d.value),"".concat(h.value,"--prefix"),z||re),"".concat(h.value,"--suffix"),K||ae),"".concat(h.value,"--borderless"),e.borderless),"".concat(h.value,"--focused"),B.value)],ge=w("tips"),pe=[p.value,"".concat(b.value,"-tips"),"".concat(b.value,"-is-").concat(S.value||"default")];return l.withDirectives(l.createVNode("div",{class:H.value},[l.createVNode("div",{class:ce,onClick:M.onRootClick,onMouseenter:F.onInputMouseenter,onMouseleave:F.onInputMouseleave,onWheel:F.onHandleMousewheel},[z?l.createVNode("span",{class:["".concat(h.value,"__prefix"),"".concat(h.value,"__prefix-icon")]},[z]):null,re,l.createVNode("input",l.mergeProps({class:["".concat(h.value,"__inner"),V({},"".concat(h.value,"--soft-hidden"),!e.showInput)]},W.value,J,{ref:_,value:k.value?(Y=E.value)!==null&&Y!==void 0?Y:"":(D=T.value)!==null&&D!==void 0?D:"",onInput:function(be){return M.handleInput(be)}}),null),e.autoWidth&&l.createVNode("span",{ref:U,class:"".concat(b.value,"-input__input-pre")},[k.value?(q=E.value)!==null&&q!==void 0?q:"":I.value||j.value]),ae,P?l.createVNode("span",{class:["".concat(h.value,"__suffix"),"".concat(h.value,"__suffix-icon"),"".concat(h.value,"__clear")]},[P]):null,K?l.createVNode("span",{class:["".concat(h.value,"__suffix"),"".concat(h.value,"__suffix-icon"),V({},"".concat(h.value,"__clear"),N.value)]},[K]):null]),ge&&l.createVNode("div",{class:pe},[ge])]),[[l.vShow,e.type!=="hidden"]])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var noe={separate:Boolean};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var roe=l.defineComponent({name:"TInputGroup",props:noe,setup:function(e){var n=ve("input-group"),r=We(),a=l.computed(function(){return[n.value,V({},"".concat(n.value,"--separate"),e.separate)]});return function(){return l.createVNode("div",{class:a.value},[r("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Va=Be(toe),aoe=Be(roe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ioe={align:{type:String,validator:function(e){return e?["left","center","right"].includes(e):!0}},allowInputOverLimit:{type:Boolean,default:!0},autoWidth:Boolean,decimalPlaces:{type:[Number,Object],default:void 0},disabled:{type:Boolean,default:void 0},format:{type:Function},inputProps:{type:Object},label:{type:[String,Function]},largeNumber:Boolean,max:{type:[String,Number],default:1/0},min:{type:[String,Number],default:-1/0},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},step:{type:[String,Number],default:1},suffix:{type:[String,Function]},theme:{type:String,default:"row",validator:function(e){return e?["column","row","normal"].includes(e):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onEnter:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function go(t){return new Array(t).fill(0).join("")}function fE(t){if(!t)return!0;if(Et(t))return!Number.isNaN(t);var e=/^[0-9|e|E|-]+\.*[0-9|e|E|-]*$/.test(t);if(!e)return!1;for(var n=0,r=0,a=0,i=0,o=t.length;i<o;i++)if(t[i]==="."&&(a+=1,a>1)||/(e|E)+/.test(t[i])&&(n+=1,n>1)||t[i]==="-"&&(r+=1,r>2))return!1;return!0}function ca(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return t.indexOf(".")!==-1?(st.error("InputNumber","num is not a integer number."),t):!t||t==="0"&&e?"":t==="0"?t:(e?t.replace(/0+$/,""):t.replace(/^0+/,""))||"0"}function _y(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=ca(t,n),a=ca(e,n),i=r.length>a.length,o=i?r:a,s=i?a:r,c=[],u=[],d=n?0:o.length-s.length,f=n?s.length:o.length,h=f-1;h>=0;h--){var v=h-d,p=Number(o[h])+(Number(s[v])||0)+(u[h]||0);p>=10&&(u[h-1]=1),c.unshift(String(p%10))}return u[-1]&&c.unshift("1"),n?c.concat(o.slice(f,o.length)).join(""):c.join("")}function kc(t,e){var n=t.split("."),r=$e(n,2),a=r[0],i=a===void 0?"0":a,o=r[1],s=o===void 0?"0":o,c=e.split("."),u=$e(c,2),d=u[0],f=d===void 0?"0":d,h=u[1],v=h===void 0?"0":h,p=_y(i,f);if(s==="0"&&v==="0")return p;var g=ca(s,!0),m=ca(v,!0),y=_y(g,m,!0),b=y.length;return b>g.length&&b>m.length?[ca(_y(p,"1")),ca(y.slice(1),!0)].filter(function(w){return w}).join("."):[ca(p),ca(y,!0)].filter(function(w){return w}).join(".")}function hE(t,e){var n=ca(t),r=ca(e);if(n.length===r.length){for(var a=0,i=n.length;a<i;a++){if(n[a]>r[a])return 1;if(n[a]<r[a])return-1}return 0}return n.length>r.length?1:-1}function vE(t,e){for(var n=t&&t!=="0"?t.replace(/0+$/,""):"0",r=e&&e!=="0"?e.replace(/0+$/,""):"0",a=Math.max(n.length,r.length),i=0,o=a;i<o;i++){if((n[i]||0)>(r[i]||0))return 1;if((n[i]||0)<(r[i]||0))return-1}return 0}function Sy(t){var e=t.split("e"),n=$e(e,2),r=n[0],a=n[1];if(!a)return t;var i=t.split("."),o=$e(i,2),s=o[0],c=o[1],u=c===void 0?"":c,d=Number(a),f=u.split("e"),h=$e(f,1),v=h[0];if(d>v.length){var p=go(d-v.length);return r.replace(/(^0+|\.)/g,"")+p}var g=s.replace(/^0+/,"")+v.slice(0,d),m=v.slice(d);return m?[g,m].join("."):g}function ooe(t,e){var n=Sy(t).split("."),r=$e(n,2),a=r[0],i=r[1],o=Sy(e).split("."),s=$e(o,2),c=s[0],u=s[1],d=hE(a.replace("-",""),c.replace("-","")),f=a.includes("-"),h=c.includes("-");return f&&!h?-1:!f&&h?1:f&&h?d===0?0:d>0?-1:1:d===0?vE(i,u):d}function pE(t){return[-1/0,1/0].includes(Number(t))}function gE(t){return Number(t)<Number.MAX_SAFE_INTEGER&&Number(t)>Number.MIN_SAFE_INTEGER}function Gl(t,e,n){var r=gE(t)&&gE(e)&&!n,a=pE(t)||pE(e);return r||a?Number(t)===Number(e)?0:Number(t)>Number(e)?1:-1:ooe(String(t),String(e))}function Ld(t,e,n){if(t===e)return"0";for(var r=n||{},a=r.decimal,i=r.stayZero,o=ca(t),s=ca(e),c=hE(o,s)>0,u=c?o:s,d=c?s:o,f=[],h=[],v=a?0:u.length-d.length,p=a?d.length:u.length,g=p-1;g>=0;g--){var m=g-v,y=Number(u[g])-(Number(d[m])||0)-(h[g]||0);y<0&&(h[g-1]=1,y+=10),f.unshift(String(y))}if(a)return f.concat(u.slice(p,u.length)).join("");var b=f.join("");return i||(b=b.replace(/^0+/,"")),ca(c?b:"-".concat(b))}function kv(t,e){if(t===e)return"0";var n=Gl(t,e,!0)>0,r=n?t:e,a=n?e:t,i=r.split("."),o=$e(i,2),s=o[0],c=o[1],u=c===void 0?"0":c,d=a.split("."),f=$e(d,2),h=f[0],v=f[1],p=v===void 0?"0":v,g=Ld(s,h);if(u==="0"&&p==="0")return n?g:"-".concat(g);var m="",y=u;u.length<p.length&&(y="".concat(u).concat(go(p.length-u.length))),vE(y,p)>=0?m=Ld(y,p,{decimal:!0}):(u.length<p.length||u==="0"?(m=Ld("1".concat(y),p,{stayZero:!0}),m=go(p.length-m.length)+m):m=Ld(u,p,{decimal:!0}),g=Ld(g,"1"));var b=m?[g,m].join("."):g;return n?b:"-".concat(b)}function loe(t,e){var n=t[0]==="-",r=e[0]==="-";if(n&&!r){var a=kc(t.slice(1),e);return"-".concat(a)}return n&&r?kv(e.slice(1),t.slice(1)):!n&&r?kc(t,e.slice(1)):kv(t,e)}function soe(t,e){var n=t[0]==="-",r=e[0]==="-";if(n&&!r)return kv(e,t.slice(1));if(n&&r){var a=kc(e.slice(1),t.slice(1));return"-".concat(a)}return!n&&r?kv(t,e.slice(1)):kc(t,e)}function mE(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(n)return t.toFixed(e);var r=t.toString().split("."),a=$e(r,2),i=a[0],o=a[1];if(e===0)return i;if(o){var s=o.slice(0,e);return o.length<e&&(s+=go(e-o.length)),[i,s].join(".")}return[i,go(e)].join(".")}function coe(t,e){if(ot(e)){var n;return mE(t,e.places,(n=e.enableRound)!==null&&n!==void 0?n:!0)}return mE(t,e,!0)}function Ov(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(Number.isNaN(Number(t)))return"";if(!r)return coe(Number(t),n);var a=ot(n)?n.places:n,i=ot(n)&&(e=n.enableRound)!==null&&e!==void 0?e:!0;if(!Je(t))return String(t);var o=t.split("."),s=$e(o,2),c=s[0],u=s[1];if(!u)return a>0&&i?[t,go(a)].join("."):t;if(a===0)return i&&Number(u[0])>=5?kc(c,"1"):c;var d=u.slice(0,a);if(u.length<a)d+=go(a-u.length);else if(i){var f,h=(f=d.match(/^0+/))===null||f===void 0?void 0:f[0].length,v=d.match(/^9+/),p=Number(u[a])>=5;d=p?kc(d,"1"):d,h&&p&&h+d.length>=a&&(d="".concat(go(a-d.length)).concat(d)),v&&d.length>a&&(c=(Number(c)+1).toString(),d=go(a))}return[c,d].join(".")}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function uoe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t&&t!==0?!0:n&&Je(t)?Gl(t,e,n)<0:t<e}function doe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t&&t!==0?!0:n&&Je(t)?Gl(t,e,n)>0:t>e}function foe(t,e){if(t!==""){var n=e.max,r=e.min,a=e.lastValue,i=e.largeNumber;return fE(t)?i&&(Je(n)||n===1/0)&&(Je(r)||r===-1/0)?Gl(n,t,i)<0?n:Gl(r,t,i)>0?r:t:Math.max(Number(r),Math.min(Number(n),Number(t))):a}}function Fd(t,e){var n,r;if(!t||!e)return(t||0)+(e||0);var a=((n=t.toString().split(".")[1])===null||n===void 0?void 0:n.length)||0,i=((r=e.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0;if(!a&&!i)return t+e;var o=t,s=e,c=Math.abs(a-i),u=Math.pow(10,Math.max(a,i));if(c>0){var d=Math.pow(10,c);a>i?(o=Number(t.toString().replace(".","")),s=Number(e.toString().replace(".",""))*d):(o=Number(t.toString().replace(".",""))*d,s=Number(e.toString().replace(".","")))}else o=Number(t.toString().replace(".","")),s=Number(e.toString().replace(".",""));return(o+s)/u}function Bd(t,e){var n,r;if(!t||!e)return(t||0)-(e||0);var a=((n=t.toString().split(".")[1])===null||n===void 0?void 0:n.length)||0,i=((r=e.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,o=Math.pow(10,Math.max(a,i)),s=a>=i?a:i;return Number(((t*o-e*o)/o).toFixed(s))}function hoe(t,e){return t<0&&e>0?Bd(e,Math.abs(t)):t<0&&e<0?Fd(Math.abs(t),Math.abs(e))*-1:t>0&&e<0?Bd(t,Math.abs(e)):Fd(t,e)}function voe(t,e){return t<0&&e>0?Fd(Math.abs(t),e)*-1:t<0&&e<0?Bd(Math.abs(e),Math.abs(t)):t>0&&e<0?Fd(t,Math.abs(e)):Bd(t,e)}function poe(t){var e=t.op,n=t.step,r=t.lastValue,a=t.max,i=t.min,o=t.largeNumber;if(Number(n)<=0)return st.error("InputNumber","step must be larger than 0."),r;var s=Et(n)?String(n):n,c;return e==="add"?o&&Je(r)?c=soe(String(r),String(s)):c=hoe(Number(r||0),Number(n)):e==="reduce"&&(o&&Je(r)?c=loe(String(r),String(s)):c=voe(Number(r||0),Number(n))),Bn(r)&&(c=foe(c,{max:a,min:i,lastValue:r,largeNumber:o})),o?c:Number(c)}function Ty(t){var e=t.largeNumber,n=t.value,r=t.max,a=t.min;if(!(Bn(n)||Bn(e))){e&&Et(n)&&st.warn("InputNumber","largeNumber value must be a string.");var i;return Gl(n,r,e)>0?i="exceed-maximum":Gl(n,a,e)<0?i="below-minimum":i=void 0,i}}var goe=["-",".","e","E","+"];function moe(t,e){var n,r;if(["",null,void 0].includes(t))return!0;if(t.slice(0,2)==="00"||t.match(/\s/g)||((n=t.match(/\./g))===null||n===void 0?void 0:n.length)>1||((r=t.match(/e/g))===null||r===void 0?void 0:r.length)>1)return!1;var a=t.slice(1);if(/(\+|-)/.test(a)&&!/e+/i.test(a))return!1;var i=e&&fE(t)||!Number.isNaN(Number(t));return!(!i&&!goe.includes(t.slice(-1))||/e/i.test(t)&&!/\de/i.test(t))}function yoe(t,e){return parseFloat(t)!==e&&!Number.isNaN(Number(t))}function Ev(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(["",null,void 0].includes(t)||!/\d+/.test(t))){var n=e.decimalPlaces,r=e.largeNumber,a=e.isToFixed,i=t.replace(/[.|+|\-|e]$/,"");return r&&(i=Sy(i)),n!==void 0&&(i=Ov(i,n,r)),r||a?i:parseFloat(i)}}function boe(t){var e=/^[-+]?\d{1,3}(,\d{3})*(\.(\d*))?$/;return e.test(t)?t.replace(/,/g,""):t}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function woe(t){var e=wv(),n=e.classPrefix,r=e.sizeClassNames,a=e.statusClassNames,i=l.toRefs(t),o=i.value,s=i.modelValue,c=i.max,u=i.min,d=Mt(o,s,t.defaultValue,t.onChange),f=$e(d,2),h=f[0],v=f[1],p=l.ref(),g=l.ref(""),m=Vt(),y=Pn(),b=l.ref(),w=l.computed(function(){return m.value||!doe(h.value,t.min,t.largeNumber)}),x=l.computed(function(){return m.value||!uoe(h.value,t.max,t.largeNumber)}),C=l.computed(function(){return["".concat(n.value,"-input-number"),r[t.size],V(V(V(V({},a.disabled,m.value),"".concat(n.value,"-is-controls-right"),t.theme==="column"),"".concat(n.value,"-input-number--").concat(t.theme),t.theme),"".concat(n.value,"-input-number--auto-width"),t.autoWidth)]}),S=l.computed(function(){return["".concat(n.value,"-input-number__decrease"),V({},a.disabled,w.value)]}),_=l.computed(function(){return["".concat(n.value,"-input-number__increase"),V({},a.disabled,x.value)]}),O=function(J){var Y;if(!J&&J!==0)return"";var D=J||J===0?String(J):"";if(!((Y=p.value)!==null&&Y!==void 0&&(Y=Y.inputRef)!==null&&Y!==void 0&&Y.contains(document.activeElement))){var q=Ev(D,{decimalPlaces:t.decimalPlaces,largeNumber:t.largeNumber,isToFixed:!0});D=q||q===0?String(q):"",t.format&&(D=String(t.format(J,{fixedNumber:D})))}return D};l.watch(h,function(H){var J=t.largeNumber,Y=t.decimalPlaces,D=[void 0,null].includes(H)?"":String(H);if(!J&&!Number.isNaN(g.value)){parseFloat(g.value)!==H&&(g.value=O(D));var q=Number(Ov(D,Y,J));Y!==void 0&&![void 0,null].includes(H)&&Number(q)!==Number(h.value)&&v(q,{type:"props",e:void 0})}if(J&&(g.value=O(D),Y!==void 0&&Ov(D,Y,J)!==H)){var z,K=D;(z=p.value)!==null&&z!==void 0&&(z=z.inputRef)!==null&&z!==void 0&&z.contains(document.activeElement)||(K=Ev(K,{decimalPlaces:t.decimalPlaces,largeNumber:t.largeNumber,isToFixed:!0})),v(K,{type:"props",e:void 0})}},{immediate:!0}),l.watch([h,c,u],function(){var H;if(![void 0,"",null].includes(h.value)){var J=t.max,Y=t.min,D=t.largeNumber,q=Ty({value:h.value,largeNumber:D,max:J,min:Y});b.value=q,(H=t.onValidate)===null||H===void 0||H.call(t,{error:q})}},{immediate:!0});var N=function(J){var Y=poe({op:J,step:t.step,max:t.max,min:t.min,lastValue:h.value,largeNumber:t.largeNumber}),D=t.largeNumber,q=t.max,z=t.min,K=Ty({value:Y,largeNumber:D,max:q,min:z});return{overLimit:K,newValue:Y}},B=function(J){if(!(w.value||y.value)){var Y=N("reduce");Y.overLimit&&!t.allowInputOverLimit||v(Y.newValue,{type:"reduce",e:J})}},T=function(J){if(!(x.value||y.value)){var Y=N("add");Y.overLimit&&!t.allowInputOverLimit||v(Y.newValue,{type:"add",e:J})}},k=function(J,Y){var D=Y.e,q=boe(J);if(moe(q,t.largeNumber)){if(g.value=q,t.largeNumber){v(q,{type:"input",e:D});return}if(yoe(String(q),Number(h.value))){var z=q===""?void 0:Number(q);v(z,{type:"input",e:D})}}},E=function(J,Y){var D,q=t.largeNumber,z=t.max,K=t.min,P=t.decimalPlaces;if(!t.allowInputOverLimit&&h.value!==void 0){var R=Ty({value:h.value,largeNumber:q,max:z,min:K});if(R==="below-minimum"){var X;v(K,{type:"blur",e:Y.e}),(X=t.onBlur)===null||X===void 0||X.call(t,K,Y);return}if(R==="exceed-maximum"){var ee;v(z,{type:"blur",e:Y.e}),(ee=t.onBlur)===null||ee===void 0||ee.call(t,z,Y);return}}var re=Ev(J,{decimalPlaces:P,largeNumber:q});g.value=O(re),re!==h.value&&v(re,{type:"blur",e:Y.e}),(D=t.onBlur)===null||D===void 0||D.call(t,re,Y)},I=function(J,Y){var D;g.value=h.value||h.value===0?String(h.value):"",(D=t.onFocus)===null||D===void 0||D.call(t,J,Y)},A=function(J,Y){var D;if(!m.value){var q=Y.e,z={ArrowUp:T,ArrowDown:B},K=q.code||q.key;z[K]!==void 0&&z[K](q),(D=t.onKeydown)===null||D===void 0||D.call(t,J,Y)}},M=function(J,Y){var D;(D=t.onKeyup)===null||D===void 0||D.call(t,J,Y)},$=function(J,Y){var D;(D=t.onKeypress)===null||D===void 0||D.call(t,J,Y)},U=function(J,Y){var D;g.value=O(J);var q=Ev(J,{decimalPlaces:t.decimalPlaces,largeNumber:t.largeNumber});q!==J&&String(q)!==J&&v(q,{type:"enter",e:Y.e}),(D=t.onEnter)===null||D===void 0||D.call(t,q,Y)},F=function(){m.value||y.value||p.value.focus()},j=function(){p.value.blur()},W={onBlur:E,onFocus:I,onKeydown:A,onKeyup:M,onKeypress:$,onEnter:U,onClick:F};return{classPrefix:n,wrapClasses:C,reduceClasses:S,addClasses:_,tDisabled:m,isError:b,listeners:W,userInput:g,tValue:h,inputRef:p,focus:F,blur:j,handleReduce:B,handleAdd:T,onInnerInputChange:k,isReadonly:y}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function yE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function xoe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Coe=l.defineComponent({name:"TInputNumber",props:ioe,setup:function(e,n){var r=We(),a=St({AddIcon:uv,RemoveIcon:See,ChevronDownIcon:dv,ChevronUpIcon:L2}),i=a.AddIcon,o=a.RemoveIcon,s=a.ChevronDownIcon,c=a.ChevronUpIcon,u=woe(e),d=u.inputRef;return n.expose(xoe({},u)),function(){var f=e.theme==="column"?l.createVNode(s,{size:e.size},null):l.createVNode(o,{size:e.size},null),h=e.theme==="column"?l.createVNode(c,{size:e.size},null):l.createVNode(i,{size:e.size},null),v=u.isError.value?"error":e.status,p=u.classPrefix.value,g=r("tips");return l.createVNode("div",{class:u.wrapClasses.value},[e.theme!=="normal"&&l.createVNode(zt,{class:u.reduceClasses.value,disabled:u.tDisabled.value,onClick:u.handleReduce,variant:"outline",shape:"square",icon:function(){return f}},null),l.createVNode(Va,l.mergeProps({ref:d,disabled:u.tDisabled.value,readonly:u.isReadonly.value,autocomplete:"off",placeholder:e.placeholder,unselectable:u.isReadonly.value?"on":"off",autoWidth:e.autoWidth,align:e.align||(e.theme==="row"?"center":void 0),status:v,label:e.label,suffix:e.suffix},u.listeners,e.inputProps,{value:u.userInput.value,onChange:u.onInnerInputChange}),n.slots),e.theme!=="normal"&&l.createVNode(zt,{class:u.addClasses.value,disabled:u.tDisabled.value,onClick:u.handleAdd,variant:"outline",shape:"square",icon:function(){return h}},null),g&&l.createVNode("div",{class:"".concat(p,"-input__tips ").concat(p,"-tips ").concat(p,"-is-").concat(v)},[g])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jd=Be(Coe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var _oe=l0,Soe=lc,Toe=gd,bE=ot,koe=sc;function Ooe(t,e,n,r){if(!bE(t))return t;e=Soe(e,t);for(var a=-1,i=e.length,o=i-1,s=t;s!=null&&++a<i;){var c=koe(e[a]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(a!=o){var d=s[c];u=r?r(d,c,s):void 0,u===void 0&&(u=bE(d)?d:Toe(e[a+1])?[]:{})}_oe(s,c,u),s=s[c]}return t}var wE=Ooe;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Eoe=Qh,Poe=wE,Ioe=lc;function Aoe(t,e,n){for(var r=-1,a=e.length,i={};++r<a;){var o=e[r],s=Eoe(t,o);n(s,o)&&Poe(i,Ioe(o,t),s)}return i}var xE=Aoe,Noe=xE,Doe=Z_;function Roe(t,e){return Noe(t,e,function(n,r){return Doe(t,r)})}var Moe=Roe,Loe=Moe,Foe=_O,Boe=Foe(function(t,e){return t==null?{}:Loe(t,e)}),Ai=Boe;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function joe(t,e,n,r){for(var a=t.length,i=n+(r?1:-1);r?i--:++i<a;)if(e(t[i],i,t))return i;return-1}var $oe=joe;function Uoe(t){return t!==t}var zoe=Uoe;function Hoe(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}var Woe=Hoe,Koe=$oe,qoe=zoe,Goe=Woe;function Yoe(t,e,n){return e===e?Goe(t,e,n):Koe(t,qoe,n)}var Xoe=Yoe,Joe=Xoe;function Qoe(t,e){var n=t==null?0:t.length;return!!n&&Joe(t,e,0)>-1}var ky=Qoe;function Zoe(t,e,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}var Oy=Zoe;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Voe=Yh,ele=ky,tle=Oy,nle=oc,rle=tc,CE=Xh,ale=Math.min;function ile(t,e,n){for(var r=n?tle:ele,a=t[0].length,i=t.length,o=i,s=Array(i),c=1/0,u=[];o--;){var d=t[o];o&&e&&(d=nle(d,rle(e))),c=ale(d.length,c),s[o]=!n&&(e||a>=120&&d.length>=120)?new Voe(o&&d):void 0}d=t[0];var f=-1,h=s[0];e:for(;++f<a&&u.length<c;){var v=d[f],p=e?e(v):v;if(v=n||v!==0?v:0,!(h?CE(h,p):r(u,p,n))){for(o=i;--o;){var g=s[o];if(!(g?CE(g,p):r(t[o],p,n)))continue e}h&&h.push(p),u.push(v)}}return u}var ole=ile,lle=Uh;function sle(t){return lle(t)?t:[]}var cle=sle,ule=oc,dle=ole,fle=zh,hle=cle,vle=fle(function(t){var e=ule(t,hle);return e.length&&e[0]===t[0]?dle(e):[]}),Yl=vle;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ple={allowInput:Boolean,autoWidth:Boolean,autofocus:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},disabled:{type:Boolean,default:void 0},inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},label:{type:[String,Function]},loading:Boolean,minCollapsedNum:{type:Number,default:0},multiple:Boolean,panel:{type:[String,Function]},placeholder:{type:String,default:""},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:Boolean,prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},reserveKeyword:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tag:{type:[String,Function]},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Boolean,Object,Array,Date],default:void 0},valueDisplay:{type:[String,Function]},onBlur:Function,onClear:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onPopupVisibleChange:Function,onTagChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var gle=["tips"];function _E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_E(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mle=["status","clearable","disabled","label","placeholder","readonly","prefixIcon","suffix","suffixIcon","onPaste","onMouseenter","onMouseleave","size","autofocus"],yle={label:"label",value:"value",children:"children"};function ble(t,e){var n=kr(kr({},yle),e);return ot(t)?t[n.label]:t}function wle(t,e,n){var r,a=l.toRefs(t),i=a.value,o=a.keys,s=a.inputValue,c=ve(),u=l.ref(t.autofocus),d=l.ref(),f=gn(s,(r=t.defaultInputValue)!==null&&r!==void 0?r:"",t.onInputChange,"inputValue"),h=$e(f,2),v=h[0],p=h[1],g=We(),m=Vt(),y=Pn(),b=l.computed(function(){return kr(kr({},Ai(t,mle)),{},{disabled:m.value,readonly:y.value})}),w=function(B){var T,k;B==null||(T=B.e)===null||T===void 0||T.stopPropagation(),(k=t.onClear)===null||k===void 0||k.call(t,B),p("",{trigger:"clear"})},x=function(B,T){t.allowInput&&p(B,kr(kr({},T),{},{trigger:T.trigger||"input"}))},C=function(B){var T,k=g("valueDisplay"),E=B&&t.allowInput?v.value:ble(i.value,o.value),I=S(k,B),A=kr(kr({},b.value),{},{value:_(k,E,B),label:I.length?function(){return I}:void 0,autoWidth:t.autoWidth,readonly:!t.allowInput||y.value,placeholder:O(k),suffixIcon:!m.value&&t.loading?function(){return l.createVNode(lr,{loading:!0,size:"small"},null)}:t.suffixIcon,showClearIconOnEmpty:!!(t.clearable&&(v.value||E)&&!m.value&&!y.value)},t.inputProps),M=e.slots;M.tips;var $=Vo(M,gle),U=B?["".concat(c.value,"-input--focused"),"".concat(c.value,"-is-focused"),A==null?void 0:A.inputClass]:A==null?void 0:A.inputClass,F=function(J,Y){var D;(D=t.onEnter)===null||D===void 0||D.call(t,i.value,kr(kr({},Y),{},{inputValue:J}))},j=function(J,Y){var D,q,z=(D=n.value)===null||D===void 0?void 0:D.getOverlayState();u.value||z!=null&&z.hover||(u.value=!0,(q=t.onFocus)===null||q===void 0||q.call(t,i.value,kr(kr({},Y),{},{inputValue:J})))},W=function(J,Y){var D,q,z=(D=n.value)===null||D===void 0?void 0:D.getOverlayState();u.value=!1,!(z!=null&&z.hover)&&((q=t.onBlur)===null||q===void 0||q.call(t,i.value,kr(kr({},Y),{},{inputValue:J})))};return l.createVNode(Va,l.mergeProps({ref:d,style:(T=e.attrs)===null||T===void 0?void 0:T.style},kr({onChange:x,onClear:w,onEnter:F,onFocus:j,onBlur:W},A),{inputClass:U}),$)},S=function(B,T){var k=g("label");if(!k&&!B)return[];if(B){var E,I;if((E=t.valueDisplayOptions)!==null&&E!==void 0&&E.usePlaceholder&&!i.value||(I=t.valueDisplayOptions)!==null&&I!==void 0&&I.useInputDisplay&&T)return[k]}return[k,B]},_=function(B,T,k){if(B){var E,I;if(!((E=t.valueDisplayOptions)!==null&&E!==void 0&&E.useInputDisplay)||(I=t.valueDisplayOptions)!==null&&I!==void 0&&I.useInputDisplay&&!k)return}return T},O=function(B){if(B){var T,k;if(!((T=t.valueDisplayOptions)!==null&&T!==void 0&&T.usePlaceholder)||(k=t.valueDisplayOptions)!==null&&k!==void 0&&k.usePlaceholder&&i.value)return""}return t.placeholder};return{inputRef:d,isSingleFocus:u,commonInputProps:b,singleInputValue:v,onInnerClear:w,renderSelectSingle:C}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var xle={autoWidth:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},disabled:{type:Boolean,default:void 0},dragSort:Boolean,excessTagsDisplayType:{type:String,default:"break-line",validator:function(e){return e?["scroll","break-line"].includes(e):!0}},inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number],default:""},label:{type:[String,Function]},max:{type:Number},minCollapsedNum:{type:Number,default:0},placeholder:{type:String,default:void 0},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tag:{type:[String,Function]},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},valueDisplay:{type:[String,Function]},onBlur:Function,onChange:Function,onClear:Function,onClick:Function,onDragSort:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onRemove:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Cle(t){var e=l.ref(),n=l.toRefs(t),r=n.excessTagsDisplayType,a=n.readonly,i=n.disabled,o=l.ref(0),s=l.ref(),c=l.ref(),u=l.ref(!1),d=function(C){var S=C.children[0];s.value=S},f=function(){o.value=s.value.scrollWidth-s.value.clientWidth},h=function(C){var S;Re((S=s.value)===null||S===void 0?void 0:S.scroll)&&s.value.scroll({left:C,behavior:"smooth"})},v=function(){f(),h(o.value),setTimeout(function(){u.value=!0},200)},p=function(){h(0)},g=function(C){var S=C.e;if(!(a.value||i.value)&&s.value)if(S.deltaX>0){var _=Math.min(s.value.scrollLeft+120,o.value);h(_)}else{var O=Math.max(s.value.scrollLeft-120,0);h(O)}},m=function(){r.value==="scroll"&&(c.value=setTimeout(function(){v(),clearTimeout(c.value)},100))},y=function(){r.value==="scroll"&&(u.value=!1,h(0),clearTimeout(c.value))},b=function(){var C,S=(C=e.value)===null||C===void 0?void 0:C.$el;S&&d(S)},w=function(){clearTimeout(c.value)};return l.onMounted(b),l.onUnmounted(w),{tagInputRef:e,scrollElement:s,scrollDistance:o,scrollTo:h,scrollToRight:v,scrollToLeft:p,updateScrollElement:d,updateScrollDistance:f,onWheel:g,scrollToRightOnEnter:m,scrollToLeftOnLeave:y,isScrollable:u}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}var _le=/^\s+/,Sle=/\s+$/;function Xe(t,e){if(t=t||"",e=e||{},t instanceof Xe)return t;if(!(this instanceof Xe))return new Xe(t,e);var n=Tle(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Xe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,a,i,o,s;return n=e.r/255,r=e.g/255,a=e.b/255,n<=.03928?i=n/12.92:i=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*o+.0722*s},setAlpha:function(e){return this._a=PE(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=TE(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=TE(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),a=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+a+"%)":"hsva("+n+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=SE(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=SE(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),a=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+a+"%)":"hsla("+n+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return kE(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Ple(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mn(this._r,255)*100)+"%",g:Math.round(mn(this._g,255)*100)+"%",b:Math.round(mn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mn(this._r,255)*100)+"%, "+Math.round(mn(this._g,255)*100)+"%, "+Math.round(mn(this._b,255)*100)+"%)":"rgba("+Math.round(mn(this._r,255)*100)+"%, "+Math.round(mn(this._g,255)*100)+"%, "+Math.round(mn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ule[kE(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+OE(this._r,this._g,this._b,this._a),r=n,a=this._gradientType?"GradientType = 1, ":"";if(e){var i=Xe(e);r="#"+OE(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,a=this._a<1&&this._a>=0,i=!n&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Xe(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Dle,arguments)},brighten:function(){return this._applyModification(Rle,arguments)},darken:function(){return this._applyModification(Mle,arguments)},desaturate:function(){return this._applyModification(Ile,arguments)},saturate:function(){return this._applyModification(Ale,arguments)},greyscale:function(){return this._applyModification(Nle,arguments)},spin:function(){return this._applyModification(Lle,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(jle,arguments)},complement:function(){return this._applyCombination(Fle,arguments)},monochromatic:function(){return this._applyCombination($le,arguments)},splitcomplement:function(){return this._applyCombination(Ble,arguments)},triad:function(){return this._applyCombination(EE,[3])},tetrad:function(){return this._applyCombination(EE,[4])}},Xe.fromRatio=function(t,e){if(Pv(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=$d(t[r]));t=n}return Xe(t,e)};function Tle(t){var e={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;return typeof t=="string"&&(t=Kle(t)),Pv(t)=="object"&&(mo(t.r)&&mo(t.g)&&mo(t.b)?(e=kle(t.r,t.g,t.b),o=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):mo(t.h)&&mo(t.s)&&mo(t.v)?(r=$d(t.s),a=$d(t.v),e=Ele(t.h,r,a),o=!0,s="hsv"):mo(t.h)&&mo(t.s)&&mo(t.l)&&(r=$d(t.s),i=$d(t.l),e=Ole(t.h,r,i),o=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=PE(n),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function kle(t,e,n){return{r:mn(t,255)*255,g:mn(e,255)*255,b:mn(n,255)*255}}function SE(t,e,n){t=mn(t,255),e=mn(e,255),n=mn(n,255);var r=Math.max(t,e,n),a=Math.min(t,e,n),i,o,s=(r+a)/2;if(r==a)i=o=0;else{var c=r-a;switch(o=s>.5?c/(2-r-a):c/(r+a),r){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4;break}i/=6}return{h:i,s:o,l:s}}function Ole(t,e,n){var r,a,i;t=mn(t,360),e=mn(e,100),n=mn(n,100);function o(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(e===0)r=a=i=n;else{var s=n<.5?n*(1+e):n+e-n*e,c=2*n-s;r=o(c,s,t+1/3),a=o(c,s,t),i=o(c,s,t-1/3)}return{r:r*255,g:a*255,b:i*255}}function TE(t,e,n){t=mn(t,255),e=mn(e,255),n=mn(n,255);var r=Math.max(t,e,n),a=Math.min(t,e,n),i,o,s=r,c=r-a;if(o=r===0?0:c/r,r==a)i=0;else{switch(r){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4;break}i/=6}return{h:i,s:o,v:s}}function Ele(t,e,n){t=mn(t,360)*6,e=mn(e,100),n=mn(n,100);var r=Math.floor(t),a=t-r,i=n*(1-e),o=n*(1-a*e),s=n*(1-(1-a)*e),c=r%6,u=[n,o,i,i,s,n][c],d=[s,n,n,o,i,i][c],f=[i,i,s,n,n,o][c];return{r:u*255,g:d*255,b:f*255}}function kE(t,e,n,r){var a=[ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Ple(t,e,n,r,a){var i=[ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16)),ei(IE(r))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function OE(t,e,n,r){var a=[ei(IE(r)),ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16))];return a.join("")}Xe.equals=function(t,e){return!t||!e?!1:Xe(t).toRgbString()==Xe(e).toRgbString()},Xe.random=function(){return Xe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Ile(t,e){e=e===0?0:e||10;var n=Xe(t).toHsl();return n.s-=e/100,n.s=Iv(n.s),Xe(n)}function Ale(t,e){e=e===0?0:e||10;var n=Xe(t).toHsl();return n.s+=e/100,n.s=Iv(n.s),Xe(n)}function Nle(t){return Xe(t).desaturate(100)}function Dle(t,e){e=e===0?0:e||10;var n=Xe(t).toHsl();return n.l+=e/100,n.l=Iv(n.l),Xe(n)}function Rle(t,e){e=e===0?0:e||10;var n=Xe(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Xe(n)}function Mle(t,e){e=e===0?0:e||10;var n=Xe(t).toHsl();return n.l-=e/100,n.l=Iv(n.l),Xe(n)}function Lle(t,e){var n=Xe(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Xe(n)}function Fle(t){var e=Xe(t).toHsl();return e.h=(e.h+180)%360,Xe(e)}function EE(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Xe(t).toHsl(),r=[Xe(t)],a=360/e,i=1;i<e;i++)r.push(Xe({h:(n.h+i*a)%360,s:n.s,l:n.l}));return r}function Ble(t){var e=Xe(t).toHsl(),n=e.h;return[Xe(t),Xe({h:(n+72)%360,s:e.s,l:e.l}),Xe({h:(n+216)%360,s:e.s,l:e.l})]}function jle(t,e,n){e=e||6,n=n||30;var r=Xe(t).toHsl(),a=360/n,i=[Xe(t)];for(r.h=(r.h-(a*e>>1)+720)%360;--e;)r.h=(r.h+a)%360,i.push(Xe(r));return i}function $le(t,e){e=e||6;for(var n=Xe(t).toHsv(),r=n.h,a=n.s,i=n.v,o=[],s=1/e;e--;)o.push(Xe({h:r,s:a,v:i})),i=(i+s)%1;return o}Xe.mix=function(t,e,n){n=n===0?0:n||50;var r=Xe(t).toRgb(),a=Xe(e).toRgb(),i=n/100,o={r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a};return Xe(o)},Xe.readability=function(t,e){var n=Xe(t),r=Xe(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Xe.isReadable=function(t,e,n){var r=Xe.readability(t,e),a,i;switch(i=!1,a=qle(n),a.level+a.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7;break}return i},Xe.mostReadable=function(t,e,n){var r=null,a=0,i,o,s,c;n=n||{},o=n.includeFallbackColors,s=n.level,c=n.size;for(var u=0;u<e.length;u++)i=Xe.readability(t,e[u]),i>a&&(a=i,r=Xe(e[u]));return Xe.isReadable(t,r,{level:s,size:c})||!o?r:(n.includeFallbackColors=!1,Xe.mostReadable(t,["#fff","#000"],n))};var Ey=Xe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ule=Xe.hexNames=zle(Ey);function zle(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function PE(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function mn(t,e){Hle(t)&&(t="100%");var n=Wle(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Iv(t){return Math.min(1,Math.max(0,t))}function ua(t){return parseInt(t,16)}function Hle(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Wle(t){return typeof t=="string"&&t.indexOf("%")!=-1}function ei(t){return t.length==1?"0"+t:""+t}function $d(t){return t<=1&&(t=t*100+"%"),t}function IE(t){return Math.round(parseFloat(t)*255).toString(16)}function AE(t){return ua(t)/255}var ti=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",a="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function mo(t){return!!ti.CSS_UNIT.exec(t)}function Kle(t){t=t.replace(_le,"").replace(Sle,"").toLowerCase();var e=!1;if(Ey[t])t=Ey[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ti.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=ti.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ti.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=ti.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ti.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=ti.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ti.hex8.exec(t))?{r:ua(n[1]),g:ua(n[2]),b:ua(n[3]),a:AE(n[4]),format:e?"name":"hex8"}:(n=ti.hex6.exec(t))?{r:ua(n[1]),g:ua(n[2]),b:ua(n[3]),format:e?"name":"hex"}:(n=ti.hex4.exec(t))?{r:ua(n[1]+""+n[1]),g:ua(n[2]+""+n[2]),b:ua(n[3]+""+n[3]),a:AE(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=ti.hex3.exec(t))?{r:ua(n[1]+""+n[1]),g:ua(n[2]+""+n[2]),b:ua(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function qle(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gle={closable:Boolean,color:{type:String,default:""},content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,icon:{type:Function,default:void 0},maxWidth:{type:[String,Number]},shape:{type:String,default:"square",validator:function(e){return e?["square","round","mark"].includes(e):!0}},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},theme:{type:String,default:"default",validator:function(e){return e?["default","primary","warning","danger","success"].includes(e):!0}},title:{type:String,default:""},variant:{type:String,default:"dark",validator:function(e){return e?["dark","light","outline","light-outline"].includes(e):!0}},onClick:Function,onClose:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var NE=l.defineComponent({name:"TTag",props:Gle,setup:function(e){var n=Qe("tag"),r=n.globalConfig,a=ve("tag"),i=St({CloseIcon:Za}),o=i.CloseIcon,s=We(),c=Ut(),u=Lt(),d=u.SIZE,f=l.getCurrentInstance(),h=f.vnode,v=l.computed(function(){return["".concat(a.value),"".concat(a.value,"--").concat(e.theme),"".concat(a.value,"--").concat(e.variant),V(V(V(V({},"".concat(a.value,"--ellipsis"),e.maxWidth),"".concat(a.value,"--close"),e.closable),"".concat(a.value,"--disabled"),e.disabled),d.value[e.size],e.size!=="medium"),e.shape!=="square"&&"".concat(a.value,"--").concat(e.shape)]}),p=l.computed(function(){return m()}),g=l.computed(function(){return e.maxWidth?{maxWidth:isNaN(Number(e.maxWidth))?String(e.maxWidth):"".concat(e.maxWidth,"px")}:{}}),m=function(){var C=e.color,S=e.variant;if(!C)return{};var _=Xe(C).getLuminance(),O={color:_>.5?"black":"white"};if((S==="outline"||S==="light-outline")&&(O.borderColor=C),S!=="outline"){var N=function(){var T=Xe(C).toRgb(),k=T.r,E=T.g,I=T.b;return"rgba(".concat(k,", ").concat(E,", ").concat(I,", 0.1)")};O.backgroundColor=S==="dark"?C:N()}return S!=="dark"&&(O.color=C),O},y=function(C){var S;e.disabled||(S=e.onClick)===null||S===void 0||S.call(e,{e:C})},b=function(){if(!e.closable)return null;var C="".concat(a.value,"__icon-close");return r.value.closeIcon?l.h(r.value.closeIcon(l.h),{class:C}):l.createVNode(o,{onClick:function(_){var O,N=_.e;N&&N.stopPropagation(),(O=e.onClose)===null||O===void 0||O.call(e,{e:N})},class:C},null)},w=function(C){if(e.maxWidth){var S=h.props||{};if(Reflect.has(S,"title"))return S.title||void 0;if(C)return C}};return function(){var x=b(),C=c("default","content"),S=s("icon"),_=w(Je(C)?C:"");return l.createVNode("div",{class:v.value,style:p.value,onClick:y},[S,l.createVNode("span",{class:e.maxWidth?"".concat(a.value,"--text"):void 0,style:g.value,title:_},[C]),!e.disabled&&x])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Yle={checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,checkedProps:{type:Object},content:{type:[String,Number,Array,Function]},default:{type:[String,Function]},disabled:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},uncheckedProps:{type:Object},value:{type:[String,Number]},onChange:Function,onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Av=/^ArrowDown$/i,Nv=/^ArrowUp$/i,Xle=/^ArrowLeft$/i,Jle=/^ArrowRight$/i,DE=/^Escape$/i,Dv=/^Space$/i,Py=/^Enter$/i,RE=/^(Shift|ShiftLeft|ShiftRight)$/i,ME=/^KeyC$/i,LE=/^(KeyA|KeyL)$/i,Rv=/^(Enter|Space)$/i;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function FE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function BE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qle(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var jE=l.defineComponent({name:"TCheckTag",props:Yle,setup:function(e){var n=ve("tag"),r=Lt(),a=r.SIZE,i=Ut(),o=l.toRefs(e),s=o.checked,c=o.modelValue,u=Mt(s,c,e.defaultChecked,e.onChange,"checked"),d=$e(u,2),f=d[0],h=d[1],v=l.computed(function(){return["".concat(n.value),"".concat(n.value,"--check"),a.value[e.size],V(V({},"".concat(n.value,"--checked"),f.value),"".concat(n.value,"--disabled"),e.disabled)]}),p=l.computed(function(){var w=BE({theme:"primary"},e.checkedProps),x=BE({},e.uncheckedProps);return f.value?w:x}),g=function(x){var C=x.e;if(!e.disabled){var S;(S=e.onClick)===null||S===void 0||S.call(e,{e:C}),h(!f.value,{e:C,value:e.value})}},m=function(x){var C,S=x.code||((C=x.key)===null||C===void 0?void 0:C.trim()),_=Dv.test(S)||Py.test(S);_&&(x.preventDefault(),h(!f.value,{e:x,value:e.value}))},y=function(x){x.currentTarget.addEventListener("keydown",m)},b=function(x){x.currentTarget.removeEventListener("keydown",m)};return function(){var w=i("default","content");return l.createVNode(NE,l.mergeProps({class:v.value,disabled:e.disabled,tabindex:e.disabled?void 0:"0",onFocus:y,onBlur:b},p.value,{onClick:g}),Qle(w)?w:{default:function(){return[w]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zle={checkedProps:{type:Object},multiple:Boolean,options:{type:Array},uncheckedProps:{type:Object},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vle(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var ese=l.defineComponent({name:"TCheckTagGroup",props:Zle,setup:function(e,n){var r=l.toRefs(e),a=r.value,i=r.modelValue,o=r.options,s=ve("check-tag-group"),c=l.computed(function(){return[s.value]}),u=Mt(a,i,e.defaultValue,e.onChange),d=$e(u,2),f=d[0],h=d[1],v=function(m,y){var b=y.value;if(m)e.multiple?h(f.value.concat(b),{e:y.e,type:"check",value:b}):h([b],{e:y.e,type:"check",value:b});else{var w=[];e.multiple&&(w=f.value.filter(function(x){return x!==b})),h(w,{e:y.e,type:"uncheck",value:b})}},p=function(m){return n.slots.option?n.slots.option(m):n.slots.label?n.slots.label(m):m.label?Re(m.label)?m.label(l.h):m.label:m.content&&Re(m.content)?m.content(l.h):m.default&&Re(m.default)?m.default(l.h):m.value};return function(){return l.createVNode("div",{class:c.value},[(o.value||[]).map(function(g){var m;return l.createVNode(jE,{key:g.value,value:g.value,checkedProps:e.checkedProps,uncheckedProps:e.uncheckedProps,checked:f.value.includes(g.value),onChange:v,disabled:g.disabled,size:g.size,"data-value":g.value},Vle(m=p(g))?m:{default:function(){return[m]}})})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Iy=Be(NE),$E=Be(jE),tse=Be(ese);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function UE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Oc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nse(t){var e=We(),n=ve(),r=l.toRefs(t),a=r.value,i=r.modelValue,o=r.onRemove,s=r.max,c=r.minCollapsedNum,u=r.size,d=r.tagProps,f=r.getDragProps,h=Mt(a,i,t.defaultValue||[],t.onChange),v=$e(h,2),p=v[0],g=v[1],m=l.ref(),y=Vt(),b=Pn(),w=function(B){var T,k=Ee(p.value),E=k.splice(B.index,1),I=$e(E,1),A=I[0];g(k,Oc(Oc({trigger:"tag-remove"},B),{},{item:A})),(T=o.value)===null||T===void 0||T.call(o,Oc(Oc({},B),{},{item:A,trigger:"tag-remove",value:k}))},x=function(B){g([],{trigger:"clear",e:B.e})},C=function(B,T){var k,E,I=B?String(B).trim():"",A=s&&((k=p.value)===null||k===void 0?void 0:k.length)>=s.value,M=p.value;!A&&I&&(M=p.value instanceof Array?p.value.concat(String(I)):[I],g(M,{trigger:"enter",index:M.length-1,item:I,e:T.e})),t==null||(E=t.onEnter)===null||E===void 0||E.call(t,M,Oc(Oc({},T),{},{inputValue:B}))},S=function(B){!p.value||!p.value.length||(m.value=B)},_=function(B,T){var k=T.e;if(!(!p.value||!p.value.length||k.key==="Process"||b.value)){var E=/(Backspace|NumpadDelete)/i.test(k.code)||/(Backspace|NumpadDelete)/i.test(k.key);if(!B&&E){var I,A=p.value.length-1,M=p.value[A],$="backspace",U=p.value.slice(0,-1);g(U,{e:k,index:A,item:M,trigger:$}),(I=o.value)===null||I===void 0||I.call(o,{e:k,index:A,item:M,trigger:$,value:U})}m.value=B}},O=function(B){var T,k=B.displayNode,E=B.label,I=c.value?p.value.slice(0,c.value):p.value,A=k?[k]:(I==null||(T=I.map)===null||T===void 0?void 0:T.call(I,function(U,F){var j,W=e("tag",{params:{value:U}});return l.createVNode(Iy,l.mergeProps({key:"".concat(U).concat(F),size:u.value,disabled:y.value,onClose:function(J){return w({e:J.e,index:F})},closable:!b.value&&!y.value},(j=f.value)===null||j===void 0?void 0:j.call(f,F,U),d.value),{default:function(){return[W??U]}})}))||[];if([null,void 0,""].includes(E)||A.unshift(l.createVNode("div",{class:"".concat(n.value,"-tag-input__prefix"),key:"label"},[E])),I.length!==(p.value||[]).length){var M=p.value.length-I.length,$=e("collapsedItems",{params:{value:p.value,count:p.value.length-c.value,collapsedTags:p.value.slice(c.value,p.value.length),collapsedSelectedItems:p.value.slice(c.value,p.value.length),onClose:w}});A.push($??l.createVNode(Iy,l.mergeProps({key:"more",size:u.value},d.value),{default:function(){return["+",M]}}))}return A};return{tagValue:p,clearAll:x,onClose:w,onInnerEnter:C,onInputBackspaceKeyUp:S,onInputBackspaceKeyDown:_,renderLabel:O}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function rse(t){var e=t.disabled,n=t.readonly,r=t.onMouseenter,a=t.onMouseleave,i=l.ref(!1),o=function(u){n||e||(i.value=!0,r==null||r(u))},s=function(u){n||e||(i.value=!1,a==null||a(u))};return{isHover:i,addHover:o,cancelHover:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ase(t){var e=t.sortOnDraggable,n=t.onDragSort,r=t.onDragOverCheck,a=l.ref(-1),i=l.ref(null),o=l.ref(null),s=l.reactive({nodeX:0,nodeWidth:0,mouseX:0}),c=function(p,g,m){if(p.preventDefault(),!(a.value===g||a.value===-1)){var y=p.target;if(!(r!=null&&r.targetClassNameRegExp&&!(r!=null&&r.targetClassNameRegExp.test(y.className)))){if(r!=null&&r.x&&y){if(!s.nodeWidth)return;var b=y.getBoundingClientRect(),w=b.x,x=b.width,C=w+x/2,S=p.clientX-(s.mouseX-s.nodeX),_=S+s.nodeWidth,O=!1;if(S>w&&S<w+x?O=S<C:O=_>C,!O)return}n==null||n({currentIndex:a.value,current:i,target:m,targetIndex:g}),a.value=g}}};if(!e)return{};function u(v,p,g){a.value=p,i.value=g;var m=v.target;if(r&&m){var y=m.getBoundingClientRect(),b=y.x,w=y.width;s.nodeX=b,s.nodeWidth=w,s.mouseX=v.clientX}}function d(){o.value=!0}function f(){o.value,o.value=!1,a.value=-1,i.value=null}function h(v,p){return e?{draggable:!0,onDragstart:function(m){u(m,v,p)},onDragover:function(m){c(m,v,p)},onDrop:function(){d()},onDragend:function(){f()}}:{}}return{onDragStart:u,onDragOver:c,onDrop:d,onDragEnd:f,getDragProps:h,dragging:a.value!==-1}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function zE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Xl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ise=function(){return{NAME_CLASS:ve("tag-input"),CLEAR_CLASS:ve("tag-input__suffix-clear"),BREAK_LINE_CLASS:ve("tag-input--break-line")}},ose=l.defineComponent({name:"TTagInput",props:Xl({},xle),setup:function(e){var n=ise(),r=n.NAME_CLASS,a=n.CLEAR_CLASS,i=n.BREAK_LINE_CLASS,o=St({CloseCircleFilledIcon:gc}),s=o.CloseCircleFilledIcon,c=Vt(),u=Pn(),d=l.toRefs(e),f=d.inputValue,h=d.inputProps,v=gn(f,e.defaultInputValue,e.onInputChange,"inputValue"),p=$e(v,2),g=p[0],m=p[1],y=l.toRefs(e),b=y.excessTagsDisplayType,w=y.clearable,x=y.placeholder,C=rse({readonly:u.value,disabled:c.value,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave}),S=C.isHover,_=C.addHover,O=C.cancelHover,N=l.ref(!1),B=Qe(),T=B.classPrefix,k=l.ref(!1),E=ase(Xl(Xl({},e),{},{sortOnDraggable:e.dragSort,onDragOverCheck:{x:!0,targetClassNameRegExp:new RegExp("^".concat(T.value,"-tag"))}})),I=E.getDragProps,A=Cle(e),M=A.scrollToRight,$=A.onWheel,U=A.scrollToRightOnEnter,F=A.scrollToLeftOnLeave,j=A.tagInputRef,W=A.isScrollable,H=nse(l.reactive(Xl(Xl({},l.toRefs(e)),{},{getDragProps:I}))),J=H.tagValue,Y=H.onInnerEnter,D=H.onInputBackspaceKeyUp,q=H.onInputBackspaceKeyDown,z=H.clearAll,K=H.renderLabel,P=H.onClose,R=l.computed(function(){var Me=!(Ke(J.value)&&J.value.length);return[r.value,V(V(V({},i.value,b.value==="break-line"),"".concat(T.value,"-is-empty"),Me),"".concat(T.value,"-tag-input--with-tag"),!Me)]}),X=l.computed(function(){var Me;return(Me=J.value)!==null&&Me!==void 0&&Me.length?"":x.value}),ee=l.computed(function(){var Me;return!!(!u.value&&!c.value&&w.value&&S.value&&(!((Me=J.value)===null||Me===void 0)&&Me.length||g.value))}),re=function(me,ie){var ye,Ce;(ye=ie.e)===null||ye===void 0||(Ce=ye.preventDefault)===null||Ce===void 0||Ce.call(ye),m("",{e:ie.e,trigger:"enter"}),!N.value&&Y(me,ie),l.nextTick(function(){M(),N.value=!1})},ae=function(me,ie){var ye,Ce;N.value=!0,(ye=h.value)===null||ye===void 0||(Ce=ye.onCompositionstart)===null||Ce===void 0||Ce.call(ye,me,ie)},oe=function(me,ie){var ye,Ce;N.value=!1,(ye=h.value)===null||ye===void 0||(Ce=ye.onCompositionend)===null||Ce===void 0||Ce.call(ye,me,ie)},ce=function(me){var ie,ye;c.value||(k.value=!0,(ie=j.value)===null||ie===void 0||ie.focus(),(ye=e.onClick)===null||ye===void 0||ye.call(e,me))},ge=function(me){var ie;z(me),m("",{e:me.e,trigger:"clear"}),(ie=e.onClear)===null||ie===void 0||ie.call(e,me)},pe=function(){var me;(me=j.value)===null||me===void 0||me.focus()},_e=function(){var me;(me=j.value)===null||me===void 0||me.blur()},be=function(me){_(me),U()},Se=function(me){O(me),F()},Ne=function(me,ie){var ye;k.value||(k.value=!0,(ye=e.onFocus)===null||ye===void 0||ye.call(e,J.value,{e:ie.e,inputValue:me}))},Ae=function(me,ie){var ye;k.value=!1,m("",{e:ie.e,trigger:"blur"}),(ye=e.onBlur)===null||ye===void 0||ye.call(e,J.value,{e:ie.e,inputValue:me})},Pe=function(me,ie){m(me,Xl(Xl({},ie),{},{trigger:"input"}))};return l.watch(function(){return W.value},function(Me){if(e.excessTagsDisplayType==="scroll"){var me="".concat(T.value,"-input__prefix"),ie=j.value.$el.querySelector(".".concat(me));Me?ie.classList.add("".concat(me,"--scrollable")):ie.classList.remove("".concat(me,"--scrollable"))}}),{CLEAR_CLASS:a,CloseCircleFilledIcon:s,tagValue:J,tInputValue:g,isHover:S,tagInputPlaceholder:X,showClearIcon:ee,tagInputRef:j,classPrefix:T,isFocused:k,focus:pe,blur:_e,setTInputValue:m,onMouseEnter:be,onMouseLeave:Se,onInnerFocus:Ne,onInnerBlur:Ae,onInnerChange:Pe,addHover:_,cancelHover:O,onInputEnter:re,onInnerEnter:Y,onInputBackspaceKeyUp:D,onInputBackspaceKeyDown:q,renderLabel:K,onWheel:$,scrollToRightOnEnter:U,scrollToLeftOnLeave:F,onClick:ce,onClearClick:ge,onClose:P,onInputCompositionstart:ae,onInputCompositionend:oe,classes:R,isDisabled:c,isReadonly:u}},render:function(){var e=this,n,r=this.CloseCircleFilledIcon,a=this.showClearIcon?l.createVNode(r,{class:this.CLEAR_CLASS,onClick:this.onClearClick},null):jn(this,"suffixIcon"),i=jn(this,"prefixIcon"),o="".concat(this.classPrefix,"-tag-input__with-suffix-icon");a&&!this.classes.includes(o)&&this.classes.push(o);var s=jn(this,"valueDisplay",{params:{value:this.tagValue,onClose:function(h){return e.onClose({index:h})}}}),c=jn(this,"label",{silent:!0}),u=this.inputProps,d=this.isReadonly||(u==null?void 0:u.readonly);return l.createVNode(Va,l.mergeProps({ref:"tagInputRef",borderless:this.borderless,readonly:d,showInput:!d||!this.tagValue||!((n=this.tagValue)!==null&&n!==void 0&&n.length),value:this.tInputValue,autoWidth:!0,size:this.size,disabled:this.isDisabled,label:function(){return e.renderLabel({displayNode:s,label:c})},class:this.classes,tips:this.tips,status:this.status,placeholder:this.tagInputPlaceholder,suffix:this.suffix,suffixIcon:function(){return a},prefixIcon:function(){return i},keepWrapperWidth:!this.autoWidth,onWheel:this.onWheel,onChange:this.onInnerChange,onPaste:this.onPaste,onEnter:this.onInputEnter,onKeyup:this.onInputBackspaceKeyUp,onKeydown:this.onInputBackspaceKeyDown,onMouseenter:this.onMouseEnter,onMouseleave:this.onMouseLeave,onFocus:this.onInnerFocus,onBlur:this.onInnerBlur,onClick:this.onClick,onCompositionstart:this.onInputCompositionstart,onCompositionend:this.onInputCompositionend},this.inputProps),{suffix:this.$slots.suffix})}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var HE=Be(ose);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lse=["tips"];function WE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var sse={label:"label",key:"key",children:"children"};function cse(t,e,n){var r=l.toRefs(t),a=r.inputValue,i=ve(),o=l.ref(),s=l.ref(t.autofocus),c=gn(a,t.defaultInputValue,t.onInputChange,"inputValue"),u=$e(c,2),d=u[0],f=u[1],h=Vt(),v=Pn(),p=l.computed(function(){return ni(ni({},sse),t.keys)}),g=l.computed(function(){return t.value instanceof Array?t.value.map(function(_){return ot(_)?_[p.value.label]:_}):ot(t.value)?[t.value[p.value.label]]:[t.value]}),m=l.computed(function(){return!g.value||!g.value.length?t.placeholder:""}),y=function(O,N){var B;if(N.trigger==="tag-remove"){var T;(T=N.e)===null||T===void 0||T.stopPropagation()}(B=t.onTagChange)===null||B===void 0||B.call(t,O,N)},b=function(O,N){N.trigger==="enter"||N.trigger==="blur"||f(O,{trigger:N.trigger,e:N.e})},w=function(O,N){var B,T,k=(B=n.value)===null||B===void 0?void 0:B.getOverlayState();k!=null&&k.hover||(s.value=!1,(T=t.onBlur)===null||T===void 0||T.call(t,t.value,ni(ni({},N),{},{tagInputValue:O})))},x=function(O,N){var B,T,k=(B=n.value)===null||B===void 0?void 0:B.getOverlayState();if(!(s.value||k!=null&&k.hover)){s.value=!0;var E=ni(ni({},N),{},{tagInputValue:O});(T=t.onFocus)===null||T===void 0||T.call(t,t.value,E)}},C=function(O,N){var B,T=ni(ni({},N),{},{tagInputValue:O});(B=t.onEnter)===null||B===void 0||B.call(t,t.value,T)},S=function(O){var N=ni(ni({},O.commonInputProps),{},{tagProps:t.tagProps,label:t.label,autoWidth:t.autoWidth,readonly:v.value,placeholder:m.value,minCollapsedNum:t.minCollapsedNum,collapsedItems:t.collapsedItems,tag:t.tag,value:g.value,valueDisplay:t.valueDisplay,inputValue:O.popupVisible&&O.allowInput?d.value:"",inputProps:ni({readonly:!t.allowInput||v.value,inputClass:V({},"".concat(i.value,"-input--focused"),O.popupVisible)},t.inputProps),suffixIcon:!h.value&&t.loading?function(){return l.createVNode(lr,{loading:!0,size:"small"},null)}:t.suffixIcon},t.tagInputProps),B=e.slots;B.tips;var T=Vo(B,lse);return l.createVNode(HE,l.mergeProps({ref:o},N,{onInputChange:b,onChange:y,onClear:O.onInnerClear,onBlur:w,onEnter:C,onFocus:x}),T)};return{tags:g,tPlaceholder:m,tagInputRef:o,isMultipleFocus:s,multipleInputValue:d,renderSelectMultiple:S}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function KE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var use=1e3,dse=0;function GE(t){var e=l.toRefs(t),n=e.popupProps,r=e.autoWidth,a=l.ref(!1),i=Vt(),o=Pn(),s=function(h,v){var p=v.scrollHeight>v.offsetHeight?dse:0,g=v.offsetWidth+p>=h.offsetWidth?v.offsetWidth:h.offsetWidth,m={};return n.value&&wt(n.value.overlayInnerStyle)==="object"&&!n.value.overlayInnerStyle.width&&(m=n.value.overlayInnerStyle),qE({width:"".concat(Math.min(g,use),"px")},m)},c=function(h,v){if(!(i.value||o.value)){var p=v.trigger==="trigger-element-click"&&t.allowInput?!0:h;if(t.popupVisible!==p){var g;a.value=p,(g=t.onPopupVisibleChange)===null||g===void 0||g.call(t,p,v)}}},u=function(h,v){var p;return qE({width:"".concat(Math.max(h.offsetWidth,v.offsetWidth),"px")},(p=n.value)===null||p===void 0?void 0:p.overlayInnerStyle)},d=l.computed(function(){var f,h={},v=((f=n.value)===null||f===void 0?void 0:f.overlayInnerStyle)||{};return Re(v)||ot(v)&&v.width?h=v:r.value?h=u:h=s,h});return{tOverlayInnerStyle:d,innerPopupVisible:a,onInnerPopupVisibleChange:c}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function YE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fse=function(){return{NAME_CLASS:ve("select-input"),BASE_CLASS_BORDERLESS:ve("select-input--borderless"),BASE_CLASS_MULTIPLE:ve("select-input--multiple"),BASE_CLASS_POPUP_VISIBLE:ve("select-input--popup-visible"),BASE_CLASS_EMPTY:ve("select-input--empty")}},hse=l.defineComponent({name:"TSelectInput",props:yo(yo({},ple),{},{valueDisplayOptions:{type:Object}}),setup:function(e,n){var r=fse(),a=r.NAME_CLASS,i=r.BASE_CLASS_BORDERLESS,o=r.BASE_CLASS_MULTIPLE,s=r.BASE_CLASS_POPUP_VISIBLE,c=r.BASE_CLASS_EMPTY,u=ve(),d=We(),f=l.ref(),h=l.ref(),v=l.toRefs(e),p=v.multiple,g=v.value,m=v.popupVisible,y=v.borderless,b=GE(e),w=b.tOverlayInnerStyle,x=b.innerPopupVisible,C=b.onInnerPopupVisibleChange,S=wle(e,n,h),_=S.isSingleFocus,O=S.commonInputProps,N=S.onInnerClear,B=S.renderSelectSingle,T=cse(e,n,h),k=T.isMultipleFocus,E=T.tagInputRef,I=T.renderSelectMultiple,A=l.computed(function(){return e.multiple?k.value:_.value}),M=l.computed(function(){var F;return["".concat(a.value),V(V(V(V({},o.value,p.value),i.value,y.value),s.value,(F=m.value)!==null&&F!==void 0?F:x.value),c.value,g.value instanceof Array?!g.value.length:!g.value)]}),$=function(j){var W,H=j.code||((W=j.key)===null||W===void 0?void 0:W.trim());if(/(ArrowDown|ArrowUp)/.test(H)&&!m.value){var J,Y=yo(yo({},n),{},{trigger:"trigger-element-focus"});(J=e.onPopupVisibleChange)===null||J===void 0||J.call(e,!0,Y)}};l.watch([A],function(F){var j=$e(F,1),W=j[0];m.value||(W?f.value.addEventListener("keydown",$):f.value.removeEventListener("keydown",$))}),l.onMounted(function(){!m.value&&A&&f.value.addEventListener("keydown",$)}),l.onBeforeUnmount(function(){var F;(F=f.value)===null||F===void 0||F.removeEventListener("keydown",$)});var U=function(j){var W,H;(W=j.e)===null||W===void 0||W.stopPropagation(),!(j.e.target.tabIndex>=0)&&e.multiple&&((H=E.value)===null||H===void 0||H.focus())};return{classPrefix:u,NAME_CLASS:a,innerPopupVisible:x,commonInputProps:O,tOverlayInnerStyle:w,selectInputRef:f,popupRef:h,classes:M,onInnerClear:N,renderTNodeJSX:d,renderSelectSingle:B,renderSelectMultiple:I,onOverlayClick:U,onInnerPopupVisibleChange:C}},render:function(){var e,n,r=this,a={visible:(e=this.popupVisible)!==null&&e!==void 0?e:this.innerPopupVisible},i=l.createVNode(sa,l.mergeProps({ref:"popupRef",trigger:((n=this.popupProps)===null||n===void 0?void 0:n.trigger)||"click",placement:"bottom-left"},a,{content:this.panel,hideEmptyPopup:!0},yo(yo({onVisibleChange:this.onInnerPopupVisibleChange,onOverlayClick:this.onOverlayClick},this.popupProps),{},{overlayInnerStyle:this.tOverlayInnerStyle})),yo({default:function(){return[r.multiple?r.renderSelectMultiple({commonInputProps:r.commonInputProps,onInnerClear:r.onInnerClear,popupVisible:a.visible,allowInput:r.allowInput}):r.renderSelectSingle(a.visible)]}},yo(yo({},this.$slots),{},{content:this.$slots.panel}))),o=this.renderTNodeJSX("tips"),s=["".concat(this.classPrefix,"-input__tips"),"".concat(this.classPrefix,"-tips"),"".concat(this.classPrefix,"-is-").concat(this.status)];return l.createVNode("div",{ref:"selectInputRef",class:this.classes},[i,o&&l.createVNode("div",{class:s},[o])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ec=Be(hse);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vse={checkAll:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,label:{type:String,default:""},title:{type:String,default:""},value:{type:[String,Number,Boolean]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var pse={checkAll:Boolean,checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:{type:[String,Function]},lazyLoad:Boolean,name:{type:String,default:""},readonly:{type:Boolean,default:void 0},title:{type:String,default:""},value:{type:[String,Number,Boolean]},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var XE=Symbol("CheckboxGroupProvide");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ud(t,e,n,r){if(typeof window>"u")return null;if(!window||!window.IntersectionObserver)return n(),null;var a=null;try{a=new window.IntersectionObserver(function(i){var o=i[0];o.isIntersecting&&(n(),a.unobserve(t))},{rootMargin:"0px 0px ".concat(r,"px 0px"),root:e}),a.observe(t)}catch(i){console.error(i),n()}return a}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gse(t,e){var n=l.ref(),r=l.ref(!0),a=function(){if(e.value){r.value=!1;var o=Ud(t.value,null,function(){r.value=!0},0);n.value=o}};return l.onMounted(a),l.watch([e,t],a),l.onBeforeUnmount(function(){e.value&&n.value.unobserve(t.value)}),{showCheckbox:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mse(t){var e=function(i){var o=Rv.test(i.key)||Rv.test(i.code);if(o){i.preventDefault();var s=i.currentTarget.querySelector("input"),c=s.disabled;!c&&t(i)}},n=function(i){i.currentTarget.addEventListener("keydown",e)},r=function(i){i.currentTarget.removeEventListener("keydown",e)};return{onCheckboxFocus:n,onCheckboxBlur:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function JE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function QE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JE(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ZE=l.defineComponent({name:"TCheckbox",props:QE(QE({},pse),{},{needRipple:Boolean,stopLabelTrigger:Boolean,index:Number,data:Object}),setup:function(e){var n=l.ref();e.needRipple&&el(n);var r=Lt(),a=r.STATUS,i=l.toRefs(e),o=i.checked,s=i.modelValue,c=i.lazyLoad,u=Mt(o,s,e.defaultChecked,e.onChange,"checked"),d=$e(u,2),f=d[0],h=d[1],v=l.inject(XE,void 0),p=l.ref();l.watch(function(){return[e.name,v==null?void 0:v.value.name].join("_")},function(){var $=e.name||(v==null?void 0:v.value.name);$&&(p.value=$)},{immediate:!0});var g=l.ref(!1),m=function(){var U=e.value,F=e.checkAll;return F?v==null?void 0:v.value.isCheckAll:v!=null&&v.value?v.value.checkedValues.includes(U):f.value};l.watch(function(){var $;return[f.value,v==null?void 0:v.value.isCheckAll,v==null||($=v.value.checkedValues)===null||$===void 0?void 0:$.join(",")]},function(){g.value=m()},{immediate:!0});var y=l.computed(function(){return!e.checkAll&&!g.value&&v!==null&&v!==void 0&&v.value.maxExceeded?!0:null}),b=l.computed(function(){return v==null?void 0:v.value.disabled}),w=Vt({beforeDisabled:y,afterDisabled:b}),x=l.computed(function(){return v==null?void 0:v.value.readonly}),C=Pn({afterReadonly:x}),S=l.ref(!1);l.watch(function(){return[e.checkAll,e.indeterminate,v==null?void 0:v.value.indeterminate]},function(){S.value=e.checkAll?v==null?void 0:v.value.indeterminate:e.indeterminate},{immediate:!0});var _=ve("checkbox"),O=l.ref({});l.watch([g,w,S],function(){O.value=["".concat(_.value),V(V(V({},a.value.checked,g.value),a.value.disabled,w.value),a.value.indeterminate,S.value)]},{immediate:!0});var N=function(U){if(!C.value){var F=!g.value;h(F,{e:U}),v!=null&&v.value.handleCheckboxChange&&v.value.onCheckedChange({checked:F,checkAll:e.checkAll,e:U,option:e})}},B=Ut(),T=function(U){e.stopLabelTrigger&&U.preventDefault()},k=gse(n,c),E=k.showCheckbox,I=mse(N),A=I.onCheckboxFocus,M=I.onCheckboxBlur;return function(){var $=Je(e.title)&&e.title?e.title:null;return l.createVNode("label",{ref:n,class:O.value,tabindex:w.value?void 0:"0",onFocus:A,onBlur:M,title:$},[E.value?[l.createVNode("input",{type:"checkbox",tabindex:"-1",class:"".concat(_.value,"__former"),disabled:w.value,readonly:C.value,indeterminate:S.value,name:p.value,value:e.value?e.value:void 0,checked:g.value,onChange:N,key:"input"},null),l.createVNode("span",{class:"".concat(_.value,"__input"),key:"input-span"},null),l.createVNode("span",{class:"".concat(_.value,"__label"),key:"label",onClick:T},[B("default","label")])]:null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yse={disabled:{type:Boolean,default:void 0},lazyLoad:Boolean,max:{type:Number,default:void 0},name:{type:String,default:""},options:{type:Array},readonly:{type:Boolean,default:void 0},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var bse=l.defineComponent({name:"TCheckboxGroup",props:yse,setup:function(e){var n=ve("checkbox-group"),r=We(),a=Array.isArray,i=l.toRefs(e),o=i.value,s=i.modelValue,c=Mt(o,s,e.defaultValue,e.onChange),u=$e(c,2),d=u[0],f=u[1],h=l.ref([]),v=l.computed(function(){if(!a(d.value))return 0;var _=h.value.map(function(N){return N.value}),O=Yl(d.value,_);return O.length}),p=l.computed(function(){var _=h.value.filter(function(N){return!N.disabled&&!N.readonly&&!N.checkAll}).map(function(N){return N.value}),O=Yl(_,d.value);return O.length===_.length}),g=l.computed(function(){return!p.value&&v.value<h.value.length&&v.value!==0}),m=l.computed(function(){return!Bn(e.max)&&d.value.length===e.max});l.watchEffect(function(){if(!e.options)return[];h.value=e.options.map(function(_){return ot(_)?_:{label:String(_),value:_}})});var y=function(){for(var O=new Set,N=0,B=h.value.length;N<B;N++){var T=h.value[N];if(!T.checkAll&&!T.disabled&&!T.readonly&&(O.add(T.value),m.value))break}return Ee(O)},b=function(O,N){var B=O?y():[];f(B,{e:N.e,type:O?"check":"uncheck",current:void 0,option:void 0})},w=function(O){var N=O.option.value;if(!a(d.value)){console.warn("TDesign CheckboxGroup Warn: `value` must be an array, instead of ".concat(wt(d.value)));return}var B=Ee(d.value);if(O.checked)B.push(N);else{var T=B.indexOf(N);B.splice(T,1)}f(B,{e:O.e,current:O.option.value,option:O.option,type:O.checked?"check":"uncheck"})},x=function(O){var N=O.checked,B=O.checkAll,T=O.e;B?b(N,{e:T}):w(O)},C=co(),S=function(){var O=C("Checkbox"),N=[];return O==null||O.forEach(function(B){var T=B.props;T&&((T["check-all"]===""||T["check-all"]===!0)&&(T.checkAll=!0),N.push(T))}),N};return l.provide(XE,l.computed(function(){return{name:e.name,isCheckAll:p.value,checkedValues:d.value||[],maxExceeded:m.value,disabled:e.disabled,readonly:e.readonly,indeterminate:g.value,handleCheckboxChange:w,onCheckedChange:x}})),function(){var _,O=null;if((_=e.options)!==null&&_!==void 0&&_.length){var N;O=(N=h.value)===null||N===void 0?void 0:N.map(function(T,k){var E;return l.createVNode(ZE,l.mergeProps({key:"".concat(T.value||"").concat(k),lazyLoad:e.lazyLoad},T,{index:k,checked:(E=d.value)===null||E===void 0?void 0:E.includes(T.value),data:T}),null)})}else{var B=r("default");h.value=S(),O=B}return l.createVNode("div",{class:n.value,role:"group","aria-label":"checkbox-group"},[O])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ni=Be(ZE),zd=Be(bse);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function wse(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=xse(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function xse(t,e){if(t){if(typeof t=="string")return VE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VE(t,e):void 0}}function VE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Mv=Symbol("selectProvide"),Ay=function(e,n){var r=n.value.get(e);return(r==null?void 0:r.label)||(e==null?void 0:e.toString())},Cse=function(e,n){var r=[],a=wse(e),i;try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Ay(o,n);s&&r.push(s)}}catch(c){a.e(c)}finally{a.f()}return r},eP=function(e,n){var r=Br(e),a=r.indexOf(n);return a<0?r.push(n):r.splice(a,1),{value:r,isCheck:a<0}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function tP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function nP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _se(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Ny=l.defineComponent({name:"TOption",props:nP(nP({},vse),{},{createAble:Boolean,multiple:Boolean,index:Number,rowIndex:Number,trs:Map,scrollType:String,isVirtual:Boolean,bufferSize:Number,checkAll:Boolean}),emits:["row-mounted"],setup:function(e,n){var r=l.inject(Mv),a=Vt(),i=l.getCurrentInstance(),o=i.vnode,s=l.computed(function(){return r.value.max!==0&&r.value.max<=r.value.selectValue.length}),c=l.computed(function(){return a.value||e.multiple&&s.value&&!m.value&&!r.value.isCheckAll}),u=Ut(),d=ve("select"),f=Lt(),h=f.STATUS,v=f.SIZE,p=l.ref(),g=l.ref(!1),m=l.computed(function(){return r.value.isCheckAll&&!e.disabled?!0:e.multiple?r.value.selectValue.includes(e.value):r.value.selectValue===e.value}),y=l.computed(function(){return e.checkAll?r.value.indeterminate:!1}),b=l.computed(function(){return["".concat(d.value,"-option"),[v.value[r.value.size]],V(V(V({},h.value.disabled,c.value),h.value.selected,m.value),"".concat(d.value,"-option__hover"),(g.value||r.value.hoverIndex===e.index)&&!c.value)]}),w=l.computed(function(){return e.label||e.value}),x=function(O){if(!(e.disabled||c.value)){if(e.multiple){C(!m.value,{e:O}),O.preventDefault();return}if(e.createAble){var N,B;if((N=(B=r.value).handleCreate)===null||N===void 0||N.call(B,e.value),r.value.multiple){r.value.handleValueChange([].concat(Ee(r.value.selectValue),[e.value]),{selectedOptions:r.value.getSelectedOptions(),trigger:"check",e:O});return}}var T=r.value.getSelectedOptions(e.value);r.value.handleValueChange(e.value,{option:T==null?void 0:T[0],selectedOptions:T,trigger:"check",e:O}),r.value.handlePopupVisibleChange(!1,{e:O}),r.value.emitBlur(O)}},C=function(O,N){if(e.checkAll){r.value.onCheckAllChange(O);return}var B=eP(r.value.selectValue,e.value),T=r.value.getSelectedOptions(B.value);r.value.handleValueChange(B.value,{option:T.find(function(k){return k.value===e.value}),selectedOptions:T,trigger:O?"check":"uncheck",e:N.e})},S=function(){var O=o.props||{};return Reflect.has(O,"title")?e.title:typeof w.value=="string"?w.value:null};return l.onMounted(function(){var _=e.trs,O=e.rowIndex,N=e.isVirtual;N&&(_.set(O,p.value),n.emit("row-mounted"))}),l.onBeforeUnmount(function(){if(e.isVirtual){var _=e.trs,O=e.rowIndex;_.delete(O)}}),el(p),function(){var _=u("default","content")||w.value;return l.createVNode("li",{ref:p,class:b.value,title:S(),onMouseenter:function(){return g.value=!0},onMouseleave:function(){return g.value=!1},onClick:x},[r&&e.multiple?l.createVNode(Ni,{checked:m.value,disabled:c.value,onChange:C,indeterminate:y.value},_se(_)?_:{default:function(){return[_]}}):l.createVNode("span",null,[_])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Sse={divider:{type:Boolean,default:!0},label:{type:String}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function rP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var aP=l.defineComponent({name:"TOptionGroup",props:Tse({},Sse),setup:function(e){var n=l.inject(Mv),r=ve("select-option-group"),a=Lt(),i=a.SIZE,o=We(),s=l.computed(function(){return[r.value,i.value[n.value.size],V({},"".concat(r.value,"__divider"),e.divider)]});return function(){var c;return l.createVNode("li",{class:s.value},[((c=e.label)!==null&&c!==void 0?c:!1)&&l.createVNode("div",{class:"".concat(r.value,"__header")},[e.label]),o("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var da={autoWidth:Boolean,autofocus:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},creatable:Boolean,disabled:{type:Boolean,default:void 0},empty:{type:[String,Function]},filter:{type:Function},filterable:Boolean,inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},label:{type:[String,Function]},loading:Boolean,loadingText:{type:[String,Function]},max:{type:Number,default:0},minCollapsedNum:{type:Number,default:0},multiple:Boolean,options:{type:Array},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:Boolean,prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},reserveKeyword:Boolean,scroll:{type:Object},selectInputProps:{type:Object},showArrow:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Boolean,Object,Array],default:void 0},modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Object,Array],default:void 0},valueDisplay:{type:[String,Function]},valueType:{type:String,default:"value",validator:function(e){return e?["value","object"].includes(e):!0}},onBlur:Function,onChange:Function,onClear:Function,onCreate:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onPopupVisibleChange:Function,onRemove:Function,onSearch:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var kse=function(e){var n,r,a,i,o,s=l.computed(function(){var N,B,T;return((N=e.scroll)===null||N===void 0?void 0:N.type)==="virtual"&&((B=e.options.value)===null||B===void 0?void 0:B.length)>(((T=e.scroll)===null||T===void 0?void 0:T.threshold)||100)}),c=((n=e.scroll)===null||n===void 0?void 0:n.type)==="virtual"?$re({container:e.popupContentRef,data:e.options,fixedHeight:((r=e.scroll)===null||r===void 0?void 0:r.isFixedRowHeight)||!1,lineHeight:((a=e.scroll)===null||a===void 0?void 0:a.rowHeight)||28,bufferSize:((i=e.scroll)===null||i===void 0?void 0:i.bufferSize)||20,threshold:((o=e.scroll)===null||o===void 0?void 0:o.threshold)||100}):{},u=c.trs,d=u===void 0?null:u,f=c.visibleData,h=f===void 0?null:f,v=c.handleScroll,p=v===void 0?null:v,g=c.scrollHeight,m=g===void 0?null:g,y=c.translateY,b=y===void 0?null:y,w=c.handleRowMounted,x=w===void 0?null:w,C=-1,S=function(B){if(s.value){var T=B.target,k=T.scrollTop;Math.abs(C-k)>5?(p(),C=k):C=-1}};l.onMounted(function(){var N;(N=e.popupContentRef.value)===null||N===void 0||N.addEventListener("scroll",S)}),l.onBeforeUnmount(function(){var N;(N=e.popupContentRef.value)===null||N===void 0||N.removeEventListener("scroll",S)});var _=l.computed(function(){return{position:"absolute",width:"1px",height:"1px",transition:"transform 0.2s",transform:"translate(0, ".concat(m.value,"px)"),"-ms-transform":"translate(0, ".concat(m.value,"px)"),"-moz-transform":"translate(0, ".concat(m.value,"px)"),"-webkit-transform":"translate(0, ".concat(m.value,"px)")}}),O=l.computed(function(){return{transform:"translate(0, ".concat(b.value,"px)"),"-ms-transform":"translate(0, ".concat(b.value,"px)"),"-moz-transform":"translate(0, ".concat(b.value,"px)"),"-webkit-transform":"translate(0, ".concat(b.value,"px)")}});return{trs:d,scrollHeight:m,translateY:b,visibleData:h,handleRowMounted:x,isVirtual:s,cursorStyle:_,panelStyle:O}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ose(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Ese=l.defineComponent({name:"TSelectPanel",props:{inputValue:da.inputValue,panelTopContent:da.panelTopContent,panelBottomContent:da.panelBottomContent,empty:da.empty,creatable:da.creatable,loading:da.loading,loadingText:da.loadingText,multiple:da.multiple,filterable:da.filterable,filter:da.filter,scroll:da.scroll,size:da.size},setup:function(e,n){var r=n.expose,a=ve("select"),i=We(),o=Qa(),s=Qe("select"),c=s.t,u=s.globalConfig,d=l.inject(Mv),f=l.ref(null),h=l.computed(function(){return d.value.popupContentRef.value}),v=l.computed(function(){return e.creatable&&e.filterable&&e.inputValue}),p=l.computed(function(){return d.value.displayOptions}),g=kse({scroll:e.scroll,popupContentRef:h,options:p}),m=g.trs,y=g.visibleData,b=g.handleRowMounted,w=g.isVirtual,x=g.panelStyle,C=g.cursorStyle,S=l.computed(function(){return!p.value.length}),_=function(){return l.createVNode("ul",{class:["".concat(a.value,"__create-option"),"".concat(a.value,"__list")]},[l.createVNode(Ny,{value:e.inputValue,label:"".concat(e.inputValue),createAble:!0,class:"".concat(a.value,"__create-option--special")},null)])},O=function(k){return l.createVNode("ul",{class:"".concat(a.value,"__list")},[k.map(function(E,I){var A,M;if(E.children){var $;return l.createVNode(aP,{label:E.group,divider:E.divider},Ose($=O(E.children))?$:{default:function(){return[$]}})}return l.createVNode(Ny,l.mergeProps(Sr(E,"index","$index","className","tagName"),w.value?{rowIndex:E.$index,trs:m,scrollType:(A=e.scroll)===null||A===void 0?void 0:A.type,isVirtual:w.value,bufferSize:(M=e.scroll)===null||M===void 0?void 0:M.bufferSize,key:"".concat(E.$index||"","_").concat(I,"_").concat(E.value)}:{key:"".concat(I,"_").concat(E.value)},{index:I,multiple:e.multiple,onRowMounted:b}),E.slots)})])},N=l.computed(function(){return{small:"s",medium:"m",large:"l"}[d.value.size]});r({innerRef:f,visibleData:y,isVirtual:w,displayOptions:p});var B=function(k,E){return l.createVNode("div",{ref:f,class:["".concat(a.value,"__dropdown-inner"),"".concat(a.value,"__dropdown-inner--size-").concat(N.value)],style:E},[v.value&&_(),e.loading&&o("loadingText",{defaultNode:l.createVNode("div",{class:"".concat(a.value,"__loading-tips")},[c(u.value.loadingText)])}),!e.loading&&S.value&&!v.value&&l.createVNode("div",{class:"".concat(a.value,"__empty")},[i("empty")||c(u.value.empty)]),!S.value&&O(k)])};return{renderPanel:B,panelStyle:x,cursorStyle:C,isVirtual:w,displayOptions:p,visibleData:y,renderTNodeJSX:i}},render:function(){return this.isVirtual?l.createVNode(l.Fragment,null,[this.renderTNodeJSX("panelTopContent"),l.createVNode("div",null,[l.createVNode("div",{style:this.cursorStyle},null),this.renderPanel(this.visibleData,this.panelStyle)]),this.renderTNodeJSX("panelBottomContent")]):l.createVNode(l.Fragment,null,[this.renderTNodeJSX("panelTopContent"),this.renderPanel(this.displayOptions),this.renderTNodeJSX("panelBottomContent")])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Lv(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Pse(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function Pse(t,e){if(t){if(typeof t=="string")return iP(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iP(t,e):void 0}}function iP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function oP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ise=function(e,n,r){var a=co(),i=l.ref([]),o=l.computed(function(){var d,f=0,h=((d=e.options)===null||d===void 0?void 0:d.map(function(T){var k=function(I){var A=n.value,M=A.value,$=A.label,U=A.disabled,F=Na(Na({},I),{},{index:f,label:je(I,$),value:je(I,M),disabled:je(I,U)||!1});return f++,F};return T.children?Na(Na({},T),{},{children:T.children.map(function(E){return k(E)})}):k(T)}))||[],v=a("Option"),p=a("OptionGroup");if(Ke(p)){var g=Lv(p),m;try{for(g.s();!(m=g.n()).done;){var y,b=m.value,w=Na(Na({group:(y=b.props)===null||y===void 0?void 0:y.label},b.props),{},{children:[]}),x=a("Option",b.children);if(Ke(x)){var C=Lv(x),S;try{for(C.s();!(S=C.n()).done;){var _=S.value;w.children.push(Na(Na({},_.props),{},{slots:_.children,index:f})),f++}}catch(T){C.e(T)}finally{C.f()}h.push(w)}}}catch(T){g.e(T)}finally{g.f()}}if(Ke(v)){var O=Lv(v),N;try{for(O.s();!(N=O.n()).done;){var B=N.value;h.push(Na(Na({},B.props),{},{slots:B.children,index:f})),f++}}catch(T){O.e(T)}finally{O.f()}}return h}),s=l.computed(function(){var d=[],f=function(v){var p=Lv(v),g;try{for(p.s();!(g=p.n()).done;){var m=g.value;m.children?f(m.children):d.push(m)}}catch(y){p.e(y)}finally{p.f()}};return f(o.value),d}),c=l.computed(function(){var d=new Map;return i.value.concat(s.value).forEach(function(f){d.set(f.value,f)}),d}),u=l.computed(function(){if(e.onSearch&&e.filterable||!r.value||!(e.filterable||Re(e.filter)))return o.value;var d=function(v){var p,g;return Re(e.filter)?e.filter("".concat(r.value),v):((p=v.label)===null||p===void 0||(g=p.toLowerCase)===null||g===void 0?void 0:g.call(p).indexOf("".concat(r.value).toLowerCase()))>-1},f=[];return o.value.forEach(function(h){h.children&&f.push(Na(Na({},h),{},{children:h.children.filter(d)})),d(h)&&f.push(h)}),f});return{options:o,optionsMap:c,optionsList:s,optionsCache:i,displayOptions:u}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ase(t){var e=t.displayOptions,n=t.optionsList,r=t.innerPopupVisible,a=t.setInnerPopupVisible,i=t.selectPanelRef,o=t.isFilterable,s=t.isRemoteSearch,c=t.getSelectedOptions,u=t.setInnerValue,d=t.innerValue,f=t.popupContentRef,h=t.multiple,v=t.max,p=l.ref(-1),g=l.ref([]),m=l.ref([]),y=ve(),b=function(x){var C,S,_=e.value.length,O=p.value;switch(x.code){case"ArrowUp":x.preventDefault(),p.value===-1?O=0:p.value===0||p.value>e.value.length-1?O=_-1:O--,(C=n.value[O])!==null&&C!==void 0&&C.disabled&&O--,p.value=O;break;case"ArrowDown":x.preventDefault(),p.value===-1||p.value>=_-1?O=0:O++,(S=n.value[O])!==null&&S!==void 0&&S.disabled&&O++,p.value=O;break;case"Enter":if(p.value===-1)break;var N=i.value.isVirtual&&o.value&&m.value.length?m.value:s.value?n.value:g.value;if(N.length||(N=n.value),!r.value){a(!0,{e:x});break}if(h){var T;if(p.value===-1)return;var k=(T=N[p.value])===null||T===void 0?void 0:T.value;if(!k)return;var E=eP(d.value,k);if(v>0&&E.value.length>v)return;var I=c(E.value);u(E.value,{option:I.find(function(A){return A.value==k}),selectedOptions:I,trigger:E.isCheck?"check":"uncheck",e:x}),g.value=[]}else{var B=c(N[p.value].value);u(N[p.value].value,{option:B==null?void 0:B[0],selectedOptions:c(N[p.value].value),trigger:"check",e:x}),a(!1,{e:x})}break;case"Escape":a(!1,{e:x});break}};return l.watch(r,function(w){w&&(p.value=-1,m.value=[],g.value=[])}),l.watch(p,function(w){var x,C=(x=i.value)===null||x===void 0||(x=x.innerRef)===null||x===void 0||(x=x.querySelector(".".concat(y.value,"-select-option")))===null||x===void 0?void 0:x.clientHeight,S=C*w;f.value.scrollTo({top:S,behavior:"smooth"})}),{hoverIndex:p,handleKeyDown:b,virtualFilteredOptions:m,filteredOptions:g}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nse=["overlayClassName"];function Dse(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Rse(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function Rse(t,e){if(t){if(typeof t=="string")return lP(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lP(t,e):void 0}}function lP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Mse=l.defineComponent({name:"TSelect",props:ri(ri({},da),{},{valueDisplayOptions:{type:Object}}),setup:function(e,n){var r=n.slots,a=ve(),i=Vt(),o=Pn(),s=We(),c=ve("select"),u=Qe("select"),d=u.globalConfig,f=u.t,h=l.toRefs(e),v=h.popupVisible,p=h.inputValue,g=h.modelValue,m=h.value,y=gn(p,e.defaultInputValue,e.onInputChange,"inputValue"),b=$e(y,2),w=b[0],x=b[1],C=Mt(m,g,e.defaultValue,e.onChange),S=$e(C,2),_=S[0],O=S[1],N=l.ref(null),B=l.ref(null),T=l.computed(function(){var Le,De,Ue;return{label:((Le=e.keys)===null||Le===void 0?void 0:Le.label)||"label",value:((De=e.keys)===null||De===void 0?void 0:De.value)||"value",disabled:((Ue=e.keys)===null||Ue===void 0?void 0:Ue.disabled)||"disabled"}}),k=Ise(e,T,w),E=k.optionsMap,I=k.optionsList,A=k.optionsCache,M=k.displayOptions,$=l.computed(function(){return _.value===void 0?e.multiple?[]:void 0:e.valueType==="object"?e.multiple?_.value.map(function(Le){return Le[T.value.value]}):_.value[T.value.value]:_.value}),U=function(De,Ue){if(e.valueType==="object"){var ze=T.value,Ve=ze.value,et=ze.label,vt=function(Yn){if(Yn!==void 0){var Rr=E.value.get(Yn);return V(V({},Ve,je(Rr,Ve)),et,je(Rr,et))}};De=e.multiple?De.map(function(_t){return vt(_t)}):vt(De)}De!==_.value&&(e.multiple&&!e.reserveKeyword&&x(""),O(De,ri({selectedOptions:ee(De)},Ue)))},F=gn(v,!1,function(Le,De){var Ue;(Ue=e.onPopupVisibleChange)===null||Ue===void 0||Ue.call(e,Le,De)},"popupVisible"),j=$e(F,2),W=j[0],H=j[1],J=l.computed(function(){var Le;return(Le=!e.multiple&&W.value&&Ay($.value,E)||e.placeholder)!==null&&Le!==void 0?Le:f(d.value.placeholder)}),Y=l.computed(function(){return e.multiple?Cse($.value,E):Ay($.value,E)}),D=l.computed(function(){var Le=e.multiple&&Ke($.value)?$.value.map(function(ze){var Ve;return{value:ze,label:(Ve=E.value.get(ze))===null||Ve===void 0?void 0:Ve.label}}):$.value,De={value:Le,onClose:e.multiple?function(ze){return K(ze)}:function(){}};if(e.multiple||Object.assign(De,{label:Y.value}),e.minCollapsedNum&&e.multiple){var Ue;return ri(ri({},De),{},{displayValue:Le==null||(Ue=Le.slice)===null||Ue===void 0?void 0:Ue.call(Le,0,e.minCollapsedNum)})}return De}),q=l.computed(function(){return!!(e.filterable||d.value.filterable||Re(e.filter))}),z=l.computed(function(){return!!((e.filterable||d.value.filterable)&&Re(e.onSearch))}),K=function(De,Ue){var ze,Ve=Br($.value),et=Ve[De];Ve.splice(De,1),U(Ve,{selectedOptions:ee(Ve),trigger:"tag-remove",e:Ue}),(ze=e.onRemove)===null||ze===void 0||ze.call(e,{value:et,data:E.value.get(et),e:Ue})},P=function(){var De;w.value&&((De=e.onCreate)===null||De===void 0||De.call(e,w.value),W.value||x(""))},R=l.computed(function(){var Le;return(Le=B.value)===null||Le===void 0?void 0:Le.popupRef.getOverlay()}),X=l.computed(function(){return I.value.filter(function(Le){return!Le.disabled&&!Le["check-all"]&&!Le.checkAll})}),ee=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.value;return I.value.filter(function(Ue){if(!Ue.checkAll)return Ke(De)?De.includes(Ue.value):De===Ue.value})},re=Ase({displayOptions:M,optionsList:I,innerPopupVisible:W,setInnerPopupVisible:H,selectPanelRef:N,isFilterable:q,isRemoteSearch:z,getSelectedOptions:ee,setInnerValue:U,innerValue:$,popupContentRef:R,multiple:e.multiple,max:e.max}),ae=re.hoverIndex,oe=re.virtualFilteredOptions,ce=re.handleKeyDown,ge=re.filteredOptions,pe=function(De){if(e.multiple){var Ue=$.value.filter(function(et){return I.value.find(function(vt){return vt.value===et&&vt.disabled})}),ze=X.value.map(function(et){return et.value}),Ve=Ee(De?new Set([].concat(Ee(ze),Ee(Ue))):Ue);U(Ve,{selectedOptions:ee(Ve),trigger:De?"check":"clear"})}},_e=l.computed(function(){var Le=X.value.map(function(Ue){return Ue.value}),De=Yl($.value,Le);return De.length}),be=l.computed(function(){return _e.value===X.value.length}),Se=l.computed(function(){return!be.value&&_e.value!==0}),Ne=l.computed(function(){return{max:e.max,multiple:e.multiple,hoverIndex:ae.value,selectValue:$.value,reserveKeyword:e.reserveKeyword,handleValueChange:U,handlerInputChange:x,handlePopupVisibleChange:H,handleCreate:P,size:e.size,popupContentRef:R,indeterminate:Se.value,isCheckAll:be.value,onCheckAllChange:pe,getSelectedOptions:ee,displayOptions:M.value,emitBlur:me}});l.provide(Mv,Ne);var Ae=function(){!e.multiple&&Ke(_.value)&&O(void 0,{selectedOptions:[],trigger:"default"}),e.multiple&&!Ke(_.value)&&O([],{selectedOptions:[],trigger:"default"})},Pe=fo(function(Le,De){var Ue,ze=De.e;(Ue=e.onSearch)===null||Ue===void 0||Ue.call(e,"".concat(Le),{e:ze})},300),Me=function(De,Ue){De&&!W.value&&H(!0,{e:Ue.e}),x(De),Pe("".concat(De),{e:Ue.e}),l.nextTick(function(){var ze,Ve;oe.value=(ze=N.value)===null||ze===void 0?void 0:ze.visibleData,ge.value=(Ve=N.value)===null||Ve===void 0?void 0:Ve.displayOptions})},me=function(De){var Ue;(Ue=e.onBlur)===null||Ue===void 0||Ue.call(e,{e:De,value:$.value})},ie=function(De,Ue){H(De,Ue),De&&Ue.trigger==="trigger-element-click"&&x("")},ye=function(){var Le=fn(mt.mark(function De(Ue){var ze,Ve,et;return mt.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(et=e.popupProps,!e.loading){_t.next=3;break}return _t.abrupt("return");case 3:et==null||(ze=et["on-scroll-to-bottom"])===null||ze===void 0||ze.call(et,Ue),et==null||(Ve=et.onScrollToBottom)===null||Ve===void 0||Ve.call(et,Ue);case 5:case"end":return _t.stop()}},De)}));return function(Ue){return Le.apply(this,arguments)}}(),Ce=function(De){if(e.multiple){var Ue=[],ze=Dse(De||[]),Ve;try{for(ze.s();!(Ve=ze.n()).done;){var et=Ve.value,vt=E.value.get(et);vt&&Ue.push(vt)}}catch(Yn){ze.e(Yn)}finally{ze.f()}A.value=Array.from(new Set([].concat(Ue,Ee(A.value))))}else{var _t=E.value.get(De);_t&&(A.value=Array.from(new Set([_t].concat(Ee(A.value)))))}};l.watch(_,function(Le){Ae(),l.nextTick(function(){Ce(Le)})},{immediate:!0}),l.watch(function(){return e.multiple},function(){Ae()});var Ge=function(De){var Ue;if(N.value){var ze=(Ue=N.value)===null||Ue===void 0||(Ue=Ue.innerRef)===null||Ue===void 0?void 0:Ue.querySelector(".".concat(a.value,"-is-selected"));l.nextTick(function(){if(ze&&De){var Ve=getComputedStyle(ze),et=Ve.paddingBottom,vt=getComputedStyle(De),_t=vt.marginBottom,Yn=parseInt(et,10)+parseInt(_t,10),Rr=ze.offsetTop-De.offsetTop-(De.clientHeight-ze.clientHeight)+Yn;De.scrollTop=Rr}})}};return l.provide("updateScrollTop",Ge),function(){var Le=e.popupProps||{},De=Le.overlayClassName,Ue=Vo(Le,Nse);return l.createVNode("div",{class:"".concat(c.value,"__wrap")},[l.createVNode(Ec,l.mergeProps({autoWidth:e.autoWidth,readonly:o.value,borderless:e.borderless,multiple:e.multiple,clearable:e.clearable,loading:e.loading,status:e.status,tips:e.tips,minCollapsedNum:e.minCollapsedNum,autofocus:e.autofocus,suffix:e.suffix,valueDisplayOptions:e.valueDisplayOptions},{ref:B,class:c.value,value:Y.value,disabled:i.value,popupVisible:W.value,inputValue:W.value?w.value:"",placeholder:"".concat(J.value),allowInput:q.value,"collapsed-items":e.collapsedItems,inputProps:ri(ri({size:e.size,autofocus:e.autofocus},e.inputProps),{},{onkeydown:ce}),tagInputProps:ri({size:e.size},e.tagInputProps),onTagChange:function(Ve,et){K(et.index)},tagProps:ri({},e.tagProps),popupProps:ri(ri({overlayClassName:["".concat(c.value,"__dropdown"),De]},Ue),{},{onScrollToBottom:ye}),label:e.label,prefixIcon:e.prefixIcon,suffix:e.suffix,suffixIcon:function(){return e.suffixIcon||r.suffixIcon?s("suffixIcon"):e.showArrow&&l.createVNode(ql,{overlayClassName:"".concat(c.value,"__right-icon"),isActive:W.value},null)},valueDisplay:function(){return s("valueDisplay",{params:D.value})},onPopupVisibleChange:ie,onInputChange:Me,onClear:function(Ve){var et,vt=Ve.e;U(e.multiple?[]:void 0,{option:null,selectedOptions:ee(e.multiple?[]:void 0),trigger:"clear",e:vt}),(et=e.onClear)===null||et===void 0||et.call(e,{e:vt})},onEnter:function(Ve,et){var vt=et.e;setTimeout(function(){var _t;(_t=e.onEnter)===null||_t===void 0||_t.call(e,{inputValue:"".concat(w.value),e:vt,value:$.value}),P()},0)},onBlur:function(Ve,et){var vt,_t=et.e;(vt=e.onBlur)===null||vt===void 0||vt.call(e,{e:_t,value:$.value})},onFocus:function(Ve,et){var vt,_t=et.e;(vt=e.onFocus)===null||vt===void 0||vt.call(e,{e:_t,value:$.value})}},e.selectInputProps),{label:r.label,prefixIcon:r.prefixIcon,suffix:r.suffix,panel:function(){return l.createVNode(Ese,l.mergeProps({ref:N},Ai(e,["size","multiple","empty","loading","loadingText","filterable","creatable","panelTopContent","panelBottomContent","filter","scroll"]),{inputValue:w.value}),r)},collapsedItems:r.collapsedItems})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jl=Be(Mse),cP=Be(Ny),Lse=Be(aP);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Fse={append:{type:[String,Function]},prepend:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bse=l.defineComponent({name:"TInputAdornment",inheritAttrs:!1,props:Fse,setup:function(e,n){var r=n.slots,a=ve("input-adornment"),i=We(),o=function(c,u,d){var f,h=Je(d)||Et(d);return!r[u]&&Je(d)&&!d?null:(r[u]?r[u](null).length===1&&typeof r[u](null)[0].children=="string"?f=l.createVNode("span",{class:"".concat(a.value,"__text")},[r[u](null)]):f=r[u](null):Re(d)?f=d(c):f=h?l.createVNode("span",{class:"".concat(a.value,"__text")},[d]):d,f&&l.createVNode("span",{class:"".concat(a.value,"__").concat(u)},[f]))};return function(){var s=o(l.h,"prepend",e.prepend),c=o(l.h,"append",e.append),u=i("default")||[null],d=[a.value,V(V({},"".concat(a.value,"--prepend"),s),"".concat(a.value,"--append"),c)];return!s&&!c?u[0]:l.createVNode("div",{class:d},[s,u[0],c])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var uP=Be(Bse);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jse={current:{type:Number,default:void 0},modelValue:{type:Number,default:void 0},defaultCurrent:{type:Number,default:1},disabled:Boolean,foldedMaxPageBtn:{type:Number,default:5},maxPageBtn:{type:Number,default:10},pageEllipsisMode:{type:String,default:"mid",validator:function(e){return e?["mid","both-ends"].includes(e):!0}},pageSize:{type:Number,default:void 0},defaultPageSize:{type:Number,default:10},pageSizeOptions:{type:Array,default:function(){return[5,10,20,50]}},selectProps:{type:Object},showFirstAndLastPageBtn:Boolean,showJumper:Boolean,showPageNumber:{type:Boolean,default:!0},showPageSize:{type:Boolean,default:!0},showPreviousAndNextBtn:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium"].includes(e):!0}},theme:{type:String,default:"default",validator:function(e){return e?["default","simple"].includes(e):!0}},total:{type:Number,default:0},totalContent:{type:[Boolean,Function],default:!0},onChange:Function,onCurrentChange:Function,onPageSizeChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $se(t,e,n,r){var a=Lt(),i=a.SIZE,o=a.STATUS,s=l.computed(function(){var w=Math.ceil(t.total/n.value);return w>0?w:1}),c=l.computed(function(){return["".concat(r.value),i.value[t.size],V(V({},o.value.disabled,t.disabled),"".concat(r.value,"-ie"),oo()<11),t.theme==="simple"?"".concat(r.value,"--simple"):""]}),u=l.computed(function(){return["".concat(r.value,"__total")]}),d=l.computed(function(){return["".concat(r.value,"__select")]}),f=l.computed(function(){return["".concat(r.value,"__btn"),"".concat(r.value,"__btn-prev"),V({},o.value.disabled,t.disabled||e.value===1)]}),h=l.computed(function(){return["".concat(r.value,"__btn"),"".concat(r.value,"__btn-next"),V({},o.value.disabled,t.disabled||e.value===s.value)]}),v=l.computed(function(){return["".concat(r.value,"__pager")]}),p=l.computed(function(){return["".concat(r.value,"__number"),"".concat(r.value,"__number--more"),V({},o.value.disabled,t.disabled)]}),g=l.computed(function(){return["".concat(r.value,"__jump")]}),m=l.computed(function(){return["".concat(r.value,"__input")]}),y=l.computed(function(){return["".concat(r.value,"__select")]}),b=function(x){return["".concat(r.value,"__number"),V(V({},o.value.disabled,t.disabled),o.value.current,e.value===x)]};return{pageCount:s,paginationClass:c,totalClass:u,sizerClass:d,preBtnClass:f,nextBtnClass:h,btnWrapClass:v,btnMoreClass:p,jumperClass:g,jumperInputClass:m,simpleClass:y,getButtonClass:b}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Use(t,e,n){var r=l.ref(!1),a=l.ref(!1),i=l.computed(function(){return Math.ceil((t.foldedMaxPageBtn-1)/2)}),o=l.computed(function(){return Math.floor((t.foldedMaxPageBtn-1)/2)}),s=l.computed(function(){return 2+i.value<n.value}),c=l.computed(function(){return e.value-1-o.value>n.value});return{prevMore:r,nextMore:a,curPageLeftCount:i,curPageRightCount:o,isPrevMoreShow:s,isNextMoreShow:c}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zse=Et;function Hse(t){return zse(t)&&t!=+t}var Wse=Hse,Kse=["pageCount"],Ql=1,qse=l.defineComponent({name:"TPagination",props:jse,setup:function(e){var n=l.getCurrentInstance(),r=n.emit,a=l.toRefs(e),i=a.modelValue,o=a.pageSize,s=a.current,c=We(),u=Mt(s,i,e.defaultCurrent,e.onCurrentChange,"current"),d=$e(u,2),f=d[0],h=d[1],v=gn(o,e.defaultPageSize,e.onPageSizeChange,"pageSize"),p=$e(v,2),g=p[0],m=p[1],y=Qe("pagination"),b=y.t,w=y.globalConfig,x=ve("pagination"),C=St({PageFirstIcon:wee,PageLastIcon:Cee,ChevronLeftIcon:pc,ChevronRightIcon:tl,ChevronLeftDoubleIcon:PV,ChevronRightDoubleIcon:RV,EllipsisIcon:GV}),S=C.PageFirstIcon,_=C.PageLastIcon,O=C.ChevronLeftIcon,N=C.ChevronRightIcon,B=C.ChevronLeftDoubleIcon,T=C.ChevronRightDoubleIcon,k=C.EllipsisIcon,E=$se(e,f,g,x),I=E.pageCount,A=Vo(E,Kse),M=Use(e,I,f),$=M.prevMore,U=M.isPrevMoreShow,F=M.curPageLeftCount,j=M.nextMore,W=M.isNextMoreShow,H=M.curPageRightCount,J=l.ref(f.value),Y=l.computed(function(){return I.value>e.maxPageBtn}),D=l.computed(function(){var ee=e.pageSizeOptions,re=ee.map(function(ae){return ot(ae)?ae:{label:b(w.value.itemsPerPage,{size:ae}),value:Number(ae)}});return re.sort(function(ae,oe){return ae.value-oe.value})}),q=l.computed(function(){return e.pageEllipsisMode==="mid"}),z=l.computed(function(){var ee=[],re,ae;if(Y.value)if(U.value&&W.value)re=f.value-F.value,ae=f.value+H.value;else{var oe=q.value?2:1,ce=q.value?I.value-1:I.value;U.value?re=Math.min(f.value-1,I.value-e.foldedMaxPageBtn+1):re=oe,W.value?ae=Math.max(f.value+1,e.foldedMaxPageBtn):ae=ce}else re=1,ae=I.value;for(var ge=re;ge<=ae;ge++)ee.push(ge);return ee});l.watch(function(){return I.value},function(){f.value>I.value&&(f.value=1)}),l.watch(function(){return f.value},function(ee){return J.value=ee});var K=function(re,ae){if(!e.disabled){var oe=re;if(re<Ql?oe=Ql:re>I.value&&(oe=I.value),f.value!==oe){var ce=f.value;if(ae=ae||{current:oe,previous:ce,pageSize:g.value},ae){var ge;h(oe,ae),(ge=e.onChange)===null||ge===void 0||ge.call(e,ae)}else r("update:modelValue",oe)}}},P=function(re){var ae={prevPage:function(){return K(f.value-1)},nextPage:function(){return K(f.value+1)},prevMorePage:function(){return K(Math.max(2,f.value-e.foldedMaxPageBtn))},nextMorePage:function(){return K(Math.min(f.value+e.foldedMaxPageBtn,I.value-1))}};ae[re]()},R=function(re){if(!e.disabled){var ae=parseInt(re,10),oe=1;ae>0&&(oe=Math.max(Math.ceil(e.total/ae),1));var ce=!1;f.value>oe&&(ce=!0);var ge={current:ce?oe:f.value,previous:f.value,pageSize:ae};if(m(ae,ge),ce)K(oe,ge);else{var pe;(pe=e.onChange)===null||pe===void 0||pe.call(e,ge)}}},X=function(re){var ae=Math.trunc(+re);Wse(ae)||(J.value=ae,K(ae))};return function(){var ee=e.total,re=e.pageSizeOptions,ae=e.size,oe=e.disabled,ce=e.showPageSize;if(I.value<1)return null;var ge=l.createVNode("div",{class:A.jumperClass.value},[b(w.value.jumpTo),l.createVNode(uP,{append:"/ ".concat(I.value," ").concat(b(w.value.page))},{default:function(){return[l.createVNode(jd,{class:A.jumperInputClass.value,modelValue:J.value,"onUpdate:modelValue":function(be){return J.value=be},onBlur:X,onEnter:X,max:I.value,min:Ql,size:ae,disabled:oe,theme:"normal",placeholder:""},null)]}})]);return l.createVNode("div",{class:A.paginationClass.value},[c("totalContent",l.createVNode("div",{class:A.totalClass.value},[b(w.value.total,{total:ee})])),ce&&re.length>0&&l.createVNode(Jl,l.mergeProps({size:ae,value:g,disabled:oe,class:A.sizerClass.value,autoWidth:!0,onChange:R,options:D.value},e.selectProps),null),e.showFirstAndLastPageBtn?l.createVNode("div",{class:A.preBtnClass.value,onClick:function(){return K(1)},disabled:e.disabled||e.current===Ql},[l.createVNode(S,null,null)]):null,e.showPreviousAndNextBtn?l.createVNode("div",{class:A.preBtnClass.value,onClick:function(){return P("prevPage")},disabled:oe||f.value===Ql},[l.createVNode(O,null,null)]):null,e.showPageNumber&&e.theme==="default"?l.createVNode("ul",{class:A.btnWrapClass.value},[Y.value&&q.value&&l.createVNode("li",{class:A.getButtonClass(1),onClick:function(){return K(Ql)}},[Ql]),Y.value&&U.value&&q.value?l.createVNode("li",{class:A.btnMoreClass.value,onClick:function(){return P("prevMorePage")},onMouseOver:function(){return $.value=!0},onMouseOut:function(){return $.value=!1}},[$.value?l.createVNode(B,null,null):l.createVNode(k,null,null)]):null,z.value.map(function(pe){return l.createVNode("li",{class:A.getButtonClass(pe),key:pe,onClick:function(){return K(pe)}},[pe])}),Y.value&&W.value&&q.value?l.createVNode("li",{class:A.btnMoreClass.value,onClick:function(){return P("nextMorePage")},onMouseOver:function(){return j.value=!0},onMouseOut:function(){return j.value=!1}},[j.value?l.createVNode(T,null,null):l.createVNode(k,null,null)]):null,Y.value&&q.value?l.createVNode("li",{class:A.getButtonClass(I.value),onClick:function(){return K(I.value)}},[I.value]):null]):null,e.theme==="simple"&&ge,e.showPreviousAndNextBtn?l.createVNode("div",{class:A.nextBtnClass.value,onClick:function(){return P("nextPage")},disabled:oe||f.value===I.value},[l.createVNode(N,null,null)]):null,e.showFirstAndLastPageBtn?l.createVNode("div",{class:A.nextBtnClass.value,onClick:function(){return K(I.value)},disabled:oe||f.value===I.value},[l.createVNode(_,null,null)]):null,e.theme==="default"&&e.showJumper&&ge])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gse={disabled:{type:[Boolean,Object]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},showCurrent:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},tips:{type:Object},variant:{type:String,default:"text",validator:function(e){return e?["text","outline"].includes(e):!0}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function dP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Yse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xse=l.defineComponent({name:"TPaginationMini",props:Yse({},Gse),setup:function(e){var n=ve("pagination-mini"),r=St({ChevronLeftIcon:pc,RoundIcon:Eee,ChevronRightIcon:tl,ChevronUpIcon:L2,ChevronDownIcon:dv}),a=r.ChevronLeftIcon,i=r.RoundIcon,o=r.ChevronRightIcon,s=r.ChevronUpIcon,c=r.ChevronDownIcon,u=l.computed(function(){return ot(e.tips)?e.tips:e.tips===!0?{prev:"上一页",current:"当前",next:"下一页"}:{}}),d=l.computed(function(){return ot(e.disabled)?e.disabled:e.disabled===!0?{prev:!0,current:!0,next:!0}:{prev:!1,current:!1,next:!1}});return function(){var f=[n.value,V({},"".concat(n.value,"--outline"),e.variant==="outline")];return l.createVNode("div",{class:f},[l.createVNode(zt,{title:u.value.prev,variant:e.variant,size:e.size,shape:"square",onClick:function(v){var p;return(p=e.onChange)===null||p===void 0?void 0:p.call(e,{e:v,trigger:"prev"})},icon:e.layout==="horizontal"?function(){return l.createVNode(a,null,null)}:function(){return l.createVNode(s,null,null)},class:"".concat(n.value,"__prev"),disabled:d.value.prev},null),e.showCurrent&&l.createVNode(zt,{title:u.value.current,variant:e.variant,size:e.size,shape:"square",onClick:function(v){var p;return(p=e.onChange)===null||p===void 0?void 0:p.call(e,{e:v,trigger:"current"})},icon:function(){return l.createVNode(i,null,null)},class:"".concat(n.value,"__current"),disabled:d.value.current},null),l.createVNode(zt,{title:u.value.next,variant:e.variant,size:e.size,shape:"square",onClick:function(v){var p;return(p=e.onChange)===null||p===void 0?void 0:p.call(e,{e:v,trigger:"next"})},icon:e.layout==="horizontal"?function(){return l.createVNode(o,null,null)}:function(){return l.createVNode(c,null,null)},class:"".concat(n.value,"__next"),disabled:d.value.next},null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Dy=Be(qse),fP=Be(Xse);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jse={current:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultCurrent:{type:[String,Number]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},options:{type:Array},readonly:{type:Boolean,default:void 0},separator:{type:String,default:"line",validator:function(e){return e?["line","dashed","arrow"].includes(e):!0}},sequence:{type:String,default:"positive",validator:function(e){return e?["positive","reverse"].includes(e):!0}},theme:{type:String,default:"default",validator:function(e){return e?["default","dot"].includes(e):!0}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var hP={content:{type:[String,Function],default:""},default:{type:[String,Function]},extra:{type:[String,Function]},icon:{type:[Boolean,Function],default:!0},status:{type:String,default:"default",validator:function(e){return e?["default","process","finish","error"].includes(e):!0}},title:{type:[String,Function],default:""},value:{type:[String,Number]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var gP=l.defineComponent({name:"TStepItem",props:pP(pP({},hP),{},{index:Number}),setup:function(e){var n=l.inject("StepsState",void 0),r=l.inject("StepsProps",void 0),a=Qe("steps"),i=a.globalConfig,o=St({CheckIcon:K0,CloseIcon:Za}),s=o.CheckIcon,c=o.CloseIcon,u=l.computed(function(){return e.status!=="process"&&!(r!=null&&r.readonly)}),d=function(w){if(u.value){var x=e.value===void 0?e.index:e.value;n.setCurrent(x,n.current,{e:w})}},f=ve("steps-item"),h=l.computed(function(){return V({},"".concat(f.value,"--").concat(e.status),e.status)}),v=l.computed(function(){return[f.value,h.value]}),p=l.computed(function(){return["".concat(f.value,"__icon"),h.value]}),g=We(),m=Ut(),y=function(){var w;if(r.theme==="default"){var x="";switch(e.status){case"finish":Re(i.value.checkIcon)?x=i.value.checkIcon(l.h):x=l.createVNode(s,null,null);break;case"error":Re(i.value.errorIcon)?x=i.value.errorIcon(l.h):x=l.createVNode(c,null,null);break;default:x=String(e.index+1);break}w=l.createVNode("span",{class:"".concat(f.value,"__icon--number")},[x])}return g("icon",w)};return function(){return l.createVNode("div",{class:v.value},[l.createVNode("div",{class:"".concat(f.value,"__inner ").concat(u.value?"".concat(f.value,"--clickable"):""),onClick:d},[l.createVNode("div",{class:p.value},[y()]),l.createVNode("div",{class:"".concat(f.value,"__content")},[l.createVNode("div",{class:"".concat(f.value,"__title")},[g("title")]),l.createVNode("div",{class:"".concat(f.value,"__description")},[m("default","content")]),l.createVNode("div",{class:"".concat(f.value,"__extra")},[g("extra")])])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Zse=l.defineComponent({name:"TSteps",props:Qse({},Jse),setup:function(e){var n=ve("steps"),r=l.toRefs(e),a=r.current,i=r.modelValue,o=Mt(a,i,e.defaultCurrent,e.onChange,"current"),s=$e(o,2),c=s[0],u=s[1];l.provide("StepsState",l.reactive({current:c,setCurrent:u})),l.provide("StepsProps",e);var d=l.ref({}),f=function(w,x){if(w.status&&w.status!=="default")return w.status;if(c.value==="FINISH"||w.value===void 0&&x<c.value)return"finish";if(w.value!==void 0){var C=d.value[c.value];if(C===void 0)return console.warn("TDesign Steps Warn: The current `value` is not exist."),"default";if(e.sequence==="positive"&&x<C||e.sequence==="reverse"&&x>C)return"finish"}var S=w.value===void 0?x:w.value;return S===c.value?"process":"default"},h=co(),v=function(w){var x=[];return w==null||w.forEach(function(C){var S=(C==null?void 0:C.props)||{},_=C==null?void 0:C.children;if(!(!S&&!_)){if(_&&ot(_))for(var O in _)O in hP&&!S[O]&&(S[O]=_[O]);e.sequence==="reverse"?x.unshift(S):x.push(S)}}),x},p=function(){var w,x;if((w=e.options)!==null&&w!==void 0&&w.length)x=e.sequence==="reverse"?e.options.slice().reverse():e.options;else{var C=h("StepItem");x=v(C)}return(x||[]).forEach(function(S,_){S.value!==void 0&&(d.value[S.value]=_)}),x},g=function(){var w=p();return w.map(function(x,C){var S=e.sequence==="reverse"?w.length-C-1:C;return C=x.value!==void 0?C:S,l.createVNode(gP,l.mergeProps(x,{index:S,status:f(x,C),key:x.value||C}),null)})},m=function(){var w=e.theme,x=p();return x.forEach(function(C){(C==null?void 0:C.icon)!==void 0&&(w="default")}),w},y=l.computed(function(){return[n.value,"".concat(n.value,"--").concat(e.layout),"".concat(n.value,"--").concat(m(),"-anchor"),"".concat(n.value,"--").concat(e.sequence),"".concat(n.value,"--").concat(e.separator,"-separator")]});return function(){return l.createVNode("div",{class:y.value},[g()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vse=Be(Zse),ece=Be(gP);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zl={list:{type:Array,default:function(){return[]}},offset:{type:Array},placement:{type:String,default:"right-bottom",validator:function(e){return e?["right-top","right-center","right-bottom","left-top","left-center","left-bottom"].includes(e):!0}},popupProps:{type:Object},shape:{type:String,default:"square",validator:function(e){return e?["square","round"].includes(e):!0}},type:{type:String,default:"normal",validator:function(e){return e?["normal","compact"].includes(e):!0}},width:{type:[String,Number]},onClick:Function,onHover:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Fv={icon:{type:Function},label:{type:[String,Function]},popup:{type:[String,Function]},popupProps:{type:Object},trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wP=l.defineComponent({name:"TStickyItem",props:bP(bP({},Fv),{},{type:Zl.type,shape:Zl.shape,placement:Zl.placement,basePopupProps:Object,baseWidth:Zl.width,onClick:Zl.onClick,onHover:Zl.onHover}),setup:function(e){var n=ve("sticky-item"),r=l.computed(function(){return["".concat(n.value),"".concat(n.value,"--").concat(e.type),"".concat(n.value,"--").concat(e.shape)]}),a=l.computed(function(){return["".concat(n.value,"__label")]}),i=l.computed(function(){return e.placement.indexOf("right")!==-1?"left":"right"}),o=l.computed(function(){var f={};if(e.baseWidth){var h=e.type==="normal"?"56px":"40px";f.margin="calc((".concat(e.baseWidth," - ").concat(h,")/2)")}return f}),s=function(h){var v={};Object.keys(Fv).forEach(function(p){return v[p]=e[p]}),e.onClick({e:h,item:v})},c=function(h){var v={};Object.keys(Fv).forEach(function(p){return v[p]=e[p]}),e.onHover({e:h,item:v})},u=We(),d=Object.assign({hideEmptyPopup:!0},e.basePopupProps,e.popupProps);return function(){return l.createVNode(sa,l.mergeProps({overlayInnerClassName:"".concat(ve("sticky-tool").value,"-popup-content"),trigger:e.trigger,placement:i.value,content:function(){return u("popup")}},d),{default:function(){return[l.createVNode("div",{class:r.value,style:o.value,onClick:s,onMouseenter:c},[u("icon"),e.type==="normal"?l.createVNode("div",{class:a.value},[u("label")]):null])]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tce=l.defineComponent({name:"TStickyTool",props:Ry({},Zl),setup:function(e){var n=ve("sticky-tool"),r=l.computed(function(){return[n.value,"".concat(n.value,"--").concat(e.shape)]}),a=l.computed(function(){var h=c();return e.width&&(h.width=typeof e.width=="number"?"".concat(e.width,"px"):e.width),h}),i=co(),o=function(){var v,p;if((v=e.list)!==null&&v!==void 0&&v.length)p=e.list;else{var g=i("StickyItem");p=s(g)}return p},s=function(v){var p=[];return v==null||v.forEach(function(g){var m=(g==null?void 0:g.props)||{},y=g==null?void 0:g.children;if(!(!m&&!y)){if(y&&ot(y))for(var b in y)b in Fv&&!m[b]&&(m[b]=y[b]);p.push(m)}}),p},c=function(){var v,p=e.offset?[80,24]:["80px","24px"];(v=e.offset)===null||v===void 0||v.forEach(function(m,y){p[y]=isNaN(Number(m))?"calc( ".concat(p[y],"px + ").concat(m,")"):"".concat(p[y]+m,"px")});var g={};return e.placement.split("-").forEach(function(m,y){m!=="center"?g[m]=p[y]:(g.top="50%",g.transform="translate(0, -50%)")}),g},u=function(v){var p;(p=e.onClick)===null||p===void 0||p.call(e,v)},d=function(v){var p;(p=e.onHover)===null||p===void 0||p.call(e,v)},f=function(){var v=o(),p=v.map(function(g,m){var y=e.type,b=e.shape,w=e.placement,x=e.popupProps,C=Ry(Ry({},g),{},{type:y,shape:b,placement:w,basePopupProps:x,baseWidth:a.value.width,onClick:u,onHover:d});return l.createVNode(wP,l.mergeProps(C,{key:m}),null)});return p};return function(){return l.createVNode("div",{class:r.value,style:a.value},[f()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var nce=Be(wP),rce=Be(tce);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ace={container:{type:[String,Function],default:"body"},content:{type:[String,Function]},default:{type:[String,Function]},duration:{type:Number,default:200},offset:{type:Array,default:function(){return["24px","80px"]}},shape:{type:String,default:"square",validator:function(e){return e?["circle","square"].includes(e):!0}},size:{type:String,default:"medium",validator:function(e){return e?["medium","small"].includes(e):!0}},target:{type:[String,Function],default:"body"},theme:{type:String,default:"light",validator:function(e){return e?["light","primary","dark"].includes(e):!0}},visibleHeight:{type:[String,Number],default:"200px"},onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ice=l.defineComponent({name:"TBackTop",props:ace,setup:function(e){var n=l.ref(!1),r=l.ref(null),a=ve("back-top"),i=Qe("alert"),o=i.classPrefix,s=St({BacktopIcon:yV}),c=s.BacktopIcon,u=Ut(),d=function(h){return typeof h=="string"&&(typeof document>"u"?"undefined":wt(document))!==void 0?h==="body"?document:document.querySelector(h):typeof h=="function"?h():null};return l.onMounted(function(){r.value=d(e.container);var f;if(typeof e.visibleHeight=="string"?f=Number(e.visibleHeight.replace("px","")):f=e.visibleHeight,f===0){n.value=!0;return}var h;r.value.scrollTop===void 0?h=document.documentElement:h=r.value,r.value.onscroll=function(){var v,p=(v=h)===null||v===void 0?void 0:v.scrollTop;p>=f&&(n.value=!0),p<f&&n.value&&(n.value=!1)}}),l.onBeforeUnmount(function(){r.value.onscroll=null}),function(){var f=e.theme,h=e.shape,v=e.size,p=e.target,g=e.duration,m=e.offset,y=e.container,b=gk(),w=b();w.length<1&&(w=null);var x=l.computed(function(){return V(V(V(V(V(V({},a.value,!0),"".concat(a.value,"--theme-").concat(f),!0),"".concat(a.value,"--").concat(h),!0),"".concat(a.value,"--show"),n.value),"".concat(o.value,"-size-s"),v==="small"),"".concat(o.value,"-size-m"),v==="medium")}),C=l.createVNode(l.Fragment,null,[l.createVNode(c,{class:"".concat(a.value,"__icon"),size:"24"},null),l.createVNode("span",{class:"".concat(a.value,"__text")},[l.createTextVNode("TOP")])]),S=function(){if(p===y||p==="body"||!p)return 0;var B=d(p);if(!B)return 0;var T=B.getBoundingClientRect().y;return T},_=function(B){var T,k=S();R0(k,{container:r.value,duration:g}),(T=e.onClick)===null||T===void 0||T.call(e,{e:B})},O=l.computed(function(){return{insetInlineEnd:m[0],insetBlockEnd:m[1]}});return l.createVNode("button",{type:"button",class:x.value,style:O.value,onClick:_},[u("content","default",C)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var oce=Be(ice);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lce={autofocus:Boolean,borderless:Boolean,clearable:Boolean,default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},filter:{type:Function},filterable:{type:Boolean,default:!0},highlightKeyword:{type:Boolean,default:!0},inputProps:{type:Object},options:{type:Array},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},textareaProps:{type:Object},tips:{type:[String,Function]},triggerElement:{type:[String,Function]},value:{type:String,default:void 0},modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},onBlur:Function,onChange:Function,onClear:Function,onCompositionend:Function,onCompositionstart:Function,onEnter:Function,onFocus:Function,onSelect:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var sce=Zo,CP=/[\\^$.*+?()[\]{}|]/g,cce=RegExp(CP.source);function uce(t){return t=sce(t),t&&cce.test(t)?t.replace(CP,"\\$&"):t}var _P=uce,SP=l.defineComponent({name:"HighlightOption",props:{content:String,keyword:String},setup:function(e){var n=ve(),r=l.computed(function(){var a,i=e.content,o=e.keyword;if(!i)return{list:[]};if(!Je(i)||!o)return{list:[i]};var s=new RegExp(_P(o),"i"),c=(a=i.match(s))===null||a===void 0?void 0:a[0];return{list:i.split(c),keyword:c}});return function(){var a=r.value,i=a.list,o=a.keyword;return l.createVNode("div",{class:"".concat(n.value,"-select-option__highlight-item")},[i.map(function(s,c){return c?[l.createVNode("b",{class:"".concat(n.value,"-is-highlight"),key:s+o},[o]),s]:s})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function kP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var dce=l.defineComponent({name:"AutoCompleteOptionList",props:{sizeClassNames:Object,value:String,size:String,options:Array,popupVisible:Boolean,highlightKeyword:Boolean,filterable:Boolean,filter:Function},emits:["select"],setup:function(e,n){var r=n.emit,a=n.slots,i=n.expose,o=l.ref(""),s=ve(),c=Qe("autoComplete"),u=c.globalConfig,d=l.computed(function(){return"".concat(s.value,"-select__list")}),f=l.computed(function(){return["".concat(s.value,"-select-option"),V({},e.sizeClassNames[e.size],e.size)]}),h=l.computed(function(){var y=(e.options||[]).map(function(w){var x={};return Je(w)?x={text:w,label:w}:(w.text&&!Je(w.text)&&st.warn("AutoComplete","`text` must be a string."),w.text?x=w:Je(w.label)?x=kP(kP({},w),{},{text:w.label}):st.warn("AutoComplete","one of `label` and `text` must be a existed string.")),x});if(e.filter)y=y.filter(function(w){return e.filter(e.value,w)});else if(e.filterable){var b=new RegExp(_P(e.value),"i");y=y.filter(function(w){return b.test(w.text)})}return y}),v=function(b){for(var w=b.target;w&&w.tagName!=="LI";)w=w.parentNode;var x=w.getAttribute("title");o.value=x,r("select",x,{e:b})},p=function(b){if(Nv.test(b.code)||Nv.test(b.key)){var w,x=h.value.findIndex(function(N){return N.text===o.value}),C=x-1<0?h.value.length-1:x-1;o.value=(w=h.value[C])===null||w===void 0?void 0:w.text}else if(Av.test(b.code)||Av.test(b.key)){var S,_=h.value.findIndex(function(N){return N.text===o.value}),O=_+1>=h.value.length?0:_+1;o.value=(S=h.value[O])===null||S===void 0?void 0:S.text}else(Py.test(b.code)||Py.test(b.key))&&o.value&&r("select",o.value,{e:b})},g=function(){qt(document,"keydown",p)},m=function(){At(document,"keydown",p)};return i({addKeyboardListener:g,removeKeyboardListener:m}),l.watch(function(){return e.popupVisible},function(){e.popupVisible?g():m()},{immediate:!0}),l.watch(function(){return e.value},function(){e.value||(o.value="")},{immediate:!0}),l.onBeforeUnmount(function(){m()}),function(){return h.value.length?l.createVNode("ul",{class:d.value},[h.value.map(function(y){var b=Ee(f.value);y.text===o.value&&b.push("".concat(s.value,"-select-option--hover"));var w=y.label;if(Re(y.label))w=y.label(l.h);else if(a.option){var x;w=(x=a.option)===null||x===void 0?void 0:x.call(a,{option:y})}var C=w||y.text;return l.createVNode("li",{key:y.text,class:b,title:y.text,onClick:v},[Je(C)&&e.highlightKeyword?l.createVNode(SP,{content:C,keyword:e.value},null):C])})]):l.createVNode("div",{className:"".concat(s.value,"-auto-complete__panel--empty")},[u.value.empty])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fce(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var hce=l.defineComponent({name:"TAutoComplete",props:lce,setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.value,o=a.modelValue,s=Mt(i,o,e.defaultValue,e.onChange),c=$e(s,2),u=c[0],d=c[1],f=Ut(),h=We(),v=wv(),p=v.classPrefix,g=v.sizeClassNames,m=Qe("input"),y=m.globalConfig,b=Vt(),w=Pn(),x=l.ref(),C=l.ref(),S=function(j,W){var H,J=j.getBoundingClientRect().width||j.offsetWidth||j.clientWidth,Y=W.getBoundingClientRect().width||W.offsetWidth||W.clientWidth;return Hr({width:J>=Y?"".concat(J,"px"):"auto"},(H=e.popupProps)===null||H===void 0?void 0:H.overlayInnerStyle)},_=l.computed(function(){return["".concat(p.value,"-auto-complete")]}),O=l.computed(function(){var F,j=["".concat(p.value,"-select__dropdown")];return(F=e.popupProps)!==null&&F!==void 0&&F.overlayClassName&&(j=j.concat(e.popupProps.overlayClassName)),j}),N=l.computed(function(){var F,j=["".concat(p.value,"-select__dropdown-inner")];return(F=e.popupProps)!==null&&F!==void 0&&F.overlayInnerClassName&&(j=j.concat(e.popupProps.overlayInnerClassName)),j}),B=function(j,W){d(j,W)},T=l.computed(function(){var F=Hr({value:u.value,size:e.size},e.inputProps);return F}),k=function(j,W){var H;w.value||b.value||(x.value=!0,(H=e.onFocus)===null||H===void 0||H.call(e,Hr(Hr({},W),{},{value:j})),l.nextTick(function(){var J;(J=C.value)===null||J===void 0||J.addKeyboardListener()}))},E=function(j,W){var H;(H=e.onBlur)===null||H===void 0||H.call(e,Hr(Hr({},W),{},{value:j}))},I=function(j,W){var H;(H=e.onCompositionend)===null||H===void 0||H.call(e,Hr(Hr({},W),{},{value:j}))},A=function(j,W){var H;(H=e.onCompositionstart)===null||H===void 0||H.call(e,Hr(Hr({},W),{},{value:j}))},M=function(j,W){var H;(H=e.onEnter)===null||H===void 0||H.call(e,Hr(Hr({},W),{},{value:j}))},$=function(j,W){var H;w.value||b.value||(x.value=!1,d(j,W),(H=e.onSelect)===null||H===void 0||H.call(e,j,W))},U=function(j,W){var H=W.trigger;w.value||b.value||H!=="trigger-element-click"&&(x.value=j)};return function(){var F,j,W=f("default","triggerElement")||l.createVNode(Va,l.mergeProps({borderless:e.borderless,placeholder:(F=e.placeholder)!==null&&F!==void 0?F:y.value.placeholder,tips:e.tips,status:e.status,readonly:w.value,disabled:b.value,autofocus:e.autofocus,clearable:e.clearable,onChange:B,onFocus:k,onBlur:E,onClear:e.onClear,onCompositionend:I,onCompositionstart:A,onEnter:M},T.value),r),H=l.createVNode(dce,{ref:C,value:u.value,options:e.options,size:e.size,sizeClassNames:g,onSelect:$,popupVisible:x.value,highlightKeyword:e.highlightKeyword,filterable:e.filterable,filter:e.filter},{option:r.option}),J=h("panelTopContent"),Y=h("panelBottomContent"),D=J||!((j=e.options)===null||j===void 0)&&j.length||Y?l.createVNode("div",{class:"".concat(p.value,"-auto-complete__panel")},[J,H,Y]):null,q=Hr(Hr({},e.popupProps),{},{overlayInnerStyle:S,overlayInnerClassName:N.value,overlayClassName:O.value});return l.createVNode("div",{class:_.value},[l.createVNode(sa,l.mergeProps({visible:x.value,onVisibleChange:U,trigger:"focus",placement:"bottom-left",hideEmptyPopup:!0,content:D?function(){return D}:null},q),fce(W)?W:{default:function(){return[W]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vce=Be(hce),pce=Be(SP);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function EP(t){var e=t.value,n=t.multiple,r=t.treeStore,a=t.showAllLevels;if(n||e!==0&&!e||Ke(e))return"";var i=r&&r.getNodes(e);if(!(i&&i.length))return e;var o=i&&i[0].getPath();return o&&o.length?a?o.map(function(s){return s.label}).join(" / "):o.at(-1).label:e}function gce(t){var e=t.value,n=t.multiple,r=t.treeStore,a=t.showAllLevels;if(!n)return[];if(n&&!Ke(e))return[];var i=r&&r.getNodes(e);return i?e.map(function(o){var s,c=r.getNodes(o);return a?Hd(c[0]):(s=c[0])===null||s===void 0?void 0:s.label}).filter(function(o){return!!o}):[]}function PP(t){var e=[];return t.forEach(function(n){e[n.level]?e[n.level].push(n):e[n.level]=[n]}),e}function Hd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/";return t==null?void 0:t.getPath().map(function(n){return n.label}).join(e)}var IP=function(e){var n=[];return Ke(e)?e.length>0&&ot(e[0])?n=e.map(function(r){return r.value}):e.length&&(n=e):My(e)||(ot(e)?n=[e.value]:n=[e]),n},mce=function(e,n,r){if(n==="single")return e;var a=e;return r?a.map(function(i){return i.at(-1)}):a.at(-1)};function My(t){return Et(t)&&!isNaN(t)?!1:jr(t)}function yce(t,e){var n=e.multiple,r=e.showAllLevels,a=e.valueType;return n&&!Ke(t)||!n&&Ke(t)&&a==="single"&&!r}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function bce(t,e,n){var r=n.disabled;return["".concat(t,"-cascader__icon"),V({},e.disabled,r)]}function AP(t,e,n){var r=n.checkStrictly,a=n.multiple,i=n.value,o=n.max,s=!r&&t.expanded&&(a?!t.isLeaf():!0)||r&&t.expanded,c=t.isLeaf(),u=t.disabled||a&&i.length>=o&&o!==0,d=t.checked||a&&!r&&t.expanded&&!c;return!a&&!r&&!c&&(d=t.expanded),[V(V(V({},e.selected,!u&&d),e.expanded,!u&&s),e.disabled,u)]}function wce(t,e,n,r,a){var i=a.size;return["".concat(t,"-cascader__item")].concat(Ee(AP(e,r,a)),[n[i],V(V({},"".concat(t,"-cascader__item--with-icon"),!!e.children),"".concat(t,"-cascader__item--leaf"),e.isLeaf())])}function xce(t,e,n,r){return["".concat(t,"-cascader__item-icon"),"".concat(t,"-icon")].concat(Ee(AP(e,n,r)))}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Cce(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var _ce={node:{type:Object,default:function(){return{}}},optionChild:{type:[Object,Array]},cascaderContext:{type:Object},onChange:Function,onClick:Function,onMouseenter:Function},Sce=l.defineComponent({name:"TCascaderItem",props:_ce,setup:function(e){var n=l.ref();el(n);var r=ve("cascader__item"),a=ve(),i=St({ChevronRightIcon:tl}),o=i.ChevronRightIcon,s=Lt(),c=s.STATUS,u=s.SIZE,d=l.computed(function(){return wce(a.value,e.node,u.value,c.value,e.cascaderContext)}),f=l.computed(function(){return xce(a.value,e.node,c.value,e.cascaderContext)});function h(m,y){var b=y.inputVal,w=b?Hd(m):m.label;if(b){for(var x=w.split(b),C=[],S=0;S<x.length&&(C.push(l.createVNode("span",{key:S},[x[S]])),S!==x.length-1);S++)C.push(l.createVNode("span",{key:"".concat(S,"filter"),class:"".concat(r.value,"-label--filter")},[b]));return C}return w}var v=function(y){return typeof y.label=="string"?y.label:null};function p(m,y){var b=h(m,y),w=l.createVNode("span",{title:y.inputVal?Hd(m):v(m),class:["".concat(r.value,"-label"),"".concat(r.value,"-label--ellipsis")],role:"label"},[b]);return w}function g(m,y){var b=y.checkProps,w=y.value,x=y.max,C=y.inputVal,S=h(m,y);return l.createVNode(Ni,l.mergeProps({checked:m.checked,indeterminate:m.indeterminate,disabled:m.isDisabled()||w.length>=x&&x!==0,name:String(m.value),stopLabelTrigger:!!m.children,title:C?Hd(m):v(m),onChange:function(){e.onChange()}},b),Cce(S)?S:{default:function(){return[S]}})}return function(){var m=e.cascaderContext,y=e.node,b=e.optionChild,w=b&&m.multiple;return l.createVNode("li",{ref:n,class:d.value,onClick:function(){return w?e.onChange():e.onClick()},onMouseenter:e.onMouseenter},[b||(m.multiple?g(y,m):p(y,m)),y.children&&(y.loading?l.createVNode(lr,{class:f.value,size:"small"},null):l.createVNode(o,{class:f.value},null))])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var al={autofocus:Boolean,borderless:Boolean,checkProps:{type:Object},checkStrictly:Boolean,clearable:Boolean,collapsedItems:{type:Function},disabled:{type:Boolean,default:void 0},empty:{type:[String,Function]},filter:{type:Function},filterable:Boolean,inputProps:{type:Object},keys:{type:Object},label:{type:[String,Function]},lazy:{type:Boolean,default:!0},load:{type:Function},loading:Boolean,loadingText:{type:[String,Function]},max:{type:Number,default:0},minCollapsedNum:{type:Number,default:0},multiple:Boolean,option:{type:Function},options:{type:Array,default:function(){return[]}},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},popupVisible:Boolean,prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},reserveKeyword:Boolean,selectInputProps:{type:Object},showAllLevels:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["large","medium","small"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},trigger:{type:String,default:"click",validator:function(e){return e?["click","hover"].includes(e):!0}},value:{type:[String,Number,Array],default:void 0},modelValue:{type:[String,Number,Array],default:void 0},defaultValue:{type:[String,Number,Array],default:function(){return[]}},valueDisplay:{type:[String,Function]},valueMode:{type:String,default:"onlyLeaf",validator:function(e){return e?["onlyLeaf","parentFirst","all"].includes(e):!0}},valueType:{type:String,default:"single",validator:function(e){return e?["single","full"].includes(e):!0}},onBlur:Function,onChange:Function,onFocus:Function,onPopupVisibleChange:Function,onRemove:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Tce(t,e,n,r){var a=r.checkStrictly,i=r.multiple,o=r.treeStore,s=r.setVisible,c=r.setValue,u=r.setTreeNodes,d=r.setExpend,f=r.value,h=r.max,v=r.valueType,p=n.disabled||i&&f.length>=h&&h!==0;if(!p){if(t===e){var g=n.setExpanded(!0);o.refreshNodes(),o.replaceExpanded(g);var m=o.getNodes().filter(function(x){return x.visible});u(m),i&&d(g)}if(!i&&(n.isLeaf()||a)&&e==="click"){o.resetChecked();var y=n.setChecked(!n.checked),b=$e(y,1),w=b[0];c(v==="single"?w:n.getPath().map(function(x){return x.value}),"check",n.getModel()),(!a||t==="hover")&&s(!1,{})}}}function kce(t,e){var n=e.disabled,r=e.max,a=e.inputVal,i=e.multiple,o=e.setVisible,s=e.setValue,c=e.treeNodes,u=e.treeStore,d=e.valueType;if(!(!t||n||t.disabled)){var f=t.setChecked(!t.isChecked());if(Et(r)&&r<0&&console.warn("TDesign Warn:","max should > 0"),!(f.length>r&&Et(r)&&r>0)){if(f.length===0){var h=u.getExpanded();setTimeout(function(){u.replaceExpanded(h),u.refreshNodes()},0)}i||o(!1,{});var v=c.every(function(g){return f.indexOf(g.value)>-1});a&&v&&o(!1,{});var p=d==="single"?f:f.map(function(g){return u.getNode(g).getPath().map(function(m){return m.value})});s(p,t.checked?"uncheck":"check",t.getModel())}}}function Oce(t){var e=t.setVisible,n=t.multiple,r=t.setValue;e(!1,{}),r(n?[]:"","clear")}function NP(t,e,n){var r=t.disabled,a=t.setValue,i=t.value,o=t.valueType,s=t.treeStore;if(!r)if(e!==void 0){var c=Br(i),u=c.splice(e,1),d=s.getNodes(u[0])[0],f=d.setChecked(!d.isChecked()),h=o==="single"?f:f.map(function(v){return s.getNode(v).getPath().map(function(p){return p.value})});a(h,"uncheck",d.getModel()),Re(n)&&n({value:f,node:d})}else Re(n)&&n({value:i,node:void 0})}var Ece=function(e,n,r,a){if(n){var i=[];if(e){var o=function(c){if(c.isLeaf()){if(Re(a))return a("".concat(e),c);var u=Hd(c,"");return u.indexOf("".concat(e))>-1}};i=n.nodes.filter(o)}else i=n.getNodes().filter(function(s){return s.visible});r(i)}},Pce=function(e,n,r){var a=IP(n);if(e){if(Ke(a)&&r.length===0){var i=new Map,o=$e(a,1),s=o[0];if(!My(s)){i.set(s,!0);var c=e.getNode(s);if(!c){e.refreshNodes();return}c.getParents().forEach(function(d){i.set(d.value,!0)});var u=Array.from(i.keys());e.replaceExpanded(u)}}e.getExpanded()&&r.length&&e.replaceExpanded(r),e.refreshNodes()}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var DP=l.defineComponent({name:"TCascaderSubPanel",props:{option:al.option,empty:al.empty,trigger:al.trigger,onChange:al.onChange,loading:al.loading,loadingText:al.loadingText,cascaderContext:{type:Object}},setup:function(e){var n=Qa(),r=ve("cascader"),a=Qe("cascader"),i=a.globalConfig,o=l.computed(function(){return PP(e.cascaderContext.treeNodes)}),s=function(h,v){var p=e.trigger,g=e.cascaderContext;Tce(p,v,h,g)},c=function(h,v){var p=h.data.content?Ul(h.data.content(l.h)):n("option",{params:{item:h.data,index:v}});return l.createVNode(Sce,{key:h.value,node:h,optionChild:p,cascaderContext:e.cascaderContext,onClick:function(){s(h,"click")},onMouseenter:function(){s(h,"hover")},onChange:function(){kce(h,e.cascaderContext)}},null)},u=function(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return l.createVNode("ul",{class:["".concat(r.value,"__menu"),"narrow-scrollbar",V(V({},"".concat(r.value,"__menu--segment"),p),"".concat(r.value,"__menu--filter"),v)],key:"".concat(r,"__menu").concat(g)},[h.map(function(m){return c(m,g)})])},d=function(){var h=e.cascaderContext,v=h.inputVal,p=h.treeNodes;return v?u(p,!0):o.value.map(function(g,m){return u(g,!1,m!==o.value.length-1,m)})};return function(){var f;return e.loading?f=n("loadingText",l.createVNode("div",{class:"".concat(r.value,"__panel--empty")},[i.value.loadingText])):f=o.value.length?d():n("empty",l.createVNode("div",{class:"".concat(r.value,"__panel--empty")},[i.value.empty])),l.createVNode("div",{class:["".concat(r.value,"__panel"),V({},"".concat(r.value,"--normal"),o.value.length&&!e.loading)]},[f])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ice=Yh,Ace=ky,Nce=Oy,Dce=oc,Rce=tc,Mce=Xh,Lce=200;function Fce(t,e,n,r){var a=-1,i=Ace,o=!0,s=t.length,c=[],u=e.length;if(!s)return c;n&&(e=Dce(e,Rce(n))),r?(i=Nce,o=!1):e.length>=Lce&&(i=Mce,o=!1,e=new Ice(e));e:for(;++a<s;){var d=t[a],f=n==null?d:n(d);if(d=r||d!==0?d:0,o&&f===f){for(var h=u;h--;)if(e[h]===f)continue e;c.push(d)}else i(e,f,r)||c.push(d)}return c}var RP=Fce;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bce=RP,jce=gy,$ce=zh,MP=Uh,Uce=$ce(function(t,e){return MP(t)?Bce(t,jce(e,1,MP,!0)):[]}),LP=Uce;function zce(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(a){a(n)}),(r=t.get("*"))&&r.slice().map(function(a){a(e,n)})}}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hce=Zo,Wce=0;function Kce(t){var e=++Wce;return Hce(t)+e}var qce=Kce;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var on="__tdesign_tree-node__",Gce=function(){function t(e){ho(this,t),V(this,on,void 0),this[on]=e}return vo(t,[{key:"value",get:function(){var n=this[on];return n.value}},{key:"label",get:function(){var n=this[on];return n.label}},{key:"data",get:function(){var n=this[on];return n.data}},{key:"actived",get:function(){var n=this[on];return n.actived}},{key:"expanded",get:function(){var n=this[on];return n.expanded}},{key:"checked",get:function(){var n=this[on];return n.checked}},{key:"indeterminate",get:function(){var n=this[on];return n.indeterminate}},{key:"loading",get:function(){var n=this[on];return n.loading}},{key:"disabled",get:function(){var n=this[on];return n.isDisabled()}},{key:"getLevel",value:function(){var n=this[on];return n.getLevel()}},{key:"getIndex",value:function(){var n=this[on];return n.getIndex()}},{key:"isFirst",value:function(){var n=this[on];return n.isFirst()}},{key:"isLast",value:function(){var n=this[on];return n.isLast()}},{key:"isLeaf",value:function(){var n=this[on];return n.isLeaf()}},{key:"insertBefore",value:function(n){var r=this[on];return r.insertBefore(n)}},{key:"insertAfter",value:function(n){var r=this[on];return r.insertAfter(n)}},{key:"appendData",value:function(n){var r=this[on];return r.append(n)}},{key:"getPath",value:function(){var n=this[on],r=n.getPath();return r.map(function(a){return a.getModel()})}},{key:"getParent",value:function(){var n,r=this[on];return(n=r.parent)===null||n===void 0?void 0:n.getModel()}},{key:"getParents",value:function(){var n=this[on],r=n.getParents();return r.map(function(a){return a.getModel()})}},{key:"getRoot",value:function(){var n=this[on],r=n.getRoot();return r==null?void 0:r.getModel()}},{key:"getSiblings",value:function(){var n=this[on],r=n.getSiblings();return r.map(function(a){return a.getModel()})}},{key:"getChildren",value:function(n){var r=this[on],a=!1,i=r.children;if(Array.isArray(i))if(i.length>0)if(n){var o=r.walk();o.shift(),a=o.map(function(s){return s.getModel()})}else a=i.map(function(s){return s.getModel()});else a=!1;else Nn(i)&&(a=i);return a}},{key:"remove",value:function(n){var r=this[on];if(!n){r.remove();return}var a=r.tree,i=a.getNode(n);if(!i){st.warnOnce("Tree","`".concat(n,"` is not exist"));return}var o=i.getParents(),s=o.map(function(c){return c.value});if(s.indexOf(r.value)<0){st.warnOnce("Tree","`".concat(n,"` is not a childNode of current node"));return}i.remove()}},{key:"setData",value:function(n){var r=this[on],a=["value","label","disabled"],i=Sr(n,["children"].concat(a)),o=r.tree.config.keys;a.forEach(function(s){var c=je(n,(o==null?void 0:o[s])||s);Bn(c)||(i[s]=c)}),Object.assign(r.data,i),Object.assign(r,i),r.update()}}])}();function Yce(t){var e=new Gce(t);return e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xce=Object.prototype.hasOwnProperty,BP={expandMutex:null,activable:null,checkable:null,draggable:null,loading:!1},Jce=Object.keys(BP),Qce=[].concat(Jce,["actived","expanded","checked"]),bo="__tdesign_id__",Pc=function(){function t(e,n,r){var a=this;ho(this,t),V(this,"tree",void 0),V(this,bo,void 0),V(this,"value",void 0),V(this,"label",void 0),V(this,"data",void 0),V(this,"parent",void 0),V(this,"children",void 0),V(this,"model",void 0),V(this,"vmIsLeaf",void 0),V(this,"vmIsFirst",void 0),V(this,"vmIsLast",void 0),V(this,"vmIsRest",void 0),V(this,"vmIsLocked",void 0),V(this,"expanded",void 0),V(this,"expandMutex",void 0),V(this,"actived",void 0),V(this,"activable",void 0),V(this,"checkable",void 0),V(this,"vmCheckable",void 0),V(this,"checked",void 0),V(this,"indeterminate",void 0),V(this,"disabled",void 0),V(this,"draggable",void 0),V(this,"visible",void 0),V(this,"level",void 0),V(this,"loading",void 0),this.data=n,this.tree=e;var i=e.config||{},o=i.prefix||"t",s=i.keys||{},c=s.children||"children",u=s.label||"label",d=s.value||"value",f=s.disabled||"disabled";this.model=null,this.children=null,this.level=0,this.vmCheckable=!1,this.vmIsLeaf=!1,this.vmIsFirst=!1,this.vmIsLast=!1,this.vmIsRest=!1,this.vmIsLocked=!1,this.visible=!1,this.actived=!1,this.checked=!1,this.indeterminate=!1,this.loading=!1,this.expanded=i.expandAll,this.activable=null,this.checkable=null,this.expandMutex=null,this.draggable=null,this[bo]=qce(o),this.value=zl(je(n,d))?this[bo]:je(n,d);var h=e.nodeMap,v=e.privateMap;h.get(this.value)&&st.warn("Tree","Dulplicate value: ".concat(this.value)),h.set(this.value,this),v.set(this[bo],this),this.label=je(n,u)||"",this.disabled=je(n,f)||!1;var p=n[c];p===!0&&(this.children=p),r&&r instanceof t?this.parent=r:this.parent=null,Qce.forEach(function(g){typeof n[g]<"u"&&(a[g]=n[g])}),this.initActived(),this.initExpanded(),Array.isArray(p)?this.append(p):p===!0&&!i.lazy&&this.loadChildren(),this.initChecked(),this.updateChecked(),this.update(),e.reflow(this)}return vo(t,[{key:"initChecked",value:function(){var n=this.tree,r=this.value,a=this.parent,i=n.checkedMap,o=n.config.checkStrictly;this.checked&&i.set(r,!0),!o&&a!==null&&a!==void 0&&a.checked&&i.set(r,!0)}},{key:"initExpanded",value:function(){var n=this.tree,r=this.expanded,a=n.config;Et(a.expandLevel)&&this.getLevel()<a.expandLevel&&(n.expandedMap.set(this.value,!0),r=!0),this.children===!0&&a.lazy&&(r=!1),r?n.expandedMap.set(this.value,!0):n.expandedMap.delete(this.value),this.expanded=r}},{key:"initActived",value:function(){var n=this.tree,r=this.actived;r&&this.isActivable()&&n.activedMap.set(this.value,!0)}},{key:"append",value:function(n){var r=this,a=[];if(Array.isArray(n)?a.push.apply(a,Ee(n)):a.push(n),!(a.length<=0)){Array.isArray(this.children)||(this.children=[]);var i=this.children,o=this.tree;a.forEach(function(s){var c=null;s instanceof t?(c=s,c.appendTo(r.tree,r)):(c=new t(r.tree,s,r),i.push(c))}),o.reflow(this),this.updateRelated()}}},{key:"appendTo",value:function(n,r,a){var i=this,o=r,s=-1;Et(a)&&(s=a);var c=(o==null?void 0:o.getParents())||[],u=c.some(function(b){return b===i});if(u)throw new Error("无法将父节点插入到子节点");if(o===this)throw new Error("无法将节点插入到本节点");if(Array.isArray(o==null?void 0:o.children)){var d=o==null?void 0:o.children[s];if(d&&d===this)return}var f=null;if(o instanceof t?(Array.isArray(o==null?void 0:o.children)||(o.children=[]),f=r.children):f=n.children,!Array.isArray(f))throw new Error("无法插入到目标位置，可插入的节点列表不存在");var h=f.length,v=this.getIndex();if(this.remove(),Et(a)){var p=a;if(o===this.parent){var g=f.length;g<h&&v<=p&&(p-=1)}f.splice(p,0,this)}else f.push(this);this.parent=o;var m=this.walk();m.forEach(function(b){var w=b;w.tree=n,n.nodeMap.set(w.value,w),n.privateMap.set(w[bo],w),w.expanded&&n.expandedMap.set(w.value,!0)});var y=(o==null?void 0:o.walk())||n.children.map(function(b){return b.walk()}).flat();y.forEach(function(b){b.update(),b.updateChecked()}),n.reflow()}},{key:"insert",value:function(n,r){var a=this.tree,i=this.parent,o=this.getSiblings(),s=null;n instanceof t?(s=n,s.appendTo(a,i,r)):n&&(s=new t(a,n,i),Et(r)&&o.splice(r,0,s),o.forEach(function(c){c.update()})),a.reflow()}},{key:"insertBefore",value:function(n){var r=this.getIndex();this.insert(n,r)}},{key:"insertAfter",value:function(n){var r=this.getIndex();this.insert(n,r+1)}},{key:"remove",value:function(){var n=this.tree,r=this.walk(),a=this.getSiblings(),i=this.getIndex();Array.isArray(a)&&a.splice(i,1),r.forEach(function(o){o.clean()}),a.forEach(function(o){o.update()}),this.updateParents(),n.reflow()}},{key:"clean",value:function(){var n=this.tree,r=this.value;n.activedMap.delete(r),n.checkedMap.delete(r),n.expandedMap.delete(r),n.nodeMap.delete(r),n.filterMap.delete(r),n.privateMap.delete(this[bo])}},{key:"loadChildren",value:function(){var e=fn(mt.mark(function r(){var a,i;return mt.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=je(this,"tree.config")||{},!(this.children===!0&&!this.loading)){s.next=13;break}if(!Re(a.load)){s.next=13;break}return this.loading=!0,this.update(),i=[],s.next=8,a.load(this);case 8:i=s.sent,this.tree.emit("load",{node:this,data:i}),this.loading=!1,Array.isArray(i)&&i.length>0?this.append(i):this.children=!1,this.update();case 13:case"end":return s.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n}()},{key:"set",value:function(n){var r=this,a=this.tree,i=Object.keys(n);i.forEach(function(o){(Xce.call(BP,o)||o==="label")&&(r[o]=n[o]),o==="disabled"&&r.setDisabled(n[o])}),a.updated(this)}},{key:"getParent",value:function(){return this.parent}},{key:"getParents",value:function(){for(var n=[],r=this.parent;r;)n.push(r),r=r.parent;return n}},{key:"getSiblings",value:function(){var n=this.parent,r=this.tree,a=[];return n?Array.isArray(n.children)&&(a=n.children):r&&(a=r.children),a}},{key:"getChildren",value:function(n){var r=!1,a=this.children;if(Array.isArray(a))if(a.length>0)if(n){var i=this.walk();i.shift(),r=i.map(function(o){return o.getModel()})}else r=a.map(function(o){return o.getModel()});else r=!1;else Nn(a)&&(r=a);return r}},{key:"getRoot",value:function(){var n=this.getParents();return n[n.length-1]||null}},{key:"getIndex",value:function(){var n=this.getSiblings();return n.indexOf(this)}},{key:"getPath",value:function(){var n=this.getParents();return n.unshift(this),n.reverse()}},{key:"getLevel",value:function(){var n=this.getParents();return n.length}},{key:"isRest",value:function(){var n=this.tree,r=n.config,a=n.filterMap,i=n.hasFilter,o=!1;if(i){var s=this.getModel();o=r.filter(s)}return o?a.set(this.value,!0):a.get(this.value)&&a.delete(this.value),o}},{key:"isVisible",value:function(){var n=this.tree,r=n.nodeMap,a=n.hasFilter,i=n.config,o=i.allowFoldNodeOnFilter,s=!0;if(!r.get(this.value))return!1;if(a&&!o)return s=this.vmIsLocked||this.vmIsRest,s;var c=!0,u=this.getParents();return u.length>0&&(c=u.every(function(d){return d.expanded})),a?s=c&&(this.vmIsRest||this.vmIsLocked):s=c,s}},{key:"isDisabledState",value:function(){var n=this.tree,r=this.parent,a=n.config,i=a.disabled,o=a.disableCheck,s=a.checkStrictly,c=i||!1;return this.disabled&&(c=!0),!s&&r!==null&&r!==void 0&&r.isDisabledState()&&(c=!0),typeof o=="boolean"?o&&(c=!0):typeof o=="function"&&o(this.getModel())&&(c=!0),c}},{key:"isDisabled",value:function(){var n=this.tree,r=n.hasFilter,a=n.config,i=a.allowFoldNodeOnFilter;return r&&!i&&this.vmIsLocked&&!this.vmIsRest?!0:this.isDisabledState()}},{key:"isDraggable",value:function(){var n=!!je(this,"tree.config.draggable");return typeof this.draggable=="boolean"&&(n=this.draggable),n}},{key:"isExpandMutex",value:function(){var n=!!je(this,"tree.config.expandMutex");return typeof this.expandMutex=="boolean"&&(n=this.expandMutex),n}},{key:"isActivable",value:function(){var n=!!je(this,"tree.config.activable");return typeof this.activable=="boolean"&&(n=this.activable),n}},{key:"isCheckable",value:function(){var n=!!je(this,"tree.config.checkable");return typeof this.checkable=="boolean"&&(n=this.checkable),n}},{key:"isActived",value:function(n){var r=this.tree,a=this.value,i=n||r.activedMap;return!!(r.nodeMap.get(a)&&i.get(a))}},{key:"isExpanded",value:function(n){var r=this.tree,a=this.value,i=this.vmIsLocked,o=r.hasFilter,s=r.config,c=s.allowFoldNodeOnFilter;if(o&&!c&&i)return!0;var u=n||r.expandedMap;return!!(r.nodeMap.get(a)&&u.get(a))}},{key:"isChecked",value:function(n){var r=this.children,a=this.tree,i=this.value,o=a.config,s=o.checkStrictly,c=o.valueMode;if(!a.nodeMap.get(i)||!this.isCheckable())return!1;var u=n||a.checkedMap;if(s)return!!u.get(i);var d=!1;if(u.get(i)&&(c!=="onlyLeaf"||this.isLeaf()))return!0;if(Array.isArray(r)&&r.length>0)d=r.every(function(h){var v=h.isChecked(u);return v});else{var f=this.getParents();d=f.some(function(h){return u.get(h.value)})}return d}},{key:"isIndeterminate",value:function(){var n=this.children,r=this.tree,a=this.value,i=r.config.checkStrictly;if(!r.nodeMap.get(a)||!this.isCheckable()||i||!Array.isArray(n))return!1;var o=null,s=n.some(function(c){return!!(c.isIndeterminate()||(P0(o)&&(o=c.isChecked()),o!==c.isChecked()))});return s}},{key:"isFirst",value:function(){var n=this.getSiblings();return n[0]===this}},{key:"isLast",value:function(){var n=this.getSiblings();return n[n.length-1]===this}},{key:"isLeaf",value:function(){var n=!1;return Array.isArray(this.children)?n=this.children.length<=0:n=!this.children,n}},{key:"lock",value:function(n){this.vmIsLocked=n,this.expanded=this.isExpanded(),this.visible=this.isVisible()}},{key:"afterExpanded",value:function(){this.update(),this.expanded&&this.children===!0&&this.loadChildren(),this.updateChildren()}},{key:"toggleExpanded",value:function(n){return this.setExpanded(!this.isExpanded(),n)}},{key:"setExpanded",value:function(n,r){var a=this.tree,i=a.config,o=Wd({directly:!1},r),s=a.expandedMap;if(o.directly||(s=new Map(a.expandedMap)),n){var c=[];c.push(this),i.expandParent&&this.getParents().forEach(function(u){c.push(u)}),c.forEach(function(u){var d=!1;if(u.parent)d=u.parent.isExpandMutex();else{var f;d=a==null||(f=a.config)===null||f===void 0?void 0:f.expandMutex}if(d){var h=u.getSiblings();h.forEach(function(v){s.delete(v.value),v.update(),v.updateChildren()})}s.set(u.value,!0),u.update(),u.updateChildren()})}else s.delete(this.value);return o.directly&&this.afterExpanded(),a.getExpanded(s)}},{key:"toggleActived",value:function(n){return this.setActived(!this.isActived(),n)}},{key:"setActived",value:function(n,r){var a=this.tree,i=Wd({isAction:!0,directly:!1},r),o=a.config||{},s=a.activedMap;if(i.directly||(s=new Map(a.activedMap)),i.isAction&&this.isDisabledState())return a.getActived(s);if(this.isActivable())if(n){var c=Array.from(s.keys());o.activeMultiple||s.clear(),c.forEach(function(u){var d=a.getNode(u);d==null||d.update()}),s.set(this.value,!0)}else s.delete(this.value);return this.update(),a.getActived(s)}},{key:"hasEnableUnCheckedChild",value:function(){var n=this.children;if(!Array.isArray(n)||n.length<=0)return!1;var r=!1;return n.some(function(a){return a.isDisabledState()||a.isChecked()?!1:a.isIndeterminate()?a.hasEnableUnCheckedChild()?(r=!0,!0):!1:(r=!0,!0)}),r}},{key:"toggleChecked",value:function(n){if(this.isIndeterminate()){var r=this.hasEnableUnCheckedChild();return this.setChecked(r,n)}return this.setChecked(!this.isChecked(),n)}},{key:"setChecked",value:function(n,r){var a=this.tree,i=a.config||{},o=Wd({isAction:!0,directly:!1},r),s=a.checkedMap;if(o.directly||(s=new Map(a.checkedMap)),!this.isCheckable()||o.isAction&&this.isDisabledState())return a.getChecked(s);if(n===this.isChecked()){var c=this.isIndeterminate()&&!this.hasEnableUnCheckedChild();if(!c)return a.getChecked(s)}if(n?s.set(this.value,!0):s.delete(this.value),i.checkStrictly)o.directly&&this.updateChecked();else if(this.spreadChildrenChecked(n,s,o),this.spreadParentChecked(n,s,o),o.directly){var u=a.getRelatedNodes([this.value],{reverse:!0});u.forEach(function(d){d.updateChecked()})}return a.getChecked(s)}},{key:"spreadParentChecked",value:function(n,r,a){var i=Wd({isAction:!0,directly:!1},a);if(this.isCheckable()){var o=this.children;Array.isArray(o)&&o.length>0&&r.delete(this.value);var s=this.parent;s&&s.spreadParentChecked(n,r,i)}}},{key:"spreadChildrenChecked",value:function(n,r,a){var i=Wd({isAction:!0,directly:!1},a);if(this.isCheckable()&&!(i.isAction&&this.isDisabledState())){var o=this.children;Array.isArray(o)&&(o.length<=0||(r.delete(this.value),o.forEach(function(s){i.isAction&&s.isDisabledState()||(n?r.set(s.value,!0):r.delete(s.value),s.spreadChildrenChecked(n,r,i))})))}}},{key:"setDisabled",value:function(n){this.disabled=n,this.update(),this.updateChildren()}},{key:"update",value:function(){this.level=this.getLevel(),this.vmIsFirst=this.isFirst(),this.vmIsLast=this.isLast(),this.vmIsLeaf=this.isLeaf(),this.vmCheckable=this.isCheckable(),this.vmIsRest=this.isRest(),this.actived=this.isActived(),this.expanded=this.isExpanded(),this.visible=this.isVisible(),this.tree.updated(this)}},{key:"updateChecked",value:function(){var n=this.tree,r=this.value,a=n.checkedMap;this.checked=this.isChecked(),this.indeterminate=this.isIndeterminate(),this.checked&&a.set(r,!0),n.updated(this)}},{key:"updateChildren",value:function(){var n=this;this.spreadChildren(function(r){r!==n&&(r.update(),r.updateChecked())})}},{key:"updateParents",value:function(){var n=this;this.spreadParents(function(r){r!==n&&(r.update(),r.updateChecked())})}},{key:"updateRelated",value:function(){var n=this.tree,r=n.getRelatedNodes([this.value]);r.forEach(function(a){a.update(),a.updateChecked()})}},{key:"walk",value:function(){var n=[];return this.spreadChildren(function(r){n.push(r)}),n}},{key:"spreadChildren",value:function(n){n(this);var r=this.children;Array.isArray(r)&&r.length>0&&r.forEach(function(a){a==null||a.spreadChildren(n)})}},{key:"spreadParents",value:function(n){n(this);var r=this.parent;r&&(r==null||r.spreadParents(n))}},{key:"getModel",value:function(){var n=this.model;return n||(n=Yce(this),this.model=n),n}}])}();/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ly(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zce(t){var e=Promise.resolve();return e.then(t),e}var $P=function(){function t(e){ho(this,t),V(this,"children",void 0),V(this,"nodes",void 0),V(this,"nodeMap",void 0),V(this,"privateMap",void 0),V(this,"config",void 0),V(this,"activedMap",void 0),V(this,"updatedMap",void 0),V(this,"checkedMap",void 0),V(this,"expandedMap",void 0),V(this,"filterMap",void 0),V(this,"hasFilter",void 0),V(this,"emitter",void 0),V(this,"updateTick",void 0),V(this,"shouldReflow",void 0),V(this,"prevFilter",void 0);var n=Ly({prefix:"t",keys:{},expandAll:!1,expandLevel:0,expandMutex:!1,expandParent:!1,activable:!1,activeMultiple:!1,checkable:!1,checkStrictly:!1,disabled:!1,disableCheck:!1,draggable:!1,load:null,lazy:!1,valueMode:"onlyLeaf",filter:null,allowFoldNodeOnFilter:!1,onLoad:null,onReflow:null,onUpdate:null},e);this.config=n,this.nodes=[],this.children=[],this.nodeMap=new Map,this.privateMap=new Map,this.activedMap=new Map,this.expandedMap=new Map,this.checkedMap=new Map,this.updatedMap=new Map,this.filterMap=new Map,this.prevFilter=null,this.updateTick=null,this.shouldReflow=!1,this.hasFilter=Re(n.filter),this.emitter=zce()}return vo(t,[{key:"setConfig",value:function(n){var r=this.config,a=!1;Object.keys(n).forEach(function(i){var o=n[i];o!==r[i]&&(a=!0,r[i]=o)}),this.hasFilter=Re(r.filter),a&&this.refreshState()}},{key:"getChildren",value:function(){return this.children}},{key:"getNode",value:function(n){var r=null;return Je(n)||Et(n)?r=this.nodeMap.get(n):n instanceof Pc&&(r=this.nodeMap.get(n.value)),r||(r=null),r}},{key:"getIndex",value:function(n){return this.nodes.indexOf(n)}},{key:"getParent",value:function(n){var r=null,a=this.getNode(n);return a&&(r=a.getParent()),r}},{key:"getParents",value:function(n){var r=this.getNode(n),a=[];return r&&(a=r.getParents()),a}},{key:"getNodeIndex",value:function(n){var r=this.getNode(n),a=-1;return r&&(a=r.getIndex()),a}},{key:"getNodes",value:function(n,r){var a=[],i="";if(Je(n)||Et(n)?i=n:n instanceof Pc&&(i=n.value),!i&&i!==0)a=this.nodes.slice(0);else{var o=this.getNode(i);o&&(a=o.walk())}if(r){var s=Ly({filter:null,level:1/0},r);Et(s.level)&&s.level!==1/0&&(a=a.filter(function(c){return c.level<=s.level})),Re(s.filter)&&(a=a.filter(function(c){var u=c.getModel();return s.filter(u)})),Hh(s.props)&&(a=a.filter(function(c){var u=Object.keys(s.props).every(function(d){var f=c[d]===s.props[d];return f});return u}))}return a}},{key:"append",value:function(n){var r=this;n.forEach(function(a){var i=new Pc(r,a);r.children.push(i)}),this.reflow()}},{key:"reload",value:function(n){this.removeAll(),this.append(n)}},{key:"parseNodeData",value:function(n,r){var a="",i=null,o=null;Je(n)||Et(n)?(a=n,i=this.getNode(a),o=r):n instanceof Pc&&r?(i=n,o=r):o=n;var s={node:i,data:o};return s}},{key:"appendNodes",value:function(n,r){var a=this.parseNodeData(n,r);a.data&&(a.node?(a.data instanceof Pc?a.data.appendTo(this,a.node):Ke(a.data)?a.node.append(a.data):a.node.append([a.data]),a.node.updateRelated()):a.data instanceof Pc?a.data.appendTo(this):Array.isArray(a.data)?this.append(a.data):this.append([a.data]))}},{key:"insertBefore",value:function(n,r){var a=this.getNode(n);a&&a.insertBefore(r)}},{key:"insertAfter",value:function(n,r){var a=this.getNode(n);a&&a.insertAfter(r)}},{key:"refreshNodes",value:function(){var n=this.children,r=this.nodes;r.length=0,n.forEach(function(a){var i=a.walk();Array.prototype.push.apply(r,i)})}},{key:"reflow",value:function(n){this.shouldReflow=!0,this.updated(n)}},{key:"updated",value:function(n){var r=this,a=this.updatedMap;n?a.set(n[bo],"changed"):this.getNodes().forEach(function(i){a.set(i[bo],"changed")}),!this.updateTick&&(this.updateTick=Zce(function(){r.updateTick=null,r.shouldReflow&&(r.refreshNodes(),r.emit("reflow")),r.lockFilterPathNodes();var i="t".concat(new Date().getTime()),o=Array.from(a.keys()),s=o.map(function(c){return a.set(c,i),r.privateMap.get(c)});r.emit("update",{nodes:s,map:a}),r.shouldReflow=!1,a.clear()}))}},{key:"getActived",value:function(n){var r=n||this.activedMap;return Array.from(r.keys())}},{key:"getActivedNodes",value:function(n){var r=this.getNodes(n);return r=r.filter(function(a){return a.isActived()}),r}},{key:"replaceActived",value:function(n){this.resetActived(),this.setActived(n)}},{key:"setActived",value:function(n){var r=this,a=this.config.activeMultiple,i=n.slice(0);a||(i.length=1),i.forEach(function(o){r.activedMap.set(o,!0);var s=r.getNode(o);s&&s.update()})}},{key:"resetActived",value:function(){var n=this.getActived();this.activedMap.clear();var r=this.getRelatedNodes(n);r.forEach(function(a){a.update()})}},{key:"getExpanded",value:function(n){var r=n||this.expandedMap;return Array.from(r.keys())}},{key:"replaceExpanded",value:function(n){var r=this.getExpanded(),a=LP(n,r),i=LP(r,n);this.setExpandedDirectly(i,!1),this.updateExpanded(i),this.setExpanded(a)}},{key:"setExpanded",value:function(n){this.setExpandedDirectly(n),this.updateExpanded(n)}},{key:"setExpandedDirectly",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n.forEach(function(i){a?r.expandedMap.set(i,!0):r.expandedMap.delete(i);var o=r.getNode(i);o&&o.afterExpanded()})}},{key:"resetExpanded",value:function(){var n=this.getExpanded();this.expandedMap.clear(),this.updateExpanded(n)}},{key:"updateExpanded",value:function(n){var r=this.getRelatedNodes(n,{withParents:!1});r.forEach(function(a){a.update()})}},{key:"getChecked",value:function(n){var r=this.nodeMap,a=this.config,i=a.valueMode,o=a.checkStrictly,s=[],c=n||this.checkedMap;return r.forEach(function(u){u.isChecked(c)&&(i==="parentFirst"&&!o?(!u.parent||!u.parent.isChecked(c))&&s.push(u.value):i==="onlyLeaf"&&!o?u.isLeaf()&&s.push(u.value):s.push(u.value))}),s}},{key:"getCheckedNodes",value:function(n){var r=this.getNodes(n);return r=r.filter(function(a){return a.isChecked()}),r}},{key:"replaceChecked",value:function(n){this.resetChecked(),this.setChecked(n)}},{key:"setChecked",value:function(n){var r=this,a=this.config,i=a.checkStrictly,o=a.checkable;if(o&&(n.forEach(function(u){var d=r.getNode(u);if(d)if(i)r.checkedMap.set(u,!0),d.updateChecked();else{var f=d.walk();f.forEach(function(h){r.checkedMap.set(h.value,!0)})}}),!i)){var s=this.getChecked(),c=this.getRelatedNodes(s);c.forEach(function(u){u.updateChecked()})}}},{key:"resetChecked",value:function(){var n=this.getChecked(),r=this.getRelatedNodes(n);this.checkedMap.clear(),r.forEach(function(a){a.updateChecked()})}},{key:"refreshState",value:function(){var n=this.nodeMap;n.forEach(function(r){r.update()})}},{key:"updateAll",value:function(){var n=this.nodeMap;n.forEach(function(r){r.update(),r.updateChecked()})}},{key:"remove",value:function(n){var r=this.getNode(n);r&&r.remove()}},{key:"removeAll",value:function(){this.expandedMap.clear(),this.checkedMap.clear(),this.activedMap.clear(),this.filterMap.clear(),this.nodeMap.clear(),this.privateMap.clear(),this.updatedMap.clear(),this.nodes=[],this.children=[],this.reflow()}},{key:"getRelatedNodes",value:function(n,r){var a=this,i=Ly({reverse:!1,withParents:!0},r),o=new Map;n.forEach(function(c){if(!o.get(c)){var u=a.getNode(c);if(u){var d=u.getParents().reverse(),f=u.walk(),h=[];i.withParents?h=d.concat(f):h=f,h.forEach(function(v){o.set(v.value,v)})}}});var s=Array.from(o.values());return i.reverse&&(s=s.reverse()),s}},{key:"emit",value:function(n,r){var a=this.config,i=this.emitter,o=Ti("on-".concat(n)),s=a[o];Re(s)&&s(r),i.emit(n,r)}},{key:"lockFilterPathNodes",value:function(){var n=this.config,r=this.getNodes();this.prevFilter&&r.forEach(function(i){i.vmIsLocked&&i.lock(!1)});var a=n.filter;!a||!Re(a)||(this.prevFilter=n.filter,r.reverse().forEach(function(i){var o=i.getParent();o&&(i.vmIsRest||i.vmIsLocked)&&(o.vmIsLocked||o.lock(!0))}))}}])}();/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function UP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Vce=function(e,n,r,a){var i=l.reactive({treeStore:null,inputVal:null,scopeVal:void 0,treeNodes:[],expend:[]});return{statusContext:i,cascaderContext:l.computed(function(){var o=e.size,s=e.checkStrictly,c=e.lazy,u=e.multiple,d=e.filterable,f=e.clearable,h=e.checkProps,v=e.max,p=e.disabled,g=e.showAllLevels,m=e.minCollapsedNum,y=e.valueType,b=e.modelValue;return Bv(Bv({value:i.scopeVal,size:o,checkStrictly:s,lazy:c,multiple:u,filterable:d,clearable:f,checkProps:h,max:v,disabled:p,showAllLevels:g,minCollapsedNum:m,valueType:y,visible:r.value},i),{},{setTreeNodes:function(x){i.treeNodes=x},setValue:function(x,C,S){K_(x,b)||n(x,{source:C,node:S})},setVisible:a,setInputVal:function(x){i.inputVal=x},setExpend:function(x){i.expend=x}})})}},zP=function(e){var n=Vt(),r=l.toRefs(e),a=r.value,i=r.modelValue,o=r.popupVisible,s=Mt(a,i,e.defaultValue,e.onChange),c=$e(s,2),u=c[0],d=c[1],f=gn(o,!1,e.onPopupVisibleChange,"popupVisible"),h=$e(f,2),v=h[0],p=h[1],g=Vce(e,d,v,p),m=g.cascaderContext,y=g.statusContext,b=l.computed(function(){return!!(e.filterable||Re(e.filter))}),w=function(){var _=m.value,O=_.inputVal,N=_.treeStore,B=_.setTreeNodes;Ece(O,N,B,e.filter)},x=function(){var _=m.value,O=_.value,N=_.treeStore,B=y.expend;Pce(N,O,B),N.replaceChecked(IP(O))};l.watch(function(){return e.options},function(){var S=e.options,_=e.keys,O=_===void 0?{}:_,N=e.checkStrictly,B=e.lazy,T=e.load,k=e.valueMode,E=y.treeStore;if(!(!S.length&&!E)){if(E)E.reload(S),E.refreshNodes();else{var I=new $P({keys:Bv(Bv({},O),{},{children:Je(O.children)?O.children:"children"}),checkable:!0,expandMutex:!0,expandParent:!0,lazy:B,load:T,valueMode:k,checkStrictly:N,onLoad:function(){l.nextTick(function(){I.refreshNodes(),w()})}});I.append(S),y.treeStore=I}x(),w()}},{immediate:!0,deep:!0}),l.watch(function(){var S=e.checkStrictly,_=e.lazy,O=e.load,N=e.valueMode;return JSON.stringify({valueMode:N,checkStrictly:S,lazy:_,load:O})},function(){var S=y.treeStore;if(S){var _=e.checkStrictly,O=e.lazy,N=e.load,B=e.valueMode,T={checkStrictly:_,disabled:n,load:N,lazy:O,valueMode:B};S.setConfig(T)}},{immediate:!0}),l.watch(u,function(){var S=m.value,_=S.setValue,O=S.multiple,N=S.valueType;yce(u.value,m.value)?_(O?[]:"","invalid-value"):y.scopeVal=O?[]:"",My(u)||(y.scopeVal=mce(u.value,N,O)),y.treeStore&&(x(),w())},{immediate:!0}),l.watch(function(){return v.value&&b.value},function(S){var _=m.value.setInputVal;S&&_("")}),l.watch(function(){return y.inputVal},function(){w()});var C=function(_){var O=[];return _.forEach(function(N){var B,T=(B=y.treeStore)===null||B===void 0?void 0:B.getNodes(N);T&&T[0]&&O.push(T[0].data)}),O};return{cascaderContext:m,isFilterable:b,innerValue:u,getCascaderItems:C}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var eue=l.defineComponent({name:"TCascader",props:Ic({},al),setup:function(e,n){var r=n.slots,a=ve("cascader"),i=ve(),o=Lt(),s=o.STATUS,c=ve("cascader__popup"),u=Qe("cascader"),d=u.globalConfig,f=Vt(),h=Pn(),v=We(),p=zP(e),g=p.cascaderContext,m=p.innerValue,y=p.isFilterable,b=p.getCascaderItems,w=l.computed(function(){return e.multiple?gce(g.value):EP(g.value)}),x=l.computed(function(){return PP(g.value.treeNodes)}),C=l.computed(function(){var T;return g.value.visible&&!e.multiple&&EP(g.value)||((T=e.placeholder)!==null&&T!==void 0?T:d.value.placeholder)}),S=function(){if(e.suffixIcon||r.suffixIcon)return v("suffixIcon");var k=g.value,E=k.visible,I=k.disabled;return l.createVNode(ql,{overlayClassName:bce(i.value,s.value,g.value),isActive:E,disabled:I},null)},_=l.computed(function(){var T=m.value instanceof Array?m.value:[m.value],k=e.multiple&&e.minCollapsedNum?T.slice(0,e.minCollapsedNum):m.value,E=b(T);return{value:m.value,selectedOptions:E,onClose:function(A){NP(g.value,A,e.onRemove)},displayValue:k}}),O=function(){return v("valueDisplay",{params:_.value})},N=function(){var k=v("label");return e.multiple?k:k?l.createVNode("div",{class:"".concat(i.value,"-tag-input__prefix")},[k]):null},B=l.computed(function(){return[a.value,e.multiple?"".concat(a.value,"--multiple"):"".concat(a.value,"--single")]});return function(){var T,k=g.value,E=k.setVisible,I=k.visible,A=k.inputVal,M=k.setInputVal;return l.createVNode(Ec,l.mergeProps({class:B.value,value:w.value,inputValue:I?A:"",popupVisible:I,keys:e.keys,allowInput:y.value,"min-collapsed-num":e.minCollapsedNum,"collapsed-items":e.collapsedItems,readonly:h.value,disabled:f.value,clearable:e.clearable,placeholder:C.value,multiple:e.multiple,loading:e.loading,status:e.status,tips:e.tips,borderless:e.borderless,label:N,valueDisplay:O,prefixIcon:e.prefixIcon,suffix:e.suffix,suffixIcon:function(){return S()},popupProps:Ic(Ic({},e.popupProps),{},{overlayInnerStyle:x.value.length&&!e.loading?{width:"auto"}:"",overlayClassName:[c.value,(T=e.popupProps)===null||T===void 0?void 0:T.overlayClassName]}),inputProps:Ic({size:e.size},e.inputProps),tagInputProps:Ic({size:e.size},e.tagInputProps),tagProps:Ic({},e.tagProps),onInputChange:function(U,F){var j,W;y.value&&(M("".concat(U)),e==null||(j=e.selectInputProps)===null||j===void 0||(W=j.onInputChange)===null||W===void 0||W.call(j,U,F))},onTagChange:function(U,F){var j,W;F.trigger!=="enter"&&(NP(g.value,F.index,e.onRemove),e==null||(j=e.selectInputProps)===null||j===void 0||(W=j.onTagChange)===null||W===void 0||W.call(j,U,F))},onPopupVisibleChange:function(U,F){var j,W;f.value||(E(U,F),e==null||(j=e.selectInputProps)===null||j===void 0||(W=j.onPopupVisibleChange)===null||W===void 0||W.call(j,U,F))},onBlur:function(U,F){var j,W,H;(j=e.onBlur)===null||j===void 0||j.call(e,{value:g.value.value,inputValue:F.inputValue||"",e:F.e}),e==null||(W=e.selectInputProps)===null||W===void 0||(H=W.onBlur)===null||H===void 0||H.call(W,U,F)},onFocus:function(U,F){var j,W,H;(j=e.onFocus)===null||j===void 0||j.call(e,{value:g.value.value,e:F.e}),e==null||(W=e.selectInputProps)===null||W===void 0||(H=W.onFocus)===null||H===void 0||H.call(W,U,F)},onClear:function(U){var F,j;Oce(g.value),e==null||(F=e.selectInputProps)===null||F===void 0||(j=F.onClear)===null||j===void 0||j.call(F,U)}},Sr(e.selectInputProps,["onTagChange","onInputChange","onPopupVisibleChange","onBlur","onFocus","onClear"])),{label:r.label,suffix:r.suffix,prefixIcon:r.prefixIcon,panel:function(){return l.createVNode(l.Fragment,null,[v("panelTopContent"),l.createVNode(DP,{option:e.option,empty:e.empty,visible:I,trigger:e.trigger,loading:e.loading,loadingText:e.loadingText,cascaderContext:g.value},{option:r.option,empty:r.empty,loadingText:r.loadingText}),v("panelBottomContent")])},collapsedItems:r.collapsedItems})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function tue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var nue=l.defineComponent({name:"TCascaderPanel",props:tue({},al),setup:function(e,n){var r=n.slots,a=zP(e),i=a.cascaderContext;return function(){return l.createVNode(DP,{trigger:e.trigger,cascaderContext:i.value,empty:e.empty},{empty:r.empty,option:r.option,loadingText:r.loadingText})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var rue=Be(eue),aue=Be(nue);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var KP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r){var a=r.prototype,i=a.format;a.format=function(o){var s=this,c=this.$locale();if(!this.isValid())return i.bind(this)(o);var u=this.$utils(),d=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return c.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return c.ordinal(s.week(),"W");case"w":case"ww":return u.s(s.week(),f==="w"?1:2,"0");case"W":case"WW":return u.s(s.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return u.s(String(s.$H===0?24:s.$H),f==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return f}});return i.bind(this)(d)}}})})(KP);var qP=KP.exports,GP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,s={},c=function(m){return(m=+m)+(m>68?1900:2e3)},u=function(m){return function(y){this[m]=+y}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var y=m.match(/([+-]|\d\d)/g),b=60*y[1]+(+y[2]||0);return b===0?0:y[0]==="+"?-b:b}(g)}],f=function(m){var y=s[m];return y&&(y.indexOf?y:y.s.concat(y.f))},h=function(m,y){var b,w=s.meridiem;if(w){for(var x=1;x<=24;x+=1)if(m.indexOf(w(x,0,y))>-1){b=x>12;break}}else b=m===(y?"pm":"PM");return b},v={A:[o,function(g){this.afternoon=h(g,!1)}],a:[o,function(g){this.afternoon=h(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[a,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[a,u("day")],Do:[o,function(g){var m=s.ordinal,y=g.match(/\d+/);if(this.day=y[0],m)for(var b=1;b<=31;b+=1)m(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[i,u("month")],MM:[a,u("month")],MMM:[o,function(g){var m=f("months"),y=(f("monthsShort")||m.map(function(b){return b.slice(0,3)})).indexOf(g)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(g){var m=f("months").indexOf(g)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(g){this.year=c(g)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function p(g){var m,y;m=g,y=s&&s.formats;for(var b=(g=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(N,B,T){var k=T&&T.toUpperCase();return B||y[T]||n[T]||y[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(E,I,A){return I||A.slice(1)})})).match(r),w=b.length,x=0;x<w;x+=1){var C=b[x],S=v[C],_=S&&S[0],O=S&&S[1];b[x]=O?{regex:_,parser:O}:C.replace(/^\[|\]$/g,"")}return function(N){for(var B={},T=0,k=0;T<w;T+=1){var E=b[T];if(typeof E=="string")k+=E.length;else{var I=E.regex,A=E.parser,M=N.slice(k),$=I.exec(M)[0];A.call(B,$),N=N.replace($,"")}}return function(U){var F=U.afternoon;if(F!==void 0){var j=U.hours;F?j<12&&(U.hours+=12):j===12&&(U.hours=0),delete U.afternoon}}(B),B}}return function(g,m,y){y.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(c=g.parseTwoDigitYear);var b=m.prototype,w=b.parse;b.parse=function(x){var C=x.date,S=x.utc,_=x.args;this.$u=S;var O=_[1];if(typeof O=="string"){var N=_[2]===!0,B=_[3]===!0,T=N||B,k=_[2];B&&(k=_[2]),s=this.$locale(),!N&&k&&(s=y.Ls[k]),this.$d=function(M,$,U){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*M);var F=p($)(M),j=F.year,W=F.month,H=F.day,J=F.hours,Y=F.minutes,D=F.seconds,q=F.milliseconds,z=F.zone,K=new Date,P=H||(j||W?1:K.getDate()),R=j||K.getFullYear(),X=0;j&&!W||(X=W>0?W-1:K.getMonth());var ee=J||0,re=Y||0,ae=D||0,oe=q||0;return z?new Date(Date.UTC(R,X,P,ee,re,ae,oe+60*z.offset*1e3)):U?new Date(Date.UTC(R,X,P,ee,re,ae,oe)):new Date(R,X,P,ee,re,ae,oe)}catch{return new Date("")}}(C,O,S),this.init(),k&&k!==!0&&(this.$L=this.locale(k).$L),T&&C!=this.format(O)&&(this.$d=new Date("")),s={}}else if(O instanceof Array)for(var E=O.length,I=1;I<=E;I+=1){_[1]=O[I-1];var A=y.apply(this,_);if(A.isValid()){this.$d=A.$d,this.$L=A.$L,this.init();break}I===E&&(this.$d=new Date(""))}else w.call(this,x)}}})})(GP);var Ac=GP.exports;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var iue=iO,oue=1/0,lue=17976931348623157e292;function sue(t){if(!t)return t===0?t:0;if(t=iue(t),t===oue||t===-1/0){var e=t<0?-1:1;return e*lue}return t===t?t:0}var YP=sue,cue=YP;function uue(t){var e=cue(t),n=e%1;return e===e?n?e-n:e:0}var XP=uue;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var JP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r){r.prototype.isoWeeksInYear=function(){var a=this.isLeapYear(),i=this.endOf("y").day();return i===4||a&&i===5?53:52}}})})(JP);var due=JP.exports,QP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r){r.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(QP);var fue=QP.exports;function hue(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function Fy(){return Fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fy.apply(null,arguments)}var ZP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r,a){r.prototype.isBetween=function(i,o,s,c){var u=a(i),d=a(o),f=(c=c||"()")[0]==="(",h=c[1]===")";return(f?this.isAfter(u,s):!this.isBefore(u,s))&&(h?this.isBefore(d,s):!this.isAfter(d,s))||(f?this.isBefore(u,s):!this.isAfter(u,s))&&(h?this.isAfter(d,s):!this.isBefore(d,s))}}})})(ZP);var vue=ZP.exports,VP={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){var n="week",r="year";return function(a,i,o){var s=i.prototype;s.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var d=o(this).startOf(r).add(1,r).date(u),f=o(this).endOf(n);if(d.isBefore(f))return 1}var h=o(this).startOf(r).date(u).startOf(n).subtract(1,"millisecond"),v=this.diff(h,n,!0);return v<0?o(this).startOf("week").week():Math.ceil(v)},s.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})})(VP);var pue=VP.exports,eI={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r){r.prototype.weekYear=function(){var a=this.month(),i=this.week(),o=this.year();return i===1&&a===11?o+1:a===0&&i>=52?o-1:o}}})})(eI);var gue=eI.exports,tI={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){return function(n,r,a){var i=r.prototype,o=function(h){return h&&(h.indexOf?h:h.s)},s=function(h,v,p,g,m){var y=h.name?h:h.$locale(),b=o(y[v]),w=o(y[p]),x=b||w.map(function(S){return S.slice(0,g)});if(!m)return x;var C=y.weekStart;return x.map(function(S,_){return x[(_+(C||0))%7]})},c=function(){return a.Ls[a.locale()]},u=function(h,v){return h.formats[v]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(g,m,y){return m||y.slice(1)})}(h.formats[v.toUpperCase()])},d=function(){var h=this;return{months:function(p){return p?p.format("MMMM"):s(h,"months")},monthsShort:function(p){return p?p.format("MMM"):s(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(p){return p?p.format("dddd"):s(h,"weekdays")},weekdaysMin:function(p){return p?p.format("dd"):s(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(p){return p?p.format("ddd"):s(h,"weekdaysShort","weekdays",3)},longDateFormat:function(p){return u(h.$locale(),p)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return d.bind(this)()},a.localeData=function(){var f=c();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(v){return u(f,v)},meridiem:f.meridiem,ordinal:f.ordinal}},a.months=function(){return s(c(),"months")},a.monthsShort=function(){return s(c(),"monthsShort","months",3)},a.weekdays=function(f){return s(c(),"weekdays",null,null,f)},a.weekdaysShort=function(f){return s(c(),"weekdaysShort","weekdays",3,f)},a.weekdaysMin=function(f){return s(c(),"weekdaysMin","weekdays",2,f)}}})})(tI);var mue=tI.exports,nI={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){var n="month",r="quarter";return function(a,i){var o=i.prototype;o.quarter=function(u){return this.$utils().u(u)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(u-1))};var s=o.add;o.add=function(u,d){return u=Number(u),this.$utils().p(d)===r?this.add(3*u,n):s.bind(this)(u,d)};var c=o.startOf;o.startOf=function(u,d){var f=this.$utils(),h=!!f.u(d)||d;if(f.p(u)===r){var v=this.quarter()-1;return h?this.month(3*v).startOf(n).startOf("day"):this.month(3*v+2).endOf(n).endOf("day")}return c.bind(this)(u,d)}}})})(nI);var yue=nI.exports,bue=L0,wue=f0,xue=XP,Cue=Math.ceil,_ue=Math.max;function Sue(t,e,n){(n?wue(t,e,n):e===void 0)?e=1:e=_ue(xue(e),0);var r=t==null?0:t.length;if(!r||e<1)return[];for(var a=0,i=0,o=Array(Cue(r/e));a<r;)o[i++]=bue(t,a,a+=e);return o}var jv=Sue;function rI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function aI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}ke.extend(pue),ke.extend(gue),ke.extend(mue),ke.extend(yue),ke.extend(qP),ke.extend(Ac),ke.extend(vue);function Tue(t){return t&&t[0].toUpperCase().concat(t.substring(1,t.length))}function kue(t){var e=t.year,n=t.month;return new Date(e,n,1)}function iI(t){var e=t.year,n=t.month;return new Date(e,n+1,0).getDate()}function Oue(t){var e=t.year,n=t.month;return new Date(e,n,iI({year:e,month:n}))}function By(t,e){return t.getFullYear()===e.getFullYear()}function Eue(t,e){return By(t,e)&&ke(t).quarter()===ke(e).quarter()}function jy(t,e){return By(t,e)&&t.getMonth()===e.getMonth()}function Pue(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"zh-cn";return jy(t,e)&&ke(t).locale(n).week()===ke(e).locale(n).week()}function Iue(t,e){return jy(t,e)&&t.getDate()===e.getDate()}function oI(t,e){var n=t.getTime(),r=e.getTime();return n<r?-1:n>r?1:0}function ai(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"date",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"zh-cn",a={isSameYear:By,isSameQuarter:Eue,isSameMonth:jy,isSameWeek:Pue,isSameDate:Iue};return a["isSame".concat(Tue(n))](t,e,r)}function Nc(t,e,n){return e&&oI(t,e)===-1||n&&oI(t,n)===1}function $v(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)}function Uv(t,e){return ke(t).subtract(e,"month").toDate()}function zv(t,e){return ke(t).add(e,"month").toDate()}function lI(t,e){var n=t.year,r=t.month,a=e.firstDayOfWeek,i=e.showWeekOfYear,o=i===void 0?!1:i,s=e.disableDate,c=s===void 0?function(){return!1}:s,u=e.minDate,d=e.maxDate,f=e.dayjsLocale,h=f===void 0?"zh-cn":f,v=e.cancelRangeSelectLimit,p=v===void 0?!1:v,g=kue({year:n,month:r}),m=Oue({year:n,month:r}),y=iI({year:n,month:r}),b=[],w=1,x=$v();for(w;w<=y;w++){var C=new Date(n,r,w);b.push({text:w,active:!1,value:C,disabled:Re(c)&&c(C)||!p&&Nc(C,u,d),now:ai(x,C),firstDayOfMonth:w===1,lastDayOfMonth:w===y,type:"current-month",dayjsObj:ke(C).locale(h)})}if(g.getDay()!==a)for(g.setDate(0);b.unshift({text:g.getDate().toString(),active:!1,value:new Date(g),disabled:Re(c)&&c(g)||!p&&Nc(g,u,d),additional:!0,type:"prev-month",dayjsObj:ke(g).locale(h)}),g.setDate(g.getDate()-1),g.getDay()!==Math.abs(a+6)%7;);for(var S=42;b.length<S;)m.setDate(m.getDate()+1),b.push({text:m.getDate(),active:!1,value:new Date(m),disabled:Re(c)&&c(m)||!p&&Nc(m,u,d),additional:!0,type:"next-month",dayjsObj:ke(m).locale(h)});var _=jv(b,7);return o&&_.forEach(function(O){O.unshift(aI(aI({},O[0]),{},{active:!1,value:O[0].value,text:ke(O[0].value).locale(h).week(),dayjsObj:ke(O[0].value).locale(h)}))}),_}function Aue(t,e){for(var n=e.disableDate,r=n===void 0?function(){return!1}:n,a=e.minDate,i=e.maxDate,o=e.quarterLocal,s=e.dayjsLocale,c=s===void 0?"zh-cn":s,u=e.cancelRangeSelectLimit,d=u===void 0?!1:u,f=[],h=$v(),v=1;v<=4;v++){var p=ke(new Date(t,0)).quarter(v).toDate();f.push({value:p,now:ai(p,h,"quarter"),disabled:Re(r)&&r(p)||!d&&Nc(p,a,i),active:!1,text:o[v-1],dayjsObj:ke(p).locale(c)})}return jv(f,4)}function Nue(t,e){for(var n=e.disableDate,r=n===void 0?function(){return!1}:n,a=e.minDate,i=e.maxDate,o=e.dayjsLocale,s=o===void 0?"zh-cn":o,c=e.cancelRangeSelectLimit,u=c===void 0?!1:c,d=parseInt((t/10).toString(),10)*10,f=d+9,h=[],v=$v(),p=d;p<=f;p++){var g=new Date(p,1);h.push({value:g,now:ai(g,v,"year"),disabled:Re(r)&&r(g)||!u&&Nc(g,a,i),active:!1,text:"".concat(g.getFullYear()),dayjsObj:ke(g).locale(s)})}return jv(h,3)}function Due(t,e){for(var n=e.disableDate,r=n===void 0?function(){return!1}:n,a=e.minDate,i=e.maxDate,o=e.monthLocal,s=e.dayjsLocale,c=s===void 0?"zh-cn":s,u=e.cancelRangeSelectLimit,d=u===void 0?!1:u,f=[],h=$v(),v=0;v<=11;v++){var p=new Date(t,v);f.push({value:p,now:ai(p,h,"month"),disabled:Re(r)&&r(p)||!d&&Nc(p,a,i),active:!1,text:o[p.getMonth()],dayjsObj:ke(p).locale(c)})}return jv(f,3)}function Rue(t,e){var n=Fy({},(hue(e),e)),r=n.start,a=n.end,i=n.hoverStart,o=n.hoverEnd,s=n.type,c=s===void 0?"date":s,u=n.isRange,d=u===void 0?!1:u,f=n.value,h=n.multiple,v=h===void 0?!1:h;return c==="week"?t:d?t.map(function(p){return p.map(function(g){var m=g,y=g.value,b=r&&ai(r,y,c),w=i&&ai(i,y,c),x=a&&ai(a,y,c),C=o&&ai(o,y,c);return m.active=(b||x)&&!m.additional,r&&a&&(m.highlight=ke(y).isBetween(r,a,c,"[]")&&!m.additional,m.startOfRange=b,m.endOfRange=x),i&&o&&(m.hoverHighlight=ke(y).isBetween(i,o,c,"[]")&&!m.additional,m.hoverStartOfRange=w,m.hoverEndOfRange=C),m})}):t.map(function(p){return p.map(function(g){var m=g;if(v){var y;m.active=f==null||(y=f.some)===null||y===void 0?void 0:y.call(f,function(b){return ai(ke(b).toDate(),m.value,c)&&!m.additional})}else m.active=r&&ai(g.value,r,c)&&!m.additional;return m})})}function $y(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t.replace(/\W?Y{2,4}|\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()}function Dc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.match(/[ap]m/i)||[""],n=/\d{1,2}(:\d{1,2})?(:\d{1,2})?(:\d{1,3})?/,r=t.match(n)||["0:0:0:0"],a=r[0].split(":"),i=$e(a,4),o=i[0],s=o===void 0?0:o,c=i[1],u=c===void 0?0:c,d=i[2],f=d===void 0?0:d,h=i[3],v=h===void 0?0:h;return{hours:+s,minutes:+u,seconds:+f,milliseconds:+v,meridiem:e[0]}}function Mue(t,e){return e==="time-stamp"?new Date(t):ke(t,e).toDate()}ke.extend(due),ke.extend(fue);var Kd="HH:mm:ss";function rt(t,e,n,r){if(t===""||t===null)return ke();var a=t;if(/[w|W]/g.test(e)){Je(a)||(a=ke(a).locale("zh-cn").format(e));var i=a.split(/[-/.\s]/)[0],o=a.split(/[-/.\s]/)[1],s=e.split(/[-/.\s]/)[1],c=ke(i,"YYYY").locale("zh-cn").startOf("year");(c.day()>4||c.day()===0)&&(c=c.add(1,"week"));for(var u=ke(i,"YYYY").locale("zh-cn").isoWeeksInYear(),d=0;d<=u;d+=1){var f=c.add(d,"week");if(n==="start"&&(f=f.subtract(5,"day")),f.format(s)===o)return f}}if(/Q/g.test(e)){Je(a)||(a=ke(a).locale("zh-cn").format(e));for(var h=a.split(/[-/.\s]/)[0],v=a.split(/[-/.\s]/)[1],p=e.split(/[-/.\s]/)[1],g=ke(h,"YYYY").startOf("year"),m=0;m<4;m+=1){var y=g.add(m,"quarter");if(y.format(p)===v)return y}}var b=ke(a,e).isValid()?ke(a,e):ke(a);return b.isValid()?b:(st.error("DatePicker",`Check whether the format、value format is valid.
 value: '`.concat(t,"', format: '").concat(e,"'")),ke())}function Lue(t){var e=t.newDate,n=t.format,r=t.dayjsLocale,a=t.targetFormat,i=t.autoSwap;if(!e||!Array.isArray(e))return[];var o=e.map(function(s){return s&&rt(s,n).locale(r)});return i&&o[0]&&o[1]&&o[0].toDate().getTime()>o[1].toDate().getTime()&&(o=[o[1],o[0]]),o.some(function(s){return s&&!s.isValid()})?(st.error("DatePicker",`Check whether the value、format、valueType format is valid.
format: '`.concat(n,"' value: '").concat(e,"' valueType: '").concat(a,"'")),[]):a==="time-stamp"?o.map(function(s){return s&&s.toDate().getTime()}):a==="Date"?o.map(function(s){return s&&s.toDate()}):o.map(function(s){return s&&s.format(a||n)})}function Fue(t){var e=t.newDate,n=t.format,r=t.targetFormat,a=t.dayjsLocale;if(!e)return"";var i=rt(e,n).locale(a);return i.isValid()?r==="time-stamp"?i.toDate().getTime():r==="Date"?i.toDate():i.format(r||n):(st.error("DatePicker",`Check whether the format、value format is valid.
format: '`.concat(n,"' value: '").concat(e,"'")),"")}function sr(t,e){return Array.isArray(t)?t.every(function(n){return n===""?!0:ke(n,e).isValid()||ke(n).isValid()}):t===""?!0:ke(t,e).isValid()||ke(t).isValid()}function pt(t,e){var n=e.format,r=e.targetFormat,a=e.dayjsLocale,i=a===void 0?"zh-cn":a,o=e.autoSwap,s;return Array.isArray(t)?s=Lue({newDate:t,format:n,dayjsLocale:i,targetFormat:r,autoSwap:o}):s=Fue({newDate:t,format:n,dayjsLocale:i,targetFormat:r}),s}function sI(t,e){if(t&&e){var n=t.split(":"),r=e.split(":");return n.slice(0,r.length).join(":")}return t}function Rc(t,e,n,r){var a,i=Array.isArray(t)?t:[t];return r=Array.isArray(r)?r:[r,r],i=i.map(function(o,s){return o?ke(o,typeof o=="string"?e:void 0).format(n):sI(r[s],n)}),i=i.length?i:r.map(function(o){return sI(o,n)}),Array.isArray(t)?i:(a=i)===null||a===void 0?void 0:a[0]}function ii(t){var e=t.mode,n=e===void 0?"date":e,r=t.format,a=t.valueType,i=t.enableTimePicker;return n==="year"?{format:r||"YYYY",valueType:a||r||"YYYY",timeFormat:Kd}:n==="month"?{format:r||"YYYY-MM",valueType:a||r||"YYYY-MM",timeFormat:Kd}:n==="quarter"?{format:r||"YYYY-[Q]Q",valueType:a||r||"YYYY-[Q]Q",timeFormat:Kd}:n==="week"?{format:r||"gggg-wo",valueType:a||r||"gggg-wo",timeFormat:Kd}:n==="date"?{format:r||"YYYY-MM-DD".concat(i?" HH:mm:ss":""),valueType:a||r||"YYYY-MM-DD".concat(i?" HH:mm:ss":""),timeFormat:$y(r||"YYYY-MM-DD".concat(i?" HH:mm:ss":""))||Kd}:(st.error("DatePicker","Invalid mode: ".concat(n)),{})}function Hv(t){var e=t.value,n=t.mode,r=n===void 0?"date":n,a=t.format,i=t.timeFormat,o=i===void 0?"HH:mm:ss":i,s=t.enableTimePicker,c={year:[ke().year(),ke().year()],month:[ke().month(),ke().month()],time:[ke().format(o),ke().format(o)]};return r==="year"?c.year[1]+=10:r==="month"||r==="quarter"?c.year[1]+=1:(r==="date"||r==="week")&&!s&&(c.month[0]===11?(c.year[1]+=1,c.month[1]=0):c.month[1]+=1),!e||!Array.isArray(e)||!e.length?c:{year:e.map(function(u){return rt(u,a).year()}),month:e.map(function(u){return rt(u,a).month()}),time:e.map(function(u){return rt(u,a).format(o)})}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function cI(t){var e,n,r,a,i=l.toRefs(t),o=i.value,s=i.modelValue,c=Mt(o,s,t.defaultValue,t.onChange),u=$e(c,2),d=u[0],f=u[1],h=l.computed(function(){return ii({mode:t.mode,format:t.format,enableTimePicker:t.multiple?!1:t.enableTimePicker})});t.enableTimePicker&&($y(h.value.format)||console.error("format: ".concat(h.value.format," 不规范，包含时间选择必须要有时间格式化 HH:mm:ss")));var v=l.ref(Rc(t.multiple?(e=d.value)===null||e===void 0?void 0:e[0]:d.value,h.value.format,h.value.timeFormat,t.defaultTime)),p=l.ref(rt(t.multiple?(n=d.value)===null||n===void 0?void 0:n[0]:d.value,h.value.format).month()),g=l.ref(rt(t.multiple?(r=d.value)===null||r===void 0?void 0:r[0]:d.value,h.value.format).year()),m=l.ref(pt(t.multiple?(a=d.value)===null||a===void 0?void 0:a[0]:d.value,{format:h.value.format}));return l.watchEffect(function(){if(!d.value){m.value="";return}sr(d.value,h.value.format)&&(m.value=pt(d.value,{format:h.value.format}),v.value=Rc(d.value,h.value.format,h.value.timeFormat,t.defaultTime))}),{year:g,month:p,value:d,time:v,cacheValue:m,onChange:f}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function uI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bue(t){var e=ve("date-picker"),n=Vt(),r=l.ref(),a=Pn(),i=cI(t),o=i.value,s=i.onChange,c=i.time,u=i.month,d=i.year,f=i.cacheValue,h=l.computed(function(){return ii({mode:t.mode,format:t.format,valueType:t.valueType,enableTimePicker:t.multiple?!1:t.enableTimePicker})}),v=l.ref(!1),p=l.ref(!1),g=l.ref(t.multiple?pt(o.value,{format:h.value.format})||[]:pt(o.value,{format:h.value.format})),m=l.computed(function(){var b=Mc(Mc({},t.inputProps),{},{size:t.size,ref:r,readonly:a.value||!t.allowInput,class:[V({},"".concat(e.value,"__input--placeholder"),p.value)],onClear:function(x){var C;x==null||(C=x.e)===null||C===void 0||C.stopPropagation(),v.value=!1,s==null||s("",{dayjsValue:ke(),trigger:"clear"})}});return t.multiple?b:Mc(Mc({},b),{},{onBlur:function(x,C){var S;(S=t.onBlur)===null||S===void 0||S.call(t,{value:x,e:C.e})},onFocus:function(x,C){var S,_=C.e;(S=t.onFocus)===null||S===void 0||S.call(t,{value:o.value,e:_})},onChange:function(x){if(g.value=x,!!sr(x,h.value.format)){f.value=x;var C=rt(x,h.value.format).month(),S=rt(x,h.value.format).year(),_=Rc(x,h.value.format,h.value.timeFormat,t.defaultTime);!Number.isNaN(S)&&(d.value=S),!Number.isNaN(C)&&(u.value=C),!Number.isNaN(_)&&(c.value=_)}},onEnter:function(x){if(!x){s("",{dayjsValue:ke(),trigger:"enter"}),v.value=!1;return}!sr(x,h.value.format)&&!sr(o.value,h.value.format)||(v.value=!1,sr(x,h.value.format)?s==null||s(pt(x,{format:h.value.format,targetFormat:h.value.valueType}),{dayjsValue:rt(x,h.value.format),trigger:"enter"}):sr(o.value,h.value.format)?g.value=pt(o.value,{format:h.value.format}):g.value="")}})}),y=l.computed(function(){var b,w,x;return Mc(Mc({expandAnimation:!0},Sr(t.popupProps,"on-visible-change")),{},{disabled:n.value,overlayInnerStyle:(b=(w=t.popupProps)===null||w===void 0?void 0:w.overlayInnerStyle)!==null&&b!==void 0?b:{width:"auto"},overlayClassName:[(x=t.popupProps)===null||x===void 0?void 0:x.overlayClassName,"".concat(e.value,"__panel-container")],onVisibleChange:function(S,_){var O,N,B,T;if(!n.value){if((O=t.popupProps)===null||O===void 0||(N=O.onVisibleChange)===null||N===void 0||N.call(O,S,_),(B=t.popupProps)===null||B===void 0||(T=B["on-visible-change"])===null||T===void 0||T.call(B,S,_),_.trigger==="trigger-element-click"){v.value=!0;return}v.value=S}}})});return l.watch(o,function(b){if(!b){g.value="";return}sr(b,h.value.format)&&(g.value=pt(b,{format:h.value.format}))}),{year:d,month:u,value:o,time:c,inputValue:g,popupVisible:v,inputProps:m,popupProps:y,inputRef:r,cacheValue:f,isHoverCell:p,onChange:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var fa={allowInput:Boolean,borderless:Boolean,clearable:Boolean,defaultTime:{type:String,default:"00:00:00"},disableDate:{type:[Object,Array,Function]},disabled:{type:Boolean,default:void 0},enableTimePicker:Boolean,firstDayOfWeek:{type:Number,validator:function(e){return e?[1,2,3,4,5,6,7].includes(e):!0}},format:{type:String,default:void 0},inputProps:{type:Object},label:{type:[String,Function]},mode:{type:String,default:"date",validator:function(e){return e?["year","quarter","month","week","date"].includes(e):!0}},multiple:Boolean,needConfirm:{type:Boolean,default:!0},placeholder:{type:[String,Array],default:void 0},popupProps:{type:Object},prefixIcon:{type:Function},presets:{type:Object},presetsPlacement:{type:String,default:"bottom",validator:function(e){return e?["left","top","right","bottom"].includes(e):!0}},selectInputProps:{type:Object},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffixIcon:{type:Function},timePickerProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Array,Date],default:void 0},modelValue:{type:[String,Number,Array,Date],default:void 0},defaultValue:{type:[String,Number,Array,Date],default:""},valueDisplay:{type:[String,Function]},valueType:{type:String,default:""},onBlur:Function,onChange:Function,onConfirm:Function,onFocus:Function,onPick:Function,onPresetClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jue=l.defineComponent({name:"TDatePickerHeader",props:{mode:{type:String,default:"date"},year:Number,month:Number,onMonthChange:Function,onYearChange:Function,onJumperClick:Function},setup:function(e){var n=Qe("classPrefix"),r=n.classPrefix,a=ve("date-picker__header"),i=Qe("datePicker"),o=i.globalConfig,s=l.ref(f(e.year)),c=l.computed(function(){return e.mode==="date"||e.mode==="week"}),u=l.computed(function(){var y;return((y=s.value.find(function(b){return b.value-e.year<=9&&b.value-e.year>=0}))===null||y===void 0?void 0:y.value)||e.year}),d=l.computed(function(){return o.value.months.map(function(y,b){return{label:y,value:b}})});function f(y){var b=[];if(e.mode==="year")for(var w=y%10,x=y-w-100,C=y-w+100,S=x;S<=C;S+=10)b.push({label:"".concat(S," - ").concat(S+9),value:S+9});else{b.push({label:"".concat(y),value:y});for(var _=1;_<=10;_++)b.push({label:"".concat(y+_),value:y+_}),b.unshift({label:"".concat(y-_),value:y-_})}return b}function h(y,b){var w=[];if(e.mode==="year"){var x=y%10;if(b==="add")for(var C=y-x+10;C<=y-x+50;C+=10)w.push({label:"".concat(C," - ").concat(C+9),value:C});else for(var S=y-x-1;S>y-x-50;S-=10)w.unshift({label:"".concat(S-9," - ").concat(S),value:S})}else if(b==="add")for(var _=y+1;_<=y+10;_++)w.push({label:"".concat(_),value:_});else for(var O=y-1;O>y-10;O--)w.unshift({label:"".concat(O),value:O});return w}var v=l.computed(function(){return{year:{prev:o.value.preDecade,current:o.value.now,next:o.value.nextDecade},month:{prev:o.value.preYear,current:o.value.now,next:o.value.nextYear},date:{prev:o.value.preMonth,current:o.value.now,next:o.value.nextMonth}}});function p(y){var b=y.e;b.target.scrollTop===0?g(b):b.target.scrollTop===b.target.scrollHeight-b.target.clientHeight&&m(b)}function g(y){var b;y==null||(b=y.stopPropagation)===null||b===void 0||b.call(y);var w=s.value[0].value,x=h(w,"reduce");s.value=[].concat(Ee(x),Ee(s.value))}function m(y){var b;y==null||(b=y.stopPropagation)===null||b===void 0||b.call(y);var w=s.value.slice(-1)[0].value,x=h(w,"add");s.value=[].concat(Ee(s.value),Ee(x))}return l.watch(function(){return e.mode},function(){s.value=f(e.year)}),function(){return l.createVNode("div",{class:a.value},[l.createVNode("div",{class:"".concat(a.value,"-controller")},[c.value&&l.createVNode(Jl,{class:"".concat(a.value,"-controller-month"),value:e.month,options:d.value,onChange:function(b){var w;return(w=e.onMonthChange)===null||w===void 0?void 0:w.call(e,b)},popupProps:{attach:function(b){return b.parentNode},overlayClassName:"".concat(a.value,"-controller-month-popup")}},null),l.createVNode(Jl,{class:"".concat(a.value,"-controller-year"),value:e.mode==="year"?u.value:e.year,options:s.value,onChange:function(b){var w;return(w=e.onYearChange)===null||w===void 0?void 0:w.call(e,b)},popupProps:{onScroll:p,attach:function(b){return b.parentNode},overlayClassName:"".concat(a.value,"-controller-year-popup")},panelTopContent:function(){return l.createVNode("div",{class:"".concat(r.value,"-select-option"),onClick:g},[l.createTextVNode("...")])},panelBottomContent:function(){return l.createVNode("div",{class:"".concat(r.value,"-select-option"),onClick:m},[l.createTextVNode("...")])}},null)]),l.createVNode(fP,{tips:v.value[e.mode],size:"small",onChange:e.onJumperClick},null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $ue=l.defineComponent({name:"TDatePickerCell",props:{time:String,text:[String,Number],value:Date,active:Boolean,highlight:Boolean,disabled:Boolean,startOfRange:Boolean,endOfRange:Boolean,hoverHighlight:Boolean,hoverStartOfRange:Boolean,hoverEndOfRange:Boolean,additional:Boolean,now:Boolean,firstDayOfMonth:Boolean,lastDayOfMonth:Boolean,onClick:Function,onMouseEnter:Function,dayjsObj:h0.exports.Dayjs},setup:function(e){var n=ve("date-picker__cell"),r=l.computed(function(){var o;return[n.value,(o={},V(V(V(V(V(V(V(V(V(V(o,"".concat(n.value,"--now"),e.now),"".concat(n.value,"--active"),e.active),"".concat(n.value,"--disabled"),e.disabled),"".concat(n.value,"--highlight"),e.highlight),"".concat(n.value,"--hover-highlight"),e.hoverHighlight),"".concat(n.value,"--active-start"),e.startOfRange),"".concat(n.value,"--active-end"),e.endOfRange),"".concat(n.value,"--hover-start"),e.hoverStartOfRange),"".concat(n.value,"--hover-end"),e.hoverEndOfRange),"".concat(n.value,"--additional"),e.additional),V(V(o,"".concat(n.value,"--first-day-of-month"),e.firstDayOfMonth),"".concat(n.value,"--last-day-of-month"),e.lastDayOfMonth))]});function a(o){var s;if(!e.disabled){if(e.time){var c=Dc(e.time),u=c.hours,d=c.minutes,f=c.seconds,h=c.milliseconds,v=c.meridiem,p=u;/am/i.test(v)&&p===12&&(p-=12),/pm/i.test(v)&&p<12&&(p+=12),e.value.setHours(p),e.value.setMinutes(d),e.value.setSeconds(f),e.value.setMilliseconds(h)}(s=e.onClick)===null||s===void 0||s.call(e,e.value,{e:o})}}function i(){var o;if(!e.disabled){if(e.time){var s=Dc(e.time),c=s.hours,u=s.minutes,d=s.seconds,f=s.milliseconds,h=s.meridiem,v=c;/am/i.test(h)&&v===12&&(v-=12),/pm/i.test(h)&&v<12&&(v+=12),e.value.setHours(v),e.value.setMinutes(u),e.value.setSeconds(d),e.value.setMilliseconds(f)}(o=e.onMouseEnter)===null||o===void 0||o.call(e,e.value)}}return function(){return l.createVNode("td",{class:r.value,onClick:a,onMouseenter:i},[l.createVNode("div",{class:"".concat(n.value,"-inner")},[e.text])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var dI={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Jn,function(){var n="day";return function(r,a,i){var o=function(d){return d.add(4-d.isoWeekday(),n)},s=a.prototype;s.isoWeekYear=function(){return o(this).year()},s.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var d,f,h,v,p=o(this),g=(d=this.isoWeekYear(),f=this.$u,h=(f?i.utc:i)().year(d).startOf("year"),v=4-h.isoWeekday(),h.isoWeekday()>4&&(v+=7),h.add(v,n));return p.diff(g,"week")+1},s.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var c=s.startOf;s.startOf=function(u,d){var f=this.$utils(),h=!!f.u(d)||d;return f.p(u)==="isoweek"?h?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):c.bind(this)(u,d)}}})})(dI);var Uue=dI.exports;function fI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}ke.extend(Uue);var Hue=l.defineComponent({name:"TDatePickerTable",props:{mode:{type:String,default:"date"},value:[String,Number,Array,Date],format:String,firstDayOfWeek:Number,multiple:Boolean,data:Array,time:String,onCellClick:Function,onCellMouseEnter:Function,onCellMouseLeave:Function},setup:function(e){var n=ve("date-picker__table"),r=Qe("datePicker"),a=r.globalConfig,i=a.value.dayjsLocale,o=l.computed(function(){for(var f=[],h=e.firstDayOfWeek-1,v=a.value.weekdays.length;f.length<v;)f.push(a.value.weekdays[h]),h=(h+v+1)%v;return e.mode==="week"&&f.unshift(a.value.weekAbbreviation),f}),s=l.computed(function(){return e.mode==="date"||e.mode==="week"}),c=function(h,v){if(e.mode!=="week"||!h)return{};if(Ke(h)){var p,g,m,y;if(!h.length)return{};var b=h.map(function(A){return A&&rt(A,e.format)}),w=$e(b,2),x=w[0],C=w[1],S=x&&x.year(),_=x==null||(p=x.locale)===null||p===void 0||(p=p.call(x,i))===null||p===void 0||(g=p.week)===null||g===void 0?void 0:g.call(p),O=C&&C.year(),N=C==null||(m=C.locale)===null||m===void 0||(m=m.call(C,i))===null||m===void 0||(y=m.week)===null||y===void 0?void 0:y.call(m),B=rt(v,e.format),T=B.year(),k=B.week(),E=T===S&&k===_||T===O&&k===N,I=T>=S&&T<=O&&k>_&&k<N;return V(V({},"".concat(n.value,"-").concat(e.mode,"-row--active"),E),"".concat(n.value,"-").concat(e.mode,"-row--range"),I)}return V({},"".concat(n.value,"-").concat(e.mode,"-row--active"),rt(h,e.format).locale(i).week()===rt(v,e.format).locale(i).week())},u=function(h,v){var p,g=rt(v,e.format);if(e.mode!=="week"||Array.isArray(h)&&!h.length)return{};var m=(p=h.map)===null||p===void 0?void 0:p.call(h,function(y){return rt(y,e.format)}).some(function(y){return y.week()===g.week()&&y.year()===g.year()});return V({},"".concat(n.value,"-").concat(e.mode,"-row--active"),m)},d=e.multiple?u:c;return function(){return l.createVNode("div",{class:n.value,onMouseleave:function(h){var v;return(v=e.onCellMouseLeave)===null||v===void 0?void 0:v.call(e,{e:h})}},[l.createVNode("table",null,[s.value&&l.createVNode("thead",null,[l.createVNode("tr",{class:"".concat(n.value,"-header-row")},[o.value.map(function(f,h){return l.createVNode("th",{class:"".concat(n.value,"-header-cell"),key:h},[f])})])]),l.createVNode("tbody",null,[e.data.map(function(f,h){return l.createVNode("tr",{key:h,class:zue(V({},"".concat(n.value,"-").concat(e.mode,"-row"),!0),d(e.value,f[0].value))},[f.map(function(v,p){return l.createVNode($ue,l.mergeProps(v,{key:p,time:e.time,onClick:e.onCellClick,onMouseEnter:e.onCellMouseEnter}),null)})])})])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wv="am",Kv="pm",hI=[Wv,Kv],qd=[void 0,void 0],Wue=[1,1,1],Kue="HH:mm:ss",hn=function(t){return t.hour="hour",t.minute="minute",t.second="second",t.milliSecond="millisecond",t.meridiem="meridiem",t}(hn||{}),que=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,vI=/[h]{1}/;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Uy={allowInput:Boolean,borderless:Boolean,clearable:Boolean,disableTime:{type:Function},disabled:{type:Boolean,default:void 0},format:{type:String,default:"HH:mm:ss"},hideDisabledTime:{type:Boolean,default:!0},inputProps:{type:Object},label:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},presets:{type:Object},readonly:{type:Boolean,default:void 0},selectInputProps:{type:Object},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},steps:{type:Array,default:function(){return[1,1,1]}},tips:{type:[String,Function]},value:{type:String,default:void 0},modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},valueDisplay:{type:[String,Function]},onBlur:Function,onChange:Function,onClose:Function,onFocus:Function,onInput:Function,onOpen:Function,onPick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function pI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qv={type:Boolean,default:!0,validator:function(e){return Nn(e)}},Gue=function(){return{disabled:oi(oi({},qv),{default:!1}),isFocus:oi(oi({},qv),{default:!1}),value:{type:String,default:""},format:{type:String,default:"HH:mm:ss"},steps:oi({type:Array},{default:[1,1,1]}),isShowPanel:oi(oi({},qv),{default:!0}),activeIndex:{type:Number},presets:{type:Object},hideDisabledTime:oi({},Uy.hideDisabledTime),disableTime:{type:Function},isFooterDisplay:oi({},qv)}},Yue=function(){return{format:{type:String,default:"HH:mm:ss"},cols:{type:Array,default:function(){return[hn.hour,hn.minute,hn.second]}},value:{type:String,default:""},range:{type:Array,default:function(){return[]}},steps:oi({type:Array},{default:[1,1,1]}),hideDisabledTime:oi({},Uy.hideDisabledTime),disableTime:{type:Function},localeMeridiems:{type:Array}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */ke.extend(qP),ke.extend(Ac);function Gv(t,e){return ke(t,e).format(e)===t}function gI(t,e){return ke(t,e).format(e)}function Xue(t,e,n){return n<=1?e:t.sort(function(r,a){return Math.abs(e+1-r)-Math.abs(e+1-a)})[0]}function Jue(t){var e=[],n=hn.meridiem,r=hn.hour,a=hn.minute,i=hn.second,o=hn.milliSecond,s=t.match(que);return s.forEach(function(c){switch(c){case"H":case"HH":case"h":case"hh":e.push(r);break;case"a":case"A":e.push(n);break;case"m":case"mm":e.push(a);break;case"s":case"ss":e.push(i);break;case"SSS":e.push(o);break}}),e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Que=Math.ceil,Zue=Math.max;function Vue(t,e,n,r){for(var a=-1,i=Zue(Que((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=t,t+=n;return o}var ede=Vue,tde=ede,nde=f0,zy=YP;function rde(t){return function(e,n,r){return r&&typeof r!="number"&&nde(e,n,r)&&(n=r=void 0),e=zy(e),n===void 0?(n=e,e=0):n=zy(n),r=r===void 0?e<n?1:-1:zy(r),tde(e,n,r,t)}}var ade=rde,ide=ade,ode=ide(),mI=ode,lde=9007199254740991,sde=Math.floor;function cde(t,e){var n="";if(!t||e<1||e>lde)return n;do e%2&&(n+=t),e=sde(e/2),e&&(t+=t);while(e);return n}var ude=cde,dde=V_,fde=dde("length"),hde=fde,yI="\\ud800-\\udfff",vde="\\u0300-\\u036f",pde="\\ufe20-\\ufe2f",gde="\\u20d0-\\u20ff",mde=vde+pde+gde,yde="\\ufe0e\\ufe0f",bde="["+yI+"]",Hy="["+mde+"]",Wy="\\ud83c[\\udffb-\\udfff]",wde="(?:"+Hy+"|"+Wy+")",bI="[^"+yI+"]",wI="(?:\\ud83c[\\udde6-\\uddff]){2}",xI="[\\ud800-\\udbff][\\udc00-\\udfff]",xde="\\u200d",CI=wde+"?",_I="["+yde+"]?",Cde="(?:"+xde+"(?:"+[bI,wI,xI].join("|")+")"+_I+CI+")*",_de=_I+CI+Cde,Sde="(?:"+[bI+Hy+"?",Hy,wI,xI,bde].join("|")+")",SI=RegExp(Wy+"(?="+Wy+")|"+Sde+_de,"g");function Tde(t){for(var e=SI.lastIndex=0;SI.test(t);)++e;return e}var kde=Tde,Ode=hde,Ede=rv,Pde=kde;function Ide(t){return Ede(t)?Pde(t):Ode(t)}var TI=Ide,kI=ude,Ade=J_,Nde=dS,Dde=rv,Rde=TI,Mde=yS,Lde=Math.ceil;function Fde(t,e){e=e===void 0?" ":Ade(e);var n=e.length;if(n<2)return n?kI(e,t):e;var r=kI(e,Lde(t/Rde(e)));return Dde(e)?Nde(Mde(r),0,t).join(""):r.slice(0,t)}var Bde=Fde,jde=Bde,$de=TI,Ude=XP,zde=Zo;function Hde(t,e,n){t=zde(t),e=Ude(e);var r=e?$de(t):0;return e&&r<e?jde(e-r,n)+t:t}var OI=Hde;function EI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function PI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}ke.extend(Ac);var wo=[hn.hour,hn.minute,hn.second,hn.milliSecond],Wde={top:15},Kde=l.defineComponent({name:"TTimePickerPanelCol",props:PI(PI({},Yue()),{},{position:String,triggerScroll:Boolean,onChange:Function,resetTriggerScroll:Function,isShowPanel:Boolean}),setup:function(e){var n=Qe("timePicker"),r=n.globalConfig,a=ve("time-picker__panel"),i=Lt(),o=i.STATUS,s=l.toRefs(e),c=s.steps,u=s.value,d=s.format,f=s.position,h=s.triggerScroll,v=l.ref([]),p=l.ref(),g=l.ref(null),m=l.reactive({0:null,1:null,2:null,3:null,4:null,5:null}),y=l.computed(function(){var T=!!c.value.filter(function(k){return Number(k)>1}).length;return u.value?ke(u.value,d.value):T?ke().hour(0).minute(0).second(0):ke()});l.watch(function(){return y.value},function(){y.value&&u.value&&N(!0)}),l.watch(function(){return h.value},function(){h.value&&N(!0)}),l.onMounted(function(){v.value=Jue(d.value)});var b=function(){var k,E=(k=g.value)===null||k===void 0?void 0:k.querySelector("div");return E?{offsetHeight:parseFloat(getComputedStyle(E).height),margin:parseFloat(getComputedStyle(E).marginTop)}:{offsetHeight:0,margin:0}},w=function(k,E){var I=wo.indexOf(k);if(I!==-1){var A,M=[y.value.hour(),y.value.minute(),y.value.second(),y.value.millisecond()];return M[I]=Number(E),!((A=e.disableTime)!==null&&A!==void 0&&(A=A.call.apply(A,[e].concat(M,[{partial:f.value||"start"}])))!==null&&A!==void 0&&(A=A[k])!==null&&A!==void 0&&A.includes(Number(E)))}return!0},x=function(k){var E=0;if(wo.includes(k)){var I=wo.indexOf(k),A=c.value[I]||1;k===hn.hour?E=vI.test(d.value)?11:23:k===hn.milliSecond?E=999:E=59;var M=mI(0,E+1,Number(A)).map(function($){return OI(String($),2,"0")})||[];return e.hideDisabledTime&&e.disableTime?M.filter(function($){var U,F=[y.value.hour(),y.value.minute(),y.value.second(),y.value.millisecond()];return F[I]=Number($),!((U=e.disableTime)!==null&&U!==void 0&&(U=U.call.apply(U,[e].concat(F,[{partial:f.value||"start"}])))!==null&&U!==void 0&&(U=U[k])!==null&&U!==void 0&&U.includes(Number($)))}):M}return hI},C=function(k,E){k===hn.hour&&/[h]{1}/.test(d.value)&&(E%=12);var I=x(k).indexOf(OI(String(E),2,"0")),A=b(),M=A.offsetHeight,$=A.margin,U=M+$,F=Math.abs(Math.max(0,I)*U);return F},S=function(k,E,I){var A,M,$,U;if(e.isShowPanel){var F=(((A=m[E])===null||A===void 0?void 0:A.scrollTop)||0)+Wde.top,j=b(),W=j.offsetHeight,H=j.margin,J=W+H,Y=Math.abs(Math.round(F/J+.5)),D=hI[Math.min(Y-1,1)].toLowerCase();if(Number.isNaN(Y)&&(Y=1),wo.includes(k)){var q=59;k===hn.hour?q=/[h]{1}/.test(d.value)?11:23:k===hn.milliSecond&&(q=999);var z=wo.indexOf(k),K=mI(0,q+1,Number(c.value[z])||1);$=Xue(K,Number(x(k)[Math.min(Y-1,q+1,K.length-1)]),Number(c.value[z])||1),Number.isNaN($)&&($=K[K.length-1]),k===hn.hour&&v.value.includes(hn.meridiem)&&y.value.hour()>=12&&($=Number($)+12)}else $=D;var P=C(k,$);if(!(!ke(y.value).isValid()||u.value&&!ke(u.value,d.value,!0).isValid())){if(wo.includes(k)){var R,X;w(k,$)?U=(R=(X=y.value)[k])===null||R===void 0?void 0:R.call(X,$).format(d.value):U=y.value.format(d.value)}else{var ee=y.value.hour();D===Wv&&ee>=12?U=y.value.hour(ee-12).format(d.value):D===Kv&&ee<12?U=y.value.hour(ee+12).format(d.value):U=y.value.format(d.value)}if(U!==u.value&&((M=e.onChange)===null||M===void 0||M.call(e,U,I)),P!==F){var re,ae=m[v.value.indexOf(k)];if(!ae||ae.scrollTop===P)return;(re=ae.scrollTo)===null||re===void 0||re.call(ae,{top:P,behavior:"smooth"})}}}},_=function(k,E,I){var A,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"auto",$=C(k,E),U=m[I];!U||U.scrollTop===$||!w(k,E)||(A=U.scrollTo)===null||A===void 0||A.call(U,{top:$,behavior:M})},O=function(k,E,I,A){if(w(k,E))if(wo.includes(k))k===hn.hour&&y.value.format("a")===Kv&&v.value.includes(hn.meridiem)&&(E=Number(E)+12),_(k,E,I,"smooth");else{var M=y.value.hour();if(E===Wv&&M>=12){var $;($=e.onChange)===null||$===void 0||$.call(e,y.value.hour(M-12).format(d.value),A)}else if(E===Kv&&M<12){var U;(U=e.onChange)===null||U===void 0||U.call(e,y.value.hour(M+12).format(d.value),A)}}},N=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,E=u.value&&!k?"smooth":"auto",I=!!c.value.filter(function(A){return Number(A)>1}).length;l.nextTick(function(){v.value.forEach(function(A,M){if(!I||I&&u.value){var $,U;_(A,wo.includes(A)?($=(U=y.value)[A])===null||$===void 0?void 0:$.call(U):y.value.format("a"),M,E)}else{var F;_(A,(F=x(A))===null||F===void 0?void 0:F[0],M,E)}})}),e.resetTriggerScroll()},B=function(k,E){var I,A,M;if(k===hn.meridiem){var $=y.value.format("a");return $===E}return M=(I=(A=y.value)[k])===null||I===void 0?void 0:I.call(A),k===hn.hour&&/[h]{1}/.test(d.value)&&(M%=12),M===Number(E)};return function(){var T,k,E,I;return l.createVNode("div",{class:"".concat(a.value,"-body"),ref:p},[l.createVNode("div",{class:"".concat(a.value,"-body-active-mask"),ref:g},[(T=(k=v.value).map)===null||T===void 0?void 0:T.call(k,function(A,M){return l.createVNode("div",{key:"".concat(A,"_").concat(M)},null)})]),(E=(I=v.value).map)===null||E===void 0?void 0:E.call(I,function(A,M){return l.createVNode("ul",{key:"".concat(A,"_").concat(M),ref:function(U){return m[M]=U},class:"".concat(a.value,"-body-scroll"),onScroll:fo(function($){return S(A,M,$)},50)},[x(A).map(function($){return l.createVNode("li",{key:$,class:["".concat(a.value,"-body-scroll-item"),V(V({},o.value.disabled,!w(A,$)),o.value.current,B(A,$))],onClick:function(F){return O(A,$,M,F)}},[wo.includes(A)?vI.test(d.value)&&A===hn.hour&&$==="00"?"12":$:r.value[$===Wv?"anteMeridiem":"postMeridiem"]])})])})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function II(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function AI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?II(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):II(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qde(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}ke.extend(Ac);var Yv=l.defineComponent({name:"TTimePickerPanel",props:AI(AI({},Gue()),{},{isFooterDisplay:Boolean,handleConfirmClick:Function,onChange:Function}),setup:function(e){var n=Qe("timePicker"),r=n.globalConfig,a=ve("time-picker__panel"),i=l.toRefs(e),o=i.steps,s=i.isFooterDisplay,c=i.isShowPanel,u=l.ref(!1),d=l.ref(),f=l.computed(function(){return!!o.value.filter(function(y){return Number(y)>1}).length}),h=l.computed(function(){var y=f.value,b=ke(e.value,e.format);return e.value&&b.isValid()?b.format(e.format):ke().hour(0).minute(0).second(0).format(e.format)}),v=function(){l.nextTick(function(){u.value=!0})},p=function(){u.value=!1},g=function(b){var w=typeof b=="function"?b():b;if(typeof e.activeIndex=="number")if(Array.isArray(w)){var x;(x=e.onChange)===null||x===void 0||x.call(e,w[e.activeIndex])}else st.error("TimePicker","preset: ".concat(e.presets," 预设值必须是数组!"));else{var C;(C=e.onChange)===null||C===void 0||C.call(e,w)}},m=function(){return Bn(e.presets)?f.value?null:l.createVNode(cv,{theme:"primary",variant:"text",size:"small",onClick:function(){var w;return(w=e.onChange)===null||w===void 0?void 0:w.call(e,ke().format(e.format))}},{default:function(){return[r.value.now]}}):Object.keys(e.presets||[]).map(function(b){return l.createVNode(cv,{key:b,theme:"primary",size:"small",variant:"text",onClick:function(){return g(e.presets[b])}},qde(b)?b:{default:function(){return[b]}})})};return l.onMounted(function(){v()}),l.watch(function(){return c.value},function(){v()}),function(){return l.createVNode("div",{class:a.value},[l.createVNode("div",{class:"".concat(a.value,"-section-body")},[l.createVNode(Kde,l.mergeProps(e,{ref:d,format:e.format||Kue,steps:e.steps||Wue,value:ke(e.value,e.format).isValid()?e.value:h.value,triggerScroll:u.value,onChange:e.onChange,resetTriggerScroll:p,isShowPanel:e.isShowPanel}),null)]),s.value?l.createVNode("div",{class:"".concat(a.value,"-section-footer")},[l.createVNode(cv,{theme:"primary",variant:"base",disabled:!e.value,onClick:function(){var b;return(b=e.handleConfirmClick)===null||b===void 0?void 0:b.call(e,h.value)},size:"small"},{default:function(){return[r.value.confirm]}}),m()]):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function NI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Gde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Xv=l.defineComponent({name:"TPanelContent",props:{mode:String,format:String,enableTimePicker:Boolean,timePickerProps:{type:Object,default:function(){return{}}},year:Number,month:Number,tableData:Array,time:String,multiple:Boolean,firstDayOfWeek:Number,partial:String,popupVisible:Boolean,onYearChange:Function,onMonthChange:Function,onJumperClick:Function,onCellMouseEnter:Function,onCellClick:Function,onCellMouseLeave:Function,onTimePickerChange:Function,value:[String,Number,Array,Date]},setup:function(e){var n=ve("date-picker__panel"),r=ii({mode:e.mode,format:e.format,enableTimePicker:e.enableTimePicker}),a=r.timeFormat,i="00:00:00";return function(){return l.createVNode("div",{class:"".concat(n.value,"-content")},[l.createVNode("div",{class:"".concat(n.value,"-").concat(e.mode)},[l.createVNode(jue,{mode:e.mode,year:e.year,month:e.month,onMonthChange:function(s){var c;return(c=e.onMonthChange)===null||c===void 0?void 0:c.call(e,s,{partial:e.partial})},onYearChange:function(s){var c;return(c=e.onYearChange)===null||c===void 0?void 0:c.call(e,s,{partial:e.partial})},onJumperClick:function(s){var c,u=s.trigger;return(c=e.onJumperClick)===null||c===void 0?void 0:c.call(e,{trigger:u,partial:e.partial})}},null),l.createVNode(Hue,{mode:e.mode,data:e.tableData,time:e.time,value:e.value,format:e.format,multiple:e.multiple,firstDayOfWeek:e.firstDayOfWeek,onCellClick:function(s,c){var u,d=c.e;return(u=e.onCellClick)===null||u===void 0?void 0:u.call(e,s,{e:d,partial:e.partial})},onCellMouseEnter:function(s){var c;return(c=e.onCellMouseEnter)===null||c===void 0?void 0:c.call(e,s,{partial:e.partial})},onCellMouseLeave:e.onCellMouseLeave},null)]),e.enableTimePicker&&l.createVNode("div",{class:"".concat(n.value,"-time")},[l.createVNode("div",{class:"".concat(n.value,"-time-viewer")},[e.time||i]),l.createVNode(Yv,Gde({key:e.partial,isShowPanel:e.popupVisible,format:a,value:e.time||i,onChange:e.onTimePickerChange},e.timePickerProps),null)])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function DI(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Yde=l.defineComponent({name:"TDatePickerTable",props:{enableTimePicker:Boolean,presetsPlacement:String,presets:Object,needConfirm:{type:Boolean,default:!0},selectedValue:[String,Number,Array,Date],onPresetClick:Function,onConfirmClick:Function},setup:function(e){var n=ve("date-picker__footer"),r=ve("date-picker__presets"),a=Qe("datePicker"),i=a.t,o=a.globalConfig,s=l.computed(function(){return[n.value,"".concat(n.value,"--").concat(e.presetsPlacement)]});return function(){var c;return l.createVNode("div",{class:s.value},[l.createVNode("div",{class:r.value},[e.presets&&Object.keys(e.presets).map(function(u){return l.createVNode(zt,{key:u,size:"small",variant:"text",onClick:function(f){var h;return(h=e.onPresetClick)===null||h===void 0?void 0:h.call(e,e.presets[u],{e:f,preset:V({},u,e.presets[u])})}},DI(u)?u:{default:function(){return[u]}})})]),e.enableTimePicker&&e.needConfirm&&l.createVNode(zt,{disabled:!e.selectedValue,size:"small",theme:"primary",onClick:function(d){var f;return(f=e.onConfirmClick)===null||f===void 0?void 0:f.call(e,{e:d})}},DI(c=i(o.value.confirm))?c:{default:function(){return[c]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jv=l.defineComponent({name:"TExtraContent",props:{presets:Object,enableTimePicker:Boolean,presetsPlacement:String,needConfirm:{type:Boolean,default:!0},onPresetClick:Function,onConfirmClick:Function,selectedValue:[String,Number,Array,Date]},setup:function(e){var n=l.computed(function(){return e.enableTimePicker&&e.needConfirm||e.presets});return function(){return n.value?l.createVNode(Yde,{presets:e.presets,onPresetClick:e.onPresetClick,enableTimePicker:e.enableTimePicker,onConfirmClick:e.onConfirmClick,presetsPlacement:e.presetsPlacement,selectedValue:e.selectedValue,needConfirm:e.needConfirm},null):null}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ky(t){var e,n=Qe("datePicker"),r=n.globalConfig,a={minDate:t.minDate,maxDate:t.maxDate,disableDate:t.disableDate,firstDayOfWeek:(e=t.firstDayOfWeek)!==null&&e!==void 0?e:r.value.firstDayOfWeek,monthLocal:r.value.months,quarterLocal:r.value.quarters,showWeekOfYear:t.mode==="week",dayjsLocale:r.value.dayjsLocale,cancelRangeSelectLimit:t.cancelRangeSelectLimit},i=[];return t.mode==="date"?i=lI({year:t.year,month:t.month},a):t.mode==="week"?i=lI({year:t.year,month:t.month},a):t.mode==="quarter"?i=Aue(t.year,a):t.mode==="month"?i=Due(t.year,a):t.mode==="year"&&(i=Nue(t.year,a)),Rue(i,{start:t.start,end:t.end,hoverStart:t.hoverStart,hoverEnd:t.hoverEnd,type:t.mode,isRange:t.isRange,value:t.value,multiple:t.multiple})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function RI(t){return{disableDate:function(n){return!Xde({disableDate:t.disableDate,format:t.format,mode:t.mode,value:n})},minDate:ot(t.disableDate)&&"before"in t.disableDate?new Date(t.disableDate.before):t.start,maxDate:ot(t.disableDate)&&"after"in t.disableDate?new Date(t.disableDate.after):t.end}}function Xde(t){if(!t.disableDate)return!0;var e=!0;if(Re(t.disableDate))return!t.disableDate(t.value);if(Ke(t.disableDate)){var n=!1,r=t.disableDate.map(function(h){return ke(h,t.format)});return r.forEach(function(h){h.isSame(ke(t.value))&&(n=!0)}),!n}if(t.disableDate.from&&t.disableDate.to){var a=ke(new Date(t.disableDate.from)),i=ke(new Date(t.disableDate.to));return!ke(t.value).isBetween(a,i,t.mode,"[]")}var o=t.disableDate.before?new Date(t.disableDate.before):null,s=t.disableDate.after?new Date(t.disableDate.after):null;if(s&&o){var c=ke(new Date(o)),u=ke(new Date(s));e=ke(t.value).isBetween(c,u,t.mode,"[]")}else if(o){var d=ke(new Date(o));e=!ke(t.value).isBefore(d,t.mode)}else if(s){var f=ke(new Date(s));e=!ke(t.value).isAfter(f,t.mode)}return e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function MI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Jde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var LI=l.defineComponent({name:"TSinglePanel",props:{disableDate:[Object,Array,Function],mode:{type:String,default:"date"},format:String,presetsPlacement:{type:String,default:"bottom"},value:[String,Number,Array,Date],timePickerProps:Object,presets:Object,enableTimePicker:Boolean,firstDayOfWeek:Number,year:Number,month:Number,time:String,popupVisible:Boolean,multiple:Boolean,needConfirm:{type:Boolean,default:!0},onPanelClick:Function,onCellClick:Function,onCellMouseEnter:Function,onCellMouseLeave:Function,onJumperClick:Function,onConfirmClick:Function,onPresetClick:Function,onYearChange:Function,onMonthChange:Function,onTimePickerChange:Function},setup:function(e){var n=ve("date-picker__panel"),r=Qe("datePicker"),a=r.globalConfig,i=l.computed(function(){var d;return(d=ii({mode:e.mode,format:e.format,enableTimePicker:e.enableTimePicker}))===null||d===void 0?void 0:d.format}),o=l.computed(function(){return RI({format:i.value,mode:e.mode,disableDate:e.disableDate})}),s=l.computed(function(){return Ky(Jde({year:e.year,month:e.month,mode:e.mode,start:e.value?rt(e.multiple?e.value[0]:e.value,i.value).toDate():void 0,firstDayOfWeek:e.firstDayOfWeek||a.value.firstDayOfWeek,multiple:e.multiple,value:e.value},o.value))}),c=l.computed(function(){return{format:i.value,value:e.value,mode:e.mode,year:e.year,month:e.month,firstDayOfWeek:e.firstDayOfWeek||a.value.firstDayOfWeek,tableData:s.value,popupVisible:e.popupVisible,multiple:e.multiple,enableTimePicker:e.enableTimePicker,timePickerProps:e.timePickerProps,time:e.time,onMonthChange:e.onMonthChange,onYearChange:e.onYearChange,onJumperClick:e.onJumperClick,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter,onCellMouseLeave:e.onCellMouseLeave,onTimePickerChange:e.onTimePickerChange}}),u=l.computed(function(){return{presets:e.presets,enableTimePicker:e.enableTimePicker,presetsPlacement:e.presetsPlacement,onPresetClick:e.onPresetClick,onConfirmClick:e.onConfirmClick,selectedValue:e.value,needConfirm:e.needConfirm}});return function(){return l.createVNode("div",{class:[n.value,V({},"".concat(n.value,"--direction-row"),["left","right"].includes(e.presetsPlacement))],onClick:function(f){var h;return(h=e.onPanelClick)===null||h===void 0?void 0:h.call(e,{e:f})}},[["top","left"].includes(e.presetsPlacement)?l.createVNode(Jv,u.value,null):null,l.createVNode(Xv,c.value,null),["bottom","right"].includes(e.presetsPlacement)?l.createVNode(Jv,u.value,null):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qde=_i,Zde=oa,Vde="[object Date]";function efe(t){return Zde(t)&&Qde(t)==Vde}var tfe=efe,nfe=tfe,rfe=tc,FI=Ll.exports,BI=FI&&FI.isDate,afe=BI?rfe(BI):nfe,ife=afe;function jI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ofe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var lfe=l.defineComponent({name:"TDatePicker",props:ofe({},fa),setup:function(e){var n=ve("date-picker"),r=Bue(e),a=r.inputValue,i=r.popupVisible,o=r.inputProps,s=r.popupProps,c=r.isHoverCell,u=r.cacheValue,d=r.value,f=r.year,h=r.month,v=r.time,p=r.inputRef,g=r.onChange,m=Vt(),y=We(),b=Qe("datePicker"),w=b.globalConfig,x=Pn(),C=St({CalendarIcon:p2}),S=C.CalendarIcon,_=l.computed(function(){return ii({mode:e.mode,format:e.format,valueType:e.valueType,enableTimePicker:e.multiple?!1:e.enableTimePicker})}),O=l.computed(function(){return{value:d.value,displayValue:a.value}});l.watch(i,function(H){var J;if(!e.multiple){if(!e.needConfirm&&e.enableTimePicker&&!H){var Y=pt(a.value,{format:_.value.format});Y?g==null||g(pt(a.value,{format:_.value.format,targetFormat:_.value.valueType}),{dayjsValue:rt(a.value,_.value.format),trigger:"confirm"}):a.value=pt(d.value,{format:_.value.format})}var D=d.value&&!ife(d.value)&&!["week","quarter"].includes(e.mode)?Mue(d.value,(J=_.value)===null||J===void 0?void 0:J.valueType):d.value;u.value=pt(D,{format:_.value.valueType,targetFormat:_.value.format}),a.value=pt(D,{format:_.value.valueType,targetFormat:_.value.format}),H?(f.value=rt(d.value,_.value.valueType).year(),h.value=rt(d.value,_.value.format).month(),v.value=Rc(d.value,_.value.format,_.value.timeFormat,e.defaultTime)):c.value=!1}});function N(H){e.multiple||(c.value=!0,a.value=pt(H,{format:_.value.format}))}function B(){e.multiple||(c.value=!1,a.value=pt(u.value,{format:_.value.format}))}function T(H){var J;if(c.value=!1,e.mode==="date"&&(f.value=H.getFullYear(),h.value=H.getMonth()),e.enableTimePicker)u.value=pt(H,{format:_.value.format});else{if(e.multiple){var Y=k(H);g(Y,{dayjsValue:rt(H,_.value.format),trigger:"pick"});return}g==null||g(pt(H,{format:_.value.format,targetFormat:_.value.valueType}),{dayjsValue:rt(H,_.value.format),trigger:"pick"}),i.value=!1}(J=e.onPick)===null||J===void 0||J.call(e,H)}function k(H){var J,Y=d.value||[],D=w.value.dayjsLocale,q;return e.mode!=="week"?J=Y.some(function(z){return ai(rt(z,_.value.format).toDate(),H,e.mode,D)}):J=Y.some(function(z){return z===ke(H).locale(D).format(_.value.format)}),J?q=Y.filter(function(z){return pt(z,{format:_.value.format,targetFormat:_.value.valueType})!==pt(H,{format:_.value.format,targetFormat:_.value.valueType})}):q=Y.concat(pt(H,{format:_.value.format,targetFormat:_.value.valueType})),q}function E(H){var J=ke(H.item).toDate(),Y=k(J);g==null||g(Y,{dayjsValue:rt(J,_.value.format),trigger:"tag-remove"})}function I(H){var J=H.e;J.stopPropagation(),i.value=!1,g==null||g([],{dayjsValue:ke(),trigger:"clear"})}function A(H){var J=H.trigger,Y={date:1,week:1,month:12,quarter:12,year:120},D=Y[e.mode]||0,q=new Date(f.value,h.value),z=null;J==="prev"?z=Uv(q,D):J==="current"?z=new Date:J==="next"&&(z=zv(q,D));var K=z.getFullYear(),P=z.getMonth();f.value=K,h.value=P}function M(H){var J;v.value=H;var Y=Dc(H),D=Y.hours,q=Y.minutes,z=Y.seconds,K=Y.milliseconds,P=Y.meridiem,R=D;/am/i.test(P)&&R===12&&(R-=12),/pm/i.test(P)&&R<12&&(R+=12);var X=ke(a.value,_.value.format).isValid()?ke(a.value,_.value.format):ke(),ee=X.hour(R).minute(q).second(z).millisecond(K).toDate();a.value=pt(ee,{format:_.value.format}),u.value=pt(ee,{format:_.value.format}),(J=e.onPick)===null||J===void 0||J.call(e,ee)}function $(H){var J=H.e,Y=pt(a.value,{format:_.value.format});if(Y){var D;e==null||(D=e.onConfirm)===null||D===void 0||D.call(e,{date:ke(Y).toDate(),e:J}),g==null||g(pt(a.value,{format:_.value.format,targetFormat:_.value.valueType}),{dayjsValue:rt(a.value,_.value.format),trigger:"confirm"})}else a.value=pt(d.value,{format:_.value.format});i.value=!1}function U(H){var J=Re(H)?H():H;g==null||g(pt(J,{format:_.value.format,targetFormat:_.value.valueType}),{dayjsValue:rt(J,_.value.format),trigger:"preset"}),a.value=pt(J,{format:_.value.format}),i.value=!1}function F(H){f.value=H}function j(H){h.value=H}var W=l.computed(function(){return{value:u.value,year:f.value,month:h.value,format:_.value.format,mode:e.mode,presets:e.presets,multiple:e.multiple,time:e.multiple?"":v.value,disableDate:e.disableDate,firstDayOfWeek:e.firstDayOfWeek,timePickerProps:e.timePickerProps,enableTimePicker:e.multiple?!1:e.enableTimePicker,presetsPlacement:e.presetsPlacement,popupVisible:i.value,needConfirm:e.needConfirm,onCellClick:T,onCellMouseEnter:N,onCellMouseLeave:B,onJumperClick:A,onConfirmClick:$,onPresetClick:U,onYearChange:F,onMonthChange:j,onTimePickerChange:M,onPanelClick:function(){var J,Y;return(J=p.value)===null||J===void 0||(Y=J.focus)===null||Y===void 0?void 0:Y.call(J)}}});return function(){return l.createVNode("div",{class:n.value},[l.createVNode(Ec,l.mergeProps({borderless:e.borderless,disabled:m.value,value:a.value,label:e.label,status:e.status,tips:e.tips,clearable:e.clearable,multiple:e.multiple,popupProps:s.value,inputProps:o.value,placeholder:e.placeholder||w.value.placeholder[e.mode],popupVisible:!x.value&&i.value,valueDisplay:function(){return y("valueDisplay",{params:O.value})},needConfirm:e.needConfirm},e.selectInputProps,{panel:function(){return l.createVNode(LI,W.value,null)},tagInputProps:{onRemove:E},onClear:I,prefixIcon:y("prefixIcon"),suffixIcon:function(){return y("suffixIcon")||l.createVNode(S,null,null)}}),null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var sfe={defaultTime:{type:String,default:"00:00:00"},onCellClick:Function,onChange:Function,onConfirm:Function,onMonthChange:Function,onPanelClick:Function,onPresetClick:Function,onTimeChange:Function,onYearChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function cfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ufe=l.defineComponent({name:"TDatePickerPanel",props:cfe({value:fa.value,defaultValue:fa.defaultValue,modelValue:fa.modelValue,disabled:fa.disabled,disableDate:fa.disableDate,enableTimePicker:fa.enableTimePicker,firstDayOfWeek:fa.firstDayOfWeek,format:fa.format,mode:fa.mode,presets:fa.presets,presetsPlacement:fa.presetsPlacement,timePickerProps:fa.timePickerProps},sfe),setup:function(e){var n=cI(e),r=n.cacheValue,a=n.value,i=n.year,o=n.month,s=n.time,c=n.onChange,u=l.computed(function(){return ii({mode:e.mode,format:e.format,enableTimePicker:e.enableTimePicker})});function d(b,w){var x,C=w.e;(x=e.onCellClick)===null||x===void 0||x.call(e,{date:b,e:C}),e.mode==="date"&&(i.value=b.getFullYear(),o.value=b.getMonth()),e.enableTimePicker?r.value=pt(b,{format:u.value.format}):c==null||c(pt(b,{format:u.value.format}),{dayjsValue:rt(b,u.value.format),trigger:"pick"})}function f(b){var w=b.trigger,x={prev:"arrow-previous",next:"arrow-next"},C={date:1,week:1,month:12,quarter:12,year:120},S=C[e.mode]||0,_=new Date(i.value,o.value),O=null;w==="prev"?O=Uv(_,S):w==="current"?O=new Date:w==="next"&&(O=zv(_,S));var N=O.getFullYear(),B=O.getMonth();if(i.value!==N){var T;(T=e.onYearChange)===null||T===void 0||T.call(e,{year:N,date:ke(a.value).toDate(),trigger:w==="current"?"today":"year-".concat(x[w])})}if(o.value!==B){var k;(k=e.onMonthChange)===null||k===void 0||k.call(e,{month:B,date:ke(a.value).toDate(),trigger:w==="current"?"today":"month-".concat(x[w])})}i.value=N,o.value=B}function h(b){var w;s.value=b;var x=Dc(b),C=x.hours,S=x.minutes,_=x.seconds,O=x.milliseconds,N=x.meridiem,B=C;/am/i.test(N)&&B===12&&(B-=12),/pm/i.test(N)&&B<12&&(B+=12);var T=ke(r.value,u.value.format).isValid()?ke(r.value,u.value.format):ke(),k=T.hour(B).minute(S).second(_).millisecond(O).toDate();r.value=pt(k,{format:u.value.format}),(w=e.onTimeChange)===null||w===void 0||w.call(e,{time:b,date:ke(a.value).toDate(),trigger:"time-hour"})}function v(b){var w,x=b.e;c==null||c(pt(r.value,{format:u.value.format}),{dayjsValue:rt(r.value,u.value.format),trigger:"confirm"}),(w=e.onConfirm)===null||w===void 0||w.call(e,{date:ke(r.value).toDate(),e:x})}function p(b,w){var x,C=Re(b)?b():b;c==null||c(pt(C,{format:u.value.format}),{dayjsValue:rt(C,u.value.format),trigger:"preset"}),(x=e.onPresetClick)===null||x===void 0||x.call(e,w)}function g(b){var w;i.value=b,(w=e.onYearChange)===null||w===void 0||w.call(e,{year:i.value,date:ke(a.value).toDate(),trigger:"year-select"})}function m(b){var w;o.value=b,(w=e.onMonthChange)===null||w===void 0||w.call(e,{month:o.value,date:ke(a.value).toDate(),trigger:"month-select"})}var y=l.computed(function(){return{value:r.value,year:i.value,month:o.value,mode:e.mode,format:u.value.format,presets:e.presets,time:s.value,disableDate:e.disableDate,firstDayOfWeek:e.firstDayOfWeek,timePickerProps:e.timePickerProps,enableTimePicker:e.enableTimePicker,presetsPlacement:e.presetsPlacement,popupVisible:!0,panelClick:e.onPanelClick,onCellClick:d,onJumperClick:f,onConfirmClick:v,onPresetClick:p,onYearChange:g,onMonthChange:m,onTimePickerChange:h}});return function(){return l.createVNode(LI,y.value,null)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wr={allowInput:Boolean,borderless:Boolean,cancelRangeSelectLimit:Boolean,clearable:Boolean,defaultTime:{type:Array,default:function(){return["00:00:00","23:59:59"]}},disableDate:{type:[Object,Array,Function]},disabled:{type:Boolean,default:void 0},enableTimePicker:Boolean,firstDayOfWeek:{type:Number,validator:function(e){return e?[1,2,3,4,5,6,7].includes(e):!0}},format:{type:String,default:""},label:{type:[String,Function]},mode:{type:String,default:"date",validator:function(e){return e?["year","quarter","month","week","date"].includes(e):!0}},needConfirm:{type:Boolean,default:!0},panelPreselection:{type:Boolean,default:!0},placeholder:{type:[String,Array]},popupProps:{type:Object},prefixIcon:{type:Function},presets:{type:Object},presetsPlacement:{type:String,default:"bottom",validator:function(e){return e?["left","top","right","bottom"].includes(e):!0}},rangeInputProps:{type:Object},readonly:{type:Boolean,default:void 0},separator:{type:String,default:""},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffixIcon:{type:Function},timePickerProps:{type:Object},tips:{type:[String,Function]},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},valueType:{type:String,validator:function(e){return e?["time-stamp","Date","YYYY","YYYY-MM","YYYY-MM-DD","YYYY-MM-DD HH","YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm:ss:SSS"].includes(e):!0}},onBlur:Function,onChange:Function,onConfirm:Function,onFocus:Function,onInput:Function,onPick:Function,onPresetClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var dfe={activeIndex:{type:Number},borderless:Boolean,clearable:Boolean,disabled:{type:Boolean,default:void 0},format:{type:[Array,Function]},inputProps:{type:[Object,Array]},label:{type:[String,Function]},placeholder:{type:[String,Array]},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},separator:{type:[String,Function],default:"-"},showClearIconOnEmpty:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tips:{type:[String,Function]},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onBlur:Function,onChange:Function,onClear:Function,onClick:Function,onEnter:Function,onFocus:Function,onMouseenter:Function,onMouseleave:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function UI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qy(t){return Ke(t)?t:[t,t]}var HI=l.defineComponent({name:"TRangeInput",inheritAttrs:!1,props:dfe,setup:function(e,n){var r=n.expose,a=n.attrs,i=l.toRefs(e),o=i.value,s=i.modelValue,c=Lt(),u=c.STATUS,d=c.SIZE,f=ve(),h=ve("range-input"),v=St({CloseCircleFilledIcon:gc}),p=v.CloseCircleFilledIcon,g=We(),m=Vt(),y=Pn(),b=l.ref(!1),w=l.ref(!1),x=l.computed(function(){return qy(e.format)}),C=l.computed(function(){return qy(e.inputProps)}),S=l.computed(function(){return qy(e.placeholder)}),_=Mt(o,s,e.defaultValue,e.onChange),O=$e(_,2),N=O[0],B=O[1],T=l.computed(function(){var j,W,H;return String((j=((W=N.value)===null||W===void 0?void 0:W[0])||((H=N.value)===null||H===void 0?void 0:H[1]))!==null&&j!==void 0?j:"")}),k=l.computed(function(){var j;return(e.clearable&&((j=T.value)===null||j===void 0?void 0:j.length)&&!m.value||e.showClearIconOnEmpty)&&w.value}),E={firstInputRef:l.ref(),secondInputRef:l.ref()};function I(j){var W;(W=e.onClear)===null||W===void 0||W.call(e,j),B(["",""],zI(zI({},j),{},{trigger:"clear",position:"all"}))}function A(j,W){var H;(H=e.onEnter)===null||H===void 0||H.call(e,j,W)}function M(j,W){var H;b.value=!0,(H=e.onFocus)===null||H===void 0||H.call(e,j,W)}function $(j,W){var H;b.value=!1,(H=e.onBlur)===null||H===void 0||H.call(e,j,W)}function U(j){var W;w.value=!0,e==null||(W=e.onMouseenter)===null||W===void 0||W.call(e,{e:j})}function F(j){var W;w.value=!1,e==null||(W=e.onMouseleave)===null||W===void 0||W.call(e,{e:j})}return r({firstInputElement:E.firstInputRef.value,secondInputElement:E.secondInputRef.value,focus:function(W){var H,J=W||{},Y=J.position,D=Y===void 0?"first":Y;(H=E["".concat(D,"InputRef")].value)===null||H===void 0||H.focus()},blur:function(W){var H,J=W||{},Y=J.position,D=Y===void 0?"first":Y;(H=E["".concat(D,"InputRef")].value)===null||H===void 0||H.blur()},select:function(W){var H,J=W||{},Y=J.position,D=Y===void 0?"first":Y;(H=E["".concat(D,"InputRef")].value)===null||H===void 0||H.select()}}),function(){var j,W,H=g("label"),J=g("prefixIcon"),Y=g("suffix"),D=g("suffixIcon"),q=g("tips"),z=g("separator"),K=l.createVNode("div",l.mergeProps(a,{class:[h.value,V(V(V(V(V(V(V(V(V({},d.value[e.size],e.size!=="medium"),u.value.disabled,m.value),u.value.focused,b.value),u.value.success,e.status==="success"),u.value.warning,e.status==="warning"),u.value.error,e.status==="error"),"".concat(h.value,"--prefix"),J||H),"".concat(h.value,"--suffix"),Y||D),"".concat(h.value,"--borderless"),e.borderless)],onMouseenter:U,onMouseleave:F}),[l.createVNode("div",{class:"".concat(h.value,"__inner")},[J&&l.createVNode("div",{class:"".concat(h.value,"__prefix")},[J]),H?l.createVNode("div",{class:"".concat(h.value,"__prefix")},[H]):null,l.createVNode(Va,l.mergeProps({ref:E.firstInputRef,class:"".concat(h.value,"__inner-left"),inputClass:V({},"".concat(f.value,"-is-focused"),e.activeIndex===0),placeholder:S.value[0],disabled:m.value,readonly:y.value,format:x.value[0],value:(j=N.value)===null||j===void 0?void 0:j[0],onClick:function(X){var ee,re=X.e;return(ee=e.onClick)===null||ee===void 0?void 0:ee.call(e,{e:re,position:"first"})},onClear:function(){return B([],{position:"first",trigger:"input"})},onEnter:function(X,ee){var re,ae=ee.e;return A([X,(re=N.value)===null||re===void 0?void 0:re[1]],{e:ae,position:"first"})},onFocus:function(X,ee){var re,ae=ee.e;return M([X,(re=N.value)===null||re===void 0?void 0:re[1]],{e:ae,position:"first"})},onBlur:function(X,ee){var re,ae=ee.e;return $([X,(re=N.value)===null||re===void 0?void 0:re[1]],{e:ae,position:"first"})},onChange:function(X,ee){var re,ae=ee.e;return B([X,(re=N.value)===null||re===void 0?void 0:re[1]],{e:ae,position:"first",trigger:"input"})}},C.value[0]),null),l.createVNode("div",{class:"".concat(h.value,"__inner-separator")},[z]),l.createVNode(Va,l.mergeProps({ref:E.secondInputRef,class:"".concat(h.value,"__inner-right"),inputClass:V({},"".concat(f.value,"-is-focused"),e.activeIndex===1),placeholder:S.value[1],disabled:m.value,readonly:y.value,format:x.value[1],value:(W=N.value)===null||W===void 0?void 0:W[1],onClick:function(X){var ee,re=X.e;return(ee=e.onClick)===null||ee===void 0?void 0:ee.call(e,{e:re,position:"second"})},onClear:function(){return B([],{position:"second",trigger:"input"})},onEnter:function(X,ee){var re,ae=ee.e;return A([(re=N.value)===null||re===void 0?void 0:re[0],X],{e:ae,position:"second"})},onFocus:function(X,ee){var re,ae=ee.e;return M([(re=N.value)===null||re===void 0?void 0:re[0],X],{e:ae,position:"second"})},onBlur:function(X,ee){var re,ae=ee.e;return $([(re=N.value)===null||re===void 0?void 0:re[0],X],{e:ae,position:"second"})},onChange:function(X,ee){var re,ae=ee.e;return B([(re=N.value)===null||re===void 0?void 0:re[0],X],{e:ae,position:"second",trigger:"input"})}},C.value[1]),null),Y?l.createVNode("div",{class:"".concat(h.value,"__suffix")},[Y]):null,(D||k.value)&&l.createVNode("span",{class:"".concat(h.value,"__suffix ").concat(h.value,"__suffix-icon")},[k.value?l.createVNode(p,{class:"".concat(h.value,"__suffix-clear"),onClick:I},null):D])])]),P=["".concat(h.value,"__tips"),"".concat(f.value,"-tips"),"".concat(f.value,"-is-").concat(e.status)];return l.createVNode(l.Fragment,null,[K,q&&l.createVNode("div",{class:P},[q])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ffe={autoWidth:Boolean,disabled:Boolean,inputValue:{type:Array,default:void 0},defaultInputValue:{type:Array},label:{type:[String,Function]},panel:{type:[String,Function]},popupProps:{type:Object},popupVisible:Boolean,rangeInputProps:{type:Object},readonly:{type:Boolean,default:void 0},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},tips:{type:[String,Function]},onInputChange:Function,onPopupVisibleChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function WI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hfe=l.defineComponent({name:"TRangeInputPopup",props:ffe,setup:function(e){var n=ve("range-input-popup"),r=GE(e),a=r.tOverlayInnerStyle,i=r.innerPopupVisible,o=r.onInnerPopupVisibleChange,s=l.computed(function(){return[n.value,V({},"".concat(n.value,"--visible"),e.popupVisible||i.value)]});return function(){return l.createVNode("div",{class:s.value},[l.createVNode(sa,l.mergeProps({hideEmptyPopup:!0,content:e.panel,trigger:"click",placement:"bottom-left",disabled:e.disabled,visible:e.popupVisible||i.value},KI({overlayInnerStyle:a.value,onVisibleChange:o},e.popupProps)),{default:function(){return[l.createVNode(HI,KI({value:e.inputValue,onChange:e.onInputChange,disabled:e.disabled,label:e.label,status:e.status,tips:e.tips},e.rangeInputProps),null)]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vfe=Be(HI),Gy=Be(hfe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var GI=l.defineComponent({name:"TRangePanel",props:{hoverValue:Array,activeIndex:Number,isFirstValueSelected:Boolean,disableDate:[Object,Array,Function],mode:{type:String,default:"date"},format:String,presetsPlacement:{type:String,default:"bottom"},value:Array,timePickerProps:Object,presets:Object,popupVisible:Boolean,enableTimePicker:Boolean,panelPreselection:Boolean,firstDayOfWeek:Number,year:Array,month:Array,time:Array,cancelRangeSelectLimit:Boolean,onClick:Function,onCellClick:Function,onCellMouseEnter:Function,onCellMouseLeave:Function,onJumperClick:Function,onConfirmClick:Function,onPresetClick:Function,onYearChange:Function,onMonthChange:Function,onTimePickerChange:Function},setup:function(e){var n=ve("date-range-picker__panel"),r=Qe("datePicker"),a=r.globalConfig,i=l.computed(function(){var f;return(f=ii({mode:e.mode,format:e.format,enableTimePicker:e.enableTimePicker}))===null||f===void 0?void 0:f.format}),o=!e.panelPreselection&&e.value.length===2,s=l.computed(function(){return RI({format:i.value,mode:e.mode,disableDate:e.disableDate,start:e.isFirstValueSelected&&e.activeIndex===1?new Date(rt(e.value[0],i.value,"start").toDate().setHours(0,0,0)):void 0,end:e.isFirstValueSelected&&e.activeIndex===0?new Date(rt(e.value[1],i.value).toDate().setHours(23,59,59)):void 0})}),c=l.computed(function(){return Ky(Qv(Qv({isRange:!0,start:e.value[0]?rt(e.value[0],i.value).toDate():void 0,end:e.value[1]?rt(e.value[1],i.value).toDate():void 0,hoverStart:!o&&e.hoverValue[0]?rt(e.hoverValue[0],i.value).toDate():void 0,hoverEnd:!o&&e.hoverValue[1]?rt(e.hoverValue[1],i.value).toDate():void 0,year:e.year[0],month:e.month[0],mode:e.mode,firstDayOfWeek:e.firstDayOfWeek||a.value.firstDayOfWeek},s.value),{},{cancelRangeSelectLimit:e.cancelRangeSelectLimit}))}),u=l.computed(function(){return Ky(Qv(Qv({isRange:!0,start:e.value[0]?rt(e.value[0],i.value).toDate():void 0,end:e.value[1]?rt(e.value[1],i.value).toDate():void 0,hoverStart:!o&&e.hoverValue[0]?rt(e.hoverValue[0],i.value).toDate():void 0,hoverEnd:!o&&e.hoverValue[1]?rt(e.hoverValue[1],i.value).toDate():void 0,year:e.year[1],month:e.month[1],mode:e.mode,firstDayOfWeek:e.firstDayOfWeek||a.value.firstDayOfWeek},s.value),{},{cancelRangeSelectLimit:e.cancelRangeSelectLimit}))}),d=l.computed(function(){return{format:i.value,mode:e.mode,firstDayOfWeek:e.firstDayOfWeek||a.value.firstDayOfWeek,popupVisible:e.popupVisible,enableTimePicker:e.enableTimePicker,timePickerProps:e.timePickerProps,onMonthChange:e.onMonthChange,onYearChange:e.onYearChange,onJumperClick:e.onJumperClick,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter,onCellMouseLeave:e.onCellMouseLeave,onTimePickerChange:e.onTimePickerChange}});return function(){return l.createVNode("div",{class:[n.value,V({},"".concat(n.value,"--direction-row"),["left","right"].includes(e.presetsPlacement))],onClick:function(h){var v;return(v=e.onClick)===null||v===void 0?void 0:v.call(e,{e:h})}},[["top","left"].includes(e.presetsPlacement)?l.createVNode(Jv,{presets:e.presets,selectedValue:e.value[e.activeIndex],enableTimePicker:e.enableTimePicker,onPresetClick:e.onPresetClick,onConfirmClick:e.onConfirmClick,presetsPlacement:e.presetsPlacement},null):null,l.createVNode("div",{class:"".concat(n.value,"-content-wrapper")},[e.enableTimePicker?l.createVNode(Xv,l.mergeProps({key:"start",partial:e.activeIndex?"end":"start",year:e.activeIndex?e.year[1]:e.year[0],month:e.activeIndex?e.month[1]:e.month[0],time:e.activeIndex?e.time[1]:e.time[0],value:e.value,tableData:e.activeIndex?u.value:c.value},d.value),null):[l.createVNode(Xv,l.mergeProps({key:"startPanel",partial:"start",year:e.year[0],month:e.month[0],time:e.time[e.activeIndex],value:e.value,tableData:c.value},d.value),null),l.createVNode(Xv,l.mergeProps({key:"endPanel",partial:"end",year:e.year[1],month:e.month[1],time:e.time[e.activeIndex],value:e.value,tableData:u.value},d.value),null)]]),["bottom","right"].includes(e.presetsPlacement)?l.createVNode(Jv,{presets:e.presets,selectedValue:e.value[e.activeIndex],enableTimePicker:e.enableTimePicker,onPresetClick:e.onPresetClick,onConfirmClick:e.onConfirmClick,presetsPlacement:e.presetsPlacement},null):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function YI(t){var e=l.toRefs(t),n=e.value,r=e.modelValue,a=Mt(n,r,t.defaultValue,t.onChange),i=$e(a,2),o=i[0],s=i[1],c=l.computed(function(){return ii({mode:t.mode,format:t.format,valueType:t.valueType,enableTimePicker:t.enableTimePicker})});t.enableTimePicker&&($y(c.value.format)||console.error("format: ".concat(c.value.format," 不规范，包含时间选择必须要有时间格式化 HH:mm:ss"))),Ke(o.value)?sr(o.value,c.value.format)||console.error("value: ".concat(o.value," is invalid dateTime! Check whether the value is consistent with format: ").concat(c.value.format)):console.error("typeof value: ".concat(o.value," must be Array!"));var u=l.ref(!1),d=l.ref(Hv({value:o.value,mode:t.mode,format:c.value.format,timeFormat:c.value.timeFormat}).time),f=l.ref(Hv({value:o.value,mode:t.mode,format:c.value.format,enableTimePicker:t.enableTimePicker}).month),h=l.ref(Hv({value:o.value,mode:t.mode,format:c.value.format}).year),v=l.ref(pt(o.value,{format:c.value.format}));return l.watchEffect(function(){if(!o.value){v.value=[];return}sr(o.value,c.value.format)&&(v.value=pt(o.value,{format:c.value.valueType,targetFormat:c.value.format}),d.value=Rc(o.value,c.value.format,c.value.timeFormat,t.defaultTime))}),{year:h,month:f,value:o,time:d,isFirstValueSelected:u,cacheValue:v,onChange:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function XI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Zv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var JI={first:"start",second:"end"};function pfe(t){var e=ve("date-range-picker"),n=Qe("datePicker"),r=n.globalConfig,a=St({CalendarIcon:p2}),i=a.CalendarIcon,o=We(),s=l.ref(!1),c=l.ref(),u=YI(t),d=u.value,f=u.onChange,h=u.time,v=u.month,p=u.year,g=u.cacheValue,m=u.isFirstValueSelected,y=l.computed(function(){return ii({mode:t.mode,format:t.format,valueType:t.valueType,enableTimePicker:t.enableTimePicker})}),b=l.ref(!1),w=l.ref(!1),x=l.ref(0),C=l.ref(pt(t.value,{format:y.value.format})),S=Pn(),_=l.computed(function(){return Zv(Zv({},t.rangeInputProps),{},{size:t.size,ref:c,borderless:t.borderless,clearable:t.clearable,prefixIcon:function(){return o("prefixIcon")},readonly:S.value||!t.allowInput,separator:t.separator||r.value.rangeSeparator,placeholder:t.placeholder||r.value.placeholder[t.mode],activeIndex:b.value?x.value:void 0,suffixIcon:function(){return o("suffixIcon")||l.createVNode(i,null,null)},class:V({},"".concat(e.value,"__input--placeholder"),w.value),onClick:function(B){var T=B.position;x.value=T==="first"?0:1},onClear:function(B){var T=B.e;T.stopPropagation(),b.value=!1,f==null||f([],{dayjsValue:[],trigger:"clear"})},onBlur:function(B,T){var k,E=T.e,I=T.position;(k=t.onBlur)===null||k===void 0||k.call(t,{value:B,partial:JI[I],e:E})},onFocus:function(B,T){var k,E=T.e,I=T.position;(k=t.onFocus)===null||k===void 0||k.call(t,{value:B,partial:JI[I],e:E}),x.value=I==="first"?0:1},onChange:function(B,T){if(T.e,T.position,C.value=B,!!sr(B,y.value.format)){g.value=B;var k=[],E=[],I=[];B.forEach(function(A){k.push(rt(A,y.value.format).year()),E.push(rt(A,y.value.format).month()),I.push(rt(A,y.value.format).format(y.value.timeFormat))}),p.value=k,v.value=E,h.value=I}},onEnter:function(B){!sr(B,y.value.format)&&!sr(d.value,y.value.format)||(b.value=!1,sr(B,y.value.format)?f==null||f(pt(B,{format:y.value.format,targetFormat:y.value.valueType,autoSwap:!0}),{dayjsValue:B.map(function(T){return rt(T,y.value.format)}),trigger:"enter"}):sr(d.value,y.value.format)?C.value=pt(d.value,{format:y.value.format}):C.value=[])}})}),O=l.computed(function(){var N,B,T;return Zv(Zv({expandAnimation:!0},Sr(t.popupProps,"on-visible-change")),{},{overlayInnerStyle:(N=(B=t.popupProps)===null||B===void 0?void 0:B.overlayInnerStyle)!==null&&N!==void 0?N:{width:"auto"},overlayClassName:[(T=t.popupProps)===null||T===void 0?void 0:T.overlayClassName,"".concat(e.value,"__panel-container")],onVisibleChange:function(E,I){var A,M,$,U;if(!S.value){if((A=t.popupProps)===null||A===void 0||(M=A.onVisibleChange)===null||M===void 0||M.call(A,E,I),($=t.popupProps)===null||$===void 0||(U=$["on-visible-change"])===null||U===void 0||U.call($,E,I),I.trigger==="trigger-element-click"){var F={0:"first",1:"second"};c.value.focus({position:F[x.value]}),b.value=!0;return}b.value=E}}})});return l.watch(d,function(N){if(!N){C.value=[];return}sr(N,y.value.format)&&(C.value=pt(N,{format:y.value.valueType,targetFormat:y.value.format}))},{immediate:!0}),l.watch(x,function(N){var B,T;if(!s.value){s.value=!0;return}if(b.value){var k={0:"first",1:"second"};(B=c.value)===null||B===void 0||(T=B.focus)===null||T===void 0||T.call(B,{position:k[N]})}},{immediate:!0}),{year:p,month:v,value:d,time:h,inputValue:C,popupVisible:b,rangeInputProps:_,popupProps:O,isHoverCell:w,activeIndex:x,isFirstValueSelected:m,cacheValue:g,onChange:f}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vv(t,e,n,r){var a=e,i=n;return t===0&&a[1]<=a[0]&&(r?a[1]=a[0]+1:(a[1]=a[0],i[1]<=i[0]&&(i[1]=i[0]+1,i[1]===12&&(i[1]=0,a=[a[0],a[1]+1])))),t===1&&a[0]>=a[1]&&(r?a[0]=a[1]-1:(a[0]=a[1],i[0]>=i[1]&&(i[0]=i[1]-1,i[0]===-1&&(i[0]=11,a=[a[0]-1,a[1]])))),{nextYear:a,nextMonth:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function QI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mfe=l.defineComponent({name:"TDateRangePicker",props:gfe({},Wr),setup:function(e,n){var r=n.slots,a=ve("date-range-picker"),i=pfe(e),o=i.inputValue,s=i.popupVisible,c=i.rangeInputProps,u=i.popupProps,d=i.value,f=i.year,h=i.month,v=i.time,p=i.cacheValue,g=i.activeIndex,m=i.isHoverCell,y=i.isFirstValueSelected,b=i.onChange,w=Vt(),x=Pn(),C=l.computed(function(){return ii({mode:e.mode,enableTimePicker:e.enableTimePicker,format:e.format,valueType:e.valueType})}),S=l.ref(!1);l.watch(s,function($){if($)if(S.value=!1,p.value=pt(d.value||[],{format:C.value.valueType,targetFormat:C.value.format}),v.value=Rc(d.value||[ke().format(C.value.timeFormat),ke().format(C.value.timeFormat)],C.value.format,C.value.timeFormat,e.defaultTime),d.value.length)if(d.value.length===2&&!e.enableTimePicker){var W=d.value.map(function(H){return rt(H,C.value.format).month()});f.value=d.value.map(function(H){return rt(H,C.value.valueType).year()}),f.value[0]===f.value[1]&&W[0]===W[1]&&(W[0]===11?W[0]-=1:W[1]+=1),h.value=W,(e.mode==="month"||e.mode==="quarter")&&f.value[0]===f.value[1]&&(f.value=[f.value[0],f.value[0]+1])}else f.value=d.value.map(function(H){return rt(H,C.value.format).year()}),f.value.length===1&&(f.value=[f.value[0],f.value[0]]),h.value=d.value.map(function(H){return rt(H,C.value.format).month()}),h.value.length===1&&(h.value=[h.value[0],Math.min(h.value[0]+1,11)]);else{var U=Hv({value:d.value,mode:e.mode,format:C.value.format,enableTimePicker:e.enableTimePicker}),F=U.year,j=U.month;f.value=F,h.value=j}else g.value=0,m.value=!1,y.value=!1,o.value=pt(d.value,{format:C.value.valueType,targetFormat:C.value.format})});function _($){m.value=!0;var U=Ee(o.value);U[g.value]=pt($,{format:C.value.format}),o.value=U}function O(){m.value=!1,o.value=p.value}function N($,U){var F,j=U.e;(F=e.onPick)===null||F===void 0||F.call(e,$,{e:j,partial:g.value?"end":"start"}),m.value=!1,S.value=!0;var W=Ee(o.value);if(W[g.value]=pt($,{format:C.value.format}),p.value=W,o.value=W,!e.enableTimePicker){var H=W.findIndex(function(Y){return!Y||!sr(Y,C.value.format)});if(H===-1&&W.length===2&&(!y.value&&rt(W[0],C.value.format).isAfter(rt(W[1],C.value.format))?(W[g.value?0:1]="",p.value=W,o.value=W):b==null||b(pt(W,{format:C.value.format,targetFormat:C.value.valueType,autoSwap:!0}),{dayjsValue:W.map(function(Y){return rt(Y,C.value.format)}),trigger:"pick"})),!y.value||!g.value){var J=H;J===-1&&(J=g.value?0:1),g.value=J,y.value=!!W[0]}else s.value=!1}}function B($){var U=$.trigger,F=$.partial,j=F==="start"?0:1,W={date:1,week:1,month:12,quarter:12,year:120},H=W[e.mode]||0,J=new Date(f.value[j],h.value[j]),Y=null;U==="prev"?Y=Uv(J,H):U==="current"?Y=new Date:U==="next"&&(Y=zv(J,H));var D=Ee(f.value);D[j]=Y.getFullYear();var q=Ee(h.value);q[j]=Y.getMonth();var z=["year","quarter","month"].includes(e.mode),K=Vv(j,D,q,z);D=K.nextYear,q=K.nextMonth,f.value=D,h.value=q}function T($){var U=Dc($),F=U.hours,j=U.minutes,W=U.seconds,H=U.milliseconds,J=U.meridiem,Y=Ee(o.value),D=Y[g.value],q=ke(D,C.value.format).isValid()?ke(D,C.value.format):ke().year(f.value[g.value]).month(h.value[g.value]),z=F;/am/i.test(J)&&z===12&&(z-=12),/pm/i.test(J)&&z<12&&(z+=12);var K=q.hour(z).minute(j).second(W).millisecond(H).toDate();Y[g.value]=K;var P=Ee(v.value);P[g.value]=$,v.value=P,S.value=!0,o.value=pt(Y,{format:C.value.format}),p.value=pt(Y,{format:C.value.format})}function k($){var U=$.e,F=Ee(o.value),j=F.findIndex(function(J){return!J||!sr(J,C.value.format)});if(j===-1&&F.length===2)if(!y.value&&rt(F[0],C.value.format).isAfter(rt(F[1],C.value.format)))F[g.value?0:1]="",p.value=F,o.value=F;else{var W;e==null||(W=e.onConfirm)===null||W===void 0||W.call(e,{date:F.map(function(J){return ke(J).toDate()}),e:U,partial:g.value?"end":"start"}),b==null||b(pt(F,{format:C.value.format,targetFormat:C.value.valueType,autoSwap:!0}),{dayjsValue:F.map(function(J){return rt(J,C.value.format)}),trigger:"confirm"})}if(!y.value||!g.value){var H=j;H===-1&&(H=g.value?0:1),g.value=H,y.value=!!F[0]}else F.length===2&&(s.value=!1)}function E($,U){var F=$;if(Re($)&&(F=$()),!Ke(F))console.error("preset: ".concat($," 预设值必须是数组!"));else{var j;b==null||b(pt(F,{format:C.value.format,targetFormat:C.value.valueType,autoSwap:!0}),{dayjsValue:F.map(function(W){return rt(W,C.value.format)}),trigger:"preset"}),s.value=!1,(j=e.onPresetClick)===null||j===void 0||j.call(e,U)}}function I($,U){var F=U.partial,j=F==="start"?0:1;e.enableTimePicker&&(j=g.value);var W=Ee(f.value),H=Ee(h.value);W[j]=$;var J=["year","quarter","month"].includes(e.mode),Y=Vv(j,W,H,J);W=Y.nextYear,H=Y.nextMonth,f.value=W,J||(h.value=H)}function A($,U){var F=U.partial,j=F==="start"?0:1;e.enableTimePicker&&(j=g.value);var W=Ee(h.value);if(W[j]=$,f.value[0]===f.value[1]){if(j===0&&W[1]<=W[0]&&(W[1]=W[0]+1,W[1]===12)){var H,J;W[1]=0,f.value=[(H=f.value)===null||H===void 0?void 0:H[0],((J=f.value)===null||J===void 0?void 0:J[1])+1]}if(j===1&&(W[0]=Math.min(W[0],W[1]),W[0]>=W[1]&&(W[0]-=1,W[0]===-1))){var Y,D;W[0]=11,f.value=[((Y=f.value)===null||Y===void 0?void 0:Y[0])-1,(D=f.value)===null||D===void 0?void 0:D[1]]}}h.value=W}var M=l.computed(function(){return{hoverValue:m.value?o.value:[],value:S.value?p.value:d.value,isFirstValueSelected:y.value,activeIndex:g.value,year:f.value,month:h.value,format:C.value.format,mode:e.mode,presets:e.presets,time:v.value,disableDate:e.disableDate,firstDayOfWeek:e.firstDayOfWeek,timePickerProps:e.timePickerProps,enableTimePicker:e.enableTimePicker,presetsPlacement:e.presetsPlacement,popupVisible:s.value,panelPreselection:e.panelPreselection,cancelRangeSelectLimit:e.cancelRangeSelectLimit,onCellClick:N,onCellMouseEnter:_,onCellMouseLeave:O,onJumperClick:B,onConfirmClick:k,onPresetClick:E,onYearChange:I,onMonthChange:A,onTimePickerChange:T}});return function(){return l.createVNode("div",{class:a.value},[l.createVNode(Gy,{readonly:x.value,disabled:w.value,label:e.label,status:e.status,tips:e.tips||r.tips,inputValue:o.value,popupProps:u.value,rangeInputProps:c.value,popupVisible:s.value,panel:function(){return l.createVNode(GI,M.value,null)}},null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yfe={defaultTime:{type:Array,default:function(){return["00:00:00","23:59:59"]}},onCellClick:Function,onChange:Function,onConfirm:Function,onMonthChange:Function,onPanelClick:Function,onPresetClick:Function,onTimeChange:Function,onYearChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ZI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wfe=l.defineComponent({name:"TDateRangePickerPanel",props:bfe({value:Wr.value,defaultValue:Wr.defaultValue,modelValue:Wr.modelValue,disabled:Wr.disabled,disableDate:Wr.disableDate,enableTimePicker:Wr.enableTimePicker,firstDayOfWeek:Wr.firstDayOfWeek,format:Wr.format,mode:Wr.mode,presets:Wr.presets,presetsPlacement:Wr.presetsPlacement,timePickerProps:Wr.timePickerProps,panelPreselection:Wr.panelPreselection},yfe),setup:function(e){var n=YI(e),r=n.value,a=n.year,i=n.month,o=n.time,s=n.cacheValue,c=n.isFirstValueSelected,u=n.onChange,d=l.computed(function(){return ii({mode:e.mode,enableTimePicker:e.enableTimePicker,format:e.format})}),f=l.ref(!1),h=l.ref(!1),v=l.ref([]),p=l.computed(function(){return c.value?1:0});l.onMounted(function(){if(r.value.length===2&&!e.enableTimePicker){var N=r.value.map(function(B){return rt(B,d.value.format).month()});a.value=r.value.map(function(B){return rt(B,d.value.valueType).year()}),a.value[0]===a.value[1]&&N[0]===N[1]&&(N[0]===11?N[0]-=1:N[1]+=1),i.value=N,["month","quarter"].includes(e.mode)&&a.value[0]===a.value[1]&&(a.value=[a.value[0],a.value[0]+1])}});function g(N){h.value=!0;var B=Ee(v.value);B[p.value]=pt(N,{format:d.value.format}),v.value=B}function m(){h.value=!1,v.value=s.value}function y(N,B){var T,k=B.e;(T=e.onCellClick)===null||T===void 0||T.call(e,{e:k,partial:p.value?"end":"start",date:r.value.map(function(I){return ke(I).toDate()})}),h.value=!1,f.value=!0;var E=Ee(s.value);E[p.value]=pt(N,{format:d.value.format}),s.value=E,!e.enableTimePicker&&(E.length===2&&c.value?(u==null||u(pt(E,{format:d.value.format,autoSwap:!0}),{dayjsValue:E.map(function(I){return rt(I,d.value.format)}),trigger:"pick"}),c.value=!1):c.value=!0)}function b(N){var B=N.trigger,T=N.partial,k=T==="start"?0:1,E={prev:"arrow-previous",next:"arrow-next"},I={date:1,week:1,month:12,quarter:12,year:120},A=I[e.mode]||0,M=new Date(a.value[k],i.value[k]),$=null;B==="prev"?$=Uv(M,A):B==="current"?$=new Date:B==="next"&&($=zv(M,A));var U=Ee(a.value);U[k]=$.getFullYear();var F=Ee(i.value);F[k]=$.getMonth();var j=["year","quarter","month"].includes(e.mode),W=Vv(k,U,F,j);if(U=W.nextYear,F=W.nextMonth,a.value.some(function(Y){return!U.includes(Y)})){var H;(H=e.onYearChange)===null||H===void 0||H.call(e,{partial:T,year:U[k],date:r.value.map(function(Y){return ke(Y).toDate()}),trigger:B==="current"?"today":"year-".concat(E[B])})}if(i.value.some(function(Y){return!F.includes(Y)})){var J;(J=e.onMonthChange)===null||J===void 0||J.call(e,{partial:T,month:F[k],date:r.value.map(function(Y){return ke(Y).toDate()}),trigger:B==="current"?"today":"month-".concat(E[B])})}a.value=U,i.value=F}function w(N){var B,T=Dc(N),k=T.hours,E=T.minutes,I=T.seconds,A=T.milliseconds,M=T.meridiem,$=Ee(s.value),U=s.value[p.value],F=ke(U,d.value.format).isValid()?ke(U,d.value.format):ke().year(a.value[p.value]).month(i.value[p.value]),j=k;/am/i.test(M)&&j===12&&(j-=12),/pm/i.test(M)&&j<12&&(j+=12);var W=F.hour(j).minute(E).second(I).millisecond(A).toDate();$[p.value]=W;var H=Ee(o.value);H[p.value]=N,o.value=H,f.value=!0,s.value=pt($,{format:d.value.format}),(B=e.onTimeChange)===null||B===void 0||B.call(e,{time:N,date:r.value.map(function(J){return rt(J,d.value.format).toDate()}),partial:p.value?"end":"start",trigger:"time-hour"})}function x(N){var B,T=N.e,k=Ee(s.value);k.length===2&&c.value?(u==null||u(pt(k,{format:d.value.format,autoSwap:!0}),{dayjsValue:k.map(function(E){return rt(E,d.value.format)}),trigger:"confirm"}),a.value=k.map(function(E){return ke(E,d.value.format).year()}),i.value=k.map(function(E){return ke(E,d.value.format).month()}),c.value=!1):c.value=!0,(B=e.onConfirm)===null||B===void 0||B.call(e,{date:r.value.map(function(E){return ke(E).toDate()}),e:T})}function C(N,B){var T=N;if(Re(N)&&(T=N()),!Ke(T))console.error("preset: ".concat(N," 预设值必须是数组!"));else{var k;u==null||u(pt(T,{format:d.value.format,autoSwap:!0}),{dayjsValue:T.map(function(E){return rt(E,d.value.format)}),trigger:"preset"}),(k=e.onPresetClick)===null||k===void 0||k.call(e,B)}}function S(N,B){var T,k=B.partial,E=k==="start"?0:1;e.enableTimePicker&&(E=p.value);var I=Ee(a.value);I[E]=N;var A=Ee(i.value),M=["year","quarter","month"].includes(e.mode),$=Vv(E,I,A,M);I=$.nextYear,A=$.nextMonth,a.value=I,M||(i.value=A),(T=e.onYearChange)===null||T===void 0||T.call(e,{partial:k,year:I[E],date:r.value.map(function(U){return ke(U).toDate()}),trigger:"year-select"})}function _(N,B){var T,k=B.partial,E=k==="start"?0:1;e.enableTimePicker&&(E=p.value);var I=Ee(i.value);if(I[E]=N,a.value[0]===a.value[1]){if(E===0&&I[1]<=I[0]&&(I[1]=I[0]+1,I[1]===12)){var A,M;I[1]=0,a.value=[(A=a.value)===null||A===void 0?void 0:A[0],((M=a.value)===null||M===void 0?void 0:M[1])+1]}if(E===1&&(I[0]=Math.min(I[0],I[1]),I[0]>=I[1]&&(I[0]-=1,I[0]===-1))){var $,U;I[0]=11,a.value=[(($=a.value)===null||$===void 0?void 0:$[0])-1,(U=a.value)===null||U===void 0?void 0:U[1]]}}i.value=I,(T=e.onMonthChange)===null||T===void 0||T.call(e,{partial:k,month:I[E],date:r.value.map(function(F){return ke(F).toDate()}),trigger:"month-select"})}var O=l.computed(function(){return{hoverValue:h.value?v.value:[],value:f.value?s.value:r.value,activeIndex:p.value,year:a.value,month:i.value,mode:e.mode,format:d.value.format,presets:e.presets,time:o.value,disableDate:e.disableDate,firstDayOfWeek:e.firstDayOfWeek,timePickerProps:e.timePickerProps,enableTimePicker:e.enableTimePicker,presetsPlacement:e.presetsPlacement,panelPreselection:e.panelPreselection,popupVisible:!0,panelClick:e.onPanelClick,onCellClick:y,onCellMouseEnter:g,onCellMouseLeave:m,onJumperClick:b,onConfirmClick:x,onPresetClick:C,onYearChange:S,onMonthChange:_,onTimePickerChange:w}});return function(){return l.createVNode(GI,O.value,null)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var xfe=Be(lfe),Cfe=Be(ufe),_fe=Be(mfe),Sfe=Be(wfe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Tfe=wE;function kfe(t,e,n){return t==null?t:Tfe(t,e,n)}var Vl=kfe;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Yy={exports:{}},Lc={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;for(var i in a)typeof r[i]>"u"&&(r[i]=a[i]);return r}t.exports=e.default,t.exports.default=e.default})(Lc,Lc.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var n=r(Lc.exports);function r(g){return g&&g.__esModule?g:{default:g}}function a(g,m){return s(g)||o(g,m)||u(g,m)||i()}function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(g,m){var y=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(y!=null){var b,w,x,C,S=[],_=!0,O=!1;try{if(x=(y=y.call(g)).next,m!==0)for(;!(_=(b=x.call(y)).done)&&(S.push(b.value),S.length!==m);_=!0);}catch(N){O=!0,w=N}finally{try{if(!_&&y.return!=null&&(C=y.return(),Object(C)!==C))return}finally{if(O)throw w}}return S}}function s(g){if(Array.isArray(g))return g}function c(g,m){var y=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!y){if(Array.isArray(g)||(y=u(g))||m){y&&(g=y);var b=0,w=function(){};return{s:w,n:function(){return b>=g.length?{done:!0}:{done:!1,value:g[b++]}},e:function(O){throw O},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!0,C=!1,S;return{s:function(){y=y.call(g)},n:function(){var O=y.next();return x=O.done,O},e:function(O){C=!0,S=O},f:function(){try{!x&&y.return!=null&&y.return()}finally{if(C)throw S}}}}function u(g,m){if(g){if(typeof g=="string")return d(g,m);var y=Object.prototype.toString.call(g).slice(8,-1);if(y==="Object"&&g.constructor&&(y=g.constructor.name),y==="Map"||y==="Set")return Array.from(g);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return d(g,m)}}function d(g,m){(m==null||m>g.length)&&(m=g.length);for(var y=0,b=new Array(m);y<m;y++)b[y]=g[y];return b}var f={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function h(g){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(g)}function v(g,m){for(var y=[],b=Math.min(g.length,m.length),w=0;w<b;w++)y.push([g[w],m[w]]);return y}function p(g,m){if(typeof m=="string"?m=(0,n.default)({format:m},f):m=(0,n.default)(m,f),typeof g=="string"&&h(m.format)){var y=m.delimiters.find(function(A){return m.format.indexOf(A)!==-1}),b=m.strictMode?y:m.delimiters.find(function(A){return g.indexOf(A)!==-1}),w=v(g.split(b),m.format.toLowerCase().split(y)),x={},C=c(w),S;try{for(C.s();!(S=C.n()).done;){var _=a(S.value,2),O=_[0],N=_[1];if(O.length!==N.length)return!1;x[N.charAt(0)]=O}}catch(A){C.e(A)}finally{C.f()}var B=x.y;if(B.startsWith("-"))return!1;if(x.y.length===2){var T=parseInt(x.y,10);if(isNaN(T))return!1;var k=new Date().getFullYear()%100;T<k?B="20".concat(x.y):B="19".concat(x.y)}var E=x.m;x.m.length===1&&(E="0".concat(x.m));var I=x.d;return x.d.length===1&&(I="0".concat(x.d)),new Date("".concat(B,"-").concat(E,"-").concat(I,"T00:00:00.000Z")).getUTCDate()===+x.d}return m.strictMode?!1:Object.prototype.toString.call(g)==="[object Date]"&&isFinite(g)}t.exports=e.default,t.exports.default=e.default}(Yy,Yy.exports);var Ofe=fd(Yy.exports),Xy={exports:{}},es={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function n(a){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n(a)}function r(a){var i=typeof a=="string"||a instanceof String;if(!i){var o=n(a);throw a===null?o="null":o==="object"&&(o=a.constructor.name),new TypeError("Expected a string but received a ".concat(o))}}t.exports=e.default,t.exports.default=e.default})(es,es.exports);var Jy={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=r(es.exports);function r(o){return o&&o.__esModule?o:{default:o}}function a(o){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a(o)}function i(o,s){(0,n.default)(o);var c,u;a(s)==="object"?(c=s.min||0,u=s.max):(c=arguments[1],u=arguments[2]);var d=encodeURI(o).split(/%..|./).length-1;return d>=c&&(typeof u>"u"||d<=u)}t.exports=e.default,t.exports.default=e.default})(Jy,Jy.exports);var ep={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=a(es.exports),r=a(Lc.exports);function a(s){return s&&s.__esModule?s:{default:s}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(s,c){(0,n.default)(s),c=(0,r.default)(c,i),c.allow_trailing_dot&&s[s.length-1]==="."&&(s=s.substring(0,s.length-1)),c.allow_wildcard===!0&&s.indexOf("*.")===0&&(s=s.substring(2));var u=s.split("."),d=u[u.length-1];return c.require_tld&&(u.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(d)||/\s/.test(d))||!c.allow_numeric_tld&&/^\d+$/.test(d)?!1:u.every(function(f){return!(f.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!c.allow_underscores&&/_/.test(f))})}t.exports=e.default,t.exports.default=e.default})(ep,ep.exports);var tp={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=r(es.exports);function r(d){return d&&d.__esModule?d:{default:d}}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(a,"[.]){3}").concat(a),o=new RegExp("^".concat(i,"$")),s="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(s,":){7}(?:").concat(s,"|:)|")+"(?:".concat(s,":){6}(?:").concat(i,"|:").concat(s,"|:)|")+"(?:".concat(s,":){5}(?::").concat(i,"|(:").concat(s,"){1,2}|:)|")+"(?:".concat(s,":){4}(?:(:").concat(s,"){0,1}:").concat(i,"|(:").concat(s,"){1,3}|:)|")+"(?:".concat(s,":){3}(?:(:").concat(s,"){0,2}:").concat(i,"|(:").concat(s,"){1,4}|:)|")+"(?:".concat(s,":){2}(?:(:").concat(s,"){0,3}:").concat(i,"|(:").concat(s,"){1,5}|:)|")+"(?:".concat(s,":){1}(?:(:").concat(s,"){0,4}:").concat(i,"|(:").concat(s,"){1,6}|:)|")+"(?::((?::".concat(s,"){0,5}:").concat(i,"|(?::").concat(s,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function u(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,n.default)(d),f=String(f),f?f==="4"?o.test(d):f==="6"?c.test(d):!1:u(d,4)||u(d,6)}t.exports=e.default,t.exports.default=e.default})(tp,tp.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var n=s(es.exports),r=s(Jy.exports),a=s(ep.exports),i=s(tp.exports),o=s(Lc.exports);function s(b){return b&&b.__esModule?b:{default:b}}var c={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},u=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,v=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,g=254;function m(b){var w=b.replace(/^"(.+)"$/,"$1");if(!w.trim())return!1;var x=/[\.";<>]/.test(w);if(x){if(w===b)return!1;var C=w.split('"').length===w.split('\\"').length;if(!C)return!1}return!0}function y(b,w){if((0,n.default)(b),w=(0,o.default)(w,c),w.require_display_name||w.allow_display_name){var x=b.match(u);if(x){var C=x[1];if(b=b.replace(C,"").replace(/(^<|>$)/g,""),C.endsWith(" ")&&(C=C.slice(0,-1)),!m(C))return!1}else if(w.require_display_name)return!1}if(!w.ignore_max_length&&b.length>g)return!1;var S=b.split("@"),_=S.pop(),O=_.toLowerCase();if(w.host_blacklist.includes(O)||w.host_whitelist.length>0&&!w.host_whitelist.includes(O))return!1;var N=S.join("@");if(w.domain_specific_validation&&(O==="gmail.com"||O==="googlemail.com")){N=N.toLowerCase();var B=N.split("+")[0];if(!(0,r.default)(B.replace(/\./g,""),{min:6,max:30}))return!1;for(var T=B.split("."),k=0;k<T.length;k++)if(!f.test(T[k]))return!1}if(w.ignore_max_length===!1&&(!(0,r.default)(N,{max:64})||!(0,r.default)(_,{max:254})))return!1;if(!(0,a.default)(_,{require_tld:w.require_tld,ignore_max_length:w.ignore_max_length,allow_underscores:w.allow_underscores})){if(!w.allow_ip_domain)return!1;if(!(0,i.default)(_)){if(!_.startsWith("[")||!_.endsWith("]"))return!1;var E=_.slice(1,-1);if(E.length===0||!(0,i.default)(E))return!1}}if(N[0]==='"')return N=N.slice(1,N.length-1),w.allow_utf8_local_part?p.test(N):h.test(N);for(var I=w.allow_utf8_local_part?v:d,A=N.split("."),M=0;M<A.length;M++)if(!I.test(A[M]))return!1;return!(w.blacklisted_chars&&N.search(new RegExp("[".concat(w.blacklisted_chars,"]+"),"g"))!==-1)}t.exports=e.default,t.exports.default=e.default}(Xy,Xy.exports);var Efe=fd(Xy.exports),Qy={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var n=o(es.exports),r=o(ep.exports),a=o(tp.exports),i=o(Lc.exports);function o(b){return b&&b.__esModule?b:{default:b}}function s(b,w){return h(b)||f(b,w)||u(b,w)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(b,w){if(b){if(typeof b=="string")return d(b,w);var x=Object.prototype.toString.call(b).slice(8,-1);if(x==="Object"&&b.constructor&&(x=b.constructor.name),x==="Map"||x==="Set")return Array.from(b);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return d(b,w)}}function d(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,C=new Array(w);x<w;x++)C[x]=b[x];return C}function f(b,w){var x=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(x!=null){var C,S,_,O,N=[],B=!0,T=!1;try{if(_=(x=x.call(b)).next,w!==0)for(;!(B=(C=_.call(x)).done)&&(N.push(C.value),N.length!==w);B=!0);}catch(k){T=!0,S=k}finally{try{if(!B&&x.return!=null&&(O=x.return(),Object(O)!==O))return}finally{if(T)throw S}}return N}}function h(b){if(Array.isArray(b))return b}var v={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},p=/^\[([^\]]+)\](?::([0-9]+))?$/;function g(b){return Object.prototype.toString.call(b)==="[object RegExp]"}function m(b,w){for(var x=0;x<w.length;x++){var C=w[x];if(b===C||g(C)&&C.test(b))return!0}return!1}function y(b,w){if((0,n.default)(b),!b||/[\s<>]/.test(b)||b.indexOf("mailto:")===0||(w=(0,i.default)(w,v),w.validate_length&&b.length>=2083)||!w.allow_fragments&&b.includes("#")||!w.allow_query_components&&(b.includes("?")||b.includes("&")))return!1;var x,C,S,_,O,N,B,T;if(B=b.split("#"),b=B.shift(),B=b.split("?"),b=B.shift(),B=b.split("://"),B.length>1){if(x=B.shift().toLowerCase(),w.require_valid_protocol&&w.protocols.indexOf(x)===-1)return!1}else{if(w.require_protocol)return!1;if(b.slice(0,2)==="//"){if(!w.allow_protocol_relative_urls)return!1;B[0]=b.slice(2)}}if(b=B.join("://"),b==="")return!1;if(B=b.split("/"),b=B.shift(),b===""&&!w.require_host)return!0;if(B=b.split("@"),B.length>1){if(w.disallow_auth||B[0]===""||(C=B.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var k=C.split(":"),E=s(k,2),I=E[0],A=E[1];if(I===""&&A==="")return!1}_=B.join("@"),N=null,T=null;var M=_.match(p);if(M?(S="",T=M[1],N=M[2]||null):(B=_.split(":"),S=B.shift(),B.length&&(N=B.join(":"))),N!==null&&N.length>0){if(O=parseInt(N,10),!/^[0-9]+$/.test(N)||O<=0||O>65535)return!1}else if(w.require_port)return!1;return w.host_whitelist?m(S,w.host_whitelist):S===""&&!w.require_host?!0:!(!(0,a.default)(S)&&!(0,r.default)(S,w)&&(!T||!(0,a.default)(T,6))||(S=S||T,w.host_blacklist&&m(S,w.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(Qy,Qy.exports);var Pfe=fd(Qy.exports);function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function eA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tA(t){var e=Object.prototype.toString.call(t),n={Date:"[object Date]"};return e===n.Date?!1:ot(t)?jr(t):["",void 0,null].includes(t)}var Ife={date:Ofe,url:Pfe,email:Efe,required:function(e){return!tA(e)},whitespace:function(e){return!(/^\s+$/.test(e)||e==="")},boolean:function(e){return Nn(e)},max:function(e,n){return Et(e)?e<=n:jl(e)<=n},min:function(e,n){return Et(e)?e>=n:jl(e)>=n},len:function(e,n){return jl(String(e))===n},number:function(e){return Et(e)},enum:function(e,n){return n.includes(e)},idcard:function(e){return/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/i.test(e)},telnumber:function(e){return/^1[3-9]\d{9}$/.test(e)},pattern:function(e,n){return n.test(e)},validator:function(e,n){return n(e)}};function Afe(t,e){return Zy.apply(this,arguments)}function Zy(){return Zy=fn(mt.mark(function t(e,n){var r,a,i,o,s,c,u;return mt.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:r={result:!0},a=Object.keys(n),s=0;case 3:if(!(s<a.length)){f.next=15;break}if(c=a[s],!(!n.required&&tA(e)&&!n.validator)){f.next=7;break}return f.abrupt("return",r);case 7:if(u=Ife[c],!(u&&(n[c]||n[c]===0))){f.next=12;break}return i=n[c]===!0?void 0:n[c],o=u,f.abrupt("break",15);case 12:s++,f.next=3;break;case 15:if(!o){f.next=23;break}return f.next=18,o(e,i);case 18:if(r=f.sent,!Nn(r)){f.next=21;break}return f.abrupt("return",eA(eA({},n),{},{result:r}));case 21:if(!ot(r)){f.next=23;break}return f.abrupt("return",r);case 23:return f.abrupt("return",r);case 24:case"end":return f.stop()}},t)})),Zy.apply(this,arguments)}function Vy(t,e){return eb.apply(this,arguments)}function eb(){return eb=fn(mt.mark(function t(e,n){var r,a;return mt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=n.map(function(s){return Afe(e,s)}),o.next=3,Promise.all(r);case 3:return a=o.sent,o.abrupt("return",a);case 5:case"end":return o.stop()}},t)})),eb.apply(this,arguments)}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Nfe={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Dfe(t,e){return t.replace(/\${(.*?)}/g,function(n,r){return e[r.trim()]||""})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function nA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function tb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rA(t,e){return e?"".concat(t,"__").concat(e).replace(/(\[|\]\.)/g,"_"):""}var Rfe=l.defineComponent({name:"TFormItem",props:tb({},Nfe),setup:function(e,n){var r=n.slots,a=We(),i=oE(),o=Qe("form"),s=o.globalConfig,c=St({CheckCircleFilledIcon:so,CloseCircleFilledIcon:gc,ErrorCircleFilledIcon:ki}),u=c.CheckCircleFilledIcon,d=c.CloseCircleFilledIcon,f=c.ErrorCircleFilledIcon,h=l.inject(lE,void 0),v=ve(),p=ve("form-item"),g=l.computed(function(){var pe,_e,be=(pe=(_e=e.requiredMark)!==null&&_e!==void 0?_e:h==null?void 0:h.requiredMark)!==null&&pe!==void 0?pe:s.value.requiredMark,Se=W.value.filter(function(Ne){return Ne.required}).length>0;return be??Se}),m=l.computed(function(){return r.label||e.label}),y=l.computed(function(){return!!(h!=null&&h.colon&&m.value)}),b=ve("form__label"),w=l.computed(function(){return zl(e.labelAlign)?h==null?void 0:h.labelAlign:e.labelAlign}),x=l.computed(function(){return zl(e.labelWidth)?h==null?void 0:h.labelWidth:e.labelWidth}),C=l.computed(function(){return[i.value.label,V(V(V(V({},"".concat(b.value,"--required"),g.value),"".concat(b.value,"--top"),m.value&&(w.value==="top"||!x.value)),"".concat(b.value,"--left"),w.value==="left"&&x.value),"".concat(b.value,"--right"),w.value==="right"&&x.value)]}),S=function(){if(Number(x.value)!==0){var _e={};return x.value&&w.value!=="top"&&(Et(x.value)?_e={width:"".concat(x.value,"px")}:_e={width:x.value}),l.createVNode("div",{class:C.value,style:_e},[l.createVNode("label",{for:e.for||null},[a("label")]),y.value&&s.value.colonText])}},_=function(){var _e=function(Pe){return l.createVNode("span",{class:i.value.status},[l.createVNode(Pe,null,null)])},be=k.value;if(I.value===po.SUCCESS)return _e(u);if(be!=null&&be[0]){var Se=be[0].type||"error",Ne={error:d,warning:f}[Se]||u;return _e(Ne)}return null},O=function(){var _e=e.statusIcon;if(_e!==!1){var be=a("statusIcon",{defaultNode:_()});if(be)return l.createVNode("span",{class:i.value.status},[be]);if(be!==!1&&(be=h==null?void 0:h.renderContent("statusIcon",{defaultNode:_(),params:e}),be))return be}},N=l.computed(function(){if(!ee.value)return"";if(I.value===po.SUCCESS)return e.successBorder?[i.value.success,i.value.successBorder].join(" "):i.value.success;if(k.value.length){var pe=k.value[0].type||"error";return pe==="error"?i.value.error:i.value.warning}}),B=l.computed(function(){return[i.value.controls,N.value]}),T=l.computed(function(){var pe={};return x.value&&w.value!=="top"&&(Et(x.value)?pe={marginLeft:"".concat(x.value,"px")}:pe={marginLeft:x.value}),pe}),k=l.ref([]),E=l.ref([]),I=l.ref(po.TO_BE_VALIDATED),A=l.ref(!1),M=l.ref(!1),$=function(){M.value=!1,k.value=[],E.value=[],I.value=po.TO_BE_VALIDATED},U=function(){var _e=Object.prototype.toString.call(je(h==null?void 0:h.data,e.name)),be;return _e==="[object String]"&&(be=""),_e==="[object Array]"&&(be=[]),_e==="[object Object]"&&(be={}),be},F=function(){var pe=fn(mt.mark(function _e(){var be,Se=arguments;return mt.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(be=Se.length>0&&Se[0]!==void 0?Se[0]:h==null?void 0:h.resetType,e.name){Ae.next=3;break}return Ae.abrupt("return");case 3:return be==="empty"?Vl(h==null?void 0:h.data,e.name,U()):be==="initial"&&Vl(h==null?void 0:h.data,e.name,z.value),Ae.next=6,l.nextTick();case 6:A.value?M.value=!0:$();case 7:case"end":return Ae.stop()}},_e)}));return function(){return pe.apply(this,arguments)}}(),j=l.computed(function(){var pe;return(pe=h==null?void 0:h.errorMessage)!==null&&pe!==void 0?pe:s.value.errorMessage}),W=l.computed(function(){var pe;if((pe=e.rules)!==null&&pe!==void 0&&pe.length)return e.rules;if(!e.name)return[];var _e="".concat(e.name).lastIndexOf(".")||-1,be="".concat(e.name).slice(_e+1);return je(h==null?void 0:h.rules,e.name)||je(h==null?void 0:h.rules,be)||[]}),H=function(){var pe=fn(mt.mark(function _e(be){var Se,Ne;return mt.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Ne={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},Ne.rules=be==="all"?W.value:W.value.filter(function(Me){return(Me.trigger||"change")===be}),!(W.value.length&&!((Se=Ne.rules)!==null&&Se!==void 0&&Se.length))){Pe.next=4;break}return Pe.abrupt("return",Ne);case 4:return Ne.allowSetValue=!0,Pe.next=7,Vy(q.value,Ne.rules);case 7:return Ne.resultList=Pe.sent,Ne.errorList=Ne.resultList.filter(function(Me){return Me.result!==!0}).map(function(Me){return Object.keys(Me).forEach(function(me){if(!Me.message&&j.value[me]){var ie=Je(e.label)?e.label:e.name;Me.message=Dfe(j.value[me],{name:ie,validate:Me[me]})}}),Me}),Ne.successList=Ne.resultList.filter(function(Me){return Me.result===!0&&Me.message&&Me.type==="success"}),Pe.abrupt("return",Ne);case 11:case"end":return Pe.stop()}},_e)}));return function(be){return pe.apply(this,arguments)}}(),J=function(){var pe=fn(mt.mark(function _e(be,Se){var Ne,Ae,Pe,Me,me,ie;return mt.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return A.value=!0,X.value=Se,Ce.next=4,H(be);case 4:return Ne=Ce.sent,Ae=Ne.successList,Pe=Ne.errorList,Me=Ne.rules,me=Ne.resultList,ie=Ne.allowSetValue,ie&&(E.value=Ae,k.value=Pe),Me.length&&(I.value=Pe.length?po.FAIL:po.SUCCESS),M.value&&$(),A.value=!1,Ce.abrupt("return",V({},e.name,Pe.length===0?!0:me));case 15:case"end":return Ce.stop()}},_e)}));return function(be,Se){return pe.apply(this,arguments)}}(),Y=function(){var pe=fn(mt.mark(function _e(be){var Se,Ne,Ae;return mt.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,H(be);case 2:return Se=Me.sent,Ne=Se.errorList,Ae=Se.resultList,Me.abrupt("return",V({},e.name,Ne.length===0?!0:Ae));case 6:case"end":return Me.stop()}},_e)}));return function(be){return pe.apply(this,arguments)}}(),D=function(_e){!_e&&!Ke(_e)||(_e.length===0&&(k.value=[],I.value=po.SUCCESS),k.value=_e.map(function(be){return tb(tb({},be),{},{result:!1})}),I.value=po.FAIL)},q=l.computed(function(){return(h==null?void 0:h.data)&&je(h==null?void 0:h.data,e.name)}),z=l.ref(void 0),K=l.toRefs(e),P=K.name,R=l.reactive({name:P,resetHandler:$,resetField:F,validate:J,validateOnly:Y,setValidateMessage:D});l.onMounted(function(){z.value=Br(q.value),h==null||h.children.push(R)}),l.onBeforeUnmount(function(){h&&(h.children=h==null?void 0:h.children.filter(function(pe){return pe!==R}))}),l.watch(q,fn(mt.mark(function pe(){return mt.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,J("change");case 2:case"end":return be.stop()}},pe)})),{deep:!0}),l.watch(function(){return[e.name,JSON.stringify(e.rules)].join(",")},function(){J("change")});var X=l.ref(void 0),ee=l.computed(function(){return Nn(X.value)?X.value:Nn(e.showErrorMessage)?e.showErrorMessage:h==null?void 0:h.showErrorMessage}),re=l.computed(function(){return[i.value.formItem,rA(p.value,e.name),V(V({},i.value.formItemWithHelp,ae.value),i.value.formItemWithExtra,oe.value)]}),ae=l.computed(function(){var pe=a("help");return pe?l.createVNode("div",{class:i.value.help},[pe]):null}),oe=l.computed(function(){var pe,_e=function(Ne){return l.createVNode("div",{class:i.value.extra,title:Ne},[Ne])},be=k.value;return ee.value&&be!==null&&be!==void 0&&(pe=be[0])!==null&&pe!==void 0&&pe.message?_e(be[0].message):E.value.length?_e(E.value[0].message):null}),ce=l.computed(function(){var pe=a("tips");if(!pe)return null;var _e=["".concat(p.value,"-tips"),"".concat(v.value,"-tips"),"".concat(v.value,"-is-").concat(e.status||"default")];return l.createVNode("div",{class:_e},[pe])}),ge=function(){var pe=fn(mt.mark(function _e(){return mt.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,J("blur");case 2:case"end":return Se.stop()}},_e)}));return function(){return pe.apply(this,arguments)}}();return l.provide(Cy,{handleBlur:ge}),function(){return l.createVNode("div",{class:re.value},[S(),l.createVNode("div",{class:B.value,style:T.value},[l.createVNode("div",{class:i.value.controlsContent},[a("default"),O()]),ae.value,ce.value,oe.value])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Mfe={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},formControlledComponents:{type:Array},id:{type:String,default:void 0},labelAlign:{type:String,default:"right",validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(e){return e?["vertical","inline"].includes(e):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},resetType:{type:String,default:"empty",validator:function(e){return e?["empty","initial"].includes(e):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(e){return e?["","smooth","auto"].includes(e):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function aA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Lfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ffe=l.defineComponent({name:"TForm",props:Lfe({},Mfe),setup:function(e,n){var r=n.expose,a=We(),i=l.toRefs(e),o=i.disabled,s=i.readonly;l.provide("formDisabled",{disabled:o}),l.provide("formReadonly",{readonly:s});var c=l.ref(null),u=l.ref([]),d=l.toRefs(e),f=d.showErrorMessage,h=d.labelWidth,v=d.labelAlign,p=d.data,g=d.colon,m=d.requiredMark,y=d.rules,b=d.errorMessage,w=d.resetType;l.provide(lE,l.reactive({showErrorMessage:f,labelWidth:h,labelAlign:v,data:p,colon:g,requiredMark:m,rules:y,errorMessage:b,resetType:w,children:u,renderContent:a}));var x=ve("form"),C=oE(),S=l.computed(function(){return[C.value.form,V({},"".concat(x.value,"-inline"),e.layout==="inline")]}),_=ve("form-item"),O=function(J){if(Nn(J))return"";var Y=Object.keys(J),D=$e(Y,1),q=D[0];if(e.scrollToFirstError){var z=rA(_.value,q);N(z)}var K=J[q];return Ke(K)?K.filter(function(P){return!P.result})[0].message:""},N=function(J){var Y=c.value.getElementsByClassName(J),D=$e(Y,1),q=D[0],z=e.scrollToFirstError;z&&q&&q.scrollIntoView({behavior:z})},B=function(J,Y){return!Y||!Ke(Y)?!0:Y.indexOf("".concat(J))!==-1},T=function(J){var Y=J.reduce(function(D,q){return Object.assign(D||{},q)},{});return Object.keys(Y).forEach(function(D){Y[D]===!0&&delete Y[D]}),jr(Y)?!0:Y},k=function(){var H=fn(mt.mark(function J(Y){var D,q,z,K,P,R,X,ee,re,ae;return mt.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return q=Y||{},z=q.fields,K=q.trigger,P=K===void 0?"all":K,R=q.showErrorMessage,X=u.value.filter(function(ge){return Re(ge.validate)&&B(String(ge.name),z)}).map(function(ge){return ge.validate(P,R)}),ce.next=4,Promise.all(X);case 4:return ee=ce.sent,re=T(ee),ae=O(re),(D=e.onValidate)===null||D===void 0||D.call(e,{validateResult:re,firstError:ae}),ce.abrupt("return",re);case 9:case"end":return ce.stop()}},J)}));return function(Y){return H.apply(this,arguments)}}(),E=function(){var H=fn(mt.mark(function J(Y){var D,q,z,K,P,R;return mt.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return D=Y||{},q=D.fields,z=D.trigger,K=z===void 0?"all":z,P=u.value.filter(function(re){return Re(re.validateOnly)&&B(String(re.name),q)}).map(function(re){return re.validateOnly(K)}),ee.next=4,Promise.all(P);case 4:return R=ee.sent,ee.abrupt("return",T(R));case 6:case"end":return ee.stop()}},J)}));return function(Y){return H.apply(this,arguments)}}(),I=l.ref(),A=function(J){e.preventSubmitDefault&&J&&(J.preventDefault(),J.stopPropagation()),k(I.value).then(function(Y){var D;(D=e.onSubmit)===null||D===void 0||D.call(e,{validateResult:Y,firstError:O(Y),e:J})}),I.value=void 0},M=function(){var H=fn(mt.mark(function J(Y){return mt.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:I.value=Y,EX(c.value);case 2:case"end":return q.stop()}},J)}));return function(Y){return H.apply(this,arguments)}}(),$=l.ref(),U=function(J){var Y;e.preventSubmitDefault&&J&&(J.preventDefault(),J.stopPropagation()),u.value.filter(function(D){var q;return Re(D.resetField)&&B(String(D.name),(q=$.value)===null||q===void 0?void 0:q.fields)}).forEach(function(D){var q;return D.resetField((q=$.value)===null||q===void 0?void 0:q.type)}),$.value=void 0,(Y=e.onReset)===null||Y===void 0||Y.call(e,{e:J})},F=function(J){$.value=J,c.value.reset()},j=function(J){u.value.forEach(function(Y){Re(Y.resetHandler)&&B(String(Y.name),J)&&Y.resetHandler()})},W=function(J){var Y=Object.keys(J);if(Y.length){var D=u.value.filter(function(q){return Re(q.setValidateMessage)&&Y.includes("".concat(q.name))}).map(function(q){return q.setValidateMessage(J[q.name])});Promise.all(D)}};return r({validate:k,submit:M,reset:F,clearValidate:j,setValidateMessage:W,validateOnly:E}),function(){return l.createVNode("form",{ref:c,class:S.value,onSubmit:function(J){return A(J)},onReset:function(J){return U(J)}},[a("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bfe=Be(Ffe),jfe=Be(Rfe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var iA={allowUncheck:Boolean,checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},label:{type:[String,Function]},name:{type:String,default:""},readonly:{type:Boolean,default:void 0},value:{type:[String,Number,Boolean],default:void 0},onChange:Function,onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var oA=Symbol("RadioGroupProvide"),lA=Symbol("RadioButtonProvide");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function sA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ufe(t){var e={};return Object.keys(t).forEach(function(n){Bn(t[n])||(e[n]=t[n])}),e}var nb=l.defineComponent({name:"TRadio",inheritAttrs:!1,props:$fe({},iA),setup:function(e,n){var r=n.attrs,a=l.ref(),i=l.toRefs(e),o=i.checked,s=i.modelValue,c=Mt(o,s,e.defaultChecked,e.onChange,"checked"),u=$e(c,2),d=u[0],f=u[1],h=l.computed(function(){return v?e.value===v.value:d.value}),v=l.inject(oA,void 0),p=l.computed(function(){return!!(e.allowUncheck||v!=null&&v.allowUncheck)}),g=function($){$.stopPropagation()},m=function($){var U;if(!(C.value||S.value)&&((U=e.onClick)===null||U===void 0||U.call(e,{e:$}),!(h.value&&!p.value)))if(v){var F=h.value&&p.value?void 0:e.value;v.setValue(F,{e:$,name:v.name})}else{var j=p.value?!h.value:!0;f(j,{e:$})}},y=l.computed(function(){return Ufe({focus:r.onFocus,blur:r.onBlur,keydown:r.onKeydown,keyup:r.onKeyup,keypresss:r.onKeypresss})}),b=l.computed(function(){var M=[].concat(Ee(Object.keys(y.value)),["input","change"]).map(function($){return"on".concat($[0].toUpperCase()).concat($.slice(1))});return my(r,M)}),w=l.computed(function(){return v==null?void 0:v.disabled}),x=l.computed(function(){return v==null?void 0:v.readonly}),C=Vt({afterDisabled:w}),S=Pn({afterReadonly:x}),_=l.computed(function(){return{name:v?v.name:e.name,checked:h.value,disabled:C.value,readonly:S.value,value:e.value}}),O=Lt(),N=O.STATUS,B=l.inject(lA,void 0),T=ve("radio-button"),k=ve("radio"),E=l.computed(function(){return B?T.value:k.value}),I=l.computed(function(){return["".concat(E.value),V(V({},N.value.checked,_.value.checked),N.value.disabled,_.value.disabled)]}),A=Ut();return function(){return l.createVNode("label",l.mergeProps({ref:a,class:I.value},b.value,{tabindex:C.value?void 0:"0",onClick:m}),[l.createVNode("input",l.mergeProps({type:"radio",class:"".concat(E.value,"__former")},y.value,_.value,{onClick:g,tabindex:"-1","data-value":Je(e.value)?"'".concat(e.value,"'"):e.value,"data-allow-uncheck":p.value||void 0}),null),l.createVNode("span",{class:"".concat(E.value,"__input")},null),l.createVNode("span",{class:"".concat(E.value,"__label")},[A("default","label")])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zfe=fo,Hfe=ot,Wfe="Expected a function";function Kfe(t,e,n){var r=!0,a=!0;if(typeof t!="function")throw new TypeError(Wfe);return Hfe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),zfe(t,e,{leading:r,maxWait:e,trailing:a})}var ts=Kfe;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var qfe={allowUncheck:Boolean,disabled:{type:Boolean,default:void 0},name:{type:String,default:""},options:{type:Array},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},theme:{type:String,default:"radio",validator:function(e){return e?["radio","button"].includes(e):!0}},value:{type:[String,Number,Boolean],default:void 0},modelValue:{type:[String,Number,Boolean],default:void 0},defaultValue:{type:[String,Number,Boolean]},variant:{type:String,default:"outline",validator:function(e){return e?["outline","primary-filled","default-filled"].includes(e):!0}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function cA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gfe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var uA=l.defineComponent({name:"TRadioButton",inheritAttrs:!1,props:rb({},iA),setup:function(e,n){var r=n.attrs;l.provide(lA,l.reactive({}));var a=l.computed(function(){var o=rb(rb({},e),my(r,Object.keys(r).filter(function(s){return s.startsWith("on")})));return o}),i=Ut();return function(){var o;return l.createVNode(nb,a.value,Gfe(o=i("default","label"))?o:{default:function(){return[o]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Yfe(t,e){var n=function(a){var i=Rv.test(a.key)||Rv.test(a.code);if(i){a.preventDefault();var o=a.target.querySelector("input");if(!o)return;var s=o.dataset;if(o.checked&&s.allowUncheck)e(void 0,{e:a});else{var c=isNaN(Number(s.value))?s.value:Number(s.value);c=Je(c)&&{true:!0,false:!1}[c]||c,c=Je(c)&&c[0]==="'"?c.replace(/'/g,""):c,e(c,{e:a})}}};l.onMounted(function(){qt(t.value,"keydown",n)}),l.onBeforeMount(function(){At(t.value,"keydown",n)})}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Xfe=["window"],Jfe=typeof window<"u"?window:void 0;function Qfe(t){var e,n=l.unref(t);return(e=n==null?void 0:n.$el)!==null&&e!==void 0?e:n}function Zfe(t){return l.getCurrentScope()?(l.onScopeDispose(t),!0):!1}function dA(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.window,a=r===void 0?Jfe:r,i=Vo(n,Xfe),o,s=a&&"MutationObserver"in a,c=function(){o&&(o.disconnect(),o=void 0)},u=l.watch(function(){return Qfe(t)},function(f){c(),s&&a&&f&&(o=new MutationObserver(e),o.observe(f,i))},{immediate:!0}),d=function(){c(),u()};return Zfe(d),{isSupported:s,stop:d}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function fA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ab(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Vfe=l.defineComponent({name:"TRadioGroup",props:ab({},qfe),setup:function(e){var n=l.toRefs(e),r=n.value,a=n.modelValue,i=Mt(r,a,e.defaultValue,e.onChange),o=$e(i,2),s=o[0],c=o[1],u=l.ref(),d=ve("radio-button"),f=Lt(),h=f.STATUS,v=f.SIZE;Yfe(u,c);var p=l.computed(function(){return".".concat(d.value,".").concat(h.value.checked)}),g=l.ref({width:"0px",height:"0px",left:"0px",top:"0px","transition-property":"none"}),m=function(){var E=document.createElement("div");E.setAttribute("style","position: absolute; visibility: hidden;"),E.appendChild(u.value.cloneNode(!0)),document.body.appendChild(E);var I=E.querySelector(p.value),A=I.offsetWidth,M=I.offsetHeight,$=I.offsetLeft,U=I.offsetTop;g.value=ab(ab({},g.value),{},{width:"".concat(A,"px"),height:"".concat(M,"px"),left:"".concat($,"px"),top:"".concat(U,"px")}),document.body.removeChild(E)},y=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(e.variant!=="outline"){var I=u.value.querySelector(p.value),A=E?"none":"all";if(!I){g.value={"transition-property":A,width:"0px",height:"9px",left:"0px",top:"0px"};return}var M=I.offsetWidth,$=I.offsetHeight,U=I.offsetLeft,F=I.offsetTop;M?g.value={"transition-property":A,width:"".concat(M,"px"),height:"".concat($,"px"),left:"".concat(U,"px"),top:"".concat(F,"px")}:m()}},b;l.watch(s,fn(mt.mark(function k(){return mt.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,l.nextTick();case 2:y();case 3:case"end":return I.stop()}},k)}))),l.onMounted(function(){y(!0),Sc(u,ts(fn(mt.mark(function E(){return mt.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,l.nextTick();case 2:y();case 3:case"end":return A.stop()}},E)})),300));var k=u.value.querySelector("".concat(p.value," .").concat(d.value,"__label"));k&&(b=dA(k,function(E){E.forEach(function(I){I.type==="characterData"&&y()})},{attributes:!0,childList:!0,characterData:!0,subtree:!0}))}),l.onUnmounted(function(){var k;(k=b)===null||k===void 0||k.stop()});var w=l.toRefs(e),x=w.name,C=w.disabled,S=w.readonly;l.provide(oA,l.reactive({name:x,disabled:C,readonly:S,value:s,allowUncheck:e.allowUncheck,setValue:c}));var _=ve("radio-group"),O=Qa(),N=function(){if(e.variant.includes("filled")&&!zl(s.value))return l.createVNode("div",{style:g.value,class:"".concat(_.value,"__bg-block")},null)},B=function(){var E;return(E=e.options)===null||E===void 0?void 0:E.map(function(I){var A=I;(Et(I)||Je(I))&&(A={value:I,label:I.toString()});var M=e.theme==="button"?uA:nb;return l.createVNode(M,{key:"radio-group-options-".concat(A.value,"-").concat(Math.random()),name:e.name,checked:s.value===A.value,disabled:"disabled"in A?A.disabled:e.disabled,value:A.value},{default:function(){return[Re(A.label)?A.label(l.h):A.label]}})})},T=l.computed(function(){return["".concat(_.value),v.value[e.size],V(V(V({},"".concat(_.value,"__outline"),e.variant==="outline"),"".concat(_.value,"--filled"),e.variant.includes("filled")),"".concat(_.value,"--primary-filled"),e.variant==="primary-filled")]});return function(){return l.createVNode("div",{ref:u,class:T.value},[O("default")||B(),N()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var hA=Be(nb),np=Be(Vfe),ib=Be(uA);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ehe={disabled:{type:Boolean,default:void 0},inputNumberProps:{type:[Boolean,Object],default:!1},label:{type:[String,Boolean,Function],default:!0},layout:{type:String,default:"horizontal",validator:function(e){return e?["vertical","horizontal"].includes(e):!0}},marks:{type:[Object,Array]},max:{type:Number,default:100},min:{type:Number,default:0},range:Boolean,showStep:Boolean,step:{type:Number,default:1},tooltipProps:{type:Object},value:{type:[Number,Array],default:void 0},modelValue:{type:[Number,Array],default:void 0},defaultValue:{type:[Number,Array],default:0},onChange:Function,onChangeEnd:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ob=function(e,n){return n?{top:"calc(".concat(100-e,"% - 1px)")}:{left:"".concat(e,"%")}},vA=function(e,n){return n==="first"?e instanceof Array?e[0]:e:e instanceof Array?e[1]:0},the=function(e,n){if(!e)return String(n);if(Je(e)){var r=String(n);try{var a=/\${value}%/g,i=a.test(e);if(i)r=e.replace(a,String(n));else throw r=e,new Error}catch{console.warn("fail to parse label prop, please pass string such as '${value}%'")}return r}return e};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function pA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var nhe={visible:!1,trigger:"hover",showArrow:!0,overlayInnerStyle:void 0,overlayClassName:void 0,attach:"body",theme:"default"},rhe=function(e){var n=l.ref(),r=l.computed({get:function(){return!!e.value.tooltipProps},set:function(u){return u}}),a=l.ref(Fc({},nhe)),i=function(u){r.value&&(a.value.visible=u)},o=We(),s=l.computed(function(){var c=e.value,u=c.vertical,d=c.tooltipProps,f=c.label,h=c.value,v=c.position,p=c.range,g=u?"right":"top",m=function(){return f===!0?String(h):typeof f=="string"?the(f,h):o("label",{params:p?{value:h,position:v}:{value:h}})}();return d instanceof Object?(d!=null&&d.placement||(a.value.placement=g),d.content&&(m=d.content),Fc(Fc(Fc({},a.value),d),{},{content:m})):Fc(Fc({},a.value),{},{placement:g,content:m})});return{tooltipRef:n,tooltipProps:s,toggleTooltip:i,showTooltip:r}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var gA=Symbol("sliderProps");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lb=l.defineComponent({name:"TSliderButton",props:{value:{type:[Number],default:0},vertical:{type:Boolean,default:!1},tooltipProps:{type:[Boolean,Object],default:!0},label:{type:[String,Boolean,Function]},range:{type:Boolean,default:!1},position:{type:String}},emits:["input","mouseup"],setup:function(e,n){var r=ve("slider__button"),a=l.computed(function(){return e}),i=rhe(a),o=i.tooltipRef,s=i.tooltipProps,c=i.toggleTooltip,u=i.showTooltip,d=l.inject(gA),f=l.ref(),h=l.ref(!1),v=l.reactive({dragging:!1,isClick:!1,startX:0,startY:0,startPos:0,newPos:null}),p=l.computed(function(){return Number(d.max)-Number(d.min)}),g=l.computed(function(){return"".concat((e.value-d.min)/p.value*100,"%")}),m=l.computed(function(){return d.step}),y=l.computed(function(){return e.vertical?{bottom:g.value}:{left:g.value}});l.watchEffect(function(){d.toggleDragging(v.dragging)});var b=function(k){var E=k;if(!(E===null||Number.isNaN(E))){E>100?E=100:E<0&&(E=0);var I=100*m.value/p.value,A=Math.round(E/I),M=A*I*p.value*.01;M+=d.min,M=Number(parseFloat("".concat(M)).toFixed(d.precision)),n.emit("input",M),l.nextTick(function(){var $,U;o.value&&(($=(U=o.value).updatePopper)===null||$===void 0||$.call(U))})}},w=function(){f.value.focus(),c(!0)},x=function(){v.dragging||c(!1)},C=function(k){v.dragging=!0,v.isClick=!0;var E=k.type,I=k.clientY,A=k.clientX;if(E==="touchstart"){var M=k.touches,$=[M[0].clientY,M[0].clientX];I=$[0],A=$[1]}e.vertical?v.startY=I:v.startX=A,v.startPos=parseFloat(g.value),v.newPos=v.startPos},S=function(k){var E=k;if(v.dragging){h.value=!0,v.isClick=!1,d!=null&&d.resetSize&&Re(d==null?void 0:d.resetSize)&&d.resetSize();var I=0,A=d.sliderSize,M=E.type,$=E.clientY,U=E.clientX;if(M==="touchmove"){var F=E.touches,j=[F[0].clientY,F[0].clientX];$=j[0],U=j[1]}e.vertical?I=v.startY-$:I=U-v.startX,I=I/A*100,v.newPos=v.startPos+I,b(v.newPos)}},_=function(){v.dragging&&(setTimeout(function(){v.dragging=!1,c(!1),v.isClick||b(v.newPos),h.value&&n.emit("mouseup"),h.value=!1},0),window.removeEventListener("mousemove",S),window.removeEventListener("touchmove",S),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_),window.removeEventListener("contextmenu",_))};function O(T){d.disabled||(T.preventDefault(),C(T),window.addEventListener("mousemove",S),window.addEventListener("mouseup",_),window.addEventListener("touchmove",S),window.addEventListener("touchend",_),window.addEventListener("contextmenu",_))}var N=function(k){if(!d.disabled){var E=m.value/p.value*100;k==="sub"&&(E=-E),v.newPos=parseFloat(g.value)+E,b(v.newPos)}},B=function(k){var E=k.code;k.preventDefault(),(E==="ArrowDown"||E==="ArrowLeft")&&N("sub"),(E==="ArrowUp"||E==="ArrowRight")&&N("add")};return n.expose({setPosition:b}),function(){return l.createVNode("div",{ref:f,class:"".concat(r.value,"-wrapper"),style:y.value,tabindex:"0","show-tooltip":u.value,disabled:d.disabled,onmouseenter:w,onmouseleave:x,onmousedown:O,onTouchstart:O,onfocus:w,onblur:x,onKeydown:B},[l.createVNode(Tr,l.mergeProps({ref:o,hideEmptyPopup:!0,disabled:!u.value},s.value),{default:function(){return[l.createVNode("div",{class:[r.value,V({},"".concat(r.value,"--dragging"),v.dragging)]},null)]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ahe=l.defineComponent({name:"TSliderMark",props:{mark:{type:[Object,Array,String,Number]},point:{type:Number},onClickMarkPoint:{type:Function,default:function(){}}},setup:function(e){var n=ve("slider__mark"),r=function(i){var o;i.stopPropagation(),e==null||(o=e.onClickMarkPoint)===null||o===void 0||o.call(e,e.point)};return function(){return l.createVNode("div",{class:"".concat(n.value,"-text"),onClick:r},[e.mark])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ihe=function(e){var n=e.value.prefixName,r=l.computed(function(){var i=e.value;if(!i.marks)return[];var o=[];if(Ke(i.marks)){var s=Br(i.marks).sort(function(d,f){return d-f}),c=Math.max.apply(Math,Ee(s).concat([i.max])),u=Math.min.apply(Math,Ee(s).concat([i.min]));u<i.min&&st.errorOnce("TSlider","marks min value should >= props min"),c>i.max&&st.errorOnce("TSlider","marks max value should <= props max"),s.forEach(function(d){o.push({point:d,position:(d-u)/(c-u)*100,mark:d})})}else Object.keys(i.marks).map(parseFloat).sort(function(d,f){return d-f}).filter(function(d){return d<=i.max&&d>=i.min}).forEach(function(d){var f={point:d,position:(d-i.min)*100/(i.max-i.min),mark:i.marks[d]};o.push(f)});return o}),a=function(o){return r.value.length?l.createVNode("div",null,[l.createVNode("div",{class:"".concat(n,"__stops")},[r.value.map(function(s,c){return s.position===0||s.position===100?null:l.createVNode("div",{class:"".concat(n,"__stop ").concat(n,"__mark-stop"),style:ob(s.position,e.value.vertical),key:c},null)})]),l.createVNode("div",{class:"".concat(n,"__mark")},[r.value.map(function(s,c){return l.createVNode(ahe,{mark:s.mark,point:s.point,key:c,style:ob(s.position,e.value.vertical),onClickMarkPoint:o},null)})])]):null};return a};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ohe=function(e){var n=e.value.prefixName,r=l.computed(function(){var o,s={format:void 0,placeholder:"",theme:"column",decimalPlaces:((o=e.value.step.toString().split(".")[1])===null||o===void 0?void 0:o.length)||0},c=e.value;if(!Nn(c.inputNumberProps)){var u,d=(u=c.inputNumberProps)===null||u===void 0?void 0:u.theme;s=yA(yA({},s),Sr(c.inputNumberProps,"onChange")),["column","row","normal"].includes(d)&&(s.theme=d)}return s}),a=l.computed(function(){return["".concat(n,"__input"),{"is-vertical":e.value.vertical}]}),i=function(s,c){var u=function(f,h){var v,p;f!==void 0&&!isNaN(f)&&c(f),(v=e.value)===null||v===void 0||(v=v.inputNumberProps)===null||v===void 0||(p=v.onChange)===null||p===void 0||p.call(v,f,h)};return l.createVNode(jd,l.mergeProps(r.value,{class:a.value,value:s,step:e.value.step,onChange:u,disabled:e.value.disabled,min:e.value.min,max:e.value.max}),null)};return i};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function bA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function lhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var she=l.defineComponent({name:"TSlider",model:{prop:"value",event:"change"},props:lhe({},ehe),setup:function(e){var n=Vt(),r=ve("slider"),a=Lt(),i=a.STATUS,o=l.toRefs(e),s=o.value,c=o.modelValue,u=Mt(s,c,e.defaultValue,e.onChange),d=$e(u,2),f=d[0],h=d[1],v=l.ref(),p=l.ref(),g=l.ref(),m=l.ref(),y=l.ref(vA(f.value,"first")),b=l.ref(vA(f.value,"second")),w=l.ref(!1),x=l.ref(1),C=l.computed(function(){return e.layout==="vertical"}),S=l.computed(function(){return["".concat(r.value,"__container"),{"is-vertical":C.value}]}),_=l.computed(function(){return["".concat(r.value),V(V(V({"is-vertical":C.value},"".concat(r.value,"--with-input"),e.inputNumberProps),"".concat(r.value,"--vertical"),C.value),i.value.disabled,n.value)]}),O=l.computed(function(){return["".concat(r.value,"__rail"),{"show-input":e.inputNumberProps,disabled:n.value}]}),N=l.computed(function(){return C.value?{height:"100%"}:{}}),B=l.computed(function(){var oe=e.range?"".concat(100*(k.value-e.min)/T.value,"%"):"0%",ce=e.range?E.value-k.value:y.value-e.min,ge="".concat(100*ce/T.value,"%");return C.value?{height:ge,bottom:oe}:{width:ge,left:oe}}),T=l.computed(function(){return e.max-e.min}),k=l.computed(function(){return Math.min(y.value,b.value)}),E=l.computed(function(){return Math.max(y.value,b.value)}),I=l.computed(function(){if(!e.showStep||e.min>e.max)return[];if(e.step===0)return console.warn("[Element Warn][Slider]step should not be 0."),[];for(var oe=T.value/e.step,ce=100*e.step/T.value,ge=[],pe=1;pe<oe;pe++)ge.push(pe*ce);if(e.range){var _e=ge.filter(function(be){return be<100*(k.value-e.min)/T.value||e.step>100*(E.value-e.max)/T.value});return _e}return ge.filter(function(be){return be>100*(y.value-e.min)/T.value})}),A=l.computed(function(){var oe=[e.min,e.max,e.step].map(function(ce){var ge="".concat(ce).split(".");return ge[1]?ge[1].length:0});return Math.max.apply(null,oe)}),M=function(ce){var ge=[e.min,e.max],pe=ge[0],_e=ge[1];if(pe>_e){console.warn("[Slider] max should be greater than min.");return}if(e.range&&Ke(ce)){var be=[Math.min.apply(Math,Ee(ce)),Math.max.apply(Math,Ee(ce))],Se=be[0],Ne=be[1];Se>_e&&(Se=y.value),Se<pe&&(Se=pe),Ne<pe&&(Ne=b.value),Ne>_e&&(Ne=_e);var Ae=[Se,Ne];return y.value=Ae[0],b.value=Ae[1],[Se,Ne]}var Pe=ce;return Pe<pe&&(Pe=pe),Pe>_e&&(Pe=_e),Pe},$=function(ce){var ge=ce;ge===void 0&&(e.range?ge=[y.value,b.value]:ge=y.value);var pe=M(ge);h(pe)},U=function(){p.value&&(x.value=p.value["client".concat(C.value?"Height":"Width")])},F=l.ref(!1),j=function(){var ce;e.range?(Ke(f.value)?(y.value=Math.max(e.min||0,f.value[0]),b.value=Math.min(e.max||100,f.value[1])):(y.value=e.min||0,b.value=e.max||100),ce="".concat(y.value,"-").concat(b.value)):(Et(f.value)?y.value=Math.min(e.max,Math.max(e.min,f.value)):y.value=e.min,ce=String(y.value)),v.value&&v.value.setAttribute("aria-valuetext",ce),U(),window.addEventListener("resize",U)},W=function(ce){var ge=ce*T.value/100;if(ge=e.min+ge,!e.range&&g.value){g.value.setPosition(ce);return}var pe;Math.abs(k.value-ge)<Math.abs(E.value-ge)?pe=y.value<b.value?"button1":"button2":pe=y.value>b.value?"button1":"button2",pe==="button1"&&g.value&&g.value.setPosition(ce),pe==="button2"&&m.value&&m.value.setPosition(ce)},H=function(){var ce=e.range?[y.value,b.value]:y.value;return M(ce)},J=function(ce){var ge;if(!(n.value||w.value)&&p.value){U();var pe=0;if(C.value){var _e=p.value.getBoundingClientRect().bottom;pe=(_e-ce.clientY)/x.value*100,W(pe)}else{var be=p.value.getBoundingClientRect().left;pe=(ce.clientX-be)/x.value*100,W(pe)}var Se=H();(ge=e.onChangeEnd)===null||ge===void 0||ge.call(e,Se)}},Y=function(ce){var ge;if(!(n.value||w.value)){U();var pe=Number(ce/T.value*100);W(pe),$(ce);var _e=H();(ge=e.onChangeEnd)===null||ge===void 0||ge.call(e,_e)}};l.watch(function(){return f.value},function(oe){if(w.value!==!0)if(Ke(oe)&&e.range){var ce=$e(oe,2);y.value=ce[0],b.value=ce[1]}else y.value=oe}),l.watch([y,b,w],function(oe,ce){oe[0]!==ce[0]&&(e.range?$([k.value,E.value]):$(y.value)),oe[1]!==ce[1]&&e.range&&$([k.value,E.value]),oe[2]!==ce[2]&&oe[2]===!1&&j()}),l.onMounted(function(){j(),F.value=!0}),l.onBeforeUnmount(function(){window.removeEventListener("resize",U)});var D=l.computed(function(){return{max:e.max,min:e.min,marks:e.marks,vertical:C.value,prefixName:r.value}}),q=ihe(D),z=l.computed(function(){return{max:e.max,min:e.min,inputNumberProps:e.inputNumberProps,step:e.step,prefixName:r.value,vertical:C.value,disabled:n.value}}),K=ohe(z),P=function(){var ce=M(y.value),ge=function(Se){y.value=M(Se)},pe=M(b.value),_e=function(Se){b.value=M(Se)};return l.createVNode("div",{class:["".concat(r.value,"__input-container"),{"is-vertical":C.value}]},[K(ce,ge),e.range&&l.createVNode("div",{class:"".concat(r.value,"__center-line")},null),e.range&&K(pe,_e)])},R=function(ce){w.value=ce},X=l.toRefs(e),ee=X.min,re=X.max,ae=X.step;return l.provide(gA,l.reactive({min:ee,max:re,step:ae,dragging:w,toggleDragging:R,precision:A,disabled:n,resetSize:U,sliderSize:x})),function(){return l.createVNode("div",{class:S.value,ref:v},[l.createVNode("div",{class:_.value,role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.layout,"aria-disabled":n.value,"tooltip-props":e.tooltipProps},[l.createVNode("div",{class:O.value,style:N.value,onClick:J,ref:p},[l.createVNode("div",{class:"".concat(r.value,"__track"),style:B.value},null),l.createVNode(lb,{vertical:C.value,value:y.value,ref:g,disabled:n.value,range:e.range,position:"start","tooltip-props":e.tooltipProps,label:e.label,onInput:function(ce){y.value=ce},onMouseup:function(){var ce,ge=H();(ce=e.onChangeEnd)===null||ce===void 0||ce.call(e,ge)}},null),e.range&&l.createVNode(lb,{vertical:C.value,value:b.value,ref:m,disabled:n.value,label:e.label,range:e.range,position:"end","tooltip-props":e.tooltipProps,onInput:function(ce){b.value=ce},onMouseup:function(){var ce,ge=H();(ce=e.onChangeEnd)===null||ce===void 0||ce.call(e,ge)}},null),e.showStep&&l.createVNode("div",{class:"".concat(r.value,"__stops")},[I.value.map(function(oe,ce){return oe.position===0||oe.position===100?null:l.createVNode("div",{class:"".concat(r.value,"__stop"),key:ce,style:ob(oe,C.value)},null)})]),q(Y)])]),F.value&&e.inputNumberProps&&P()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var che=Be(she),uhe=Be(lb);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var dhe={beforeChange:{type:Function},customValue:{type:Array},disabled:{type:Boolean,default:void 0},label:{type:[Array,Function],default:function(){return[]}},loading:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},value:{type:[String,Number,Boolean],default:void 0},modelValue:{type:[String,Number,Boolean],default:void 0},defaultValue:{type:[String,Number,Boolean]},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function wA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hhe=l.defineComponent({name:"TSwitch",props:fhe({},dhe),setup:function(e,n){var r=n.slots,a=Vt(),i=ve("switch"),o=Lt(),s=o.STATUS,c=o.SIZE,u=l.toRefs(e),d=u.value,f=u.modelValue,h=Mt(d,f,e.defaultValue,e.onChange),v=$e(h,2),p=v[0],g=v[1],m=l.computed(function(){return e.customValue&&e.customValue.length>0?e.customValue[0]:!0}),y=l.computed(function(){return e.customValue&&e.customValue.length>1?e.customValue[1]:!1});function b(O){var N=p.value===m.value?y.value:m.value;g(N,{e:O})}function w(O){if(!(a.value||e.loading)){if(!e.beforeChange){b(O);return}Promise.resolve(e.beforeChange()).then(function(N){N&&b(O)}).catch(function(N){throw new Error("Switch: some error occurred: ".concat(N))})}}var x=l.computed(function(){return["".concat(i.value),c.value[e.size],V(V(V({},s.value.disabled,a.value),s.value.loading,e.loading),s.value.checked,p.value===m.value||e.modelValue===m.value)]}),C=l.computed(function(){return["".concat(i.value,"__handle"),V(V({},s.value.disabled,a.value),s.value.loading,e.loading)]}),S=l.computed(function(){return["".concat(i.value,"__content"),c.value[e.size],V({},s.value.disabled,a.value)]});l.watch(p,function(O){if(e.customValue&&e.customValue.length&&!e.customValue.includes(O))throw new Error("value is not in ".concat(JSON.stringify(e.customValue)))},{immediate:!0});var _=l.computed(function(){if(Re(e.label))return e.label(l.h,{value:p.value});if(Je(e.label))return e.label;if(Ke(e.label)&&e.label.length){var O=p.value===m.value?e.label[0]:e.label[1];if(!O)return;if(Je(O))return O;if(Re(O))return O(l.h)}return r.label?r.label({value:p.value}):null});return function(){var O,N;return e.loading?N=l.createVNode(lr,{size:"small"},null):_.value&&(O=_.value),l.createVNode("div",{class:x.value,disabled:a.value,onClick:w},[l.createVNode("span",{class:C.value},[N]),l.createVNode("div",{class:S.value},[O])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vhe=Be(hhe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Da,phe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow-y:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,ghe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function mhe(t){if(!(typeof window>"u"||!t)){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing")||e.getPropertyValue("-moz-box-sizing")||e.getPropertyValue("-webkit-box-sizing"),r=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),a=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),i=ghe.map(function(o){return"".concat(o,":").concat(e.getPropertyValue(o))}).join(";");return{sizingStyle:i,paddingSize:r,borderSize:a,boxSizing:n}}}function xA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;Da||(Da=document.createElement("textarea"),document.body.appendChild(Da));var r=mhe(t),a=r.paddingSize,i=r.borderSize,o=r.boxSizing,s=r.sizingStyle;Da.setAttribute("style","".concat(s,";").concat(phe)),Da.value=t.value||t.placeholder||"";var c=Da.scrollHeight,u={};o==="border-box"?c+=i:o==="content-box"&&(c-=a),Da.value="";var d=Da.scrollHeight-a;if(e!==null){var f=d*e;o==="border-box"&&(f=f+a+i),c=Math.max(f,c),u.minHeight="".concat(f,"px")}if(n!==null){var h=d*n;o==="border-box"&&(h=h+a+i),c=Math.min(h,c)}return u.height="".concat(c,"px"),Da.parentNode&&Da.parentNode.removeChild(Da),Da=null,u}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yhe={allowInputOverMax:Boolean,autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:void 0},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function CA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _A(t){var e={};return Object.keys(t).forEach(function(n){Bn(t[n])||(e[n]=t[n])}),e}var whe=l.defineComponent({name:"TTextarea",inheritAttrs:!1,props:bhe({},yhe),setup:function(e,n){var r=n.attrs,a=n.expose,i=ve(),o=ve("textarea"),s=l.computed(function(){return"".concat(o.value,"__tips")}),c=l.computed(function(){return"".concat(o.value,"__limit")}),u=l.toRefs(e),d=u.value,f=u.modelValue,h=Mt(d,f,e.defaultValue,e.onChange),v=$e(h,2),p=v[0],g=v[1],m=Vt(),y=Pn(),b=l.ref({}),w=l.ref(),x=l.ref(!1),C=l.ref(!1),S=function(){var P;return(P=w.value)===null||P===void 0?void 0:P.focus()},_=function(){var P;return(P=w.value)===null||P===void 0?void 0:P.blur()},O=function(){var P;if(e.autosize===!0)b.value=xA(w.value);else if(e.autosize&&wt(e.autosize)==="object"){var R=e.autosize,X=R.minRows,ee=R.maxRows;b.value=xA(w.value,X,ee)}else r.rows?b.value={height:"auto",minHeight:"auto"}:r.style&&(P=w.value)!==null&&P!==void 0&&(P=P.style)!==null&&P!==void 0&&P.height&&(b.value={height:w.value.style.height})},N=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",R=w.value,X=String(P);R&&R.value!==X&&(R.value=X,p.value=X)},B=function(P){var R=P.target,X=R.value;if(e.maxcharacter&&e.maxcharacter>=0){var ee=jl(X,e.maxcharacter);X=wt(ee)==="object"&&ee.characters}!C.value&&g(X,{e:P}),l.nextTick(function(){return N(X)}),O()},T=function(P){B(P)},k=function(){C.value=!0},E=function(P){C.value=!1,B(P)},I=function(P,R){var X;if(!m.value){var ee="on".concat(P[0].toUpperCase()).concat(P.slice(1));(X=e[ee])===null||X===void 0||X.call(e,p.value,{e:R})}},A=function(P){I("keydown",P)},M=function(P){I("keyup",P)},$=function(P){I("keypress",P)},U=function(P){var R;O(),!m.value&&(x.value=!0,(R=e.onFocus)===null||R===void 0||R.call(e,p.value,{e:P}))},F=l.inject(Cy,void 0),j=function(P){var R;P.target&&(O(),x.value=!1,(R=e.onBlur)===null||R===void 0||R.call(e,p.value,{e:P}),F==null||F.handleBlur())},W=l.computed(function(){return[o.value,V(V({},"".concat(i.value,"-is-disabled"),m.value),"".concat(i.value,"-is-readonly"),y.value)]}),H=l.computed(function(){return _A({autofocus:e.autofocus,disabled:m.value,readonly:y.value,placeholder:e.placeholder,maxlength:!e.allowInputOverMax&&e.maxlength||void 0,name:e.name||void 0})}),J=l.computed(function(){var K=jl(String(p.value||""));return wt(K)==="object"?K.length:K}),Y=l.computed(function(){return{value:[void 0,null].includes(p.value)?void 0:String(p.value),status:e.status,maxlength:Number(e.maxlength),maxcharacter:e.maxcharacter,allowInputOverMax:e.allowInputOverMax,onValidate:e.onValidate}}),D=sE(Y),q=D.tStatus;l.watch(function(){return p.value},function(){return O()}),l.watch(w,function(K){K&&O()}),l.watch(function(){return e.autofocus},function(K){K&&w.value.focus()}),l.watch(b,function(K){var P=r.style;Bl(w.value,Wh(P,K))}),l.watch(p,function(){l.nextTick(function(){return O()})}),l.watch(function(){return e.autosize},O,{deep:!0}),a({focus:S,blur:_}),l.onMounted(function(){O()});var z=We();return function(){var K,P=_A({onFocus:U,onBlur:j,onKeydown:A,onKeyup:M,onKeypress:$}),R=Lt(),X=R.STATUS,ee=l.computed(function(){return["".concat(o.value,"__inner"),V(V(V(V({},"".concat(i.value,"-is-").concat(q.value),q.value),X.value.disabled,m.value),X.value.focused,x.value),"".concat(i.value,"-resize-none"),wt(e.autosize)==="object"),"narrow-scrollbar"]}),re=z("tips"),ae=re&&l.createVNode("div",{class:"".concat(s.value," ").concat(o.value,"__tips--").concat(e.status||"normal")},[re]),oe=e.maxcharacter&&l.createVNode("span",{class:c.value},["".concat(J.value,"/").concat(e.maxcharacter)])||!e.maxcharacter&&e.maxlength&&l.createVNode("span",{class:c.value},["".concat(p.value?(K=String(p.value))===null||K===void 0?void 0:K.length:0,"/").concat(e.maxlength)]);return l.createVNode("div",l.mergeProps({class:W.value},my(r,["style"])),[l.createVNode("textarea",l.mergeProps({onInput:T,onCompositionstart:k,onCompositionend:E,ref:w,value:p.value,class:ee.value},P,H.value),null),ae||oe?l.createVNode("div",{class:["".concat(o.value,"__info_wrapper"),V({},"".concat(o.value,"__info_wrapper_align"),!ae)]},[ae,oe]):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var xhe=Be(whe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function SA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Che(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _he="TTransfer",Ra="source",ha="target";function ns(t){return Ke(t)?{source:t[0],target:t[1]}:{source:t,target:t}}function Bc(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.isTreeMode,a=r===void 0?!1:r,i=n.include,o=i===void 0?!0:i,s=n.remainValue,c=s===void 0?[]:s;if(a){var u=[];if(t)for(var d=0;d<t.length;d++){var f=t[d],h=e.includes(f.value)&&!f.disabled;if(!(!o&&h))if(f.children&&f.children.length>0){var v=Bc(f.children,e,{isTreeMode:a,include:o});u=u.concat(v)}else(o&&h||!o&&!h)&&u.push(f.value)}return u}return t.filter(function(p){if(!p)return!1;var g=e.includes(p.value);return(o&&g||!o&&!g)&&(!p.disabled||c.includes(p.value))}).map(function(p){return p.value})}function TA(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=t.map(function(a,i){var o,s=(e==null?void 0:e.label)||"label",c=(e==null?void 0:e.value)||"value",u=(e==null?void 0:e.disabled)||"disabled";if(Bn(a[s]))throw new Error("".concat(s," is not in DataOption ").concat(JSON.stringify(a)));if(Bn(a[c]))throw new Error("".concat(c," is not in DataOption ").concat(JSON.stringify(a)));var d={label:a[s],value:a[c],key:"key__value_".concat(a[c],"_index_").concat(i),disabled:(o=a[u])!==null&&o!==void 0?o:!1,data:a};return n&&a.children&&(d.children=TA(a.children,e,!0)),d});return r}function She(t,e,n){return e.includes(t.value)?n:!1}function kA(t,e,n){var r;return t?e.includes(t.value)?n:(r=t.children)!==null&&r!==void 0&&r.length?t.children.some(function(a){return kA(a,e,n)}):!n:!n}function OA(t,e,n,r){t.forEach(function(a){var i;She(a,n,r)?(i=Br(a),e.push(i)):kA(a,n,r)&&(i=Che({},a),delete i.children,e.push(i),a.children&&(i.children=[],OA(a.children,i.children,n,r),i.children.length===0&&delete i.children))})}function EA(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!r)return n?e.map(function(i){return t.find(function(o){return o.value===i})}).filter(function(i){return!!i}):t.filter(function(i){var o=e.includes(i.value);return!o});var a=[];return OA(t,a,e,n),a}function PA(t){var e=0;return t.forEach(function(n){n.children&&n.children.length>0?e+=PA(n.children):e+=1}),e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var The=l.defineComponent({name:"TTransferSearch",props:{value:{type:String,default:""},search:{type:[Boolean,Object],default:!1},placeholder:{type:String,default:""},onChange:Function},setup:function(e){var n=ve(),r=St({SearchIcon:Iee}),a=r.SearchIcon,i=function(c,u){var d,f=u.e,h=u.trigger;(d=e.onChange)===null||d===void 0||d.call(e,{value:c,e:f,trigger:h})},o=wt(e.search)==="object"?e.search:{clearable:!0};return function(){return l.createVNode("div",{class:"".concat(n.value,"-transfer__search-wrapper")},[l.createVNode(Va,l.mergeProps(o,{defaultValue:e.value,onChange:i,placeholder:e.placeholder}),{default:function(){return[l.createVNode(a,{slot:"suffix-icon"},null)]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function khe(t,e,n){var r=l.ref(null),a=l.ref(null),i=l.ref(null),o=function(h){var v=Number(h.target.dataset.index);r.value=v},s=function(h){if(h.preventDefault(),h.currentTarget){var v=h.currentTarget,p=Number(v.dataset.index),g=v.offsetHeight,m=h.clientY-v.getBoundingClientRect().top,y=.3,b=g*y;if(a.value=p,a.value===r.value){i.value="";return}m<b?i.value="top":m>g-b?i.value="bottom":i.value="center"}},c=function(){i.value="",a.value=null},u=function(){r.value=null,a.value=null,i.value=""},d=function(h){h.preventDefault();var v=r.value,p=a.value;if(r.value=null,a.value=null,i.value="",v!==p){var g=Ee(t.value),m=e.value[v].value,y=e.value[p].value,b=g.indexOf(m),w=g.indexOf(y);g.splice(b,1),i.value==="bottom"&&(w+=1),g.splice(w,0,m),n==null||n(g,[m,y])}};return{onDragStart:o,onDragEnd:u,onDrop:d,onDragOver:s,onDragLeave:c}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ohe=ec;function Ehe(t,e){return function(n,r){if(n==null)return n;if(!Ohe(n))return t(n,r);for(var a=n.length,i=e?a:-1,o=Object(n);(e?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var Phe=Ehe,Ihe=US,Ahe=Phe,Nhe=Ahe(Ihe),Dhe=Nhe,Rhe=Dhe;function Mhe(t,e){var n=[];return Rhe(t,function(r,a,i){e(r,a,i)&&n.push(r)}),n}var Lhe=Mhe,Fhe=w0,Bhe=Lhe,jhe=lv,$he=Ke;function Uhe(t,e){var n=$he(t)?Fhe:Bhe;return n(t,jhe(e))}var zhe=Uhe;function IA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ap(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Hhe={checkboxProps:{type:Object,default:function(){return{}}},dataSource:{type:Array,default:function(){return[]}},listType:{type:String,default:"target"},title:{type:[String,Function]},checkedValue:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},search:{type:[Boolean,Object],default:!1},transferItem:Function,empty:{type:[Function,String]},pagination:[Boolean,Object],footer:[Function,String],checkAll:Boolean,isTreeMode:{type:Boolean,default:!1},onCheckedChange:Function,onPageChange:Function,onScroll:Function,onSearch:Function,onDataChange:Function,draggable:Boolean,currentValue:{type:Array}},Whe=l.defineComponent({name:"TTransferList",props:rp({},Hhe),setup:function(e){var n=ve(),r=l.toRefs(e),a=r.currentValue,i=Qe("transfer"),o=i.t,s=i.globalConfig,c=l.ref(""),u=l.ref(1),d=l.ref(0),f=l.computed(function(){var W=e.pagination;return(W==null?void 0:W.current)||u.value||(W==null?void 0:W.defaultCurrent)}),h=l.computed(function(){var W=e.pagination;return(W==null?void 0:W.pageSize)||d.value||(W==null?void 0:W.defaultPageSize)}),v=l.computed(function(){var W=e.dataSource.some(function(H){return H.children&&H.children.length});return W?B(e.dataSource,c.value):e.dataSource.filter(function(H){var J=H&&H.label.toString();return J.toLowerCase().indexOf(c.value.toLowerCase())>-1})}),p=l.computed(function(){return v.value&&v.value.length||0}),g=l.computed(function(){var W=v.value;if(!e.pagination||h.value===0)return W;var H=(f.value-1)*h.value,J=f.value*h.value;return W=W.slice(H,J),W}),m=l.computed(function(){var W={totalContent:!1,pageSizeOptions:[]};return wt(e.pagination)==="object"?rp(rp(rp({},W),e.pagination),{},{size:"small",theme:"simple",current:f.value,total:p.value,pageSize:h.value}):{}}),y=khe(a,g,e.onDataChange),b=y.onDragStart,w=y.onDragEnd,x=y.onDrop,C=y.onDragOver,S=y.onDragLeave,_=l.computed(function(){var W=Bc(e.dataSource,[],{isTreeMode:e.isTreeMode,include:!1});return e.checkedValue.length>0&&(e.isTreeMode?W.every(function(H){return e.checkedValue.includes(H)}):(e.search?v.value:e.dataSource).every(function(H){return H.disabled||e.checkedValue.includes(H.value)}))}),O=l.computed(function(){return!_.value&&e.checkedValue.length>0}),N=l.computed(function(){return PA(e.dataSource)});l.watch(N,function(W){if(W<=(f.value-1)*h.value){var H=Math.ceil(W/h.value);u.value=H}});var B=function(H,J){var Y=zhe(Br(H),function(D){return!!(D.label.toLowerCase().includes(J.toLowerCase())||D.children&&D.children.length>0&&(D.children=B(D.children,J),D.children.length>0))});return Y},T=function(H){var J;(J=e.onPageChange)===null||J===void 0||J.call(e,H),u.value=H.current,d.value=H.pageSize},k=function(H){var J;(J=e.onCheckedChange)===null||J===void 0||J.call(e,H)},E=function(H){if(H){var J=Bc(e.search?v.value:e.dataSource,[],{isTreeMode:e.isTreeMode,include:!1});k(J)}else k([])},I=function(H){var J;(J=e.onScroll)===null||J===void 0||J.call(e,H)},A=function(H){var J,Y={query:H.value,type:e.listType,e:H.e,trigger:H.trigger};c.value=H.value,(J=e.onSearch)===null||J===void 0||J.call(e,Y)},M=Qa(),$=function(){var H=e.title&&Je(e.title)?l.createVNode("template",null,[e.title]):null,J=M("title",{defaultNode:H,params:{type:e.listType}});return l.createVNode("span",null,[J])},U=function(){var H=e.draggable&&e.listType===ha,J=null;if(H){var D;J=l.createVNode(zd,{value:e.checkedValue,onChange:k},ap(D=g.value.map(function(q,z){var K;return l.createVNode("div",{draggable:H,onDragend:w,onDragstart:b,onDragover:C,onDragleave:S,onDrop:x,"data-index":z},[l.createVNode(Ni,l.mergeProps({disabled:e.disabled||q.disabled,value:q.value,needRipple:!0,class:["".concat(n.value,"-transfer__list-item"),e.checkedValue.includes(q.value)?"".concat(n.value,"-is-checked"):""],key:q.key},e.checkboxProps),ap(K=M("transferItem",{defaultNode:l.createVNode("span",null,[q.label]),params:{data:q.data,index:z,type:e.listType}}))?K:{default:function(){return[K]}})])}))?D:{default:function(){return[D]}})}else{var Y;J=l.createVNode(zd,{value:e.checkedValue,onChange:k},ap(Y=g.value.map(function(q,z){var K;return l.createVNode(Ni,l.mergeProps({disabled:e.disabled||q.disabled,value:q.value,needRipple:!0,class:["".concat(n.value,"-transfer__list-item"),e.checkedValue.includes(q.value)?"".concat(n.value,"-is-checked"):""],key:q.key},e.checkboxProps),ap(K=M("transferItem",{defaultNode:l.createVNode("span",null,[q.label]),params:{data:q.data,index:z,type:e.listType}}))?K:{default:function(){return[K]}})}))?Y:{default:function(){return[Y]}})}return l.createVNode("div",{class:["".concat(n.value,"-transfer__list-content"),"narrow-scrollbar"],onScroll:I},[M("tree",{defaultNode:J,params:{data:g.value,value:e.checkedValue,onChange:k}})])},F=function(){var H=e.empty||o(s.value.empty),J=Je(H)?l.createVNode("span",null,[H]):null;return l.createVNode("div",{class:"".concat(n.value,"-transfer__empty")},[M("empty",{defaultNode:J,params:{type:e.listType}})])},j=function(){var H=Je(e.footer)?l.createVNode("div",{class:"".concat(n.value,"-transfer__footer")},[e.footer]):null;return M("footer",{defaultNode:H,params:{type:e.listType}})};return function(){return l.createVNode("div",{class:["".concat(n.value,"-transfer__list"),"".concat(n.value,"-transfer__list-").concat(e.listType)]},[l.createVNode("div",{class:"".concat(n.value,"-transfer__list-header")},[l.createVNode("div",null,[e.checkAll&&l.createVNode(Ni,{disabled:e.disabled||!e.dataSource.length,checked:_.value,indeterminate:O.value,onChange:E},null),l.createVNode("span",null,[o(s.value.title,{checked:e.checkedValue.length,total:N.value})])]),$()]),l.createVNode("div",{class:["".concat(n.value,"-transfer__list-body"),e.search?"".concat(n.value,"-transfer__list--with-search"):""]},[e.search&&l.createVNode(The,{searchValue:c.value,placeholder:o(s.value.placeholder),onChange:A,disabled:e.disabled,search:e.search},null),g.value.length>0?U():F()]),e.pagination&&h.value>0&&p.value>0&&l.createVNode("div",{class:"".concat(n.value,"-transfer__list-pagination")},[l.createVNode(Dy,l.mergeProps(m.value,{onChange:T}),null)]),j()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var AA={checkboxProps:{type:Object},checked:{type:Array,default:void 0},defaultChecked:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},direction:{type:String,default:"both",validator:function(e){return e?["left","right","both"].includes(e):!0}},disabled:{type:[Boolean,Array],default:void 0},empty:{type:[String,Array,Function],default:""},footer:{type:[Array,Function]},keys:{type:Object},operation:{type:[Array,Function]},pagination:{type:[Object,Array]},search:{type:[Boolean,Object,Array],default:!1},showCheckAll:{type:[Boolean,Array],default:!0},targetDraggable:Boolean,targetSort:{type:String,default:"original",validator:function(e){return e?["original","push","unshift"].includes(e):!0}},title:{type:[Array,Function],default:function(){return[]}},transferItem:{type:Function},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onChange:Function,onCheckedChange:Function,onPageChange:Function,onScroll:Function,onSearch:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Khe=l.defineComponent({name:"TTransferOperations",props:{leftDisabled:{type:Boolean,required:!0},rightDisabled:{type:Boolean,required:!0},operation:AA.operation},emits:["moveToRight","moveToLeft"],setup:function(e,n){var r=n.slots,a=n.emit,i=ve(),o=St({ChevronRightIcon:tl,ChevronLeftIcon:pc}),s=o.ChevronRightIcon,c=o.ChevronLeftIcon,u=function(){a("moveToRight")},d=function(){a("moveToLeft")},f=function(){return l.createVNode(s,null,null)},h=function(){return l.createVNode(c,null,null)},v=function(m){return Re(e.operation)||m==="right"&&e.operation&&Re(e.operation[0])||m==="left"&&e.operation&&Re(e.operation[1])||r.operation?null:m==="left"?h:f},p=function(m,y){if(Re(r.operation))return r.operation({direction:y});if(Re(e.operation)){var b=e.operation;return b(m,{direction:y})}var w;if(Ke(e.operation)){var x=$e(e.operation,2),C=x[0],S=x[1];w=y==="right"?S:C}else w="";return w};return function(){var g,m,y,b;return l.createVNode("div",{class:"".concat(i.value,"-transfer__operations")},[l.createVNode(zt,{variant:"outline",size:"small",shape:Je((g=e.operation)===null||g===void 0?void 0:g[1])?"rectangle":"square",key:e.rightDisabled?"right-outline":"right-base",disabled:e.rightDisabled,onClick:u,icon:v("right")},{default:function(){return[r.operation||(m=e.operation)!==null&&m!==void 0&&m[1]?p(l.h,"right"):null]}}),l.createVNode(zt,{variant:"outline",size:"small",shape:Je((y=e.operation)===null||y===void 0?void 0:y[0])?"rectangle":"square",key:e.rightDisabled?"left-outline":"left-base",disabled:e.leftDisabled,onClick:d,icon:v("left")},{default:function(){return[r.operation||(b=e.operation)!==null&&b!==void 0&&b[0]?p(l.h,"left"):null]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function NA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ghe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Yhe=l.defineComponent({name:_he,props:qhe({},AA),setup:function(e,n){var r=n.slots,a=Vt(),i=ve(),o=l.toRefs(e),s=o.value,c=o.modelValue,u=o.checked,d=Mt(s,c,e.defaultValue,e.onChange),f=$e(d,2),h=f[0],v=f[1],p=gn(u,e.defaultChecked,e.onCheckedChange,"checked"),g=$e(p,1),m=g[0],y=l.computed(function(){return h.value}),b=l.computed(function(){var K=r.tree;return Re(K)}),w=l.computed(function(){return e.direction==="right"}),x=l.computed(function(){return e.direction==="left"}),C=l.computed(function(){return TA(e.data,e.keys,b.value)}),S=l.computed(function(){return EA(C.value,y.value,!1,b.value)}),_=l.computed(function(){return EA(C.value,y.value,!0,b.value)}),O=l.computed(function(){return V(V({},Ra,Bc(S.value,m.value,{isTreeMode:b.value})),ha,Bc(_.value,m.value,{isTreeMode:b.value}))}),N=l.computed(function(){return!!r.footer||!!e.footer}),B=l.computed(function(){return!!e.pagination&&!r.content}),T=l.computed(function(){return!!e.search}),k=l.computed(function(){var K=e.footer||"";return ns(K)}),E=l.computed(function(){return ns(e.empty)}),I=l.computed(function(){return ns(e.search)}),A=l.computed(function(){return ns(e.showCheckAll)}),M=l.computed(function(){return ns(a.value)}),$=l.computed(function(){return ns(e.title)}),U=l.computed(function(){return ns(e.pagination)}),F=function(P,R){var X,ee=R===Ra?P:O.value[Ra],re=R===ha?P:O.value[ha],ae=[].concat(Ee(ee),Ee(re)),oe={checked:ae,sourceChecked:ee,targetChecked:re,type:R};m.value=ae,(X=e.onCheckedChange)===null||X===void 0||X.call(e,oe)},j=function(P){var R=JSON.parse(JSON.stringify(y.value)),X,ee=P===ha?O.value[Ra]:O.value[ha];if(P===Ra)X=R.filter(function(oe){return!ee.includes(oe)});else if(e.targetSort==="original"){var re=C.value.reduce(function(oe,ce){return R.includes(ce.value)&&ce.disabled?oe.concat(ce.value):oe},[]);X=Bc(C.value,R.concat(ee),{isTreeMode:b.value,remainValue:re})}else e.targetSort==="unshift"?X=ee.concat(R):X=R.concat(ee);F([],P===Ra?ha:Ra);var ae={type:P,movedValue:ee};v(X,ae)},W=function(){j(ha)},H=function(){j(Ra)},J=function(P,R){var X,ee=P.target,re=ee.scrollHeight-ee.scrollTop-ee.clientHeight,ae={e:P,bottomDistance:re,type:R};(X=e.onScroll)===null||X===void 0||X.call(e,ae)},Y=function(P){var R;(R=e.onSearch)===null||R===void 0||R.call(e,P)},D=function(P,R){var X;(X=e.onPageChange)===null||X===void 0||X.call(e,P,{type:R})},q=function(P,R){v(P,{type:ha,movedValue:R})},z=function(P){var R=Ai(r,["title","empty","footer","operation","transferItem","default","tree"]);return l.createVNode(Whe,{checkboxProps:e.checkboxProps,transferItem:e.transferItem,"list-type":P,title:$.value[P],"data-source":P===Ra?S.value:_.value,"checked-value":O.value[P],disabled:M.value[P],search:I.value[P],pagination:U.value[P],"check-all":A.value[P],footer:k.value[P],empty:E.value[P],onCheckedChange:function(ee){return F(ee,P)},onScroll:function(ee){return J(ee,P)},onSearch:Y,onPageChange:function(ee){return D(ee,P)},isTreeMode:b.value,onDataChange:q,currentValue:y.value,draggable:e.targetDraggable&&P===ha},Ghe(R)?R:{default:function(){return[R]}})};return function(){return l.createVNode("div",{class:["".concat(i.value,"-transfer"),T.value?"".concat(i.value,"-transfer__search"):"",N.value?"".concat(i.value,"-transfer__footer"):"",B.value?"".concat(i.value,"-transfer__pagination"):"",b.value?"".concat(i.value,"-transfer--with-tree"):""]},[z(Ra),l.createVNode(Khe,{leftDisabled:M.value[ha]||w.value||O.value[ha].length===0,rightDisabled:M.value[Ra]||x.value||O.value[Ra].length===0,operation:e.operation,onMoveToRight:W,onMoveToLeft:H},{operation:r.operation}),z(ha)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Xhe=Be(Yhe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function DA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ip(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}ke.extend(Ac);var Jhe=l.defineComponent({name:"TTimePicker",props:ip({},Uy),setup:function(e){var n=We(),r=Qe("timePicker"),a=r.globalConfig,i=ve("time-picker"),o=Lt(),s=o.STATUS,c=St({TimeIcon:QT}),u=c.TimeIcon,d=l.ref(""),f=l.ref(!1),h=Pn(),v=l.toRefs(e),p=v.value,g=v.modelValue,m=Mt(p,g,e.defaultValue,e.onChange),y=$e(m,2),b=y[0],w=y[1],x=Vt(),C=l.toRefs(e),S=C.allowInput,_=C.format,O=l.computed(function(){return["".concat(i.value,"__group"),V({},s.value.focused,f.value)]}),N=function($,U){var F,j;f.value=$,$?(F=e.onOpen)===null||F===void 0||F.call(e,U):(j=e.onClose)===null||j===void 0||j.call(e,U)},B=function($){var U=$.e;U.stopPropagation(),d.value=null,w(null)},T=function($){d.value=$},k=function($,U){var F;if(S.value){var j=Gv(d.value,_.value);j&&w(gI(d.value,_.value))}(F=e.onBlur)===null||F===void 0||F.call(e,{value:$,inputValue:U.inputValue,e:U.e})},E=function(){var $=Gv(d.value,_.value);$&&w(d.value),f.value=!1},I=function($,U){var F;d.value=$,(F=e.onPick)===null||F===void 0||F.call(e,$,{e:U})},A=l.computed(function(){var M;return{value:f.value?d.value:(M=b.value)!==null&&M!==void 0?M:void 0}});return l.watch(function(){return f.value},function(){var M;d.value=f.value&&(M=b.value)!==null&&M!==void 0?M:""}),function(){var M,$;return l.createVNode("div",{class:i.value},[l.createVNode(Ec,l.mergeProps({onFocus:e.onFocus,onClear:B,borderless:e.borderless,disabled:x.value,clearable:e.clearable,allowInput:S.value,class:O.value,label:e.label,suffixIcon:function(){return l.createVNode(u,null,null)},popupVisible:!h.value&&f.value,onInputChange:T,onBlur:k,onPopupVisibleChange:N,placeholder:b.value?void 0:e.placeholder||a.value.placeholder,value:f.value?d.value:(M=b.value)!==null&&M!==void 0?M:void 0,inputValue:f.value?d.value:($=b.value)!==null&&$!==void 0?$:void 0,inputProps:ip(ip({},e.inputProps),{},{size:e.size}),popupProps:ip({overlayInnerStyle:{width:"auto",padding:0}},e.popupProps),status:e.status,tips:e.tips,valueDisplay:function(){return n("valueDisplay",{params:A.value})}},e.selectInputProps,{panel:function(){return l.createVNode(Yv,{steps:e.steps,format:_.value,value:d.value,isFooterDisplay:!0,isShowPanel:f.value,disableTime:e.disableTime,onChange:I,hideDisabledTime:e.hideDisabledTime,handleConfirmClick:E,presets:e.presets},null)}}),null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qhe={allowInput:Boolean,autoSwap:{type:Boolean,default:!0},borderless:Boolean,clearable:Boolean,disableTime:{type:Function},disabled:{type:[Boolean,Array],default:void 0},format:{type:String,default:"HH:mm:ss"},hideDisabledTime:{type:Boolean,default:!0},label:{type:[String,Function]},placeholder:{type:[String,Array],default:void 0},popupProps:{type:Object},presets:{type:Object},rangeInputProps:{type:Object},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},steps:{type:Array,default:function(){return[1,1,1]}},tips:{type:[String,Function]},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array},onBlur:Function,onChange:Function,onFocus:Function,onInput:Function,onPick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function RA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}ke.extend(Ac);var Zhe=l.defineComponent({name:"TTimeRangePicker",props:op(op({},Qhe),{},{rangeInputProps:Object,popupProps:Object}),setup:function(e){var n=ve("time-range-picker"),r=Qe("timePicker"),a=r.globalConfig,i=Lt(),o=i.STATUS,s=St({TimeIcon:QT}),c=s.TimeIcon,u=Vt(),d=l.ref(void 0),f=l.ref(qd),h=l.ref(!1),v=Pn(),p=l.computed(function(){return["".concat(n.value,"__group"),V({},o.value.focused,h.value)]}),g=l.toRefs(e),m=g.value,y=g.modelValue,b=g.allowInput,w=g.format,x=Mt(m,y,e.defaultValue,e.onChange),C=$e(x,2),S=C[0],_=C[1],O=function(F,j){if(!v.value){if(j.trigger==="trigger-element-click"){h.value=!0;return}h.value=F}},N=function(F){var j=F.e;j.stopPropagation(),f.value=qd,_(null)},B=function(F){var j=F.position;d.value=j==="first"?0:1},T=function(F,j){if(Ke(F))f.value=F;else if(d.value===0){var W;f.value=[F,(W=f.value[1])!==null&&W!==void 0?W:F]}else{var H;f.value=[(H=f.value[0])!==null&&H!==void 0?H:F,F]}$(F,j)},k=function(F,j){var W,H=j.e;if(b.value){var J=Gv(f.value[d.value],w.value);if(J){var Y,D,q=gI(f.value[d.value],w.value);d.value===0?f.value=[q,(Y=f.value[1])!==null&&Y!==void 0?Y:q]:f.value=[(D=f.value[0])!==null&&D!==void 0?D:q,q]}}(W=e.onBlur)===null||W===void 0||W.call(e,{value:F,e:H})},E=function(F,j){var W,H=j.e,J=j.position;f.value=F,(W=e.onInput)===null||W===void 0||W.call(e,{value:S.value,e:H,position:J==="first"?"start":"end"})},I=function(){var F=!f.value.find(function(j){return!Gv(j,w.value)});F&&_(f.value),e.autoSwap&&M(),h.value=!1},A=function(F,j){var W,H=j.e,J=j.position;(W=e.onFocus)===null||W===void 0||W.call(e,{value:F,e:H,position:J==="first"?"start":"end"})},M=function(){var F=$e(f.value,2),j=F[0],W=F[1],H=ke(j,e.format),J=ke(W,e.format);H.isAfter(J,"second")?_([f.value[1],f.value[0]]):_([f.value[0],f.value[1]])},$=function(F,j){var W,H=[],J;if(Ke(F))H=F,J={e:j};else if(d.value===0){var Y;H=[F,(Y=f.value[1])!==null&&Y!==void 0?Y:F],J={e:j,position:"start"}}else{var D;H=[(D=f.value[0])!==null&&D!==void 0?D:F,F],J={e:j,position:"end"}}(W=e.onPick)===null||W===void 0||W.call(e,H,J)};return l.watch(function(){return h.value},function(){var U;f.value=h.value&&(U=S.value)!==null&&U!==void 0?U:qd,h.value||(d.value=void 0)}),function(){var U,F;return l.createVNode("div",{class:n.value},[l.createVNode(Gy,{disabled:u.value,popupVisible:h.value,popupProps:op({overlayInnerStyle:{width:"auto",padding:0},onVisibleChange:O},e.popupProps),onInputChange:E,inputValue:h.value?f.value:(U=S.value)!==null&&U!==void 0?U:qd,rangeInputProps:op({size:e.size,clearable:e.clearable,class:p.value,value:h.value?f.value:(F=S.value)!==null&&F!==void 0?F:void 0,placeholder:e.placeholder||[a.value.placeholder,a.value.placeholder],borderless:e.borderless,suffixIcon:function(){return l.createVNode(c,null,null)},onClear:N,onClick:B,onFocus:A,onBlur:k,readonly:v.value||!b.value,activeIndex:d.value},e.rangeInputProps),label:e.label,status:e.status,tips:e.tips,panel:function(){return l.createVNode(Yv,{steps:e.steps,format:w.value,isShowPanel:h.value,disableTime:e.disableTime,hideDisabledTime:e.hideDisabledTime,isFooterDisplay:!0,value:f.value[d.value||0],onChange:T,onPick:$,handleConfirmClick:I,position:d.value===0?"start":"end",activeIndex:d.value,presets:e.presets},null)}},null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vhe=Be(Jhe),eve=Be(Zhe),tve=Be(Yv);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function nve(t,e,n){var r=l.computed(function(){return Math.max(n.rowHeight||48,48)}),a=l.ref(!1),i=l.computed(function(){return(n==null?void 0:n.type)==="lazy"&&!a.value}),o=!Si&&window.requestAnimationFrame||function(c){return setTimeout(c,16.6)},s=function(){a.value||o(function(){a.value=!0})};return l.onMounted(function(){(n==null?void 0:n.type)==="lazy"&&l.nextTick(function(){var c=Math.max(10,n.bufferSize||10),u=r.value*c;Ud(e.value,t.value,s,u)})}),{hasLazyLoadHolder:i,tRowHeight:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var rve=xd;function ave(t,e,n){for(var r=-1,a=t.length;++r<a;){var i=t[r],o=e(i);if(o!=null&&(s===void 0?o===o&&!rve(o):n(o,s)))var s=o,c=i}return c}var MA=ave;function ive(t,e){return t>e}var ove=ive,lve=MA,sve=ove,cve=ac;function uve(t){return t&&t.length?lve(t,cve,sve):void 0}var dve=uve;function fve(t,e){return t<e}var hve=fve,vve=MA,pve=hve,gve=ac;function mve(t){return t&&t.length?vve(t,gve,pve):void 0}var yve=mve;function bve(t,e){for(var n,r=-1,a=t.length;++r<a;){var i=e(t[r]);i!==void 0&&(n=n===void 0?i:n+i)}return n}var wve=bve,xve=wve,Cve=ac;function _ve(t){return t&&t.length?xve(t,Cve):0}var lp=_ve,sb=function(e,n){var r,a,i=l.ref([]),o=l.ref((((r=n.value.data)===null||r===void 0?void 0:r.length)||0)*(((a=n.value.scroll)===null||a===void 0?void 0:a.rowHeight)||50)),s=l.ref(0),c=[],u=l.ref(0),d=l.ref(0),f=l.ref([0,15]),h=l.computed(function(){var S,_,O=n.value.scroll;return O?{bufferSize:O.bufferSize||10,isFixedRowHeight:(S=O.isFixedRowHeight)!==null&&S!==void 0?S:!1,rowHeight:O.rowHeight||47,threshold:O.threshold||100,type:O.type,fixedRows:(_=O.fixedRows)!==null&&_!==void 0?_:[0,0]}:{}}),v=l.computed(function(){var S=n.value.data;return h.value.type==="virtual"&&h.value.threshold<S.length});function p(){for(var S,_,O=(S=(_=e.value)===null||_===void 0?void 0:_.scrollTop)!==null&&S!==void 0?S:0,N=h.value.fixedRows[0],B=[],T=0,k=-1,E=-1,I=0,A=0,M=n.value.data.length;A<M;A++){var $,U=($=c[A])!==null&&$!==void 0?$:h.value.rowHeight;if(I=I+U,I>O&&k===-1&&(k=A,k-h.value.bufferSize>0&&(T=I-U-lp(B))),k===-1&&(B.push(U),B.length>h.value.bufferSize&&B.shift()),E===-1&&(I>u.value+O||A===n.value.data.length-1)&&(E=A),k!==-1&&E!==-1)break}var F=dve([k-h.value.bufferSize,0]),j=yve([E+h.value.bufferSize,n.value.data.length]),W=lp(c.slice(0,Math.min(F,N)));return{startIndex:F,endIndex:j,translateY:T-W}}var g=ts(function(){var S=p(),_=S.startIndex,O=S.endIndex,N=S.translateY,B=h.value.fixedRows,T=$e(B,2),k=T[0],E=T[1],I=k?n.value.data.slice(0,k):[];k&&_<k&&(I=I.slice(0,_));var A=E?n.value.data.slice(n.value.data.length-E):[],M=O-n.value.data.length+1+(E??0);E&&M>0&&(A=A.slice(M)),f.value.join()!==[_,O].join()&&_>=0&&(o.value=N,i.value=I.concat(n.value.data.slice(_,O),A),f.value=[_,O])},100),m=function(_){var O;if(!(!v.value||!_||h.value.isFixedRowHeight||!e.value)){var N=((O=_.ref.value)===null||O===void 0?void 0:O.getBoundingClientRect().height)||h.value.rowHeight,B=_.data.VIRTUAL_SCROLL_INDEX;if(c[B]!==N){var T=N-c[B];c[B]=N,s.value=s.value+T}}},y=function(){v.value&&g()},b=function(_){var O=$e(_,1),N=O[0].contentRect;if(!n.value.preventResizeRefresh){var B=16;Math.abs(N.width-d.value)>B&&e.value&&(e.value.scrollTop=0,o.value=0),d.value=N.width,u.value=N.height}},w=function(_){_.forEach(function(O,N){O.VIRTUAL_SCROLL_INDEX=N})},x=function(_){var O=_.index,N=_.top,B=N===void 0?0:N,T=_.behavior,k=lp(c.slice(0,O+1))-B;e.value.scrollTo({top:k,behavior:T||"auto"})},C=function(_){if(x(_),!h.value.isFixedRowHeight)var O,N=(O=_.time)!==null&&O!==void 0?O:60,B=setTimeout(function(){x(_),clearTimeout(B)},N)};return Sc(l.computed(function(){return v.value?e.value:void 0}),b),l.watch(function(){return[Ee(n.value.data),h.value,v.value,e.value]},function(){if(!(!v.value||!e.value)){var S=n.value.data;if(w(S),u.value=e.value.getBoundingClientRect().height,c.length!==n.value.data.length){var _=Array.from(c);_.length=n.value.data.length,_.fill(h.value.rowHeight||47),c=_}s.value=lp(c),f.value=[0,0],g()}},{immediate:!0}),l.watch(function(){return u.value},function(){g()}),{visibleData:i,translateY:o,scrollHeight:s,isVirtualScroll:v,handleScroll:y,handleRowMounted:m,scrollToElement:C}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Sve={default:void 0},Tve={name:"TTreeNode",inject:{onDrag:Sve}};function kve(t){return Be(t)}function LA(t){return fB.h}function Ove(t){return t.$slots}function cb(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"value",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"defaultValue",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"onChange",i=e.modelValue,o;return n==="value"?o=Mt(e[n],i,t[r],t[a],n):o=gn(e[n],t[r],t[a],n),o}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ub=function(t){return t[t.Before=-1]="Before",t[t.Inside=0]="Inside",t[t.After=1]="After",t}(ub||{});function Eve(t){var e=t.treeItemRef,n=l.reactive({isDragOver:!1,isDragging:!1,dropPosition:0}),r=function(h){var v,p=e.value;if(p){var g=p==null||(v=p.getBoundingClientRect)===null||v===void 0?void 0:v.call(p),m=window.scrollY+g.top,y=h.pageY,b=g.height/4,w=y-m;w<b?n.dropPosition=-1:w<g.height-b?n.dropPosition=0:n.dropPosition=1}},a=function(h,v){var p,g,m,y,b,w=t.node,x=t.treeScope,C=x.drag;if(C)switch(h){case"dragStart":n.isDragging=!0,n.dropPosition=0,(p=C.handleDragStart)===null||p===void 0||p.call(C,{node:w,dragEvent:v});break;case"dragEnd":n.isDragging=!1,n.isDragOver=!1,n.dropPosition=0,d.cancel(),(g=C.handleDragEnd)===null||g===void 0||g.call(C,{node:w,dragEvent:v});break;case"dragOver":n.isDragOver=!0,d(v),(m=C.handleDragOver)===null||m===void 0||m.call(C,{node:w,dragEvent:v});break;case"dragLeave":n.isDragOver=!1,n.dropPosition=0,d.cancel(),(y=C.handleDragLeave)===null||y===void 0||y.call(C,{node:w,dragEvent:v});break;case"drop":(b=C.handleDrop)===null||b===void 0||b.call(C,{node:w,dropPosition:n.dropPosition,dragEvent:v}),n.isDragOver=!1,d.cancel();break}},i=function(h){var v=t.node;if(v.isDraggable()){h.stopPropagation(),a("dragStart",h);try{var p;(p=h.dataTransfer)===null||p===void 0||p.setData("text/plain","")}catch{}}},o=function(h){var v=t.node;v.isDraggable()&&(h.stopPropagation(),a("dragEnd",h))},s=function(h){var v=t.node;v.isDraggable()&&(h.stopPropagation(),h.preventDefault(),a("dragOver",h))},c=function(h){var v=t.node;v.isDraggable()&&(h.stopPropagation(),a("dragLeave",h))},u=function(h){var v=t.node;v.isDraggable()&&(h.stopPropagation(),h.preventDefault(),a("drop",h))},d=ts(function(f){r(f)});return{dragStates:n,handleDragStart:i,handleDragEnd:o,handleDragOver:s,handleDragLeave:c,handleDrop:u}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function FA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Pve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jc(t,e,n){var r=Ti("on-".concat(n));n.replace(/^on/,"").toLowerCase();for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];typeof t[r]=="function"&&t[r].apply(t,i)}function BA(t,e){for(var n=[],r=t;r&&r.parentNode&&(n.push(r),r!==e);)r=r.parentNode;return n}function Ive(t,e,n){var r=BA(e,n);return r.map(function(a){var i={name:t,value:(a==null?void 0:a.getAttribute(t))||"",el:a};return i}).filter(function(a){return a.value})}function Ave(t,e,n){var r=Ive(t,e,n),a=r.pop()||null;return a}function Nve(t,e,n){var r=BA(e,n),a=r.some(function(i){return i.classList.contains(t)});return a}function sp(t,e){var n=null,r=null,a=Pve({},e);if(typeof t=="function"){var i;r=t(a.createElement,(i=a.node)===null||i===void 0?void 0:i.getModel())}else typeof t=="string"&&(r=t);return(typeof r=="string"||r)&&(n=r),n}function Dve(t){return typeof t=="string"||typeof t=="number"}function xo(t,e){var n=null,r=null;return typeof e=="string"||typeof e=="number"?r=e:e&&Dve(e.value)&&(r=e.value),n=t.getNode(r),n}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Rve(t){var e=t.props,n=t.context,r=t.scope,a=t.store,i=null,o=function(v){var p=v.dragEvent,g=v.node;i=g;var m={node:g.getModel(),e:p};jc(e,n,"drag-start",m)},s=function(v){var p=v.dragEvent,g=v.node;i=g;var m={node:g.getModel(),e:p};jc(e,n,"drag-end",m)},c=function(v){var p=v.dragEvent,g=v.node,m={node:g.getModel(),e:p};jc(e,n,"drag-over",m)},u=function(v){var p=v.dragEvent,g=v.node,m={node:g.getModel(),e:p};jc(e,n,"drag-leave",m)},d=function(v){var p,g=v.dragEvent,m=v.node,y=v.dropPosition;if(!(m.value===i.value||m.getParents().some(function(x){return x.value===i.value}))){var b={dropNode:m.getModel(),dragNode:i.getModel(),dropPosition:y,e:g};if(((p=e.allowDrop)===null||p===void 0?void 0:p.call(e,b))!==!1){var w=a.getNodes();w.some(function(x){return x.value===m.value?(y===ub.Inside?i.appendTo(a,x):y===ub.Before?m.insertBefore(i):m.insertAfter(i),!0):!1}),jc(e,n,"drop",b)}}},f={handleDragStart:o,handleDragEnd:s,handleDragOver:c,handleDragLeave:u,handleDrop:d};return r.drag=f,{drag:f}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function jA(t){var e=t,n=e.store,r=ve("tree").value,a=$e(t.vmValue,2),i=a[0],o=a[1],s=$e(t.vmActived,2),c=s[0],u=s[1],d=$e(t.vmExpanded,2),f=d[0],h=d[1],v=function(x,C){var S=xo(n,x),_=e.mouseEvent,O={node:S.getModel(),e:_,trigger:"setItem"};if(_){O.trigger="node-click";var N=_.target,B=_.currentTarget;Nve("".concat(r,"__icon"),N,B)&&(O.trigger="icon-click")}var T=S.setExpanded(C,{directly:!0});return h(T,O),O.trigger!=="setItem"&&n.replaceExpanded(f.value||[]),T},p=function(x){var C=xo(n,x);if(C.children)return v(C,!C.isExpanded())},g=function(x,C){var S=xo(n,x),_=e.mouseEvent,O={node:S.getModel(),e:_,trigger:"setItem"};_&&(O.trigger="node-click");var N=S.setActived(C,{isAction:O.trigger==="node-click",directly:!0});return u(N,O),O.trigger!=="setItem"&&n.replaceActived(c.value||[]),N},m=function(x){var C=xo(n,x);return g(C,!C.isActived())},y=function(x,C,S){var _=xo(n,x),O=S==null?void 0:S.e,N={node:_.getModel(),e:O,trigger:"setItem"};O&&(N.trigger="node-click");var B=_.setChecked(C,{isAction:N.trigger==="node-click",directly:!0});return o(B,N),N.trigger!=="setItem"&&n.replaceChecked(i.value||[]),B},b=function(x,C){var S=xo(n,x);if(S.isIndeterminate()){var _=S.hasEnableUnCheckedChild();return y(S,_,C)}return y(S,!S.isChecked(),C)};return{setExpanded:v,toggleExpanded:p,setActived:g,toggleActived:m,setChecked:y,toggleChecked:b}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Mve(t,e){var n=l.toRefs(t),r=l.ref(null),a=t.treeScope,i=a.store,o=i.privateMap.get(t.itemKey),s={stateId:t.stateId,props:t,context:e,treeScope:a,refProps:n,node:o,treeItemRef:r};return{state:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $A(t){var e=t.context,n=ve().value,r=function(s,c){var u=t.node,d=new Event("change"),f={event:d,node:u};e.emit("change",f,c)},a=!1,i=function(s){var c,u,d=t.node,f=t.treeScope,h=f.treeProps,v=h===void 0?{}:h,p=v.expandOnClickNode,g=s.target,m=d.children&&p&&(g.className==="".concat(n,"-checkbox__input")||g.tagName.toLowerCase()==="input");if(!(a||m)){a=!0,setTimeout(function(){a=!1}),p&&d.children&&((c=g.className)===null||c===void 0||(u=c.indexOf)===null||u===void 0?void 0:u.call(c,"".concat(n,"-tree__label")))!==-1&&s.preventDefault();var y={mouseEvent:s,event:s,node:d,path:d.getPath()};e.emit("click",y)}};return{handleChange:r,handleClick:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Lve(t){var e=ve().value,n=ve("tree").value,r=function(s){var c=St({CaretRightSmallIcon:SV}),u=c.CaretRightSmallIcon;return l.createVNode(u,null,null)},a=function(s){s.preventDefault()},i=function(s){var c=t.node,u=t.treeScope,d=u.scopedSlots,f=(u==null?void 0:u.treeProps)||{},h=f.icon,v=!1,p=null;h===!0?d!=null&&d.icon?p=d.icon({node:c==null?void 0:c.getModel()}):c.vmIsLeaf?p="":(v=!0,p=r(),c.loading&&c.expanded&&(p=l.createVNode(lr,null,null))):h&&(p=sp(h,{createElement:s,node:c}));var g=l.createVNode("span",{class:["".concat(n,"__icon"),"".concat(e,"-folder-icon"),v?"".concat(n,"__icon--default"):""],trigger:"expand",ignore:"active",onmousedown:a},[p]);return g};return{renderIcon:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function UA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}function Bve(t){var e=ve().value,n=ve("tree").value,r=$A(t),a=r.handleChange,i=function(s){var c=t.node,u=t.treeScope,d=u.scopedSlots,f=u.treeProps,h=f===void 0?{}:f,v=h.label,p=h.expandOnClickNode,g=(h==null?void 0:h.checkProps)||{},m=null;v===!0?d!=null&&d.label?m=d.label({node:c==null?void 0:c.getModel()}):m=c.label||"":m=sp(v,{createElement:s,node:c});var y=["".concat(n,"__label"),V({},"".concat(e,"-is-active"),c.isActivable()?c.actived:!1)],b=l.computed(function(){var _,O=Array.isArray(c.children)&&((_=c.children)===null||_===void 0?void 0:_.length)>0,N=Nn(c.children)&&c.children,B=O||N;return p&&B});if(c.vmCheckable){var w=!1;c.vmIsLocked&&!c.vmIsRest&&(w=!0),c.isDisabled()&&(w=!0);var x=zA(zA({},g),{},{disabled:w}),C=function(){return m}();m=l.createVNode(Ni,{class:y,checked:c.checked,indeterminate:c.indeterminate,disabled:w,name:String(c.value),onChange:a,stopLabelTrigger:b.value,ignore:h.expandOnClickNode?"active":"expand,active",props:x},Fve(m)?m:{default:function(){return[C]}})}else{var S=l.createVNode("span",{style:"position: relative"},[m]);m=c.isActivable()?l.createVNode("span",{key:"1",ref:"label",class:y,title:c.label},[S]):l.createVNode("span",{key:"2",class:y,title:c.label},[S])}return m};return{renderLabel:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function jve(t){var e=ve("tree").value,n=function(a){var i=t.node,o=t.treeScope,s=o.scopedSlots,c=(o==null?void 0:o.treeProps)||{},u=c.line,d=!!c.icon,f=null;if(u===!0){if(s!=null&&s.line)f=s.line({node:i==null?void 0:i.getModel()});else if(i.parent&&i.tree){var h=i.vmIsLeaf,v=i.vmIsFirst,p=i.level,g=[];g.push("".concat(e,"__line")),(h||!d)&&g.push("".concat(e,"__line--leaf")),v&&d&&g.push("".concat(e,"__line--first"));var m=[],y=i.getParents();y.pop(),y.forEach(function(w,x){w.vmIsLast||m.push("calc(-".concat(x+1," * var(--space)) 0 var(--color)"))});var b={"--level":p?String(p):void 0,"box-shadow":m.join(",")};f=l.createVNode("span",{class:g,style:b},null)}}else f=sp(u,{createElement:a,node:i});return f};return{renderLine:n}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $ve(t){var e=ve("tree").value,n=function(a){var i=t.node,o=t.treeScope,s=o.scopedSlots,c=(o==null?void 0:o.treeProps)||{},u=c.operations,d=null;return s!=null&&s.operations?d=s.operations({node:i==null?void 0:i.getModel()}):d=sp(u,{createElement:a,node:i}),d&&(d=l.createVNode("span",{class:"".concat(e,"__operations"),ignore:"active,expand"},[d])),d};return{renderOperations:n}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function HA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zve(t){var e=t.treeScope,n=t.treeItemRef,r=e.virtualConfig,a=e.treeContentRef,i=e.scrollProps,o=ve().value,s=ve("tree").value,c=$A(t),u=c.handleClick,d=Lve(t),f=d.renderIcon,h=Bve(t),v=h.renderLabel,p=jve(t),g=p.renderLine,m=$ve(t),y=m.renderOperations,b=Eve(t),w=b.dragStates,x=b.handleDragStart,C=b.handleDragEnd,S=b.handleDragOver,_=b.handleDragLeave,O=b.handleDrop,N=nve(a,n,l.reactive(Uve({},i==null?void 0:i.value))),B=N.hasLazyLoadHolder,T=N.tRowHeight;function k(){var $=t.node,U=r==null?void 0:r.isVirtualScroll.value;if(U)var F=setTimeout(function(){r.handleRowMounted({ref:n,data:$}),clearTimeout(F)},100)}l.onMounted(function(){k()}),l.onUpdated(function(){k()});var E=function(){var U=t.node,F=U.level,j="--level: ".concat(F,";"),W="".concat(j);return W},I=function(){var U=t.node,F=w.isDragOver,j=w.isDragging,W=w.dropPosition,H=[];return H.push("".concat(s,"__item")),H.push(V(V(V({},"".concat(s,"__item--open"),U.expanded),"".concat(o,"-is-active"),U.isActivable()?U.actived:!1),"".concat(o,"-is-disabled"),U.isDisabled())),H.push(V({},"".concat(s,"__item--draggable"),U.isDraggable())),U.visible?H.push("".concat(s,"__item--visible")):H.push("".concat(s,"__item--hidden")),U.vmIsLocked&&H.push("".concat(s,"__item--locked")),U.vmIsRest&&H.push("".concat(s,"__item--matched")),H.push(V(V(V(V({},"".concat(s,"__item--dragging"),j),"".concat(s,"__item--tip-top"),F&&W<0),"".concat(s,"__item--tip-bottom"),F&&W>0),"".concat(s,"__item--tip-highlight"),!j&&F&&W===0)),H},A=function(U){var F=[],j=f(U),W=g(U);W&&F.push(W),j&&F.push(j);var H=v(U);H&&F.push(H);var J=y(U);return J&&F.push(J),F},M=function(U){var F=t.node,j=t.props;if(!F)return null;var W=F.level,H=F.value,J=E(),Y=I(),D=t;D.stateId=j.stateId;var q=l.createVNode("div",{ref:"treeItemRef",class:Y,"data-value":H,"data-level":W,style:J,onClick:function(K){return u(K)},draggable:F.isDraggable(),onDragstart:function(K){return x(K)},onDragend:function(K){return C(K)},onDragover:function(K){return S(K)},onDragleave:function(K){return _(K)},onDrop:function(K){return O(K)}},[B.value?[l.createVNode("div",null,null)]:A(U)]);return q};return{hasLazyLoadHolder:B,tRowHeight:T,renderItemNode:M}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function WA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Hve={stateId:{type:String},itemKey:{type:String},rowIndex:{type:Number},treeScope:{type:Object}},Wve=l.defineComponent(KA(KA({props:Hve},Tve),{},{setup:function(e,n){var r=Mve(e,n),a=r.state,i=a.treeItemRef;l.ref();var o=zve(a),s=o.renderItemNode;return{treeItemRef:i,renderItemNode:s}},render:function(e){var n=LA();return typeof this.renderItemNode=="function"?this.renderItemNode(n):null}}));/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Kve(t){var e=t,n=e.props,r=e.context,a=jA(t),i=a.toggleExpanded,o=a.toggleActived,s=a.toggleChecked,c=function(f){var h=f.mouseEvent,v=f.event,p=f.node;if(!(!p||!h)){e.mouseEvent=h;var g=n.expandOnClickNode,m=!n.disabled&&!p.disabled&&p.isActivable();["trigger","ignore"].forEach(function(b){var w=Ave(b,v.target,v.currentTarget),x=(w==null?void 0:w.value)||"";x.indexOf("expand")>=0&&(b==="trigger"?g=!0:b==="ignore"&&(g=!1)),x.indexOf("active")>=0&&b==="ignore"&&(m=!1)}),g&&i(p),m&&o(p);var y={node:p.getModel(),e:h};jc(n,r,"click",y),e.mouseEvent=null}},u=function(f,h){var v=n.disabled,p=f.node;!p||v||p.disabled||!p.isCheckable()||s(p,h)};return{handleChange:u,handleClick:c}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qve(t){var e=t.store,n=t.scope,r=t.allNodes,a=t.nodes,i=t.virtualConfig,o=Kve(t),s=o.handleClick,c=o.handleChange,u=l.ref(!1),d=new Map,f=function(){r.value=e.getNodes()},h=function(){var y=i==null?void 0:i.isVirtualScroll.value;if(!y){var b=[],w=!1;r.value.forEach(function(x){x.visible&&(w=!0,d.set(x.value,x.value)),d.has(x.value)&&b.push(x)}),d.forEach(function(x){e.getNode(x)||d.delete(x)}),a.value=b,u.value=!w}},v=function(){var y=i==null?void 0:i.isVirtualScroll.value;if(y){var b=i.visibleData.value;a.value=b,u.value=b.length<=0}},p=function(y,b,w,x){var C=b.VIRTUAL_SCROLL_INDEX||w,S=b[bo],_=l.createVNode(Wve,{key:S,rowIndex:C,stateId:x,itemKey:S,treeScope:n,onClick:s,onChange:c},null);return _},g=function(y){var b="render-".concat(new Date().getTime()),w=a.value.map(function(x,C){return p(y,x,C,b)});return w};return l.watch(r,h),l.watch(i.visibleData,v),f(),h(),v(),e.emitter.on("update",f),{nodesEmpty:u,renderTreeNodes:g}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function db(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gve(t){var e=t,n=e.props,r=e.context,a=e.allNodes,i=e.nodes,o=e.scope,s=e.treeContentRef,c=e.isScrolling,u=l.computed(function(){return db({rowHeight:34},n.scroll)});o.scrollProps=u;var d=l.computed(function(){var b=a.value.filter(function(w){return w.visible});return{data:b,scroll:u.value,preventResizeRefresh:!0}}),f=sb(s,d);o.virtualConfig=f,e.virtualConfig=f,l.onMounted(function(){var b=f==null?void 0:f.isVirtualScroll.value;b&&f.handleScroll()});var h=function(w){var x;(x=n.onScroll)===null||x===void 0||x.call(n,{e:w}),r.emit("scroll",{e:w})},v=null,p=function(){c.value=!0,v&&(clearTimeout(v),v=null),v=setTimeout(function(){v=null,c.value=!1},100)},g=0,m=function(w){p();var x=f==null?void 0:f.isVirtualScroll.value,C=w.target||w.srcElement,S=C.scrollTop;g!==S?x&&(f.handleScroll(),i.value=f.visibleData.value):g=0,g=S,h(w)},y=function(w){var x=w.index;if(!x&&x!==0){var C;if(!w.key){st.error("Tree","scrollToElement: one of `index` or `key` must exist.");return}if(x=(C=a.value)===null||C===void 0?void 0:C.findIndex(function(S){var _;return[je(S.data,"key"),je(S.data,((_=n.keys)===null||_===void 0?void 0:_.value)||"value")].includes(w.key)}),x<0){st.error("Tree","".concat(w.key," does not exist in data, check `key` or `data` please."));return}}f.scrollToElement(db(db({},w),{},{index:x-1}))};return{treeContentRef:s,onInnerVirtualScroll:m,virtualConfig:f,scrollToElement:y}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Yve(t,e){var n=l.ref(),r=l.ref([]),a=l.ref([]),i=l.ref(!1),o=l.toRefs(t),s=cb(t,o,"value","defaultValue","onChange","change"),c=cb(t,o,"actived","defaultActived","onActive","active"),u=cb(t,o,"expanded","defaultExpanded","onExpand","expand");function d(h){f.store=h,f.scope.store=h,a.value=h.getNodes()}var f={props:t,context:e,store:null,treeContentRef:n,nodes:r,allNodes:a,isScrolling:i,mouseEvent:null,virtualConfig:null,scope:{store:null,treeContentRef:n,treeProps:t,scopedSlots:{},virtualConfig:null},setStore:d,refProps:o,vmValue:s,vmActived:c,vmExpanded:u};return{state:f}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Xve(t){var e=t.props,n=t.context,r=t.refProps,a=e.valueMode,i=e.filter,o=e.keys,s=new $P({valueMode:a,filter:i}),c=t.vmValue[0],u=t.vmActived[0],d=t.vmExpanded[0],f=function(){var C=Ai(e,["expandAll","expandLevel","expandMutex","expandParent","activable","activeMultiple","disabled","disableCheck","checkable","draggable","checkStrictly","load","lazy","valueMode","filter","allowFoldNodeOnFilter"]);s.setConfig(C)},h=function(){var C=e.expandParent;if(Array.isArray(d.value)){var S=new Map;d.value.forEach(function(O){if(S.set(O,!0),C){var N=s.getNode(O);N&&N.getModel().getParents().forEach(function(B){S.set(B.value,!0)})}});var _=Array.from(S.keys());s.setExpanded(_)}},v=!1,p=null,g=function(){if(e.allowFoldNodeOnFilter&&v)if(v=!1,e.filter){p||(p=s.getExpanded());var C=[],S=s.getNodes();S.forEach(function(_){_.vmIsLocked&&C.push(_.value)}),s.setExpanded(C)}else p&&(s.replaceExpanded(p),p=null)},m=function(C,S){e.allowFoldNodeOnFilter&&(v=C!==S)},y=function(C){var S=C.node,_={node:S.getModel()};Array.isArray(c.value)&&c.value.length>0&&s.replaceChecked(c.value),Array.isArray(d.value)&&d.value.length>0&&s.replaceExpanded(d.value),Array.isArray(u.value)&&u.value.length>0&&s.replaceActived(u.value),e!=null&&e.onLoad&&(e==null||e.onLoad(_)),n.emit("load",_)},b=function(C){s.reload(C||[]),s.refreshNodes(),Array.isArray(c.value)&&s.setChecked(c.value),h(),Array.isArray(u.value)&&s.setActived(u.value),s.refreshState()};function w(){s.setConfig({keys:o}),f(),s.append(e.data||[]),s.refreshNodes(),Array.isArray(c.value)&&s.setChecked(c.value),h(),Array.isArray(u.value)&&s.setActived(u.value),s.emitter.on("load",y),s.emitter.on("update",g)}return w(),t.setStore(s),l.watch(function(){return Ee(c.value||[])},function(x){s.replaceChecked(x)}),l.watch(function(){return Ee(d.value||[])},function(x){s.replaceExpanded(x)}),l.watch(function(){return Ee(u.value||[])},function(x){s.replaceActived(x)}),l.watch(r.filter,function(x,C){m(x,C)}),l.watch(r.keys,function(x){s.setConfig({keys:x})}),{store:s,rebuild:b,checkFilterExpand:m,updateStoreConfig:f,updateExpanded:h,expandFilterPath:g}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function cp(t){return t&&(isNaN(Number(t))?t:"".concat(t,"px"))}function Jve(t){var e=t.props,n=ve("tree").value,r=ve().value,a=t.virtualConfig,i=t.isScrolling,o=t.refProps,s=o.height,c=o.maxHeight,u=l.computed(function(){var v=[n],p=e.disabled,g=e.hover,m=e.transition,y=e.checkable,b=e.draggable,w=e.expandOnClickNode,x=e.scroll;p&&v.push("".concat(r,"-is-disabled")),g&&v.push("".concat(n,"--hoverable")),y&&v.push("".concat(n,"--checkable")),b&&v.push("".concat(n,"--draggable")),m&&v.push("".concat(n,"--transition")),w&&v.push("".concat(n,"--block-node"));var C=a==null?void 0:a.isVirtualScroll.value;return C?(v.push("".concat(n,"__vscroll")),i.value&&v.push("".concat(n,"--scrolling"))):x&&x.type==="lazy"&&v.push("".concat(n,"__lazyload")),v}),d=l.computed(function(){return{height:cp(s.value),maxHeight:cp(c.value),overflowY:cp(s.value)||cp(c.value)?"auto":void 0}}),f=l.computed(function(){var v=a==null?void 0:a.isVirtualScroll.value,p=v?a==null?void 0:a.translateY.value:0,g="translateY(".concat(p,"px)"),m={transform:g,"-ms-transform":g,"-moz-transform":g,"-webkit-transform":g};return m}),h=l.computed(function(){var v=a==null?void 0:a.isVirtualScroll.value,p=v?a==null?void 0:a.translateY.value:0,g="translate(0, ".concat(p,"px)");return{transform:g,"-ms-transform":g,"-moz-transform":g,"-webkit-transform":g}});return{treeClasses:u,treeContentStyles:d,scrollStyles:f,cursorStyles:h}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qve={activable:Boolean,activeMultiple:Boolean,actived:{type:Array,default:void 0},defaultActived:{type:Array},allowDrop:{type:Function},allowFoldNodeOnFilter:Boolean,checkProps:{type:Object},checkStrictly:Boolean,checkable:Boolean,data:{type:Array,default:function(){return[]}},disableCheck:{type:[Boolean,Function],default:!1},disabled:Boolean,draggable:Boolean,empty:{type:[String,Function],default:""},expandAll:Boolean,expandLevel:{type:Number,default:0},expandMutex:Boolean,expandOnClickNode:Boolean,expandParent:Boolean,expanded:{type:Array,default:void 0},defaultExpanded:{type:Array,default:function(){return[]}},filter:{type:Function},height:{type:[String,Number]},hover:Boolean,icon:{type:[Boolean,Function],default:!0},keys:{type:Object},label:{type:[String,Boolean,Function],default:!0},lazy:{type:Boolean,default:!0},line:{type:[Boolean,Function],default:!1},load:{type:Function},maxHeight:{type:[String,Number]},operations:{type:Function},scroll:{type:Object},transition:{type:Boolean,default:!0},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},valueMode:{type:String,default:"onlyLeaf",validator:function(e){return e?["onlyLeaf","parentFirst","all"].includes(e):!0}},onActive:Function,onChange:Function,onClick:Function,onDragEnd:Function,onDragLeave:Function,onDragOver:Function,onDragStart:Function,onDrop:Function,onExpand:Function,onLoad:Function,onScroll:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function GA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Vve=l.defineComponent({name:"TTree",model:{prop:"value",event:"change"},props:fb({},Qve),setup:function(e,n){var r=Qe("tree"),a=r.t,i=r.global,o=ve(),s=ve("tree"),c=Yve(e,n),u=c.state,d=u.treeContentRef,f=u.isScrolling,h=Xve(u),v=h.store,p=h.updateStoreConfig,g=h.rebuild;Rve(u);var m=jA(u),y=m.setActived,b=m.setExpanded,w=m.setChecked,x=Gve(u),C=x.onInnerVirtualScroll,S=x.virtualConfig,_=x.scrollToElement,O=qve(u),N=O.renderTreeNodes,B=O.nodesEmpty,T=Jve(u),k=T.treeClasses,E=T.treeContentStyles,I=T.scrollStyles,A=T.cursorStyles;return{t:a,global:i,classPrefix:o,componentName:s,state:u,store:v,treeClasses:k,treeContentRef:d,rebuild:g,updateStoreConfig:p,setActived:y,setExpanded:b,setChecked:w,renderTreeNodes:N,nodesEmpty:B,isScrolling:f,onInnerVirtualScroll:C,treeContentStyles:E,scrollStyles:I,cursorStyles:A,virtualConfig:S,scrollToElement:_,scrollTo:_}},watch:{data:function(e){this.rebuild(e)}},methods:{refresh:function(){this.store.refreshState()},setItem:function(e,n){var r=this,a=this.store.getNode(e),i=n,o=Object.keys(i);a&&i&&(["expanded","actived","checked"].forEach(function(s){if(o.includes(s)){var c=i[s];delete i[s];var u="set".concat(av(s)),d=r[u];Re(d)&&d.call(r,a,c)}}),a.set(i))},getItem:function(e){var n=this.store.getNode(e);return n==null?void 0:n.getModel()},getItems:function(e){var n=this.store.getNodes(e);return n.map(function(r){return r.getModel()})},appendTo:function(e,n){var r=this.store,a=[];Array.isArray(n)?a=n:a=[n],a.forEach(function(i){var o=(i==null?void 0:i.value)||"",s=xo(r,o);s?r.appendNodes(e,s):r.appendNodes(e,i)})},insertBefore:function(e,n){var r=this.store,a=(n==null?void 0:n.value)||"",i=xo(r,a);i?r.insertBefore(e,i):r.insertBefore(e,n)},insertAfter:function(e,n){var r=this.store,a=(n==null?void 0:n.value)||"",i=xo(r,a);i?r.insertAfter(e,i):r.insertAfter(e,n)},remove:function(e){return this.store.remove(e)},getIndex:function(e){return this.store.getNodeIndex(e)},getParent:function(e){var n=this.store.getParent(e);return n==null?void 0:n.getModel()},getParents:function(e){var n=this.store.getParents(e);return n.map(function(r){return r.getModel()})},getPath:function(e){var n=this.store.getNode(e),r=[];return n&&(r=n.getPath().map(function(a){return a.getModel()})),r},getTreeData:function(e){var n=[];if(e){var r=this.store.getNode(e);if(!r)return[];n=this.store.getNodes(e)}else n=this.store.getNodes();var a={},i=[];return n.forEach(function(o){var s=o.value,c=fb(fb({},o.data),{},{value:s});c.children!==!0&&delete c.children,a[s]=c;var u=o.getParent();if(!u)i.push(c);else{var d=a[u.value];d?(Array.isArray(d.children)||(d.children=[]),d.children.push(c)):i.push(c)}}),i}},render:function(e){var n,r,a,i,o=this.state,s=this.treeClasses,c=this.updateStoreConfig,u=this.renderTreeNodes,d=this.nodesEmpty,f=this.isScrolling,h=this.virtualConfig,v=this.treeContentStyles,p=this.scrollStyles,g=this.cursorStyles,m=LA(),y=o.scope,b=o.allNodes,w=o.refProps;y.scopedSlots=Ove(this),c();var x=u(m),C=this.componentName,S=h.isVirtualScroll.value,_=null;if(d){var O=!this.empty&&!this.$slots.empty,N=O?this.t(this.global.empty):jn(this,"empty");_=l.createVNode("div",{class:"".concat(C,"__empty")},[N])}else x.length<=0&&(_=l.createVNode("div",null,null));var B=this.$props,T=B.transition,k=null;!T||S&&f?k=l.createVNode("div",{class:"".concat(C,"__list"),style:p},[x]):k=l.createVNode(l.TransitionGroup,{tag:"div",class:"".concat(C,"__list"),"enter-active-class":"".concat(C,"__item--enter-active"),"leave-active-class":"".concat(C,"__item--leave-active"),style:p},Zve(x)?x:{default:function(){return[x]}});var E=((n=(r=b.value)===null||r===void 0?void 0:r.filter(function($){return $.visible}).length)!==null&&n!==void 0?n:0)*((a=(i=w.scroll.value)===null||i===void 0?void 0:i.rowHeight)!==null&&a!==void 0?a:34),I={width:"1px",height:"1px",opacity:0,pointerEvents:"none",position:"absolute",left:0,top:"".concat(E,"px")},A=l.createVNode("div",{style:I},null),M=l.createVNode("div",{class:s,ref:"treeContentRef",onScroll:this.onInnerVirtualScroll,style:v},[S&&l.createVNode("div",{class:"".concat(C,"__vscroll-cursor"),style:g},null),_||k,S&&A]);return M}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var YA=kve(Vve);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var epe={autoWidth:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},data:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:void 0},empty:{type:[String,Function],default:""},filter:{type:Function},filterable:Boolean,inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},loading:Boolean,loadingText:{type:[String,Function],default:""},max:{type:Number,default:0},minCollapsedNum:{type:Number,default:0},multiple:Boolean,placeholder:{type:String,default:void 0},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},selectInputProps:{type:Object},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tagProps:{type:Object},treeProps:{type:Object},value:{type:[String,Number,Object,Array],default:void 0},modelValue:{type:[String,Number,Object,Array],default:void 0},defaultValue:{type:[String,Number,Object,Array]},valueDisplay:{type:Function},valueType:{type:String,default:"value",validator:function(e){return e?["value","object"].includes(e):!0}},onBlur:Function,onChange:Function,onClear:Function,onFocus:Function,onInputChange:Function,onPopupVisibleChange:Function,onRemove:Function,onSearch:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function XA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XA(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var tpe=l.defineComponent({name:"TTreeSelect",props:epe,setup:function(e,n){var r=n.slots,a=n.expose,i=We(),o=Qa(),s=ve(),c=Qe("treeSelect"),u=c.globalConfig,d=Vt(),f=Pn(),h=l.ref(null),v=l.ref([]),p=l.ref([]),g=l.ref(null),m=l.ref(0),y=l.toRefs(e),b=y.value,w=y.modelValue,x=y.popupVisible,C=y.inputValue,S=Mt(b,w,e.defaultValue,e.onChange),_=$e(S,2),O=_[0],N=_[1],B=gn(x,!1,e.onPopupVisibleChange,"popupVisible"),T=$e(B,2),k=T[0],E=T[1],I=gn(C,e.defaultInputValue,e.onInputChange,"inputValue"),A=$e(I,2),M=A[0],$=A[1];l.watch(O,fn(mt.mark(function me(){return mt.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,pe();case 2:e.multiple||(v.value=g.value?[g.value.value]:[]);case 3:case"end":return ye.stop()}},me)}))),l.watch(function(){return e.data},fn(mt.mark(function me(){return mt.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,pe();case 2:Ae();case 3:case"end":return ye.stop()}},me)})),{deep:!0});var U=l.computed(function(){var me=M.value||"";return me===""?null:function(ie){if(Re(e.filter)){var ye=e.filter(String(me),ie);if(Nn(ye))return ye}return ie.data[q.value].indexOf(me)>=0}}),F=l.computed(function(){return d.value||e.disabled}),j=l.computed(function(){var me;return k.value&&((me=g.value)===null||me===void 0?void 0:me.label)||e.placeholder||u.value.placeholder}),W=l.computed(function(){return["".concat(s.value,"-select__dropdown"),"narrow-scrollbar"]}),H=l.computed(function(){return{small:"s",medium:"m",large:"l"}[e.size]}),J=l.computed(function(){return e.valueType==="object"}),Y=l.computed(function(){return e.multiple?J.value?Ke(O.value)?O.value.map(function(me){return me.value}):[]:Ke(O.value)?O.value.map(function(me){return me}):[]:[]}),D=l.computed(function(){return e.multiple&&!!e.max&&Ke(O.value)&&e.max<=O.value.length}),q=l.computed(function(){var me;return!jr(e.treeProps)&&!jr(e.treeProps.keys)?e.treeProps.keys.label||"label":((me=e.keys)===null||me===void 0?void 0:me.label)||"label"}),z=l.computed(function(){var me;return!jr(e.treeProps)&&!jr(e.treeProps.keys)?e.treeProps.keys.value||"value":((me=e.keys)===null||me===void 0?void 0:me.value)||"value"}),K=l.computed(function(){var me;return!jr(e.treeProps)&&!jr(e.treeProps.keys)?e.treeProps.keys.children||"children":((me=e.keys)===null||me===void 0?void 0:me.children)||"children"});l.onMounted(fn(mt.mark(function me(){return mt.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(!(!O.value&&e.defaultValue)){ye.next=3;break}return ye.next=3,P(e.defaultValue,null,"uncheck");case 3:J.value?v.value=Ke(O.value)?O.value.map(function(Ce){return Ce.value}):[O.value.value]:v.value=Ke(O.value)?O.value:[O.value],pe();case 5:case"end":return ye.stop()}},me)})));var P=function(ie,ye,Ce){N(ie,{node:ye,trigger:Ce}),pe()},R=function(ie){var ye,Ce=e.multiple?[]:"";v.value=[],P(Ce,null,"clear"),(ye=e.onClear)===null||ye===void 0||ye.call(e,{e:ie.e})},X=function(ie,ye){var Ce=ie;J.value&&(Ce=ie.map(Se)),P(Ce,ye.node,"check")},ee=function(ie,ye){if(e.multiple||E(!1,ye),!e.multiple&&O.value!==ye.node.data[z.value]){var Ce=ie;if(J.value){var Ge=jr(ie)?"":ie[0];Ce=Se(Ge)}else Ce=jr(ie)?"":ie[0];P(Ce,ye.node,"check"),v.value=ie}},re=function(ie){p.value=ie},ae=function(){pe()},oe=function(ie){var ye;if(!k.value){var Ce;(Ce=e.onSearch)===null||Ce===void 0||Ce.call(e,String(ie));return}$(ie),(ye=e.onSearch)===null||ye===void 0||ye.call(e,String(ie))},ce=function(ie,ye){var Ce,Ge=ye.trigger,Le=ye.index;["tag-remove","backspace"].includes(Ge)&&Ke(O.value)&&O.value.splice(Le,1),(Ce=e.onRemove)===null||Ce===void 0||Ce.call(e,{value:ie,data:null,e:ye&&ye.e}),P(O.value,null,Ge)},ge=function(ie,ye){E(ie,ye),ie&&ye.trigger==="trigger-element-click"&&$("")},pe=function(){var me=fn(mt.mark(function ie(){return mt.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,O.value;case 2:e.multiple?e.multiple?Ke(O.value)?g.value=be():g.value=[]:g.value=null:O.value||O.value===0?g.value=_e():g.value="";case 3:case"end":return Ce.stop()}},ie)}));return function(){return me.apply(this,arguments)}}(),_e=function(){var ie=J.value?O.value.value:O.value;return Se(ie)},be=function(){return O.value.map(function(ie){var ye=J.value?ie.value:ie;return Se(ye)})},Se=function(ie){if(h.value){var ye=h.value.getItem(ie);if(ye)return rs(rs({},ye.data),{},{label:ye.data[q.value],value:ye.data[z.value]})}var Ce=Ne(e.data,ie);return Ce||{label:ie,value:ie}},Ne=function(ie,ye){for(var Ce=0,Ge=ie.length;Ce<Ge;Ce++){var Le=ie[Ce];if(Le[z.value]===ye)return rs(rs({},Le),{},{label:Le[q.value],value:Le[z.value]});if(Le!=null&&Le[K.value]){var De=Ne(Le==null?void 0:Le[K.value],ye);if(!zl(De))return De}}return null},Ae=function(){m.value+=1},Pe=function(){return l.withDirectives(l.createVNode(YA,l.mergeProps({ref:h,key:m.value,value:Ee(Y.value),hover:!0,keys:e.keys,data:e.data,activable:!e.multiple,checkable:e.multiple,disabled:F.value||D.value,size:e.size,filter:U.value,icon:!U.value,actived:v.value,expanded:p.value,activeMultiple:e.multiple,onChange:X,onActive:ee,onExpand:re,onLoad:ae,expandOnClickNode:!1},e.treeProps),{empty:function(){return o("empty",{defaultNode:l.createVNode("div",{class:"".concat(s.value,"-select__empty")},[u.value.empty])})}}),[[l.vShow,!e.loading]])},Me=function(){return l.createVNode(ql,{isActive:k.value,disabled:e.disabled,overlayClassName:V(V({},"".concat(s.value,"-fake-arrow--highlight"),k.value),"".concat(s.value,"-fake-arrow--disable"),e.disabled)},null)};return a({treeRef:h}),function(){return l.createVNode(Ec,l.mergeProps({class:"".concat(s.value,"-tree-select"),value:g.value,inputValue:k.value?M.value:"",popupVisible:k.value,disabled:F.value,multiple:e.multiple,loading:e.loading,clearable:e.clearable,autoWidth:e.autoWidth,borderless:e.borderless,readonly:f.value,placeholder:j.value,allowInput:e.filterable||Re(e.filter),minCollapsedNum:e.minCollapsedNum,"collapsed-items":e.collapsedItems,popupProps:rs({overlayClassName:W.value},e.popupProps),inputProps:rs({size:e.size},e.inputProps),tagInputProps:{size:e.size},tagProps:rs({maxWidth:300},e.tagProps),label:function(){return i("prefixIcon")},suffix:e.suffix,suffixIcon:function(){return e.suffixIcon||r.suffixIcon?i("suffixIcon"):Me()},onClear:R,onBlur:function(ie,ye){var Ce;(Ce=e.onBlur)===null||Ce===void 0||Ce.call(e,{value:O.value,e:ye.e})},onFocus:function(ie,ye){var Ce;(Ce=e.onFocus)===null||Ce===void 0||Ce.call(e,{value:O.value,e:ye.e})},valueDisplay:function(){return i("valueDisplay",{params:e.multiple?{value:g.value,onClose:function(ye){var Ce=g.value.map(function(Ge){return Ge.value});ce(Ce,{trigger:"tag-remove",index:ye,item:Ce[ye]})}}:{value:g.value||V(V({},q.value,""),z.value,void 0)}})},onInputChange:oe,onTagChange:ce,onPopupVisibleChange:ge},e.selectInputProps),{suffix:r.suffix,panel:function(){return l.createVNode("div",{class:["".concat(s.value,"-select__dropdown-inner"),"".concat(s.value,"-select__dropdown-inner--size-").concat(H.value)]},[i("panelTopContent"),l.withDirectives(l.createVNode("p",{class:["".concat(s.value,"-select-loading-tips"),"".concat(s.value,"-select__right-icon-polyfill")]},[o("loadingText",{defaultNode:l.createVNode("div",{class:"".concat(s.value,"-select__empty")},[u.value.loadingText])})]),[[l.vShow,e.loading&&!F.value]]),Pe(),i("panelBottomContent")])},collapsedItems:r.collapsedItems})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var npe=Be(tpe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $c={borderless:Boolean,clearable:Boolean,closeBtn:{type:[String,Boolean,Function],default:!0},colorModes:{type:Array,default:function(){return["monochrome","linear-gradient"]}},disabled:Boolean,enableAlpha:Boolean,enableMultipleGradient:{type:Boolean,default:!0},format:{type:String,default:"RGB",validator:function(e){return e?["RGB","RGBA","HSL","HSLA","HSB","HSV","HSVA","HEX","CMYK","CSS"].includes(e):!0}},inputProps:{type:Object},multiple:Boolean,popupProps:{type:Object},recentColors:{type:Array,default:void 0},defaultRecentColors:{type:Array,default:function(){return[]}},selectInputProps:{type:Object},showPrimaryColorPreview:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},swatchColors:{type:Array},value:{type:String,default:void 0},modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},onChange:Function,onPaletteBarChange:Function,onRecentColorsChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var JA=100,QA={monochrome:"singleColor","linear-gradient":"gradientColor"},rpe="#001F97",ZA="linear-gradient(90deg, rgba(241,29,0,1) 0%, rgba(73,106,220,1) 100%);",ape=["#ECF2FE","#D4E3FC","#BBD3FB","#96BBF8","#699EF5","#4787F0","#266FE8","#0052D9","#0034B5","#001F97","#FDECEE","#F9D7D9","#F8B9BE","#F78D94","#F36D78","#E34D59","#C9353F","#B11F26","#951114","#680506","#FEF3E6","#F9E0C7","#F7C797","#F2995F","#ED7B2F","#D35A21","#BA431B","#9E3610","#842B0B","#5A1907","#E8F8F2","#BCEBDC","#85DBBE","#48C79C","#00A870","#078D5C","#067945","#056334","#044F2A","#033017"],ipe=["HEX","RGB","HSL","HSV","CMYK","CSS"],VA=230,eN=168,tN=186,hb=176;/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ope="color-picker",li=function(e){var n=ve(ope);return l.computed(function(){return n.value})};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function nN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aN(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var lpe=l.defineComponent({name:"PanelHeader",props:rN(rN({},$c),{},{mode:{type:String,default:"color"},togglePopup:{type:Function},onModeChange:{type:Function,default:function(){return function(){}}}}),setup:function(e){var n=Qe("colorPicker"),r=n.globalConfig,a=li(),i=l.ref(e.mode),o=function(c){return e.onModeChange(c)};return l.watch(function(){return e.mode},function(s){return i.value=s}),function(){var s,c;return((c=e.colorModes)===null||c===void 0?void 0:c.length)===1?null:l.createVNode("div",{class:"".concat(a.value,"__head")},[l.createVNode("div",{class:"".concat(a.value,"__mode")},[l.createVNode(np,{variant:"default-filled",size:"small",modelValue:i.value,"onUpdate:modelValue":function(d){return i.value=d},onChange:o},aN(s=Object.keys(QA).map(function(u){var d;return l.createVNode(ib,{key:u,value:u},aN(d=Reflect.get(r.value,QA[u]))?d:{default:function(){return[d]}})}))?s:{default:function(){return[s]}})])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var spe=function(e,n,r){var a=0,i=0,o=0,s=0,c=parseInt("".concat(e).replace(/\s/g,""),10),u=parseInt("".concat(n).replace(/\s/g,""),10),d=parseInt("".concat(r).replace(/\s/g,""),10);if(c===0&&u===0&&d===0)return s=1,[0,0,0,1];a=1-c/255,i=1-u/255,o=1-d/255;var f=Math.min(a,Math.min(i,o));return a=(a-f)/(1-f),i=(i-f)/(1-f),o=(o-f)/(1-f),s=f,[a,i,o,s]},cpe=function(e,n,r,a){var i=e/100,o=n/100,s=r/100,c=a/100;i=i*(1-c)+c,o=o*(1-c)+c,s=s*(1-c)+c;var u=1-i,d=1-o,f=1-s;return u=Math.round(255*u),d=Math.round(255*d),f=Math.round(255*f),{r:u,g:d,b:f}},upe=/cmyk\((\d+%?),(\d+%?),(\d+%?),(\d+%?)\)/,up=function(e){return Math.max(0,Math.min(255,parseInt(e,10)))},dpe=function(e){if(/cmyk/i.test(e)){var n=e.replace(/\s/g,""),r=n.match(upe),a=up(r[1]),i=up(r[2]),o=up(r[3]),s=up(r[4]),c=cpe(a,i,o,s),u=c.r,d=c.g,f=c.b;return"rgb(".concat(u,", ").concat(d,", ").concat(f,")")}return e};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Uc=function(e,n){for(var r="",a=0;a<e.length;a++)Je(e[a])?r+=e[a]:r+=e[a].source;return new RegExp(r,n)},fpe=function(){var e="gi",n=/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,r=/to\s+((?:(?:left|right|top|bottom)(?:\s+(?:top|bottom|left|right))?))/,a=/\s*,\s*/,i=/#(?:[a-f0-9]{6}|[a-f0-9]{3})/,o=/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/,s=/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/,c=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,u=/[_a-z-][_a-z0-9-]*/,d=Uc(["(?:",i,"|","(?:rgb|hsl)",o,"|","(?:rgba|hsla)",s,"|",u,")"],""),f=Uc([d,"(?:\\s+",c,"(?:\\s+",c,")?)?"],""),h=Uc(["(?:",f,a,")*",f],""),v=Uc(["(?:(",n,")|",r,")"],""),p=Uc(["(?:(",v,")",a,")?(",h,")"],e),g=Uc(["\\s*(",d,")","(?:\\s+","(",c,"))?","(?:",a,"\\s*)?"],e);return{gradientSearch:p,colorStopSearch:g}},hpe=function(e,n){var r,a,i;e.gradientSearch.lastIndex=0;var o=e.gradientSearch.exec(n);if(!P0(o))for(r={original:o[0],colorStopList:[]},o[1]&&(r.line=o[1]),o[2]&&(r.angle=o[2]),o[3]&&(r.sideCorner=o[3]),e.colorStopSearch.lastIndex=0,a=e.colorStopSearch.exec(o[4]);!P0(a);)i={color:a[1]},a[2]&&(i.position=a[2]),r.colorStopList.push(i),a=e.colorStopSearch.exec(o[4]);return r},vpe=fpe(),iN=/.*gradient\s*\(((?:\([^)]*\)|[^)(]*)*)\)/gim,oN=function(e){return iN.lastIndex=0,iN.exec(e)},ppe={top:0,right:90,bottom:180,left:270,"top left":225,"left top":225,"top right":135,"right top":135,"bottom left":315,"left bottom":315,"bottom right":45,"right bottom":45},dp=function(e){var n=oN(e);if(!n)return!1;var r={points:[],degree:0},a=hpe(vpe,n[1]);if(a.original.trim()!==n[1].trim())return!1;var i=a.colorStopList.map(function(s){var c=s.color,u=s.position,d=Object.create(null);return d.color=Xe(c).toRgbString(),d.left=parseFloat(u),d});r.points=i;var o=parseInt(a.angle,10);return Number.isNaN(o)&&(o=ppe[a.sideCorner]||90),r.degree=o,r};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vb;function lN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Kn=Math.round,pb=function(e){return Xe(e).toRgb()},gpe=function(e){return Xe(e).toHsv()},mpe=function(e){return Xe(e).toHsl()},fp=function(e){var n=e.points,r=e.degree,a=n.sort(function(i,o){return i.left-o.left}).map(function(i){return"".concat(i.color," ").concat(Math.round(i.left*100)/100,"%")});return"linear-gradient(".concat(r,"deg,").concat(a.join(","),")")},ype=function(){return(1+Math.random()*4294967295).toString(16)},cN=function(e,n){return{id:ype(),left:e,color:n}},si=function(){function t(e){ho(this,t),V(this,"states",{s:100,v:100,h:100,a:1}),V(this,"originColor",void 0),V(this,"isGradient",void 0),V(this,"gradientStates",{colors:[],degree:0,selectedId:null,css:""}),this.update(e)}return vo(t,[{key:"update",value:function(n){if(n!==this.originColor){var r=dp(n);if(this.isGradient&&!r){var a=Xe(n).toHsv();this.states=a,this.updateCurrentGradientColor();return}this.originColor=n,this.isGradient=!1;var i=n;if(r){var o,s;this.isGradient=!0;var c=r,u=c.points.map(function(d){return cN(d.left,d.color)});this.gradientStates={colors:u,degree:c.degree,selectedId:((o=u[0])===null||o===void 0?void 0:o.id)||null},this.gradientStates.css=this.linearGradient,i=(s=this.gradientSelectedPoint)===null||s===void 0?void 0:s.color}this.updateStates(i)}}},{key:"saturation",get:function(){return this.states.s},set:function(n){this.states.s=Math.max(0,Math.min(100,n)),this.updateCurrentGradientColor()}},{key:"value",get:function(){return this.states.v},set:function(n){this.states.v=Math.max(0,Math.min(100,n)),this.updateCurrentGradientColor()}},{key:"hue",get:function(){return this.states.h},set:function(n){this.states.h=Math.max(0,Math.min(360,n)),this.updateCurrentGradientColor()}},{key:"alpha",get:function(){return this.states.a},set:function(n){this.states.a=Math.max(0,Math.min(1,Math.round(n*100)/100)),this.updateCurrentGradientColor()}},{key:"rgb",get:function(){var n=pb(this.states),r=n.r,a=n.g,i=n.b;return"rgb(".concat(Kn(r),", ").concat(Kn(a),", ").concat(Kn(i),")")}},{key:"rgba",get:function(){var n=pb(this.states),r=n.r,a=n.g,i=n.b,o=n.a;return"rgba(".concat(Kn(r),", ").concat(Kn(a),", ").concat(Kn(i),", ").concat(o,")")}},{key:"hsv",get:function(){var n=this.getHsva(),r=n.h,a=n.s,i=n.v;return"hsv(".concat(r,", ").concat(a,"%, ").concat(i,"%)")}},{key:"hsva",get:function(){var n=this.getHsva(),r=n.h,a=n.s,i=n.v,o=n.a;return"hsva(".concat(r,", ").concat(a,"%, ").concat(i,"%, ").concat(o,")")}},{key:"hsl",get:function(){var n=this.getHsla(),r=n.h,a=n.s,i=n.l;return"hsl(".concat(r,", ").concat(a,"%, ").concat(i,"%)")}},{key:"hsla",get:function(){var n=this.getHsla(),r=n.h,a=n.s,i=n.l,o=n.a;return"hsla(".concat(r,", ").concat(a,"%, ").concat(i,"%, ").concat(o,")")}},{key:"hex",get:function(){return Xe(this.states).toHexString()}},{key:"hex8",get:function(){return Xe(this.states).toHex8String()}},{key:"cmyk",get:function(){var n=this.getCmyk(),r=n.c,a=n.m,i=n.y,o=n.k;return"cmyk(".concat(r,", ").concat(a,", ").concat(i,", ").concat(o,")")}},{key:"css",get:function(){return this.isGradient?this.linearGradient:this.rgba}},{key:"linearGradient",get:function(){var n=this.gradientColors,r=this.gradientDegree;return fp({points:n,degree:r})}},{key:"gradientColors",get:function(){return this.gradientStates.colors},set:function(n){this.gradientStates.colors=n,this.gradientStates.css=this.linearGradient}},{key:"gradientSelectedId",get:function(){return this.gradientStates.selectedId},set:function(n){var r;n!==this.gradientSelectedId&&(this.gradientStates.selectedId=n,this.updateStates((r=this.gradientSelectedPoint)===null||r===void 0?void 0:r.color))}},{key:"gradientDegree",get:function(){return this.gradientStates.degree},set:function(n){this.gradientStates.degree=Math.max(0,Math.min(360,n)),this.gradientStates.css=this.linearGradient}},{key:"gradientSelectedPoint",get:function(){var n=this.gradientColors,r=this.gradientSelectedId;return n.find(function(a){return a.id===r})}},{key:"getFormatsColorMap",value:function(){return{HEX:this.hex,CMYK:this.cmyk,RGB:this.rgb,RGBA:this.rgba,HSL:this.hsl,HSLA:this.hsla,HSV:this.hsv,HSVA:this.hsva,CSS:this.css,HEX8:this.hex8}}},{key:"updateCurrentGradientColor",value:function(){var n=this.isGradient,r=this.gradientColors,a=this.gradientSelectedId,i=r.length,o=this.gradientSelectedPoint;if(!n||i===0||!o)return!1;var s=r.findIndex(function(u){return u.id===a}),c=sN(sN({},o),{},{color:this.rgba});return r.splice(s,1,c),this.gradientColors=r.slice(),this}},{key:"updateStates",value:function(n){var r=Xe(dpe(n)),a=r.toHsv();this.states=a}},{key:"getRgba",value:function(){var n=pb(this.states),r=n.r,a=n.g,i=n.b,o=n.a;return{r:Kn(r),g:Kn(a),b:Kn(i),a:o}}},{key:"getCmyk",value:function(){var n=this.getRgba(),r=n.r,a=n.g,i=n.b,o=spe(r,a,i),s=$e(o,4),c=s[0],u=s[1],d=s[2],f=s[3];return{c:Kn(c*100),m:Kn(u*100),y:Kn(d*100),k:Kn(f*100)}}},{key:"getHsva",value:function(){var n=gpe(this.states),r=n.h,a=n.s,i=n.v,o=n.a;return r=Kn(r),a=Kn(a*100),i=Kn(i*100),o*=1,{h:r,s:a,v:i,a:o}}},{key:"getHsla",value:function(){var n=mpe(this.states),r=n.h,a=n.s,i=n.l,o=n.a;return r=Kn(r),a=Kn(a*100),i=Kn(i*100),o*=1,{h:r,s:a,l:i,a:o}}},{key:"equals",value:function(n){return Xe.equals(this.rgba,n)}}],[{key:"isValid",value:function(n){return dp(n)?!0:Xe(n).isValid()}},{key:"hsva2color",value:function(n,r,a,i){return Xe({h:n,s:r,v:a,a:i}).toHsvString()}},{key:"hsla2color",value:function(n,r,a,i){return Xe({h:n,s:r,l:a,a:i}).toHslString()}},{key:"rgba2color",value:function(n,r,a,i){return Xe({r:n,g:r,b:a,a:i}).toHsvString()}},{key:"hex2color",value:function(n,r){var a=Xe(n);return a.setAlpha(r),a.toHexString()}},{key:"object2color",value:function(n,r){if(r==="CMYK"){var a=n.c,i=n.m,o=n.y,s=n.k;return"cmyk(".concat(a,", ").concat(i,", ").concat(o,", ").concat(s,")")}var c=Xe(n,{format:r});return c.toRgbString()}}])}();vb=si,V(si,"isGradientColor",function(t){return!!oN(t)}),V(si,"compare",function(t,e){var n=vb.isGradientColor(t),r=vb.isGradientColor(e);if(n&&r){var a=fp(dp(t)),i=fp(dp(e));return a===i}return!n&&!r?Xe.equals(t,e):!1});var bpe=["alpha","css","hex","hex8","hsl","hsla","hsv","hsva","rgb","rgba","saturation","value","isGradient"],uN=function(e){if(!e)return null;var n=Object.create(null);return bpe.forEach(function(r){return n[r]=e[r]}),e.isGradient&&(n.linearGradient=e.linearGradient),n};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function dN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wpe(t,e){xpe(t,e),e.add(t)}function xpe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zc(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Cpe={start:function(e,n){},drag:function(e,n){},end:function(e,n){}},as=new WeakSet,hN=function(){function t(e,n){ho(this,t),wpe(this,as),V(this,"dragging",!1),V(this,"$el",void 0),V(this,"props",void 0),V(this,"handles",void 0),this.$el=e,this.props=fN(fN({},Cpe),n),this.handles={start:zc(as,this,_pe).bind(this),drag:zc(as,this,Spe).bind(this),end:zc(as,this,Tpe).bind(this)},this.$el.addEventListener("mousedown",this.handles.start,!1)}return vo(t,[{key:"destroy",value:function(){this.$el.removeEventListener("mousedown",this.handles.start,!1),window.removeEventListener("mousemove",this.handles.drag,!1),window.removeEventListener("mouseup",this.handles.end,!1),window.removeEventListener("contextmenu",this.handles.end,!1)}}])}();function _pe(t){this.dragging||(window.addEventListener("mousemove",this.handles.drag,!1),window.addEventListener("mouseup",this.handles.end,!1),window.addEventListener("contextmenu",this.handles.end,!1),this.dragging=!0,this.props.start(zc(as,this,gb).call(this,t),t))}function Spe(t){this.dragging&&this.props.drag(zc(as,this,gb).call(this,t),t)}function Tpe(t){var e=this;setTimeout(function(){e.dragging=!1,e.props.end(zc(as,e,gb).call(e,t),t)},0),window.removeEventListener("mousemove",this.handles.drag,!1),window.removeEventListener("mouseup",this.handles.end,!1),window.removeEventListener("contextmenu",this.handles.end,!1)}function gb(t){var e=this.$el.getBoundingClientRect(),n=t,r=n.clientX-e.left,a=n.clientY-e.top;return{y:Math.min(Math.max(0,a),e.height),x:Math.min(Math.max(0,r),e.width)}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gd={disabled:Boolean,color:{type:Object},onChange:{type:Function,default:function(){return function(){}}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function pN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var kpe=["delete","backspace"],Ope=l.defineComponent({name:"LinearGradient",inheritAttrs:!1,props:pN(pN({},Gd),{},{enableMultipleGradient:{type:Boolean,default:!0}}),setup:function(e){var n=li(),r=Lt(),a=r.STATUS,i=a.value,o=l.ref(null),s=l.reactive({left:0,width:hb}),c=l.ref(!1),u=l.ref(!1),d=l.ref(e.color.gradientDegree),f=l.ref(e.color.gradientSelectedId),h=l.ref(Br(e.color.gradientColors));l.watch(function(){return e.color.gradientDegree},function(_){return d.value=_}),l.watch(function(){return e.color.gradientSelectedId},function(_){return f.value=_}),l.watch(function(){return e.color.gradientColors},function(_){h.value=Br(_)},{deep:!0});var v=function(O,N,B){e.disabled||e.onChange({key:O,payload:N,addUsedColor:B})},p=function(O){e.disabled||O===e.color.gradientDegree||(d.value=O,v("degree",O,!0))},g=function(O){e.disabled||(f.value=O,v("selectedId",O))},m=function(O,N){e.disabled||(h.value=O,v("colors",O,N))},y=function(O){var N=h.value.findIndex(function(k){return k.id===f.value});if(N!==-1){var B=h.value[N];O=Math.max(0,Math.min(s.width,O));var T=O/s.width*100;h.value.splice(N,1,{color:B.color,left:T,id:B.id}),m(h.value)}},b=function(O){var N=o.value.getBoundingClientRect();s.left=N.left,s.width=N.width||hb,!(c.value||e.disabled)&&(u.value=!1,c.value=!0,g(O),o.value.focus(),window.addEventListener("mousemove",w,!1),window.addEventListener("mouseup",x,!1),window.addEventListener("contextmenu",x,!1))},w=function(O){if(!(!c.value||e.disabled)){var N=O.clientX-s.left;u.value=!0,y(N)}},x=function(){c.value&&(setTimeout(function(){c.value=!1},0),u.value&&(m(h.value,!0),u.value=!1),window.removeEventListener("mousemove",w,!1),window.removeEventListener("mouseup",x,!1),window.removeEventListener("contextmenu",x,!1))},C=function(O){if(!e.disabled){var N=h.value,B=N.findIndex(function(E){return E.id===f.value}),T=N.length;if(kpe.includes(O.key.toLocaleLowerCase())&&T>2&&B>=0&&B<=T-1){N.splice(B,1),N[B]||(B=N[B+1]?B+1:N[B-1]?B-1:0);var k=N[B];m(N,!0),g(k==null?void 0:k.id)}}},S=function(O){if(!(e.disabled||!e.enableMultipleGradient)){var N=O.clientX-s.left;N=Math.max(0,Math.min(s.width,N));var B=N/s.width*100,T=cN(B,e.color.rgba);h.value.push(T),m(h.value,!0),g(T.id)}};return l.onMounted(function(){var _=o.value.getBoundingClientRect();s.left=_.left,s.width=_.width||hb}),l.onBeforeUnmount(function(){window.removeEventListener("mousemove",w,!1),window.removeEventListener("mouseup",x,!1),window.removeEventListener("contextmenu",x,!1)}),{baseClassName:n,statusClassNames:i,refSlider:o,degree:d,selectedId:f,colors:h,handleDegreeChange:p,handleStart:b,handleMove:w,handleEnd:x,handleKeyup:C,handleThumbBarClick:S}},render:function(){var e=this,n=this.color,r=n.linearGradient,a=n.gradientColors,i=this.colors,o=this.selectedId,s=this.degree,c=this.disabled,u=this.baseClassName,d=this.statusClassNames,f=fp({points:a,degree:90});return l.createVNode("div",{class:"".concat(u,"__gradient")},[l.createVNode("div",{class:"".concat(u,"__gradient-slider")},[l.createVNode("div",{class:["".concat(u,"__slider"),"".concat(u,"--bg-alpha")],onKeyup:this.handleKeyup,tabindex:0,ref:"refSlider"},[l.createVNode("ul",{class:"gradient-thumbs",onClick:this.handleThumbBarClick,style:{background:f}},[i.map(function(h){var v="".concat(Math.round(h.left*100)/100,"%");return l.createVNode("li",{class:["".concat(u,"__thumb"),"gradient-thumbs__item",o===h.id?d.active:""],key:h.id,title:"".concat(h.color," ").concat(v),style:{color:h.color,left:v},onClick:function(g){return g.stopPropagation()},onMousedown:function(){return e.handleStart(h.id)}},[l.createVNode("span",{class:["gradient-thumbs__item-inner","".concat(u,"--bg-alpha")]},null)])})])])]),l.createVNode("div",{class:"".concat(u,"__gradient-degree"),title:"".concat(s,"deg")},[l.createVNode(jd,{size:"small",theme:"normal",min:0,max:360,step:1,format:function(v){return"".concat(v,"°")},modelValue:e.degree,"onUpdate:modelValue":function(v){return e.degree=v},onBlur:this.handleDegreeChange,onEnter:this.handleDegreeChange,disabled:c},null)]),l.createVNode("div",{class:["".concat(u,"__gradient-preview"),"".concat(u,"--bg-alpha")]},[l.createVNode("span",{class:"preview-inner",style:{background:r}},null)])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Epe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ppe=l.defineComponent({name:"SaturationPanel",props:Epe({},Gd),setup:function(e){var n=li(),r=l.ref(null),a=l.ref(null),i=l.ref(null),o=l.reactive({width:VA,height:eN}),s=l.computed(function(){var h=e.color,v=h.saturation,p=h.value,g=o.width,m=o.height,y=Math.round((1-p)*m),b=Math.round(v*g);return{color:e.color.rgb,left:"".concat(b,"px"),top:"".concat(y,"px")}}),c=function(v){var p=o.width,g=o.height,m=v.x,y=v.y,b=Math.round(m/p*100),w=Math.round((1-y/g)*100);return{saturation:b,value:w}},u=function(v,p){if(!e.disabled){var g=c(v),m=g.saturation,y=g.value;e.onChange({saturation:m/100,value:y/100,addUsedColor:p})}},d=function(v){e.disabled||l.nextTick(function(){u(v,!0)})},f=l.computed(function(){return"hsl(".concat(e.color.hue,", 100%, 50%)")});return l.onMounted(function(){o.width=r.value.offsetWidth||VA,o.height=r.value.offsetHeight||eN,i.value=new hN(r.value,{start:function(){o.width=r.value.offsetWidth,o.height=r.value.offsetHeight},drag:function(v){u(v)},end:d})}),l.onBeforeUnmount(function(){i.value.destroy()}),{baseClassName:n,refThumb:a,refPanel:r,styles:s,panelBackground:f}},render:function(){var e=this.baseClassName,n=this.styles,r=this.panelBackground;return l.createVNode("div",{class:["".concat(e,"__saturation")],ref:"refPanel",style:{background:r}},[l.createVNode("span",{class:["".concat(e,"__thumb")],role:"slider",tabindex:0,ref:"refThumb",style:n},null)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bN=l.defineComponent({name:"ColorSlider",props:yN(yN({},Gd),{},{className:{type:String,default:""},value:{type:Number,default:0},maxValue:{type:Number,default:360},railStyle:{type:Object},type:{type:String,default:"hue"}}),setup:function(e){var n=li(),r=l.ref(null),a=l.ref(null),i=l.ref(null),o=l.reactive({width:tN}),s=l.computed(function(){var d=o.width;if(d){var f=Math.round(e.value/e.maxValue*100);return{left:"".concat(f,"%"),color:e.color.rgb}}}),c=function(f,h){if(!e.disabled){var v=o.width,p=f.x,g=Math.round(p/v*e.maxValue*100)/100;e.onChange(g,h)}},u=function(f){e.disabled||c(f,!0)};return l.onMounted(function(){o.width=r.value.offsetWidth||tN,i.value=new hN(r.value,{start:function(){o.width=r.value.offsetWidth},drag:function(f){c(f)},end:u})}),l.onBeforeUnmount(function(){i.value.destroy()}),{baseClassName:n,refThumb:a,refPanel:r,styles:s}},render:function(){var e=this.baseClassName,n=this.className,r=this.railStyle,a=this.styles,i=this.type,o=this.color,s={background:"linear-gradient(90deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 93%, ".concat(o.rgb," 93%, ").concat(o.rgb," 100%)")};return l.createVNode("div",{class:["".concat(e,"__slider-wrapper"),"".concat(e,"__slider-wrapper--").concat(i,"-type")]},[i==="alpha"&&l.createVNode("div",{className:"".concat(e,"__slider-padding"),style:s},null),l.createVNode("div",{class:["".concat(e,"__slider"),n],ref:"refPanel"},[l.createVNode("div",{class:"".concat(e,"__rail"),style:r},null),l.createVNode("span",{class:["".concat(e,"__thumb")],role:"slider",tabindex:0,ref:"refThumb",style:a},null)])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function wN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ipe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ape=l.defineComponent({name:"HueSlider",inheritAttrs:!1,props:Ipe({},Gd),setup:function(){var e=li();return{baseClassName:e}},render:function(){return l.createVNode(bN,{class:"".concat(this.baseClassName,"__hue"),color:this.color,value:this.color.hue,onChange:this.onChange,disabled:this.disabled,type:"hue"},null)}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Npe=l.defineComponent({name:"AlphaSlider",inheritAttrs:!1,props:{color:{type:Object},disabled:{type:Boolean,default:!1},onChange:{type:Function,default:function(){return function(){}}}},setup:function(e){var n=li(),r=function(o,s){e.onChange(o/100,s)},a=l.computed(function(){return{background:"linear-gradient(to right, rgba(0, 0, 0, 0), ".concat(e.color.rgb,")")}});return{baseClassName:n,railStyle:a,handleChange:r}},render:function(){var e=this.baseClassName;return l.createVNode(bN,{class:["".concat(e,"__alpha"),"".concat(e,"--bg-alpha")],color:this.color,value:this.color.alpha*100,onChange:this.handleChange,"rail-style":this.railStyle,"max-value":100,disabled:this.disabled,type:"alpha"},null)}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Dpe={RGB:[{key:"r",min:0,max:255,type:"inputNumber"},{key:"g",min:0,max:255,type:"inputNumber"},{key:"b",min:0,max:255,type:"inputNumber"}],HSV:[{key:"h",min:0,max:360,type:"inputNumber"},{key:"s",min:0,max:100,type:"inputNumber"},{key:"v",min:0,max:100,type:"inputNumber"}],HSL:[{key:"h",min:0,max:360,type:"inputNumber"},{key:"s",min:0,max:100,type:"inputNumber"},{key:"l",min:0,max:100,type:"inputNumber"}],CMYK:[{key:"c",min:0,max:255,type:"inputNumber"},{key:"m",min:0,max:255,type:"inputNumber"},{key:"y",min:0,max:255,type:"inputNumber"},{key:"k",min:0,max:255,type:"inputNumber"}],CSS:[{key:"css",type:"input",flex:3}],HEX:[{key:"hex",type:"input",flex:3}]};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function xN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Rpe=l.defineComponent({name:"FormatInputs",inheritAttrs:!1,props:mb(mb({},$c),{},{color:{type:Object},onInputChange:{type:Function,default:function(){return function(){}}}}),setup:function(e){var n=l.computed(function(){var u=Ee(Dpe[e.format]);return e.enableAlpha&&u.push({type:"inputNumber",key:"a",min:0,max:100,format:function(f){return"".concat(f,"%")},flex:1.15}),u}),r=l.reactive({}),a=l.reactive({}),i=function(d){var f=e.color;return d==="encode"?{HSV:f.getHsva(),HSL:f.getHsla(),RGB:f.getRgba(),CMYK:f.getCmyk(),CSS:{css:f.css},HEX:{hex:f.hex}}:{HSV:si.object2color(r,"HSV"),HSL:si.object2color(r,"HSL"),RGB:si.object2color(r,"RGB"),CMYK:si.object2color(r,"CMYK"),CSS:r.css,HEX:r.hex}},o=function(){var d=e.format,f=e.color,h=i("encode")[d];h.a=Math.round(f.alpha*100),Object.keys(h).forEach(function(v){r[v]=h[v],a[v]=h[v]})};o();var s=ts(o,100);l.watch(function(){var u=e.color,d=u.saturation,f=u.hue,h=u.value,v=u.alpha,p=u.css;return[d,f,h,v,p,e.format]},s);var c=function(d,f){if(f!==a[d]){var h=i("decode")[e.format];e.onInputChange(h,r.a/100,d,f)}};return{modelValue:r,inputConfigs:n,handleChange:c}},render:function(){var e=this,n=mb({},this.inputProps||{});return l.createVNode("div",{class:"input-group"},[this.inputConfigs.map(function(r){return l.createVNode("div",{class:"input-group__item",key:r.key,style:{flex:r.flex||1}},[r.type==="input"?l.createVNode(Va,l.mergeProps(n,{align:"center",size:"small",disabled:e.disabled,modelValue:e.modelValue[r.key],"onUpdate:modelValue":function(i){return e.modelValue[r.key]=i},maxlength:e.format==="HEX"?9:void 0,title:e.modelValue[r.key],onBlur:function(i){return e.handleChange(r.key,i)},onEnter:function(i){return e.handleChange(r.key,i)}}),null):l.createVNode(jd,l.mergeProps(n,{align:"center",size:"small",disabled:e.disabled,modelValue:e.modelValue[r.key],"onUpdate:modelValue":function(i){return e.modelValue[r.key]=i},title:e.modelValue[r.key],min:r.min,max:r.max,step:1,format:r.format,theme:"normal",onBlur:function(i){return e.handleChange(r.key,i)},onEnter:function(i){return e.handleChange(r.key,i)}}),null)])})])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Mpe=j0,Lpe=Mpe(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Fpe=Lpe;function CN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bpe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var jpe=l.defineComponent({name:"FormatPanel",inheritAttrs:!1,props:is(is({},$c),{},{color:{type:Object},onModeChange:{type:Function,default:function(){return function(){}}},onInputChange:{type:Function,default:function(){return function(){}}}}),setup:function(e){var n=li(),r=l.ref(e.format);l.watch(function(){return[e.format]},function(){return r.value=e.format});var a=function(o){r.value=o,e.onModeChange(o)};return{formatModel:r,baseClassName:n,handleModeChange:a}},render:function(){var e=this,n,r=this.baseClassName,a=this.handleModeChange,i=is(is({},this.$props),{},{format:this.formatModel}),o=is({},this.selectInputProps||{});return l.createVNode("div",{class:"".concat(r,"__format")},[l.createVNode("div",{class:"".concat(r,"__format--item")},[l.createVNode(Jl,{size:"small",class:"".concat(r,"__format-mode-select"),selectInputProps:is({},o),popupProps:is({overlayClassName:"".concat(r,"__select-options")},o.popupProps),modelValue:e.formatModel,"onUpdate:modelValue":function(c){return e.formatModel=c},onChange:a},Bpe(n=ipe.map(function(s){return l.createVNode(cP,{key:s,value:s,label:Fpe(s),style:{fontSize:"12px"}},null)}))?n:{default:function(){return[n]}})]),l.createVNode("div",{class:"".concat(r,"__format--item")},[l.createVNode(Rpe,i,null)])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function _N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function SN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_N(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var TN=l.defineComponent({name:"SwatchesPanel",props:SN(SN({},Gd),{},{colors:{type:Array,default:function(){return[]}},title:{type:String,default:"系统色彩"},editable:{type:Boolean,default:!1},onSetColor:{type:Function,default:function(){return function(){}}},handleAddColor:{type:Function,default:function(){return function(){}}}}),setup:function(e){var n=li(),r=St({DeleteIcon:q0,AddIcon:uv}),a=r.DeleteIcon,i=r.AddIcon,o=Lt(),s=o.STATUS,c=s.value,u=l.ref(!1),d=function(m){u.value=m},f=function(m){return e.onSetColor(m)},h=function(m){return si.compare(m,e.color.css)},v=l.computed(function(){return e.colors.findIndex(function(g){return h(g)})}),p=function(){var m=e.colors,y=v.value;y!==-1&&(m.splice(y,1),e.onChange(m),d(!1))};return{baseClassName:n,DeleteIcon:a,AddIcon:i,statusClassNames:c,selectedColorIndex:v,visiblePopConfirm:u,setVisiblePopConfirm:d,handleClick:f,isEqualCurrentColor:h,handleRemoveColor:p}},render:function(){var e=this,n=this.baseClassName,r=this.DeleteIcon,a=this.AddIcon,i=this.statusClassNames,o=this.title,s=this.editable,c="".concat(n,"__swatches"),u=function(){return s?l.createVNode("div",{class:"".concat(c,"--actions")},[l.createVNode("span",{role:"button",class:"".concat(n,"__icon"),onClick:function(){return e.handleAddColor()}},[l.createVNode(a,null,null)]),e.colors.length>0?l.createVNode("span",{role:"button",class:"".concat(n,"__icon"),onClick:function(){return e.handleRemoveColor()}},[l.createVNode(r,null,null)]):null]):null};return l.createVNode("div",{class:c},[l.createVNode("h3",{class:"".concat(c,"--title")},[l.createVNode("span",null,[o]),u()]),l.createVNode("ul",{class:["".concat(c,"--items"),"narrow-scrollbar"]},[this.colors.map(function(d){return l.createVNode("li",{class:["".concat(c,"--item"),e.isEqualCurrentColor(d)&&s?i.active:""],title:d,key:d,onClick:function(){e.disabled||e.handleClick(d)}},[l.createVNode("div",{class:["".concat(c,"--color"),"".concat(n,"--bg-alpha")]},[l.createVNode("span",{class:"".concat(c,"--inner"),style:{background:d}},null)])])})])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function kN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ON(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var EN=l.defineComponent({name:"ColorPanel",props:ON(ON({},$c),{},{togglePopup:{type:Function}}),setup:function(e){var n,r,a,i=li(),o=Lt(),s=o.STATUS,c=Qe("colorPicker"),u=c.t,d=c.globalConfig,f=s.value,h=l.toRefs(e),v=h.value,p=h.modelValue,g=h.recentColors,m=Mt(v,p,e.defaultValue,e.onChange),y=$e(m,2),b=y[0],w=y[1],x=l.computed(function(){return S.value?ZA:rpe}),C=l.ref(((n=e.colorModes)===null||n===void 0?void 0:n.length)!==1&&(r=b.value)!==null&&r!==void 0&&r.includes("linear-gradient")?"linear-gradient":((a=e.colorModes)===null||a===void 0?void 0:a.length)===1?e.colorModes[0]:"monochrome"),S=l.computed(function(){return C.value==="linear-gradient"}),_=l.ref(new si(b.value||x.value)),O=function(){return _.value.update(b.value||x.value)},N=l.ref(_.value.isGradient?"CSS":"RGB"),B=gn(g,e.defaultRecentColors,e.onRecentColorsChange,"recentColors"),T=$e(B,2),k=T[0],E=T[1],I=function(){return C.value==="linear-gradient"?_.value.linearGradient:_.value.getFormatsColorMap()[e.format]||_.value.css},A=function(){if(!(k.value===null||k.value===!1)){var z=Br(k.value)||[],K=_.value.isGradient?_.value.linearGradient:_.value.rgba,P=z.indexOf(K);P>-1&&z.splice(P,1),z.unshift(K),z.length>JA&&(z.length=JA),M(z)}},M=function(z){E(z)},$=function(z){w(I(),{color:uN(_.value),trigger:z||"palette-saturation-brightness"})};l.watch(function(){return[e.defaultValue,e.enableAlpha]},O),l.watch(function(){return b.value},function(q){q!==I()&&(O(),C.value=_.value.isGradient?"linear-gradient":"monochrome")});var U=function(z){C.value=z,z==="linear-gradient"?_.value.update(_.value.gradientColors.length>0?_.value.linearGradient:ZA):_.value.update(_.value.rgba),$()},F=function(z){return N.value=z},j=function(z){var K=z.saturation,P=z.value,R=_.value,X=R.saturation,ee=R.value,re="palette-saturation-brightness";if(P!==ee&&K!==X)_.value.saturation=K,_.value.value=P,re="palette-saturation-brightness";else if(K!==X)_.value.saturation=K,re="palette-saturation";else if(P!==ee)_.value.value=P,re="palette-brightness";else return;_.value.update(_.value.rgba),$(re)},W=function(z){var K;_.value.hue=z,$("palette-hue-bar"),(K=e.onPaletteBarChange)===null||K===void 0||K.call(e,{color:uN(_.value)})},H=function(z){_.value.alpha=z,$("palette-alpha-bar")},J=function(z,K){_.value.update(z),_.value.alpha=K,$("input")},Y=function(z){var K=z.key,P=z.payload,R="palette-saturation-brightness";switch(K){case"degree":_.value.gradientDegree=P,R="input";break;case"selectedId":_.value.gradientSelectedId=P;break;case"colors":_.value.gradientColors=P;break}$(R)},D=function(z,K){var P=si.isGradientColor(K);P?e.colorModes.includes("linear-gradient")?(C.value="linear-gradient",_.value.update(K),_.value.updateCurrentGradientColor()):console.warn("该模式不支持渐变色"):C.value==="linear-gradient"?(_.value.updateStates(K),_.value.updateCurrentGradientColor()):_.value.update(K),$()};return{baseClassName:i,statusClassNames:f,t:u,globalConfig:d,color:_,mode:C,formatModel:N,recentlyUsedColors:k,isGradient:S,addRecentlyUsedColor:A,handleModeChange:U,handleSatAndValueChange:j,handleHueChange:W,handleAlphaChange:H,handleGradientChange:Y,handleSetColor:D,handleFormatModeChange:F,handleInputChange:J,handleRecentlyUsedColorsChange:M}},render:function(){var e,n=this,r=this.t,a=this.baseClassName,i=this.statusClassNames,o=this.globalConfig,s=this.swatchColors,c=this.showPrimaryColorPreview,u=this.isGradient,d={color:this.color,disabled:this.disabled},f=this.recentlyUsedColors!==null&&this.recentlyUsedColors!==!1,h=s;h===void 0&&(h=Ee(ape));var v=((e=h)===null||e===void 0?void 0:e.length)>0,p=function(){return!v&&!f?null:l.createVNode(l.Fragment,null,[l.createVNode("div",{class:"".concat(a,"__swatches-wrap")},[f?l.createVNode(TN,l.mergeProps(d,{title:r(o.recentColorTitle),editable:!0,colors:n.recentlyUsedColors,handleAddColor:n.addRecentlyUsedColor,onSetColor:function(y){return n.handleSetColor("used",y)},onChange:n.handleRecentlyUsedColorsChange}),null):null,v?l.createVNode(TN,l.mergeProps(d,{title:r(o.swatchColorTitle),colors:h,onSetColor:function(y){return n.handleSetColor("system",y)}}),null):null])])};return l.createVNode("div",{class:["".concat(a,"__panel"),this.disabled?i.disabled:!1]},[l.createVNode(lpe,l.mergeProps(this.$props,{mode:this.mode,onModeChange:this.handleModeChange}),null),l.createVNode("div",{class:["".concat(a,"__body")]},[u?l.createVNode(Ope,l.mergeProps(d,{onChange:this.handleGradientChange,enableMultipleGradient:this.enableMultipleGradient}),null):null,l.createVNode(Ppe,l.mergeProps(d,{onChange:this.handleSatAndValueChange}),null),l.createVNode("div",{class:["".concat(a,"__sliders-wrapper")]},[l.createVNode("div",{class:["".concat(a,"__sliders")]},[l.createVNode(Ape,l.mergeProps(d,{onChange:this.handleHueChange}),null),this.enableAlpha?l.createVNode(Npe,l.mergeProps(d,{onChange:this.handleAlphaChange}),null):null]),c?l.createVNode("div",{class:["".concat(a,"__sliders-preview"),"".concat(a,"--bg-alpha")]},[l.createVNode("span",{class:"".concat(a,"__sliders-preview-inner"),style:{background:u?this.color.linearGradient:this.color.rgba}},null)]):null]),l.createVNode(jpe,l.mergeProps(this.$props,{color:this.color,format:this.formatModel,onModeChange:this.handleFormatModeChange,onInputChange:this.handleInputChange}),null),p()])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $pe=oc,Upe=lv,zpe=xE,Hpe=C0;function Wpe(t,e){if(t==null)return{};var n=$pe(Hpe(t),function(r){return[r]});return e=Upe(e),zpe(t,n,function(r,a){return e(r,a[0])})}var Kpe=Wpe;function PN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qpe=l.defineComponent({name:"TColorPickerPanel",inheritAttrs:!1,props:yb({},$c),setup:function(e,n){var r=n.attrs,a=l.computed(function(){return Kpe(yb(yb({},e),r),function(o){return o!==void 0})}),i=ve();return function(){return l.createVNode(EN,l.mergeProps(a.value,{popupProps:null,"close-btn":!1,class:"".concat(i.value,"-is-inline")}),null)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gpe=l.defineComponent({name:"DefaultTrigger",inheritAttrs:!1,props:{color:{type:String,default:""},disabled:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},inputProps:{type:Object,default:function(){return{autoWidth:!0}}},onTriggerChange:{type:Function,default:function(){return function(){}}},size:{type:String,default:"medium"}},setup:function(e){var n=li(),r=l.ref(e.color),a=Lt(),i=a.SIZE;l.watch(function(){return[e.color]},function(){return r.value=e.color});var o=function(c){c!==e.color&&(c&&!si.isValid(c)?r.value=e.color:r.value=c,e.onTriggerChange(r.value))};return{baseClassName:n,value:r,handleChange:o,sizeClassNames:i}},render:function(){var e=this,n=this.baseClassName,r=this.sizeClassNames,a={label:function(){return l.createVNode("div",{class:["".concat(n,"__trigger--default__color"),"".concat(n,"--bg-alpha")]},[l.createVNode("span",{class:["color-inner",V({},r[e.size],e.size!=="medium")],style:{background:e.value}},null)])}};return l.createVNode(Va,l.mergeProps({borderless:this.borderless,clearable:this.clearable,size:this.size,modelValue:e.value,"onUpdate:modelValue":function(o){return e.value=o},disabled:this.disabled,onBlur:this.handleChange},this.inputProps),a)}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function IN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ype=l.defineComponent({name:"TColorPicker",props:hp({},$c),setup:function(e){var n=li(),r=l.ref(!1),a=function(g){return r.value=g},i=l.toRefs(e),o=i.value,s=i.modelValue,c=Mt(o,s,e.defaultValue,e.onChange),u=$e(c,2),d=u[0],f=u[1],h=l.ref(),v=function(){if(e.disabled)return null;var g=hp({},e);return delete g.onChange,l.createVNode(EN,l.mergeProps(g,{disabled:e.disabled,value:d.value,togglePopup:a,onChange:function(y,b){return f(y,b)}}),null)};return{baseClassName:n,innerValue:d,visible:r,refTrigger:h,renderPopupContent:v,setVisible:a,setInnerValue:f}},render:function(){var e=this,n=this.popupProps,r=this.baseClassName,a=hp(hp({placement:"bottom-left"},n||{}),{},{trigger:"click",attach:"body",overlayClassName:[r],visible:this.visible,overlayInnerStyle:{padding:0},onVisibleChange:function(o,s){s.trigger==="document"&&e.setVisible(!1)}});return l.createVNode(sa,l.mergeProps(a,{content:this.renderPopupContent}),{default:function(){return[l.createVNode("div",{class:"".concat(r,"__trigger"),onClick:function(){return e.setVisible(!e.visible)},ref:"refTrigger"},[qQ(e,"default",l.createVNode(Gpe,{borderless:e.borderless,color:e.innerValue,disabled:e.disabled,clearable:e.clearable,"input-props":e.inputProps,onTriggerChange:e.setInnerValue,size:e.size},null))])]}})}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Xpe=Be(qpe),Jpe=Be(Ype);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qpe={alt:{type:String,default:""},content:{type:[String,Function]},default:{type:[String,Function]},hideOnLoadFailed:Boolean,icon:{type:Function},image:{type:String,default:""},imageProps:{type:Object},shape:{type:String,default:"circle",validator:function(e){return e?["circle","round"].includes(e):!0}},size:{type:String,default:""},onError:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zpe={alt:{type:String,default:""},error:{type:[String,Function]},fallback:{type:String,default:""},fit:{type:String,default:"fill",validator:function(e){return e?["contain","cover","fill","none","scale-down"].includes(e):!0}},gallery:Boolean,lazy:Boolean,loading:{type:[String,Function]},overlayContent:{type:[String,Function]},overlayTrigger:{type:String,default:"always",validator:function(e){return e?["always","hover"].includes(e):!0}},placeholder:{type:[String,Function]},position:{type:String,default:"center"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin",validator:function(e){return e?["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(e):!0}},shape:{type:String,default:"square",validator:function(e){return e?["circle","round","square"].includes(e):!0}},src:{type:[String,Object]},srcset:{type:Object},onError:Function,onLoad:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Vpe=l.defineComponent({name:"TImage",props:Zpe,setup:function(e){var n=l.ref(null),r=l.ref(null),a=null,i=l.toRefs(e),o=i.src,s=We();l.onMounted(function(){var A;if((A=r.value)!==null&&A!==void 0&&A.complete&&!e.lazy&&b(),!(!e.lazy||!n.value)){var M=Ud(n.value,null,g,0);a=M}}),l.onUnmounted(function(){n.value&&a&&a.unobserve(n.value)});var c=Qe("image"),u=c.classPrefix,d=c.globalConfig,f=l.ref(o.value);l.watch([o,d],function(A){var M=$e(A,2),$=M[0],U=M[1],F=U||{},j=F.replaceImageSrc,W=Re(j)?j(e):$;W===f.value&&f.value||(f.value=W)},{immediate:!0});var h=Cv(f),v=h.previewUrl;l.watch([v],function(){w.value=!1,m.value=!1});var p=l.ref(!e.lazy),g=function(){p.value=!0},m=l.ref(!1),y=function(M){var $;m.value=!0,($=e.onLoad)===null||$===void 0||$.call(e,{e:M})},b=function(){var M=new Event("load");Object.defineProperty(M,"target",{value:r.value,enumerable:!0}),y(M)},w=l.ref(!1),x=function(M){var $;w.value=!0,($=e.onError)===null||$===void 0||$.call(e,{e:M}),e.fallback&&(f.value=e.fallback,w.value=!1)},C=l.computed(function(){return e.overlayTrigger==="hover"}),S=l.computed(function(){return["".concat(u.value,"-image"),"".concat(u.value,"-image--fit-").concat(e.fit),"".concat(u.value,"-image--position-").concat(e.position)]}),_=l.ref(!C.value),O=function(){C.value&&(_.value=!_.value)},N=function(){var M=s("placeholder");return M?l.createVNode("div",{class:"".concat(u.value,"-image__placeholder")},[M]):null},B=function(){return e.gallery?l.createVNode("div",{class:"".concat(u.value,"-image__gallery-shadow")},null):null},T=function(){var M=I("overlayContent");return M?l.createVNode("div",{class:["".concat(u.value,"-image__overlay-content"),!_.value&&"".concat(u.value,"-image__overlay-content--hidden")]},[M]):null};function k(){return l.createVNode("picture",null,[Object.entries(e.srcset).map(function(A){var M=$e(A,2),$=M[0],U=M[1];return l.createVNode("source",{type:$,srcset:U},null)}),E()])}function E(){var A=Je(f.value)?f.value:v.value;return l.createVNode("img",{ref:r,src:A,onError:x,onLoad:y,class:S.value,alt:e.alt,referrerpolicy:e.referrerpolicy},null)}var I=Qa();return function(){return l.createVNode("div",l.mergeProps({ref:n,class:["".concat(u.value,"-image__wrapper"),"".concat(u.value,"-image__wrapper--shape-").concat(e.shape),e.gallery&&"".concat(u.value,"-image__wrapper--gallery"),C.value&&"".concat(u.value,"-image__wrapper--need-hover")],onMouseenter:O,onMouseleave:O},Sr(e,["src","alt","fit","position","shape","placeholder","loading","error","overlayTrigger","overlayContent","lazy","gallery","onLoad","onError"])),[N(),B(),(w.value||!p.value)&&l.createVNode("div",{class:"".concat(u.value,"-image")},null),!(w.value||!p.value)&&(e.srcset&&Object.keys(e.srcset).length?k():E()),!(w.value||!p.value)&&!m.value&&l.createVNode("div",{class:"".concat(u.value,"-image__loading")},[s("loading")||l.createVNode(Q0,{direction:"vertical",size:8,align:"center"},{default:function(){return[l.createVNode(_T,{size:"24px"},null),Je(e.loading)?e.loading:d.value.loadingText]}})]),w.value&&l.createVNode("div",{class:"".concat(u.value,"-image__error")},[I("error",{defaultNode:l.createVNode(Q0,{direction:"vertical",size:8,align:"center"},{default:function(){return[l.createVNode(wT,{size:"24px"},null),Je(e.error)?e.error:d.value.errorText]}})})]),T()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Di=Be(Vpe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function AN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var NN=l.defineComponent({name:"TAvatar",props:Qpe,setup:function(e){var n=ve("avatar"),r=Ut(),a=We(),i=Lt(),o=i.SIZE,s=l.inject("avatarGroup",void 0),c=l.ref(null),u=l.ref(null),d=l.ref(!0),f=l.ref(4),h=l.ref(""),v=l.computed(function(){return e.size||(s==null?void 0:s.size)}),p=l.computed(function(){return v.value&&!o.value[v.value]}),g=l.computed(function(){return p.value?{width:v.value,height:v.value,"font-size":"".concat(Number.parseInt(v.value,10)/2,"px")}:{}}),m=l.computed(function(){return p.value?{height:v.value,width:v.value}:{}}),y=l.computed(function(){return{transform:h.value}}),b=function(C){var S,_=C.e,O=e.hideOnLoadFailed;d.value=!O,(S=e.onError)===null||S===void 0||S.call(e,{e:_})},w=function(){var C=c.value,S=u.value,_=C==null?void 0:C.offsetWidth,O=S==null?void 0:S.offsetWidth;f.value*2<_&&(h.value=O>_-f.value*2?"scale(".concat((_-f.value*2)/O,")"):"scale(1)")};return l.onMounted(function(){l.nextTick(function(){w()})}),l.onUpdated(function(){l.nextTick(function(){w()})}),l.watch(function(){return e.image},function(x){x&&(d.value=!0)}),function(){var x=r("default","content"),C=a("icon"),S=C&&!x,_=e.shape,O=e.image,N=e.alt,B=["".concat(n.value),o.value[v.value],V(V(V({},"".concat(n.value,"--circle"),_==="circle"),"".concat(n.value,"--round"),_==="round"),"".concat(n.value,"__icon"),!!S)];return x=l.createVNode("span",{ref:u,style:bb({},y.value)},[x]),C&&(x=[C,S?"":x]),O&&d.value&&(x=l.createVNode(Di,l.mergeProps({style:bb({},m.value),src:O,alt:N,onError:b},e.imageProps),null)),l.createVNode("div",{ref:c,class:B,style:bb({},g.value)},[x])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ege={cascading:{type:String,default:"right-up",validator:function(e){return e?["left-up","right-up"].includes(e):!0}},collapseAvatar:{type:[String,Function]},max:{type:Number},popupProps:{type:Object},size:{type:String,default:""}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function tge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var nge=l.defineComponent({name:"TAvatarGroup",props:ege,setup:function(e){l.provide("avatarGroup",e);var n=We(),r=ve("avatar"),a=ve("avatar-group"),i=function(c){if((c==null?void 0:c.length)>e.max){var u=o(c),d=c.slice(0,e.max);return d.push(l.createVNode(NN,{class:"".concat(r.value,"__collapse"),size:e.size},tge(u)?u:{default:function(){return[u]}})),d}return c},o=function(c){return n("collapseAvatar")||"+".concat(c.length-e.max)};return function(){var s=n("default"),c=e.cascading,u=e.max,d=["".concat(a.value),V(V({},"".concat(r.value,"--offset-right"),c==="right-up"),"".concat(r.value,"--offset-left"),c==="left-up")],f=u&&u>=0?[i(LS(s))]:[s];return l.createVNode("div",{class:d},[f])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var rge=Be(NN),age=Be(nge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ige={color:{type:String,default:""},content:{type:[String,Function]},count:{type:[String,Number,Function],default:0},default:{type:[String,Function]},dot:Boolean,maxCount:{type:Number,default:99},offset:{type:Array},shape:{type:String,default:"circle",validator:function(e){return["circle","round"].includes(e)}},showZero:Boolean,size:{type:String,default:"medium",validator:function(e){return["small","medium"].includes(e)}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var oge=l.defineComponent({name:"TBadge",inheritAttrs:!1,props:ige,setup:function(e,n){var r=n.attrs,a=Ut(),i=We(),o=l.computed(function(){var v=i("count");return Number.isNaN(Number(v))?v:(v=Number(e.count),v>e.maxCount?"".concat(e.maxCount,"+"):v)}),s=function(){if(!e.offset)return{};var p=$e(e.offset,2),g=p[0],m=p[1];return g=Number.isNaN(Number(g))?g:"".concat(g,"px"),m=Number.isNaN(Number(m))?m:"".concat(m,"px"),{xOffset:g,yOffset:m}},c=ve(),u=ve("badge"),d=l.computed(function(){return!e.showZero&&(o.value===0||o.value==="0")}),f=l.computed(function(){return[V(V(V(V({},"".concat(u.value,"--dot"),!!e.dot),"".concat(u.value,"--circle"),!e.dot&&e.shape==="circle"),"".concat(u.value,"--round"),!e.dot&&e.shape==="round"),"".concat(c.value,"-size-s"),e.size==="small")]}),h=l.computed(function(){var v=s(),p=v.xOffset,g=v.yOffset;return{background:e.color,right:p,top:g}});return function(){return l.createVNode("div",l.mergeProps({class:u.value},r),[a("default","content"),d.value?null:l.createVNode("sup",{class:f.value,style:h.value},[e.dot?null:o.value])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var lge=Be(oge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var sge={cell:{type:[String,Function]},cellAppend:{type:[String,Function]},controllerConfig:{type:[Boolean,Object],default:void 0},fillWithZero:{type:Boolean,default:void 0},firstDayOfWeek:{type:Number,validator:function(e){return e?[1,2,3,4,5,6,7].includes(e):!0}},format:{type:String,default:"YYYY-MM-DD"},head:{type:[String,Function]},isShowWeekendDefault:{type:Boolean,default:!0},mode:{type:String,default:"month",validator:function(e){return e?["month","year"].includes(e):!0}},month:{type:[String,Number]},multiple:Boolean,preventCellContextmenu:Boolean,range:{type:Array},theme:{type:String,default:"full",validator:function(e){return e?["full","card"].includes(e):!0}},value:{type:[String,Array,Date]},week:{type:[Array,Function]},year:{type:[String,Number]},onCellClick:Function,onCellDoubleClick:Function,onCellRightClick:Function,onControllerChange:Function,onMonthChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hc="calendar",vp=1970,DN=1,RN=12,MN=4,LN={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"日"};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var FN=function(e){var n=ke(e).day();return n===0&&(n=7),n},cge=function(e){var n="",r=e.toString();return r in LN&&(n=LN[r]),n},uge=function(e,n){var r=0,a=FN(n);return a>=e?r=a-e:r=7-e+a,r},wb=function(e,n){var r=new Date(e);return r.setDate(r.getDate()+n),r},dge=function(e,n){for(var r=n.curSelectedYear,a=n.curDate,i=n.curDateList,o=e.format,s=e.multiple,c=[],u=function(h){var v=new Date(r,h-1),p=s?!!i.find(function(g){return g.year()===r&&parseInt(g.format("M"),10)===h}):a.year()===r&&parseInt(a.format("M"),10)===h;c.push({mode:"year",isCurrent:p,date:v,formattedDate:ke(v).format(o),filterDate:null,formattedFilterDate:null,isShowWeekend:!0})},d=DN;d<=RN;d++)u(d);return c},fge=function(e,n){for(var r=n.curSelectedYear,a=n.curSelectedMonth,i=n.realFirstDayOfWeek,o=n.curDate,s=n.curDateList,c=e.format,u=e.multiple,d=[],f=ke("".concat(r,"-").concat(a)).startOf("month").toDate(),h=ke(ke("".concat(r,"-").concat(a)).endOf("month").format("YYYY-MM-DD")).toDate(),v=h.getDate(),p=uge(i,f),g=[],m=1,y=function(k,E,I,A){var M=FN(I);return{mode:"month",belongTo:k,isCurrent:E,day:M,weekOrder:A,date:I,formattedDate:ke(I).format(c),filterDate:null,formattedFilterDate:null,isShowWeekend:!0}},b=function(k){var E=u?!!s.find(function(I){return I.isSame(ke(k))}):o.isSame(ke(k));return E},w=0;w<p;w++){var x=wb(f,w-p);g.push(y(-1,!1,x,m)),g.length===7&&(d.push(g),g=[],m+=1)}for(var C=0;C<v;C++){var S=wb(f,C),_=b(S);g.push(y(0,_,S,m)),g.length===7&&(d.push(g),g=[],m+=1)}if(g.length){for(var O=7-g.length,N=0;N<O;N++){var B=wb(h,N+1);g.push(y(1,!1,B,m))}d.push(g)}return d},os=function(){return ke(ke().format("YYYY-MM-DD"))};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function hge(t){var e=Qe(Hc),n=e.globalConfig,r=l.reactive({realFirstDayOfWeek:1,curDate:null,curDateList:[],curSelectedYear:null,curSelectedMonth:null,curSelectedMode:null,isShowWeekend:!0,controlSize:"medium"});function a(){var d=os();r.curDate=d,r.curSelectedYear=d.year(),r.curSelectedMonth=parseInt(d.format("M"),10)}function i(d){var f=d?parseInt("".concat(d),10):os().year();!isNaN(f)&&f>0&&(r.curSelectedYear=f)}function o(d){var f=parseInt(d?"".concat(d):os().format("M"),10);!isNaN(f)&&f>0&&f<=12&&(r.curSelectedMonth=f)}function s(d){Ke(d)?r.curDate=d&&d.length?ke(d[0]):os():r.curDate=d?ke(d):os()}function c(d){Ke(d)?r.curDateList=d&&d.length?d.map(function(f){return ke(f)}):[os()]:r.curDateList=d?[ke(d)]:[os()]}function u(d){var f=!0;return r.isShowWeekend||(f=d!==6&&d!==7),f}return l.watch(function(){return t.firstDayOfWeek},function(){var d,f;r.realFirstDayOfWeek=(d=(f=t.firstDayOfWeek)!==null&&f!==void 0?f:n.value.firstDayOfWeek)!==null&&d!==void 0?d:1},{immediate:!0}),l.watch(function(){return t.value},function(d){t.multiple?c(d):s(d)},{immediate:!0}),l.watch(function(){return t.year},function(d){i(d)},{immediate:!0}),l.watch(function(){return t.month},function(d){o(d)},{immediate:!0}),l.watch(function(){return t.isShowWeekendDefault},function(d){r.isShowWeekend=d},{immediate:!0}),l.watch(function(){return t.mode},function(d){r.curSelectedMode=d},{immediate:!0}),l.watch(function(){return t.theme},function(d){d==="card"&&(r.controlSize="small"),d==="full"&&(r.controlSize="medium")},{immediate:!0}),{state:r,toToday:a,checkDayVisible:u}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vge(t,e){var n=ve(Hc),r=l.computed(function(){return["".concat(n.value),"".concat(n.value,"--").concat(t.theme)]}),a=l.computed(function(){return["".concat(n.value,"__panel"),"".concat(n.value,"__panel--").concat(e.curSelectedMode)]}),i=l.computed(function(){return["".concat(n.value,"__control")]}),o=l.computed(function(){return["".concat(n.value,"__title")]}),s=l.computed(function(){return["".concat(n.value,"__control-section")]}),c=l.computed(function(){return["".concat(n.value,"__control-section-cell")]}),u=l.computed(function(){return["".concat(n.value,"__control-tag")]}),d=l.computed(function(){return["".concat(n.value,"__table")]}),f=l.computed(function(){return["".concat(n.value,"__table-head")]}),h=l.computed(function(){return["".concat(n.value,"__table-head-row")]}),v=l.computed(function(){return["".concat(n.value,"__table-head-cell")]}),p=l.computed(function(){return["".concat(n.value,"__table-body")]}),g=l.computed(function(){return["".concat(n.value,"__table-body-row")]});return{body:r,panel:a,control:i,title:o,controlSection:s,controlSectionCell:c,controlTag:u,table:d,tableHead:f,tableHeadRow:h,tableHeadCell:v,tableBody:p,tableBodyRow:g}}function pge(){var t=ve(Hc),e=l.computed(function(){return["".concat(t.value,"__table-body-cell")]}),n=l.computed(function(){return"".concat(t.value,"__table-body-cell--now")}),r=l.computed(function(){return["".concat(t.value,"__table-body-cell-display")]}),a=l.computed(function(){return["".concat(t.value,"__table-body-cell-content")]});return{tableBodyCell:e,tableBodyCell4Now:n,tableBodyCellDisplay:r,tableBodyCellCsontent:a}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function BN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function xb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jN=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return{visible:e,disabled:!1,mode:{visible:!0,radioGroupProps:{}},year:{visible:!0,selectProps:{}},month:{visible:!0,selectProps:{}},weekend:{visible:!0,showWeekendButtonProps:{},hideWeekendButtonProps:{}},current:{visible:!0,currentDayButtonProps:{},currentMonthButtonProps:{}}}};function gge(t,e){var n=Qe(Hc),r=n.globalConfig,a=l.computed(function(){var d=ke("".concat(e.curSelectedYear,"-").concat(e.curSelectedMonth)),f={isShowWeekend:e.isShowWeekend,filterDate:d.toDate(),formattedFilterDate:d.format(t.format),mode:e.curSelectedMode};return f}),i=l.computed(function(){var d,f,h=(d=(f=t.controllerConfig)!==null&&f!==void 0?f:r.value.controllerConfig)!==null&&d!==void 0?d:!0;return Nn(h)?jN(h):xb(xb({},jN()),h)}),o=l.computed(function(){return!!i.value&&i.value.visible});function s(d){var f=!0,h=i.value;return(!h||!h.visible||h[d]===!1||h[d]&&!h[d].visible)&&(f=!1),f}function c(d,f){var h=!1,v=i.value;return v&&(v.disabled||v[d]&&v[d][f]&&v[d][f].disabled)&&(h=!0),h}function u(){l.nextTick(function(){Re(t.onControllerChange)&&t.onControllerChange(xb({},a.value))})}return{options:a,configData:i,visible:o,checkControllerVisible:s,checkControllerDisabled:c,emitControllerChange:u}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function mge(t,e){var n=Qe(Hc),r=n.t,a=n.globalConfig,i=l.computed(function(){return t.week||r(a.value.week).split(",")});function o(c){var u=i.value;return ot(u)&&u[c-1]?u[c-1]:cge(c)}var s=l.computed(function(){for(var c=[],u=1,d=7,f=e.realFirstDayOfWeek;f<=d;f++)c.push({num:f,display:o(f)});if(e.realFirstDayOfWeek>u)for(var h=u;h<e.realFirstDayOfWeek;h++)c.push({num:h,display:o(h)});return c});return{cellColHeaders:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function UN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$N(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zN={click:"click",dblclick:"dblclick",contextmenu:"rightclick"},HN=l.defineComponent({name:"TCalendarCell",inheritAttrs:!1,props:{item:{type:Object,default:function(){return null}},fillWithZero:{type:Boolean,default:void 0},theme:{type:String,default:function(){return null}},t:Function,global:Object,cell:[String,Function],cellAppend:[String,Function]},emits:Ee(Object.values(zN)),setup:function(e,n){var r=n.emit,a=Ut(),i=pge(),o=Lt(),s=o.STATUS,c=l.computed(function(){if(e.item.mode==="month"){var p,g,m=e.item.date.getDate(),y=m<10&&((p=(g=e.fillWithZero)!==null&&g!==void 0?g:e.global.fillWithZero)!==null&&p!==void 0?p:!0);return y?"0".concat(m):m}var b=e.t(e.global.cellMonth).split(",");return b[e.item.date.getMonth().toString()]}),u=l.computed(function(){return e.theme==="full"}),d=l.computed(function(){return e.item.mode==="month"&&e.item.belongTo!==0}),f=l.computed(function(){var p=e.item,g=p.mode,m=p.date,y=p.formattedDate,b=p.isCurrent,w=new Date,x=g==="year"?w.getMonth()===m.getMonth()&&w.getFullYear()===m.getFullYear():y===ke().format("YYYY-MM-DD");return[i.tableBodyCell.value,V(V(V({},s.value.disabled,d.value),s.value.checked,b),i.tableBodyCell4Now.value,x)]}),h=function(g){if(!d.value){var m=zN[g.type];r(m,g)}},v=function(){return l.createVNode(l.Fragment,null,[l.createVNode("div",{class:i.tableBodyCellDisplay.value},[c.value]),l.createVNode("div",{class:i.tableBodyCellCsontent.value},[u.value&&a("cellAppend",void 0,{params:UN({},e.item)})])])};return function(){return e.item&&l.createVNode("td",{class:f.value,onClick:h,ondblclick:h,oncontextmenu:h},[a("cell",void 0,{defaultNode:v(),params:UN({},e.item)})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yge=SO,bge=gd,wge=Array.prototype,xge=wge.splice;function Cge(t,e){for(var n=t?e.length:0,r=n-1;n--;){var a=e[n];if(n==r||a!==i){var i=a;bge(a)?xge.call(t,a,1):yge(t,a)}}return t}var _ge=Cge,Sge=lv,Tge=_ge;function kge(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,a=[],i=t.length;for(e=Sge(e);++r<i;){var o=t[r];e(o,r,t)&&(n.push(o),a.push(r))}return Tge(t,a),n}var Oge=kge;function WN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ege(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Pge=l.defineComponent({name:"TCalendar",props:ls({},sge),setup:function(e,n){var r=n.slots,a=Ut(),i=Qe(Hc),o=i.t,s=i.globalConfig,c=hge(e),u=c.state,d=c.toToday,f=c.checkDayVisible,h=vge(e,u),v=mge(e,u),p=v.cellColHeaders,g=gge(e,u),m=l.computed(function(){if(!e.range||e.range.length<2)return null;var M=$e(e.range,2),$=M[0],U=M[1];return ke($).isBefore(ke(U))?{from:$,to:U}:{from:U,to:$}});function y(M,$){var U=!1;if(m.value&&m.value.from&&m.value.to){var F=ke(m.value.from).year(),j=ke(m.value.to).year();if(M===F){var W=parseInt(ke(m.value.from).format("M"),10);U=$<W}else if(M===j){var H=parseInt(ke(m.value.to).format("M"),10);U=$>H}}return U}function b(){var M,$;if((M=m.value)!==null&&M!==void 0&&M.from&&($=m.value)!==null&&$!==void 0&&$.to){var U=ke(m.value.from).year(),F=ke(m.value.to).year(),j=parseInt(ke(m.value.from).format("M"),10);y(u.curSelectedYear,u.curSelectedMonth)&&(u.curSelectedMonth=u.curSelectedYear===U?j:u.curSelectedYear===F?1:u.curSelectedMonth)}}l.watch(function(){return{year:"".concat(u.curSelectedYear),month:"".concat(u.curSelectedMonth)}},function(M){Re(e.onMonthChange)&&e.onMonthChange(ls({},M)),g.emitControllerChange()});var w={yearSelectOptionList:l.computed(function(){var M=[],$=u.curSelectedYear-10,U=u.curSelectedYear+10;m.value&&m.value.from&&m.value.to&&($=ke(m.value.from).year(),U=ke(m.value.to).year()),$<vp&&($=vp),U<vp&&(U=vp);for(var F=$;F<=U;F++)M.push({value:F,label:o(s.value.yearSelection,{year:F}),disabled:!1});return M}),isYearSelectVisible:l.computed(function(){return g.checkControllerVisible("year")}),isYearSelectDisabled:l.computed(function(){return g.checkControllerDisabled("year","selectProps")}),monthSelectOptionList:l.computed(function(){b();for(var M=[],$=DN;$<=RN;$++){var U=y(u.curSelectedYear,$);M.push({value:$,label:o(s.value.monthSelection,{month:$}),disabled:U})}return M}),isMonthSelectVisible:l.computed(function(){return u.curSelectedMode==="month"&&g.checkControllerVisible("month")}),isMonthSelectDisabled:l.computed(function(){return g.checkControllerDisabled("month","selectProps")})},x={optionList:l.computed(function(){return[{value:"month",label:o(s.value.monthRadio)},{value:"year",label:o(s.value.yearRadio)}]}),isVisible:l.computed(function(){return g.checkControllerVisible("mode")}),isDisabled:l.computed(function(){return g.checkControllerDisabled("mode","radioGroupProps")})},C={text:l.computed(function(){return u.isShowWeekend?o(s.value.hideWeekend):o(s.value.showWeekend)}),vBind:l.computed(function(){var M=g.configData.value.weekend;return u.isShowWeekend?M.hideWeekendButtonProps:M.showWeekendButtonProps}),isVisible:l.computed(function(){return e.theme==="full"&&g.checkControllerVisible("current")&&g.checkControllerVisible("weekend")}),isDisabled:l.computed(function(){var M=u.isShowWeekend?"hideWeekendButtonProps":"showWeekendButtonProps";return g.checkControllerDisabled("weekend",M)})},S={text:l.computed(function(){return u.curSelectedMode==="month"?o(s.value.today):o(s.value.thisMonth)}),vBind:l.computed(function(){var M=g.configData.value.current;return u.curSelectedMode==="month"?M.currentDayButtonProps:M.currentMonthButtonProps}),isVisible:l.computed(function(){return e.theme==="full"&&g.checkControllerVisible("current")}),isDisabled:l.computed(function(){var M=u.curSelectedMode==="month"?"currentDayButtonProps":"currentMonthButtonProps";return g.checkControllerDisabled("current",M)})},_=function(){var $;return l.createVNode("div",{class:h.control.value},[l.createVNode("div",{class:h.title.value},[a("head",void 0,{params:ls({},g.options.value)})]),l.createVNode("div",{class:h.controlSection.value},[w.isYearSelectVisible.value&&l.createVNode("div",{class:h.controlSectionCell.value},[l.createVNode(Jl,l.mergeProps({modelValue:u.curSelectedYear,"onUpdate:modelValue":function(F){return u.curSelectedYear=F},size:u.controlSize,autoWidth:!0},g.configData.value.year.selectProps,{disabled:w.isYearSelectDisabled.value,options:w.yearSelectOptionList.value}),null)]),w.isMonthSelectVisible.value&&l.createVNode("div",{class:h.controlSectionCell.value},[l.createVNode(Jl,l.mergeProps({autoWidth:!0,modelValue:u.curSelectedMonth,"onUpdate:modelValue":function(F){return u.curSelectedMonth=F},size:u.controlSize},g.configData.value.month.selectProps,{disabled:w.isMonthSelectDisabled.value,options:w.monthSelectOptionList.value}),null)]),x.isVisible.value&&l.createVNode("div",{class:h.controlSectionCell.value,style:"height: auto"},[l.createVNode(np,l.mergeProps({modelValue:u.curSelectedMode,"onUpdate:modelValue":function(F){return u.curSelectedMode=F},variant:"default-filled",size:u.controlSize},g.configData.value.mode.radioGroupProps,{disabled:x.isDisabled.value,onChange:g.emitControllerChange}),Ege($=x.optionList.value.map(function(U){return l.createVNode(ib,{key:U.value,value:U.value},{default:function(){return[U.label]}})}))?$:{default:function(){return[$]}})]),C.isVisible.value&&l.createVNode("div",{class:h.controlSectionCell.value},[l.createVNode($E,l.mergeProps({class:h.controlTag.value,theme:u.isShowWeekend?"default":"primary",size:"large"},C.vBind.value,{disabled:C.isDisabled.value,onClick:function(){u.isShowWeekend=!u.isShowWeekend,g.emitControllerChange()}}),{default:function(){return[C.text.value]}})]),S.isVisible.value&&l.createVNode("div",{class:h.controlSectionCell.value},[l.createVNode(zt,l.mergeProps({size:u.controlSize},S.vBind.value,{disabled:S.isDisabled.value,onClick:function(){d()}}),{default:function(){return[S.text.value]}})])])])},O=function($,U,F){if(Re(e[$])){var j={cell:ls(ls({},F),g.options.value),e:U};e[$](j)}},N=function($,U){var F=ke(U.date);e.multiple?u.curDateList.find(function(j){return j.isSame(F)})?u.curDateList=Oge(u.curDateList,function(j){return!j.isSame(F)}):u.curDateList.push(F):u.curDate=F,O("onCellClick",$,U)},B=function($,U){O("onCellDoubleClick",$,U)},T=function($,U){e.preventCellContextmenu&&$.preventDefault(),O("onCellRightClick",$,U)},k=l.computed(function(){var M=fge(e,u);return M}),E=function(){return l.createVNode("table",{class:h.table.value},[l.createVNode("thead",{class:h.tableHead.value},[l.createVNode("tr",{class:h.tableHeadRow.value},[p.value.map(function($,U){return f($.num)&&l.createVNode("th",{class:h.tableHeadCell.value},[Ke(e.week)?e.week[U]:a("week",void 0,{defaultNode:l.createVNode("span",null,[$.display]),params:{day:$.num}})])})])]),l.createVNode("tbody",{class:h.tableBody.value},[k.value.map(function($,U){return l.createVNode("tr",{class:h.tableBodyRow.value},[$.map(function(F,j){return(u.isShowWeekend||F.day<6)&&l.createVNode(HN,{key:"d-".concat(U,"-").concat(j),item:F,theme:e.theme,t:o,global:s.value,cell:e.cell,cellAppend:e.cellAppend,fillWithZero:e.fillWithZero,onClick:function(H){return N(H,F)},onDblclick:function(H){return B(H,F)},onRightclick:function(H){return T(H,F)}},ls({},r))})])})])])},I=l.computed(function(){for(var M=[],$=dge(e,u),U=Math.ceil($.length/MN),F=0,j=1;j<=U;j++){for(var W=[],H=1;H<=MN;H++)W.push($[F]),F+=1;M.push(W)}return M}),A=function(){return l.createVNode("table",{class:h.table.value},[l.createVNode("tbody",{class:h.tableBody.value},[I.value.map(function($,U){return l.createVNode("tr",{class:h.tableBodyRow.value},[$.map(function(F,j){return l.createVNode(HN,{key:"m-".concat(U,"-").concat(j),item:F,theme:e.theme,t:o,global:s.value,cell:e.cell,cellAppend:e.cellAppend,fillWithZero:e.fillWithZero,onClick:function(H){return N(H,F)},onDblclick:function(H){return B(H,F)},onRightclick:function(H){return T(H,F)}},ls({},r))})])})])])};return function(){return l.createVNode("div",{class:h.body.value},[g.visible.value&&_(),l.createVNode("div",{class:h.panel.value},[u.curSelectedMode==="month"?E():A()])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ige=Be(Pge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Age={actions:{type:[String,Function]},avatar:{type:[String,Function]},bordered:{type:Boolean,default:!0},content:{type:[String,Function]},cover:{type:[String,Function]},default:{type:[String,Function]},description:{type:[String,Function]},footer:{type:[String,Function]},header:{type:[String,Function]},headerBordered:Boolean,hoverShadow:Boolean,loading:{type:[Boolean,Function],default:!1},loadingProps:{type:Object},shadow:Boolean,size:{type:String,default:"medium",validator:function(e){return e?["medium","small"].includes(e):!0}},status:{type:String,default:""},subtitle:{type:[String,Function]},theme:{type:String,default:"normal",validator:function(e){return e?["normal","poster1","poster2"].includes(e):!0}},title:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Nge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Dge=l.defineComponent({name:"TCard",props:Age,setup:function(e,n){var r=n.slots,a=We(),i=ve("card"),o=Lt(),s=o.SIZE,c=l.computed(function(){var j=[i.value];return e.size==="small"&&j.push("".concat(s.value[e.size])),e.bordered&&j.push("".concat(i.value,"--bordered")),e.shadow&&j.push("".concat(i.value,"--shadow")),e.hoverShadow&&j.push("".concat(i.value,"--shadow-hover")),j}),u=l.computed(function(){var j=["".concat(i.value,"__header")];return e.headerBordered?j.concat("".concat(i.value,"__title--bordered")):["".concat(i.value,"__header")]}),d=ve("card__header-wrapper"),f=ve("card__avatar"),h=ve("card__title"),v=ve("card__subtitle"),p=ve("card__description"),g=ve("card__actions"),m=ve("card__body"),y=ve("card__cover"),b=ve("card__footer"),w=ve("card__footer-wrapper"),x=l.computed(function(){return e.theme==="poster2"}),C=l.computed(function(){return e.title||r.title}),S=l.computed(function(){return e.header||r.header}),_=l.computed(function(){return e.subtitle||r.subtitle}),O=l.computed(function(){return e.avatar||r.avatar}),N=l.computed(function(){return e.description||r.description}),B=l.computed(function(){return e.status||r.status}),T=l.computed(function(){return e.actions||r.actions}),k=l.computed(function(){return e.footer||r.footer}),E=l.computed(function(){return e.cover||r.cover}),I=l.computed(function(){return e.loading||r.loading}),A=l.computed(function(){return e.content||r.content||e.default||r.default}),M=l.computed(function(){return S.value||C.value||_.value||N.value||O.value||B.value&&x.value||T.value&&!x.value}),$=l.computed(function(){return k.value||T.value&&x.value}),U=function(){return S.value?l.createVNode("div",{class:u.value},[a("header")]):l.createVNode("div",{class:u.value},[l.createVNode("div",{class:d.value},[O.value&&l.createVNode("div",{class:f.value},[a("avatar")]),l.createVNode("div",null,[C.value&&l.createVNode("div",{class:h.value},[a("title")]),_.value&&l.createVNode("div",{class:v.value},[a("subtitle")]),N.value&&l.createVNode("p",{class:p.value},[a("description")])])]),T.value&&!x.value&&l.createVNode("div",{class:g.value},[a("actions")]),B.value&&l.createVNode("div",{class:g.value},[a("status")])])},F=function(){var W=Je(e.cover);return l.createVNode("div",{class:y.value},[W?l.createVNode("img",{src:e.cover},null):a("cover")])};return function(){var j=l.createVNode("div",{class:c.value},[M.value?U():null,E.value?F():null,A.value&&l.createVNode("div",{class:m.value},[a("default")||a("content")]),$.value&&l.createVNode("div",{class:b.value},[l.createVNode("div",{class:w.value},[a("footer")]),T.value&&x.value&&l.createVNode("div",{class:g.value},[a("actions")])])]);return I.value?a("loading")||l.createVNode(lr,e.loadingProps,Nge(j)?j:{default:function(){return[j]}}):j}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Rge=Be(Dge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Mge={actions:{type:Array},author:{type:[String,Function]},avatar:{type:[String,Object,Function]},content:{type:[String,Function]},datetime:{type:[String,Function]},quote:{type:[String,Function]},reply:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Lge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Fge=l.defineComponent({name:"TComment",props:Mge,setup:function(){var e=ve("comment"),n=We();return function(){var r=n("reply"),a=n("author"),i=n("datetime"),o=n("quote"),s=n("actions"),c=n("content"),u=n("avatar"),d=l.computed(function(){return a||i}),f=r?l.createVNode("div",{class:"".concat(e.value,"__reply")},[r]):null,h=o?l.createVNode("div",{class:"".concat(e.value,"__quote")},[o]):null,v=u?l.createVNode("div",{class:"".concat(e.value,"__avatar")},[Je(u)?l.createVNode("img",{src:u,alt:"",class:"".concat(e.value,"__avatar-image")},null):u]):null,p=d.value&&l.createVNode("div",{class:"".concat(e.value,"__author")},[a&&l.createVNode("span",{class:"".concat(e.value,"__name")},[a]),i&&l.createVNode("span",{class:"".concat(e.value,"__time")},[i])]),g=function(){return!s||!s.length?null:l.createVNode("div",{class:"".concat(e.value,"__actions")},[(Ke(s)?s:[s]).map(function(b,w){return l.createVNode(zt,{key:"action-".concat(w),size:"small",variant:"text"},Lge(b)?b:{default:function(){return[b]}})})])},m=l.createVNode("div",{class:"".concat(e.value,"__content")},[p,l.createVNode("div",{class:"".concat(e.value,"__detail")},[c]),h,g()]);return l.createVNode("div",{class:e.value},[l.createVNode("div",{class:"".concat(e.value,"__inner")},[v,m]),f])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bge=Be(Fge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var jge={action:{type:Function},description:{type:[String,Function]},image:{type:[String,Function]},imageStyle:{type:Object},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},title:{type:[String,Function]},type:{type:String,default:"empty",validator:function(e){return e?["empty","success","fail","network-error","maintenance"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $ge=l.defineComponent({name:"MaintenanceSvg",render:function(){return l.createVNode("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("g",{id:"è·¯åµäºä»¶-traffic-events"},[l.createVNode("g",{id:"Subtract"},[l.createVNode("path",{d:"M29.5237 17L24 3.82812L18.4763 17H29.5237Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M31.2011 21H16.7989L13.6699 28.4615H34.3301L31.2011 21Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M36.0076 32.4615H11.9924L9.66997 37.9997H6V41.9997H42V37.9997H38.33L36.0076 32.4615Z",fill:"var(--td-text-color-placeholder)"},null)])])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Uge=l.defineComponent({name:"NetworkErrorSvg",render:function(){return l.createVNode("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("g",{id:"æ ç½ç»-no-network"},[l.createVNode("g",{id:"Union"},[l.createVNode("path",{d:"M26 17V2H22V17H26Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M26.0078 20H22V24.0078H26.0078V20Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M2.75751 13.45C7.29713 9.80916 12.553 7.50276 18 6.53088V28H30V6.53052C35.4475 7.50216 40.7038 9.80854 45.2438 13.4497L46.8021 14.6995L24.0006 43.2016L1.19922 14.6998L2.75751 13.45Z",fill:"var(--td-text-color-placeholder)"},null)])])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zge=l.defineComponent({name:"EmptySvg",render:function(){return l.createVNode("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("g",{id:"æ ç»æ-no-result"},[l.createVNode("g",{id:"Union"},[l.createVNode("path",{d:"M22 0H26V8H22V0Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M10.002 1.17157L7.17353 4L13.002 9.82843L15.8304 7L10.002 1.17157Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 27.4689L10.8394 12H37.1606L46 27.4689V44H2V27.4689ZM13.1606 16L7.44636 26H17.8025L18.1889 27.5015C18.8551 30.0898 21.207 32 24 32C26.793 32 29.1449 30.0898 29.8111 27.5015L30.1975 26H40.5536L34.8394 16H13.1606Z",fill:"var(--td-text-color-placeholder)"},null),l.createVNode("path",{d:"M37.998 1.17157L32.1696 7L34.998 9.82843L40.8265 4L37.998 1.17157Z",fill:"var(--td-text-color-placeholder)"},null)])])])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hge=l.defineComponent({name:"FailSvg",render:function(){return l.createVNode("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6ZM2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24ZM26 13V28H22V13H26ZM22 31H26.0078V35.0078H22V31Z",fill:"#D54941"},null)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wge=l.defineComponent({name:"SuccessSvg",render:function(){return l.createVNode("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l.createVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6C14.0589 6 6 14.0589 6 24C6 33.9411 14.0589 42 24 42ZM46 24C46 36.1503 36.1503 46 24 46C11.8497 46 2 36.1503 2 24C2 11.8497 11.8497 2 24 2C36.1503 2 46 11.8497 46 24ZM21 32.8284L12.1716 24L15 21.1716L21 27.1716L33 15.1716L35.8284 18L21 32.8284Z",fill:"#2BA471"},null)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kge=l.defineComponent({name:"TEmpty",components:{TImage:Di},props:jge,setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.size,o=a.image,s=a.description,c=a.title,u=a.type,d=Qe("empty"),f=d.globalConfig,h=ve("empty"),v=l.computed(function(){return e.action||r.action}),p=Lt(),g=p.SIZE,m=We(),y={maintenance:{image:f.value.image.maintenance||$ge,title:f.value.titleText.maintenance},success:{image:f.value.image.success||Wge,title:f.value.titleText.success},fail:{image:f.value.image.fail||Hge,title:f.value.titleText.fail},"network-error":{image:f.value.image.networkError||Uge,title:f.value.titleText.networkError},empty:{image:f.value.image.empty||zge,title:f.value.titleText.empty}},b=l.computed(function(){return[h.value,g.value[i.value]]}),w=["".concat(h.value,"__title")],x=["".concat(h.value,"__image")],C=["".concat(h.value,"__description")],S=["".concat(h.value,"__action")],_=l.computed(function(){var I;return(I=y[u.value])!==null&&I!==void 0?I:null}),O=l.computed(function(){var I,A;return o.value||(r==null||(I=r.image)===null||I===void 0?void 0:I.call(r))||((A=_.value)===null||A===void 0?void 0:A.image)}),N=l.computed(function(){var I,A;return c.value||(r==null||(I=r.title)===null||I===void 0?void 0:I.call(r))||((A=_.value)===null||A===void 0?void 0:A.title)}),B=l.computed(function(){var I;return s.value||(r==null||(I=r.description)===null||I===void 0?void 0:I.call(r))}),T=function(){return N.value?l.createVNode("div",{class:w},[N.value]):null},k=function(){return B.value?l.createVNode("div",{class:C},[B.value]):null},E=function(){var A=O.value,M=null;return Je(A)?M=l.createVNode(Di,{src:A},null):A&&Reflect.has(A,"render")?M=l.h(A):Hh(A)&&(M=l.createVNode(Di,A,null)),A?M:null};return function(){return l.createVNode("div",{class:b.value},[O.value?l.createVNode("div",{class:x,style:e.imageStyle},[r!=null&&r.image?m("image"):E()]):null,T(),k(),v.value?l.createVNode("div",{class:S},[m("action")]):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var qge=Be(Kge);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gge=1e3,Yge=5e3,Xge=1,Jge=vo(function t(){var e=this;ho(this,t),V(this,"popupStack",{popup:new Set,dialog:new Set,message:new Set}),V(this,"getNextZIndex",function(n){var r=n==="message"?Array.from(e.popupStack.message).pop()||Yge:Array.from(e.popupStack.popup).pop()||Gge;return r+Xge}),V(this,"add",function(n){var r=e.getNextZIndex(n);return e.popupStack[n].add(r),n==="dialog"&&e.popupStack.popup.add(r),r}),V(this,"delete",function(n,r){e.popupStack[r].delete(n),r==="dialog"&&e.popupStack.popup.delete(n)}),V(this,"isLastDialog",function(n){return e.popupStack.dialog.size>1?n===Array.from(e.popupStack.dialog).pop():!0})}),Cb=new Jge;function KN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.visible,r=e.runOnMounted,a=l.ref(0),i=function(){a.value=Cb.add(t)},o=function(){Cb.delete(a.value,t)},s=function(){return Cb.isLastDialog(a.value)};return l.watch(function(){return n==null?void 0:n.value},function(c){c?i():o()},{immediate:!0}),r&&(l.onMounted(function(){i()}),l.onBeforeUnmount(function(){o()})),{zIndex:l.readonly(a),open:i,close:o,isLastDialog:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zge(t){var e=l.ref(t),n=function(i){var o=i.pageX,s=i.pageY,c=e.value,u=c.translateX,d=c.translateY,f=function(p){var g=p.pageX,m=p.pageY;e.value={translateX:u+g-o,translateY:d+m-s}},h=function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)},r=function(){e.value=Qge({},t)};return{transform:e,mouseDownHandler:n,resetTransform:r}}function Vge(){var t=l.ref(1),e=function(){t.value*=-1},n=function(){t.value=1};return{mirror:t,onMirror:e,resetMirror:n}}function eme(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{max:2,min:.5,step:.2},e=t.max,n=t.min,r=t.step,a=t.defaultScale,i=l.ref(a??1),o=ts(function(){var d=Fd(i.value,r);u(d)},50),s=ts(function(){var d=Bd(i.value,r);u(d)},50),c=function(){i.value=a??1},u=function(f){var h=f;f<n&&(h=n),f>e&&(h=e),i.value=h};return l.watch(function(){return t},function(){return c()}),{scale:i,onZoomIn:o,onZoomOut:s,resetScale:c}}function tme(){var t=l.ref(0),e=90,n=function(){t.value+=e},r=function(){t.value=0};return{rotate:t,onRotate:n,resetRotate:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var GN=l.defineComponent({name:"TImageItem",props:{rotate:Number,scale:Number,mirror:Number,src:[String,Object],placementSrc:[String,Object],isSvg:Boolean},setup:function(e){var n=l.toRefs(e),r=n.src,a=n.placementSrc,i=n.isSvg,o=ve(),s=l.ref(!1),c=l.ref(!1),u=Zge({translateX:0,translateY:0}),d=u.transform,f=u.mouseDownHandler,h=Qe("imageViewer"),v=h.globalConfig,p=v.value.errorText,g=l.ref(),m=l.computed(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:!e.placementSrc||c.value?"block":"none"}}),y=l.computed(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:c.value?"none":"block"}}),b=l.computed(function(){var N=d.value,B=N.translateX,T=N.translateY;return{transform:"translate(".concat(B,"px, ").concat(T,"px) scale(").concat(e.mirror,", 1)")}}),w=function(){s.value=!1,c.value=!1,i.value&&x(S.value)},x=function(){var N=fn(mt.mark(function B(T){var k,E,I,A,M,$,U,F,j,W,H,J;return mt.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,fetch(T);case 2:if(E=D.sent,E.ok){D.next=6;break}throw s.value=!0,new Error("Failed to fetch SVG: ".concat(E.statusText));case 6:return D.next=8,E.text();case 8:I=D.sent,A=g.value,A.innerHTML="",(k=A.classList)===null||k===void 0||k.add("".concat(o.value,"-image-viewer__modal-image-svg")),M=A.attachShadow({mode:"closed"}),$=document.createElement("div"),$.style.background="var(--td-bg-color-container)",$.style.padding="4px",$.style.borderRadius="4px",$.style.maxHeight="100%",$.style.maxWidth="100%",$.style.boxSizing="border-box",$.style.height="auto",$.innerHTML=I,M.appendChild($),U=$.querySelector("svg"),U&&(F=U.getAttribute("viewBox"),F?(j=F.split(/[\s\,]/).filter(function(q){return q}).map(parseFloat),W=j[2],$.style.width="".concat(W,"px")):(H=U.getBBox(),J="".concat(H.x," ").concat(H.y," ").concat(H.width," ").concat(H.height),U.setAttribute("viewBox",J),$.style.width="".concat(H.width,"px")),U.style.maxHeight="100%",U.style.maxWidth="100%",U.style.height="auto",U.style.display="block",U.style.lineHeight="normal"),c.value=!0;case 26:case"end":return D.stop()}},B)}));return function(T){return N.apply(this,arguments)}}(),C=Cv(r),S=C.previewUrl,_=Cv(a),O=_.previewUrl;return l.watch([S,O],function(){w()}),l.onMounted(fn(mt.mark(function N(){return mt.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!i.value){T.next=3;break}return T.next=3,x(S.value);case 3:case"end":return T.stop()}},N)}))),function(){return l.createVNode("div",{class:"".concat(o.value,"-image-viewer__modal-pic")},[l.createVNode("div",{class:"".concat(o.value,"-image-viewer__modal-box"),style:b.value},[s.value&&l.createVNode("div",{class:"".concat(o.value,"-image-viewer__img-error")},[l.createVNode("div",{class:"".concat(o.value,"-image-viewer__img-error-content")},[l.createVNode(wT,{size:"4em"},null),l.createVNode("div",{class:"".concat(o.value,"-image-viewer__img-error-text")},[p])])]),!s.value&&!!e.placementSrc&&O.value&&l.createVNode("img",{class:"".concat(o.value,"-image-viewer__modal-image"),onMousedown:function(B){B.stopPropagation(),f(B)},src:O.value,style:y.value,alt:"image",draggable:"false"},null),!s.value&&S.value&&!i.value&&l.createVNode("img",{class:"".concat(o.value,"-image-viewer__modal-image"),onMousedown:function(B){B.stopPropagation(),f(B)},src:S.value,onLoad:function(){return c.value=!0},onError:function(){return s.value=!0},style:m.value,alt:"image",draggable:"false"},null),!s.value&&S.value&&i.value&&l.createVNode("div",{ref:g,class:"".concat(o.value,"-image-viewer__modal-image"),onMousedown:function(B){B.stopPropagation(),f(B)},"data-alt":"svg",style:m.value,draggable:"false"},null)])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Co=l.defineComponent({name:"TImageModalIcon",props:{disabled:Boolean,onClick:Function,label:String,icon:Function},setup:function(e){var n=ve(),r=We(),a=l.computed(function(){return["".concat(n.value,"-image-viewer__modal-icon"),V({},"".concat(n.value,"-is-disabled"),e.disabled)]});return function(){return l.createVNode("div",{class:a.value,onClick:e.onClick},[r("icon"),e.label&&l.createVNode("span",{class:"".concat(n.value,"-image-viewer__modal-icon-label")},[e.label])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var nme={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function,null]},closeBtn:{type:[String,Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function,null]},confirmLoading:{type:Boolean,default:void 0},confirmOnEnter:Boolean,default:{type:[String,Function]},destroyOnClose:Boolean,dialogClassName:{type:String,default:""},dialogStyle:{type:Object},draggable:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"modal",validator:function(e){return e?["modal","modeless","normal","full-screen"].includes(e):!0}},placement:{type:String,default:"top",validator:function(e){return e?["top","center"].includes(e):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(e){return e?["default","info","warning","danger","success"].includes(e):!0}},top:{type:[String,Number]},visible:Boolean,width:{type:[String,Number]},zIndex:{type:Number},onBeforeClose:Function,onBeforeOpen:Function,onCancel:Function,onClose:Function,onCloseBtnClick:Function,onClosed:Function,onConfirm:Function,onEscKeydown:Function,onOpened:Function,onOverlayClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function YN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Wc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _b(t){var e=l.getCurrentInstance(),n=We(),r=function(u){var d,f=u.globalConfirm,h=u.theme,v=u.globalConfirmBtnTheme,p=((d=Sr(v,["info"]))===null||d===void 0?void 0:d[h])||"primary",g={theme:p,size:u.size,onClick:function(y){t.confirmBtnAction(y)}};return Je(f)?g.content=f:ot(f)&&(g=Wc(Wc({},g),f)),g},a=function(u){var d=u.globalCancel,f={theme:"default",size:u.size,onClick:function(v){t.cancelBtnAction(v)}};return Je(d)?f.content=d:ot(d)&&(f=Wc(Wc({},f),d)),f},i=function(u,d){var f=d.defaultButtonProps,h=d.className,v=d.confirmLoading,p=f;return Je(u)?p.content=u:ot(u)&&(p=Wc(Wc({},p),u)),v!==void 0&&(p.loading=v),l.createVNode(zt,l.mergeProps({class:h},p),null)},o=function(u){var d=u.confirmBtn,f=u.className,h=u.confirmLoading;if(d===null)return null;d&&e.slots.confirmBtn&&console.warn("Both $props.confirmBtn and $scopedSlots.confirmBtn exist, $props.confirmBtn is preferred.");var v=r(u);return!d&&!e.slots.confirmBtn?l.createVNode(zt,l.mergeProps({class:f,loading:h},v),null):d&&["string","object"].includes(wt(d))?i(d,{defaultButtonProps:v,className:f,confirmLoading:h}):n("confirmBtn")},s=function(u){var d=u.cancelBtn,f=u.className;if(d===null)return null;d&&e.slots.cancelBtn&&console.warn("Both $props.cancelBtn and $scopedSlots.cancelBtn exist, $props.cancelBtn is preferred.");var h=a(u);return!d&&!e.slots.cancelBtn?l.createVNode(zt,l.mergeProps({class:f},h),null):d&&["string","object"].includes(wt(d))?i(d,{defaultButtonProps:h}):n("cancelBtn")};return{getConfirmBtn:o,getCancelBtn:s}}function rme(t){var e=!1,n=!1,r=function(s){e&&n&&t(s),e=!1,n=!1},a=function(s){e=s.target===s.currentTarget},i=function(s){n=s.target===s.currentTarget};return{onClick:r,onMousedown:a,onMouseup:i}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ame(){var t=6;if(typeof navigator>"u"||!navigator||/(Chrome|Safari)/i.test(navigator.userAgent))return t;var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),/Firefox/.test(navigator.userAgent)&&(n-=4),oo()<=11&&(n=12),n}function XN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body;return t===document.body?window.innerWidth-document.documentElement.clientWidth:t.offsetWidth-t.clientWidth}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function JN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function QN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JN(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZN(t){return Number.isNaN(Number(t))?t:"".concat(Number(t),"px")}var Yd,ime=function(e){Yd={x:e.clientX,y:e.clientY},setTimeout(function(){Yd=null},100)};typeof window<"u"&&window.document&&window.document.documentElement&&document.documentElement.addEventListener("click",ime,!0);function ome(t){var e=t,n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;e.addEventListener("mousedown",function(a){var i=a.clientX-e.offsetLeft,o=a.clientY-e.offsetTop,s=e.offsetWidth,c=e.offsetHeight;if(s>n||c>r)return;function u(f){var h=f.clientX-i,v=f.clientY-o;h<0&&(h=0),v<0&&(v=0),n-e.offsetWidth-h<0&&(h=n-e.offsetWidth),r-e.offsetHeight-v<0&&(v=r-e.offsetHeight),e.style.position="absolute",e.style.left="".concat(h,"px"),e.style.top="".concat(v,"px")}function d(){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)}document.addEventListener("mousemove",u),document.addEventListener("mouseup",d),document.addEventListener("dragend",d)})}var lme=1,VN=l.defineComponent({name:"TDialog",directives:{draggable:function(e,n){e&&n&&n.value&&ome(e)}},inheritAttrs:!1,props:nme,emits:["update:visible"],setup:function(e,n){var r=this,a=ve("dialog"),i=ve(),o=Ut(),s=We(),c=l.ref(null),u=Qe("dialog"),d=u.globalConfig,f=St({CloseIcon:Za,InfoCircleFilledIcon:kd,CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki}),h=f.CloseIcon,v=f.InfoCircleFilledIcon,p=f.CheckCircleFilledIcon,g=f.ErrorCircleFilledIcon,m=function(Se){var Ne;(Ne=e.onConfirm)===null||Ne===void 0||Ne.call(e,{e:Se})},y=function(Se){var Ne;(Ne=e.onCancel)===null||Ne===void 0||Ne.call(e,{e:Se}),ce({e:Se,trigger:"cancel"})},b=_b({confirmBtnAction:m,cancelBtnAction:y}),w=b.getConfirmBtn,x=b.getCancelBtn,C=ov(function(){return e.attach});lO();var S=l.ref(),_=l.ref(),O=l.computed(function(){return e.mode==="modal"}),N=l.computed(function(){return e.mode==="modeless"}),B=l.computed(function(){return e.mode==="normal"}),T=l.computed(function(){return e.mode==="full-screen"}),k=l.computed(function(){return e.visible}),E=l.computed(function(){return["".concat(a.value,"__mask"),!e.showOverlay&&"".concat(i.value,"-is-hidden")]}),I=l.computed(function(){return B.value?[]:T.value?["".concat(a.value,"__position_fullscreen")]:["".concat(a.value,"__position"),!!e.top&&"".concat(a.value,"--top"),"".concat(e.placement&&!e.top?"".concat(a.value,"--").concat(e.placement):"")]}),A=l.computed(function(){return[!B.value&&"".concat(a.value,"__wrap")]}),M=l.computed(function(){if(T.value)return{};var be=e.top,Se={};if(be!==void 0){var Ne=ZN(be);Se={paddingTop:Ne}}return Se}),$=l.computed(function(){var be=["".concat(a.value),"".concat(a.value,"__modal-").concat(e.theme),N.value&&e.draggable&&"".concat(a.value,"--draggable"),e.dialogClassName];return T.value?be.push("".concat(a.value,"__fullscreen")):be.push.apply(be,["".concat(a.value,"--default"),"".concat(a.value,"--").concat(e.placement)]),be}),U=l.computed(function(){return T.value?QN({},e.dialogStyle):QN({width:ZN(e.width)},e.dialogStyle)}),F=KN("dialog",{visible:k}),j=F.isLastDialog;l.watch(function(){return e.visible},function(be){if(be){var Se;(O.value&&!e.showInAttachedElement||T.value)&&(e.preventScrollThrough&&document.body.appendChild(_.value),l.nextTick(function(){Yd&&c.value&&(c.value.style.transformOrigin="".concat(Yd.x-c.value.offsetLeft,"px ").concat(Yd.y-c.value.offsetTop,"px"))})),(Se=document.activeElement)===null||Se===void 0||Se.blur()}else H();J(be)});function W(){var be,Se;(be=_.value.parentNode)===null||be===void 0||(Se=be.removeChild)===null||Se===void 0||Se.call(be,_.value)}function H(){clearTimeout(S.value),S.value=setTimeout(function(){W()},150)}var J=function(Se){Se?(document.addEventListener("keydown",D),e.confirmOnEnter&&document.addEventListener("keydown",Y)):(document.removeEventListener("keydown",D),e.confirmOnEnter&&document.removeEventListener("keydown",Y))},Y=function(Se){var Ne=Se.target;if(Ne.tagName.toLowerCase()!=="input"){var Ae=Se.code;if((Ae==="Enter"||Ae==="NumpadEnter")&&j()){var Pe;(Pe=e.onConfirm)===null||Pe===void 0||Pe.call(e,{e:Se})}}},D=function(Se){if(Se.code==="Escape"&&j()){var Ne,Ae;(Ne=e.onEscKeydown)===null||Ne===void 0||Ne.call(e,{e:Se}),((Ae=e.closeOnEscKeydown)!==null&&Ae!==void 0?Ae:d.value.closeOnEscKeydown)&&ce({e:Se,trigger:"esc"})}},q=function(Se){var Ne;if(e.showOverlay&&((Ne=e.closeOnOverlayClick)!==null&&Ne!==void 0?Ne:d.value.closeOnOverlayClick)){var Ae;(Ae=e.onOverlayClick)===null||Ae===void 0||Ae.call(e,{e:Se}),ce({e:Se,trigger:"overlay"})}},z=rme(q),K=z.onClick,P=z.onMousedown,R=z.onMouseup,X=function(Se){var Ne;(Ne=e.onCloseBtnClick)===null||Ne===void 0||Ne.call(e,{e:Se}),ce({trigger:"close-btn",e:Se})},ee=function(){var Se;(Se=e.onBeforeOpen)===null||Se===void 0||Se.call(e)},re=function(){var Se;(Se=e.onOpened)===null||Se===void 0||Se.call(e)},ae=function(){var Se;(Se=e.onBeforeClose)===null||Se===void 0||Se.call(e)},oe=function(){var Se;N.value&&e.draggable&&c.value&&(c.value.style.position="relative",c.value.style.left="unset",c.value.style.top="unset"),(Se=e.onClosed)===null||Se===void 0||Se.call(e)},ce=function(Se){var Ne;(Ne=e.onClose)===null||Ne===void 0||Ne.call(e,Se),n.emit("update:visible",!1)},ge=function(Se){var Ne,Ae=(Ne=r._events)===null||Ne===void 0?void 0:Ne[Se];return!!(Ae!=null&&Ae.length)},pe=function(){var Se={info:l.createVNode(v,{class:"".concat(i.value,"-is-info")},null),warning:l.createVNode(g,{class:"".concat(i.value,"-is-warning")},null),danger:l.createVNode(g,{class:"".concat(i.value,"-is-error")},null),success:l.createVNode(p,{class:"".concat(i.value,"-is-success")},null)};return Se[e.theme]},_e=function(){var Se=l.createVNode("h5",{class:"title"},null),Ne=l.createVNode(h,null,null),Ae=o("default","body"),Pe=l.createVNode("div",null,[x({cancelBtn:e.cancelBtn,globalCancel:d.value.cancel,className:"".concat(a.value,"__cancel")}),w({theme:e.theme,confirmBtn:e.confirmBtn,globalConfirm:d.value.confirm,globalConfirmBtnTheme:d.value.confirmBtnTheme,className:"".concat(a.value,"__confirm"),confirmLoading:e.confirmLoading})]),Me=s("header",Se),me=s("footer",Pe),ie=T.value?["".concat(a.value,"__header"),"".concat(a.value,"__header--fullscreen")]:"".concat(a.value,"__header"),ye=T.value?["".concat(a.value,"__close"),"".concat(a.value,"__close--fullscreen")]:"".concat(a.value,"__close"),Ce=e.theme==="default"?["".concat(a.value,"__body")]:["".concat(a.value,"__body__icon")];T.value&&me?Ce.push("".concat(a.value,"__body--fullscreen")):T.value&&Ce.push("".concat(a.value,"__body--fullscreen--without-footer"));var Ge=T.value?["".concat(a.value,"__footer"),"".concat(a.value,"__footer--fullscreen")]:"".concat(a.value,"__footer"),Le=function(Ue){N.value&&e.draggable&&Ue.stopPropagation()};return l.createVNode("div",{class:A.value},[l.createVNode("div",{class:I.value,style:M.value,onClick:K,onMousedown:P,onMouseup:R},[l.withDirectives(l.createVNode("div",{key:"dialog",class:$.value,style:U.value,ref:c},[(Me||Me===0||e.closeBtn)&&l.createVNode("div",{class:ie,onMousedown:Le},[l.createVNode("div",{class:"".concat(a.value,"__header-content")},[pe(),Me]),e.closeBtn?l.createVNode("span",{class:ye,onClick:X},[s("closeBtn",Ne)]):null]),l.createVNode("div",{class:Ce,onMousedown:Le},[Ae]),me&&l.createVNode("div",{class:Ge,onMousedown:Le},[me])]),[[l.resolveDirective("draggable"),N.value&&e.draggable]])])])};return l.onMounted(function(){var be=document.documentElement.scrollHeight>document.documentElement.clientHeight,Se=be?XN():0;_.value=document.createElement("style"),_.value.dataset.id="td_dialog_".concat(+new Date,"_").concat(lme+=1),_.value.innerHTML=`
        html body {
          overflow-y: hidden;
          width: calc(100% - `.concat(Se,`px);
        }
      `)}),l.onBeforeUnmount(function(){J(!1),W()}),{COMPONENT_NAME:a,isModal:O,isModeLess:N,isFullScreen:T,maskClass:E,dialogClass:$,dialogStyle:U,dialogEle:c,beforeEnter:ee,afterEnter:re,beforeLeave:ae,afterLeave:oe,hasEventOn:ge,renderDialog:_e,teleportElement:C}},render:function(){var e=this,n=this.COMPONENT_NAME,r=(this.isModal||this.isFullScreen)&&l.createVNode("div",{key:"mask",class:this.maskClass},null),a=this.renderDialog(),i=[r,a],o={zIndex:this.zIndex},s=["".concat(n,"__ctx"),V(V(V({},"".concat(n,"__ctx--fixed"),this.isModal||this.isFullScreen),"".concat(n,"__ctx--absolute"),this.isModal&&this.showInAttachedElement),"".concat(n,"__ctx--modeless"),this.isModeLess)];return l.createVNode(l.Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[l.createVNode(l.Transition,{duration:300,name:"".concat(n,"-zoom__vue"),onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:function(){return[(!e.destroyOnClose||e.visible)&&l.withDirectives(l.createVNode("div",l.mergeProps({class:s,style:o},e.$attrs),[i]),[[l.vShow,e.visible]])]}})]}})}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Xd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pp=function(e){var n=Xd({},e),r=document.createElement("div"),a=l.ref(!1),i=n.className,o=n.style,s=i,c=function(g,m){if(g){if(s&&s!==g){var y;(y=r.firstElementChild.classList).remove.apply(y,Ee(s.split(" ").map(function(b){return b.trim()})))}g.split(" ").forEach(function(b){r.firstElementChild.classList.add(b.trim())})}m&&(r.firstElementChild.style.cssText+=m),s=g},u=l.defineComponent({setup:function(g,m){var y=m.expose,b=l.ref(n);l.onMounted(function(){a.value=!0,document.activeElement.blur(),l.nextTick(function(){c(i,o)})});var w=function(C){b.value=Xd(Xd({},n),C)};return y({update:w}),function(){var x=n.onClose||function(){a.value=!1};return delete n.className,delete n.style,l.h(VN,Xd({onClose:x,visible:a.value},b.value))}}}),d=l.createApp(u),f=d.mount(r),h=dc(n.attach);h?h.appendChild(r):console.error("attach is not exist");var v={show:function(){a.value=!0},hide:function(){a.value=!1},update:function(g){f.update(Sr(g,["className","style"])),c(g.className,g.style)},destroy:function(){a.value=!1,setTimeout(function(){d.unmount(),r.remove()},300)},setConfirmLoading:function(g){f.update({confirmLoading:g})}};return v},sme=function(e){return pp(e)},cme=function(e){var n=Xd({},e);return n.cancelBtn=null,pp(n)},gp={confirm:sme,alert:cme},mp=pp;mp.install=function(t){t.config.globalProperties.$dialog=pp,Object.keys(gp).forEach(function(e){t.config.globalProperties.$dialog[e]=gp[e]})},Object.keys(gp).forEach(function(t){mp[t]=gp[t]});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var t5=Be(VN);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jd={attach:{type:[String,Function],default:"body"},closeBtn:{type:[Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:!0},closeOnOverlay:Boolean,draggable:{type:Boolean,default:void 0},imageScale:{type:Object},images:{type:Array,default:function(){return[]}},index:{type:Number,default:void 0},defaultIndex:{type:Number,default:0},mode:{type:String,default:"modal",validator:function(e){return e?["modal","modeless"].includes(e):!0}},navigationArrow:{type:[Boolean,Function],default:!0},showOverlay:{type:Boolean,default:void 0},title:{type:[String,Function]},trigger:{type:[String,Function]},viewerScale:{type:Object},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onClose:Function,onIndexChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function n5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ume(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var dme=function(e){var n,r,a,i=new Image,o=(e==null||(n=e.split)===null||n===void 0||(n=n.call(e,"?"))===null||n===void 0||(n=n[0])===null||n===void 0||(r=n.split)===null||r===void 0||(r=r.call(n,"#"))===null||r===void 0||(r=r[0])===null||r===void 0||(a=r.split)===null||a===void 0?void 0:a.call(r,"/").pop())||Math.random().toString(32).slice(2);i.setAttribute("crossOrigin","anonymous"),i.onload=function(){var s=document.createElement("canvas");s.width=i.width,s.height=i.height;var c=s.getContext("2d");c.drawImage(i,0,0,i.width,i.height),s.toBlob(function(u){var d=URL.createObjectURL(u),f=document.createElement("a");f.download=o,f.href=d,f.click(),f.remove(),URL.revokeObjectURL(d)})},i.src=e},fme=function(e){return!!e&&!Je(e)&&!(e instanceof File)},hme=function(e){return Ke(e)?e.map(function(n){return fme(n)?ume({download:!0,thumbnail:n.mainImage},n):{mainImage:n,thumbnail:n,download:!0}}):[]},vme=function(e){return e.showOverlay!==void 0?e.showOverlay:e.mode==="modal"};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var r5=l.defineComponent({name:"TImageViewerUtils",props:{scale:Number,onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,currentImage:{type:Object,default:function(){return{}}}},setup:function(e){var n=ve(),r=l.computed(function(){return e.currentImage.mainImage}),a=Cv(r),i=a.previewUrl,o=Qe("imageViewer"),s=o.globalConfig;return function(){return l.createVNode("div",{class:"".concat(n.value,"-image-viewer__utils")},[l.createVNode("div",{class:"".concat(n.value,"-image-viewer__utils-content")},[l.createVNode(Tr,{overlayClassName:"".concat(n.value,"-image-viewer__utils--tip"),content:s.value.mirrorTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[l.createVNode(Co,{onClick:e.onMirror,icon:function(){return l.createVNode(yee,{size:"medium"},null)}},null)]}}),l.createVNode(Tr,{overlayClassName:"".concat(n.value,"-image-viewer__utils--tip"),content:s.value.rotateTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[l.createVNode(Co,{onClick:e.onRotate,icon:function(){return l.createVNode(kee,{size:"medium"},null)}},null)]}}),l.createVNode(Co,{icon:function(){return l.createVNode(Wee,{size:"medium"},null)},onClick:e.onZoomOut},null),l.createVNode(Co,{class:"".concat(n.value,"-image-viewer__utils-scale"),size:"medium",label:"".concat(Ov(String(e.scale*100)),"%")},null),l.createVNode(Co,{icon:function(){return l.createVNode(zee,{size:"medium"},null)},onClick:e.onZoomIn},null),l.createVNode(Tr,{overlayClassName:"".concat(n.value,"-image-viewer__utils--tip"),content:s.value.originalSizeTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[l.createVNode("div",{class:"".concat(n.value,"-image-viewer__modal-icon")},[l.createVNode(Co,{icon:function(){return l.createVNode(_T,{size:"medium"},null)},onClick:e.onReset},null)])]}}),e.currentImage.download&&l.createVNode(Co,{icon:function(){return l.createVNode(HV,{size:"medium"},null)},onClick:function(){dme(i.value)}},null)])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var pme=l.defineComponent({name:"TImageViewerModal",props:{zIndex:Number,visible:Boolean,index:Number,images:Jd.images,scale:Number,rotate:Number,mirror:Number,title:Jd.title,currentImage:{type:Object,default:function(){return{}}},onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,onClose:Jd.onClose,draggable:{type:Boolean,default:!0},viewerScale:{type:Object,default:function(){return{}}},showOverlay:Boolean,closeBtn:Jd.closeBtn},setup:function(e){var n=ve(),r=We(),a=l.computed(function(){return{minWidth:e.viewerScale.minWidth,minHeight:e.viewerScale.minHeight}});return function(){return l.createVNode(t5,{destroyOnClose:!0,attach:"body",onClose:e.onClose,visible:e.visible,placement:"center",mode:"modeless",width:1e3,cancelBtn:null,confirmBtn:null,draggable:e.draggable,zIndex:e.zIndex,showOverlay:e.showOverlay,class:"".concat(n.value,"-image-viewer__dialog"),header:r("title",""),footer:function(){return l.createVNode("div",{class:"".concat(n.value,"-image-viewer-mini__footer")},[l.createVNode(r5,{onZoomIn:e.onZoomIn,onZoomOut:e.onZoomOut,scale:e.scale,currentImage:e.currentImage,onRotate:e.onRotate,onMirror:e.onMirror,onReset:e.onReset},null)])}},{default:function(){return[l.createVNode("div",{class:"".concat(n.value,"-image-viewer-mini__content"),style:a.value},[l.createVNode(GN,{rotate:e.rotate,scale:e.scale,mirror:e.mirror,src:e.currentImage.mainImage,placementSrc:e.currentImage.thumbnail,isSvg:e.currentImage.isSvg},null)])]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kc=function(t){return t.left="ArrowLeft",t.up="ArrowUp",t.right="ArrowRight",t.down="ArrowDown",t.esc="Escape",t}(Kc||{});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function a5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mme=l.defineComponent({name:"TImageViewer",props:gme({},Jd),setup:function(e){var n,r=ve(),a=ve("image-viewer"),i=We(),o=l.ref(!0),s=l.computed(function(){return vme(e)}),c=l.toRefs(e),u=c.index,d=c.visible,f=c.modelValue,h=gn(u,(n=e.defaultIndex)!==null&&n!==void 0?n:0,e.onIndexChange,"index"),v=$e(h,2),p=v[0],g=v[1],m=Mt(d,f,e.defaultVisible,function(){},"visible"),y=$e(m,2),b=y[0],w=y[1],x=l.ref(!0),C=l.ref(),S=ov(function(){return e.attach}),_=l.computed(function(){return[a.value,"".concat(a.value,"-preview-image"),V({},"".concat(r.value,"-is-hide"),!b.value)]}),O=l.computed(function(){return["".concat(r.value,"-image-viewer__modal-header"),V({},"".concat(r.value,"-is-show"),o.value)]}),N=l.computed(function(){var Ae;return(Ae=e.zIndex)!==null&&Ae!==void 0?Ae:2600}),B=function(){o.value=!o.value},T=Vge(),k=T.mirror,E=T.onMirror,I=T.resetMirror,A=eme(e.imageScale),M=A.scale,$=A.onZoomIn,U=A.onZoomOut,F=A.resetScale,j=tme(),W=j.rotate,H=j.onRotate,J=j.resetRotate,Y=function(){I(),F(),J()},D=l.computed(function(){return hme(e.images)}),q=l.computed(function(){var Ae;return(Ae=D.value[p.value])!==null&&Ae!==void 0?Ae:{mainImage:""}}),z=KN("dialog",{visible:b}),K=z.isLastDialog,P=function(){var Pe=p.value-1;Y(),g(Pe<0?0:Pe,{trigger:"prev"})},R=function(){var Pe=p.value+1;Y(),g(Pe>=D.value.length?p.value:Pe,{trigger:"next"})},X=function(Pe){g(Pe,{trigger:"current"})},ee=function(){w(!0)},re=function(Pe){var Me;w(!1),(Me=e.onClose)===null||Me===void 0||Me.call(e,Pe)},ae=function(Pe){re({e:Pe,trigger:"close-btn"})},oe=function(Pe){e.closeOnOverlay&&re({e:Pe,trigger:"overlay"})},ce=function(Pe){switch(Pe.stopPropagation(),Pe.code){case Kc.left:P();break;case Kc.right:R();break;case Kc.up:$();break;case Kc.down:U();break;case Kc.esc:e.closeOnEscKeydown&&K()&&re({e:Pe,trigger:"esc"});break}},ge=l.ref();l.watch(function(){return b.value},function(Ae){clearTimeout(C.value),Ae?(x.value=!1,l.nextTick().then(function(){var Pe,Me;(Pe=ge.value)===null||Pe===void 0||(Me=Pe.focus)===null||Me===void 0||Me.call(Pe)}),Y()):C.value=setTimeout(function(){x.value=!0},200)});var pe=function(Pe){Pe.preventDefault();var Me=Pe.deltaY;Me>0?U():$()},_e=l.computed(function(){return{transform:"translateX(calc(-".concat(p.value," * (40px / 9 * 16 + 4px)))")}}),be=function(){return l.createVNode("div",{class:O.value},[l.createVNode(Co,{icon:function(){return l.createVNode(dv,null,null)},class:"".concat(a.value,"__header-pre-bt"),onClick:B},null),l.createVNode("div",{class:"".concat(a.value,"__header-prev")},[l.createVNode("div",{class:"".concat(a.value,"__header-trans"),style:_e.value},[D.value.map(function(Pe,Me){return l.createVNode("div",{key:Me,class:["".concat(a.value,"__header-box"),V({},"".concat(r.value,"-is-active"),Me===p.value)]},[l.createVNode(Di,{src:Pe.thumbnail||Pe.mainImage,error:"",className:"".concat(a.value,"__header-img"),onClick:function(){return X(Me)}},null)])})])])])},Se=function(Pe){var Me=Pe==="prev"?0:180,me=i("navigationArrow",l.createVNode(pc,{style:{transform:"rotate(".concat(Me,"deg)")},size:"24px"},null));return l.createVNode(Co,{class:"".concat(a.value,"__modal-").concat(Pe,"-bt"),onClick:Pe==="prev"?P:R,icon:function(){return me}},null)},Ne=function(){if(e.closeBtn!==!1)return l.createVNode("div",{class:["".concat(a.value,"__modal-icon"),"".concat(a.value,"__modal-close-bt")],onClick:ae},[i("closeBtn",l.createVNode(Za,{size:"24px"},null))])};return function(){return e.mode==="modeless"?l.createVNode(l.Fragment,null,[i("trigger",{params:{open:ee}}),l.createVNode(pme,{zIndex:N.value,visible:b.value,index:p.value,images:D.value,scale:M.value,rotate:W.value,mirror:k.value,currentImage:q.value,onRotate:H,onZoomIn:$,onZoomOut:U,onMirror:E,onReset:Y,onClose:re,draggable:e.draggable,showOverlay:s.value,title:e.title},null)]):l.createVNode(l.Fragment,null,[i("trigger",{params:{open:ee}}),l.createVNode(l.Teleport,{disabled:!e.attach||!S.value,to:S.value},{default:function(){return[l.createVNode(l.Transition,null,{default:function(){return[(b.value||!x.value)&&l.withDirectives(l.createVNode("div",{ref:ge,class:_.value,style:{zIndex:N.value},onWheel:pe,tabindex:-1,onKeydown:ce},[!!s.value&&l.createVNode("div",{class:"".concat(a.value,"__modal-mask"),onClick:oe},null),D.value.length>1&&l.createVNode(l.Fragment,null,[be(),l.createVNode("div",{class:"".concat(a.value,"__modal-index")},[e.title&&i("title"),"".concat(p.value+1,"/").concat(D.value.length)]),Se("prev"),Se("next")]),Ne(),l.createVNode(r5,{onZoomIn:$,onZoomOut:U,onMirror:E,onReset:Y,onRotate:H,scale:M.value,currentImage:q.value},null),l.createVNode(GN,{scale:M.value,rotate:W.value,mirror:k.value,src:q.value.mainImage,placementSrc:q.value.thumbnail,isSvg:q.value.isSvg},null)]),[[l.vShow,b.value]])]}})]}})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yp=Be(mme);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var yme={action:{type:[String,Function]},content:{type:[String,Function]},default:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var i5=l.defineComponent({name:"TListItem",props:yme,setup:function(){var e=ve("list-item"),n=We();return function(){var r=n("content"),a=n("default"),i=n("action");return l.createVNode("li",{class:e.value},[l.createVNode("div",{class:"".concat(e.value,"-main")},[a||r,i&&l.createVNode("li",{class:"".concat(e.value,"__action")},[i])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var bme={asyncLoading:{type:[String,Function]},footer:{type:[String,Function]},header:{type:[String,Function]},layout:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},scroll:{type:Object},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},split:Boolean,stripe:Boolean,onLoadMore:Function,onScroll:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var o5="load-more",wme="loading";/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function l5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function s5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xme(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Cme(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function Cme(t,e){if(t){if(typeof t=="string")return c5(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c5(t,e):void 0}}function c5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var _me=function(){var e=co(),n=l.computed(function(){var r=[],a=e("ListItem");if(Ke(a)){var i=xme(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;r.push(s5(s5({},s.props),{},{slots:s.children}))}}catch(c){i.e(c)}finally{i.f()}}return r});return{listItems:n}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function u5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function d5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Sme=function(e,n,r){var a=l.computed(function(){return{data:r.value,scroll:e}}),i=sb(n,a),o=l.computed(function(){return i.isVirtualScroll.value}),s=-1,c=function(v){var p=v.target||v.srcElement,g=p.scrollTop;s!==g?i.isVirtualScroll.value&&i.handleScroll():s=-1,s=g},u=l.computed(function(){return{position:"absolute",width:"1px",height:"1px",transition:"transform 0.2s",transform:"translate(0, ".concat(i.scrollHeight.value,"px)"),"-ms-transform":"translate(0, ".concat(i.scrollHeight.value,"px)"),"-moz-transform":"translate(0, ".concat(i.scrollHeight.value,"px)"),"-webkit-transform":"translate(0, ".concat(i.scrollHeight.value,"px)")}}),d=l.computed(function(){return{transform:"translate(0, ".concat(i.translateY.value,"px)"),"-ms-transform":"translate(0, ".concat(i.translateY.value,"px)"),"-moz-transform":"translate(0, ".concat(i.translateY.value,"px)"),"-webkit-transform":"translate(0, ".concat(i.translateY.value,"px)")}}),f=function(v){var p=v.index,g=v.key,m=p===0?p:p??Number(g);if(!m&&m!==0){st.error("List","scrollTo: `index` or `key` must exist.");return}if(m<0||m>=r.value.length){st.error("List","".concat(m," does not exist in data, check `index` or `key` please."));return}i.scrollToElement(d5(d5({},v),{},{index:m-1}))};return{virtualConfig:i,cursorStyle:u,listStyle:d,isVirtualScroll:o,onInnerVirtualScroll:c,scrollToElement:f}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function f5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var kme=l.defineComponent({name:"TList",props:Tme({},bme),setup:function(e){var n=l.ref(),r=Qe("list"),a=r.globalConfig,i=ve("list"),o=Lt(),s=o.SIZE,c=We(),u=_me(),d=u.listItems,f=Sme(e.scroll,n,d),h=f.virtualConfig,v=f.cursorStyle,p=f.listStyle,g=f.isVirtualScroll,m=f.onInnerVirtualScroll,y=f.scrollToElement,b=l.computed(function(){return["".concat(i.value),s.value[e.size],V(V(V({},"".concat(i.value,"--split"),e.split),"".concat(i.value,"--stripe"),e.stripe),"".concat(i.value,"--vertical-action"),e.layout==="vertical")]}),w=function(){var N=c("header"),B=c("footer"),T=h.isVirtualScroll.value;return l.createVNode(l.Fragment,null,[N?l.createVNode("div",{class:"".concat(i.value,"__header")},[N]):null,T?l.createVNode(l.Fragment,null,[l.createVNode("div",{style:v.value},null),l.createVNode("ul",{class:"".concat(i.value,"__inner"),style:p.value},[h.visibleData.value.map(function(k){return l.createVNode(l.Fragment,null,[l.createVNode(i5,Sr(k,"slots"),k.slots)])})])]):l.createVNode("ul",{class:"".concat(i.value,"__inner")},[c("default")]),B?l.createVNode("div",{class:"".concat(i.value,"__footer")},[B]):null])},x=function(N){var B,T=N.target,k=T.scrollTop,E=T.scrollHeight,I=T.clientHeight;g.value&&m(N),(B=e.onScroll)===null||B===void 0||B.call(e,{e:N,scrollTop:k,scrollBottom:E-I-k})},C=l.computed(function(){return Je(e.asyncLoading)&&["loading","load-more"].includes(e.asyncLoading)?"".concat(i.value,"__load ").concat(i.value,"__load--").concat(e.asyncLoading):"".concat(i.value,"__load")}),S=function(){if(e.asyncLoading&&Je(e.asyncLoading)){if(e.asyncLoading===wme)return l.createVNode("div",null,[l.createVNode(lr,null,null),l.createVNode("span",null,[a.value.loadingText])]);if(e.asyncLoading===o5)return l.createVNode("span",null,[a.value.loadingMoreText])}return c("asyncLoading")},_=function(N){var B;Je(e.asyncLoading)&&e.asyncLoading!==o5||(B=e.onLoadMore)===null||B===void 0||B.call(e,{e:N})};return{COMPONENT_NAME:i,listClass:b,loadingClass:C,renderLoading:S,renderContent:w,handleScroll:x,handleLoadMore:_,listRef:n,isVirtualScroll:g,scrollTo:y}},render:function(){var e=this.renderContent();return e=[e,l.createVNode("div",{class:this.loadingClass,onClick:this.handleLoadMore},[this.renderLoading()])],l.createVNode("div",{class:this.listClass,onScroll:this.handleScroll,ref:"listRef",style:this.isVirtualScroll?"position:relative":void 0},[e])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ome={avatar:{type:[String,Function]},description:{type:[String,Function]},image:{type:[String,Function]},title:{type:[String,Function]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Eme=l.defineComponent({name:"TListItemMeta",props:Ome,setup:function(e,n){var r=ve("list-item__meta"),a=Ut(),i=We(),o=function(){(e.avatar||n.slots.avatar)&&console.warn("`avatar` is going to be deprecated, please use `image` instead");var c=a("avatar","image");if(c)return Je(c)?l.createVNode("div",{class:"".concat(r.value,"-avatar")},[l.createVNode("img",{src:c},null)]):l.createVNode("div",{class:"".concat(r.value,"-avatar")},[c])};return function(){var s=i("title"),c=i("description"),u=[o(),l.createVNode("div",{class:"".concat(r.value,"-content")},[s&&l.createVNode("h3",{class:"".concat(r.value,"-title")},[s]),c&&l.createVNode("p",{class:"".concat(r.value,"-description")},[c])])];return l.createVNode("div",{class:r.value},[u])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Pme=Be(kme),Ime=Be(i5),Ame=Be(Eme);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var qc={LINE:"line",PLUMP:"plump",CIRCLE:"circle"},bp={SMALL:"small",MEDIUM:"medium",LARGE:"large"},_o={SMALL:72,MEDIUM:112,LARGE:160},Sb={SMALL:14/_o.SMALL,MEDIUM:20/_o.MEDIUM,LARGE:36/_o.LARGE},Nme=["success","error","warning"];/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Dme={color:{type:[String,Object,Array],default:""},label:{type:[String,Boolean,Function],default:!0},percentage:{type:Number,default:0},size:{type:[String,Number],default:"medium"},status:{type:String,validator:function(e){return e?["success","error","warning","active"].includes(e):!0}},strokeWidth:{type:[String,Number]},theme:{type:String,default:"line",validator:function(e){return e?["line","plump","circle"].includes(e):!0}},trackColor:{type:String,default:""}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Rme=l.defineComponent({name:"TProgress",props:Dme,setup:function(e){var n=We(),r=ve("progress"),a=St({CloseCircleFilledIcon:gc,CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki,CloseIcon:Za,CheckIcon:K0,ErrorIcon:JV}),i=a.CloseCircleFilledIcon,o=a.CheckCircleFilledIcon,s=a.ErrorCircleFilledIcon,c=a.CloseIcon,u=a.CheckIcon,d=a.ErrorIcon,f=l.computed(function(){return!e.status&&e.percentage>=100?"success":e.status||"default"}),h=l.computed(function(){var O={};if(e.strokeWidth){var N=Je(e.strokeWidth)?e.strokeWidth:"".concat(e.strokeWidth,"px");O.height=N,O.borderRadius=N}return e.trackColor&&(O.backgroundColor=e.trackColor),O}),v=l.computed(function(){return{width:"".concat(e.percentage,"%"),background:e.color&&cie(e.color)}}),p=l.computed(function(){var O=ot(e.color)?"":e.color;return{stroke:O}}),g=l.computed(function(){var O=ot(e.trackColor)?"":e.trackColor;return{stroke:O}}),m=l.computed(function(){var O=_o.MEDIUM;if(!e.size)return O;var N=bp.SMALL,B=bp.LARGE,T=bp.MEDIUM;switch(e.size){case N:O=_o.SMALL;break;case T:O=_o.MEDIUM;break;case B:O=_o.LARGE;break;default:O=Number(e.size);break}return O}),y=l.computed(function(){return m.value/2}),b=l.computed(function(){return y.value-x.value/2}),w=l.computed(function(){if(e.theme!==qc.CIRCLE)return{};var O=m.value*Sb.MEDIUM;return m.value<=_o.SMALL?O=m.value*Sb.SMALL:m.value>=_o.LARGE&&(O=m.value*Sb.LARGE),{width:"".concat(m.value,"px"),height:"".concat(m.value,"px"),fontSize:"".concat(O,"px")}}),x=l.computed(function(){var O=e.size===bp.SMALL?4:6;return e.strokeWidth?Number(e.strokeWidth):O}),C=l.computed(function(){var O=(m.value-x.value)/2,N=Math.PI*2*O,B=e.percentage/100;return"".concat(N*B,"  ").concat(N*(1-B))}),S=function(){var N={success:u,warning:d,error:c},B={success:o,warning:s,error:i};return e.theme===qc.CIRCLE?N:B},_=function(){var N="".concat(e.percentage,"%"),B=e.status||"";if(Nme.includes(B)&&e.theme!==qc.PLUMP){var T=S(),k=T[B];k&&(N=l.createVNode(k,{class:["".concat(r.value,"__icon")]},null))}return N};return function(){var O=l.createVNode("div",{class:"".concat(r.value,"__info")},[n("label",_())]),N=10,B=e.percentage>N?"".concat(r.value,"--over-ten"):"".concat(r.value,"--under-ten");return l.createVNode("div",{class:r.value},[e.theme===qc.LINE&&l.createVNode("div",{class:"".concat(r.value,"--thin ").concat(r.value,"--status--").concat(f.value)},[l.createVNode("div",{class:"".concat(r.value,"__bar"),style:h.value},[l.createVNode("div",{class:"".concat(r.value,"__inner"),style:v.value},null)]),O]),e.theme===qc.PLUMP&&l.createVNode("div",{class:["".concat(r.value,"__bar ").concat(r.value,"--plump ").concat(B),V({},"".concat(r.value,"--status--").concat(f.value),f.value)],style:h.value},[l.createVNode("div",{class:"".concat(r.value,"__inner"),style:v.value},[e.percentage>N&&O]),e.percentage<=N&&O]),e.theme===qc.CIRCLE&&l.createVNode("div",{class:"".concat(r.value,"--circle ").concat(r.value,"--status--").concat(f.value),style:w.value},[O,l.createVNode("svg",{width:m.value,height:m.value,viewBox:"0 0 ".concat(m.value," ").concat(m.value)},[l.createVNode("circle",{cx:y.value,cy:y.value,r:b.value,"stroke-width":x.value,fill:"none",class:["".concat(r.value,"__circle-outer")],style:g.value},null),e.percentage>0&&l.createVNode("circle",{cx:y.value,cy:y.value,r:b.value,"stroke-width":x.value,fill:"none","stroke-linecap":"round",class:["".concat(r.value,"__circle-inner")],transform:"matrix(0,-1,1,0,0,".concat(m.value,")"),"stroke-dasharray":C.value,style:p.value},null)])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Mme=Be(Rme);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Lme={animation:{type:String,default:"none",validator:function(e){return e?["gradient","flashed","none"].includes(e):!0}},delay:{type:Number,default:0},loading:{type:Boolean,default:!0},rowCol:{type:Array},theme:{type:String,validator:function(e){return e?["text","avatar","paragraph","avatar-text","tab","article"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function h5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Fme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Bme={text:[1],avatar:[{type:"circle",size:"56px"}],paragraph:[1,1,{width:"70%"}],"avatar-text":[[{type:"circle"},{type:"text",height:"32px"}]],tab:[{height:"30px"},{height:"200px"}],article:[{type:"rect",height:"30px",width:"100%"},{type:"rect",height:"200px",width:"100%"},[{type:"text",height:"30px"},{type:"text",height:"30px"},{type:"text",height:"30px"}],[{type:"text",height:"30px"},{type:"text",height:"30px"}],[{type:"text",height:"30px"},{type:"text",height:"30px"}],[{type:"text",height:"30px"},{type:"text",height:"30px"}]]},jme=function(e){var n=["width","height","marginRight","marginLeft","margin","size","background","backgroundColor"],r=Object.create(null);return n.forEach(function(a){if(a in e){var i=Et(e[a])?"".concat(e[a],"px"):e[a];if(a==="size"){var o=[i,i];r.width=o[0],r.height=o[1]}else r[a]=i}}),r},$me=l.defineComponent({name:"TSkeleton",props:Fme({},Lme),setup:function(e,n){var r=n.slots,a=l.ref(!1),i=ve("skeleton"),o=Ut(),s=function(h){return["".concat(i.value,"__col"),"".concat(i.value,"--type-").concat(h.type||"text"),V({},"".concat(i.value,"--animation-").concat(e.animation),e.animation)]},c=function(h){var v=[];return Ke(h)?v=h:Et(h)?v=new Array(h).fill({type:"text"}):v=[h],v.map(function(p){return l.createVNode("div",{class:s(p),style:jme(p)},[Re(p.content)?p.content(l.h):p.content])})},u=function(h){var v=h||e.rowCol,p=function(){return["".concat(i.value,"__row")]};return v.map(function(g){return l.createVNode("div",{class:p()},[c(g)])})},d=null;return l.watch(function(){return e.loading},function(f){if(!f){clearTimeout(d),a.value=!1;return}e.delay>0?d=setTimeout(function(){clearTimeout(d),a.value=!0},e.delay):a.value=!0},{immediate:!0}),function(){var f=o("default","content");if(r.default&&!a.value)return l.createVNode("div",null,[f]);if(a.value){var h=[];return e.theme&&h.push(u(Bme[e.theme])),e.rowCol&&h.push(u(e.rowCol)),!e.theme&&!e.rowCol&&h.push(u([1,1,1,{width:"70%"}])),l.createVNode("div",{class:i.value},[h])}}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var v5=Be($me);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ume={animation:{type:Object},animationStart:Boolean,color:{type:String,validator:function(e){return e?["black","blue","red","orange","green"].includes(e):!0}},decimalPlaces:{type:Number},extra:{type:[String,Function]},format:{type:Function},loading:Boolean,prefix:{type:[String,Function]},separator:{type:String,default:","},suffix:{type:[String,Function]},title:{type:[String,Function]},trend:{type:String,validator:function(e){return e?["increase","decrease"].includes(e):!0}},trendPlacement:{type:String,default:"left",validator:function(e){return e?["left","right"].includes(e):!0}},unit:{type:[String,Function]},value:{type:Number}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var p5=function(e){return 1-Math.abs(Math.pow(e-1,4))},zme=function(){function t(e){var n=this,r=e.from,a=e.to,i=e.duration,o=i===void 0?200:i,s=e.onStart,c=e.onUpdate,u=c===void 0?function(){}:c,d=e.onFinish;ho(this,t),V(this,"from",void 0),V(this,"to",void 0),V(this,"duration",void 0),V(this,"onStart",void 0),V(this,"onUpdate",void 0),V(this,"onFinish",void 0),V(this,"startTime",void 0),V(this,"started",void 0),V(this,"finished",void 0),V(this,"timer",void 0),V(this,"keys",void 0),V(this,"time",0),V(this,"elapsed",0),this.from=r,this.to=a,this.duration=o,this.onStart=s,this.onUpdate=u,this.onFinish=d,this.startTime=Date.now(),this.started=!1,this.finished=!1,this.timer=null,this.keys={},Object.entries(r).forEach(function(f){var h=$e(f,2),v=h[0],p=h[1];n.to[v]===void 0&&(n.to[v]=p)}),Object.entries(a).forEach(function(f){var h=$e(f,2),v=h[0],p=h[1];n.from[v]===void 0&&(n.from[v]=p)})}return vo(t,[{key:"update",value:function(){var n=this;if(this.time=Date.now(),!(this.time<this.startTime||this.finished)){if(this.elapsed>=this.duration){var r;this.finished=!0,(r=this.onFinish)===null||r===void 0||r.call(this,this.keys);return}var a=Math.min(this.time-this.startTime,this.duration);this.elapsed=a;var i=p5(a/this.duration);if(Object.keys(this.to).forEach(function(s){var c=n.to[s]-n.from[s];n.keys[s]=n.from[s]+c*i}),!this.started){var o;(o=this.onStart)===null||o===void 0||o.call(this,this.keys),this.started=!0}this.onUpdate(this.keys)}}},{key:"polyfillStart",value:function(){var n=this,r=Date.now()-this.startTime,a=p5(r/this.duration);this.timer=setInterval(function(){n.update(),n.finished&&clearInterval(n.timer)},a)}},{key:"normalStart",value:function(){var n=this,r=function(){n.update(),n.timer=requestAnimationFrame(r),n.finished&&(cancelAnimationFrame(n.timer),n.timer=null)};r()}},{key:"start",value:function(){this.startTime=Date.now(),oo()<10?this.polyfillStart():this.normalStart()}},{key:"stop",value:function(){oo()<10?clearInterval(this.timer):cancelAnimationFrame(this.timer),this.timer=null}}])}();/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hme={black:"var(--td-text-color-primary)",blue:"var(--td-brand-color)",red:"var(--td-error-color)",orange:"var(--td-warning-color)",green:"var(--td-success-color)"};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wme=l.defineComponent({name:"TStatistic",props:Ume,setup:function(e,n){var r,a,i=n.expose,o=ve("statistic"),s=We(),c=St({ArrowTriangleUpFilledIcon:gV,ArrowTriangleDownFilledIcon:vV}),u=c.ArrowTriangleUpFilledIcon,d=c.ArrowTriangleDownFilledIcon,f={increase:l.createVNode(u,null,null),decrease:l.createVNode(d,null,null)},h=l.computed(function(){return Et(e.value)?e.value:0}),v=l.ref((r=(a=e.animation)===null||a===void 0?void 0:a.valueFrom)!==null&&r!==void 0?r:e.value),p=l.computed(function(){var C,S,_;return(C=(S=e.decimalPlaces)!==null&&S!==void 0?S:(_=h.value.toString().split(".")[1])===null||_===void 0?void 0:_.length)!==null&&C!==void 0?C:0}),g=l.ref(),m=l.toRefs(e),y=m.value,b=function(){var S,_,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(S=(_=e.animation)===null||_===void 0?void 0:_.valueFrom)!==null&&S!==void 0?S:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.value;if(O!==N){var B;g.value=new zme({from:{value:O},to:{value:N},duration:e.animation.duration,onUpdate:function(k){v.value=Number(k.value.toFixed(p.value))},onFinish:function(){v.value=N}}),(B=g.value)===null||B===void 0||B.start()}},w=l.computed(function(){var C=v.value,S=e.decimalPlaces,_=e.separator;if(Re(e.format))return e.format(C);var O={minimumFractionDigits:S||0,maximumFractionDigits:S||20,useGrouping:!!_};return C=C.toLocaleString(void 0,O).replace(/,|，/g,_),C}),x=l.computed(function(){var C=e.color;return{color:Hme[C]||C}});return l.watch(function(){return e.animationStart},function(C){e.animation&&C&&!g.value&&b()}),l.watch(y,function(C){if(g.value){var S;(S=g.value)===null||S===void 0||S.stop(),g.value=null}v.value=C,e.animationStart&&e.animation&&b()}),l.onMounted(function(){return e.animation&&e.animationStart&&b()}),i({start:b}),function(){var C=e.trend?f[e.trend]:null,S=s("prefix")||(C&&e.trendPlacement!=="right"?C:null),_=s("suffix")||(C&&e.trendPlacement==="right"?C:null),O=s("title"),N=s("unit"),B=s("extra");return l.createVNode("div",{class:o.value},[O&&l.createVNode("div",{class:"".concat(o.value,"-title")},[O]),l.createVNode(v5,{animation:"gradient",theme:"text",loading:!!e.loading},{default:function(){return[l.createVNode("div",{class:"".concat(o.value,"-content"),style:x.value},[S&&l.createVNode("span",{class:"".concat(o.value,"-content-prefix")},[S]),l.createVNode("span",{class:"".concat(o.value,"-content-value")},[w.value]),N&&l.createVNode("span",{class:"".concat(o.value,"-content-unit")},[N]),_&&l.createVNode("span",{class:"".concat(o.value,"-content-suffix")},[_])])]}}),B&&l.createVNode("div",{class:"".concat(o.value,"-extra")},[B])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kme=Be(Wme);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var g5={animation:{type:String,default:"slide",validator:function(e){return e?["slide","fade"].includes(e):!0}},autoplay:{type:Boolean,default:!0},current:{type:Number,default:0},defaultCurrent:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},duration:{type:Number,default:300},height:{type:Number},interval:{type:Number,default:5e3},loop:{type:Boolean,default:!0},navigation:{type:[Object,Function]},stopOnHover:{type:Boolean,default:!0},theme:{type:String,default:"light",validator:function(e){return e?["light","dark"].includes(e):!0}},trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click"].includes(e):!0}},type:{type:String,default:"default",validator:function(e){return e?["default","card"].includes(e):!0}},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function m5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function y5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qme={index:{type:Number},currentIndex:{type:Number},isSwitching:{type:Boolean,default:!1},getWrapAttribute:{type:Function},swiperItemLength:{type:Number,default:0}},wp=210/332,Tb=.415,b5=l.defineComponent({name:"TSwiperItem",props:y5(y5({},g5),qme),setup:function(e,n){var r=n.slots,a=ve(),i=l.computed(function(){return e.index===e.currentIndex}),o=l.computed(function(){return e.type!=="card"?0:e.currentIndex===0&&e.index===e.swiperItemLength-1?-1:e.currentIndex===e.swiperItemLength-1&&e.index===0?e.swiperItemLength:e.index<e.currentIndex-1&&e.currentIndex-e.index>=e.swiperItemLength/2?e.swiperItemLength+1:e.index>e.currentIndex+1&&e.index-e.currentIndex>=e.swiperItemLength/2?-2:e.index}),s=l.computed(function(){if(e.type!=="card")return 0;var d=e.getWrapAttribute("offsetWidth")||0,f=!i.value&&e.swiperItemLength>2?o.value:e.index,h=Math.abs(f-e.currentIndex)<=1;return h?d*((f-e.currentIndex)*(1-Tb*wp)-Tb+1)/2:f<e.currentIndex?-.415*(1+wp)*d/2:(2+Tb*(wp-1))*d/2}),c=l.computed(function(){if(e.type!=="card")return 0;var d=!i.value&&e.swiperItemLength>2?o.value:e.index,f=d===e.currentIndex,h=Math.round(Math.abs(d-e.currentIndex))<=1;return f?2:h?1:0}),u=l.computed(function(){if(e.animation==="fade")return{opacity:i.value?1:0,transition:e.isSwitching?"opacity ".concat(e.duration/1e3,"s"):"",zIndex:i.value?1:0};if(e.type==="card"){var d=!i.value&&e.swiperItemLength>2?o.value:e.index,f=d===e.currentIndex;return{transform:"translateX(".concat(s.value,"px) scale(").concat(f?1:wp,")"),transition:"transform ".concat(e.duration/1e3,"s ease"),zIndex:c.value}}return{}});return function(){var d;return l.createVNode("div",{class:["".concat(a.value,"-swiper__container__item"),V(V(V({},"".concat(a.value,"-swiper__card"),e.type==="card"),"".concat(a.value,"-is-active"),e.type==="card"&&i.value),"".concat(a.value,"-swiper__fade"),e.animation==="fade")],style:u.value},[((d=r.default)===null||d===void 0?void 0:d.call(r,{}))||[]])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gme(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Yme={placement:"inside",showSlideBtn:"always",size:"medium",type:"bars"},Xme=l.defineComponent({name:"TSwiper",props:Qd({},g5),emits:["update:current"],setup:function(e,n){var r=n.emit,a=ve(),i=We(),o=St({ChevronLeftIcon:pc,ChevronRightIcon:tl}),s=o.ChevronLeftIcon,c=o.ChevronRightIcon,u=null,d=0,f=!1,h=!1,v=l.ref(e.current||e.defaultCurrent),p=l.ref(e.current||e.defaultCurrent),g=l.ref(!1),m=l.ref(!1),y=l.ref(!1),b=l.ref(),w=co(),x=l.ref(0),C=l.computed(function(){return Qd(Qd({},Yme),l.isVNode(e.navigation)?{}:e.navigation)}),S=l.computed(function(){return e.type==="card"?!e.loop&&v.value+1>=x.value:!e.loop&&v.value+2>=x.value}),_=l.computed(function(){return[e.autoplay,v.value,e.duration,e.interval]}),O=l.computed(function(){return V(V(V(V(V(V({},"".concat(a.value,"-swiper__wrap"),!0),"".concat(a.value,"-swiper--inside"),C.value.placement==="inside"),"".concat(a.value,"-swiper--outside"),C.value.placement==="outside"),"".concat(a.value,"-swiper--vertical"),e.direction==="vertical"),"".concat(a.value,"-swiper--large"),C.value.size==="large"),"".concat(a.value,"-swiper--small"),C.value.size==="small")}),N=l.computed(function(){var D=e.height?"".concat(e.height,"px"):"".concat(j("offsetHeight"),"px");if(e.type==="card"||e.animation==="fade")return{height:D};if(e.animation==="slide"){var q={transition:m.value?"transform ".concat(e.duration/1e3,"s ease"):""},z=v.value;return x.value>1&&(z+=1,(f||h)&&(q.transition="")),e.direction==="vertical"?(q.height=D,q.transform="translate3d(0, -".concat(z*100,"%, 0px)")):q.transform="translate3d(-".concat(z*100,"%, 0px, 0px)"),["msTransform","WebkitTransform"].forEach(function(K){q[K]=q.transform}),q}return{}}),B=function(){var q=w("SwiperItem");x.value=q.length;var z=q.map(function(R,X){var ee,re=Qd(Qd({},e),R.props);return l.createVNode(b5,l.mergeProps({index:X,currentIndex:v.value,isSwitching:m.value,getWrapAttribute:j,swiperItemLength:x.value},re),Gme(ee=R.children.default())?ee:{default:function(){return[ee]}})});if(e.animation==="slide"&&z.length>1){var K=l.cloneVNode(z[0],{key:"swiper-item-append-".concat(0)}),P=l.cloneVNode(z[z.length-1],{key:"swiper-item-prepend-".concat(z.length-1)});z.unshift(P),z.push(K)}return z},T=function(q,z){var K,P=q%x.value;p.value=P,r("update:current",P),(K=e.onChange)===null||K===void 0||K.call(e,P,z),m.value=!0,e.animation==="slide"&&x.value>1&&e.type!=="card"&&(P=q,f=!1,h=!1,q>=x.value&&(k(),setTimeout(function(){h=!0,v.value=0},e.duration)),v.value===0&&(x.value>2&&q===x.value-1||x.value===2&&q===0)&&(P=-1,p.value=x.value-1,k(),setTimeout(function(){f=!0,v.value=x.value-1},e.duration))),v.value=P},k=function(){u&&(clearTimeout(u),u=null)},E=function(){e.autoplay&&e.interval>0&&(k(),u=setTimeout(function(){T(v.value+1,{source:"autoplay"})},v.value===0?e.interval-(e.duration+50):e.interval))},I=function(){g.value=!0,e.stopOnHover&&k(),C.value.showSlideBtn==="hover"&&(y.value=!0)},A=function(){g.value=!1,S.value||E(),C.value.showSlideBtn==="hover"&&(y.value=!1)},M=function(q){e.trigger==="hover"&&T(q,{source:"hover"})},$=function(q){e.trigger==="click"&&T(q,{source:"click"})},U=function(q){if(!m.value)return e.type==="card"?T(v.value+1>=x.value?0:v.value+1,q):T(v.value+1,q)},F=function(q){if(!m.value)return v.value-1<0?e.animation==="slide"&&x.value===2?T(0,q):T(x.value-1,q):T(v.value-1,q)},j=function(q){var z;return(z=b.value)===null||z===void 0||(z=z.parentNode)===null||z===void 0?void 0:z[q]},W=function(){var q=v.value+1>x.value?1:v.value+1;return l.createVNode("div",{class:"".concat(a.value,"-swiper__arrow")},[l.createVNode("div",{class:"".concat(a.value,"-swiper__arrow-left"),onClick:function(){return F({source:"click"})}},[l.createVNode(s,null,null)]),l.createVNode("div",{class:"".concat(a.value,"-swiper__navigation-text-fraction")},[q,"/",x.value]),l.createVNode("div",{class:"".concat(a.value,"-swiper__arrow-right"),onClick:function(){return U({source:"click"})}},[l.createVNode(c,null,null)])])},H=function(){return y.value?l.createVNode("div",{class:["".concat(a.value,"-swiper__arrow"),"".concat(a.value,"-swiper__arrow--default")]},[l.createVNode("div",{class:"".concat(a.value,"-swiper__arrow-left"),onClick:function(){return F({source:"click"})}},[l.createVNode(s,null,null)]),l.createVNode("div",{class:"".concat(a.value,"-swiper__arrow-right"),onClick:function(){return U({source:"click"})}},[l.createVNode(c,null,null)])]):null},J=function(){if(l.isVNode(e.navigation))return e.navigation;var q=i("navigation");if(q&&l.isVNode(q==null?void 0:q[0]))return q;if(C.value.type==="fraction")return l.createVNode("div",{class:["".concat(a.value,"-swiper__navigation"),"".concat(a.value,"-swiper__navigation--fraction")]},[W()]);var z=w("SwiperItem");return l.createVNode("ul",{class:["".concat(a.value,"-swiper__navigation"),V(V(V({},"".concat(a.value,"-swiper__navigation-bars"),C.value.type==="bars"),"".concat(a.value,"-swiper__navigation-dots"),C.value.type==="dots"),"".concat(a.value,"-swiper__navigation-dots-bar"),C.value.type==="dots-bar")]},[z.map(function(K,P){return l.createVNode("li",{key:P,class:["".concat(a.value,"-swiper__navigation-item"),V({},"".concat(a.value,"-is-active"),P===p.value)],onMouseenter:function(){return M(P)},onClick:function(){return $(P)}},[l.createVNode("span",null,null)])})])},Y=function(){return B()};return l.watch(function(){return _.value},function(){E()}),l.watch(function(){return m.value},function(){m.value&&(d&&clearTimeout(d),d=setTimeout(function(){m.value=!1,d=0,S.value&&k()},e.duration+50))}),l.watch(function(){return e.current},function(){T(e.current,{source:"autoplay"})}),l.onMounted(function(){E(),y.value=C.value.showSlideBtn==="always"}),function(){return l.createVNode("div",{class:["".concat(a.value,"-swiper")],onMouseenter:I,onMouseleave:A,ref:b},[l.createVNode("div",{class:O.value},[l.createVNode("div",{class:["".concat(a.value,"-swiper__content"),V(V({},"".concat(a.value,"-swiper-fade"),e.animation==="fade"),"".concat(a.value,"-swiper-card"),e.type==="card")]},[l.createVNode("div",{class:"".concat(a.value,"-swiper__container"),style:N.value},[Y()])]),J(),H()])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Jme=Be(Xme),Qme=Be(b5);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gc={activeRowKeys:{type:Array,default:void 0},defaultActiveRowKeys:{type:Array,default:function(){return[]}},activeRowType:{type:String,default:""},allowResizeColumnWidth:{type:Boolean,default:void 0},attach:{type:[String,Function]},bordered:Boolean,bottomContent:{type:[String,Function]},cellEmptyContent:{type:[String,Function]},columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},disableDataPage:Boolean,disableSpaceInactiveRow:{type:Boolean,default:void 0},empty:{type:[String,Function],default:""},firstFullRow:{type:[String,Function]},fixedRows:{type:Array},footData:{type:Array,default:function(){return[]}},footerAffixProps:{type:Object},footerAffixedBottom:{type:[Boolean,Object],default:!1},footerSummary:{type:[String,Function]},headerAffixProps:{type:Object},headerAffixedTop:{type:[Boolean,Object],default:!1},height:{type:[String,Number]},horizontalScrollAffixedBottom:{type:[Boolean,Object]},hover:Boolean,keyboardRowHover:{type:Boolean,default:!0},lastFullRow:{type:[String,Function]},lazyLoad:Boolean,loading:{type:[Boolean,Function],default:void 0},loadingProps:{type:Object},locale:{type:Object},maxHeight:{type:[String,Number]},pagination:{type:Object},paginationAffixedBottom:{type:[Boolean,Object]},resizable:Boolean,rowAttributes:{type:[Object,Array,Function]},rowClassName:{type:[String,Object,Array,Function]},rowKey:{type:String,default:"id",required:!0},rowspanAndColspan:{type:Function},rowspanAndColspanInFooter:{type:Function},scroll:{type:Object},showHeader:{type:Boolean,default:!0},size:{type:String,validator:function(e){return e?["small","medium","large"].includes(e):!0}},stripe:Boolean,tableContentWidth:{type:String,default:""},tableLayout:{type:String,default:"fixed",validator:function(e){return e?["auto","fixed"].includes(e):!0}},topContent:{type:[String,Function]},verticalAlign:{type:String,default:"middle",validator:function(e){return e?["top","middle","bottom"].includes(e):!0}},onActiveChange:Function,onActiveRowAction:Function,onCellClick:Function,onColumnResizeChange:Function,onPageChange:Function,onRowClick:Function,onRowDblclick:Function,onRowMousedown:Function,onRowMouseenter:Function,onRowMouseleave:Function,onRowMouseover:Function,onRowMouseup:Function,onScroll:Function,onScrollX:Function,onScrollY:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function x5(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=n,a=0,i=t.length;a<i;a++){var o,s=t[a];if(e.set(s,n),s!=null&&(o=s.children)!==null&&o!==void 0&&o.length){var c=x5(s.children,e,n+1);c>r&&(r=c)}}return r}function C5(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e,r=(t==null?void 0:t.children)||[],a=0,i=r.length;a<i;a++){var o=r[a];o.children?n=C5(o,n):n+=1}return n}function Zme(t){var e=new Map,n=x5(t,e),r=new Map,a=function(s,c){for(var u=0,d=s.length;u<d;u++){var f,h=s[u],v=h.children?1:n-e.get(h)+1,p=h.children?C5(h):1,g={};v>1&&(g.rowspan=v),p>1&&(g.colspan=p),r.set(h,g),h!=null&&(f=h.children)!==null&&f!==void 0&&f.length?a(h.children,c):c.push(h)}},i=[];return a(t,i),{rowspanAndColspanMap:r,leafColumns:i}}function Vme(t){var e=function(a,i){for(var o,s=[],c=[],u=0,d=a.length;u<d;u++){var f,h=a[u],v=[h];s=s.concat(v),h!=null&&(f=h.children)!==null&&f!==void 0&&f.length&&(c=c.concat(h.children))}return(o=c)!==null&&o!==void 0&&o.length&&e(c,i),i.push(s),s},n=[];return e(t,n),n=n.reverse(),n}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Kr(){var t=ve(),e={classPrefix:t.value,tableBaseClass:{table:"".concat(t.value,"-table"),columnResizableTable:"".concat(t.value,"-table--column-resizable"),overflowVisible:"".concat(t.value,"-table--overflow-visible"),body:"".concat(t.value,"-table__body"),content:"".concat(t.value,"-table__content"),topContent:"".concat(t.value,"-table__top-content"),bottomContent:"".concat(t.value,"-table__bottom-content"),paginationWrap:"".concat(t.value,"-table__pagination-wrap"),tdLastRow:"".concat(t.value,"-table__td-last-row"),tdFirstCol:"".concat(t.value,"-table__td-first-col"),thCellInner:"".concat(t.value,"-table__th-cell-inner"),tableRowEdit:"".concat(t.value,"-table--row-edit"),cellEditable:"".concat(t.value,"-table__cell--editable"),cellEditWrap:"".concat(t.value,"-table__cell-wrap"),bordered:"".concat(t.value,"-table--bordered"),striped:"".concat(t.value,"-table--striped"),hover:"".concat(t.value,"-table--hoverable"),loading:"".concat(t.value,"-table--loading"),rowspanAndColspan:"".concat(t.value,"-table--rowspan-colspan"),empty:"".concat(t.value,"-table__empty"),emptyRow:"".concat(t.value,"-table__empty-row"),headerFixed:"".concat(t.value,"-table--header-fixed"),columnFixed:"".concat(t.value,"-table--column-fixed"),widthOverflow:"".concat(t.value,"-table--width-overflow"),multipleHeader:"".concat(t.value,"-table--multiple-header"),footerAffixed:"".concat(t.value,"-table--footer-affixed"),horizontalBarAffixed:"".concat(t.value,"-table--horizontal-bar-affixed"),affixedHeader:"".concat(t.value,"-table--affixed-header"),affixedHeaderElm:"".concat(t.value,"-table__affixed-header-elm"),affixedFooterElm:"".concat(t.value,"-table__affixed-footer-elm"),affixedFooterWrap:"".concat(t.value,"-table__affixed-footer-wrap"),scrollbarDivider:"".concat(t.value,"-table__scroll-bar-divider"),fullHeight:"".concat(t.value,"-table--full-height"),resizeLine:"".concat(t.value,"-table__resize-line"),obviousScrollbar:"".concat(t.value,"-table__scrollbar--obvious"),affixedHeaderWrap:"".concat(t.value,"-table__affixed-header-elm-wrap")},tdAlignClasses:{left:"".concat(t.value,"-align-left"),right:"".concat(t.value,"-align-right"),center:"".concat(t.value,"-align-center")},tableHeaderClasses:{header:"".concat(t.value,"-table__header"),thBordered:"".concat(t.value,"-table__header-th--bordered"),fixed:"".concat(t.value,"-table__header--fixed"),multipleHeader:"".concat(t.value,"-table__header--multiple")},tableFooterClasses:{footer:"".concat(t.value,"-table__footer"),fixed:"".concat(t.value,"-table__footer--fixed")},tableAlignClasses:{top:"".concat(t.value,"-vertical-align-top"),middle:"".concat(t.value,"-vertical-align-middle"),bottom:"".concat(t.value,"-vertical-align-bottom")},tableRowFixedClasses:{top:"".concat(t.value,"-table__row--fixed-top"),bottom:"".concat(t.value,"-table__row--fixed-bottom"),firstBottom:"".concat(t.value,"-table__row--fixed-bottom-first"),withoutBorderBottom:"".concat(t.value,"-table__row--without-border-bottom")},tableColFixedClasses:{left:"".concat(t.value,"-table__cell--fixed-left"),right:"".concat(t.value,"-table__cell--fixed-right"),lastLeft:"".concat(t.value,"-table__cell--fixed-left-last"),firstRight:"".concat(t.value,"-table__cell--fixed-right-first"),leftShadow:"".concat(t.value,"-table__content--scrollable-to-left"),rightShadow:"".concat(t.value,"-table__content--scrollable-to-right")},tableLayoutClasses:{auto:"".concat(t.value,"-table--layout-auto"),fixed:"".concat(t.value,"-table--layout-fixed")},tdEllipsisClass:"".concat(t.value,"-table-td--ellipsis"),tableFullRowClasses:{base:"".concat(t.value,"-table__row--full"),innerFullRow:"".concat(t.value,"-table__row-full-inner"),innerFullElement:"".concat(t.value,"-table__row-full-element"),firstFullRow:"".concat(t.value,"-table__first-full-row"),lastFullRow:"".concat(t.value,"-table__last-full-row")},tableExpandClasses:{iconBox:"".concat(t.value,"-table__expand-box"),iconCell:"".concat(t.value,"-table__expandable-icon-cell"),rowExpanded:"".concat(t.value,"-table__row--expanded"),rowFolded:"".concat(t.value,"-table__row--folded"),row:"".concat(t.value,"-table__expanded-row"),rowInner:"".concat(t.value,"-table__expanded-row-inner"),expanded:"".concat(t.value,"-table__row--expanded"),collapsed:"".concat(t.value,"-table__row--collapsed")},tableSortClasses:{sortable:"".concat(t.value,"-table__cell--sortable"),sortColumn:"".concat(t.value,"-table__sort-column"),title:"".concat(t.value,"-table__cell--title"),trigger:"".concat(t.value,"-table__cell--sort-trigger"),doubleIcon:"".concat(t.value,"-table__double-icons"),sortIcon:"".concat(t.value,"-table__sort-icon"),iconDirection:{asc:"".concat(t.value,"-table-sort-asc"),desc:"".concat(t.value,"-table-sort-desc")},iconActive:"".concat(t.value,"-table__sort-icon--active"),iconDefault:"".concat(t.value,"-icon-sort--default")},tableSelectedClasses:{selected:"".concat(t.value,"-table__row--selected"),disabled:"".concat(t.value,"-table__row--disabled"),checkCell:"".concat(t.value,"-table__cell-check")},tableFilterClasses:{filterable:"".concat(t.value,"-table__cell--filterable"),popup:"".concat(t.value,"-table__filter-pop"),icon:"".concat(t.value,"-table__filter-icon"),popupContent:"".concat(t.value,"-table__filter-pop-content"),result:"".concat(t.value,"-table__filter-result"),inner:"".concat(t.value,"-table__row-filter-inner"),bottomButtons:"".concat(t.value,"-table__filter--bottom-buttons"),contentInner:"".concat(t.value,"-table__filter-pop-content-inner"),iconWrap:"".concat(t.value,"-table__filter-icon-wrap")},asyncLoadingClass:"".concat(t.value,"-table__async-loading"),isFocusClass:"".concat(t.value,"-is-focus"),isLoadingClass:"".concat(t.value,"-is-loading"),isLoadMoreClass:"".concat(t.value,"-is-load-more"),tableTreeClasses:{col:"".concat(t.value,"-table__tree-col"),inlineCol:"".concat(t.value,"-table__tree-col--inline"),icon:"".concat(t.value,"-table__tree-op-icon"),leafNode:"".concat(t.value,"-table__tree-leaf-node")},tableDraggableClasses:{rowDraggable:"".concat(t.value,"-table--row-draggable"),rowHandlerDraggable:"".concat(t.value,"-table--row-handler-draggable"),colDraggable:"".concat(t.value,"-table--col-draggable"),handle:"".concat(t.value,"-table__handle-draggable"),ghost:"".concat(t.value,"-table__ele--draggable-ghost"),chosen:"".concat(t.value,"-table__ele--draggable-chosen"),dragging:"".concat(t.value,"-table__ele--draggable-dragging"),dragSortTh:"".concat(t.value,"-table__th--drag-sort")},virtualScrollClasses:{cursor:"".concat(t.value,"-table__virtual-scroll-cursor"),header:"".concat(t.value,"-table__virtual-scroll-header")},positiveRotate90:"".concat(t.value,"-positive-rotate-90"),negativeRotate180:"".concat(t.value,"-negative-rotate-180")};return e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function _5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function e0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t0e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var kb=l.defineComponent({name:"TEllipsis",props:{content:{type:[String,Function]},default:{type:[String,Function]},tooltipContent:{type:[String,Number,Function]},placement:String,attach:[String,Function],tooltipProps:Object,zIndex:Number,overlayClassName:String,classPrefix:{type:String,default:"t"}},setup:function(e){var n=l.ref(),r=l.ref(!1),a=l.ref(!1),i=l.computed(function(){return["".concat(e.classPrefix,"-table__ellipsis"),"".concat(e.classPrefix,"-text-ellipsis")]}),o=l.computed(function(){return["".concat(e.classPrefix,"-table__ellipsis-content"),e.overlayClassName]});l.onMounted(function(){a.value=nv(n.value)}),l.onUpdated(function(){a.value=nv(n.value)});var s=function(){n.value&&(r.value=!0)},c=function(){n.value},u=function(h){h||(r.value=!1)},d=fo(function(f){f.type==="mouseleave"?c():s()},80);return{flag:r,root:n,isOverflow:a,ellipsisClasses:i,innerEllipsisClassName:o,onMouseAround:d,handleVisibleChange:u}},render:function(){var e=Ja(this,"default","content"),n=l.createVNode("div",{ref:"root",class:this.ellipsisClasses,onMouseenter:this.onMouseAround,onMouseleave:this.onMouseAround,style:{textOverflow:this.isOverflow?"ellipsis":"clip"}},[e]),r=null,a=this.tooltipProps;if(this.isOverflow&&this.flag){var i=e0e({content:this.tooltipContent||function(){return e},destroyOnClose:!0,zIndex:this.zIndex,attach:this.attach,placement:this.placement,overlayClassName:a!=null&&a.overlayClassName?this.innerEllipsisClassName.concat(a.overlayClassName):this.innerEllipsisClassName,onVisibleChange:this.handleVisibleChange},a);r=l.createVNode(Tr,i,t0e(n)?n:{default:function(){return[n]}})}else r=n;return r}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function S5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function T5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n0e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}function xp(t,e,n){var r={col:e,colIndex:n};return Re(e.title)?e.title(l.h,r):Je(e.title)&&t[e.title]?t[e.title](r):Re(e.render)&&e.render(l.h,T5(T5({},r),{},{type:"title",row:{},rowIndex:-1}))||e.title}function k5(t){var e=Kr(),n=e.tableSortClasses,r=e.tableFilterClasses,a=l.computed(function(){return Zme(t.columns)}),i=l.computed(function(){return Vme(t.columns)}),o=l.computed(function(){return i.value.length>1}),s=function(u,d,f,h,v,p){var g=$e(u,3),m=g[0],y=g[1],b=g[2],w=V(V({},n.sortable,y),r.filterable,b),x=Re(h)?h(l.h,{col:d,colIndex:f}):void 0,C=h!==void 0?!!h:!!d.ellipsis;return l.createVNode("div",{class:w},[l.createVNode("div",{class:n.title},[C?l.createVNode(kb,{placement:"bottom",attach:t.attach||(v?function(){return v}:void 0),tooltipContent:x&&function(){return x},tooltipProps:wt(h)==="object"?h:void 0,classPrefix:p==null?void 0:p.classPrefix,overlayClassName:p==null?void 0:p.ellipsisOverlayClassName},n0e(m)?m:{default:function(){return[m]}}):l.createVNode("div",null,[m]),!!(y||b)&&l.createVNode("div",{class:r.iconWrap},[y,b])])])};return{thList:i,isMultipleHeader:o,spansAndLeafNodes:a,renderTitleWidthIcon:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function O5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function r0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var a0e=80,i0e=600,E5=8;function o0e(t){var e=t.isWidthOverflow,n=t.tableContentRef,r=t.showColumnShadow,a=t.getThWidthList,i=t.updateThWidthList,o=t.setTableElmWidth,s=t.updateTableAfterColumnResize,c=t.onColumnResizeChange,u=l.ref(),d=l.ref({}),f=l.ref([]),h,v;l.onMounted(function(){var k=typeof document<"u";h=k?document.onselectstart:null,v=k?document.ondragstart:null});var p=function(E,I,A){for(var M=I;E[M]&&E[M].resizable===!1;)A==="next"?M+=1:M-=1;return E[M]},g=function(E,I){E&&(f.value=E,E.forEach(function(A,M){var $=p(E,M-1,"prev"),U=p(E,M+1,"next"),F=I?d.value[I.colKey].prev:U,j=I?d.value[I.colKey].next:$,W=M===0?F:$,H=M===E.length-1?j:U;d.value[A.colKey]={prev:W,next:H,current:{prevSibling:p(E,M-1,"prev"),nextSibling:p(E,M+1,"next")}},g(A.children,A)}))},m={isDragging:!1,draggingCol:null,draggingStart:0,effectCol:"next"},y=l.reactive({display:"none",height:"10px",left:"10px",bottom:"0"}),b=function(E){return E.fixed==="right"&&r.right},w=function(E,I){if(!(!u.value||m.isDragging||!E.target)){var A=E.target.closest("th"),M=A.getAttribute("data-colkey");if(f.value.find(function(P){return P.colKey===M})){var $=A.getBoundingClientRect(),U=$.right-E.pageX<=E5,F=E.pageX-$.left<=E5,j=b(I);if(U||j){var W,H=(W=I.resizable)!==null&&W!==void 0?W:!0;if(H){A.style.cursor=U||j&&F?"col-resize":"";var J=U&&!j||j&&F;m.draggingCol=J?A:A.nextElementSibling,m.effectCol="next";return}}else if(F){var Y=A.previousElementSibling;if(Y){var D,q,z=(D=d.value[I.colKey])===null||D===void 0?void 0:D.prev,K=(q=z==null?void 0:z.resizable)!==null&&q!==void 0?q:!0;if(K){A.style.cursor="col-resize",m.draggingCol=Y,m.effectCol="prev";return}}}A.style.cursor="",m.draggingCol=null,m.effectCol=null}}},x=function(E){var I,A,M=Et(E.minWidth)?E.minWidth:parseInt(E.minWidth||"0",10);return{minColWidth:Math.max(((I=E.resize)===null||I===void 0?void 0:I.minWidth)||a0e,M),maxColWidth:((A=E.resize)===null||A===void 0?void 0:A.maxWidth)||i0e}},C=function(E,I,A,M){var $=A.right-M.left,U=A.left-M.left,F=m.effectCol==="next"?E:I,j=x(F),W=j.minColWidth,H=j.maxColWidth;return{resizeLinePos:$,minResizeLineLeft:U+W,maxResizeLineLeft:U+H}},S=function(E,I,A,M,$){var U=M.left-$.left,F=E.dataset.colkey===I.colKey?I:A,j=M.left-$.left,W=x(F),H=W.minColWidth,J=W.maxColWidth;return{resizeLinePos:U,minResizeLineLeft:j+(M.width-J),maxResizeLineLeft:j+(M.width-H)}},_=function(E,I){var A=E.left-I.left,M=E.left-I.left;return{resizeLinePos:A,minResizeLineLeft:M,maxResizeLineLeft:M}},O=function(E){var I=0;return f.value.forEach(function(A){I+=E[A.colKey]}),I},N=function(E,I,A,M){var $=!0;if(I){var U=x(I),F=U.minColWidth,j=U.maxColWidth,W=E[I.colKey]+A;$=W<F||W>j}return!($||e.value||M===f.value.length-1)},B=function(E,I,A,M){return I?C(E,I,A,M):_(A,M)},T=function(E,I,A){var M,$,U;if(m.draggingCol){var F=m.draggingCol,j=F.getBoundingClientRect(),W=(M=n.value)===null||M===void 0?void 0:M.getBoundingClientRect(),H=($=d.value[I.colKey])===null||$===void 0?void 0:$.next,J=(U=d.value[I.colKey])===null||U===void 0?void 0:U.prev,Y=b(I)?S(F,I,H,j,W):B(I,H,j,W),D=Y.resizeLinePos,q=Y.minResizeLineLeft,z=Y.maxResizeLineLeft;if(m.isDragging=!0,m.draggingStart=E.x,u!=null&&u.value){y.display="block",y.height="".concat(W.bottom-j.top,"px"),y.left="".concat(D,"px");var K=n.value.parentElement.getBoundingClientRect();y.bottom="".concat(K.bottom-W.bottom,"px")}var P=function(){var ee;if(m.isDragging){var re=D-parseFloat(y.left)||0,ae=a("calculate"),oe=(ee=d.value[I.colKey])===null||ee===void 0?void 0:ee.current;if(oe){var ce=m.effectCol==="next"?oe.nextSibling:oe.prevSibling,ge=r0e({},ae),pe=I.resizable!==!1?I:ce,_e=m.effectCol==="next"?oe.nextSibling:I,be=N(ge,_e,re,A);m.effectCol==="next"?b(I)?F.dataset.colkey!==I.colKey?ge[H.colKey]+=re:ge[pe.colKey]+=re:(ge[pe.colKey]-=re,be&&(ge[H.colKey]+=re)):m.effectCol==="prev"&&(be&&(ge[pe.colKey]+=re),J&&(ge[J.colKey]-=re)),i(ge);var Se=O(ge);o(Math.round(Se)),s(),m.isDragging=!1,m.draggingCol=null,m.effectCol=null,F.style.cursor="",y.display="none",y.left="0",At(document,"mouseup",P),At(document,"mousemove",R),document.onselectstart=h,document.ondragstart=v,c==null||c({columnsWidth:ge})}}},R=function(ee){if(m.isDragging){var re=D+ee.x-m.draggingStart;y.left="".concat(Math.min(Math.max(re,q),z),"px")}};qt(document,"mouseup",P),qt(document,"mousemove",R),document.onselectstart=function(){return!1},document.ondragstart=function(){return!1}}};return{resizeLineRef:u,resizeLineStyle:y,onColumnMouseover:w,onColumnMousedown:T,setEffectColMap:g}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function l0e(){}var s0e=l0e,Ob=s_,c0e=s0e,u0e=_0,d0e=1/0,f0e=Ob&&1/u0e(new Ob([,-0]))[1]==d0e?function(t){return new Ob(t)}:c0e,h0e=f0e,v0e=Yh,p0e=ky,g0e=Oy,m0e=Xh,y0e=h0e,b0e=_0,w0e=200;function x0e(t,e,n){var r=-1,a=p0e,i=t.length,o=!0,s=[],c=s;if(n)o=!1,a=g0e;else if(i>=w0e){var u=e?null:y0e(t);if(u)return b0e(u);o=!1,a=m0e,c=new v0e}else c=e?[]:s;e:for(;++r<i;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),s.push(d)}else a(c,f,n)||(c!==s&&c.push(f),s.push(d))}return s}var C0e=x0e,_0e=RP,S0e=gy,P5=C0e;function T0e(t,e,n){var r=t.length;if(r<2)return r?P5(t[0]):[];for(var a=-1,i=Array(r);++a<r;)for(var o=t[a],s=-1;++s<r;)s!=a&&(i[a]=_0e(i[a]||o,t[s],e,n));return P5(S0e(i,1),e,n)}var k0e=T0e,O0e=w0,E0e=zh,P0e=k0e,I0e=Uh,A0e=bO,N0e=E0e(function(t){var e=A0e(t);return e=typeof e=="function"?e:void 0,P0e(O0e(t,I0e),void 0,e)}),D0e=N0e;function I5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eb(t,e,n,r){var a=n==null?void 0:n.get(t.colKey||e);if(!a)return{};var i=V(V(V(V({},r.left,t.fixed==="left"),r.right,t.fixed==="right"),r.lastLeft,t.fixed==="left"&&a.lastLeftFixedCol),r.firstRight,t.fixed==="right"&&a.firstRightFixedCol),o={left:t.fixed==="left"?"".concat(a.left,"px"):void 0,right:t.fixed==="right"?"".concat(a.right,"px"):void 0};return{style:o,classes:i}}function R0e(t,e,n,r,a,i){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;if(!r||!r.length)return{style:void 0,classes:void 0};var s=e<r[0],c=e>n-1-r[1],u=n-r[1],d=(a==null?void 0:a.get(t))||{},f=V(V(V(V({},i.top,s),i.bottom,c),i.firstBottom,e===u),i.withoutBorderBottom,e===u-1),h={top:s?"".concat(d.top-o,"px"):void 0,bottom:c?"".concat(d.bottom+o,"px"):void 0};return{style:h,classes:f}}function M0e(t,e,n,r){var a=l.toRefs(t),i=a.columns,o=a.tableLayout,s=a.tableContentWidth,c=a.fixedRows,u=a.firstFullRow,d=a.lastFullRow,f=a.maxHeight,h=a.headerAffixedTop,v=a.footerAffixedBottom,p=a.bordered,g=a.resizable,m=a.allowResizeColumnWidth,y=l.ref([]),b=l.ref(),w=l.ref(),x=l.ref(!1),C=l.ref(!1),S=l.ref(),_=l.ref(6),O=l.ref(new Map),N=l.reactive({left:!1,right:!1}),B=l.ref({left:0,top:0}),T=l.ref(0),k=l.ref(0),E=l.ref({}),I=l.ref(!1),A=l.ref(!1),M=l.ref(!1),$=l.computed(function(){var me,ie;return(me=(ie=m.value)!==null&&ie!==void 0?ie:g.value)!==null&&me!==void 0?me:!1}),U=l.computed(function(){var me;return!(t.headerAffixedTop||t.footerAffixedBottom||t.horizontalScrollAffixedBottom||((me=t.scroll)===null||me===void 0?void 0:me.type)==="virtual")});function F(me){S.value=me}function j(me){for(var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Map,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],Ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Ge=arguments.length>4?arguments[4]:void 0,Le=0,De=me.length;Le<De;Le++){var Ue,ze=me[Le];["left","right"].includes(ze.fixed)&&(I.value=!0),ze.fixed==="right"&&(A.value=!0),ze.fixed==="left"&&(M.value=!0);var Ve=ze.colKey||Le,et={col:ze,parent:Ge,index:Le};ie.set(Ve,et),(Ue=ze.children)!==null&&Ue!==void 0&&Ue.length&&j(ze.children,ie,ye,Ce+1,et),ye[Ce]?ye[Ce].push(et):ye[Ce]=[et]}return{newColumnsMap:ie,levelNodes:ye}}var W=function(ie,ye){for(var Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ge=0,Le=ie.length;Ge<Le;Ge++){var De,Ue=ie[Ge];if(Ue.fixed==="right")return;for(var ze=ye.get(Ue.colKey||Ge),Ve=Ge-1;Ve>=0&&ie[Ve].fixed!=="left";)Ve-=1;var et=ie[Ve],vt=Ge===0&&(Ce==null?void 0:Ce.left)||0,_t=ye.get((et==null?void 0:et.colKey)||Ge-1);ze&&(ze.left=((_t==null?void 0:_t.left)||vt)+((_t==null?void 0:_t.width)||0)),(De=Ue.children)!==null&&De!==void 0&&De.length&&W(Ue.children,ye,ze)}},H=function(ie,ye){for(var Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ge=ie.length-1;Ge>=0;Ge--){var Le,De=ie[Ge];if(De.fixed==="left")return;for(var Ue=ye.get(De.colKey||Ge),ze=Ge+1;ze<ie.length&&ie[ze].fixed!=="right";)ze+=1;var Ve=ie[ze],et=Ge===ie.length-1&&(Ce==null?void 0:Ce.right)||0,vt=ye.get((Ve==null?void 0:Ve.colKey)||Ge+1);Ue&&(Ue.right=((vt==null?void 0:vt.right)||et)+((vt==null?void 0:vt.width)||0)),(Le=De.children)!==null&&Le!==void 0&&Le.length&&H(De.children,ye,Ue)}},J=function(ie,ye){if(ie){for(var Ce=0,Ge=ie.length;Ce<Ge;Ce++)for(var Le=ie[Ce].children,De=0,Ue=Le.length;De<Ue;De++){var ze,Ve=Le[De],et=Ve.dataset.colkey;et||st.warn("TDesign Table","".concat(Ve.innerText," missing colKey. colKey is required for fixed column feature."));var vt=ye.get(et||De);vt!=null&&(ze=vt.col)!==null&&ze!==void 0&&ze.fixed&&ye.set(et,Yc(Yc({},vt),{},{width:Ve.getBoundingClientRect().width}))}W(i.value,ye),H(i.value,ye)}},Y=function(ie,ye,Ce,Ge){for(var Le=c.value||[],De=$e(Le,2),Ue=De[0],ze=De[1],Ve=t.data,et=t.rowKey,vt=et===void 0?"id":et,_t=0;_t<Ue;_t++){var Yn=ie[_t],Rr=je(Ve[_t],vt),_r=ye.get(Rr)||{},Ko=je(Ve[_t-1],vt),qo=ye.get(Ko)||{},Ka=0;_t===0&&(Ka=(Ce==null?void 0:Ce.getBoundingClientRect().height)||0),_r.top=(qo.top||Ka)+(qo.height||0),ye.set(Rr,Yc(Yc({},_r),{},{height:(Yn==null?void 0:Yn.getBoundingClientRect().height)||0}))}for(var qa=Ve.length-1;qa>=Ve.length-ze;qa--){var Ta=ie[ie.length-(Ve.length-qa)],Il=je(Ve[qa],vt),$t=ye.get(Il)||{},Ot=je(Ve[qa+1],vt),an=ye.get(Ot)||{},Cn=0;qa===Ve.length-1&&(Cn=(Ge==null?void 0:Ge.getBoundingClientRect().height)||0),$t.bottom=(an.bottom||Cn)+(an.height||0),ye.set(Il,Yc(Yc({},$t),{},{height:(Ta==null?void 0:Ta.getBoundingClientRect().height)||0}))}},D=function(ie,ye){if(O.value.clear(),!!ie){var Ce=ie.querySelector("thead");Ce&&J(Ce.children,ye);var Ge=ie.querySelector("tbody"),Le=ie.querySelector("tfoot");Ge&&Y(Ge.children,ye,Ce,Le),O.value=ye}},q,z=function(ie,ye){if(!(!I.value||!ie)){var Ce=ie.scrollLeft;if(!(q===Ce&&(!ye||!ye.skipScrollLimit))){q=Ce;var Ge=ie.clientWidth+Ce<ie.scrollWidth,Le=Ce>0;N.left===Le&&N.right===Ge||(N.left=Le&&M.value,N.right=Ge&&A.value)}}},K=function(ie){for(var ye=0;ye<ie.length;ye++)for(var Ce=ie[ye],Ge=0,Le=Ce.length;Ge<Le;Ge++){var De=Ce[Ge],Ue=Ce[Ge+1],ze=De.parent,Ve=!ze||(ze==null?void 0:ze.lastLeftFixedCol);Ve&&De.col.fixed==="left"&&(Ue==null?void 0:Ue.col.fixed)!=="left"&&(De.lastLeftFixedCol=!0);var et=Ce[Ge-1],vt=!ze||(ze==null?void 0:ze.firstRightFixedCol);vt&&De.col.fixed==="right"&&(et==null?void 0:et.col.fixed)!=="right"&&(De.firstRightFixedCol=!0)}},P=function(){var ie=j(i.value),ye=ie.newColumnsMap,Ce=ie.levelNodes;K(Ce);var Ge=setTimeout(function(){var Le;(I.value||(Le=c.value)!==null&&Le!==void 0&&Le.length)&&D(w.value,ye),clearTimeout(Ge)},0);return function(){clearTimeout(Ge)}},R=function(){var ie=setTimeout(function(){if(w.value){x.value=w.value.scrollHeight>w.value.clientHeight,C.value=w.value.scrollWidth>w.value.clientWidth;var ye=w.value.getBoundingClientRect();B.value={top:ye.top,left:ye.left},clearTimeout(ie)}},0)},X=function(ie){k.value!==ie&&(k.value=ie)},ee=function(){var ie,ye,Ce=(ie=w.value)===null||ie===void 0?void 0:ie.getBoundingClientRect();if(Ce){var Ge=x.value?_.value:0;T.value=Ce.width-Ge-(t.bordered?1:0);var Le=S==null||(ye=S.value)===null||ye===void 0?void 0:ye.getBoundingClientRect();Le!=null&&Le.width&&X(Le.width)}},re=function(){var ie,ye,Ce,Ge,Le,De,Ue,ze;(ie=r.paginationAffixRef.value)===null||ie===void 0||(ye=ie.handleScroll)===null||ye===void 0||ye.call(ie),(Ce=r.horizontalScrollAffixRef.value)===null||Ce===void 0||(Ge=Ce.handleScroll)===null||Ge===void 0||Ge.call(Ce),(Le=r.headerTopAffixRef.value)===null||Le===void 0||(De=Le.handleScroll)===null||De===void 0||De.call(Le),(Ue=r.footerBottomAffixRef.value)===null||Ue===void 0||(ze=Ue.handleScroll)===null||ze===void 0||ze.call(Ue)},ae=function(ie){for(var ye={},Ce=0,Ge=ie.length;Ce<Ge;Ce++)for(var Le=ie[Ce].children,De=0,Ue=Le.length;De<Ue;De++){var ze=Le[De],Ve=ze.dataset.colkey;ye[Ve]=ze.getBoundingClientRect().width}return ye},oe=function(ie){if(ie instanceof HTMLCollection){if($.value)return;E.value=ae(ie)}else E.value=E.value||{},Object.entries(ie).forEach(function(ye){var Ce=$e(ye,2),Ge=Ce[0],Le=Ce[1];E.value[Ge]=Le});return E.value},ce=function(){var ie=setTimeout(function(){var ye;if(ee(),!U.value){var Ce=(ye=w.value)===null||ye===void 0?void 0:ye.querySelector("thead");Ce&&(oe(Ce.children),clearTimeout(ie))}},0)},ge=function(){E.value={}},pe=function(ie){var ye,Ce,Ge;(ye=t.onScrollX)===null||ye===void 0||ye.call(t,{e:ie}),(Ce=t.onScrollY)===null||Ce===void 0||Ce.call(t,{e:ie}),(Ge=t.onScroll)===null||Ge===void 0||Ge.call(t,{e:ie})},_e=function(ie){if(ie==="calculate"){var ye,Ce=(ye=w.value)===null||ye===void 0||(ye=ye.querySelector("thead"))===null||ye===void 0?void 0:ye.children;return Ce?ae(Ce):{}}return E.value||{}};l.watch([y,i,p,o,s,x,C,I,c,u,d],P,{immediate:!0}),l.watch([I,i],function(){var me=setTimeout(function(){I.value&&z(w.value),clearTimeout(me)},0)},{immediate:!0}),l.watch([f,y,i,p,w],function(){w.value&&R()},{immediate:!0}),l.watch(n,function(){ge()}),l.watch([y,p,o,c,x,h,v,s],function(){var me=setTimeout(function(){ce(),re(),clearTimeout(me)},60)},{immediate:!0}),l.watch([n],function(me,ie){var ye=$e(me,1),Ce=ye[0],Ge=$e(ie,1),Le=Ge[0],De=Ce.map(function(_r){return _r.colKey}),Ue=Le.map(function(_r){return _r.colKey});if(De.length<Ue.length){var ze=D0e(Ue,De),Ve=_e("calculate"),et=0;ze.forEach(function(_r){et+=Ve[_r]});var vt=Ai(Ve,Ue),_t=Object.values(vt).reduce(function(){var _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Ko=arguments.length>1?arguments[1]:void 0;return _r+Ko}),Yn=w.value.clientWidth,Rr=_t-et;X(Math.max(Yn,Rr))}});var be=function(){ce(),R(),re(),(I.value||x.value)&&(P(),z(w.value,{skipScrollLimit:!0})),o.value==="auto"&&oe(_e("calculate"))},Se=fo(function(){be()},30),Ne=null;function Ae(me){typeof window>"u"||oo()<11||typeof window.ResizeObserver>"u"||(At(window,"resize",Se),Ne=new window.ResizeObserver(function(){var ie=setTimeout(function(){be(),clearTimeout(ie)},200)}),Ne.observe(me),b.value=me)}l.onMounted(function(){var me=ame();_.value=me,ce();var ie=I.value||x.value||!U.value||!y.value.length,ye=typeof window<"u",Ce=ye&&typeof window.ResizeObserver<"u";(ie&&oo()<11||!Ce)&&qt(window,"resize",Se)}),l.onBeforeUnmount(function(){var me,ie;typeof window<"u"&&At(window,"resize",Se),(me=Ne)===null||me===void 0||me.unobserve(b.value),(ie=Ne)===null||ie===void 0||ie.disconnect()});var Pe=function(ie){y.value=ie},Me=function(){P(),R()};return{tableWidth:T,tableElmWidth:k,thWidthList:E,isFixedHeader:x,isWidthOverflow:C,tableContentRef:w,isFixedColumn:I,showColumnShadow:N,rowAndColFixedPosition:O,virtualScrollHeaderPos:B,scrollbarWidth:_,setData:Pe,refreshTable:be,setTableElmWidth:X,emitScrollEvent:pe,updateThWidthListHandler:ce,updateColumnFixedShadow:z,setUseFixedTableElmRef:F,getThWidthList:_e,updateThWidthList:oe,addTableResizeObserver:Ae,updateTableAfterColumnResize:Me}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function L0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F0e(t,e){var n=l.toRefs(t),r=n.pagination,a=n.data,i=n.disableDataPage,o=Qe(),s=o.classPrefix,c=l.ref(t.pagination),u=l.ref([]),d=l.ref(!1),f=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,m=t.data,y=!i.value&&m.length>g;if(d.value=y,y){var b=(p-1)*g,w=p*g;u.value=m.slice(b,w)}else u.value=m};l.watch(function(){var v,p;return[(v=r.value)===null||v===void 0?void 0:v.current,(p=r.value)===null||p===void 0?void 0:p.pageSize,a.value.length,i]},function(){if(!(!r.value||!r.value.current)){var v=r.value,p=v.current,g=v.pageSize;c.value={current:p,pageSize:g},f(r.value.current,r.value.pageSize)}},{immediate:!0}),l.watch([a],function(){var v,p;if(!(!r.value||!r.value.defaultCurrent)){var g=!!r.value.current;g||f((v=c.value.current)!==null&&v!==void 0?v:r.value.defaultCurrent,(p=c.value.pageSize)!==null&&p!==void 0?p:r.value.defaultPageSize)}},{immediate:!0});var h=function(){if(!t.pagination)return null;var p=L0e({},t.pagination);return delete p.onChange,l.createVNode("div",{class:"".concat(s.value,"-table__pagination")},[l.createVNode(Dy,l.mergeProps({size:t.size==="large"?null:t.size},p,{onChange:function(m){var y,b,w;(y=t.pagination)===null||y===void 0||(b=y.onChange)===null||b===void 0||b.call(y,m),c.value=m,f(m.current,m.pageSize),(w=t.onPageChange)===null||w===void 0||w.call(t,m,u.value)}}),{totalContent:e.slots.totalContent})])};return{isPaginateData:d,dataSource:u,innerPagination:c,renderPagination:h}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function B0e(t){var e=l.ref(),n=l.ref(),r=l.ref(),a=l.ref(),i=l.ref(),o=l.ref(!0),s=l.ref(!0),c=l.ref(!0),u=!1,d=!1,f=l.computed(function(){return t.scroll&&t.scroll.type==="virtual"&&(t.scroll.threshold||100)<t.data.length}),h=l.computed(function(){return!!(t.headerAffixedTop||t.footerAffixedBottom||t.horizontalScrollAffixedBottom)}),v=0,p=function(K){if(!(!h.value&&!f.value)){var P=K;if(!P&&e.value&&(v=0,P=e.value),!!P){var R=P.scrollLeft;if(v!==R){v=R;for(var X=[e.value,n.value,r.value,a.value],ee=0,re=X.length;ee<re;ee++)X[ee]&&K!==X[ee]&&(X[ee].scrollLeft=R)}}}},g=function(K,P,R){return P.top+R<K.top&&K.top>K.height},m=function(K){return Nn(K)?0:K.offsetTop||0},y=function(){var K,P,R;if(!(!h.value&&!f.value&&!e.value)){var X=(K=e.value)===null||K===void 0?void 0:K.getBoundingClientRect(),ee=(P=e.value)===null||P===void 0||(P=P.querySelector("thead"))===null||P===void 0?void 0:P.getBoundingClientRect(),re=(ee==null?void 0:ee.height)||0,ae=(R=r.value)===null||R===void 0?void 0:R.getBoundingClientRect();if((t.headerAffixedTop||f.value)&&n.value){var oe=m(t.headerAffixProps||t.headerAffixedTop),ce=(ae==null?void 0:ae.height)||0,ge=Math.abs(X.top)<X.height-re-oe-ce;f.value&&(ge=X.top>-1*ee.height),o.value=ge}if(t.footerAffixedBottom&&r!==null&&r!==void 0&&r.value)s.value=g(ae,X,re);else if(t.horizontalScrollAffixedBottom&&a!==null&&a!==void 0&&a.value){var pe=a.value.getBoundingClientRect();s.value=g(pe,X,re)}if(t.paginationAffixedBottom&&i.value){var _e=i.value.getBoundingClientRect();c.value=g(_e,X,re)}}},b=function(){y()},w=function(){p(r.value)},x=function(){p(n.value)},C=function(){p(a.value)},S=function(){p(e.value)},_=function(){qt(r.value,"scroll",w)},O=function(){At(r.value,"scroll",w)},N=function(){qt(n.value,"scroll",x),$()},B=function(){u||At(n.value,"scroll",x),U()},T=function(){qt(a.value,"scroll",C)},k=function(){At(a.value,"scroll",C)},E=function(){qt(e.value,"scroll",S),$()},I=function(){u||At(e.value,"scroll",S),U()},A=function(){u=!0},M=function(){u=!1,d||(At(n.value,"scroll",x),At(e.value,"scroll",S))},$=function(){d=!0},U=function(){d=!1},F=[],j=function(K){var P=fo(function(re){At(K,"scroll",re)},200);function R(){p(K),P(R)}function X(re){re.composedPath().includes(K)&&(F.forEach(function(ae){return ae()}),F.length=0,qt(K,"scroll",R),P(R),F.push(function(){At(K,"scroll",R)}))}qt(K,"touchstart",X);function ee(){At(K,"touchstart",X)}return{removeElementTouchScrollListener:ee}},W=[],H=function(){W.forEach(function(K){return K()}),W.length=0},J=function(){At(window,"mousedown",A),At(window,"mouseup",M),H(),n.value&&(At(n.value,"mouseenter",N),At(n.value,"mouseleave",B)),r.value&&(At(r.value,"mouseenter",_),At(r.value,"mouseleave",O)),e.value&&(At(e.value,"mouseenter",E),At(e.value,"mouseleave",I)),a.value&&(At(a.value,"mouseenter",T),At(a.value,"mouseleave",k))},Y=function(){if(qt(window,"mousedown",A),qt(window,"mouseup",M),J(),n.value){qt(n.value,"mouseenter",N),qt(n.value,"mouseleave",B);var K=j(n.value),P=K.removeElementTouchScrollListener;W.push(P)}if(t.footerAffixedBottom&&r.value){qt(r.value,"mouseenter",_),qt(r.value,"mouseleave",O);var R=j(r.value),X=R.removeElementTouchScrollListener;W.push(X)}if(t.horizontalScrollAffixedBottom&&a.value){qt(a.value,"mouseenter",T),qt(a.value,"mouseleave",k);var ee=j(a.value),re=ee.removeElementTouchScrollListener;W.push(re)}if((h.value||f.value)&&e.value){qt(e.value,"mouseenter",E),qt(e.value,"mouseleave",I);var ae=j(e.value),oe=ae.removeElementTouchScrollListener;W.push(oe)}},D=function(){if(!(!h.value&&!t.paginationAffixedBottom))var K=setTimeout(function(){h.value||t.paginationAffixedBottom?qt(document,"scroll",b):At(document,"scroll",b),clearTimeout(K)})};l.watch([n,r,a,e],function(){Y(),p(),y()}),l.watch(h,D),l.watch(function(){return[t.data,t.columns,t.headerAffixedTop,t.footerAffixedBottom,t.horizontalScrollAffixedBottom]},function(){p()}),l.onBeforeUnmount(function(){At(document,"scroll",b),J(),n.value=null,r.value=null,a.value=null,e.value=null});var q=function(K){e.value=K,D()};return{showAffixHeader:o,showAffixFooter:s,showAffixPagination:c,affixHeaderRef:n,affixFooterRef:r,horizontalScrollbarRef:a,paginationRef:i,onHorizontalScroll:p,setTableContentRef:q,updateAffixHeaderOrFooter:y}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Pb(t,e){if(t){for(var n=t instanceof Array?t:[t],r={},a=0;a<n.length;a++){var i=n[a];if(i){var o=Re(i)?i(e):i;r=o instanceof Array?Pb(o,e):Object.assign(r,o)}}return r}}function Ib(t,e,n){for(var r=t instanceof Array?t:[t],a=e.row,i=e.rowIndex,o=[],s=0,c=r.length;s<c;s++){var u=r[s],d=Re(u)?u(e):u;if(ot(d)&&!(d instanceof Array)){d[i]&&(d=d[i]);var f=je(a,n||"id");d[f]&&(d=d[f])}else d instanceof Array&&(d=Ib(d,e,n));o=o.concat(d)}return o}function Ab(t,e){for(var n=t instanceof Array?t:[t],r=[],a=0,i=n.length;a<i;a++){var o=n[a];Re(o)?r.push(o(e)):r.push(o)}return r}function N5(t,e){if(!(!t||!e)){var n=t==null?void 0:t.find(function(s){return s.colKey===e});if(n)return n;for(var r=0,a=t.length;r<a;r++){var i;if((i=t[r])!==null&&i!==void 0&&(i=i.children)!==null&&i!==void 0&&i.length){var o;return N5((o=t[r])===null||o===void 0?void 0:o.children,e)}}}}function Cp(t,e){return wt(t)==="object"?t:wt(e)==="object"?e:{}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function j0e(t,e,n){var r=l.computed(function(){return Math.max(n.rowHeight||48,48)}),a=l.ref(!1),i=l.computed(function(){return(n==null?void 0:n.type)==="lazy"&&!a.value}),o=!Si&&window.requestAnimationFrame||function(c){return setTimeout(c,16.6)},s=function(){a.value||o(function(){a.value=!0})};return l.onMounted(function(){(n==null?void 0:n.type)==="lazy"&&l.nextTick(function(){var c=Math.max(10,n.bufferSize||10),u=r.value*c;!(e!=null&&e.value)||!(t!=null&&t.value)||Ud(e.value,t.value,s,u)})}),{hasLazyLoadHolder:i,tRowHeight:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Zd(t,e,n,r){var a=je(t,e);return a===void 0&&st.error("Table","rowKey is wrong, can not get unique identifier of row."),[a,n||r].join("_")}function $0e(t){var e;return(e=t.split("_"))===null||e===void 0?void 0:e[0]}function D5(t,e,n,r){var a=l.ref(new Map),i=function(c,u){var d=c.rowIndex,f=c.colIndex;if(!(!u.rowspan&&!u.colspan)){for(var h=d+(u.rowspan||1),v=f+(u.colspan||1),p=d;p<h;p++)for(var g=f;g<v;g++)if(p!==d||g!==f){if(!t.value[p]||!e.value[g])return;var m=Zd(t.value[p],n.value,e.value[g].colKey,g),y=a.value.get(m)||{};y.skipped=!0,a.value.set(m,y)}}},o=function(c,u,d){var f;if((f=a.value)===null||f===void 0||f.clear(),!(!c||!d))for(var h=0,v=c.length;h<v;h++)for(var p=c[h],g=0,m=u.length;g<m;g++){var y=u[g],b={row:p,col:y,rowIndex:h,colIndex:g},w=Zd(p,n.value,y.colKey,g),x=a.value.get(w)||{},C=d(b)||{};(C.rowspan||C.colspan||x.rowspan||x.colspan)&&(C.rowspan&&(x.rowspan=C.rowspan),C.colspan&&(x.colspan=C.colspan),a.value.set(w,x)),i==null||i(b,x)}};return l.watch(function(){return[t.value,e.value,r]},function(){o(t.value,e.value,r==null?void 0:r.value)},{immediate:!0}),{skipSpansMap:a}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U0e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var M5=["rowKey","rowClassName","columns","fixedRows","footData","rowAttributes","rowspanAndColspan","scroll","cellEmptyContent","pagination","attach","onCellClick","onRowClick","onRowDblclick","onRowMouseover","onRowMousedown","onRowMouseenter","onRowMouseleave","onRowMouseup"],z0e=["click","dblclick","mouseover","mousedown","mouseenter","mouseleave","mouseup"];function _p(t,e,n){var r=t.col,a=t.row,i=t.rowIndex;if(r.colKey==="serial-number"){var o=(n==null?void 0:n.pagination)||{},s=o.current,c=o.pageSize,u=o.defaultCurrent,d=o.defaultPageSize,f=s||u,h=c||d;return h&&f?h*(f-1)+i+1:i+1}if(Re(r.cell))return r.cell(l.h,t);if(e[r.colKey])return e[r.colKey](t);if(Je(r.cell)&&e[r.cell])return e[r.cell](t);if(Re(r.render))return r.render(l.h,qr(qr({},t),{},{type:"cell"}));var v=je(a,r.colKey);return[void 0,"",null].includes(v)?n!=null&&n.cellEmptyContent?Re(n.cellEmptyContent)?n.cellEmptyContent(l.h,t):n.cellEmptyContent:e.cellEmptyContent?e.cellEmptyContent(t):e["cell-empty-content"]?e["cell-empty-content"](t):v:v}var H0e=l.defineComponent({name:"TR",props:qr(qr({row:Object,rowIndex:Number,dataLength:Number,ellipsisOverlayClassName:String,classPrefix:String,rowAndColFixedPosition:Map,skipSpansMap:Map,virtualConfig:Object,active:Boolean,isHover:Boolean},Ai(Gc,M5)),{},{tableElm:{},tableContentElm:{}}),emits:["row-mounted"],setup:function(e,n){var r=l.toRefs(e),a=r.tableContentElm,i=r.active,o=r.isHover,s=l.ref(null),c=Kr(),u=c.tdEllipsisClass,d=c.tableBaseClass,f=c.tableColFixedClasses,h=c.tableRowFixedClasses,v=c.tdAlignClasses,p=c.tableDraggableClasses,g=l.computed(function(){return R0e(je(e.row,e.rowKey||"id"),e.rowIndex,e.dataLength,e.fixedRows,e.rowAndColFixedPosition,h,e.virtualConfig.isVirtualScroll.value?e.virtualConfig.translateY.value:0)}),m=l.computed(function(){return Pb(e.rowAttributes,{row:e.row,rowIndex:e.rowIndex,type:"body"})||{}}),y=l.computed(function(){var N,B=Ib(e.rowClassName,{row:e.row,rowKey:e.rowKey,rowIndex:e.rowIndex,type:"body"},e.rowKey||"id");return[(N=g.value)===null||N===void 0?void 0:N.classes,B,V(V({},"".concat(e.classPrefix,"-table__row--active"),i.value),"".concat(e.classPrefix,"-table__row--hover"),o.value)].filter(function(T){return T})}),b=j0e(a,s,l.reactive(qr(qr({},e.scroll),{},{rowIndex:e.rowIndex}))),w=b.hasLazyLoadHolder,x=b.tRowHeight,C=function(B,T){var k={};return z0e.forEach(function(E){k["on".concat(av(E))]=function(I){var A,M={e:I,row:B,index:T};(A=e["onRow".concat(av(E))])===null||A===void 0||A.call(e,M)}}),k},S=function(){var B;(B=e.virtualConfig)!==null&&B!==void 0&&B.isVirtualScroll.value&&n.emit("row-mounted",{ref:s,data:e.row})};l.onMounted(function(){l.nextTick(function(){S()})}),l.onUpdated(function(){l.nextTick(function(){S()})});function _(N,B){var T=B.cellNode,k=N.col,E=N.colIndex,I;Re(k.ellipsis)?I=k.ellipsis(l.h,N):wt(k.ellipsis)==="object"&&Re(k.ellipsis.content)?I=k.ellipsis.content(l.h,N):n.slots["ellipsis-".concat(k.colKey)]?I=n.slots["ellipsis-".concat(k.colKey)](N):n.slots.ellipsis&&(I=n.slots.ellipsis(N));var A={};wt(k.ellipsis)==="object"&&(A="props"in k.ellipsis?k.ellipsis.props:k.ellipsis||void 0);var M=e.tableElm,$=E===0?"top-left":"top";return $=E===e.columns.length-1?"top-right":$,l.createVNode(kb,{placement:$,attach:M?function(){return M}:void 0,tooltipContent:I&&function(){return I},tooltipProps:A,overlayClassName:e.ellipsisOverlayClassName,classPrefix:e.classPrefix},U0e(T)?T:{default:function(){return[T]}})}function O(N,B){var T=N.col,k=N.colIndex,E=N.rowIndex,I=B.cellSpans,A=B.dataLength,M=B.rowAndColFixedPosition,$=_p(N,n.slots,{cellEmptyContent:B.cellEmptyContent,pagination:e.pagination}),U=Eb(T,k,M,f),F=Ab(T.className,qr(qr({},N),{},{type:"td"})),j=[U.classes,F,V(V(V(V(V({},u,T.ellipsis),d.tdLastRow,E+I.rowspan===A),d.tdFirstCol,k===0&&e.rowspanAndColspan),v[T.align],T.align&&T.align!=="left"),p.handle,T.colKey==="drag")],W=function(D){var q,z=qr(qr({},N),{},{e:D});T.stopPropagation&&D.stopPropagation(),(q=e.onCellClick)===null||q===void 0||q.call(e,z)},H=Re(T.attrs)?T.attrs(qr(qr({},N),{},{type:"td"})):T.attrs,J=qr(qr({},H),I);return l.createVNode("td",l.mergeProps({key:T.colKey||k,class:j,style:U.style},J,{onClick:W}),[T.ellipsis?_(N,{cellNode:$}):$])}return function(){var N,B=e.columns,T=e.skipSpansMap,k=e.row,E=e.dataLength,I=e.rowAndColFixedPosition,A=B==null?void 0:B.map(function(M,$){var U={},F={row:k,col:M,rowIndex:e.rowIndex,colIndex:$},j=null;if(e.skipSpansMap.size){var W,H,J=Zd(k,e.rowKey,M.colKey,$);if(j=T.get(J)||{},((W=j)===null||W===void 0?void 0:W.rowspan)>1&&(U.rowspan=j.rowspan),((H=j)===null||H===void 0?void 0:H.colspan)>1&&(U.colspan=j.colspan),j.skipped)return null}return O(F,{dataLength:E,rowAndColFixedPosition:I,columnLength:B.length,cellSpans:U,cellEmptyContent:e.cellEmptyContent})});return l.createVNode("tr",l.mergeProps({ref:s},m.value,{style:(N=g.value)===null||N===void 0?void 0:N.style,class:y.value},C(k,e.rowIndex)),[w.value?[l.createVNode("td",{style:{height:"".concat(x.value,"px"),border:"none"}},null)]:A])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Sp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var F5=["bordered","rowKey","rowClassName","rowAttributes","loading","empty","fixedRows","firstFullRow","lastFullRow","rowspanAndColspan","scroll","cellEmptyContent","pagination","attach","onCellClick","onPageChange","onRowClick","onRowDblclick","onRowMouseover","onRowMousedown","onRowMouseenter","onRowMouseleave","onRowMouseup","onScroll","onScrollX","onScrollY"],W0e=l.defineComponent({name:"TBody",props:Sp({classPrefix:String,data:Array,columns:Array,ellipsisOverlayClassName:String,rowAndColFixedPosition:Map,showColumnShadow:Object,tableElm:{},tableWidth:Number,isWidthOverflow:Boolean,virtualConfig:Object,tableContentElm:{},handleRowMounted:Function,renderExpandedRow:Function,firstFullRow:[String,Function],lastFullRow:[String,Function],activeRow:[Array],hoverRow:[String,Number]},Ai(Gc,F5)),setup:function(e){var n=We(),r=l.toRefs(e),a=r.data,i=r.columns,o=r.rowKey,s=r.rowspanAndColspan,c=Qe("table",e.locale),u=c.t,d=c.globalConfig,f=Kr(),h=f.tableFullRowClasses,v=f.tableBaseClass,p=D5(a,i,o,s),g=p.skipSpansMap,m=l.computed(function(){return[v.body]});return{t:u,globalConfig:d,renderTNode:n,tableFullRowClasses:h,tbodyClasses:m,tableBaseClass:v,skipSpansMap:g}},render:function(){var e=this,n,r,a,i,o=function(b){var w=e.bordered?e.tableWidth-2:e.tableWidth;return l.createVNode("tr",{class:[e.tableBaseClass.emptyRow,V({},e.tableFullRowClasses.base,e.isWidthOverflow)]},[l.createVNode("td",{colspan:b.length},[l.createVNode("div",{class:[e.tableBaseClass.empty,V({},e.tableFullRowClasses.innerFullRow,e.isWidthOverflow)],style:e.isWidthOverflow?{width:"".concat(w,"px")}:{}},[e.renderTNode("empty")||e.t(e.globalConfig.empty)])])])},s=function(b,w){var x=Ti(w),C=e.renderTNode(x);if(["",null,void 0,!1].includes(C))return null;var S=e.isWidthOverflow&&e.columns.find(function(N){return N.fixed==="left"}),_=[e.tableFullRowClasses.base,e.tableFullRowClasses[x]],O=e.bordered?e.tableWidth-2:e.tableWidth;return l.createVNode("tr",{class:_,key:"key-full-row-".concat(w)},[l.createVNode("td",{colspan:b},[l.createVNode("div",{class:V({},e.tableFullRowClasses.innerFullRow,S),style:S?{width:"".concat(O,"px")}:{}},[l.createVNode("div",{class:e.tableFullRowClasses.innerFullElement},[C])])])])},c=this.columns.length,u=(n=this.data)===null||n===void 0?void 0:n.length,d=[],f=["classPrefix","ellipsisOverlayClassName","rowAndColFixedPosition","scroll","tableElm","tableContentElm","pagination","attach"],h=this.virtualConfig.isVirtualScroll.value?this.virtualConfig.visibleData.value:this.data;h==null||h.forEach(function(y,b){var w,x=e.rowKey||"id",C=je(y,x),S=Sp(Sp({},Ai(e.$props,M5)),{},{rowKey:x,row:y,columns:e.columns,rowIndex:y.VIRTUAL_SCROLL_INDEX||b,dataLength:u,skipSpansMap:e.skipSpansMap,virtualConfig:e.virtualConfig,active:(w=e.activeRow)===null||w===void 0?void 0:w.includes(C),isHover:e.hoverRow===C},Ai(e.$props,f));e.onCellClick&&(S.onCellClick=e.onCellClick);var _=l.createVNode(H0e,l.mergeProps({key:je(y,e.rowKey||"id")||b},S,{onRowMounted:e.handleRowMounted}),e.$slots);if(d.push(_),e.renderExpandedRow){var O={row:y,index:b,columns:e.columns,tableWidth:e.tableWidth,isWidthOverflow:e.isWidthOverflow},N=e.renderExpandedRow(O);N&&d.push(N)}});var v=[s(c,"first-full-row")].concat(d,[s(c,"last-full-row")]),p=!((r=this.data)!==null&&r!==void 0&&r.length)&&!this.loading&&!this.firstFullRow&&!this.lastFullRow,g="translateY(".concat((a=this.virtualConfig)===null||a===void 0?void 0:a.translateY.value,"px)"),m=(i=this.virtualConfig)!==null&&i!==void 0&&i.isVirtualScroll.value?{transform:g,"-ms-transform":g,"-moz-transform":g,"-webkit-transform":g}:void 0;return l.createVNode("tbody",{class:this.tbodyClasses,style:Sp({},m)},[p?o(this.columns):v])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vd(t){return t&&(isNaN(Number(t))?t:"".concat(t,"px"))}function B5(t){var e=l.toRefs(t),n=e.size,r=e.bordered,a=e.stripe,i=e.hover,o=e.verticalAlign,s=e.height,c=e.maxHeight,u=e.tableContentWidth,d=Kr(),f=d.tableBaseClass,h=d.tableAlignClasses,v=wv(),p=v.sizeClassNames,g=Qe("table",t.locale),m=g.globalConfig,y=l.computed(function(){var C;return(C=n.value)!==null&&C!==void 0?C:m.value.size}),b=l.computed(function(){return[f.table,V(V(V(V(V(V(V(V({},p[y.value],y.value!=="medium"),f.bordered,r.value),f.striped,a.value),f.hover,i.value),f.loading,t.loading),f.affixedHeader,t.headerAffixedTop),f.rowspanAndColspan,t.rowspanAndColspan),h[o.value],o.value!=="middle")]}),w=l.computed(function(){return{height:Vd(s.value),maxHeight:Vd(c.value)}}),x=l.computed(function(){return{width:Vd(u.value)}});return{tableClasses:b,sizeClassNames:p,tableElementStyles:x,tableContentStyles:w}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K0e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var $5=l.defineComponent({name:"THead",props:{classPrefix:String,ellipsisOverlayClassName:String,isFixedHeader:Boolean,thDraggable:Boolean,maxHeight:[String,Number],height:[String,Number],rowAndColFixedPosition:Map,thWidthList:Object,bordered:Boolean,isMultipleHeader:Boolean,resizable:Boolean,attach:[String,Function],spansAndLeafNodes:Object,thList:Array,columnResizeParams:Object,showColumnShadow:Object},setup:function(e,n){var r=n.slots,a=l.ref(),i=Kr(),o=i.tableHeaderClasses,s=i.tableBaseClass,c=l.computed(function(){return[o.header,V(V(V({},o.fixed,!!(e.maxHeight||e.height)),s.bordered,e.bordered&&e.isMultipleHeader),o.multipleHeader,e.isMultipleHeader)]}),u=l.computed(function(){var f={},h=function(g){for(var m=0,y=g.length;m<y;m++){var b=g[m];if(b.colspan>1)for(var w=m+1;w<m+b.colspan;w++)g[w]&&(f[g[w].colKey]=!0);b.children&&h(b.children)}},v=e.thList[0];return h(v),f}),d=function(h){for(var v=h;v;){var p;if(v=v.parentNode,(p=v)!==null&&p!==void 0&&(p=p.classList)!==null&&p!==void 0&&p.contains("".concat(e.classPrefix,"-table")))break}return v};return Ri(Ri({},i),{},{colspanSkipMap:u,theadClasses:c,theadRef:a,slots:r,getTableNode:d})},render:function(){var e=this,n=function(a,i){var o=new Map,s=e.spansAndLeafNodes.rowspanAndColspanMap;return e.thList.map(function(c,u){var d=c.map(function(f,h){var v;if(e.colspanSkipMap[f.colKey])return null;var p=s.get(f);if(h===0&&p.rowspan>1)for(var g=u+1;g<u+p.rowspan;g++)o.set(e.thList[g][0],!0);var m=Eb(f,h,a,e.tableColFixedClasses),y={col:f,colIndex:h,row:{},rowIndex:-1},b=Ab(f.className,Ri(Ri({},y),{},{type:"th"})),w=Ab(f.thClassName,Ri(Ri({},y),{},{type:"th"})),x=e.showColumnShadow.left&&f.fixed==="left",C=e.showColumnShadow.right&&f.fixed==="right",S=e.thDraggable&&!(x||C),_=[m.classes,b,w,V(V(V(V({},e.tableHeaderClasses.thBordered,o.get(f)),"".concat(e.classPrefix,"-table__th-").concat(f.colKey),f.colKey),e.tdAlignClasses[f.align],f.align&&f.align!=="left"),e.tableDraggableClasses.dragSortTh,S)],O=!((v=f.children)!==null&&v!==void 0&&v.length),N=O&&i!==null&&i!==void 0&&i[f.colKey]?"".concat(i==null?void 0:i[f.colKey],"px"):void 0,B=Ri(Ri({},m.style||{}),{},{width:N}),T=xp(e.slots,f,h),k=e.resizable||!S?{onMousedown:function($){if(e.resizable){var U,F;(U=e.columnResizeParams)===null||U===void 0||(F=U.onColumnMousedown)===null||F===void 0||F.call(U,$,f,h)}if(!S)var j=setTimeout(function(){var W,H=e.theadRef.querySelectorAll("th");(W=H[h])===null||W===void 0||W.removeAttribute("draggable"),clearTimeout(j)},10)},onMousemove:function($){var U,F;e.resizable&&((U=e.columnResizeParams)===null||U===void 0||(F=U.onColumnMouseover)===null||F===void 0||F.call(U,$,f))}}:{},E=Re(f.ellipsisTitle)?f.ellipsisTitle(l.h,{col:f,colIndex:h}):void 0,I=f.ellipsisTitle!==void 0?!!f.ellipsisTitle:!!f.ellipsis,A=(Re(f.attrs)?f.attrs(Ri(Ri({},y),{},{type:"th"})):f.attrs)||{};return f.colspan>1&&(A.colspan=f.colspan),l.createVNode("th",l.mergeProps({key:f.colKey,"data-colkey":f.colKey,class:_,style:B},A,p,k),[l.createVNode("div",{class:e.tableBaseClass.thCellInner},[I?l.createVNode(kb,{placement:"bottom",attach:e.attach||(e.theadRef?function(){return e.getTableNode(e.theadRef)}:void 0),tooltipContent:E&&function(){return E},tooltipProps:wt(f.ellipsisTitle)==="object"?f.ellipsisTitle:void 0,overlayClassName:e.ellipsisOverlayClassName,classPrefix:e.classPrefix},K0e(T)?T:{default:function(){return[T]}}):T])])});return l.createVNode("tr",{key:u},[d])})};return l.createVNode("thead",{ref:"theadRef",class:this.theadClasses},[n(this.rowAndColFixedPosition,this.thWidthList)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function U5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var z5=l.defineComponent({name:"TFoot",props:{rowKey:String,isFixedHeader:Boolean,rowAndColFixedPosition:Map,footData:Array,columns:Array,rowAttributes:[Array,Object,Function],rowClassName:[Array,String,Object,Function],thWidthList:[Object],footerSummary:[String,Function],rowspanAndColspanInFooter:Function,virtualScroll:Boolean},setup:function(e,n){var r=We(),a=Kr(),i=l.toRefs(e),o=i.footData,s=i.columns,c=i.rowKey,u=i.rowspanAndColspanInFooter,d=D5(o,s,c,u),f=d.skipSpansMap,h=function(p){var g=p.col,m=p.row;return Re(g.foot)?g.foot(l.h,p):Je(g.foot)&&n.slots[g.foot]?n.slots[g.foot](p)||g.foot:g.foot||je(m,g.colKey)};return Tp(Tp({skipSpansMap:f},a),{},{renderTFootCell:h,renderTNode:r})},render:function(){var e,n=this;if(!this.columns)return null;var r=[this.tableFooterClasses.footer,V({},this.tableFooterClasses.fixed,this.isFixedHeader)],a=(e=this.footData)===null||e===void 0?void 0:e.map(function(o,s){var c=Pb(n.rowAttributes,{row:o,rowIndex:s,type:"foot"}),u=Ib(n.rowClassName,{row:o,rowIndex:s,type:"foot"},n.rowKey||"id");return l.createVNode("tr",l.mergeProps(c,{key:s,class:u}),[n.columns.map(function(d,f){var h,v={},p=null;if(n.skipSpansMap.size){var g,m,y=Zd(o,n.rowKey,d.colKey,f);if(p=n.skipSpansMap.get(y)||{},((g=p)===null||g===void 0?void 0:g.rowspan)>1&&(v.rowspan=p.rowspan),((m=p)===null||m===void 0?void 0:m.colspan)>1&&(v.colspan=p.colspan),p.skipped)return null}var b=Eb(d,f,n.rowAndColFixedPosition,n.tableColFixedClasses),w=Tp({},b.style);return(h=n.thWidthList)!==null&&h!==void 0&&h[d.colKey]&&(w.width="".concat(n.thWidthList[d.colKey],"px")),l.createVNode("td",l.mergeProps(Tp({key:d.colKey},v),{class:b.classes,style:w}),[n.renderTFootCell({row:o,rowIndex:s,col:d,colIndex:f})])})])}),i=this.renderTNode("footerSummary");return!i&&(!this.footData||!this.footData.length)?null:l.createVNode("tfoot",{ref:"tFooterRef",class:r,style:{visibility:this.virtualScroll?"hidden":"visible"}},[i&&l.createVNode("tr",{class:this.tableFullRowClasses.base},[l.createVNode("td",{colspan:this.columns.length},[l.createVNode("div",{class:this.tableFullRowClasses.innerFullElement},[i])])]),a])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function q0e(t,e){var n=l.toRefs(t),r=n.data,a=n.activeRowType,i=n.activeRowKeys,o=n.defaultActiveRowKeys,s=n.disableSpaceInactiveRow,c=l.ref(-1),u=l.ref(!1),d=l.ref(!1),f=l.ref(-1),h=gn(i,o.value,t.onActiveChange,"activeRowKeys"),v=$e(h,2),p=v[0],g=v[1],m=function(E){var I=E.row,A=E.index,M=je(I,t.rowKey);if(a.value==="single"){var $=p.value.length>1?[M]:[];g($,{type:"inactive",activeRowList:[{row:I,rowIndex:A}],currentRowData:I})}else if(a.value==="multiple"){for(var U=p.value.filter(function(J){return J!==M}),F=[],j=0,W=r.value.length;j<W;j++){var H=r.value[j];U.includes(je(H,t.rowKey))&&F.push({row:H,rowIndex:j})}g(U,{type:"inactive",activeRowList:F,currentRowData:I})}},y=function(E){var I=E.row,A=je(I,t.rowKey);if(a.value==="single")g([A],{activeRowList:[{row:I,rowIndex:E.index}],currentRowData:I,type:"active"});else{for(var M=p.value.concat(A),$=[],U=0,F=r.value.length;U<F;U++){var j=r.value[U];M.includes(je(j,t.rowKey))&&$.push({row:j,rowIndex:U})}g(M,{activeRowList:$,currentRowData:I,type:"active"})}},b=function(E){document.getSelection().removeAllRanges();for(var I=E.row,A=c.value,M=Math.min(f.value,A),$=Math.max(f.value,A),U=[],F=M;F<=$;F++)U.push({row:r.value[F],rowIndex:F});var j=U.map(function(W){return je(W.row,t.rowKey)});g(j,{activeRowList:U,type:"active",currentRowData:I})},w=function(){for(var E=[],I=0,A=r.value.length;I<A;I++){var M=r.value[I],$=je(M,t.rowKey);p.value.includes($)&&E.push({row:M,rowIndex:I})}return E},x=function(E,I){if(a.value){var A=E.row,M=E.index,$=je(A,t.rowKey);u.value?(c.value=M,b(E),d.value=!0):p.value.includes($)&&(I==null?void 0:I.action)!=="active"?s.value||(m(E),c.value=M):(y(E),c.value=M)}},C=function(){var E;g([],{activeRowList:[],currentRowData:void 0,type:"inactive"}),(E=t.onActiveRowAction)===null||E===void 0||E.call(t,{action:"clear",activeRowList:[]}),c.value=-1},S=function(){var E,I=r.value.map(function(M){return je(M,t.rowKey)}),A=r.value.map(function(M,$){return{row:M,rowIndex:$}});g(I,{activeRowList:A,currentRowData:void 0,type:"active"}),(E=t.onActiveRowAction)===null||E===void 0||E.call(t,{action:"select-all",activeRowList:A}),c.value=-1},_=function(){d.value=!1},O=function(E){var I,A=E.code||((I=E.key)===null||I===void 0?void 0:I.trim());if(Av.test(A)){E.preventDefault();var M=Math.min(r.value.length-1,c.value+1);a.value==="single"?x({row:r.value[M],index:M},{action:"active"}):c.value=M}else if(Nv.test(A)){E.preventDefault();var $=Math.max(0,c.value-1);a.value==="single"?x({row:r.value[$],index:$},{action:"active"}):c.value=$}else if(Dv.test(A)){E.preventDefault();var U=c.value;if(d.value){var F;(F=t.onActiveRowAction)===null||F===void 0||F.call(t,{action:"shift-area-selection",activeRowList:w()})}else if(!s.value)x({row:r.value[U],index:U});else{var j;(j=t.onActiveRowAction)===null||j===void 0||j.call(t,{action:"space-one-selection",activeRowList:w()})}}else RE.test(A)?(u.value=!0,f.value=c.value):DE.test(A)||ME.test(A)?(C(),_()):LE.test(A)&&S();Dv.test(A)||_()},N=function(E){var I,A=E.code||((I=E.key)===null||I===void 0?void 0:I.trim());RE.test(A)&&(u.value=!1)},B=function(){qt(e.value,"keydown",O),qt(e.value,"keyup",N)},T=function(){At(e.value,"keydown",O),At(e.value,"keyup",N)};return{tActiveRow:p,onHighlightRow:x,addHighlightKeyboardListener:B,removeHighlightKeyboardListener:T}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function G0e(t,e){var n=l.toRefs(t),r=n.hover,a=n.data,i=n.activeRowType,o=n.keyboardRowHover,s=n.disableSpaceInactiveRow,c=l.ref(),u=l.ref(-1),d=l.ref(0),f=l.computed(function(){return i.value==="single"?!1:i.value==="multiple"?!0:r.value||o.value}),h=function(b,w){var x=je(b.row,t.rowKey);c.value===x&&(w==null?void 0:w.action)!=="hover"?s.value||(c.value=void 0):c.value=x,u.value=b.index},v=function(){c.value=void 0,u.value=-1},p=function(b){var w;if(f.value){var x=b.code||((w=b.key)===null||w===void 0?void 0:w.trim());if(Av.test(x)){b.preventDefault();var C=Math.min(a.value.length-1,u.value+1);h({row:a.value[C],index:C},{action:"hover"})}else if(Nv.test(x)){b.preventDefault();var S=Math.max(0,u.value-1);h({row:a.value[S],index:S},{action:"hover"})}else if(Dv.test(x)&&t.activeRowType!=="multiple"){var _=u.value;if(h({row:a.value[_],index:_}),!t.activeRowType){var O;(O=t.onActiveRowAction)===null||O===void 0||O.call(t,{action:"space-one-selection",activeRowList:[{row:a.value[_],rowIndex:_}]})}}else if(DE.test(x)&&!t.activeRowType){var N;c.value=void 0,(N=t.onActiveRowAction)===null||N===void 0||N.call(t,{action:"clear",activeRowList:[]})}else if(LE.test(x)&&!t.activeRowType){var B;(B=t.onActiveRowAction)===null||B===void 0||B.call(t,{action:"select-all",activeRowList:[]})}else if(ME.test(x)&&!t.activeRowType){var T;(T=t.onActiveRowAction)===null||T===void 0||T.call(t,{action:"clear",activeRowList:[]})}Xle.test(x)||Jle.test(x)?d.value=void 0:d.value=0}},g=function(){qt(e.value,"keydown",p)},m=function(){At(e.value,"keydown",p)};return{hoverRow:c,needKeyboardRowHover:f,clearHoverRow:v,addRowHoverKeyboardListener:g,removeRowHoverKeyboardListener:m,tableRefTabIndex:d}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Y0e(t,e){var n=l.ref(),r=l.ref(!0),a=function(){if(!(!e.value||!t.value||n.value)){r.value=!1;var o=Ud(t.value,null,function(){r.value=!0},10);n.value=o}};return l.onMounted(a),e.value&&l.watch([e,t],a),l.onBeforeUnmount(function(){var i,o;e.value&&((i=n.value)===null||i===void 0||(o=i.unobserve)===null||o===void 0||o.call(i,t.value))}),{showElement:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function H5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W5(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var K5=l.defineComponent({name:"TBaseTable",props:pr(pr({},Gc),{},{renderExpandedRow:Function,onLeafColumnsChange:Function,thDraggable:Boolean}),emits:["show-element-change"],setup:function(e,n){var r=l.toRefs(e),a=r.lazyLoad,i=We(),o=l.ref(),s=l.ref(),c=l.ref(),u=l.ref(),d=l.ref(0),f=Kr(),h=f.classPrefix,v=f.virtualScrollClasses,p=f.tableLayoutClasses,g=f.tableBaseClass,m=f.tableColFixedClasses,y=B5(e),b=y.tableClasses,w=y.sizeClassNames,x=y.tableContentStyles,C=y.tableElementStyles,S=Qe("table",e.locale),_=S.globalConfig,O=k5(e),N=O.isMultipleHeader,B=O.spansAndLeafNodes,T=O.thList,k=l.computed(function(){var Bt;return((Bt=B.value)===null||Bt===void 0?void 0:Bt.leafColumns)||e.columns}),E=l.computed(function(){var Bt;return(Bt=e.size)!==null&&Bt!==void 0?Bt:_.value.size}),I=Y0e(o,a),A=I.showElement,M=l.ref(),$=l.ref(),U=l.ref(),F=l.ref(),j=M0e(e,n,k,{paginationAffixRef:M,horizontalScrollAffixRef:$,headerTopAffixRef:U,footerBottomAffixRef:F}),W=j.scrollbarWidth,H=j.virtualScrollHeaderPos,J=j.tableWidth,Y=j.tableElmWidth,D=j.tableContentRef,q=j.isFixedHeader,z=j.isWidthOverflow,K=j.isFixedColumn,P=j.thWidthList,R=j.showColumnShadow,X=j.rowAndColFixedPosition,ee=j.setData,re=j.refreshTable,ae=j.setTableElmWidth,oe=j.emitScrollEvent,ce=j.setUseFixedTableElmRef,ge=j.updateColumnFixedShadow,pe=j.getThWidthList,_e=j.updateThWidthList,be=j.addTableResizeObserver,Se=j.updateTableAfterColumnResize,Ne=B0e(e),Ae=Ne.affixHeaderRef,Pe=Ne.affixFooterRef,Me=Ne.horizontalScrollbarRef,me=Ne.paginationRef,ie=Ne.showAffixHeader,ye=Ne.showAffixFooter,Ce=Ne.showAffixPagination,Ge=Ne.onHorizontalScroll,Le=Ne.setTableContentRef,De=Ne.updateAffixHeaderOrFooter,Ue=F0e(e,n),ze=Ue.dataSource,Ve=Ue.innerPagination,et=Ue.isPaginateData,vt=Ue.renderPagination,_t=o0e({isWidthOverflow:z,tableContentRef:D,showColumnShadow:R,getThWidthList:pe,updateThWidthList:_e,setTableElmWidth:ae,updateTableAfterColumnResize:Se,onColumnResizeChange:e.onColumnResizeChange}),Yn=_t.resizeLineRef,Rr=_t.resizeLineStyle,_r=_t.setEffectColMap,Ko=l.computed(function(){return[b.value,V(V(V(V(V(V(V(V({},g.headerFixed,q.value),g.columnFixed,K.value),g.widthOverflow,z.value),g.multipleHeader,N.value),m.leftShadow,R.left),m.rightShadow,R.right),g.columnResizableTable,e.resizable),"".concat(h,"-table__row--active-").concat(e.activeRowType),e.activeRowType)]}),qo=l.computed(function(){return[[p[e.tableLayout]]]}),Ka=l.computed(function(){return e.bordered&&q.value&&(N.value&&z.value||!N.value)}),qa=l.computed(function(){var Bt,Rt;if(!e.bordered)return 0;var Yt=(Bt=u.value)===null||Bt===void 0?void 0:Bt.getBoundingClientRect(),En=(Rt=me.value)===null||Rt===void 0?void 0:Rt.getBoundingClientRect();return((Yt==null?void 0:Yt.height)||0)+((En==null?void 0:En.height)||0)}),Ta=q0e(e,o),Il=Ta.tActiveRow,$t=Ta.onHighlightRow,Ot=Ta.addHighlightKeyboardListener,an=Ta.removeHighlightKeyboardListener,Cn=G0e(e,o),Mr=Cn.hoverRow,hr=Cn.needKeyboardRowHover,eo=Cn.clearHoverRow,Xn=Cn.addRowHoverKeyboardListener,Go=Cn.removeRowHoverKeyboardListener,Yo=Cn.tableRefTabIndex;l.watch(s,function(){ce(s.value)}),l.watch(function(){return[e.data,ze]},function(){ee(et.value?ze.value:e.data)}),l.watch(B,function(){var Bt;(Bt=e.onLeafColumnsChange)===null||Bt===void 0||Bt.call(e,B.value.leafColumns),_r(B.value.leafColumns,null)},{immediate:!0});var Ga=function(){l.nextTick(function(){Ge(),De()})},ar=ts(function(){_e(pe("calculate"))}),ka=l.computed(function(){return{data:e.data,scroll:pr(pr({},e.scroll),{},{fixedRows:e.fixedRows})}}),tt=sb(D,ka),to=-1,Ya=function(Rt){var Yt=Rt.target||Rt.srcElement,En=Yt.scrollTop;to!==En?tt.isVirtualScroll.value&&tt.handleScroll():(to=-1,ge(Yt)),to=En,oe(Rt),e.tableLayout==="auto"&&ar()},bi=function(){var Rt;s.value&&(d.value=(Rt=s.value.querySelector("tfoot"))===null||Rt===void 0?void 0:Rt.getBoundingClientRect().height)},Xo=function(Rt){if(D.value){for(var Yt=D.value.querySelector('th[data-colkey="'.concat(Rt,'"]')),En=D.value.querySelectorAll("th.t-table__cell--fixed-left"),Lr=0,ia=0,no=En.length;ia<no;ia++)Lr+=En[ia].getBoundingClientRect().width;var sd=Yt.getBoundingClientRect(),ro=D.value.getBoundingClientRect(),ao=sd.left-ro.left-Lr;D.value.scrollTo({left:ao,behavior:"smooth"})}};l.watch(D,function(){Le(D.value),e.tableLayout==="auto"&&ar()}),l.watch(function(){return[s.value,e.footData,e.footerSummary,e.columns]},function(){var Bt=setTimeout(function(){bi(),clearTimeout(Bt)},0)}),l.watch(o,function(Bt){be(Bt)}),l.onMounted(function(){bi(),Le(D.value),be(o.value)});var ir=function(){e.activeRowType&&Ot(),hr.value&&Xn()},Kt=function(){e.activeRowType&&an(),hr.value&&Go()},ld=function(Rt){var Yt;(Yt=e.onRowClick)===null||Yt===void 0||Yt.call(e,Rt),e.activeRowType&&$t(Rt),hr.value&&eo()};l.watch([A],function(Bt){var Rt=$e(Bt,1),Yt=Rt[0];n.emit("show-element-change",Yt)},{immediate:!0});var Al=l.computed(function(){return et.value?ze.value:e.data}),Hs=function(Rt){var Yt=Rt.index;if(!Yt&&Yt!==0){var En;if(!Rt.key){st.error("Table","scrollToElement: one of `index` or `key` must exist.");return}Yt=(En=Al.value)===null||En===void 0?void 0:En.findIndex(function(qs){return je(qs,e.rowKey)===Rt.key}),Yt<0&&st.error("Table","".concat(Rt.key," does not exist in data, check `rowKey` or `data` please."))}if(tt.isVirtualScroll.value)tt.scrollToElement(pr(pr({},Rt),{},{index:Yt+1}));else{var Lr,ia,no=(Lr=c.value)===null||Lr===void 0?void 0:Lr.$el,sd=no==null||(ia=no.children)===null||ia===void 0?void 0:ia[Yt];if(sd){var ro,ao,Bm=sd.offsetTop,Ws=D.value.scrollTop,Ks=Bm-Ws-((ro=Rt.top)!==null&&ro!==void 0?ro:0);D.value.scrollBy({top:Ks,behavior:(ao=Rt.behavior)!==null&&ao!==void 0?ao:"auto"})}}};return{thList:T,classPrefix:h,innerPagination:Ve,globalConfig:_,tableFootHeight:d,virtualScrollHeaderPos:H,tableSize:E,tableWidth:J,tableElmWidth:Y,tableRef:o,tableElmRef:s,sizeClassNames:w,tableBaseClass:g,spansAndLeafNodes:B,dynamicBaseTableClasses:Ko,tableContentStyles:x,tableElementStyles:C,dividerBottom:qa,virtualScrollClasses:v,tableLayoutClasses:p,tableElmClasses:qo,tableContentRef:D,isFixedHeader:q,isWidthOverflow:z,isFixedColumn:K,rowAndColFixedPosition:X,showColumnShadow:R,thWidthList:P,isPaginateData:et,dataSource:ze,affixHeaderRef:Ae,affixFooterRef:Pe,bottomContentRef:u,paginationRef:me,showAffixHeader:ie,showAffixFooter:ye,scrollbarWidth:W,isMultipleHeader:N,showRightDivider:Ka,resizeLineRef:Yn,resizeLineStyle:Rr,columnResizeParams:_t,horizontalScrollbarRef:Me,tableBodyRef:c,virtualConfig:tt,showAffixPagination:Ce,tActiveRow:Il,hoverRow:Mr,showElement:A,scrollToElement:Hs,renderPagination:vt,renderTNode:i,onFixedChange:Ga,onHorizontalScroll:Ge,updateAffixHeaderOrFooter:De,onInnerVirtualScroll:Ya,refreshTable:re,scrollColumnIntoView:Xo,onTableFocus:ir,onTableBlur:Kt,onInnerRowClick:ld,paginationAffixRef:M,horizontalScrollAffixRef:$,headerTopAffixRef:U,footerBottomAffixRef:F,tableRefTabIndex:Yo}},render:function(){var e,n,r=this,a,i,o,s,c,u;if(!this.showElement)return l.createVNode("div",{ref:"tableRef"},null);var d=this.rowAndColFixedPosition,f=this.tableLayout,h=this.isPaginateData?this.dataSource:this.data,v=((e=this.spansAndLeafNodes)===null||e===void 0?void 0:e.leafColumns)||this.columns,p=(n=this.allowResizeColumnWidth)!==null&&n!==void 0?n:this.resizable;p&&f==="auto"&&st.warn("Table","table-layout can not be `auto`, cause you are using column resizable, set `table-layout: fixed` please.");var g=f==="fixed"&&this.isWidthOverflow?"100px":void 0,m=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return l.createVNode("colgroup",null,[v.map(function(R){var X={width:Vd((P||p?r.thWidthList[R.colKey]:void 0)||R.width)||g};return R.minWidth&&(X.minWidth=Vd(R.minWidth)),!X.width&&!R.minWidth&&r.tableLayout==="fixed"&&(X.minWidth="80px"),l.createVNode("col",{key:R.colKey,style:X},null)})])},y=function(){return r.showHeader===!1?null:!!(r.virtualConfig.isVirtualScroll.value||r.headerAffixedTop)&&(r.headerAffixedTop?l.createVNode(mc,l.mergeProps({offsetTop:0},Cp(r.headerAffixedTop),{onFixedChange:r.onFixedChange,ref:"headerTopAffixRef"}),W5(E)?E:{default:function(){return[E]}}):r.isFixedHeader&&E)},b=function(){return l.createVNode(mc,l.mergeProps({offsetBottom:0},Cp(r.horizontalScrollAffixedBottom),{style:{marginTop:"-".concat(r.scrollbarWidth*2,"px")},horizontalScrollAffixedBottom:!0,ref:"horizontalScrollAffixRef"}),{default:function(){return[l.createVNode("div",{ref:"horizontalScrollbarRef",class:["scrollbar",r.tableBaseClass.obviousScrollbar],style:{width:"".concat(r.tableWidth,"px"),overflow:"auto",opacity:Number(r.showAffixFooter)}},[l.createVNode("div",{style:{width:"".concat(r.tableElmWidth,"px"),height:"5px"}},null)])]}})},w={isFixedHeader:this.isFixedHeader,rowAndColFixedPosition:this.rowAndColFixedPosition,isMultipleHeader:this.isMultipleHeader,bordered:this.bordered,maxHeight:this.maxHeight,height:this.height,spansAndLeafNodes:this.spansAndLeafNodes,thList:this.thList,thWidthList:this.thWidthList,resizable:this.resizable,columnResizeParams:this.columnResizeParams,classPrefix:this.classPrefix,ellipsisOverlayClassName:this.tableSize!=="medium"?this.sizeClassNames[this.tableSize]:"",attach:this.attach,showColumnShadow:this.showColumnShadow,thDraggable:this.thDraggable},x=oo()<=11?4:0,C=this.isWidthOverflow?this.scrollbarWidth:0,S=l.ref((((a=this.affixHeaderRef)===null||a===void 0?void 0:a.getBoundingClientRect().height)||0)-x),_=setTimeout(function(){var K;S.value=(((K=r.affixHeaderRef)===null||K===void 0?void 0:K.getBoundingClientRect().height)||0)-x,clearTimeout(_)},0),O=l.computed(function(){return S.value-C}),N=Gc.headerAffixedTop?Number(this.showAffixHeader):1,B=l.computed(function(){return{width:"".concat(r.tableWidth,"px"),height:"".concat(O.value,"px"),opacity:N}}),T=this.bordered?1:0,k=!!((this.headerAffixedTop||this.virtualConfig.isVirtualScroll.value)&&this.tableWidth)&&l.createVNode("div",{ref:"affixHeaderRef",style:{width:"".concat(this.tableWidth-T,"px"),opacity:Number(this.showAffixHeader)},class:["scrollbar",V({},this.tableBaseClass.affixedHeaderElm,this.headerAffixedTop||this.virtualConfig.isVirtualScroll.value)]},[l.createVNode("table",{class:this.tableElmClasses,style:pr(pr({},this.tableElementStyles),{},{width:"".concat(this.tableElmWidth,"px")})},[m(!0),l.createVNode($5,w,this.$slots)])]),E=l.createVNode("div",{class:this.tableBaseClass.affixedHeaderWrap,style:B.value},[k]),I=this.isWidthOverflow?this.scrollbarWidth:0;this.bordered&&(I+=1);var A=!!(this.virtualConfig.isVirtualScroll.value||this.footerAffixedBottom),M=((i=this.footData)===null||i===void 0?void 0:i.length)||this.footerSummary||this.$slots.footerSummary,$=!!(A&&M&&this.tableWidth)&&l.createVNode(mc,l.mergeProps({class:this.tableBaseClass.affixedFooterWrap,onFixedChange:this.onFixedChange,offsetBottom:I||0},Cp(this.footerAffixedBottom),{style:{marginTop:"".concat(-1*(((o=this.tableFootHeight)!==null&&o!==void 0?o:0)+I),"px")},ref:"footerBottomAffixRef"}),{default:function(){return[l.createVNode("div",{ref:"affixFooterRef",style:{width:"".concat(r.tableWidth-T,"px"),opacity:Number(r.showAffixFooter)},class:["scrollbar",V({},r.tableBaseClass.affixedFooterElm,r.footerAffixedBottom||r.virtualConfig.isVirtualScroll.value)]},[l.createVNode("table",{class:r.tableElmClasses,style:pr(pr({},r.tableElementStyles),{},{width:"".concat(r.tableElmWidth,"px")})},[m(!0),l.createVNode(z5,{rowKey:r.rowKey,isFixedHeader:r.isFixedHeader,rowAndColFixedPosition:d,footData:r.footData,columns:v,rowAttributes:r.rowAttributes,rowClassName:r.rowClassName,thWidthList:r.thWidthList,footerSummary:r.footerSummary,rowspanAndColspanInFooter:r.rowspanAndColspanInFooter},r.$slots)])])]}}),U="translate(0, ".concat(this.virtualConfig.scrollHeight.value+((s=this.tableFootHeight)!==null&&s!==void 0?s:0)+((c=S.value)!==null&&c!==void 0?c:0),"px)"),F={transform:U,"-ms-transform":U,"-moz-transform":U,"-webkit-transform":U},j=pr(pr({classPrefix:this.classPrefix,ellipsisOverlayClassName:this.tableSize!=="medium"?this.sizeClassNames[this.tableSize]:"",rowAndColFixedPosition:d,showColumnShadow:this.showColumnShadow,data:h,virtualConfig:this.virtualConfig,columns:this.spansAndLeafNodes.leafColumns,tableElm:this.tableRef,tableWidth:this.tableWidth,isWidthOverflow:this.isWidthOverflow,scroll:this.scroll,cellEmptyContent:this.cellEmptyContent,tableContentElm:this.tableContentRef,handleRowMounted:this.virtualConfig.handleRowMounted,renderExpandedRow:this.renderExpandedRow},Ai(this.$props,F5)),{},{pagination:this.innerPagination,attach:this.attach,hoverRow:this.hoverRow,activeRow:this.tActiveRow,onRowClick:this.onInnerRowClick}),W=l.createVNode("div",{ref:"tableContentRef",class:this.tableBaseClass.content,style:this.tableContentStyles,onScroll:this.onInnerVirtualScroll},[this.virtualConfig.isVirtualScroll.value&&l.createVNode("div",{class:this.virtualScrollClasses.cursor,style:F},null),l.createVNode("table",{ref:"tableElmRef",class:this.tableElmClasses,style:pr(pr({},this.tableElementStyles),{},{width:this.resizable&&this.isWidthOverflow&&this.tableElmWidth?"".concat(this.tableElmWidth,"px"):this.tableElementStyles.width})},[m(!1),this.showHeader&&l.createVNode($5,pr(pr({},w),{},{thWidthList:p?this.thWidthList:{}}),this.$slots),l.createVNode(W0e,l.mergeProps({ref:"tableBodyRef"},j),this.$slots),l.createVNode(z5,{rowKey:this.rowKey,isFixedHeader:this.isFixedHeader,rowAndColFixedPosition:d,footData:this.footData,columns:v,rowAttributes:this.rowAttributes,rowClassName:this.rowClassName,footerSummary:this.footerSummary,rowspanAndColspanInFooter:this.rowspanAndColspanInFooter,virtualScroll:this.virtualConfig.isVirtualScroll.value},this.$slots)])]),H=Re(this.loading)?this.loading:this.$slots.loading,J=this.loading!==void 0&&l.createVNode(lr,l.mergeProps({loading:!!this.loading,text:H,attach:this.tableRef?function(){return r.tableRef}:void 0,showOverlay:!0,size:"small"},this.loadingProps),null),Y=this.renderTNode("topContent"),D=this.renderTNode("bottomContent"),q=l.createVNode("div",{ref:"paginationRef",class:this.tableBaseClass.paginationWrap,style:{opacity:Number(this.showAffixPagination)}},[this.renderPagination()]),z=!!D&&l.createVNode("div",{ref:"bottomContentRef",class:this.tableBaseClass.bottomContent},[D]);return l.createVNode("div",{ref:"tableRef",tabindex:this.tableRefTabIndex,class:this.dynamicBaseTableClasses,onFocus:this.onTableFocus,onBlur:this.onTableBlur},[!!Y&&l.createVNode("div",{class:this.tableBaseClass.topContent},[Y]),y(),W,$,J,z,this.showRightDivider&&l.createVNode("div",{class:this.tableBaseClass.scrollbarDivider,style:{right:"".concat(this.scrollbarWidth,"px"),bottom:this.dividerBottom?"".concat(this.dividerBottom,"px"):void 0,height:"".concat((u=this.tableContentRef)===null||u===void 0?void 0:u.getBoundingClientRect().height,"px")}},null),this.horizontalScrollAffixedBottom&&b(),this.paginationAffixedBottom?l.createVNode(mc,l.mergeProps({offsetBottom:0},Cp(this.paginationAffixedBottom),{ref:"paginationAffixRef"}),W5(q)?q:{default:function(){return[q]}}):q,l.createVNode("div",{ref:"resizeLineRef",class:this.tableBaseClass.resizeLine,style:this.resizeLineStyle},null)])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var q5={asyncLoading:{type:[String,Function]},columnController:{type:Object},columnControllerVisible:{type:Boolean,default:void 0},defaultColumnControllerVisible:{type:Boolean,default:void 0},columns:{type:Array,default:function(){return[]}},displayColumns:{type:Array,default:void 0},defaultDisplayColumns:{type:Array},dragSort:{type:String,validator:function(e){return e?["row","row-handler","col","row-handler-col","drag-col"].includes(e):!0}},dragSortOptions:{type:Object},editableCellState:{type:Function},editableRowKeys:{type:Array},expandIcon:{type:[Boolean,Function],default:!0},expandOnRowClick:Boolean,expandedRow:{type:[String,Function]},expandedRowKeys:{type:Array,default:void 0},defaultExpandedRowKeys:{type:Array,default:function(){return[]}},filterIcon:{type:Function},filterRow:{type:[String,Function]},filterValue:{type:Object,default:void 0},defaultFilterValue:{type:Object},hideSortTips:Boolean,indeterminateSelectedRowKeys:{type:Array},multipleSort:Boolean,reserveSelectedRowOnPaginate:{type:Boolean,default:!0},rowSelectionAllowUncheck:Boolean,rowSelectionType:{type:String,validator:function(e){return e?["single","multiple"].includes(e):!0}},selectOnRowClick:Boolean,selectedRowKeys:{type:Array,default:void 0},defaultSelectedRowKeys:{type:Array,default:function(){return[]}},showSortColumnBgColor:Boolean,sort:{type:[Object,Array],default:void 0},defaultSort:{type:[Object,Array]},sortIcon:{type:Function},sortOnRowDraggable:Boolean,onAsyncLoadingClick:Function,onCellClick:Function,onChange:Function,onColumnChange:Function,onColumnControllerVisibleChange:Function,onDataChange:Function,onDisplayColumnsChange:Function,onDragSort:Function,onExpandChange:Function,onFilterChange:Function,onRowEdit:Function,onRowValidate:Function,onSelectChange:Function,onSortChange:Function,onValidate:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function G5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Y5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var X0e=l.defineComponent({name:"ColumnCheckboxGroup",props:{checkboxProps:Object,options:{type:Array,default:function(){return[]}},label:String,uniqueKey:String,value:Array,onChange:Function},setup:function(e){var n=l.toRefs(e),r=n.checkboxProps,a=n.value,i=n.options,o=ve(),s=l.computed(function(){var p=[];return i.value.forEach(function(g){if(wt(g)==="object"){if(g.disabled)return;g.value?p.push(g.value):typeof g.label=="string"&&p.push(g.label)}else p.push(g)}),p}),c=l.computed(function(){return Yl(s.value,a.value)}),u=l.computed(function(){var p=c.value.length;return!!(p&&s.value.length===p)}),d=l.computed(function(){var p=c.value.length;return!!(p<s.value.length&&p)}),f=function(g,m){var y={e:m.e,type:"check",current:void 0,option:void 0};if(g){var b,w=Ee(new Set(a.value.concat(s.value)));(b=e.onChange)===null||b===void 0||b.call(e,w,y)}else{var x,C=a.value.filter(function(S){return!s.value.includes(S)});(x=e.onChange)===null||x===void 0||x.call(e,C,Y5(Y5({},y),{},{type:"uncheck"}))}},h=function(g,m){var y;(y=e.onChange)===null||y===void 0||y.call(e,g,m)},v=l.computed(function(){return["".concat(o.value,"-table__column-controller-item"),V({},"".concat(o.value,"-table__").concat(e.uniqueKey),e.uniqueKey)]});return function(){return l.createVNode("div",{class:v.value},[l.createVNode("div",{class:"".concat(o.value,"-table__column-controller-block")},[l.createVNode(Ni,{indeterminate:d.value,checked:u.value,onChange:f,disabled:!s.value.length},{default:function(){return[e.label]}})]),l.createVNode("div",{class:"".concat(o.value,"-table__column-controller-block")},[l.createVNode(zd,l.mergeProps({options:i.value},r.value,{modelValue:a.value,onChange:h}),null)])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function X5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Nb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Db(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,n=0,r=t.length;n<r;n++){var a,i=t[n];(a=i.children)!==null&&a!==void 0&&a.length?Db(i.children,e):i.colKey&&e.add(i.colKey)}return e}function J0e(t,e){var n=Qe("table",t.locale),r=n.classPrefix,a=n.globalConfig,i=St({SettingIcon:Nee}),o=i.SettingIcon,s=l.toRefs(t),c=s.columns,u=s.columnController,d=s.displayColumns,f=s.columnControllerVisible,h=l.ref(null),v=We(),p=l.computed(function(){var k,E=(((k=u.value)===null||k===void 0?void 0:k.fields)||Ee(Db(c.value))).filter(function(I){return I});return new Set(E)}),g=Ee(Db(c.value)),m=gn(d,t.defaultDisplayColumns||g,t.onDisplayColumnsChange,"displayColumns"),y=$e(m,2),b=y[0],w=y[1],x=l.ref(d.value||t.defaultDisplayColumns||g),C=l.computed(function(){var k;if((k=u.value)!==null&&k!==void 0&&(k=k.groupColumns)!==null&&k!==void 0&&k.length)return _(c.value);var E={label:a.value.selectAllText,options:O(c.value)};return[E]});l.watch([d],function(k){var E=$e(k,1),I=E[0];x.value=I||t.defaultDisplayColumns||g});function S(k,E){return{label:function(){return xp(e.slots,k,E)},value:k.colKey,disabled:!p.value.has(k.colKey)}}function _(k){var E,I=(E=u.value)===null||E===void 0?void 0:E.groupColumns;if(!(I!=null&&I.length))return[];var A=[],M=function(U){for(var F=0,j=U.length;F<j;F++){for(var W,H=U[F],J=S(H,F),Y=0,D=I.length;Y<D;Y++){var q,z=I[Y];z.columns.includes(H.colKey)&&((q=A[Y])!==null&&q!==void 0&&(q=q.options)!==null&&q!==void 0&&q.length?A[Y].options.push(J):A[Y]=Nb(Nb({},I[Y]),{},{options:[J]}))}(W=H.children)!==null&&W!==void 0&&W.length&&M(H.children)}};return M(k),A}function O(k){var E,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if((E=u.value)!==null&&E!==void 0&&(E=E.groupColumns)!==null&&E!==void 0&&E.length)return[];for(var A=0,M=k.length;A<M;A++){var $,U=k[A];($=U.children)!==null&&$!==void 0&&$.length?O(U.children,I):U.colKey&&I.push(S(U,A))}return I}var N=function(E,I){var A;x.value=E;var M={columns:E,type:I.type,currentColumn:N5(c.value,String(I.current)),e:I.e};(A=t.onColumnChange)===null||A===void 0||A.call(t,M)},B=function(){var E;if(h.value){h.value.show();return}h.value=mp.confirm(Nb({header:a.value.columnConfigTitleText,body:function(){var A,M=((A=u.value)===null||A===void 0?void 0:A.displayType)==="fixed-width"?"fixed":"auto",$=u.value||{},U=$.columnControllerTopContent,F=$.columnControllerBottomContent,j=l.createVNode("div",{class:["".concat(r.value,"-table__column-controller"),"".concat(r.value,"-table__column-controller--").concat(M)]},[l.createVNode("div",{class:"".concat(r.value,"-table__column-controller-body")},[Re(U)?U(l.h):v("columnControllerTopContent"),a.value.columnConfigDescriptionText&&l.createVNode("p",{class:"".concat(r.value,"-table__column-controller-desc")},[a.value.columnConfigDescriptionText]),C.value.map(function(W,H){var J,Y,D=(J=u.value)!==null&&J!==void 0&&(J=J.groupColumns)!==null&&J!==void 0&&J.length?String(W.value||H):void 0;return l.createVNode(X0e,{key:W.value||H,uniqueKey:D,value:x.value,label:W.label,options:W.options,onChange:N,checkboxProps:(Y=u.value)===null||Y===void 0?void 0:Y.checkboxProps},null)}),Re(F)?F(l.h):v("columnControllerBottomContent")])]);return j},confirmBtn:a.value.confirmText,cancelBtn:a.value.cancelText,width:612,onConfirm:function(){if(w(Ee(x.value)),f.value===void 0)h.value.hide();else{var A;(A=t.onColumnControllerVisibleChange)===null||A===void 0||A.call(t,!1,{trigger:"confirm"}),e.emit("update:columnControllerVisible",!1)}},onClose:function(){if(f.value===void 0)h.value.hide();else{var A;(A=t.onColumnControllerVisibleChange)===null||A===void 0||A.call(t,!1,{trigger:"cancel"}),e.emit("update:columnControllerVisible",!1)}}},((E=u.value)===null||E===void 0?void 0:E.dialogProps)||{}))};l.watch([f],function(k){var E=$e(k,1),I=E[0];I!==void 0&&(h.value?I?h.value.show():h.value.hide():I&&B())},{immediate:!0});var T=function(){var E,I=!!(u.value&&Object.keys(u.value).length),A=I?u.value.placement||"top-right":"";if(I&&u.value.hideTriggerButton)return null;var M=["".concat(r.value,"-table__column-controller-trigger"),V({},"".concat(r.value,"-align-").concat(A),!!A)];return l.createVNode("div",{class:M},[l.createVNode(zt,l.mergeProps({theme:"default",variant:"outline",onClick:B,content:a.value.columnConfigButtonText},(E=t.columnController)===null||E===void 0?void 0:E.buttonProps),{icon:function(){return l.createVNode(o,null,null)}})])};return{tDisplayColumns:b,columnCheckboxKeys:x,renderColumnController:T}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Q0e(t,e){var n=l.toRefs(t),r=n.expandedRowKeys,a=We(),i=Qe("table",t.locale),o=i.t,s=i.globalConfig,c=St({ChevronRightCircleIcon:NV}),u=c.ChevronRightCircleIcon,d=Kr(),f=d.tableExpandClasses,h=d.positiveRotate90,v=d.tableFullRowClasses,p=gn(r,t.defaultExpandedRowKeys||[],t.onExpandChange,"expandedRowKeys"),g=$e(p,2),m=g[0],y=g[1],b=l.computed(function(){return!!(t.expandedRow||e.slots.expandedRow||e.slots["expanded-row"])}),w=l.computed(function(){return t.expandIcon!==!1&&b.value}),x=l.computed(function(){var T;return((T=t.columns)===null||T===void 0||(T=T[0])===null||T===void 0?void 0:T.fixed)==="left"}),C=function(k){var E;if(!b.value)return null;var I=k.row,A=k.rowKey,M=je(I,A||"id");return f[(E=m.value)!==null&&E!==void 0&&E.includes(M)?"rowExpanded":"rowFolded"]},S=function(k,E){t.expandOnRowClick&&k.stopPropagation();var I=je(E,t.rowKey||"id"),A=m.value.indexOf(I),M=Ee(m.value);A!==-1?M.splice(A,1):M.push(I),y(M,{expandedRowData:t.data.filter(function($){return M.includes(je($,t.rowKey||"id"))}),currentRowData:E})},_=function(k,E){var I=E.row,A=E.rowIndex,M=je(I,t.rowKey||"id"),$=m.value.includes(M),U=a("expandIcon",{defaultNode:o(s.value.expandIcon)||l.createVNode(u,null,null),params:{row:I,index:A}});if(!U)return null;var F=[f.iconBox,f[$?"expanded":"collapsed"],V({},h,$)];return l.createVNode("span",{class:F,onClick:function(W){return S(W,I)}},[U])},O=function(){var k={colKey:"__EXPAND_ROW_ICON_COLUMN__",width:46,className:f.iconCell,fixed:x.value?"left":void 0,cell:_,stopPropagation:!0};return k},N=function(k){var E=je(k.row,t.rowKey||"id");if(!m.value||!m.value.includes(E))return null;var I=k.isWidthOverflow&&t.columns.find(function(A){return A.fixed==="left"});return l.createVNode("tr",{key:"expand_".concat(E),class:[f.row,V({},v.base,I)]},[l.createVNode("td",{colspan:k.columns.length},[l.createVNode("div",{class:[f.rowInner,V({},v.innerFullRow,I)],style:I?{width:"".concat(k.tableWidth,"px")}:{}},[l.createVNode("div",{class:v.innerFullElement},[a("expandedRow",{params:k})])])])])},B=function(k){S(k.e,k.row)};return{showExpandedRow:b,showExpandIconColumn:w,getExpandColumn:O,renderExpandedRow:N,onInnerExpandRowClick:B,getExpandedRowClass:C}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Rb(t,e,n){if(!t)return!1;var r=Re(t.disabled)?t.disabled({row:e,rowIndex:n}):t.disabled;return t.checkProps&&(Re(t.checkProps)?r=r||t.checkProps({row:e,rowIndex:n}).disabled:t.checkProps==="object"&&(r=r||t.checkProps.disabled)),!!r}function Z0e(t,e,n){for(var r={},a=0,i=e.length;a<i;a++){var o=je(e[a],n);t.includes(o)&&(r[o]=!0)}return r}function kp(t,e){for(var n=0,r=t.length;n<r;n++){var a;if(t[n].colKey===e)return t[n];if((a=t[n].children)!==null&&a!==void 0&&a.length){var i=kp(t[n].children,e);if(i)return i}}return null}function J5(t,e){for(var n=0,r=t.length;n<r;n++){var a;if(t[n].colKey===e)return n;if((a=t[n].children)!==null&&a!==void 0&&a.length){var i=kp(t[n].children,e);if(i)return n}}return-1}function Q5(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=0,r=t.length;n<r;n++){var a,i=t[n];i.filter&&"resetValue"in i.filter&&(e[i.colKey]=i.filter.resetValue),(a=i.children)!==null&&a!==void 0&&a.length&&Q5(i.children,e)}return e}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Z5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V0e(t,e){var n=l.toRefs(t),r=n.selectedRowKeys,a=n.columns,i=n.rowKey,o=n.data,s=n.reserveSelectedRowOnPaginate,c=l.ref(o.value),u=l.ref(),d=gn(r,t.defaultSelectedRowKeys||[],t.onSelectChange,"selectedRowKeys"),f=$e(d,2),h=f[0],v=f[1],p=l.ref(new Map),g=l.computed(function(){return t.columns.find(function(A){var M=A.type;return["multiple","single"].includes(M)})}),m=l.computed(function(){var A;return t.rowSelectionType||((A=g.value)===null||A===void 0?void 0:A.type)||"single"}),y=l.computed(function(){var A=s.value?o.value:c.value;return A.filter(function(M,$){return!x(M,$)})}),b=l.computed(function(){return Yl(h.value,y.value.map(function(A){return je(A,t.rowKey||"id")}))}),w=l.computed(function(){var A;if(t.rowSelectionAllowUncheck)return!0;var M=m.value==="single";return!M||!g.value||!("allowUncheck"in((A=g.value)===null||A===void 0?void 0:A.checkProps))?!1:g.value.checkProps.allowUncheck});l.watch([o,a,h,g,i],function(){var A,M=function(H){return g.value.disabled(H)?e.disabled:""},$=(A=g.value)!==null&&A!==void 0&&A.disabled?M:void 0,U=new Set(h.value),F=function(H){var J=H.row,Y=je(J,t.rowKey||"id");return U.has(Y)?e.selected:""},j=U.size?F:void 0;u.value=[$,j],c.value=o.value},{immediate:!0});function x(A,M){return Rb(g.value,A,M)}function C(){return function(){var A=b.value.length>0&&b.value.length<y.value.length,M=b.value.length!==0&&y.value.length!==0&&b.value.length===y.value.length;return l.createVNode(Ni,{checked:M,indeterminate:A,disabled:!y.value.length,onChange:N},null)}}function S(A){var M=A.col,$=A.row,U=A.rowIndex,F=Re(M.disabled)?M.disabled({row:$,rowIndex:U}):M.disabled,j=Re(M.checkProps)?M.checkProps({row:$,rowIndex:U}):M.checkProps;return{disabled:F||(j==null?void 0:j.disabled),checkProps:j}}function _(A){var M=A.col,$=A.row,U=$===void 0?{}:$,F=h.value.includes(je(U,t.rowKey||"id")),j=S(A),W=j.disabled,H=j.checkProps,J=Op(Op({checked:F,disabled:W},H),{},{onClick:function(z){if(wt(z)==="object"&&"e"in z){var K;(K=z.e)===null||K===void 0||K.stopPropagation()}else z==null||z.stopPropagation()},onChange:function(){return O(U)}});if(M.type==="single")return l.createVNode(hA,J,null);if(M.type==="multiple"){var Y,D=(Y=t.indeterminateSelectedRowKeys)!==null&&Y!==void 0&&Y.length?t.indeterminateSelectedRowKeys.includes(je(U,t.rowKey)):!1;return l.createVNode(Ni,l.mergeProps({indeterminate:D},J),null)}return null}function O(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=Ee(h.value),$=t.rowKey||"id",U=je(A,$),F=M.indexOf(U),j=F!==-1;if(m.value==="multiple")j?M.splice(F,1):M.push(U);else if(m.value==="single")M=j&&w.value?[]:[U];else{st.warn("Table","`column.type` must be one of `multiple` and `single`");return}v(M,{selectedRowData:M.map(function(W){return p.value.get(W)}),currentRowKey:U,currentRowData:A,type:j?"uncheck":"check"})}function N(A){var M,$=t.rowKey||"id",U=y.value.map(function(W){return je(W,$)}),F=((M=r.value)===null||M===void 0?void 0:M.filter(function(W){return!U.includes(W)}))||[],j=A?[].concat(Ee(F),Ee(U)):Ee(F);v(j,{selectedRowData:A?j.map(function(W){return p.value.get(W)}):[],type:A?"check":"uncheck",currentRowKey:"CHECK_ALL_BOX"})}function B(A){var M=["multiple","single"].includes(A.type);return M?Op(Op({},A),{},{width:A.width||64,className:[e.checkCell,A.className],cell:function(U,F){return _(F)},title:A.type==="multiple"?C():A.title}):A}var T=function(M){var $=M.row,U=M.index,F=t.columns.findIndex(function(H){return H.colKey==="row-select"}),j=!1;if(F!==-1){var W;j=(W=S({row:$,rowIndex:U,col:t.columns[F]}))===null||W===void 0?void 0:W.disabled}j||O($)};l.watch([o,i],function(){for(var A=0,M=o.value.length;A<M;A++)p.value.set(je(o.value[A],i.value||"id"),o.value[A])},{immediate:!0});var k=l.computed(function(){return!!(g.value||t.selectOnRowClick||t.selectedRowKeys)}),E=function(){v([],{selectedRowData:[],currentRowKey:void 0,currentRowData:void 0,type:"uncheck"})},I=function(M){var $=M.activeRowList,U=M.action;if(k.value){if(U==="clear"){E();return}if(U==="select-all"){N(!0);return}if(m.value==="single"){U==="space-one-selection"&&O($[0].row);return}var F=$.filter(function(q){var z=q.row,K=q.rowIndex;return!S({row:z,rowIndex:K,col:g.value}).disabled});if(F.length){var j=F.map(function(q){var z=q.row;return je(z,t.rowKey)}),W=Yl(h.value,j),H=W.length!==j.length,J=h.value.filter(function(q){return!j.includes(q)}),Y=H?Ee(new Set(h.value.concat(j))):J,D=U==="space-one-selection"?$[0].row:void 0;v(Y,{selectedRowData:$,currentRowKey:je(D,t.rowKey),currentRowData:D,type:H?"check":"uncheck"})}}};return{selectColumn:g,showRowSelect:k,selectedRowClassNames:u,currentPaginateData:c,setTSelectedRowKeys:v,formatToRowSelectColumn:B,onInnerSelectRowClick:T,handleRowSelectWithAreaSelection:I}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function eye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var tye=l.defineComponent({name:"TSorterButton",props:{sortType:{type:String,default:"all"},sortOrder:{type:String,default:function(){return""}},locale:Object,sortIcon:Function,tooltipProps:Object,hideSortTips:Boolean},emits:["sort-icon-click"],setup:function(e,n){var r=Kr(),a=r.tableSortClasses,i=r.negativeRotate180,o=Qa(),s=Qe("table",e.locale),c=s.t,u=s.globalConfig,d=St({ChevronDownIcon:dv}),f=d.ChevronDownIcon,h=l.computed(function(){return e.sortType==="all"?["asc","desc"]:[e.sortType]}),v=function(m,y){n.emit("sort-icon-click",m,{descending:y==="desc"})},p=function(m,y){var b=c(u.value.sortIcon)||l.createVNode(f,null,null),w=o("sortIcon",b),x=[y,a.sortIcon,a.iconDirection[m],V({},i,m==="asc")];return l.createVNode("span",{class:x,onClick:function(S){return v(S,m)}},[w])};return{t:c,globalConfig:u,tableSortClasses:a,negativeRotate180:i,allowSortTypes:h,getSortIcon:p}},render:function(){var e=this,n=this.tableSortClasses,r=[n.trigger,V({},n.doubleIcon,this.allowSortTypes.length>1)],a={asc:this.globalConfig.sortAscendingOperationText,desc:this.globalConfig.sortDescendingOperationText},i=this.allowSortTypes.map(function(o){var s,c,u=o===e.sortOrder?n.iconActive:n.iconDefault,d=e.globalConfig.sortCancelOperationText,f=o===e.sortOrder?d:a[o];return((c=e.hideSortTips)!==null&&c!==void 0?c:e.globalConfig.hideSortTips)?e.getSortIcon(o,u):l.createVNode(Tr,l.mergeProps({content:f,placement:"right",showArrow:!1,class:e.tableSortClasses.iconDirection[o]},e.tooltipProps),eye(s=e.getSortIcon(o,u))?s:{default:function(){return[s]}})});return l.createVNode("div",{class:r},[i])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function V5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function nye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rye(t,e){var n=e.slots,r=l.toRefs(t),a=r.sort,i=r.data,o=l.ref(),s=gn(a,t.defaultSort,t.onSortChange,"sort"),c=$e(s,2),u=c[0],d=c[1],f=gn(i,[],t.onDataChange,"data"),h=$e(f,2),v=h[0],p=h[1],g=l.computed(function(){return w(t.columns)}),m=l.ref(),y=l.computed(function(){var T=u.value;return T?Ke(T)?T:[T]:[]}),b=l.computed(function(){var T={};return y.value.forEach(function(k,E){var I=k.sortBy;T[I]=nye({index:E},k)}),T});function w(T){for(var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=0,I=T.length;E<I;E++){var A,M=T[E];Re(M.sorter)&&(k[M.colKey]=M.sorter),(A=M.children)!==null&&A!==void 0&&A.length&&w(M.children,k)}return k}function x(T){var k=T;if(Object.keys(g.value).length){o.value||(o.value=v.value);var E=!k||k instanceof Array&&!k.length,I=!(k instanceof Array)&&!(k!=null&&k.sortBy);if(E||I)return p(o.value,{trigger:"sort"}),o.value;var A=k instanceof Array?k:[k],M=v.value.slice().sort(function($,U){for(var F=0,j=0,W=A.length;j<W;j++){var H=A[j],J=g.value[H.sortBy];if(F===0&&J)F=H.descending?J(U,$):J($,U);else break}return F});if(JSON.stringify(M)!==JSON.stringify(v.value))return p(M,{trigger:"sort"}),M}}function C(T,k){var E,I;if(t.multipleSort)I=O(T,k);else{var A=u.value instanceof Array?u.value[0]:u.value;I=_(T,A,k)}var M=x(I),$=M||v.value,U=$;d(I,{currentDataSource:U,col:T}),(E=t.onChange)===null||E===void 0||E.call(t,{sorter:I},{currentData:$,trigger:"sorter"}),m.value=I}function S(T){if(T!==void 0)return T?"desc":"asc"}function _(T,k,E){if(!(k&&k.sortBy===T.colKey&&k.descending===E.descending))return{sortBy:T.colKey,descending:E.descending}}function O(T,k){Array.isArray(u.value)||(u.value=u.value?[u.value]:[]);for(var E=u.value,I=T.colKey,A=Ee(E),M=0,$=E.length;M<$;M++)if(E[M].sortBy===I){var U=_(T,E[M],k);return U?A[M]=U:A.splice(M,1),A}return A.push({sortBy:I,descending:k.descending}),A}function N(T){var k,E=T.col;if(!E.sorter)return null;var I={sortType:E.sortType,sortOrder:S((k=b.value[E.colKey])===null||k===void 0?void 0:k.descending),sortIcon:t.sortIcon,hideSortTips:t.hideSortTips,locale:t.locale};return l.createVNode(tye,l.mergeProps(I,{onSortIconClick:function(M,$){return C(E,$)}}),{sortIcon:n.sortIcon})}var B=function(k,E){var I=Ke(k)?k:[k],A=Ke(E)?E:[E];if(I.length&&!E)return!1;for(var M=function(){var W=I[U],H=A.find(function(J){return J.sortBy===W.sortBy});return H?{v:W.descending===H.descending}:{v:!1}},$,U=0,F=I.length;U<F;U++)if($=M(),$)return $.v};return l.watch(function(){return[u,t.data]},function(){!u.value||!Object.keys(u.value).length||!v.value.length||B(u.value,m.value)||x(u.value)},{immediate:!0}),{renderSortIcon:N}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function eD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ep(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var aye=l.defineComponent({name:"TableFilterController",props:{locale:Object,column:Object,colIndex:Number,tFilterValue:Object,innerFilterValue:Object,tableFilterClasses:Object,isFocusClass:String,primaryTableElement:{},popupProps:Object,attach:[String,Function],onVisibleChange:Function,filterIcon:[Function]},emits:["inner-filter-change","reset","confirm"],setup:function(e,n){var r=l.ref(null),a=Qa(),i=Qe("table",e.locale),o=i.t,s=i.globalConfig,c=St({FilterIcon:uee}),u=c.FilterIcon,d=l.ref(!1),f=function(y){var b;d.value=y,(b=e.onVisibleChange)===null||b===void 0||b.call(e,y)},h=function(y,b,w){if(!w)return null;var x=!!w.setup;if(Re(y.filter.component)&&!x)return y.filter.component(function(S,_){var O=wt(_)==="object"&&"attrs"in _?_.attrs:{};return l.h(S,{props:Ep(Ep({},b),O)})});var C=y.filter||{};return l.createVNode(w,l.mergeProps({class:C.classNames,style:C.style},C.attrs,b),null)},v=function(y){var b,w,x,C=["single","multiple","input"];if((b=y.filter)!==null&&b!==void 0&&b.type&&!C.includes(y.filter.type)){console.error("TDesign Table Error: column.filter.type must be the following: ".concat(JSON.stringify(C)));return}var S=e.innerFilterValue,_=S===void 0?{}:S,O={single:np,multiple:zd,input:Va}[y.filter.type]||y.filter.component;if(!(!O&&!y.filter.component)){var N=Ep(Ep({options:["single","multiple"].includes(y.filter.type)?(w=y.filter)===null||w===void 0?void 0:w.list:void 0},((x=y.filter)===null||x===void 0?void 0:x.props)||{}),{},{onChange:function(T,k){var E,I;if(n.emit("inner-filter-change",T,y),(E=y.filter.props)!==null&&E!==void 0&&E.onChange){var A,M;(A=(M=y.filter.props).onChange)===null||A===void 0||A.call(M,T,k)}(I=y.filter)!==null&&I!==void 0&&(I=I.confirmEvents)!==null&&I!==void 0&&I.includes("onChange")&&(d.value=!1)}});return y.colKey&&_&&y.colKey in _&&(N.value=_==null?void 0:_[y.colKey]),y.filter.confirmEvents&&y.filter.confirmEvents.forEach(function(B){B!=="onChange"&&(N[B]=function(){n.emit("confirm",y),d.value=!1})}),l.createVNode("div",{class:e.tableFilterClasses.contentInner},[h(y,N,O)])}},p=function(y){if(y.filter.showConfirmAndReset)return l.createVNode("div",{class:e.tableFilterClasses.bottomButtons},[l.createVNode(zt,{theme:"default",size:"small",onClick:function(){n.emit("reset",y),d.value=!1}},{default:function(){return[s.value.resetText]}}),l.createVNode(zt,{theme:"primary",size:"small",onClick:function(){n.emit("confirm",y),d.value=!1}},{default:function(){return[s.value.confirmText]}})])},g=function(){return l.createVNode("div",{class:e.tableFilterClasses.popupContent},[v(e.column),p(e.column)])};return{t:o,globalConfig:s,FilterIcon:u,filterPopupVisible:d,triggerElementRef:r,renderTNode:a,getContent:g,onFilterPopupVisibleChange:f}},render:function(){var e,n=this,r=this.column,a=this.popupProps,i=this.FilterIcon;if(!r.filter||r.filter&&!Object.keys(r.filter).length)return null;var o=this.t(this.globalConfig.filterIcon)||l.createVNode(i,null,null),s=(e=this.tFilterValue)===null||e===void 0?void 0:e[r.colKey],c=wt(s)==="object"&&!jr(s),u=![null,void 0,""].includes(s)&&wt(s)!=="object";return l.createVNode(sa,l.mergeProps({attach:this.attach||(this.primaryTableElement?function(){return n.primaryTableElement}:void 0),visible:this.filterPopupVisible,destroyOnClose:!0,trigger:"click",placement:"bottom-right",showArrow:!0,overlayClassName:this.tableFilterClasses.popup,onVisibleChange:function(f){return n.onFilterPopupVisibleChange(f)},class:[this.tableFilterClasses.icon,V({},this.isFocusClass,c||u)],content:this.getContent},a),{default:function(){return[l.createVNode("div",{ref:"triggerElementRef"},[n.renderTNode("filterIcon",{defaultNode:o,params:{col:r,colIndex:n.colIndex}})])]}})}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Pp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nD(t){var e=t instanceof Array&&t.length,n=wt(t)==="object"&&!(t instanceof Array),r=t!==null&&n&&Object.keys(t).length;return e||r||!["null","","undefined"].includes(String(t))}function iye(t){var e={};return Object.keys(t).forEach(function(n){var r=t[n];nD(r)&&(e[n]=r)}),e}function oye(t,e){var n=l.ref(null),r=Qe("table",t.locale),a=r.t,i=r.globalConfig,o=Qa(),s=l.toRefs(t),c=s.filterValue,u=s.columns,d=Kr(),f=d.tableFilterClasses,h=d.isFocusClass,v=l.ref(),p=gn(c,t.defaultFilterValue,t.onFilterChange,"filterValue"),g=$e(p,2),m=g[0],y=g[1],b=l.ref(m.value),w=l.computed(function(){var A=iye(m.value||{});return!m.value||!Object.keys(A).length});l.watch([m],function(A){var M=$e(A,1),$=M[0];b.value=$});function x(){var A,M;if(w.value)return null;var $=l.createVNode("div",{class:f.result},[l.createVNode("span",null,[a(i.value.searchResultText,{result:C(),count:((A=t.pagination)===null||A===void 0?void 0:A.total)||((M=t.data)===null||M===void 0?void 0:M.length)})]),l.createVNode(zt,{theme:"primary",variant:"text",onClick:B},{default:function(){return[i.value.clearFilterResultButtonText]}})]),U=o("filterRow");return t.filterRow&&!U||t.filterRow===null?null:l.createVNode("div",{class:f.inner},[U||$])}function C(){var A=[],M=[];return S(t.columns,M),M.filter(function($){return $.filter}).forEach(function($,U){var F=m.value[$.colKey];if($.filter.list&&!["null"].includes(String(F))){var j=F instanceof Array?F:[F],W=[];$.filter.list.forEach(function(q){j.includes(q.value)&&W.push(q.label)}),F=W.join()}if(nD(F)){var H,J,Y=Re((H=$.filter)===null||H===void 0?void 0:H.label)?$.filter.label(l.h):(J=$.filter)===null||J===void 0?void 0:J.label,D=xp(e.slots,$,U);A.push("".concat(Y||D,"：").concat(F))}}),A.join("；")}function S(A,M){A.forEach(function($){$.children&&S($.children,M),M.push($)})}function _(A,M){var $=Pp(Pp({},b.value),{},V({},M.colKey,A));b.value=$,M.filter.showConfirmAndReset||O($,"filter-change",M)}function O(A,M,$){var U;y(A,{col:$,trigger:M}),(U=t.onChange)===null||U===void 0||U.call(t,{filter:A},{trigger:"filter"})}function N(A){var M,$,U=Pp(Pp({},m.value),{},V({},A.colKey,(M=($=A.filter.resetValue)!==null&&$!==void 0?$:{single:"",multiple:[],input:""}[A.filter.type])!==null&&M!==void 0?M:""));O(U,"reset",A)}function B(){var A=Q5(u.value);O(A,"clear",void 0)}function T(A){O(b.value,"confirm",A)}function k(A){var M,$=A.col,U=A.colIndex;return l.createVNode(aye,{column:$,colIndex:U,filterIcon:t.filterIcon,tFilterValue:m.value,innerFilterValue:b.value,tableFilterClasses:f,isFocusClass:h,popupProps:$.filter.popupProps,attach:t.attach,locale:t.locale,onReset:N,onConfirm:T,onInnerFilterChange:_,primaryTableElement:(M=n.value)===null||M===void 0?void 0:M.$el,onVisibleChange:I},{filterIcon:e.slots.filterIcon})}function E(A){n.value=A}function I(A){A&&!v.value&&(v.value=!A)}return{hasEmptyCondition:w,isTableOverflowHidden:v,renderFilterIcon:k,renderFirstFilterRow:x,setFilterPrimaryTableRef:E}}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function rD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(n),!0).forEach(function(r){lye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ip(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ip=function(e){return typeof e}:Ip=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function lye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function So(){return So=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},So.apply(this,arguments)}function sye(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function cye(t,e){if(t==null)return{};var n=sye(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var uye="1.15.6";function To(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ko=To(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ef=To(/Edge/i),aD=To(/firefox/i),tf=To(/safari/i)&&!To(/chrome/i)&&!To(/android/i),Mb=To(/iP(ad|od|hone)/i),iD=To(/chrome/i)&&To(/android/i),oD={capture:!1,passive:!1};function Ht(t,e,n){t.addEventListener(e,n,!ko&&oD)}function jt(t,e,n){t.removeEventListener(e,n,!ko&&oD)}function Ap(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function lD(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ci(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ap(t,e):Ap(t,e))||r&&t===n)return t;if(t===n)break}while(t=lD(t))}return null}var sD=/\s+/g;function va(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(sD," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(sD," ")}}function xt(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Xc(t,e){var n="";if(typeof t=="string")n=t;else do{var r=xt(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function cD(t,e,n){if(t){var r=t.getElementsByTagName(e),a=0,i=r.length;if(n)for(;a<i;a++)n(r[a],a);return r}return[]}function Li(){var t=document.scrollingElement;return t||document.documentElement}function $n(t,e,n,r,a){if(!(!t.getBoundingClientRect&&t!==window)){var i,o,s,c,u,d,f;if(t!==window&&t.parentNode&&t!==Li()?(i=t.getBoundingClientRect(),o=i.top,s=i.left,c=i.bottom,u=i.right,d=i.height,f=i.width):(o=0,s=0,c=window.innerHeight,u=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!ko))do if(a&&a.getBoundingClientRect&&(xt(a,"transform")!=="none"||n&&xt(a,"position")!=="static")){var h=a.getBoundingClientRect();o-=h.top+parseInt(xt(a,"border-top-width")),s-=h.left+parseInt(xt(a,"border-left-width")),c=o+i.height,u=s+i.width;break}while(a=a.parentNode);if(r&&t!==window){var v=Xc(a||t),p=v&&v.a,g=v&&v.d;v&&(o/=g,s/=p,f/=p,d/=g,c=o+d,u=s+f)}return{top:o,left:s,bottom:c,right:u,width:f,height:d}}}function uD(t,e,n){for(var r=il(t,!0),a=$n(t)[e];r;){var i=$n(r)[n],o=void 0;if(o=a>=i,!o)return r;if(r===Li())break;r=il(r,!1)}return!1}function Jc(t,e,n,r){for(var a=0,i=0,o=t.children;i<o.length;){if(o[i].style.display!=="none"&&o[i]!==yt.ghost&&(r||o[i]!==yt.dragged)&&ci(o[i],n.draggable,t,!1)){if(a===e)return o[i];a++}i++}return null}function Lb(t,e){for(var n=t.lastElementChild;n&&(n===yt.ghost||xt(n,"display")==="none"||e&&!Ap(n,e));)n=n.previousElementSibling;return n||null}function Ma(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==yt.clone&&(!e||Ap(t,e))&&n++;return n}function dD(t){var e=0,n=0,r=Li();if(t)do{var a=Xc(t),i=a.a,o=a.d;e+=t.scrollLeft*i,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function dye(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function il(t,e){if(!t||!t.getBoundingClientRect)return Li();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=xt(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Li();if(r||e)return n;r=!0}}while(n=n.parentNode);return Li()}function fye(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Fb(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var nf;function fD(t,e){return function(){if(!nf){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),nf=setTimeout(function(){nf=void 0},e)}}}function hye(){clearTimeout(nf),nf=void 0}function hD(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function vD(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function pD(t,e,n){var r={};return Array.from(t.children).forEach(function(a){var i,o,s,c;if(!(!ci(a,e.draggable,t,!1)||a.animated||a===n)){var u=$n(a);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((s=r.right)!==null&&s!==void 0?s:-1/0,u.right),r.bottom=Math.max((c=r.bottom)!==null&&c!==void 0?c:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Gr="Sortable"+new Date().getTime();function vye(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(xt(a,"display")==="none"||a===yt.ghost)){t.push({target:a,rect:$n(a)});var i=Mi({},t[t.length-1].rect);if(a.thisAnimationDuration){var o=Xc(a,!0);o&&(i.top-=o.f,i.left-=o.e)}a.fromRect=i}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(dye(t,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,o=0;t.forEach(function(s){var c=0,u=s.target,d=u.fromRect,f=$n(u),h=u.prevFromRect,v=u.prevToRect,p=s.rect,g=Xc(u,!0);g&&(f.top-=g.f,f.left-=g.e),u.toRect=f,u.thisAnimationDuration&&Fb(h,f)&&!Fb(d,f)&&(p.top-f.top)/(p.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(c=gye(p,h,v,a.options)),Fb(f,d)||(u.prevFromRect=d,u.prevToRect=f,c||(c=a.options.animation),a.animate(u,p,f,c)),c&&(i=!0,o=Math.max(o,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,a,i,o){if(o){xt(r,"transition",""),xt(r,"transform","");var s=Xc(this.el),c=s&&s.a,u=s&&s.d,d=(a.left-i.left)/(c||1),f=(a.top-i.top)/(u||1);r.animatingX=!!d,r.animatingY=!!f,xt(r,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=pye(r),xt(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),xt(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){xt(r,"transition",""),xt(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function pye(t){return t.offsetWidth}function gye(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Qc=[],Bb={initializeByDefault:!0},rf={mount:function(e){for(var n in Bb)Bb.hasOwnProperty(n)&&!(n in e)&&(e[n]=Bb[n]);Qc.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Qc.push(e)},pluginEvent:function(e,n,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var i=e+"Global";Qc.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][i]&&n[o.pluginName][i](Mi({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Mi({sortable:n},r)))})},initializePlugins:function(e,n,r,a){Qc.forEach(function(s){var c=s.pluginName;if(!(!e.options[c]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[c]=u,So(r,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);typeof o<"u"&&(e.options[i]=o)}},getEventProperties:function(e,n){var r={};return Qc.forEach(function(a){typeof a.eventProperties=="function"&&So(r,a.eventProperties.call(n[a.pluginName],e))}),r},modifyOption:function(e,n,r){var a;return Qc.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(a=i.optionListeners[n].call(e[i.pluginName],r))}),a}};function mye(t){var e=t.sortable,n=t.rootEl,r=t.name,a=t.targetEl,i=t.cloneEl,o=t.toEl,s=t.fromEl,c=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,v=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Gr],!!e){var g,m=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ko&&!ef?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||n,g.from=s||n,g.item=a||n,g.clone=i,g.oldIndex=c,g.newIndex=u,g.oldDraggableIndex=d,g.newDraggableIndex=f,g.originalEvent=h,g.pullMode=v?v.lastPutMode:void 0;var b=Mi(Mi({},p),rf.getEventProperties(r,e));for(var w in b)g[w]=b[w];n&&n.dispatchEvent(g),m[y]&&m[y].call(e,g)}}var yye=["evt"],Yr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,i=cye(r,yye);rf.pluginEvent.bind(yt)(e,n,Mi({dragEl:qe,parentEl:In,ghostEl:Tt,rootEl:yn,nextEl:ss,lastDownEl:Np,cloneEl:_n,cloneHidden:ol,dragStarted:of,putSortable:cr,activeSortable:yt.active,originalEvent:a,oldIndex:Zc,oldDraggableIndex:af,newIndex:pa,newDraggableIndex:ll,hideGhostForTarget:CD,unhideGhostForTarget:_D,cloneNowHidden:function(){ol=!0},cloneNowShown:function(){ol=!1},dispatchSortableEvent:function(s){Or({sortable:n,name:s,originalEvent:a})}},i))};function Or(t){mye(Mi({putSortable:cr,cloneEl:_n,targetEl:qe,rootEl:yn,oldIndex:Zc,oldDraggableIndex:af,newIndex:pa,newDraggableIndex:ll},t))}var qe,In,Tt,yn,ss,Np,_n,ol,Zc,pa,af,ll,Dp,cr,Vc=!1,Rp=!1,Mp=[],cs,ui,jb,$b,gD,mD,of,eu,lf,sf=!1,Lp=!1,Fp,gr,Ub=[],zb=!1,Bp=[],jp=typeof document<"u",$p=Mb,yD=ef||ko?"cssFloat":"float",bye=jp&&!iD&&!Mb&&"draggable"in document.createElement("div"),bD=function(){if(jp){if(ko)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),wD=function(e,n){var r=xt(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=Jc(e,0,n),o=Jc(e,1,n),s=i&&xt(i),c=o&&xt(o),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$n(i).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+$n(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=a&&r[yD]==="none"||o&&r[yD]==="none"&&u+d>a)?"vertical":"horizontal"},wye=function(e,n,r){var a=r?e.left:e.top,i=r?e.right:e.bottom,o=r?e.width:e.height,s=r?n.left:n.top,c=r?n.right:n.bottom,u=r?n.width:n.height;return a===s||i===c||a+o/2===s+u/2},xye=function(e,n){var r;return Mp.some(function(a){var i=a[Gr].options.emptyInsertThreshold;if(!(!i||Lb(a))){var o=$n(a),s=e>=o.left-i&&e<=o.right+i,c=n>=o.top-i&&n<=o.bottom+i;if(s&&c)return r=a}}),r},xD=function(e){function n(i,o){return function(s,c,u,d){var f=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(i==null&&(o||f))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return n(i(s,c,u,d),o)(s,c,u,d);var h=(o?s:c).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var r={},a=e.group;(!a||Ip(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=n(a.pull,!0),r.checkPut=n(a.put),r.revertClone=a.revertClone,e.group=r},CD=function(){!bD&&Tt&&xt(Tt,"display","none")},_D=function(){!bD&&Tt&&xt(Tt,"display","")};jp&&!iD&&document.addEventListener("click",function(t){if(Rp)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Rp=!1,!1},!0);var us=function(e){if(qe){e=e.touches?e.touches[0]:e;var n=xye(e.clientX,e.clientY);if(n){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Gr]._onDragOver(r)}}},Cye=function(e){qe&&qe.parentNode[Gr]._isOutsideThisEl(e.target)};function yt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=So({},e),t[Gr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wD(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yt.supportPointer!==!1&&"PointerEvent"in window&&(!tf||Mb),emptyInsertThreshold:5};rf.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);xD(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:bye,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ht(t,"pointerdown",this._onTapStart):(Ht(t,"mousedown",this._onTapStart),Ht(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ht(t,"dragover",this),Ht(t,"dragenter",this)),Mp.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),So(this,vye())}yt.prototype={constructor:yt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(eu=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,qe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,a=this.options,i=a.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,d=a.filter;if(Iye(r),!qe&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&tf&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=ci(c,a.draggable,r,!1),!(c&&c.animated)&&Np!==c)){if(Zc=Ma(c),af=Ma(c,a.draggable),typeof d=="function"){if(d.call(this,e,c,this)){Or({sortable:n,rootEl:u,name:"filter",targetEl:c,toEl:r,fromEl:r}),Yr("filter",n,{evt:e}),i&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=ci(u,f.trim(),r,!1),f)return Or({sortable:n,rootEl:f,name:"filter",targetEl:c,fromEl:r,toEl:r}),Yr("filter",n,{evt:e}),!0}),d)){i&&e.preventDefault();return}a.handle&&!ci(u,a.handle,r,!1)||this._prepareDragStart(e,s,c)}}},_prepareDragStart:function(e,n,r){var a=this,i=a.el,o=a.options,s=i.ownerDocument,c;if(r&&!qe&&r.parentNode===i){var u=$n(r);if(yn=i,qe=r,In=qe.parentNode,ss=qe.nextSibling,Np=r,Dp=o.group,yt.dragged=qe,cs={target:qe,clientX:(n||e).clientX,clientY:(n||e).clientY},gD=cs.clientX-u.left,mD=cs.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,qe.style["will-change"]="all",c=function(){if(Yr("delayEnded",a,{evt:e}),yt.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!aD&&a.nativeDraggable&&(qe.draggable=!0),a._triggerDragStart(e,n),Or({sortable:a,name:"choose",originalEvent:e}),va(qe,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){cD(qe,d.trim(),Hb)}),Ht(s,"dragover",us),Ht(s,"mousemove",us),Ht(s,"touchmove",us),o.supportPointer?(Ht(s,"pointerup",a._onDrop),!this.nativeDraggable&&Ht(s,"pointercancel",a._onDrop)):(Ht(s,"mouseup",a._onDrop),Ht(s,"touchend",a._onDrop),Ht(s,"touchcancel",a._onDrop)),aD&&this.nativeDraggable&&(this.options.touchStartThreshold=4,qe.draggable=!0),Yr("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ef||ko))){if(yt.eventCanceled){this._onDrop();return}o.supportPointer?(Ht(s,"pointerup",a._disableDelayedDrag),Ht(s,"pointercancel",a._disableDelayedDrag)):(Ht(s,"mouseup",a._disableDelayedDrag),Ht(s,"touchend",a._disableDelayedDrag),Ht(s,"touchcancel",a._disableDelayedDrag)),Ht(s,"mousemove",a._delayedDragTouchMoveHandler),Ht(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&Ht(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,o.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){qe&&Hb(qe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;jt(e,"mouseup",this._disableDelayedDrag),jt(e,"touchend",this._disableDelayedDrag),jt(e,"touchcancel",this._disableDelayedDrag),jt(e,"pointerup",this._disableDelayedDrag),jt(e,"pointercancel",this._disableDelayedDrag),jt(e,"mousemove",this._delayedDragTouchMoveHandler),jt(e,"touchmove",this._delayedDragTouchMoveHandler),jt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ht(document,"pointermove",this._onTouchMove):n?Ht(document,"touchmove",this._onTouchMove):Ht(document,"mousemove",this._onTouchMove):(Ht(qe,"dragend",this),Ht(yn,"dragstart",this._onDragStart));try{document.selection?zp(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Vc=!1,yn&&qe){Yr("dragStarted",this,{evt:n}),this.nativeDraggable&&Ht(document,"dragover",Cye);var r=this.options;!e&&va(qe,r.dragClass,!1),va(qe,r.ghostClass,!0),yt.active=this,e&&this._appendGhost(),Or({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ui){this._lastX=ui.clientX,this._lastY=ui.clientY,CD();for(var e=document.elementFromPoint(ui.clientX,ui.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ui.clientX,ui.clientY),e!==n);)n=e;if(qe.parentNode[Gr]._isOutsideThisEl(e),n)do{if(n[Gr]){var r=void 0;if(r=n[Gr]._onDragOver({clientX:ui.clientX,clientY:ui.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=lD(n));_D()}},_onTouchMove:function(e){if(cs){var n=this.options,r=n.fallbackTolerance,a=n.fallbackOffset,i=e.touches?e.touches[0]:e,o=Tt&&Xc(Tt,!0),s=Tt&&o&&o.a,c=Tt&&o&&o.d,u=$p&&gr&&dD(gr),d=(i.clientX-cs.clientX+a.x)/(s||1)+(u?u[0]-Ub[0]:0)/(s||1),f=(i.clientY-cs.clientY+a.y)/(c||1)+(u?u[1]-Ub[1]:0)/(c||1);if(!yt.active&&!Vc){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Tt){o?(o.e+=d-(jb||0),o.f+=f-($b||0)):o={a:1,b:0,c:0,d:1,e:d,f};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");xt(Tt,"webkitTransform",h),xt(Tt,"mozTransform",h),xt(Tt,"msTransform",h),xt(Tt,"transform",h),jb=d,$b=f,ui=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Tt){var e=this.options.fallbackOnBody?document.body:yn,n=$n(qe,!0,$p,!0,e),r=this.options;if($p){for(gr=e;xt(gr,"position")==="static"&&xt(gr,"transform")==="none"&&gr!==document;)gr=gr.parentNode;gr!==document.body&&gr!==document.documentElement?(gr===document&&(gr=Li()),n.top+=gr.scrollTop,n.left+=gr.scrollLeft):gr=Li(),Ub=dD(gr)}Tt=qe.cloneNode(!0),va(Tt,r.ghostClass,!1),va(Tt,r.fallbackClass,!0),va(Tt,r.dragClass,!0),xt(Tt,"transition",""),xt(Tt,"transform",""),xt(Tt,"box-sizing","border-box"),xt(Tt,"margin",0),xt(Tt,"top",n.top),xt(Tt,"left",n.left),xt(Tt,"width",n.width),xt(Tt,"height",n.height),xt(Tt,"opacity","0.8"),xt(Tt,"position",$p?"absolute":"fixed"),xt(Tt,"zIndex","100000"),xt(Tt,"pointerEvents","none"),yt.ghost=Tt,e.appendChild(Tt),xt(Tt,"transform-origin",gD/parseInt(Tt.style.width)*100+"% "+mD/parseInt(Tt.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,a=e.dataTransfer,i=r.options;if(Yr("dragStart",this,{evt:e}),yt.eventCanceled){this._onDrop();return}Yr("setupClone",this),yt.eventCanceled||(_n=vD(qe),_n.removeAttribute("id"),_n.draggable=!1,_n.style["will-change"]="",this._hideClone(),va(_n,this.options.chosenClass,!1),yt.clone=_n),r.cloneId=zp(function(){Yr("clone",r),!yt.eventCanceled&&(r.options.removeCloneOnHide||yn.insertBefore(_n,qe),r._hideClone(),Or({sortable:r,name:"clone"}))}),!n&&va(qe,i.dragClass,!0),n?(Rp=!0,r._loopId=setInterval(r._emulateDragOver,50)):(jt(document,"mouseup",r._onDrop),jt(document,"touchend",r._onDrop),jt(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(r,a,qe)),Ht(document,"drop",r),xt(qe,"transform","translateZ(0)")),Vc=!0,r._dragStartId=zp(r._dragStarted.bind(r,n,e)),Ht(document,"selectstart",r),of=!0,window.getSelection().removeAllRanges(),tf&&xt(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,a,i,o,s=this.options,c=s.group,u=yt.active,d=Dp===c,f=s.sort,h=cr||u,v,p=this,g=!1;if(zb)return;function m(U,F){Yr(U,p,Mi({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:o,dragRect:a,targetRect:i,canSort:f,fromSortable:h,target:r,completed:b,onMove:function(W,H){return Up(yn,n,qe,a,W,$n(W),e,H)},changed:w},F))}function y(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function b(U){return m("dragOverCompleted",{insertion:U}),U&&(d?u._hideClone():u._showClone(p),p!==h&&(va(qe,cr?cr.options.ghostClass:u.options.ghostClass,!1),va(qe,s.ghostClass,!0)),cr!==p&&p!==yt.active?cr=p:p===yt.active&&cr&&(cr=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===qe&&!qe.animated||r===n&&!r.animated)&&(eu=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(qe.parentNode[Gr]._isOutsideThisEl(e.target),!U&&us(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function w(){pa=Ma(qe),ll=Ma(qe,s.draggable),Or({sortable:p,name:"change",toEl:n,newIndex:pa,newDraggableIndex:ll,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=ci(r,s.draggable,n,!0),m("dragOver"),yt.eventCanceled)return g;if(qe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return b(!1);if(Rp=!1,u&&!s.disabled&&(d?f||(o=In!==yn):cr===this||(this.lastPutMode=Dp.checkPull(this,u,qe,e))&&c.checkPut(this,u,qe,e))){if(v=this._getDirection(e,r)==="vertical",a=$n(qe),m("dragOverValid"),yt.eventCanceled)return g;if(o)return In=yn,y(),this._hideClone(),m("revert"),yt.eventCanceled||(ss?yn.insertBefore(qe,ss):yn.appendChild(qe)),b(!0);var x=Lb(n,s.draggable);if(!x||kye(e,v,this)&&!x.animated){if(x===qe)return b(!1);if(x&&n===e.target&&(r=x),r&&(i=$n(r)),Up(yn,n,qe,a,r,i,e,!!r)!==!1)return y(),x&&x.nextSibling?n.insertBefore(qe,x.nextSibling):n.appendChild(qe),In=n,w(),b(!0)}else if(x&&Tye(e,v,this)){var C=Jc(n,0,s,!0);if(C===qe)return b(!1);if(r=C,i=$n(r),Up(yn,n,qe,a,r,i,e,!1)!==!1)return y(),n.insertBefore(qe,C),In=n,w(),b(!0)}else if(r.parentNode===n){i=$n(r);var S=0,_,O=qe.parentNode!==n,N=!wye(qe.animated&&qe.toRect||a,r.animated&&r.toRect||i,v),B=v?"top":"left",T=uD(r,"top","top")||uD(qe,"top","top"),k=T?T.scrollTop:void 0;eu!==r&&(_=i[B],sf=!1,Lp=!N&&s.invertSwap||O),S=Oye(e,r,i,v,N?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Lp,eu===r);var E;if(S!==0){var I=Ma(qe);do I-=S,E=In.children[I];while(E&&(xt(E,"display")==="none"||E===Tt))}if(S===0||E===r)return b(!1);eu=r,lf=S;var A=r.nextElementSibling,M=!1;M=S===1;var $=Up(yn,n,qe,a,r,i,e,M);if($!==!1)return($===1||$===-1)&&(M=$===1),zb=!0,setTimeout(Sye,30),y(),M&&!A?n.appendChild(qe):r.parentNode.insertBefore(qe,M?A:r),T&&hD(T,0,k-T.scrollTop),In=qe.parentNode,_!==void 0&&!Lp&&(Fp=Math.abs(_-$n(r)[B])),w(),b(!0)}if(n.contains(qe))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){jt(document,"mousemove",this._onTouchMove),jt(document,"touchmove",this._onTouchMove),jt(document,"pointermove",this._onTouchMove),jt(document,"dragover",us),jt(document,"mousemove",us),jt(document,"touchmove",us)},_offUpEvents:function(){var e=this.el.ownerDocument;jt(e,"mouseup",this._onDrop),jt(e,"touchend",this._onDrop),jt(e,"pointerup",this._onDrop),jt(e,"pointercancel",this._onDrop),jt(e,"touchcancel",this._onDrop),jt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(pa=Ma(qe),ll=Ma(qe,r.draggable),Yr("drop",this,{evt:e}),In=qe&&qe.parentNode,pa=Ma(qe),ll=Ma(qe,r.draggable),yt.eventCanceled){this._nulling();return}Vc=!1,Lp=!1,sf=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Wb(this.cloneId),Wb(this._dragStartId),this.nativeDraggable&&(jt(document,"drop",this),jt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),tf&&xt(document.body,"user-select",""),xt(qe,"transform",""),e&&(of&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Tt&&Tt.parentNode&&Tt.parentNode.removeChild(Tt),(yn===In||cr&&cr.lastPutMode!=="clone")&&_n&&_n.parentNode&&_n.parentNode.removeChild(_n),qe&&(this.nativeDraggable&&jt(qe,"dragend",this),Hb(qe),qe.style["will-change"]="",of&&!Vc&&va(qe,cr?cr.options.ghostClass:this.options.ghostClass,!1),va(qe,this.options.chosenClass,!1),Or({sortable:this,name:"unchoose",toEl:In,newIndex:null,newDraggableIndex:null,originalEvent:e}),yn!==In?(pa>=0&&(Or({rootEl:In,name:"add",toEl:In,fromEl:yn,originalEvent:e}),Or({sortable:this,name:"remove",toEl:In,originalEvent:e}),Or({rootEl:In,name:"sort",toEl:In,fromEl:yn,originalEvent:e}),Or({sortable:this,name:"sort",toEl:In,originalEvent:e})),cr&&cr.save()):pa!==Zc&&pa>=0&&(Or({sortable:this,name:"update",toEl:In,originalEvent:e}),Or({sortable:this,name:"sort",toEl:In,originalEvent:e})),yt.active&&((pa==null||pa===-1)&&(pa=Zc,ll=af),Or({sortable:this,name:"end",toEl:In,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yr("nulling",this),yn=qe=In=Tt=ss=_n=Np=ol=cs=ui=of=pa=ll=Zc=af=eu=lf=cr=Dp=yt.dragged=yt.ghost=yt.clone=yt.active=null,Bp.forEach(function(e){e.checked=!0}),Bp.length=jb=$b=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":qe&&(this._onDragOver(e),_ye(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,a=0,i=r.length,o=this.options;a<i;a++)n=r[a],ci(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Pye(n));return e},sort:function(e,n){var r={},a=this.el;this.toArray().forEach(function(i,o){var s=a.children[o];ci(s,this.options.draggable,a,!1)&&(r[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(a.removeChild(r[i]),a.appendChild(r[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ci(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var a=rf.modifyOption(this,e,n);typeof a<"u"?r[e]=a:r[e]=n,e==="group"&&xD(r)},destroy:function(){Yr("destroy",this);var e=this.el;e[Gr]=null,jt(e,"mousedown",this._onTapStart),jt(e,"touchstart",this._onTapStart),jt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(jt(e,"dragover",this),jt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Mp.splice(Mp.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ol){if(Yr("hideClone",this),yt.eventCanceled)return;xt(_n,"display","none"),this.options.removeCloneOnHide&&_n.parentNode&&_n.parentNode.removeChild(_n),ol=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ol){if(Yr("showClone",this),yt.eventCanceled)return;qe.parentNode==yn&&!this.options.group.revertClone?yn.insertBefore(_n,qe):ss?yn.insertBefore(_n,ss):yn.appendChild(_n),this.options.group.revertClone&&this.animate(qe,_n),xt(_n,"display",""),ol=!1}}};function _ye(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Up(t,e,n,r,a,i,o,s){var c,u=t[Gr],d=u.options.onMove,f;return window.CustomEvent&&!ko&&!ef?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=n,c.draggedRect=r,c.related=a||e,c.relatedRect=i||$n(e),c.willInsertAfter=s,c.originalEvent=o,t.dispatchEvent(c),d&&(f=d.call(u,c,o)),f}function Hb(t){t.draggable=!1}function Sye(){zb=!1}function Tye(t,e,n){var r=$n(Jc(n.el,0,n.options,!0)),a=pD(n.el,n.options,Tt),i=10;return e?t.clientX<a.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<a.top-i||t.clientY<r.bottom&&t.clientX<r.left}function kye(t,e,n){var r=$n(Lb(n.el,n.options.draggable)),a=pD(n.el,n.options,Tt),i=10;return e?t.clientX>a.right+i||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>a.bottom+i||t.clientX>r.right&&t.clientY>r.top}function Oye(t,e,n,r,a,i,o,s){var c=r?t.clientY:t.clientX,u=r?n.height:n.width,d=r?n.top:n.left,f=r?n.bottom:n.right,h=!1;if(!o){if(s&&Fp<u*a){if(!sf&&(lf===1?c>d+u*i/2:c<f-u*i/2)&&(sf=!0),sf)h=!0;else if(lf===1?c<d+Fp:c>f-Fp)return-lf}else if(c>d+u*(1-a)/2&&c<f-u*(1-a)/2)return Eye(e)}return h=h||o,h&&(c<d+u*i/2||c>f-u*i/2)?c>d+u/2?1:-1:0}function Eye(t){return Ma(qe)<Ma(t)?1:-1}function Pye(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Iye(t){Bp.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Bp.push(r)}}function zp(t){return setTimeout(t,0)}function Wb(t){return clearTimeout(t)}jp&&Ht(document,"touchmove",function(t){(yt.active||Vc)&&t.cancelable&&t.preventDefault()}),yt.utils={on:Ht,off:jt,css:xt,find:cD,is:function(e,n){return!!ci(e,n,e,!1)},extend:fye,throttle:fD,closest:ci,toggleClass:va,clone:vD,index:Ma,nextTick:zp,cancelNextTick:Wb,detectDirection:wD,getChild:Jc,expando:Gr},yt.get=function(t){return t[Gr]},yt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(yt.utils=Mi(Mi({},yt.utils),r.utils)),rf.mount(r)})},yt.create=function(t,e){return new yt(t,e)},yt.version=uye;var Un=[],cf,Kb,qb=!1,Gb,Yb,Hp,uf;function Aye(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ht(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ht(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ht(document,"touchmove",this._handleFallbackAutoScroll):Ht(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?jt(document,"dragover",this._handleAutoScroll):(jt(document,"pointermove",this._handleFallbackAutoScroll),jt(document,"touchmove",this._handleFallbackAutoScroll),jt(document,"mousemove",this._handleFallbackAutoScroll)),SD(),Wp(),hye()},nulling:function(){Hp=Kb=cf=qb=uf=Gb=Yb=null,Un.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var a=this,i=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,o);if(Hp=n,r||this.options.forceAutoScrollFallback||ef||ko||tf){Xb(n,this.options,s,r);var c=il(s,!0);qb&&(!uf||i!==Gb||o!==Yb)&&(uf&&SD(),uf=setInterval(function(){var u=il(document.elementFromPoint(i,o),!0);u!==c&&(c=u,Wp()),Xb(n,a.options,u,r)},10),Gb=i,Yb=o)}else{if(!this.options.bubbleScroll||il(s,!0)===Li()){Wp();return}Xb(n,this.options,il(s,!1),!1)}}},So(t,{pluginName:"scroll",initializeByDefault:!0})}function Wp(){Un.forEach(function(t){clearInterval(t.pid)}),Un=[]}function SD(){clearInterval(uf)}var Xb=fD(function(t,e,n,r){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,c=Li(),u=!1,d;Kb!==n&&(Kb=n,Wp(),cf=e.scroll,d=e.scrollFn,cf===!0&&(cf=il(n,!0)));var f=0,h=cf;do{var v=h,p=$n(v),g=p.top,m=p.bottom,y=p.left,b=p.right,w=p.width,x=p.height,C=void 0,S=void 0,_=v.scrollWidth,O=v.scrollHeight,N=xt(v),B=v.scrollLeft,T=v.scrollTop;v===c?(C=w<_&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),S=x<O&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(C=w<_&&(N.overflowX==="auto"||N.overflowX==="scroll"),S=x<O&&(N.overflowY==="auto"||N.overflowY==="scroll"));var k=C&&(Math.abs(b-a)<=o&&B+w<_)-(Math.abs(y-a)<=o&&!!B),E=S&&(Math.abs(m-i)<=o&&T+x<O)-(Math.abs(g-i)<=o&&!!T);if(!Un[f])for(var I=0;I<=f;I++)Un[I]||(Un[I]={});(Un[f].vx!=k||Un[f].vy!=E||Un[f].el!==v)&&(Un[f].el=v,Un[f].vx=k,Un[f].vy=E,clearInterval(Un[f].pid),(k!=0||E!=0)&&(u=!0,Un[f].pid=setInterval((function(){r&&this.layer===0&&yt.active._onTouchMove(Hp);var A=Un[this.layer].vy?Un[this.layer].vy*s:0,M=Un[this.layer].vx?Un[this.layer].vx*s:0;typeof d=="function"&&d.call(yt.dragged.parentNode[Gr],M,A,t,Hp,Un[this.layer].el)!=="continue"||hD(Un[this.layer].el,M,A)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==c&&(h=il(h,!1)));qb=u}},30),TD=function(e){var n=e.originalEvent,r=e.putSortable,a=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(n){var u=r||i;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(d.clientX,d.clientY);c(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function Jb(){}Jb.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=Jc(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:TD},So(Jb,{pluginName:"revertOnSpill"});function Qb(){}Qb.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,a=r||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:TD},So(Qb,{pluginName:"removeOnSpill"}),yt.mount(new Aye),yt.mount(Qb,Jb);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function kD(t,e,n){var r=Ee(t);return n-e>0?(r.splice(n+1,0,r[e]),r.splice(e,1)):(r.splice(n,0,r[e]),r.splice(e+1,1)),r}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function df(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ED(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function PD(t,e,n){var r=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,r)}function Nye(t,e,n){var r=l.toRefs(t),a=r.sortOnRowDraggable,i=r.dragSort,o=r.data,s=l.ref(t.pagination),c=Kr(),u=c.tableDraggableClasses,d=c.tableBaseClass,f=c.tableFullRowClasses,h=c.tableExpandClasses,v=l.ref(t.columns||[]),p=l.ref(null),g=l.computed(function(){return v.value.find(function(B){return B.colKey==="drag"})}),m=l.computed(function(){return a.value||["row","row-handler-col"].includes(i.value)}),y=l.computed(function(){return["row-handler","row-handler-col"].includes(i.value)&&!!g.value}),b=l.computed(function(){return["col","row-handler-col"].includes(i.value)});t.sortOnRowDraggable&&st.error("Table","`sortOnRowDraggable` is going to be deprecated, use dragSort='row' instead.");function w(B,T){var k,E,I=(k=T.current)!==null&&k!==void 0?k:T.defaultCurrent,A=(E=T.pageSize)!==null&&E!==void 0?E:T.defaultPageSize;return!t.disableDataPage&&T&&o.value.length>A?A*(I-1)+B:B}var x=function(T){if(!(!y.value&&!m.value)){var k=T==null?void 0:T.querySelector("tbody");if(!k)return console.error("tbody does not exist."),null;var E=df({animation:150,ghostClass:u.ghost,chosenClass:u.chosen,dragClass:u.dragging,filter:".".concat(f.base,",.").concat(h.row),onMove:function(A){return!D0(A.related,f.base)},onEnd:function(A){var M;if(A.newIndex!==A.oldIndex){ED(A.item),PD(A.from,A.item,A.oldIndex);var $=A.oldIndex,U=A.newIndex;(Re(t.firstFullRow)&&t.firstFullRow(l.h)||e.slots.firstFullRow||e.slots["first-full-row"])&&($-=1,U-=1),s.value&&($=w($,s.value),U=w(U,s.value));var F={data:o.value,currentIndex:$,current:o.value[$],targetIndex:U,target:o.value[U],newData:kD(Ee(t.data),$,U),e:A,sort:"row"};F.currentData=F.newData,(M=t.onDragSort)===null||M===void 0||M.call(t,F)}}},t.dragSortOptions);k&&(m.value?new yt(k,df({},E)):new yt(k,df(df({},E),{},{handle:".".concat(u.handle)})))}},C=function(T,k){var E=df({animation:150,dataIdAttr:"data-colkey",direction:"vertical",ghostClass:u.ghost,chosenClass:u.chosen,dragClass:u.dragging,handle:".".concat(d.thCellInner),onEnd:function(A){var M;if(A.newIndex!==A.oldIndex){k&&(ED(A.item),PD(A.from,A.item,A.oldIndex));var $=A.oldIndex,U=A.newIndex,F=A.target,j=k?$:U,W=k?U:$,H=F.children[j],J=F.children[W],Y=kp(v.value,H.dataset.colkey),D=kp(v.value,J.dataset.colkey);(!Y||!Y.colKey)&&st.error("Table","colKey is missing in ".concat(JSON.stringify(Y))),(!D||!D.colKey)&&st.error("Table","colKey is missing in ".concat(JSON.stringify(D))),j=J5(t.columns,Y.colKey),W=J5(t.columns,D.colKey);var q={data:v.value,currentIndex:j,current:Y,targetIndex:W,target:D,newData:kD(Ee(t.columns),j,W),e:A,sort:"col"};q.currentData=q.newData,(M=t.onDragSort)===null||M===void 0||M.call(t,q)}}},t.dragSortOptions);T&&new yt(T,E)},S=function(T){if(!(!b.value||!T)){var k=T.querySelectorAll("thead > tr");if(k.length<=1){var E=$e(k,1),I=E[0];C(I,!0)}else k==null||k.forEach(function(A){C(A,!1)})}};function _(B){p.value=B}function O(B){v.value=B}l.watch([p,v,i,n],function(B){var T=$e(B,4),k=T[0];T[1],T[2];var E=T[3];N(k,E)});function N(B,T){var k=B;if(!(!B||!k.$el||!T.showElement))var E=setTimeout(function(){x(k.$el),S(k.$el);var I=setTimeout(function(){k.$refs.affixHeaderRef&&S(k.$refs.affixHeaderRef),clearTimeout(I)});clearTimeout(E)},60)}return{innerPagination:s,isRowDraggable:m,isRowHandlerDraggable:y,isColDraggable:b,setDragSortPrimaryTableRef:_,setDragSortColumns:O}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Dye(t){var e=We(),n=Qe("table",t.locale),r=n.globalConfig,a=Kr(),i=a.isLoadingClass,o=a.isLoadMoreClass,s=a.asyncLoadingClass,c=l.computed(function(){return[s,V(V({},i,t.asyncLoading==="loading"),o,t.asyncLoading==="load-more")]});function u(){var f;Je(t.asyncLoading)&&((f=t.onAsyncLoadingClick)===null||f===void 0||f.call(t,{status:t.asyncLoading}))}function d(){var f=e("asyncLoading");if(Je(f)){var h=t.asyncLoading,v={"load-more":r.value.loadingMoreText,loading:r.value.loadingText}[String(h)];return l.createVNode("div",{class:c.value,onClick:u},[l.createVNode(lr,{indicator:h==="loading",loading:!!h,size:"small",text:v},null)])}return[null,!1,void 0].includes(f)?null:l.createVNode("div",{class:c.value,onClick:u},[f])}return{renderAsyncLoading:d}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ID(t){return eS(t)||wC(t)||a0(t)||tS()}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function AD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Rye=l.defineComponent({name:"TableEditableCell",props:{row:Object,rowKey:String,rowIndex:Number,col:Object,colIndex:Number,oldCell:[Function,String],tableBaseClass:Object,cellEmptyContent:[Function,String],editable:{type:Boolean,default:void 0},readonly:{type:Boolean},errors:{type:Array,default:void 0},onChange:Function,onValidate:Function,onRuleChange:Function,onEditableChange:Function},emits:["update-edited-cell"],setup:function(e,n){var r,a=l.toRefs(e),i=a.row,o=a.col;l.ref(null);var s=l.computed(function(){var A;return(A=o.value.edit)===null||A===void 0?void 0:A.keepEditMode}),c=l.ref(s.value||((r=e.col.edit)===null||r===void 0?void 0:r.defaultEditable)||!1),u=l.ref(),d=l.ref(),f=ve(),h=St({Edit1Icon:KV}),v=h.Edit1Icon,p=function(M){if(wt(M)==="object"&&("rowValue"in M||M.isUpdateCurrentRow)){var $=M.isUpdateCurrentRow?je(i.value,e.rowKey):M.rowValue;delete M.rowValue,delete M.isUpdateCurrentRow,n.emit("update-edited-cell",$,i.value,M)}else u.value=M};l.watch([s],function(A){A&&(c.value=!0)});var g=l.computed(function(){var A,M;return((A=o.value.edit)===null||A===void 0||(M=A.on)===null||M===void 0?void 0:M.call(A,Jt(Jt({},m.value),{},{editedRow:y.value,updateEditedCellValue:p})))||{}}),m=l.computed(function(){return{rowIndex:e.rowIndex,colIndex:e.colIndex,col:e.col,row:e.row}}),y=l.computed(function(){var A=o.value.colKey,M=A.split(".")||[],$=ID(M),U=$[0],F=$.slice(1),j=Jt({},i.value);return F.length?(j[U]=Br(i.value[U]),Vl(j[U],F.join("."),u.value)):Vl(j,A,u.value),j}),b=l.computed(function(){var A=_p({row:y.value,col:Jt(Jt({},o.value),{},{cell:e.oldCell}),rowIndex:e.rowIndex,colIndex:e.colIndex},n.slots,{cellEmptyContent:e.cellEmptyContent});return A}),w=l.computed(function(){var A=o.value.edit;return Re(A.props)?A.props(Jt(Jt({},m.value),{},{editedRow:y.value,updateEditedCellValue:p})):Jt({},A.props)}),x=l.computed(function(){var A,M=o.value.edit;if(!M)return{};var $=Jt({},w.value);return delete $.onChange,delete $.value,(A=M.abortEditOnEvent)===null||A===void 0||A.forEach(function(U){delete $[U]}),$}),C=l.computed(function(){var A,M=o.value.edit;return M?!!(!((A=M.abortEditOnEvent)===null||A===void 0)&&A.includes("onChange")):!1}),S=function(M){return new Promise(function($){var U={result:[Jt(Jt({},m.value),{},{errorList:[],value:u.value})],trigger:M},F=Re(o.value.edit.rules)?o.value.edit.rules(m.value):o.value.edit.rules;if(!o.value.edit||!F||!F.length){var j;(j=e.onValidate)===null||j===void 0||j.call(e,U),$(!0);return}Vy(u.value,F).then(function(W){var H,J=W==null?void 0:W.filter(function(Y){return!Y.result});U.result[0].errorList=J,(H=e.onValidate)===null||H===void 0||H.call(e,U),!J||!J.length?(d.value=[],$(!0)):(d.value=J,$(J))})})},_=function(M,$){return ot(M)&&ot($)?JSON.stringify(M)===JSON.stringify($):M===$},O=function(M,$){for(var U=arguments.length,F=new Array(U>2?U-2:0),j=2;j<U;j++)F[j-2]=arguments[j];S("self").then(function(W){var H,J;if(W===!0){var Y=je(i.value,o.value.colKey);_(u.value,Y)||(u.value=Y,M==null||M.apply(void 0,F)),(H=(J=g.value)[$])===null||H===void 0||H.call(J,F[2]);var D=setTimeout(function(){var q;s.value||(c.value=!1),d.value=[],(q=e.onEditableChange)===null||q===void 0||q.call(e,Jt(Jt({},m.value),{},{value:u.value,editedRow:Jt(Jt({},e.row),{},V({},e.col.colKey,u.value)),validateEdit:S,isEdit:!1})),clearTimeout(D)},0)}})},N=l.computed(function(){var A,M=o.value.edit,$=e.editable===void 0;if(!(!c.value||!$)){if(!(M!=null&&(A=M.abortEditOnEvent)!==null&&A!==void 0&&A.length))return{};var U={},F=M==null?void 0:M.onEdited;return M.abortEditOnEvent.forEach(function(j){j!=="onChange"&&(U[j]=function(){for(var W=arguments.length,H=new Array(W),J=0;J<W;J++)H[J]=arguments[J];O.apply(void 0,[F,j,Jt(Jt({},m.value),{},{trigger:j,newRowData:y.value})].concat(H))})}),U}}),B=function(M){var $,U,F,j,W,H,J;u.value=M;for(var Y=Jt(Jt({},m.value),{},{value:M,editedRow:Jt(Jt({},e.row),{},V({},e.col.colKey,M))}),D=arguments.length,q=new Array(D>1?D-1:0),z=1;z<D;z++)q[z-1]=arguments[z];($=w.value)===null||$===void 0||(U=$.onChange)===null||U===void 0||U.call.apply(U,[$,M].concat(q)),(F=e.onChange)===null||F===void 0||F.call(e,Y),(j=e.onRuleChange)===null||j===void 0||j.call(e,Y),(W=g.value)===null||W===void 0||(H=W.onChange)===null||H===void 0||H.call(W,Y);var K=e.editable===void 0;if(K&&C.value){var P,R=(P=o.value.edit)===null||P===void 0?void 0:P.onEdited;O.apply(void 0,[R,"change",Jt(Jt({},m.value),{},{trigger:"onChange",newRowData:y.value})].concat(q))}((J=o.value.edit)===null||J===void 0?void 0:J.validateTrigger)==="change"&&S("self")},T=function(M){var $;if(!(!o.value.edit||!o.value.edit.component)&&c.value){var U=(($=M.composedPath)===null||$===void 0?void 0:$.call(M))||M.path||[],F=U.find(function(W){var H;return(H=W.classList)===null||H===void 0?void 0:H.contains("".concat(f.value,"-popup__content"))});if(!F){var j=o.value.edit.onEdited;O(j,"",Jt(Jt({},m.value),{},{trigger:"document",newRowData:y.value}))}}},k=function(){var M;(M=e.onEditableChange)===null||M===void 0||M.call(e,Jt(Jt({},m.value),{},{value:u.value,editedRow:e.row,isEdit:!0,validateEdit:S}))},E=function(M){c.value=!0,k(),M.stopPropagation()};l.onMounted(function(){var A;(A=e.col.edit)!==null&&A!==void 0&&A.defaultEditable&&k()});var I=l.computed(function(){return je(i.value,o.value.colKey)});return l.watch(I,function(A){u.value=A},{immediate:!0}),l.watch(c,function(A){var M=e.editable===void 0;!o.value.edit||!o.value.edit.component||!M||(A?qt(document,"click",T):At(document,"click",T))},{immediate:!0}),l.watch(function(){return[e.editable,e.row,e.col,e.rowIndex,e.colIndex]},function(A){var M=$e(A,1),$=M[0];if($===!1)u.value=I.value;else if($===!0){var U;(U=e.onRuleChange)===null||U===void 0||U.call(e,Jt(Jt({},m.value),{},{value:I.value,editedRow:i.value}))}},{immediate:!0}),l.watch(function(){return e.errors},function(A){d.value=A}),function(){var A,M,$,U;if(e.readonly)return b.value;if(e.editable===void 0&&!c.value||e.editable===!1){var F;return l.createVNode("div",{class:e.tableBaseClass.cellEditable,onClick:E},[b.value,((F=o.value.edit)===null||F===void 0?void 0:F.showEditIcon)!==!1&&l.createVNode(v,null,null)])}var j=(A=o.value.edit)===null||A===void 0?void 0:A.component;if(!j)return st.error("Table","edit.component is required."),null;var W=(M=d.value)===null||M===void 0||(M=M[0])===null||M===void 0?void 0:M.message,H=Jt({},g.value);return delete H.onChange,($=o.value.edit)!==null&&$!==void 0&&($=$.abortEditOnEvent)!==null&&$!==void 0&&$.length&&o.value.edit.abortEditOnEvent.forEach(function(J){H[J]&&delete H[J]}),l.createVNode("div",{class:e.tableBaseClass.cellEditWrap,onClick:function(Y){Y.stopPropagation()},ref:"tableEditableCellRef"},[l.createVNode(j,l.mergeProps({status:W?((U=d.value)===null||U===void 0||(U=U[0])===null||U===void 0?void 0:U.type)||"error":void 0,tips:W},x.value,N.value,H,{value:u.value,onChange:B}),null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function ND(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mye(t){var e=l.toRefs(t),n=e.editableRowKeys,r=new Map,a=l.ref({}),i=l.computed(function(){return Z0e(t.editableRowKeys,t.data,t.rowKey||"id")}),o=l.ref({}),s=l.ref({}),c=function(w){var x={};return w.forEach(function(C){var S=C.row,_=C.col,O=C.errorList,N=je(S,t.rowKey||"id"),B=[N,_.colKey].join("__");O!=null&&O.length?x[B]=O:delete x[B]}),x},u=function(w){var x=r.get(w);if(x){var C=x.map(function(S){return new Promise(function(_){var O=S.editedRow,N=S.col,B=Re(N.edit.rules)?N.edit.rules(S):N.edit.rules;if(!N.edit||!B||!B.length){_(ff(ff({},S),{},{errorList:[]}));return}Vy(je(O,N.colKey),B).then(function(T){_(ff(ff({},S),{},{errorList:T.filter(function(k){return!k.result})}))})})});return new Promise(function(S,_){Promise.all(C).then(function(O){S({errors:O.filter(function(N){var B;return(B=N.errorList)===null||B===void 0?void 0:B.length}),errorMap:c(O)})},_)})}},d=function(w){return new Promise(function(x,C){u(w).then(function(S){var _,O=S.errors,N=S.errorMap;a.value=N;var B="parent";(_=t.onRowValidate)===null||_===void 0||_.call(t,{trigger:B,result:O}),x({trigger:B,result:O})},C)})},f=function(){var w=Object.keys(o.value),x=t.data.map(function(S){var _;return(_=S[t.rowKey])===null||_===void 0?void 0:_.toString()}),C=w.filter(function(S){return x.includes($0e(S))}).map(function(S){return o.value[S].validateEdit("parent")});return new Promise(function(S,_){Promise.all(C).then(function(O){var N,B={};O.forEach(function(T,k){T!==!0&&(B[w[k]]=T)}),(N=t.onValidate)===null||N===void 0||N.call(t,{result:B}),S({result:B})},_)})},h=function(){if(Object.keys(o.value).length)return f();for(var w=[],x=t.data||[],C=0,S=x.length;C<S;C++){var _=je(x[C],t.rowKey||"id");w.push(u(_))}return new Promise(function(O,N){Promise.all(w).then(function(B){var T,k={};B.forEach(function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{errorMap:{}},I=E.errorMap;I&&Object.assign(k,I)}),a.value=k,(T=t.onValidate)===null||T===void 0||T.call(t,{result:k}),O({result:k})},N)})},v=function(w,x,C){s.value[w]||(s.value[w]=Br(x)),Object.entries(C).forEach(function(S){var _=$e(S,2),O=_[0],N=_[1];Vl(s.value[w],O,N)})},p=function(w){if(t.editableRowKeys){var x=je(w.row,t.rowKey||"id"),C=r.get(x);if(C){var S=C.findIndex(function(_){return _.col.colKey===w.col.colKey});S===-1?C.push(w):C[S]=w,r.set(x,C)}else r.set(x,[w])}},g=function(){a.value={}},m=function(w){var x=Zd(w.row,t.rowKey,w.col.colKey,w.colIndex);w.isEdit?o.value[x]=w:delete o.value[x]},y=function(w){var x,C=w.row,S=w.col,_=je(C,t.rowKey||"id"),O=s.value[_];if(O&&(x=t.editableRowKeys)!==null&&x!==void 0&&x.includes(_)){var N=ff({},O);return Vl(N,S.colKey,je(O,S.colKey)),N}return C};return l.watch(function(){var b;return(b=n.value)===null||b===void 0?void 0:b.join(",")},function(b){var w=b.split(","),x=Object.keys(s.value);x.forEach(function(C){w.includes(C)||delete s.value[C]})}),{editedFormData:s,errorListMap:a,editableKeysMap:i,validateTableData:h,validateRowData:d,onRuleChange:p,clearValidateData:g,onUpdateEditedCell:v,getEditRowData:y,onPrimaryTableCellEditChange:m}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function DD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Lye=["hideSortTips","dragSort","defaultExpandedRowKeys","defaultSelectedRowKeys","columnController","filterRow","sortOnRowDraggable","expandOnRowClick","expand-on-row-click","expanded-row","editable-row-keys","editable-cell-state","filter-value","multipleSort","expandIcon","expand-icon","reserveSelectedRowOnPaginate","expandedRowKeys","expandedRow","reserve-selected-row-on-paginate","reserveSelectedRowOnPaginate","selected-row-keys","selectedRowKeys","selectOnRowClick","column-controller","columnController","dragSort","drag-sort","hideSortTips","showSortColumnBgColor","filter-row","filterRow","multiple-sort","multipleSort","async-loading","onChange","onAsyncLoadingClick","onColumnChange","onColumnControllerVisibleChange","onDataChange","onDisplayColumnsChange","onDragSort","onExpandChange","onFilterChange","onSelectChange","onSortChange"],Zb=l.defineComponent({name:"TPrimaryTable",props:Oo(Oo({},Gc),q5),setup:function(e,n){var r=We(),a=l.toRefs(e),i=a.columns,o=a.columnController,s=l.ref(null),c=l.ref(!1),u=Kr(),d=u.classPrefix,f=u.tableDraggableClasses,h=u.tableBaseClass,v=u.tableSelectedClasses,p=u.tableSortClasses,g=Qe("table",e.locale),m=g.globalConfig,y=B5(e),b=y.sizeClassNames,w=l.computed(function(){var $t;return($t=e.size)!==null&&$t!==void 0?$t:m.value.size}),x=J0e(e,n),C=x.tDisplayColumns,S=x.renderColumnController,_=Q0e(e,n),O=_.showExpandedRow,N=_.showExpandIconColumn,B=_.getExpandColumn,T=_.renderExpandedRow,k=_.onInnerExpandRowClick,E=_.getExpandedRowClass,I=rye(e,n),A=I.renderSortIcon,M=V0e(e,v),$=M.selectColumn,U=M.showRowSelect,F=M.selectedRowClassNames,j=M.currentPaginateData,W=M.formatToRowSelectColumn,H=M.setTSelectedRowKeys,J=M.onInnerSelectRowClick,Y=M.handleRowSelectWithAreaSelection,D=oye(e,n),q=D.hasEmptyCondition,z=D.isTableOverflowHidden,K=D.renderFilterIcon,P=D.renderFirstFilterRow,R=D.setFilterPrimaryTableRef,X=l.computed(function(){return{showElement:c.value}}),ee=Nye(e,n,X),re=ee.isRowHandlerDraggable,ae=ee.isRowDraggable,oe=ee.isColDraggable,ce=ee.innerPagination,ge=ee.setDragSortPrimaryTableRef,pe=ee.setDragSortColumns,_e=k5(e),be=_e.renderTitleWidthIcon,Se=Dye(e),Ne=Se.renderAsyncLoading,Ae=Mye(e),Pe=Ae.errorListMap,Me=Ae.editableKeysMap,me=Ae.validateRowData,ie=Ae.validateTableData,ye=Ae.onRuleChange,Ce=Ae.clearValidateData,Ge=Ae.onUpdateEditedCell,Le=Ae.getEditRowData,De=Ae.onPrimaryTableCellEditChange,Ue=l.computed(function(){return!!(O.value||U.value)}),ze=l.computed(function(){return!!(O.value||U.value)}),Ve=l.computed(function(){var $t;return V(V(V(V(V(V(V(V({},f.colDraggable,oe.value),f.rowHandlerDraggable,re.value),f.rowDraggable,ae.value),h.overflowVisible,z.value===!1),h.tableRowEdit,e.editableRowKeys),"".concat(d,"-table--select-").concat(($t=$.value)===null||$t===void 0?void 0:$t.type),$.value),"".concat(d,"-table--row-select"),U.value),"".concat(d,"-table--row-expandable"),O.value)}),et=l.computed(function(){var $t=[e.rowClassName,F.value,E];return $t.filter(function(Ot){return Ot})}),vt=l.computed(function(){var $t=[e.rowAttributes];return(re.value||ae.value)&&$t.push(function(Ot){var an=Ot.row;return{"data-id":je(an,e.rowKey||"id")}}),$t.filter(function(Ot){return Ot})});l.onMounted(function(){R(s.value),ge(s.value)}),n.expose({validateRowData:me,validateTableData:ie,clearValidateData:Ce,refreshTable:function(){s.value.refreshTable()},scrollToElement:function(Ot){s.value.scrollToElement(Ot)},scrollColumnIntoView:function(Ot){s.value.scrollColumnIntoView(Ot)},baseTableRef:s});var _t=function(Ot){var an;(an=e.onRowEdit)===null||an===void 0||an.call(e,Ot);var Cn=je(Ot.editedRow,e.rowKey||"id");Ge(Cn,Ot.row,V({},Ot.col.colKey,Ot.value))},Yn=function(Ot){for(var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Cn=[],Mr=function(){var Go,Yo,Ga,ar,ka,tt=Oo({},Ot[hr]),to=((Go=tt.children)===null||Go===void 0?void 0:Go.length)||((Yo=C.value)===null||Yo===void 0?void 0:Yo.includes(tt.colKey));if(!to&&(e.columnController||e.displayColumns||e.defaultDisplayColumns)&&!an)return 1;tt=W(tt);var Ya=e.sort;if(tt.sorter&&e.showSortColumnBgColor){var bi=Ya instanceof Array?Ya:[Ya],Xo=bi.find(function(Bt){return Bt&&Bt.sortBy===tt.colKey&&Bt.descending!==void 0});Xo&&(tt.className=tt.className instanceof Array?tt.className.concat(p.sortColumn):[tt.className,p.sortColumn])}if(tt.sorter||tt.filter){var ir=xp(n.slots,tt,hr),Kt=tt,ld=Kt.ellipsisTitle;tt.title=function(Bt,Rt){var Yt,En=tt.sorter?A(Rt):null,Lr=tt.filter?K(Rt):null,ia=(Yt=s.value)===null||Yt===void 0?void 0:Yt.tableContentRef;return be([ir,En,Lr],Rt.col,Rt.colIndex,ld,ia,{classPrefix:d,ellipsisOverlayClassName:w.value!=="medium"?b[w.value]:""})},tt.ellipsisTitle=!1}if((Ga=tt.edit)!==null&&Ga!==void 0&&Ga.component){var Al=tt.cell;tt.cell=function(Bt,Rt){var Yt=Oo(Oo({},Rt),{},{row:Le(Rt),oldCell:Al,rowKey:e.rowKey||"id",tableBaseClass:h,cellEmptyContent:e.cellEmptyContent,onChange:_t,onValidate:e.onRowValidate,onRuleChange:ye,onEditableChange:De});if(e.editableRowKeys){var En,Lr=je(Rt.row,e.rowKey||"id");Yt.editable=Me.value[Lr]||!1;var ia=[Lr,Rt.col.colKey].join("__"),no=(En=Pe.value)===null||En===void 0?void 0:En[ia];no&&(Yt.errors=no)}return e.editableCellState&&(Yt.readonly=!e.editableCellState(Rt)),l.createVNode(Rye,l.mergeProps(Yt,{onUpdateEditedCell:Ge}),n.slots)}}if((ar=tt.children)!==null&&ar!==void 0&&ar.length){var Hs;tt.children=Yn(tt.children,an||((Hs=C.value)===null||Hs===void 0?void 0:Hs.includes(tt.colKey)))}(!tt.children||(ka=tt.children)!==null&&ka!==void 0&&ka.length)&&Cn.push(tt)},hr=0,eo=Ot.length;hr<eo;hr++)Mr();return Cn},Rr=l.computed(function(){var $t=Yn(i.value);return N.value&&$t.unshift(B()),$t}),_r=function(Ot,an){var Cn,Mr;ce.value=Oo(Oo({},ce.value),Ot),j.value=an,(Cn=e.onPageChange)===null||Cn===void 0||Cn.call(e,Ot,an);var hr=[{pagination:Ot},{trigger:"pagination",currentData:an}];(Mr=e.onChange)===null||Mr===void 0||Mr.call.apply(Mr,[e].concat(hr)),e.reserveSelectedRowOnPaginate||H([],{selectedRowData:[],type:"uncheck",currentRowKey:"CLEAR_ON_PAGINATE"})},Ko=function(Ot){var an;(an=e.onActiveRowAction)===null||an===void 0||an.call(e,Ot),Y(Ot)},qo=function(Ot){e.expandOnRowClick&&k(Ot),e.selectOnRowClick&&J(Ot)},Ka,qa=250,Ta=function(Ot){if(!e.onRowDblclick){qo(Ot);return}Ka?(clearTimeout(Ka),Ka=void 0):Ka=setTimeout(function(){qo(Ot),Ka=void 0},qa)},Il=function(Ot){c.value=Ot};return function(){var $t,Ot,an=function(to,Ya,bi,Xo){if(!bi)return e[to];var ir=Ya(l.h),Kt=r(to);return ir&&!Kt?function(){return ir}:Kt&&!ir?function(){return Kt}:ir&&Kt?function(){return Xo!=null&&Xo.reverse?l.createVNode("div",null,[ir,Kt]):l.createVNode("div",null,[Kt,ir])}:null},Cn=!!(o.value&&Object.keys(o.value).length),Mr=Cn?o.value.placement||"top-right":"",hr=Cn&&(Mr==null?void 0:Mr.indexOf("bottom"))!==-1,eo=an("topContent",S,Cn&&!hr),Xn=an("bottomContent",S,hr,{reverse:!0}),Go=an("firstFullRow",P,!q.value),Yo=an("lastFullRow",Ne,!!e.asyncLoading),Ga=l.getCurrentInstance(),ar=Ga.vnode,ka=Oo(Oo({},Sr(ar.props,Lye)),{},{rowKey:e.rowKey,rowClassName:et.value,rowAttributes:vt.value,columns:Rr.value,keyboardRowHover:($t=e.keyboardRowHover)!==null&&$t!==void 0?$t:Ue.value,disableSpaceInactiveRow:(Ot=e.disableSpaceInactiveRow)!==null&&Ot!==void 0?Ot:ze.value,topContent:eo,bottomContent:Xn,firstFullRow:Go,lastFullRow:Yo,thDraggable:["col","row-handler-col"].includes(e.dragSort),onShowElementChange:Il,onPageChange:_r,renderExpandedRow:O.value?T:void 0,onActiveRowAction:Ko});return(e.expandOnRowClick||e.selectOnRowClick)&&(ka.onRowClick=Ta),l.createVNode(K5,l.mergeProps(ka,{ref:s,class:Ve.value,onLeafColumnsChange:pe}),n.slots)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Fye={beforeDragSort:{type:Function},expandedTreeNodes:{type:Array,default:void 0},defaultExpandedTreeNodes:{type:Array,default:function(){return[]}},tree:{type:Object},treeExpandAndFoldIcon:{type:Function},onAbnormalDragSort:Function,onExpandedTreeNodesChange:Function,onTreeExpandChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Kp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var MD={code:1001,reason:"The same level of rows can not be swapped."};function Eo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=je(t,e);return n||r?"".concat(a,"_").concat(n||0,"_").concat(r||0,"}"):a}var Bye=function(){function t(){ho(this,t),V(this,"treeDataMap",new Map),V(this,"expandAllRowIndex",void 0),this.treeDataMap=new Map}return vo(t,[{key:"initialTreeStore",value:function(n,r,a){var i;(i=this.treeDataMap)===null||i===void 0||i.clear(),this.initialTreeDataMap(this.treeDataMap,n,r.find(function(o){return o.colKey==="row-select"}),a)}},{key:"getAllUniqueKeys",value:function(n,r){for(var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=0,o=n.length;i<o;i++){var s=n[i];a.push(Eo(s,r.rowKey));var c=je(s,r.childrenKey);c!=null&&c.length&&this.getAllUniqueKeys(c,r,a)}return a}},{key:"getExpandedChildrenKeys",value:function(n,r){for(var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=0,o=n.length;i<o;i++){var s=n[i],c=Eo(s,r.rowKey),u=this.treeDataMap.get(c);u.expanded&&a.push(c);var d=je(s,r.childrenKey);d!=null&&d.length&&this.getExpandedChildrenKeys(d,r,a)}return a}},{key:"expandTreeNode",value:function(n,r,a){var i=this;return n.length&&n.forEach(function(o){var s=i.treeDataMap.get(o);s&&i.toggleExpandData({row:s.row,rowIndex:s.rowIndex},r,a,"expand")}),r}},{key:"foldTreeNode",value:function(n,r,a){var i=this;return n.length&&n.forEach(function(o){var s=i.treeDataMap.get(o);s&&i.toggleExpandData({row:s.row,rowIndex:s.rowIndex},r,a,"fold")}),r}},{key:"toggleExpandData",value:function(n,r,a,i){var o;if(!n)return st.error("EnhancedTable","the node toggleExpanded doest not exist in `data`"),r;var s=je(n.row,a.rowKey);if(Bn(s))return st.error("EnhancedTable","`rowKey` could be wrong, can not get rowValue from `data` by `rowKey`."),[];var c=je(n.row,a.childrenKey);if(c===!0)return r;var u=this.treeDataMap.get(s);return i==="expand"&&u.expanded||i==="fold"&&!u.expanded?r:(u.rowIndex=(o=u.rowIndex)!==null&&o!==void 0?o:n.rowIndex,u.expanded=!u.expanded,this.treeDataMap.set(s,u),this.updateExpandRow(u,r,a))}},{key:"updateExpandRow",value:function(n,r,a){var i=n.row,o=n.rowIndex,s=n.expanded,c=this.treeDataMap,u=je(i,a.childrenKey);if(!i||!u)return r;if(s)Vb(c,n,s,a),tu(c,i,u.length,"expand",a),r.splice.apply(r,[o+1,0].concat(u));else{Vb(c,n,s,a);var d=n.expandChildrenLength||u.length;tu(c,i,-1*d,"fold",a),r.splice(o+1,d)}return ds(c,r,{rowKey:a.rowKey,minRowIndex:o+1}),r}},{key:"getData",value:function(n){return this.treeDataMap.get(n)}},{key:"updateData",value:function(n,r,a,i){var o=Eo(r,i.rowKey),s=this.treeDataMap.get(n);if(!s||s.rowIndex===-1)return FD(a,n,r,{rowKey:i.rowKey,childrenKey:i.childrenKey}),-1;if(je(r,i.childrenKey)===!0){var c=je(s.row,i.childrenKey);if(c!=null&&c.length)for(var u=0,d=c.length;u<d;u++){var f=Eo(c[u],i.rowKey),h=this.treeDataMap.get(f);h&&this.treeDataMap.delete(f)}}var v=s.rowIndex;if(s.row=r,s.id=o,s.parent){var p=je(s.parent.row,i.childrenKey),g=p.findIndex(function(m){return Eo(m,i.rowKey)===n});p[g]=r}return this.treeDataMap.set(o,s),n!==o&&this.treeDataMap.delete(n),v}},{key:"remove",value:function(n,r,a){var i=this.treeDataMap.get(n);if(i&&i.rowIndex>=0){var o=(i.expandChildrenLength||0)+1;if(r.splice(i.rowIndex,o),i.parent){var s=je(i.parent.row,a.childrenKey),c=s.findIndex(function(u){return je(u,a.rowKey)===n});s.splice(c,1),tu(this.treeDataMap,i.parent.row,-1*o,"delete",a)}this.treeDataMap.delete(n),ds(this.treeDataMap,r,{minRowIndex:i.rowIndex,rowKey:a.rowKey})}else st.warn("EnhancedTable","Can not remove this node, which is not appeared.");return r}},{key:"removeChildren",value:function(n,r,a){var i=this.treeDataMap.get(n);if(i&&i.rowIndex>=0){var o=i.expandChildrenLength||0;o&&r.splice(i.rowIndex+1,o),i.parent&&tu(this.treeDataMap,i.parent.row,-1*o,"delete",a),i.expandChildrenLength=0,i.expanded=!1,Vl(i.row,a.childrenKey,void 0),this.treeDataMap.set(n,i),o&&ds(this.treeDataMap,r,{minRowIndex:i.rowIndex+1,rowKey:a.rowKey})}else st.warn("EnhancedTable","Can not remove this node's children, which is not appeared.");return r}},{key:"appendTo",value:function(n,r,a,i){var o=this.treeDataMap.get(n);if(!this.validateDataExist(o,n))return a;for(var s=je(o.row,i.childrenKey),c=o.expanded||!(s!=null&&s.length),u=r instanceof Array?r:[r],d=[],f=-1,h=0,v=u.length;h<v;h++){var p=u[h],g=Eo(p,i.rowKey),m=this.treeDataMap.get(g);if(!this.validateDataDoubleExist(m,g))st.warn("Table","Duplicated Data `".concat(g,"` has been removed."));else{var y=c?o.rowIndex+(o.expandChildrenLength||0)+(h+1):-1;h===0&&(f=y);var b={id:g,row:p,rowIndex:y,level:o.level+1,expanded:!1,expandChildrenLength:0,disabled:!1,path:Ee(o.path),parent:o};b.path=b.path.concat(b),d.push(p),this.treeDataMap.set(g,b)}}if(!d.length)return a;if(s!=null&&s.length?o.row[i.childrenKey]=o.row[i.childrenKey].concat(d):(o.row[i.childrenKey]=d,o.expanded=!0),c){a.splice.apply(a,[f,0].concat(d));var w=d.length||1;tu(this.treeDataMap,o.row,w,"insert",{rowKey:i.rowKey,childrenKey:i.childrenKey}),ds(this.treeDataMap,a,{minRowIndex:f+d.length-1,rowKey:i.rowKey,count:1})}return a}},{key:"appendToRoot",value:function(n,r,a){for(var i=r.concat(n),o=n instanceof Array?n:[n],s=r.length,c=0,u=o.length;c<u;c++){var d=je(o[c],a.rowKey);if(!d){st.error("Table","`rowKey` could be wrong, can not get rowValue from `data` by `rowKey`.");continue}var f={id:d,row:o[c],rowIndex:s+c,level:0,expanded:!1,expandChildrenLength:0,disabled:!1};f.path=[f],this.treeDataMap.set(d,f)}return i}},{key:"insertAfter",value:function(n,r,a,i){return this.insert(n,r,a,i,"after")}},{key:"insertBefore",value:function(n,r,a,i){return this.insert(n,r,a,i,"before")}},{key:"insert",value:function(n,r,a,i,o){var s=this.treeDataMap.get(n);if(!this.validateDataExist(s,n))return a;var c=je(r,i.rowKey),u=this.treeDataMap.get(c);if(!this.validateDataDoubleExist(u,c))return a;var d=o==="after"?s.rowIndex+1:s.rowIndex,f={id:c,row:r,rowIndex:d,level:s.level,expanded:!1,expandChildrenLength:0,disabled:!1,path:s.path.slice(0,-1),parent:s.parent};f.path=f.path.concat(f);var h=o==="after"?s.rowIndex+(s.expandChildrenLength+1):s.rowIndex;a.splice(h,0,r);var v=o==="after"?1:0;if(s.parent){var p=s.parent.row[i.childrenKey].findIndex(function(g){return n===je(g,i.rowKey)});s.parent.row[i.childrenKey].splice(p+v,0,r),tu(this.treeDataMap,s.parent.row,1,"insert",i)}return this.treeDataMap.set(c,f),ds(this.treeDataMap,a,{rowKey:i.rowKey,minRowIndex:s.rowIndex+1}),a}},{key:"swapData",value:function(n,r,a){var i=r.currentIndex,o=r.targetIndex;if(i===o)return{dataSource:n,result:!0};var s=je(r.current,a.rowKey),c=je(r.target,a.rowKey),u=this.treeDataMap.get(s),d=this.treeDataMap.get(c);if(u.level!==d.level)return{dataSource:n,result:!1,code:MD.code,reason:MD.reason};var f=i+u.expandChildrenLength+1,h=o+d.expandChildrenLength+1,v=n.slice(i,f),p=n.slice(o,h);if(i>o){var g=n.slice(h,i),m=v.concat(p,g);n.splice(o,m.length),n.splice.apply(n,[o,0].concat(Ee(m))),ds(this.treeDataMap,n,{rowKey:a.rowKey,minRowIndex:o,maxRowIndex:f})}else{var y=n.slice(f,o),b=y.concat(p,v);n.splice(i,b.length),n.splice.apply(n,[i,0].concat(Ee(b))),ds(this.treeDataMap,n,{rowKey:a.rowKey,minRowIndex:i,maxRowIndex:h})}if(u.parent){for(var w=u.parent.row[a.childrenKey],x=0,C=-1,S=-1,_=0,O=w.length;_<O&&(je(w[_],a.rowKey)===s&&(S=_,x+=1),je(w[_],a.rowKey)===c&&(C=_,x+=1),!(x>=2));_++);S<C?(w.splice(C+1,0,r.current),w.splice(S,1)):(w.splice(S,1),w.splice(C,0,r.current))}return{dataSource:n,result:!0}}},{key:"expandAll",value:function(n,r){var a=this;this.expandAllRowIndex=0;var i=[],o=function(c,u){for(var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,f=0,h=c.length;f<h;f++){var v=c[f],p=je(v,u.rowKey),g=a.treeDataMap.get(p),m=je(v,u.childrenKey);if(g.rowIndex=a.expandAllRowIndex,m!==!0&&m!==null&&m!==void 0&&m.length&&(g.expanded=!0),g.expandChildrenLength=(m==null?void 0:m.length)||0,a.expandAllRowIndex+=1,i.push(v),a.treeDataMap.set(p,g),m!=null&&m.length){for(var y=d;(b=y)!==null&&b!==void 0&&b.row;){var b;y.expandChildrenLength+=m.length,a.treeDataMap.set(y.id,y),y=y.parent}o(m,u,g)}}};return o(n,r),i}},{key:"foldAll",value:function(n,r){for(var a=[],i=0,o=0,s=n.length;o<s;o++){var c=n[o],u=je(c,r.rowKey),d=this.treeDataMap.get(u);d.rowIndex=d.level===0?i:-1,d.expanded=!1,d.expandChildrenLength=0,d.level===0&&(a.push(c),i+=1);var f=je(c,r.childrenKey);f!=null&&f.length&&this.foldAll(f,r)}return a}},{key:"getTreeNode",value:function(n,r){for(var a=[],i=0,o=n.length;i<o;i++){var s=n[i],c=je(s,r.rowKey),u=this.treeDataMap.get(c);u.level===0&&a.push(s)}return a}},{key:"getTreeExpandedRow",value:function(n,r){var a=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"data",o=[];return n.forEach(function(s){var c=je(s,r.rowKey),u=a.treeDataMap.get(c);u.expanded&&(i==="unique"?o.push(c):i==="data"?o.push(s):o.push(u))}),o}},{key:"initialTreeDataMap",value:function(n,r,a,i){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,c=0,u=r.length;c<u;c++){var d=r[c],f=Eo(d,i.rowKey);if(Bn(f)){st.error("EnhancedTable","`rowKey` could be wrong, can not get rowValue from `data` by `rowKey`.");return}var h=je(d,i.childrenKey),v={id:f,row:d,rowIndex:o===0?c:-1,level:o,expanded:!1,expandChildrenLength:0,disabled:Rb(a,d,c),parent:s};v.path=s?s.path.concat(v):[v],n.set(f,v),h!=null&&h.length&&this.initialTreeDataMap(n,h,a,i,o+1,v)}}},{key:"updateDisabledState",value:function(n,r,a){for(var i=0,o=n.length;i<o;i++){var s=n[i],c=je(s,a.rowKey);if(Bn(c)){st.error("EnhancedTable","`rowKey` could be wrong, can not get rowValue from `data` by `rowKey`.");return}var u=this.treeDataMap.get(c);u.disabled=Rb(r,s,i),this.treeDataMap.set(c,u);var d=je(s,a.childrenKey);d!=null&&d.length&&this.updateDisabledState(d,r,a)}}},{key:"validateDataExist",value:function(n,r){return n?!0:(st.warn("EnhancedTable","".concat(r," does not exist.")),!1)}},{key:"validateDataDoubleExist",value:function(n,r){return n?(st.warn("EnhancedTable","Duplicated Key. ".concat(r," already exists.")),!1):!0}}])}();function tu(t,e,n,r,a){for(var i=e;i;){var o,s=t.get(je(i,a.rowKey)),c=(s.expandChildrenLength||0)+n;s.expandChildrenLength=Math.max(0,c),i=s==null||(o=s.parent)===null||o===void 0?void 0:o.row}r==="fold"&&LD(t,e,a)}function LD(t,e,n){var r=je(e,n.childrenKey);r!=null&&r.length&&r.forEach(function(a){var i=t.get(je(a,n.rowKey));i&&(i.expandChildrenLength=0,LD(t,i.row,n))})}function Vb(t,e,n,r){var a=e.row,i=e.rowIndex,o=je(a,r.childrenKey);o.forEach(function(s,c){var u=je(s,r.rowKey),d=n?i+1+c:-1,f=t.get(u),h=Kp(Kp({},f),{},{row:s,rowIndex:d,expanded:!1,parent:e});if(t.set(u,h),!n){var v=je(s,r.childrenKey);v!=null&&v.length&&Vb(t,Kp(Kp({},h),{},{rowIndex:-1,expanded:!1}),n,r)}})}function FD(t,e,n,r){for(var a=0,i=t.length;a<i;a++){var o=t[a];if(je(o,r.rowKey)===e){t[a]=n;return}var s=je(o,r.childrenKey)||[];s!=null&&s.length&&FD(s,e,n,r)}}function ds(t,e,n){for(var r=n.minRowIndex||0,a=n.maxRowIndex||e.length,i=r;i<a;i++){var o=e[i],s=t.get(je(o,n.rowKey));s||st.warn("Table","tree map went wrong"),s.rowIndex=i+((n==null?void 0:n.count)||1)-1}}function jye(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=[],a=new Map,i=new Map,o=0,s=t.length;o<s;o++)a.set(t[o],!0);for(var c=0,u=e.length;c<u;c++)i.set(e[c],!0);for(var d=0,f=t.length;d<f;d++)i.get(t[d])||r.push(t[d]);for(var h=0,v=e.length;h<v;h++)a.get(e[h])||n.push(e[h]);return{removedList:n,addedList:r}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ye(t,e){var n=e.store,r=e.dataSource,a=e.rowDataKeys,i=l.toRefs(t),o=i.data,s=i.expandedTreeNodes,c=i.tree,u=l.ref(!1),d=l.ref(!1),f=gn(s,t.defaultExpandedTreeNodes,t.onExpandedTreeNodesChange,"expandedTreeNodes"),h=$e(f,2),v=h[0],p=h[1],g=l.ref({type:"props-change"});function m(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"expand-all",S=arguments.length>1?arguments[1]:void 0,_=S||o.value;r.value=n.value.expandAll(_,a.value);var O=r.value.map(function(N){return Eo(N,a.value.rowKey)});p(O,{row:void 0,rowState:void 0,rowIndex:void 0,type:"expand",trigger:C}),g.value.type="expand-all"}function y(){r.value=Ee(n.value.foldAll(r.value,a.value)),p([],{row:void 0,rowState:void 0,rowIndex:void 0,type:"fold",trigger:"fold-all"})}function b(C,S){var _,O=C.row,N=C.rowIndex;g.value=e1({type:"user-reaction-change"},C);var B=Eo(O,a.value.rowKey),T=n.value.treeDataMap.get(B),k=Ee(v.value);if(T.expanded){for(var E=n.value.getExpandedChildrenKeys([O],a.value),I=0,A=k.length;I<A;I++){var M=k[I];E.includes(M)&&(k[I]=void 0)}k=k.filter(Boolean)}else k.push(B);var $={row:O,rowIndex:N,rowState:T,trigger:S};p(k,e1(e1({},$),{},{type:T.expanded?"fold":"expand"})),(_=t.onTreeExpandChange)===null||_===void 0||_.call(t,$)}function w(C,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],O=jye(S,_),N=O.addedList,B=O.removedList;return n.value.expandTreeNode(N,C,a.value),n.value.foldTreeNode(B,C,a.value),Ee(C)}l.watch([v,o],function(C,S){var _=$e(C,1),O=_[0],N=$e(S,1),B=N[0];if(!(!n.value.treeDataMap.size||!o.value.length)){if(g.value.type==="user-reaction-change"){var T=g.value||{},k=T.row,E=T.rowIndex;r.value=Ee(n.value.toggleExpandData({row:k,rowIndex:E},Ee(r.value),a.value))}else g.value.type==="props-change"&&w(r.value,O,B);g.value.type="props-change"}});var x=function(S){var _,O;(_=c.value)!==null&&_!==void 0&&_.defaultExpandAll&&!u.value?(m("default-expand-all",Ee(S)),u.value=!0):(O=v.value)!==null&&O!==void 0&&O.length&&l.nextTick(function(){r.value=w(Ee(S),v.value,[])})};return{tExpandedTreeNode:v,isDefaultExpandAllExecute:u,isDefaultExpandedTreeNodesExecute:d,expandAll:m,foldAll:y,onExpandFoldIconClick:b,updateExpandOnDataChange:x}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uye(t,e){var n=l.toRefs(t),r=n.data,a=n.columns,i=Qe("table",t.locale),o=i.t,s=i.globalConfig,c=St({AddRectangleIcon:dV,MinusRectangleIcon:gee}),u=c.AddRectangleIcon,d=c.MinusRectangleIcon,f=l.ref(new Bye),h=l.shallowRef(),v=l.ref([]),p=Kr(),g=p.tableTreeClasses,m=Qa(),y=l.computed(function(){var K;return{rowKey:t.rowKey||"id",childrenKey:((K=t.tree)===null||K===void 0?void 0:K.childrenKey)||"children"}}),b=$ye(t,{store:f,dataSource:v,rowDataKeys:y}),w=b.tExpandedTreeNode,x=b.isDefaultExpandAllExecute,C=b.isDefaultExpandedTreeNodesExecute,S=b.expandAll,_=b.foldAll,O=b.updateExpandOnDataChange,N=b.onExpandFoldIconClick,B=l.computed(function(){return a.value.find(function(K){return K.colKey==="row-select"})});l.watch(B,function(K){f.value&&f.value.updateDisabledState(v.value,K,y.value)});var T=function(P){var R=La(La({},P),{},{type:"fold"}),X=o(s.value.treeExpandAndFoldIcon,l.h,R)||l.createVNode(d,null,null);return m("treeExpandAndFoldIcon",{defaultNode:X,params:R})},k=function(P){var R=La(La({},P),{},{type:"expand"}),X=o(s.value.treeExpandAndFoldIcon,l.h,R)||l.createVNode(u,null,null);return m("treeExpandAndFoldIcon",{defaultNode:X,params:R})};l.watch([r],function(){t.tree?E(r.value):v.value=r.value},{immediate:!0}),l.onUnmounted(function(){var K;t.tree&&((K=f.value.treeDataMap)===null||K===void 0||K.clear(),f.value=null)}),l.watch(function(){var K;return[a,(K=t.tree)===null||K===void 0?void 0:K.treeNodeColumnIndex]},function(){h.value=M()},{immediate:!0});function E(K){var P,R=t.columns,X=t.expandedTreeNodes,ee=t.defaultExpandedTreeNodes,re=t.tree;f.value.initialTreeStore(K,R,y.value);var ae=!!(!C.value&&(ee!=null&&ee.length)),oe=!!(re!=null&&re.defaultExpandAll&&!x.value);(P=w.value)!==null&&P!==void 0&&P.length&&(X||ae)||oe?(O(K),C.value=!0):v.value=Ee(K)}function I(K){var P,R;if(K!==void 0){var X=((P=t.tree)===null||P===void 0?void 0:P.indent)===void 0?24:(R=t.tree)===null||R===void 0?void 0:R.indent;return X?{paddingLeft:"".concat(K*X||1,"px")}:{}}}function A(K,P){var R,X,ee=La({},K);K.row.VIRTUAL_SCROLL_INDEX!==void 0&&(ee.rowIndex=K.row.VIRTUAL_SCROLL_INDEX),v.value=Ee(f.value.toggleExpandData(ee,v.value,y.value));var re=je(K.row,y.value.rowKey),ae=(R=f.value)===null||R===void 0||(R=R.treeDataMap)===null||R===void 0?void 0:R.get(re);(X=t.onTreeExpandChange)===null||X===void 0||X.call(t,{row:K.row,rowIndex:K.rowIndex,rowState:ae,trigger:P})}function M(){for(var K,P=t.columns,R=((K=t.tree)===null||K===void 0?void 0:K.treeNodeColumnIndex)||0;(X=P[R])!==null&&X!==void 0&&X.type||((ee=P[R])===null||ee===void 0?void 0:ee.colKey)==="__EXPAND_ROW_ICON_COLUMN__";){var X,ee;R+=1}return P[R]}function $(K){if(!t.tree||K.colKey!==h.value.colKey)return K;var P=La({},h.value);return P.cell=function(R,X){var ee=_p(La(La({},X),{},{col:La({},h.value)}),e.slots,{cellEmptyContent:t.cellEmptyContent}),re=f.value.treeDataMap.get(je(X.row,y.value.rowKey)),ae=I(re==null?void 0:re.level),oe=V({},g.inlineCol,!!K.ellipsis),ce=je(X.row,y.value.childrenKey);if(ce&&ce instanceof Array||ce===!0){var ge,pe=(ge=f.value.treeDataMap.get(je(X.row,y.value.rowKey)))!==null&&ge!==void 0&&ge.expanded?T(X):k(X);return l.createVNode("div",{class:[g.col,oe],style:ae},[!!(ce.length||ce===!0)&&l.createVNode("span",{class:g.icon,onClick:function(be){N(X,"expand-fold-icon"),be.stopPropagation()}},[pe]),ee])}return l.createVNode("div",{style:ae,class:[oe,g.leafNode]},[l.createVNode("span",{class:g.icon},null),ee])},P.ellipsis===!0&&(P.ellipsis=function(R,X){return _p(La(La({},X),{},{col:La({},h.value)}),e.slots)}),P}function U(K,P){var R=f.value.updateData(K,P,v.value,y.value),X=Ee(v.value);X[R]=P,v.value=X}function F(K){return f.value.getData(K)}function j(K){v.value=Ee(f.value.remove(K,v.value,y.value))}function W(K){v.value=Ee(f.value.removeChildren(K,v.value,y.value))}function H(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",P=arguments.length>1?arguments[1]:void 0;if(!K){v.value=f.value.appendToRoot(P,v.value,y.value);return}v.value=Ee(f.value.appendTo(K,P,v.value,y.value))}function J(K,P){v.value=Ee(f.value.insertAfter(K,P,v.value,y.value))}function Y(K,P){v.value=Ee(f.value.insertBefore(K,P,v.value,y.value))}function D(K){var P=f.value.swapData(v.value,K,y.value);if(P.result)v.value=Ee(P.dataSource);else{var R,X={code:P.code,reason:P.reason};(R=t.onAbnormalDragSort)===null||R===void 0||R.call(t,X)}}function q(){return f.value.getTreeNode(v.value,y.value)}function z(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data";return f.value.getTreeExpandedRow(v.value,y.value,K)}return{store:f,rowDataKeys:y,dataSource:v,swapData:D,setData:U,getData:F,remove:j,removeChildren:W,appendTo:H,insertAfter:J,insertBefore:Y,formatTreeColumn:$,toggleExpandData:A,expandAll:S,foldAll:_,getTreeNode:q,resetData:E,getTreeExpandedRow:z,onExpandFoldIconClick:N}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function $D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var t1=new Map;function hf(t,e,n,r){if(t1.get(e))return t1.get(e);var a=r||{allChildren:[],allChildrenKeys:[],leafNodeKeys:[]},i=je(e,n.childrenKey);if(!i||!i.length)return a;var o=i.filter(function(y){var b;return!((b=t.get(je(y,n.rowKey)))!==null&&b!==void 0&&b.disabled)});a.allChildren=Ee(new Set(a.allChildren.concat(o)));for(var s=0,c=i.length;s<c;s++){var u=i[s],d=je(u,n.childrenKey);if(d!=null&&d.length){var f=hf(t,u,n,a);a.allChildren=Ee(new Set(a.allChildren.concat(f.allChildren)))}}for(var h=0,v=a.allChildren.length;h<v;h++){var p=a.allChildren[h],g=je(p,n.childrenKey),m=je(p,n.rowKey);a.allChildrenKeys.push(m),(!g||!g.length)&&a.leafNodeKeys.push(m)}return a.allChildrenKeys=Ee(new Set(a.allChildrenKeys)),a.leafNodeKeys=Ee(new Set(a.leafNodeKeys)),a}function zye(t,e){for(var n=t.selectedRowKeys,r=t.removeKeys,a={data:[],keys:[]},i=0,o=n.length;i<o;i++){var s=n[i];r.includes(s)||a.keys.push(s)}return a}function Hye(t){for(var e=t.treeDataMap,n=t.selectedRowKeys,r=[],a=0,i=n.length;a<i;a++){var o=n[a];r.push(e.get(o))}return r}function Wye(t,e){var n=l.toRefs(t),r=n.selectedRowKeys,a=n.tree,i=n.data,o=n.indeterminateSelectedRowKeys,s=l.ref([]),c=gn(r,t.defaultSelectedRowKeys||[],t.onSelectChange,"selectedRowKeys"),u=$e(c,2),d=u[0],f=u[1],h=l.computed(function(){var b;return{rowKey:t.rowKey||"id",childrenKey:((b=t.tree)===null||b===void 0?void 0:b.childrenKey)||"children"}});l.watch([a,e,i,d],function(b){var w=$e(b,2),x=w[0],C=w[1];!x||!C.size||x.checkStrictly||v()});function v(){if(!(!a.value||a.value.checkStrictly)){if(!d.value.length){s.value=[];return}for(var b=[],w={},x=0,C=d.value.length;x<C;x++){var S=d.value[x],_=e.value.get(S);if(_){var O=je(_.row,h.value.childrenKey);if(!O||!O.length)for(var N=_.parent;N;){w[N.id]||(w[N.id]=[]),w[N.id].push(_.row);var B=w[N.id].length,T=hf(e.value,N.row,h.value),k=T.allChildrenKeys,E=b.indexOf(N.id),I=d.value.indexOf(N.id);B>0&&B<k.length&&I===-1?E===-1&&b.push(N.id):E!==-1&&b.splice(E,1),N=N.parent}}}s.value=b}}function p(b,w,x){if(!(!a.value||a.value.checkStrictly)){for(var C=Ee(b),S=e.value.get(w),_=S.parent;_;){var O=hf(e.value,_.row,h.value),N=O.leafNodeKeys,B=Yl(N,b),T=C.indexOf(_.id);x==="uncheck"?T!==-1&&C.splice(T,1):B.length===N.length&&T===-1&&C.push(_.id),_=_.parent}return C}}function g(b,w){if(!a.value||a.value.checkStrictly){f(b,w);return}w.currentRowKey==="CHECK_ALL_BOX"?m(w):y(b,w)}function m(b){var w=[],x=[];if(b.type==="check")for(var C=Ee(e.value.values()),S=0,_=C.length;S<_;S++){var O=C[S];O.disabled||(x.push(O.row),w.push(je(O.row,h.value.rowKey)))}var N=qp(qp({},b),{},{selectedRowData:x||[]});f(w,N)}function y(b,w){var x,C=Ee(b);if(((x=t.tree)===null||x===void 0?void 0:x.checkStrictly)===!1){if((w==null?void 0:w.type)==="check"){var S=hf(e.value,w.currentRowData,h.value),_=S.allChildrenKeys;t1.set(w.currentRowData,S),C=Ee(new Set(C.concat(_)))}else if((w==null?void 0:w.type)==="uncheck"){var O=hf(e.value,w.currentRowData,h.value),N=zye({selectedRowKeys:b,removeKeys:O.allChildrenKeys});C=N.keys}}C=p(C,w.currentRowKey,w.type);var B=Hye({treeDataMap:e.value,selectedRowKeys:C}),T=qp(qp({},w),{},{selectedRowData:B});f(C,T)}return{tIndeterminateSelectedRowKeys:o.value?o:s,onInnerSelectChange:g}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kye=["store","dataSource","formatTreeColumn","swapData","onExpandFoldIconClick"];function UD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qye=l.defineComponent({name:"TEnhancedTable",props:Fi(Fi(Fi({},Gc),q5),Fye),setup:function(e,n){var r=l.ref(null),a=Uye(e,n),i=a.store,o=a.dataSource,s=a.formatTreeColumn,c=a.swapData,u=a.onExpandFoldIconClick,d=Vo(a,Kye),f=ve(),h=l.ref(i.value.treeDataMap),v=Wye(e,h),p=v.tIndeterminateSelectedRowKeys,g=v.onInnerSelectChange,m=function(_){for(var O=[],N=0,B=_.length;N<B;N++){var T,k,E=Fi({},_[N]);E=s(E),(T=E.children)!==null&&T!==void 0&&T.length&&(E.children=m(E.children)),(!E.children||(k=E.children)!==null&&k!==void 0&&k.length)&&O.push(E)}return O},y=l.computed(function(){var S=!e.tree||!Object.keys(e.tree).length;return S?e.columns:m(e.columns)}),b=function(_){var O;e.beforeDragSort&&!e.beforeDragSort(_)||(c({current:_.current,target:_.target,currentIndex:_.currentIndex,targetIndex:_.targetIndex}),(O=e.onDragSort)===null||O===void 0||O.call(e,_))},w=function(_){var O,N;(O=e.tree)!==null&&O!==void 0&&O.expandTreeNodeOnClick&&u({row:_.row,rowIndex:_.index},"row-click"),(N=e.onRowClick)===null||N===void 0||N.call(e,_)},x=function(_,O){if(!_)return-1;if(_.rowIndex>=0)return _.rowIndex;if(_.rowIndex<0)return x(_.parent)},C=function(_){var O=_.index;if(!O&&O!==0){if(!_.key){st.error("Table","scrollToElement: one of `index` or `key` must exist.");return}var N=h.value.get(_.key);O=x(N,_.key),(O<0||O===void 0)&&st.error("Table","".concat(_.key," does not exist in data, check `rowKey` or `data` please."))}r.value.scrollToElement(Fi(Fi({},_),{},{index:O}))};return n.expose(Fi(Fi({store:i.value,dataSource:o.value},d),{},{primaryTableRef:r,validateRowData:function(_){return r.value.validateRowData(_)},validateTableData:function(){return r.value.validateTableData()},clearValidateData:function(){r.value.clearValidateData()},refreshTable:function(){r.value.refreshTable()},scrollToElement:C})),function(){var S,_=l.getCurrentInstance(),O=_.vnode,N=Fi(Fi({},O.props),{},{rowKey:e.rowKey||"id",data:o.value,columns:y.value,indeterminateSelectedRowKeys:p.value,disableDataPage:!!(e.tree&&Object.keys(e.tree).length)||e.disableDataPage,onSelectChange:g,onDragSort:b,rowClassName:function(T){var k=T.row,E=je(k,e.rowKey||"id"),I=h.value.get(E);return I?["".concat(f.value,"-table-tr--level-").concat(I.level),e.rowClassName]:[e.rowClassName]}});return(S=e.tree)!==null&&S!==void 0&&S.expandTreeNodeOnClick&&(N.onRowClick=w),l.createVNode(Zb,l.mergeProps(N,{ref:r}),n.slots)}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gye=Be(K5),Yye=Be(Zb),Xye=Be(qye),Jye=Br(Zb),Qye=Be(Jye,"TTable");/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zye={labelAlign:{type:String,default:"left",validator:function(e){return e?["left","right","alternate","top","bottom"].includes(e):!0}},layout:{type:String,default:"vertical",validator:function(e){return e?["horizontal","vertical"].includes(e):!0}},mode:{type:String,default:"alternate",validator:function(e){return e?["alternate","same"].includes(e):!0}},reverse:Boolean,theme:{type:String,default:"default",validator:function(e){return e?["default","dot"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Gp={vertical:["left","right"],horizontal:["top","bottom"]},zD=Symbol("timeLineProvide"),Vye=l.computed(function(){return{theme:"default",reverse:!1,itemsStatus:[],layout:"horizontal",renderAlign:"left",mode:"alternate"}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ebe={content:{type:[String,Function]},dot:{type:Function},dotColor:{type:String,default:"primary"},label:{type:[String,Function]},labelAlign:{type:String,validator:function(e){return e?["left","right","top","bottom"].includes(e):!0}},loading:Boolean,onClick:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function HD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function WD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var KD=["default","primary","success","warning","error"],qD=l.defineComponent({name:"TTimelineItem",props:WD(WD({},ebe),{},{index:{type:Number}}),setup:function(e){var n=ve("timeline-item"),r=l.inject(zD,Vye),a=Ut(),i=We(),o=function(u){var d,f=r.value,h=f.layout,v=f.renderAlign,p=(d=e.labelAlign)!==null&&d!==void 0?d:v,g=h==="horizontal"?"top":"left",m=h==="horizontal"?"bottom":"right";return p==="alternate"?u%2===0?"".concat(n.value,"-").concat(g):"".concat(n.value,"-").concat(m):p==="left"||p==="top"?"".concat(n.value,"-").concat(g):p==="right"||p==="bottom"?"".concat(n.value,"-").concat(m):""},s=function(u){var d;(d=e.onClick)===null||d===void 0||d.call(e,{e:u,item:Sr(e,["index"])})};return function(){var c=r.value,u=c.mode,d=c.theme,f=c.itemsStatus,h=c.reverse,v=e.loading,p=e.dotColor,g=e.index,m=i("label"),y=i("dot"),b="".concat(n.value,"__dot-content");if(y!=null&&y.props){var w,x=y==null||(w=y.props)===null||w===void 0?void 0:w.class;y.props.class=x?[b,x].join(" "):b}return l.createVNode("li",{class:["".concat(n.value),"".concat(o(e.index))],onClick:s},[u==="alternate"&&m&&l.createVNode("div",{class:["".concat(n.value,"__label"),"".concat(n.value,"__label--").concat(u)]},[m]),l.createVNode("div",{class:"".concat(n.value,"__wrapper")},[l.createVNode("div",{class:V(V(V({},"".concat(n.value,"__dot"),!0),"".concat(n.value,"__dot--custom"),!!y||!y&&v),"".concat(n.value,"__dot--").concat(p),KD.includes(p)),style:{borderColor:!KD.includes(p)&&p}},[!y&&v&&l.createVNode(lr,{size:"12px",class:b},null),y]),l.createVNode("div",{class:V(V(V({},"".concat(n.value,"__tail"),!0),"".concat(n.value,"__tail--theme-").concat(d),!0),"".concat(n.value,"__tail--status-").concat(f[g]),h)},null)]),l.createVNode("div",{class:"".concat(n.value,"__content")},[a("default","content"),u==="same"&&m&&l.createVNode("div",{class:["".concat(n.value,"__label"),"".concat(n.value,"__label--").concat(u)]},[m])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var tbe=l.defineComponent({name:"TTimeline",props:Zye,setup:function(e){var n=ve("timeline"),r=l.computed(function(){var o=e.labelAlign,s=e.layout,c=s==="vertical"?"left":"top";if(s==="vertical"&&o){var u=Gp.horizontal.indexOf(o),d=u!==-1;d&&st.warn("Timeline",'If layout is vertical, align should be "left","alternate" or "right" '),c=d?Gp.vertical[u]:o}if(s==="horizontal"&&o){var f=Gp.vertical.indexOf(o),h=f!==-1;h&&st.warn("Timeline",'If layout is horizontal, align should be "top","alternate" or "bottom" '),c=h?Gp.horizontal[f]:o}return c}),a=l.computed(function(){var o=e.theme,s=e.reverse,c=e.layout,u=e.labelAlign,d=e.mode;return{theme:o,reverse:s,itemsStatus:[""],layout:c,globalAlign:u,mode:d,renderAlign:r.value}}),i=1;return l.provide(zD,a),function(){var o=co(),s=o("TTimelineItem");return e.reverse&&(s=s.reverse()),l.createVNode("ul",{class:["".concat(n.value),V(V(V(V(V({},"".concat(n.value,"-").concat(r.value),!0),"".concat(n.value,"-reverse"),e.reverse),"".concat(n.value,"-").concat(e.layout),!0),"".concat(n.value,"-label"),i),"".concat(n.value,"-label--").concat(e.mode),!0)]},[s.map(function(c,u){return l.createVNode(qD,l.mergeProps(c.props,{index:u,class:V({},"".concat(n.value,"-item--last"),u===s.length-1)}),c.children)})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var nbe=Be(tbe),rbe=Be(qD);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var abe={borderless:Boolean,defaultExpandAll:Boolean,disabled:Boolean,expandIcon:{type:[Boolean,Function],default:!0},expandIconPlacement:{type:String,default:"left",validator:function(e){return e?["left","right"].includes(e):!0}},expandMutex:Boolean,expandOnRowClick:{type:Boolean,default:!0},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var ibe=l.defineComponent({name:"TCollapse",props:abe,setup:function(e){var n=ve("collapse"),r=ve("-border-less"),a=We(),i=l.toRefs(e),o=i.value,s=i.expandMutex,c=i.borderless,u=i.modelValue,d=Mt(o,u,e.defaultValue,e.onChange),f=$e(d,2),h=f[0],v=f[1],p=function(b){var w=[].concat(h.value||[]),x=w.indexOf(b);x>=0?w.splice(x,1):s.value?w=[b]:w.push(b),v(w)},g=l.computed(function(){return[n.value,V({},r.value,!!c.value)]}),m=function(){var y=0;return function(){return y++}}();return l.provide("collapseValue",h),l.provide("updateCollapseValue",p),l.provide("collapseProps",l.toRefs(e)),l.provide("getUniqId",m),l.provide("renderParentTNode",a),function(){var y=a("default");return l.createVNode("div",{class:g.value},[y])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var obe={content:{type:[String,Function]},default:{type:[String,Function]},destroyOnCollapse:Boolean,disabled:{type:Boolean,default:void 0},expandIcon:{type:[Boolean,Function],default:void 0},header:{type:[String,Function]},headerRightContent:{type:[String,Function]},value:{type:[String,Number]}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function lbe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var sbe=l.defineComponent({name:"TCollapsePanel",props:obe,setup:function(e,n){var r=n.slots,a=We(),i=Ut(),o=ve("collapse-panel"),s=ve("is-disabled"),c=ve("is-clickable"),u=ve("slide-down"),d=l.toRefs(e),f=d.value,h=d.disabled,v=d.destroyOnCollapse,p=l.inject("collapseValue"),g=l.inject("updateCollapseValue"),m=l.inject("getUniqId",function(){},!1),y=l.inject("collapseProps"),b=y.defaultExpandAll,w=y.disabled,x=y.expandIconPlacement,C=y.expandOnRowClick,S=l.inject("renderParentTNode"),_=f.value||m();b.value&&g(_);var O=eE(),N=O.beforeEnter,B=O.enter,T=O.afterEnter,k=O.beforeLeave,E=O.leave,I=O.afterLeave,A=l.ref(),M=l.computed(function(){return h.value||w.value}),$=l.computed(function(){return p.value instanceof Array?p.value.includes(_):p.value===_}),U=l.computed(function(){return[o.value,V({},s.value,M.value)]}),F=l.computed(function(){return r.expandIcon||e.expandIcon}),j=function(X){var ee=C.value||X.currentTarget===A.value;ee&&!M.value&&g(_),X.stopPropagation()},W=function(X){X.stopPropagation()},H=function(){return l.createVNode(ql,{overlayClassName:"".concat(o.value,"__icon--default")},null)},J=function(){var X=F.value===void 0?S:a;return l.createVNode("div",{ref:A,class:"".concat(o.value,"__icon ").concat(o.value,"__icon--").concat(x.value," ").concat($.value?"".concat(o.value,"__icon--active"):""),onClick:j},[X("expandIcon",H())])},Y=function(){return l.createVNode("div",{class:"".concat(o.value,"__header--blank")},null)},D=function(){var X=a("headerRightContent");return X?l.createVNode("div",{onClick:W},[X]):null},q=function(){var X=["".concat(o.value,"__header"),V({},c.value,C.value&&!M.value)];return l.createVNode("div",{class:X,onClick:j},[x.value==="left"&&J(),a("header"),Y(),D(),x.value==="right"&&J()])},z=function(){return l.withDirectives(l.createVNode("div",{class:"".concat(o.value,"__body")},[l.createVNode("div",{class:"".concat(o.value,"__content")},[i("default","content")])]),[[l.vShow,$.value]])},K=function(){return $.value?l.createVNode("div",{class:"".concat(o.value,"__body")},[l.createVNode("div",{class:"".concat(o.value,"__content")},[i("default","content")])]):null},P=function(){return v.value?K():z()};return function(){var R;return l.createVNode("div",{class:U.value},[l.createVNode("div",{class:"".concat(o.value,"__wrapper")},[q(),l.createVNode(l.Transition,{name:u.value,onBeforeEnter:N,onEnter:B,onAfterEnter:T,onBeforeLeave:k,onLeave:E,onAfterLeave:I},lbe(R=P())?R:{default:function(){return[R]}})])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var cbe=Be(ibe),ube=Be(sbe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var dbe={alpha:{type:Number,default:1},content:{type:[String,Function]},default:{type:[String,Function]},height:{type:Number},isRepeat:{type:Boolean,default:!0},lineSpace:{type:Number,default:16},movable:Boolean,moveInterval:{type:Number,default:3e3},offset:{type:Array},removable:{type:Boolean,default:!0},rotate:{type:Number,default:-22},watermarkContent:{type:[Object,Array]},width:{type:Number},x:{type:Number},y:{type:Number},zIndex:{type:Number}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function GD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hbe(t,e){var n=t.width,r=t.height,a=t.gapX,i=t.gapY,o=t.offsetLeft,s=t.offsetTop,c=t.rotate,u=t.alpha,d=t.watermarkContent,f=t.lineSpace,h=document.createElement("canvas"),v=h.getContext("2d");if(!v){console.warn("当前环境不支持Canvas, 无法绘制水印"),e("");return}var p=window.devicePixelRatio||1,g=(a+n)*p,m=(i+r)*p;h.width=g,h.height=m,h.style.width="".concat(a+n,"px"),h.style.height="".concat(i+r,"px"),v.translate(o*p,s*p),v.rotate(Math.PI/180*Number(c)),v.globalAlpha=u;var y=n*p,b=r*p;v.fillStyle="transparent",v.fillRect(0,0,y,b);var w=Array.isArray(d)?d:[fbe({},d)],x=0;w.forEach(function(C){if(C.url){var S=C.url,_=C.isGrayscale,O=_===void 0?!1:_;C.top=x,x+=r;var N=new Image;N.crossOrigin="anonymous",N.referrerPolicy="no-referrer",N.src=S,N.onload=function(){if(v.drawImage(N,0,C.top*p,n*p,r*p),O){for(var j=v.getImageData(0,0,v.canvas.width,v.canvas.height),W=j.data,H=0;H<W.length;H+=4){var J=(W[H]+W[H+1]+W[H+2])/3;W[H]=J,W[H+1]=J,W[H+2]=J}v.putImageData(j,0,0)}e(h.toDataURL())}}else if(C.text){var B=C.text,T=C.fontColor,k=T===void 0?"rgba(0, 0, 0, 0.1)":T,E=C.fontSize,I=E===void 0?16:E,A=C.fontFamily,M=A===void 0?void 0:A,$=C.fontWeight,U=$===void 0?"normal":$;C.top=x,x+=f;var F=Number(I)*p;v.font="normal normal ".concat(U," ").concat(F,"px/").concat(b,"px ").concat(M),v.textAlign="start",v.textBaseline="top",v.fillStyle=k,v.fillText(B,0,C.top*p)}}),e(h.toDataURL())}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function vbe(){var t=Math.floor(Math.random()*4),e=Math.floor(Math.random()*70)+30,n=0,r=95,a=90,i=`
  @keyframes watermark {
    0%   {left: `.concat(t===1?a:t===3?n:e,"%; top: ").concat(t===0?n:t===2?r:e,`%;}
    25% {left: `).concat(t===0?a:t===2?n:100-e,"%; top: ").concat(t===1?r:t===3?n:e,`%;}
    50% {left: `).concat(t===1?n:t===3?a:100-e,"%; top: ").concat(t===0?r:t===2?n:100-e,`%; transform: translateX(-100%);}
    75% {left: `).concat(t===0?n:t===2?a:e,"%; top: ").concat(t===1?n:t===3?r:100-e,`%;}
    100% {left: `).concat(t===1?a:t===3?n:e,"%; top: ").concat(t===0?n:t===2?r:e,`%;}
  }
  `);return i}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var pbe=function(e){var n=document.createElement("style"),r=null;document.head.appendChild(n),r=n.sheet,r.insertRule(e,r.cssRules.length)};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function gbe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=mbe(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw i}}}}function mbe(t,e){if(t){if(typeof t=="string")return YD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YD(t,e):void 0}}function YD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ybe=l.defineComponent({name:"TWatermark",props:dbe,setup:function(e){var n=l.ref(""),r=l.shallowRef(),a=l.shallowRef(),i=l.reactive(e.offset||[]),o=l.computed(function(){return e.movable?0:e.x}),s=l.computed(function(){return e.movable?0:e.y}),c=l.computed(function(){return e.movable?0:e.rotate}),u=l.computed(function(){return e.movable?"no-repeat":e.isRepeat?"repeat":"no-repeat"}),d=l.computed(function(){return i[0]||o.value/2}),f=l.computed(function(){return i[1]||s.value/2}),h=l.computed(function(){return{width:e.width,height:e.height,rotate:c.value,lineSpace:e.lineSpace,alpha:e.alpha,gapX:o.value,gapY:s.value,watermarkContent:e.watermarkContent,offsetLeft:d.value,offsetTop:f.value}}),v=function(){a.value&&(a.value.remove(),a.value=null)},p=function(){if(hbe(h.value,function(y){var b;v(),n.value=y,a.value=document.createElement("div"),Bl(a.value,{zIndex:e.zIndex,position:"absolute",left:0,right:0,top:0,bottom:0,width:"100%",height:"100%",backgroundSize:"".concat(o.value+e.width,"px"),pointerEvents:"none",backgroundRepeat:u.value,backgroundImage:"url('".concat(n.value,"')"),animation:e.movable?"watermark infinite ".concat(e.moveInterval*4/60,"s"):"none"}),(b=r.value)===null||b===void 0||b.append(a.value)}),e.movable){var m=vbe();pbe(m)}};return l.onMounted(function(){p(),dA(r.value,function(g){if(!(e.removable||!a.value)){var m=gbe(g),y;try{for(m.s();!(y=m.n()).done;){var b=y.value,w=Array.from(b.removedNodes).includes(a.value),x=b.type==="attributes"&&a.value===b.target;if(w||x){p();break}}}catch(C){m.e(C)}finally{m.f()}}},{attributes:!0,childList:!0,characterData:!0,subtree:!0})}),l.watch(function(){return e},p,{deep:!0,flush:"post"}),{gapX:o,gapY:s,backgroundRepeat:u,backgroundImage:n,watermarkRef:r,watermarkContentRef:a,bgImageOptions:h}},render:function(){var e=ve("watermark"),n=Ut();return l.createVNode("div",{style:{position:"relative",overflow:"hidden",width:"100%"},class:e.value,ref:"watermarkRef"},[n("default","content")])}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var bbe=Be(ybe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var wbe={allowHalf:Boolean,clearable:Boolean,color:{type:[String,Array],default:"#ED7B2F"},count:{type:Number,default:5},disabled:{type:Boolean,default:void 0},gap:{type:Number,default:4},icon:{type:Function},showText:Boolean,size:{type:String,default:"24px"},texts:{type:Array,default:function(){return[]}},value:{type:Number,default:void 0},modelValue:{type:Number,default:void 0},defaultValue:{type:Number,default:0},onChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function XD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function xbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Cbe=l.defineComponent({name:"TRate",props:xbe({},wbe),setup:function(e,n){var r=n.slots,a=We(),i=Qe("rate"),o=i.globalConfig,s=Ke(e.color)?e.color[0]:e.color,c=Ke(e.color)?e.color[1]:"var(--td-bg-color-component)",u=l.toRefs(e),d=u.value,f=u.modelValue,h=Mt(d,f,e.defaultValue,e.onChange),v=$e(h,2),p=v[0],g=v[1],m=l.ref(void 0),y=l.ref(),b=l.computed(function(){return Number(m.value||p.value)}),w=l.computed(function(){return e.texts.length===0?o.value.rateText:e.texts}),x=l.computed(function(){return w.value[Math.ceil(b.value-1)]}),C=function(I){return r.icon!==void 0?a("icon",{params:I}):l.createVNode(Ree,I,null)},S=function(I,A){if(e.allowHalf){var M=y.value.getBoundingClientRect(),$=M.left,U=y.value.firstChild.nextSibling,F=U.getBoundingClientRect(),j=F.width,W=I.clientX,H=j*(A-.5)+e.gap*(A-1);if(W-$>=H)return A;if(W-$<H)return A-.5}return A},_=function(I,A){e.disabled||(m.value=S(I,A))},O=function(){e.disabled||(m.value=void 0)},N=function(I,A){if(!e.disabled){var M=S(I,A);e.clearable&&M===p.value?(m.value=void 0,g(0)):g(M)}},B=function(I){if(e.allowHalf&&I+.5===b.value)return"".concat(k.value,"-rate__item--half");if(I>=b.value)return"";if(I<b.value)return"".concat(k.value,"-rate__item--full")},T=Qe("classPrefix"),k=T.classPrefix;return function(){return l.createVNode("div",{class:"".concat(k.value,"-rate"),onMouseleave:O},[l.createVNode("ul",{class:"".concat(k.value,"-rate__list"),style:{gap:"".concat(e.gap,"px")},ref:y},[Ee(Array(Number(e.count))).map(function(E,I){return l.createVNode("li",{key:I,class:["".concat(k.value,"-rate__item"),B(I)],onClick:function(M){return N(M,I+1)},onMousemove:function(M){return _(M,I+1)}},[e.showText?l.createVNode(Tr,{key:I,content:x.value},{default:function(){return[l.createVNode("div",{class:"".concat(k.value,"-rate__star-top")},[l.createVNode(C,{size:e.size,color:s},null)]),l.createVNode("div",{class:"".concat(k.value,"-rate__star-bottom")},[l.createVNode(C,{size:e.size,color:c},null)])]}}):l.createVNode(l.Fragment,null,[l.createVNode("div",{class:"".concat(k.value,"-rate__star-top")},[l.createVNode(C,{size:e.size,color:s},null)]),l.createVNode("div",{class:"".concat(k.value,"-rate__star-bottom")},[l.createVNode(C,{size:e.size,color:c},null)])])])})]),e.showText&&l.createVNode("div",{class:"".concat(k.value,"-rate__text")},[x.value])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var _be=Be(Cbe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Sbe={code:Boolean,content:{type:[String,Function]},copyable:{type:[Boolean,Object],default:!1},default:{type:[String,Function]},delete:Boolean,disabled:Boolean,ellipsis:{type:[Boolean,Object],default:!1},italic:Boolean,keyboard:Boolean,mark:{type:[String,Boolean],default:!1},strong:Boolean,theme:{type:String,validator:function(e){return e?["primary","secondary","success","warning","error"].includes(e):!0}},underline:Boolean};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Tbe="Copy to clipboard: #{key}, Enter",kbe=function(e){var n=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)},Obe=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],a=0;a<e.rangeCount;a++)r.push(e.getRangeAt(a));var i=n.tagName.toUpperCase();switch(i){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(o){e.addRange(o)}),n&&n.focus()}},Ebe=function(e,n){var r,a,i,o,s,c=!1;n||(n={});try{a=Obe(),i=document.createRange(),o=document.getSelection(),s=document.createElement("span"),s.textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top="0",s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(d){d.stopPropagation(),n.format&&(d.preventDefault(),d.clipboardData.clearData(),d.clipboardData.setData(n.format,e)),n.onCopy&&(d.preventDefault(),n.onCopy(d.clipboardData))}),document.body.appendChild(s),i.selectNodeContents(s),o.addRange(i);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch{try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),c=!0}catch{r=kbe("message"in n?n.message:Tbe),window.prompt(r,e)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(i):o.removeAllRanges()),s&&document.body.removeChild(s),a()}return c};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var JD={content:{type:[String,Function]},default:{type:[String,Function]},ellipsis:{type:[Boolean,Object],default:!1}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ZD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pbe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var n1=l.defineComponent({name:"TEllipsis",components:{TTooltip:Tr},props:ZD({},JD),setup:function(e,n){var r=n.slots,a=ve("typography"),i=Qe("typography"),o=i.globalConfig,s=l.computed(function(){return e.content||(r==null?void 0:r.default())}),c=l.computed(function(){var p=e.ellipsis;return ZD({row:1,expandable:!1},wt(p)==="object"?p:null)}),u=l.computed(function(){var p=c.value,g={overflow:e.ellipsis?"hidden":"visible",textOverflow:e.ellipsis?"ellipsis":"initial",whiteSpace:e.ellipsis?"normal":"nowrap",display:"-webkit-box",WebkitLineClamp:p.row,WebkitBoxOrient:"vertical"};return d.value&&(g.overflow="visible",g.whiteSpace="normal",g.display="initial"),g}),d=l.ref(!1),f=function(){var g,m;d.value=!0,wt(e.ellipsis)==="object"&&((g=(m=e.ellipsis).onExpand)===null||g===void 0||g.call(m,!0))},h=function(){var g,m;d.value=!1,wt(e.ellipsis)==="object"&&((g=(m=e.ellipsis).onExpand)===null||g===void 0||g.call(m,!1))},v=function(){var g=c.value.suffix,m=l.createVNode("span",{class:"".concat(a.value,"-ellipsis-symbol"),onClick:f,style:"text-decoration:none;white-space:nowrap;flex: 1;"},[g||o.value.expandText]),y=c.value,b=y.tooltipProps,w=y.expandable,x=y.collapsible;if(!d.value&&w)return b&&b.content?l.createVNode(Tr,l.mergeProps(b,{content:b.content}),Pbe(m)?m:{default:function(){return[m]}}):m;if(w&&d.value&&x)return l.createVNode("span",{class:"".concat(a.value,"-ellipsis-symbol"),onClick:h,style:"text-decoration:none;white-space:nowrap;flex: 1;"},[o.value.collapseText])};return function(){var p=c.value.tooltipProps;return l.createVNode("div",{style:{display:"flex",alignItems:"flex-end"}},[p&&l.createVNode(Tr,{content:p.content,placement:"top-right"},null),l.createVNode("p",{style:e.ellipsis?u.value:{}},[s.value]),v()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Ibe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var VD=l.defineComponent({name:"TTypographyText",props:Sbe,setup:function(e,n){var r=n.slots,a=ve("typography"),i=Qe("typography"),o=i.globalConfig,s=l.ref(!1),c=Ut(),u=function(y,b){var w=y.code,x=y.underline,C=y.delete,S=y.strong,_=y.keyboard,O=y.mark,N=y.italic,B=b;function T(k,E){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(k){var A=function(){return B}();B=l.createVNode(E,{style:I},Ibe(B)?B:{default:function(){return[A]}})}}return T(S,"strong"),T(x,"u"),T(C,"del"),T(w,"code"),T(O!==!1,"mark",O?{color:O}:{}),T(_,"kbd"),T(N,"i"),B},d=l.computed(function(){var m=e.theme,y=e.disabled,b=a.value,w=[b];return y?w.push("".concat(b,"--disabled")):m&&["primary","secondary","success","warning","error"].includes(m)&&w.push("".concat(b,"--").concat(m)),w}),f=l.computed(function(){var m,y=e.copyable;return s.value?o.value.copiedText:wt(y)==="object"?(m=y.tooltipProps)===null||m===void 0?void 0:m.content:null}),h=l.computed(function(){return e.content||(r==null?void 0:r.default())}),v=function(){var y=e.copyable;if(y){var b=s.value?function(){return l.createVNode(K0,null,null)}:function(){return l.createVNode($V,null,null)},w={theme:"default"},x=function(){};return wt(y)==="object"&&(y.suffix&&!s.value&&(b=y.suffix),y.tooltipProps&&(w=y.tooltipProps),typeof y.onCopy=="function"&&(x=y.onCopy)),l.createVNode(Tr,l.mergeProps(w,{content:f.value}),{default:function(){return[l.createVNode(zt,{icon:b,shape:"square",theme:"primary",variant:"text",onClick:function(_){return g(_,x)}},null)]}})}},p=function(){if(typeof h.value=="string")return h.value;if(Array.isArray(h.value))return h.value.map(function(y){return y.children}).join("")},g=function(y,b){y.preventDefault(),y.stopPropagation(),s.value=!0,setTimeout(function(){s.value=!1},1500),Ebe(p()),b==null||b()};return function(){var m=c("default","content");return e.ellipsis?l.createVNode(n1,l.mergeProps(e,{class:d.value}),{default:function(){return[u(e,m),e.copyable?v():null]}}):l.createVNode("span",{class:d.value},[u(e,m),e.copyable?v():null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Abe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Nbe=l.defineComponent({name:"TTypography",setup:function(){var e=We();return function(){var n;return l.createVNode(VD,null,Abe(n=e("default"))?n:{default:function(){return[n]}})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Dbe={content:{type:[String,Function]},default:{type:[String,Function]},ellipsis:{type:[Boolean,Object],default:!1},level:{type:String,default:"h1",validator:function(e){return e?["h1","h2","h3","h4","h5","h6"].includes(e):!0}}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Rbe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var Mbe=l.defineComponent({name:"TTypographyTitle",props:Dbe,setup:function(e){var n=ve("typography"),r=Ut();return function(){var a,i=e.level,o=r("default","content");return e.ellipsis?l.createVNode(n1,l.mergeProps(e,{class:n.value}),Rbe(a=l.h.apply(void 0,[i].concat(Ee(o))))?a:{default:function(){return[a]}}):l.createVNode(l.Fragment,null,[l.h.apply(void 0,[i,{class:n.value}].concat(Ee(o)))])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function e3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Lbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Fbe=l.defineComponent({name:"TTypographyParagraph",components:{TTooltip:Tr},props:Lbe({style:{type:Object,default:function(){return{}}}},JD),setup:function(e,n){var r=n.slots,a=ve("typography"),i=l.computed(function(){return e.content||(r==null?void 0:r.default())});return function(){return e.ellipsis?l.createVNode(n1,l.mergeProps(e,{class:a.value}),{default:function(){return[i.value]}}):l.createVNode("p",{class:a.value},[i.value])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Bbe=Be(Nbe),jbe=Be(VD),$be=Be(Mbe),Ube=Be(Fbe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var zbe={close:{type:[String,Boolean,Function],default:!1},default:{type:[String,Function]},icon:{type:Function},maxLine:{type:Number,default:0},message:{type:[String,Function]},operation:{type:Function},theme:{type:String,default:"info",validator:function(e){return["success","info","warning","error"].includes(e)}},title:{type:[String,Function]},onClose:Function,onClosed:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Hbe=l.defineComponent({name:"TAlert",props:zbe,setup:function(e){var n=Qe("alert"),r=n.globalConfig,a=n.classPrefix,i=St({CheckCircleFilledIcon:so,CloseIcon:Za,ErrorCircleFilledIcon:ki,HelpCircleFilledIcon:mT,InfoCircleFilledIcon:kd}),o=i.CheckCircleFilledIcon,s=i.CloseIcon,c=i.ErrorCircleFilledIcon,u=i.HelpCircleFilledIcon,d=i.InfoCircleFilledIcon,f=ve("alert"),h=We(),v=Bre(),p=l.ref(null),g=l.ref(null),m=l.ref(0),y=l.ref(!0),b=l.ref(!0),w=function(){var k={info:d,success:o,warning:c,error:c,question:u},E=v("icon",k);return E?l.createVNode("div",{class:"".concat(f.value,"__icon")},[E]):null},x=function(){var k=e.close,E=null;return k===!0||k===""?E=l.createVNode(s,null,null):Je(k)?E=k:E=v("close"),E?l.createVNode("div",{class:"".concat(f.value,"__close"),onClick:N},[E]):null},C=function(){var k=h("title");return k?l.createVNode("div",{class:"".concat(f.value,"__title")},[" ",k]):null},S=function(){var k=h("operation");return l.createVNode("div",{class:"".concat(f.value,"__message")},[_(),k?l.createVNode("div",{class:"".concat(f.value,"__operation")},[k]):null])},_=function(){var k,E;E=h("default"),E||(E=h("message"));var I=Ke(E)?E.length:1,A=e.maxLine>0&&e.maxLine<I,M=(k=g.value)===null||k===void 0||(k=k.children[0])===null||k===void 0?void 0:k.offsetHeight;return A&&b.value?(E=E.slice(0,e.maxLine),M&&(g.value.style.height="".concat(m.value,"px"))):A&&M&&(g.value.style.height="".concat(M*(I-e.maxLine)+m.value,"px")),l.createVNode("div",{class:"".concat(f.value,"__description"),ref:g},[A?E.map(function($){return l.createVNode("div",null,[$])}):E,A?l.createVNode("div",{class:"".concat(f.value,"__collapse"),onClick:function(){b.value=!b.value}},[b.value?r.value.expandText:r.value.collapseText]):null])},O=function(){return l.createVNode("div",{class:"".concat(f.value,"__content")},[C(),S()])},N=function(k){var E;(E=e.onClose)===null||E===void 0||E.call(e,{e:k}),Td(p.value,"".concat(f.value,"--closing"))},B=function(k){var E=k.target===p.value;if(k.propertyName==="opacity"&&E){var I;y.value=!1,(I=e.onClosed)===null||I===void 0||I.call(e,{e:k})}};return l.onMounted(function(){qt(p.value,"transitionend",B),m.value=g.value.offsetHeight}),l.onBeforeUnmount(function(){At(p.value,"transitionend",B)}),function(){return l.createVNode("div",{ref:p,class:["".concat(f.value),"".concat(f.value,"--").concat(e.theme),V({},"".concat(a.value,"-is-hidden"),!y.value)]},[w(),O(),x()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Wbe=Be(Hbe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Kbe={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function]},closeBtn:{type:[String,Boolean,Function]},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function]},default:{type:[String,Function]},destroyOnClose:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"overlay",validator:function(e){return e?["overlay","push"].includes(e):!0}},placement:{type:String,default:"right",validator:function(e){return e?["left","right","top","bottom"].includes(e):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},size:{type:String,default:void 0},sizeDraggable:{type:[Boolean,Object],default:!1},visible:Boolean,zIndex:{type:Number},onBeforeClose:Function,onBeforeOpen:Function,onCancel:Function,onClose:Function,onCloseBtnClick:Function,onConfirm:Function,onEscKeydown:Function,onOverlayClick:Function,onSizeDragEnd:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function qbe(t,e){return typeof t=="boolean"?{allowSizeDraggable:t,max:e.max,min:e.min}:{allowSizeDraggable:!0,max:t.max,min:t.min}}function Yp(t,e,n){return Math.min(Math.max(t,e),n)}function Gbe(t,e){var n=e.x,r=e.y,a=e.max,i=e.min,o=e.maxWidth,s=e.maxHeight,c;switch(t){case"right":c=Yp(o-n,i,a);break;case"left":c=Yp(n,i,a);break;case"top":c=Yp(r,i,a);break;case"bottom":c=Yp(s-r,i,a);break;default:return c}return c}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Ybe=function(e){var n=l.ref(!1),r=l.ref(null),a=function(){document.addEventListener("mouseup",i,!0),document.addEventListener("mousemove",o,!0),n.value=!0},i=function(){document.removeEventListener("mouseup",i,!0),document.removeEventListener("mousemove",o,!0),n.value=!1},o=function(u){var d,f=u.x,h=u.y,v=document.documentElement.clientHeight,p=document.documentElement.clientWidth,g=8,m=8,y=e.placement==="left"||e.placement==="right"?p:v,b=e.placement==="left"||e.placement==="right"?m:g,w=qbe(e.sizeDraggable,{max:y,min:b}),x=w.allowSizeDraggable,C=w.max,S=w.min;if(!(!x||!n.value)){var _=Gbe(e.placement,{x:f,y:h,maxWidth:p,maxHeight:v,max:C,min:S});typeof _>"u"||(r.value="".concat(_,"px"),(d=e.onSizeDragEnd)===null||d===void 0||d.call(e,{e:u,size:_}))}},s=l.computed(function(){var c=["right","left"].includes(e.placement),u={left:"right",right:"left",top:"bottom",bottom:"top"};return V(V(V(V({zIndex:1,position:"absolute",background:"transparent"},u[e.placement],0),"width",c?"16px":"100%"),"height",c?"100%":"16px"),"cursor",c?"col-resize":"row-resize")});return{draggedSizeValue:r,enableDrag:a,draggableLineStyles:s}};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Xbe=1,Jbe=l.defineComponent({name:"TDrawer",inheritAttrs:!1,props:Kbe,emits:["update:visible"],setup:function(e,n){var r=l.ref(!1),a=l.ref(!1),i=l.ref(),o=l.ref(),s=Qe("drawer"),c=s.globalConfig,u=St({CloseIcon:Za}),d=u.CloseIcon,f=We(),h=Ut(),v=ve("drawer"),p=Ybe(e),g=p.draggedSizeValue,m=p.enableDrag,y=p.draggableLineStyles,b=ov(function(){return e.attach}),w=function(D){var q;(q=e.onConfirm)===null||q===void 0||q.call(e,{e:D})},x=function(D){var q;(q=e.onCancel)===null||q===void 0||q.call(e,{e:D}),J({trigger:"cancel",e:D})},C=_b({confirmBtnAction:w,cancelBtnAction:x}),S=C.getConfirmBtn,_=C.getCancelBtn,O=l.ref(null),N=l.computed(function(){return[v.value,"".concat(v.value,"--").concat(e.placement),V(V(V({},"".concat(v.value,"--open"),a.value),"".concat(v.value,"--attach"),e.showInAttachedElement),"".concat(v.value,"--without-mask"),!e.showOverlay)]}),B=l.computed(function(){var Y;if(g.value)return g.value;var D=(Y=e.size)!==null&&Y!==void 0?Y:c.value.size,q=isNaN(Number(D))?D:"".concat(D,"px");return{small:"300px",medium:"500px",large:"760px"}[D]||q}),T=l.computed(function(){return{transform:a.value?"translateX(0)":void 0,width:["left","right"].includes(e.placement)?B.value:"",height:["top","bottom"].includes(e.placement)?B.value:""}}),k=l.computed(function(){return["".concat(v.value,"__content-wrapper"),"".concat(v.value,"__content-wrapper--").concat(e.placement)]}),E=l.computed(function(){return O.value&&O.value.parentNode}),I=l.computed(function(){return[e.mode,e.placement].join()}),A=l.computed(function(){return{display:"flex",justifyContent:e.placement==="right"?"flex-start":"flex-end"}}),M=function(D){var q;if(((q=e.closeOnEscKeydown)!==null&&q!==void 0?q:c.value.closeOnEscKeydown)&&D.key==="Escape"&&a.value){var z;(z=e.onEscKeydown)===null||z===void 0||z.call(e,{e:D}),J({trigger:"esc",e:D})}},$=function(){clearTimeout(o.value),o.value=setTimeout(function(){var D,q;(D=i.value)===null||D===void 0||(D=D.parentNode)===null||D===void 0||(q=D.removeChild)===null||q===void 0||q.call(D,i.value)},150)},U=function(){e.mode==="push"&&l.nextTick(function(){E.value&&(E.value.style.cssText="transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;")})},F=function(){if(E.value&&!(e.mode!=="push"||!E.value)){var D={left:"margin: 0 0 0 ".concat(B.value),right:"margin: 0 0 0 -".concat(B.value),top:"margin: ".concat(B.value," 0 0 0"),bottom:"margin: -".concat(B.value," 0 0 0")}[e.placement];a.value?E.value.style.cssText+=D:E.value.style.cssText=E.value.style.cssText.replace(/margin:.+;/,"")}},j=function(){var D=S({confirmBtn:e.confirmBtn,globalConfirm:c.value.confirm,className:"".concat(v.value,"__confirm")}),q=_({cancelBtn:e.cancelBtn,globalCancel:c.value.cancel,className:"".concat(v.value,"__cancel")});return l.createVNode("div",{style:A.value},[e.placement==="right"?D:null,q,e.placement!=="right"?D:null])};l.watch(I,function(){U()},{immediate:!0}),l.watch(function(){return e.visible},function(Y){var D,q;Si||(Y?!e.showInAttachedElement&&e.preventScrollThrough&&i.value&&document.head.appendChild(i.value):$(),Y?(D=e.onBeforeOpen)===null||D===void 0||D.call(e):(q=e.onBeforeClose)===null||q===void 0||q.call(e),e.destroyOnClose?Y?(r.value=!1,setTimeout(function(){a.value=!0})):(a.value=!1,setTimeout(function(){r.value=!0},200)):r.value===!0&&Y?(r.value=!1,setTimeout(function(){a.value=!0})):a.value=Y)},{immediate:!0});var W=function(D){var q;(q=e.onCloseBtnClick)===null||q===void 0||q.call(e,{e:D}),J({trigger:"close-btn",e:D})},H=function(D){var q,z;(q=e.onOverlayClick)===null||q===void 0||q.call(e,{e:D}),((z=e.closeOnOverlayClick)!==null&&z!==void 0?z:c.value.closeOnOverlayClick)&&J({trigger:"overlay",e:D})},J=function(D){var q;(q=e.onClose)===null||q===void 0||q.call(e,D),n.emit("update:visible",!1)};return l.onUpdated(function(){F()}),l.onMounted(function(){var Y=window.innerWidth>document.documentElement.clientWidth,D=Y?XN():0;i.value=document.createElement("style"),i.value.dataset.id="td_drawer_".concat(+new Date,"_").concat(Xbe+=1),i.value.innerHTML=`
        html body {
          overflow-y: hidden;
          transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
          `.concat(e.mode==="push"?"":"width: calc(100% - ".concat(D,"px);"),`
        }
      `),a.value&&!e.showInAttachedElement&&e.preventScrollThrough&&document.head.appendChild(i.value),window.addEventListener("keydown",M)}),l.onBeforeUnmount(function(){$(),window.removeEventListener("keydown",M)}),function(){if(!r.value){var Y=h("body","default"),D=f("header"),q=j();return l.createVNode(l.Teleport,{disabled:!e.attach||!b.value,to:b.value},{default:function(){return[l.createVNode("div",l.mergeProps({ref:O,class:N.value,style:{zIndex:e.zIndex},onKeydown:M,tabindex:0},n.attrs),[e.showOverlay&&l.createVNode("div",{class:"".concat(v.value,"__mask"),onClick:H},null),l.createVNode("div",{class:k.value,style:T.value},[D&&l.createVNode("div",{class:"".concat(v.value,"__header")},[D]),e.closeBtn&&l.createVNode("div",{class:"".concat(v.value,"__close-btn"),onClick:W},[f("closeBtn",l.createVNode(d,null,null))]),l.createVNode("div",{class:["".concat(v.value,"__body"),"narrow-scrollbar"]},[Y]),e.footer&&l.createVNode("div",{class:"".concat(v.value,"__footer")},[f("footer",q)]),e.sizeDraggable&&l.createVNode("div",{style:y.value,onMousedown:m},null)])])]}})}}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Qbe=Be(Jbe);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var Zbe={counter:{type:Function},current:{type:Number,default:void 0},modelValue:{type:Number,default:void 0},defaultCurrent:{type:Number},finishButtonProps:{type:Object},hideCounter:Boolean,hidePrev:Boolean,hideSkip:Boolean,highlightPadding:{type:Number,default:8},mode:{type:String,default:"popup",validator:function(e){return e?["popup","dialog"].includes(e):!0}},nextButtonProps:{type:Object},prevButtonProps:{type:Object},showOverlay:{type:Boolean,default:!0},skipButtonProps:{type:Object},steps:{type:Array},zIndex:{type:Number,default:999999},onChange:Function,onFinish:Function,onNextStepClick:Function,onPrevStepClick:Function,onSkip:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function Vbe(t){var e=window.getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.body;for(var a=t;a.parentElement;)if(a=a.parentElement,e=window.getComputedStyle(a),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return a;return document.body}function t3(t){var e=Vbe(t);e!==document.body&&(sS(t,e)||(e.scrollTop=t.offsetTop-e.offsetTop))}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function e1e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body,n=uS(),r=n.scrollTop,a=n.scrollLeft,i=t.getBoundingClientRect(),o=i.top,s=i.left,c=e.getBoundingClientRect(),u=c.top,d=c.left,f=cS(e,"position");return e.tagName.toLowerCase()!=="body"&&f==="relative"||f==="sticky"?{top:o-u,left:s-d}:M0(t)?{top:o,left:s}:{top:o+r,left:s+a}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function t1e(t){if(t){var e,n=null;if(Je(t))n=document.querySelector(t);else if(Re(t))n=t();else throw new Error("elm should be string or function");if(n)return n;if(((e=process)===null||e===void 0||(e=e.env)===null||e===void 0?void 0:e.NODE_ENV)!=="test")throw new Error("There is no element with given.")}else return document.body}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function n3(t){var e=t.getBoundingClientRect();if(!sS(t)){var n=PX().height;R0(e.top-(n/2-e.height/2),{})}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var n1e=l.defineComponent({name:"TGuide",props:Zbe,setup:function(e,n){var r=We(),a=ve("guide"),i=ve("guide--lock"),o=Qe("guide"),s=o.globalConfig,c=l.toRefs(e),u=c.current,d=c.modelValue,f=c.hideCounter,h=c.hidePrev,v=c.hideSkip,p=c.steps,g=c.zIndex,m=Mt(u,d,e.defaultCurrent,e.onChange,"current"),y=$e(m,2),b=y[0],w=y[1],x=l.ref(),C=l.ref(),S=l.ref(),_=l.ref(),O=l.ref(),N=l.ref(),B=l.ref(),T=l.ref(!1),k=l.computed(function(){return p.value.length}),E=l.computed(function(){return p.value[b.value]}),I=l.computed(function(){return M("mode")==="popup"}),A=l.computed(function(){return M0(_.value||document.body)}),M=function(ae){var oe;return(oe=E.value[ae])!==null&&oe!==void 0?oe:e[ae]},$=l.computed(function(){var re=E.value.highlightContent,ae=re;return Re(re)?ae=re(j()):n.slots.highlightContent?ae=n.slots.highlightContent(j()):n.slots["highlight-content"]?ae=n.slots["highlight-content"](j()):re&&(ae=l.createVNode(ae,null,null)),ae&&(ae.props||(ae.props={}),ae.props.class=ae.props.class||""),ae}),U=l.computed(function(){return!!($.value&&I.value)}),F=l.ref(!1),j=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{currentStepInfo:E.value},oe=new Function("return "+l.h.toString())();return Object.assign({},oe,ae)},W=function(ae){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce=e1e(_.value),ge=ce.top,pe=ce.left,_e=_.value.getBoundingClientRect(),be=_e.width,Se=_e.height,Ne=M("highlightPadding");if(I.value)be+=Ne*2,Se+=Ne*2,ge-=Ne,pe-=Ne;else{var Ae=uS(),Pe=Ae.scrollTop,Me=Ae.scrollLeft;ge+=Pe,pe+=Me}var me={top:"".concat(ge,"px"),left:"".concat(pe,"px")};if(U.value)if(oe){var ie=C.value.getBoundingClientRect(),ye=ie.width,Ce=ie.height;Object.assign(me,{width:"".concat(ye,"px"),height:"".concat(Ce,"px")})}else Object.assign(me,{width:"auto",height:"auto"});else Object.assign(me,{width:"".concat(be,"px"),height:"".concat(Se,"px")});Bl(ae,me)},H=function(){l.nextTick(function(){var ae;_.value=t1e(E.value.element),_.value&&(t3(_.value),W(C.value),W(S.value,!0),n3(_.value),(ae=B.value)===null||ae===void 0||ae.update())})},J=function(){var ae;(ae=S.value)===null||ae===void 0||ae.parentNode.removeChild(S.value)},Y=function(){l.nextTick(function(){_.value=N.value,t3(_.value),W(C.value),n3(_.value)})},D=function(){var ae,oe;(ae=N.value)===null||ae===void 0||ae.parentNode.removeChild(N.value),(oe=O.value)===null||oe===void 0||oe.parentNode.removeChild(O.value)},q=function(){I.value?(D(),H()):(J(),Y()),F.value=!0},z=function(){var ae,oe;J(),D(),(ae=C.value)===null||ae===void 0||ae.parentNode.removeChild(C.value),(oe=x.value)===null||oe===void 0||oe.parentNode.removeChild(x.value),tv(document.body,i.value)},K=function(ae){var oe,ce=k.value;T.value=!1,w(-1,{e:ae,total:ce}),(oe=e.onSkip)===null||oe===void 0||oe.call(e,{e:ae,current:b.value,total:ce})},P=function(ae){var oe,ce=k.value;w(b.value-1,{e:ae,total:ce}),(oe=e.onPrevStepClick)===null||oe===void 0||oe.call(e,{e:ae,prev:b.value-1,current:b.value,total:ce})},R=function(ae){var oe,ce=k.value;w(b.value+1,{e:ae,total:ce}),(oe=e.onNextStepClick)===null||oe===void 0||oe.call(e,{e:ae,next:b.value+1,current:b.value,total:ce})},X=function(ae){var oe,ce=k.value;T.value=!1,w(-1,{e:ae,total:ce}),(oe=e.onFinish)===null||oe===void 0||oe.call(e,{e:ae,current:b.value,total:ce})},ee=function(){b.value>=0&&b.value<p.value.length&&(T.value||(T.value=!0,Td(document.body,i.value)),q())};return l.watch(b,function(re){re>=0&&re<p.value.length?(F.value=!1,ee()):(T.value=!1,z())}),l.onMounted(function(){ee()}),function(){var re=function(){return l.createVNode("div",{ref:x,class:"".concat(a.value,"__overlay"),style:{zIndex:g.value-2}},null)},ae=function(){var Pe={zIndex:g.value-1},Me=["".concat(a.value,"__highlight"),"".concat(a.value,"__highlight--").concat(I.value?"popup":"dialog"),"".concat(a.value,"--").concat(A.value&&I.value?"fixed":"absolute")],me=M("showOverlay"),ie=["".concat(a.value,"__highlight--").concat(me?"mask":"nomask")];return l.createVNode("div",{ref:C,class:[].concat(Me,ie),style:Pe},[U.value&&$.value])},oe=function(){var Pe=r("counter",{params:{total:k.value,current:b.value}}),Me=l.createVNode("div",{class:"".concat(a.value,"__counter")},[Pe||"".concat(b.value+1,"/").concat(k.value)]);return l.createVNode(l.Fragment,null,[!f.value&&Me])},ce=function(Pe){var Me,me,ie,ye,Ce=b.value===k.value-1,Ge=b.value===0,Le=Pe==="popup"?"small":"medium";return l.createVNode("div",{class:"".concat(a.value,"__action")},[!v.value&&!Ce&&l.createVNode(zt,l.mergeProps({key:"skip",class:"".concat(a.value,"__skip"),theme:"default",size:Le,variant:"base",onClick:K},(Me=M("skipButtonProps"))!==null&&Me!==void 0?Me:s.value.skipButtonProps),null),!h.value&&!Ge&&l.createVNode(zt,l.mergeProps({key:"prev",class:"".concat(a.value,"__prev"),theme:"default",size:Le,variant:"base",onClick:P},(me=M("prevButtonProps"))!==null&&me!==void 0?me:s.value.prevButtonProps),null),!Ce&&l.createVNode(zt,l.mergeProps({key:"next",class:"".concat(a.value,"__next"),theme:"primary",size:Le,variant:"base",onClick:R},(ie=M("nextButtonProps"))!==null&&ie!==void 0?ie:s.value.nextButtonProps),null),Ce&&l.createVNode(zt,l.mergeProps({key:"finish",class:"".concat(a.value,"__finish"),theme:"primary",size:Le,variant:"base",onClick:X},(ye=e.finishButtonProps)!==null&&ye!==void 0?ye:s.value.finishButtonProps),null)])},ge=function(){var Pe=Re(E.value.title)?E.value.title():void 0,Me=n.slots.title?n.slots.title(j()):void 0;return Pe||Me||E.value.title},pe=function(){var Pe=l.createVNode("div",{class:"".concat(a.value,"__title")},[ge()]),Me=E.value.body,me;Re(Me)?me=Me(j()):n.slots.body?me=n.slots.body({currentStepInfo:E.value}):typeof Me=="string"?me=Me:me=l.createVNode(Me,null,null);var ie=l.createVNode("div",{class:"".concat(a.value,"__desc")},[me]);return l.createVNode(l.Fragment,null,[Pe,ie])},_e=function(){var Pe=["".concat(a.value,"__footer"),"".concat(a.value,"__footer--popup")],Me=l.createVNode("div",{class:Pe},[oe(),ce("popup")]);return l.createVNode("div",{class:"".concat(a.value,"__tooltip")},[pe(),Me])},be=function(){var Pe,Me=E.value.content,me={handlePrev:P,handleNext:R,handleSkip:K,handleFinish:X,current:b.value,total:k.value},ie;Re(Me)?ie=function(){return Me(j(me))}:n.slots.content?ie=function(){return n.slots.content(j(me))}:Me?ie=function(){return l.createVNode(Me,me,null)}:ie=_e;var ye=["".concat(a.value,"__reference"),"".concat(a.value,"--").concat(A.value?"fixed":"absolute")],Ce=[V({},"".concat(a.value,"__popup--content"),!!Me)];return l.createVNode(sa,l.mergeProps({ref:B,visible:F.value,"show-arrow":!Me,zIndex:g.value,placement:E.value.placement},E.value.popupProps,{content:ie,overlayClassName:["".concat(a.value,"__popup"),E.value.stepOverlayClass],overlayInnerClassName:Ce.concat((Pe=E.value.popupProps)===null||Pe===void 0?void 0:Pe.overlayInnerClassName)}),{default:function(){return[l.createVNode("div",{ref:S,class:ye},null)]}})},Se=function(){var Pe={zIndex:g.value},Me=["".concat(a.value,"__wrapper"),V({},"".concat(a.value,"__wrapper--center"),E.value.placement==="center")],me=["".concat(a.value,"__reference"),"".concat(a.value,"--absolute"),"".concat(a.value,"__dialog"),V(V({},"".concat(a.value,"__dialog--nomask"),!M("showOverlay")),E.value.stepOverlayClass,!!E.value.stepOverlayClass)],ie=["".concat(a.value,"__footer"),"".concat(a.value,"__footer--popup")];return l.createVNode(l.Fragment,null,[l.createVNode("div",{ref:O,class:Me,style:Pe},[l.createVNode("div",{ref:N,class:me},[pe(),l.createVNode("div",{class:ie},[oe(),ce("dialog")])])])])},Ne=function(){return l.createVNode(l.Fragment,null,[l.createVNode(l.Teleport,{to:"body"},{default:function(){return[re(),ae(),I.value?be():Se()]}})])};return l.createVNode(l.Fragment,null,[T.value&&Ne()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var r1e=Be(n1e);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var a1e=Be(Lk);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var i1e={closeBtn:{type:[String,Boolean,Function],default:void 0},content:{type:[String,Function]},default:{type:[String,Function]},duration:{type:Number,default:3e3},footer:{type:[String,Function]},icon:{type:[Boolean,Function],default:!0},theme:{type:String,default:"info",validator:function(e){return e?["info","success","warning","error"].includes(e):!0}},title:{type:[String,Function]},onCloseBtnClick:Function,onDurationEnd:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var o1e=6e3,Po="16px",r3={"top-left":{left:Po,top:Po},"top-right":{right:Po,top:Po},"bottom-right":{right:Po,bottom:Po},"bottom-left":{left:Po,bottom:Po}},a3=Object.keys(r3);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var i3={duration:200,easing:"linear"},l1e=function(e,n){if(e){var r=(e==null?void 0:e.offsetHeight)||0,a=(e==null?void 0:e.offsetWidth)||0,i=s1e(n,a,r);i&&e.animate&&e.animate(i,i3)}},o3=function(e,n,r){if(e){var a=(e==null?void 0:e.offsetHeight)||0,i=(e==null?void 0:e.offsetWidth)||0,o=c1e(n,i,a);if(!o)return r();var s=e.animate&&e.animate(o,i3);s?s.onfinish=function(){r()}:(e.style.display="none",r())}},s1e=function(e,n,r){if(!a3.includes(e))return null;if(e==="top-right")return[{opacity:0,transform:"translateX(".concat(n,"px)")},{opacity:1,transform:"translateX(0px)"}];if(e==="bottom-right")return[{opacity:0,transform:"translateX(".concat(n,"px)"),marginBottom:"-".concat(r,"px")},{opacity:1,transform:"translateX(0px)"}];if(e==="top-left")return[{opacity:0,transform:"translateX(-".concat(n,"px)")},{opacity:1,transform:"translateX(0px)"}];if(e==="bottom-left")return[{opacity:0,transform:"translateX(-".concat(n,"px)"),marginBottom:"-".concat(r,"px")},{opacity:1,transform:"translateX(0px)"}]},c1e=function(e,n,r){if(!a3.includes(e))return null;if(e==="top-right")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(".concat(n,"px)"),marginBottom:"-".concat(r,"px")}];if(e==="bottom-right")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(".concat(n,"px)")}];if(e==="top-left")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(-".concat(n,"px)"),marginBottom:"-".concat(r,"px")}];if(e==="bottom-left")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(-".concat(n,"px)")}]};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function l3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function s3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var c3=l.defineComponent({name:"TNotification",props:s3(s3({},i1e),{},{placement:String}),setup:function(e,n){var r=n.slots,a=n.expose,i=ve("notification"),o=Qe("classPrefix"),s=o.classPrefix,c=St({InfoCircleFilledIcon:kd,CheckCircleFilledIcon:so,CloseIcon:Za}),u=c.InfoCircleFilledIcon,d=c.CheckCircleFilledIcon,f=c.CloseIcon,h=We(),v=Ut(),p=l.ref(null),g=l.ref(null),m=function(_){var O=g.value;o3(O,e.placement,function(){var N;(N=e.onCloseBtnClick)===null||N===void 0||N.call(e,{e:_})})},y=function(){var _;if(e.icon===!1)return null;if(Re(e.icon))_=e.icon(l.h);else if(r.icon)_=r.icon(null);else if(e.theme){var O=e.theme==="success"?l.createVNode(d,{class:"".concat(s.value,"-is-").concat(e.theme)},null):l.createVNode(u,{class:"".concat(s.value,"-is-").concat(e.theme)},null);_=l.createVNode("div",{class:"".concat(s.value,"-notification__icon")},[O])}return _},b=function(){var _=l.createVNode(f,null,null);return l.createVNode("span",{class:"".concat(s.value,"-message__close"),onClick:m},[h("closeBtn",_)])},w=function(){return l.createVNode("div",{class:"".concat(i.value,"__content")},[v("default","content")])},x=function(){e.duration&&clearTimeout(p.value)},C=function(){e.duration&&(p.value=Number(setTimeout(function(){x();var _=g.value;o3(_,e.placement,function(){var O;(O=e.onDurationEnd)===null||O===void 0||O.call(e)})},e.duration)))};return l.onBeforeMount(function(){e.duration&&C()}),l.onMounted(function(){var S=g.value;l1e(S,e.placement)}),a({close:m}),function(){return l.createVNode("div",{ref:g,class:"".concat(i.value),onMouseenter:x,onMouseleave:C},[y(),l.createVNode("div",{class:"".concat(i.value,"__main")},[l.createVNode("div",{class:"".concat(i.value,"__title__wrap")},[l.createVNode("span",{class:"".concat(i.value,"__title")},[h("title")]),b()]),w(),h("footer")])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function u3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var u1e=l.defineComponent({props:{placement:{type:String,default:"top-right",validator:function(e){return["top-left","top-right","bottom-left","bottom-right"].indexOf(e)>-1}}},setup:function(e,n){var r=n.expose,a=ve("notification-list"),i=e.placement,o=l.ref([]),s=l.ref([]),c=l.computed(function(){return r1({zIndex:o1e},r3[i])}),u=function(y){return o.value.push(y),o.value.length-1},d=function(y){o.value.splice(y,1)},f=function(){o.value=[]},h=function(y){if(y)return isNaN(Number(y))?y:"".concat(y,"px")},v=function(y){var b={marginBottom:Po};return y.offset&&(b.position="relative",b.left=h(y.offset[0]),b.top=h(y.offset[1])),y.zIndex&&(b["z-index"]=y.zIndex),b},p=function(y,b){return r1(r1({},b),{},{onCloseBtnClick:function(x){return b.onCloseBtnClick&&b.onCloseBtnClick(x),d(y)},onDurationEnd:function(){return b.onDurationEnd&&b.onDurationEnd(),d(y)}})},g=function(y){y&&s.value.push(y)};return r({add:u,remove:d,removeAll:f,list:o,notificationList:s}),function(){if(o.value.length)return l.createVNode("div",{class:"".concat(a.value,"__show"),style:c.value},[o.value.map(function(m,y){return l.createVNode(c3,l.mergeProps({ref:g,key:m.id,style:v(m)},p(y,m)),null)})])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function d3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function a1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var f3=0,nu=new Map,d1e=function(e){f3+=1;var n=a1({placement:"top-right",zIndex:6e3,attach:"body",id:f3},e);n.content=e.content?e.content:"";var r=dc(n.attach);nu.get(r)||nu.set(r,{});var a=nu.get(r)[n.placement];if(a)a.add(n);else{var i=document.createElement("div"),o=l.createApp(u1e,{placement:n.placement}).mount(i);o.add(n),nu.get(r)[n.placement]=o,a=o,r.appendChild(o.$el)}return new Promise(function(s){var c=nu.get(r)[n.placement];l.nextTick(function(){var u=c.notificationList;s(u==null?void 0:u.find(function(d){var f;return((f=d.$)===null||f===void 0||(f=f.vnode)===null||f===void 0?void 0:f.key)===n.id}))})})},ru=function(e,n){var r=a1(a1({},n),{},{theme:e});return d1e(r)},Xp={info:function(e){return ru("info",e)},success:function(e){return ru("success",e)},warning:function(e){return ru("warning",e)},error:function(e){return ru("error",e)},close:function(e){e.then(function(n){return n.close()})},closeAll:function(){nu.forEach(function(e){Object.keys(e).forEach(function(n){e[n].removeAll()})})}},fs=ru;fs.install=function(t){t.config.globalProperties.$notify=ru,Object.keys(Xp).forEach(function(e){t.config.globalProperties.$notify[e]=Xp[e]})},Object.keys(Xp).forEach(function(t){fs[t]=Xp[t]});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var f1e=Be(c3);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var h1e={cancelBtn:{type:[String,Object,Function],default:""},confirmBtn:{type:[String,Object,Function],default:""},content:{type:[String,Function]},default:{type:[String,Function]},destroyOnClose:{type:Boolean,default:!0},icon:{type:Function},placement:{type:String,default:"top",validator:function(e){return e?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(e):!0}},popupProps:{type:Object},showArrow:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(e){return e?["default","warning","danger"].includes(e):!0}},triggerElement:{type:[String,Function]},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,onCancel:Function,onConfirm:Function,onVisibleChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function h3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function v1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var p1e=l.defineComponent({name:"TPopconfirm",props:h1e,setup:function(e){var n=Qe("popconfirm"),r=n.globalConfig,a=ve("popconfirm"),i=St({InfoCircleFilledIcon:kd,ErrorCircleFilledIcon:ki}),o=i.InfoCircleFilledIcon,s=i.ErrorCircleFilledIcon,c=l.toRefs(e),u=c.visible,d=c.modelValue,f=Mt(u,d,e.defaultVisible,e.onVisibleChange,"visible"),h=$e(f,2),v=h[0],p=h[1],g=function(T){var k;(k=e.onConfirm)===null||k===void 0||k.call(e,{e:T}),p(!1,{e:T,trigger:"confirm"})},m=function(T){var k;(k=e.onCancel)===null||k===void 0||k.call(e,{e:T}),p(!1,{e:T,trigger:"cancel"})},y=_b({confirmBtnAction:g,cancelBtnAction:m}),b=y.getConfirmBtn,w=y.getCancelBtn,x=We(),C=l.computed(function(){return v1e({showArrow:e.showArrow,overlayClassName:a.value,trigger:"click",destroyOnClose:e.destroyOnClose,placement:e.placement},e.popupProps)}),S=Qa(),_=function(){var T=w({cancelBtn:e.cancelBtn,globalCancel:r.value.cancel,className:"".concat(a.value,"__cancel"),size:"small"}),k=b({theme:e.theme,confirmBtn:e.confirmBtn,globalConfirm:r.value.confirm,globalConfirmBtnTheme:r.value.confirmBtnTheme,className:"".concat(a.value,"__confirm"),size:"small"}),E=function(){var A={default:o,warning:s,danger:s}[e.theme],M=e.theme||"default";return S("icon",l.createVNode(A,{class:"".concat(a.value,"__icon--").concat(M)},null))};return l.createVNode("div",{class:"".concat(a.value,"__content")},[l.createVNode("div",{class:"".concat(a.value,"__body")},[E(),l.createVNode("div",{class:"".concat(a.value,"__inner")},[x("content")])]),!!(T||k)&&l.createVNode("div",{class:"".concat(a.value,"__buttons")},[T,k])])},O=function(T,k){p(T,k)},N=Ut();return function(){return l.createVNode(sa,l.mergeProps({visible:v.value},C.value,{onVisibleChange:O}),{default:function(){return[N("default","triggerElement")]},content:_})}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var g1e=Be(p1e);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var m1e={abridgeName:{type:Array},accept:{type:String,default:""},action:{type:String,default:""},allowUploadDuplicateFile:Boolean,autoUpload:{type:Boolean,default:!0},beforeAllFilesUpload:{type:Function},beforeUpload:{type:Function},cancelUploadButton:{type:[Object,Function]},data:{type:[Object,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},dragContent:{type:[String,Function]},draggable:{type:Boolean,default:void 0},fileListDisplay:{type:Function},files:{type:Array,default:void 0},defaultFiles:{type:Array,default:function(){return[]}},format:{type:Function},formatRequest:{type:Function},formatResponse:{type:Function},headers:{type:Object},imageViewerProps:{type:Object},inputAttributes:{type:Object},isBatchUpload:Boolean,locale:{type:Object},max:{type:Number,default:0},method:{type:String,default:"POST",validator:function(e){return e?["POST","GET","PUT","OPTION","PATCH","post","get","put","option","patch"].includes(e):!0}},mockProgressDuration:{type:Number},multiple:Boolean,name:{type:String,default:"file"},placeholder:{type:String,default:""},requestMethod:{type:Function},showImageFileName:{type:Boolean,default:!0},showThumbnail:Boolean,showUploadProgress:{type:Boolean,default:!0},sizeLimit:{type:[Number,Object]},status:{type:String,validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},theme:{type:String,default:"file",validator:function(e){return e?["custom","file","file-input","file-flow","image","image-flow"].includes(e):!0}},tips:{type:[String,Function]},trigger:{type:Function},triggerButtonProps:{type:Object},uploadAllFilesInOneRequest:Boolean,uploadButton:{type:[Object,Function]},uploadPastedFiles:{type:Boolean,default:!0},useMockProgress:{type:Boolean,default:!0},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},withCredentials:Boolean,onCancelUpload:Function,onChange:Function,onDragenter:Function,onDragleave:Function,onDrop:Function,onFail:Function,onOneFileFail:Function,onOneFileSuccess:Function,onPreview:Function,onProgress:Function,onRemove:Function,onSelectChange:Function,onSuccess:Function,onValidate:Function,onWaitingUploadFilesChange:Function};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var vf={accept:String,files:Array,toUploadFiles:Array,displayFiles:Array,theme:String,abridgeName:Array,placeholder:String,classPrefix:String,tips:[String,Function],status:String,locale:Object,sizeOverLimitMessage:String,autoUpload:Boolean,uploadPastedFiles:Boolean,onPasteFileChange:Function,disabled:Boolean,uploading:Boolean,tipsClasses:[String,Array,Object],errorClasses:[String,Array,Object],placeholderClass:[String,Array,Object],showUploadProgress:Boolean,default:Function,fileListDisplay:Function,onRemove:Function,imageViewerProps:Object};/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function v3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function y1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b1e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var w1e=l.defineComponent({name:"UploadNormalFile",props:y1e({multiple:Boolean},vf),setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.theme,o=a.disabled,s=a.classPrefix,c=l.computed(function(){return e.locale}),u=St({CloseIcon:Za,TimeFilledIcon:YT,CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki,CloseCircleFilledIcon:gc}),d=u.CloseIcon,f=u.TimeFilledIcon,h=u.CheckCircleFilledIcon,v=u.ErrorCircleFilledIcon,p=u.CloseCircleFilledIcon,g=We(),m="".concat(s.value,"-upload"),y=function(C){return l.createVNode("div",{class:"".concat(m,"__single-progress")},[l.createVNode(lr,null,null),e.showUploadProgress&&l.createVNode("span",{class:"".concat(m,"__single-percent")},[C||0,"%"])])},b=function(C){var S;return i.value!=="file"||!e.multiple&&((S=C[0])===null||S===void 0?void 0:S.status)==="fail"&&e.autoUpload?null:C.map(function(_,O){var N=e.abridgeName&&_.name?_c.apply(void 0,[_.name].concat(Ee(e.abridgeName))):_.name;return l.createVNode("div",{class:"".concat(m,"__single-display-text ").concat(m,"__display-text--margin"),key:_.name+O+_.percent+_.status},[_.url?l.createVNode(fv,{href:_.url,target:"_blank",hover:"color",size:"small",class:"".concat(m,"__single-name"),disabled:!1},b1e(N)?N:{default:function(){return[N]}}):l.createVNode("span",{class:"".concat(m,"__single-name")},[N]),_.status==="fail"&&l.createVNode("div",{class:"".concat(m,"__flow-status ").concat(m,"__file-fail")},[l.createVNode(v,null,null)]),_.status==="waiting"&&l.createVNode("div",{class:"".concat(m,"__flow-status ").concat(m,"__file-waiting")},[l.createVNode(f,null,null)]),_.status==="progress"&&y(_.percent),!o.value&&_.status!=="progress"&&l.createVNode(d,{class:"".concat(m,"__icon-delete"),onClick:function(T){var k=T.e;return e.onRemove({e:k,file:_,index:O})}},null)])})},w=function(){var C;if(i.value==="file-input"){var S=e.displayFiles[0]||[],_=["".concat(s.value,"-input__inner"),V({},"".concat(m,"__placeholder"),!e.displayFiles[0])],O=o.value?"".concat(s.value,"-is-disabled"):"",N=(C=e.abridgeName)!==null&&C!==void 0&&C.length&&S!==null&&S!==void 0&&S.name?_c.apply(void 0,[S.name].concat(Ee(e.abridgeName))):S==null?void 0:S.name;return l.createVNode("div",{class:"".concat(m,"__single-input-preview ").concat(s.value,"-input ").concat(O)},[l.createVNode("div",{class:_},[l.createVNode("span",{class:["".concat(m,"__single-input-text"),V({},e.placeholderClass,e.placeholder&&!(S!=null&&S.name))]},[S!=null&&S.name?N:e.placeholder]),(S==null?void 0:S.status)==="progress"&&y(S.percent),(S==null?void 0:S.status)==="waiting"&&l.createVNode(f,{class:"".concat(m,"__status-icon ").concat(m,"__file-waiting")},null),S.status==="success"&&l.createVNode(h,{class:"".concat(m,"__status-icon")},null),(S==null?void 0:S.name)&&S.status==="fail"&&l.createVNode(v,{class:"".concat(m,"__status-icon ").concat(m,"__file-fail")},null),!!(!o.value&&S.name)&&l.createVNode(p,{class:"".concat(m,"__single-input-clear"),onClick:function(T){var k=T.e;return e.onRemove({e:k,file:S,index:0})}},null)])])}};return function(){var x,C,S,_=["".concat(m,"__single"),"".concat(m,"__single-").concat(i.value)],O=g("fileListDisplay",{params:{onRemove:e.onRemove,toUploadFiles:e.toUploadFiles,sizeOverLimitMessage:e.sizeOverLimitMessage,locale:e.locale,files:e.displayFiles}});(e.fileListDisplay===null||O===null)&&(O=null);var N=e.displayFiles;return l.createVNode("div",{class:_},[i.value==="file-input"&&w(),(x=r.default)===null||x===void 0?void 0:x.call(r),i.value==="file"&&e.placeholder&&!N[0]&&l.createVNode("small",{class:[e.tipsClasses,e.placeholderClass]},[e.placeholder]),O===null?null:O||b(N),!e.multiple&&((C=N[0])===null||C===void 0?void 0:C.status)==="fail"&&i.value==="file"?l.createVNode("small",{class:[e.errorClasses,e.placeholderClass]},[((S=N[0].response)===null||S===void 0?void 0:S.error)||c.value.progress.failText]):null])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function i1(t,e){var n=l.ref(null),r=l.ref(!1),a=function(u){var d;u.preventDefault(),r.value=!1;var f=u.dataTransfer.files,h=hO(f,e.value);if((d=t.onDrop)===null||d===void 0||d.call(t,{e:u}),h!=null&&h.length){var v;(v=t.onDragFileChange)===null||v===void 0||v.call(t,h)}},i=function(u){var d;u.preventDefault(),n.value=u.target,(d=t.onDragenter)===null||d===void 0||d.call(t,{e:u}),r.value=!0},o=function(u){var d;u.target===n.value&&(u.preventDefault(),(d=t.onDragleave)===null||d===void 0||d.call(t,{e:u}),r.value=!1)},s=function(u){u.preventDefault()};return{target:n,dragActive:r,handleDrop:a,handleDragenter:i,handleDragleave:o,handleDragover:s}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function p3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function g3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var x1e=l.defineComponent({name:"UploadDraggerFile",props:g3(g3({},vf),{},{trigger:Function,triggerUpload:Function,uploadFiles:Function,cancelUpload:Function,dragEvents:Object}),setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.displayFiles,o=a.disabled,s=a.accept,c=l.computed(function(){return e.locale}),u=We(),d=wv(),f=d.sizeClassNames,h="".concat(e.classPrefix,"-upload"),v=i1(e.dragEvents,s),p=v.dragActive,g=l.ref(),m=l.computed(function(){var N;return["".concat(h,"__dragger"),V({},"".concat(h,"__dragger-center"),!i.value[0]),V({},"".concat(h,"__dragger-error"),((N=i.value[0])===null||N===void 0?void 0:N.status)==="fail")]}),y=St({CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki}),b=y.CheckCircleFilledIcon,w=y.ErrorCircleFilledIcon,x=function(){var B;if(e.displayFiles.length){var T=i.value[0];if(!T)return null;var k=(T==null?void 0:T.url)||(T==null||(B=T.response)===null||B===void 0?void 0:B.url);return l.createVNode("div",{class:"".concat(h,"__dragger-img-wrap")},[l.createVNode(yp,l.mergeProps({images:[k],trigger:function(I,A){var M=A.open;return l.createVNode(Di,{src:k||T.raw,onClick:M,error:"",loading:""},null)}},e.imageViewerProps),null)])}},C=function(){if(e.displayFiles.length){var B=i.value[0];if(!B)return null;if((B==null?void 0:B.status)==="progress")return l.createVNode("div",{class:"".concat(h,"__single-progress")},[l.createVNode(lr,null,null),e.showUploadProgress&&l.createVNode("span",{class:"".concat(h,"__single-percent")},[B.percent,"%"])])}},S=function(){var B,T=i.value[0],k=e.abridgeName?_c.apply(void 0,[T.name].concat(Ee(e.abridgeName))):T.name,E=[l.createVNode("div",{class:"".concat(h,"__dragger-text"),key:"info"},[l.createVNode("span",{class:"".concat(h,"__single-name")},[k]),T.status==="progress"&&C(),T.status==="success"&&l.createVNode(b,null,null),T.status==="fail"&&l.createVNode(w,null,null)]),l.createVNode("small",{class:"".concat(f.small),key:"size"},[c.value.file.fileSizeText,"：",Xre(T.size)]),l.createVNode("small",{class:"".concat(f.small),key:"time"},[c.value.file.fileOperationDateText,"：",T.uploadTime||"-"])];return l.createVNode("div",{class:"".concat(h,"__dragger-progress")},[e.theme==="image"&&x(),l.createVNode("div",{class:"".concat(h,"__dragger-progress-info")},[u("fileListDisplay",{params:{files:e.displayFiles}})||E,l.createVNode("div",{class:"".concat(h,"__dragger-btns")},[["progress","waiting"].includes(T.status)&&!o.value&&l.createVNode(zt,{theme:"primary",variant:"text",class:"".concat(h,"__dragger-progress-cancel"),onClick:function(A){var M;return(M=e.cancelUpload)===null||M===void 0?void 0:M.call(e,{e:A,file:e.toUploadFiles[0]||e.files[0]})}},{default:function(){return[(B=c.value)===null||B===void 0?void 0:B.cancelUploadText]}}),!e.autoUpload&&T.status==="waiting"&&l.createVNode(zt,{theme:"primary",variant:"text",disabled:o.value,onClick:function(){var A;return(A=e.uploadFiles)===null||A===void 0?void 0:A.call(e)},class:"".concat(h,"__dragger-upload-btn")},{default:function(){return[c.value.triggerUploadText.normal]}})]),["fail","success"].includes(T==null?void 0:T.status)&&!o.value&&l.createVNode("div",{class:"".concat(h,"__dragger-btns")},[l.createVNode(zt,{theme:"primary",variant:"text",disabled:o.value,class:"".concat(h,"__dragger-progress-cancel"),onClick:e.triggerUpload},{default:function(){return[c.value.triggerUploadText.reupload]}}),l.createVNode(zt,{theme:"danger",variant:"text",disabled:o.value,class:"".concat(h,"__dragger-delete-btn"),onClick:function(A){return e.onRemove({e:A,index:0,file:T})}},{default:function(){return[c.value.triggerUploadText.delete]}})])])])},_=function(){var B,T=l.createVNode("div",null,[l.createVNode("span",{class:"".concat(h,"--highlight")},[(B=c.value.triggerUploadText)===null||B===void 0?void 0:B.normal]),l.createVNode("span",null,["  /  ",c.value.dragger.draggingText])]),k=l.createVNode("div",null,[c.value.dragger.dragDropText]);return p.value?k:T},O=function(){var B,T=i.value[0];return T&&(["progress","success","fail","waiting"].includes(T.status)||!T.status)?S():l.createVNode("div",{class:"".concat(h,"__trigger"),onClick:e.triggerUpload},[((B=r.default)===null||B===void 0?void 0:B.call(r))||_()])};return function(){var N;return l.createVNode("div",{ref:g,class:m.value,onDrop:v.handleDrop,onDragenter:v.handleDragenter,onDragover:v.handleDragover,onDragleave:v.handleDragleave},[((N=e.trigger)===null||N===void 0?void 0:N.call(e,l.h,{files:i.value,dragActive:p.value}))||O()])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function m3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function y3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C1e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var _1e=l.defineComponent({name:"UploadImageCard",props:y3(y3({},vf),{},{multiple:Boolean,max:Number,disabled:Boolean,showUploadProgress:Boolean,triggerUpload:Function,uploadFiles:Function,cancelUpload:Function,onPreview:Function,showImageFileName:Boolean}),setup:function(e){var n=l.toRefs(e),r=n.displayFiles,a=n.classPrefix,i=n.multiple,o=n.max,s=l.computed(function(){return e.locale}),c=St({AddIcon:uv,BrowseIcon:W0,DeleteIcon:q0,ErrorCircleFilledIcon:ki}),u=c.BrowseIcon,d=c.DeleteIcon,f=c.AddIcon,h=c.ErrorCircleFilledIcon,v=We(),p=l.computed(function(){var b;return i.value?!o.value||r.value.length<o.value:!((b=r.value)!==null&&b!==void 0&&b[0])}),g=function(w,x){return l.createVNode("div",{class:"".concat(a.value,"-upload__card-content ").concat(a.value,"-upload__card-box")},[l.createVNode(Di,{class:"".concat(a.value,"-upload__card-image"),src:w.url||w.raw,error:"",fit:"contain"},null),l.createVNode("div",{class:"".concat(a.value,"-upload__card-mask")},[l.createVNode("span",{class:"".concat(a.value,"-upload__card-mask-item"),onClick:function(S){return S.stopPropagation()}},[l.createVNode(yp,l.mergeProps({images:r.value.map(function(C){return C.url||C.raw}),defaultIndex:x,trigger:function(S,_){var O=_.open;return l.createVNode(u,{onClick:function(B){var T,k=B.e;(T=e.onPreview)===null||T===void 0||T.call(e,{file:w,index:x,e:k}),O()}},null)}},e.imageViewerProps),null)]),!e.disabled&&l.createVNode(l.Fragment,null,[l.createVNode("span",{class:"".concat(a.value,"-upload__card-mask-item-divider")},null),l.createVNode("span",{class:"".concat(a.value,"-upload__card-mask-item"),onClick:function(S){return S.stopPropagation()}},[l.createVNode(d,{onClick:function(S){var _,O=S.e;return e==null||(_=e.onRemove)===null||_===void 0?void 0:_.call(e,{e:O,file:w,index:x})}},null)])])])])},m=function(w,x){var C;return l.createVNode("div",{class:[x,"".concat(a.value,"-upload__").concat(e.theme,"-").concat(w.status)]},[l.createVNode(lr,{loading:!0,size:"medium"},null),l.createVNode("p",null,[(C=s.value)===null||C===void 0||(C=C.progress)===null||C===void 0?void 0:C.uploadingText,e.showUploadProgress?" ".concat(w.percent,"%"):""])])},y=function(w,x,C){var S,_;return l.createVNode("div",{class:C},[l.createVNode(h,null,null),l.createVNode("p",null,[((S=w.response)===null||S===void 0?void 0:S.error)||((_=s.value)===null||_===void 0||(_=_.progress)===null||_===void 0?void 0:_.failText)]),l.createVNode("div",{class:"".concat(a.value,"-upload__card-mask")},[l.createVNode("span",{class:"".concat(a.value,"-upload__card-mask-item"),onClick:function(N){return N.stopPropagation()}},[l.createVNode(d,{onClick:function(N){var B,T=N.e;return e==null||(B=e.onRemove)===null||B===void 0?void 0:B.call(e,{e:T,file:w,index:x})}},null)])])])};return function(){var b,w,x=v("fileListDisplay",{params:{triggerUpload:e.triggerUpload,uploadFiles:e.uploadFiles,cancelUpload:e.cancelUpload,onPreview:e.onPreview,onRemove:e.onRemove,toUploadFiles:e.toUploadFiles,sizeOverLimitMessage:e.sizeOverLimitMessage,locale:e.locale,files:r.value}});if(x)return x;var C="".concat(a.value,"-upload__card-item ").concat(a.value,"-is-background");return l.createVNode("div",null,[l.createVNode("ul",{class:"".concat(a.value,"-upload__card")},[(b=r.value)===null||b===void 0?void 0:b.map(function(S,_){var O="".concat(a.value,"-upload__card-name"),N="".concat(a.value,"-upload__card-container ").concat(a.value,"-upload__card-box"),B=e.abridgeName?_c.apply(void 0,[S.name].concat(Ee(e.abridgeName))):S.name;return l.createVNode("li",{class:C,key:_},[S.status==="progress"&&m(S,N),S.status==="fail"&&y(S,_,N),!["progress","fail"].includes(S.status)&&g(S,_),!!(B&&e.showImageFileName)&&(S.url?l.createVNode(fv,{href:S.url,class:O,target:"_blank",hover:"color",size:"small",disabled:!1},C1e(B)?B:{default:function(){return[B]}}):l.createVNode("span",{class:O},[B]))])}),p.value&&l.createVNode("li",{class:C,onClick:e.triggerUpload},[l.createVNode("div",{class:["".concat(a.value,"-upload__image-add"),"".concat(a.value,"-upload__card-container"),"".concat(a.value,"-upload__card-box"),V({},"".concat(a.value,"-is-disabled"),e.disabled)]},[l.createVNode(f,null,null),l.createVNode("p",{class:["".concat(a.value,"-size-s"),"".concat(a.value,"-upload__add-text")]},[(w=s.value)===null||w===void 0||(w=w.triggerUploadText)===null||w===void 0?void 0:w.image])])])])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function b3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function w3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S1e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!l.isVNode(t)}var T1e=l.defineComponent({name:"UploadMultipleFlowList",props:w3(w3({},vf),{},{showThumbnail:Boolean,uploadFiles:Function,cancelUpload:Function,dragEvents:Object,disabled:Boolean,isBatchUpload:Boolean,draggable:Boolean,showImageFileName:Boolean,uploadButton:Object,cancelUploadButton:Object,onPreview:Function}),setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.uploading,o=a.disabled,s=a.displayFiles,c=a.classPrefix,u=a.accept,d=l.computed(function(){return"".concat(c.value,"-upload")}),f=l.computed(function(){return e.locale}),h=We(),v=St({BrowseIcon:W0,DeleteIcon:q0,CheckCircleFilledIcon:so,ErrorCircleFilledIcon:ki,TimeFilledIcon:YT,FileExcelIcon:eee,FilePdfIcon:nee,FileWordIcon:oee,FilePowerpointIcon:aee,FileIcon:see,VideoIcon:$ee}),p=v.BrowseIcon,g=v.DeleteIcon,m=v.CheckCircleFilledIcon,y=v.ErrorCircleFilledIcon,b=v.TimeFilledIcon,w=v.FileExcelIcon,x=v.FilePdfIcon,C=v.FileWordIcon,S=v.FilePowerpointIcon,_=v.FileIcon,O=v.VideoIcon,N=i1(e.dragEvents,u),B=l.ref([]),T=l.ref(0),k=l.computed(function(){return i.value?"".concat(f.value.progress.uploadingText):f.value.triggerUploadText.normal}),E=l.computed(function(){var Y=e.draggable===void 0?!0:e.draggable;return Y?{onDrop:N.handleDrop,onDragenter:N.handleDragenter,onDragover:N.handleDragover,onDragleave:N.handleDragleave}:{}}),I=function(){var D={success:l.createVNode(m,null,null),fail:l.createVNode(y,null,null),progress:l.createVNode(lr,null,null),waiting:l.createVNode(b,null,null)},q=f.value.progress,z={success:q==null?void 0:q.successText,fail:q==null?void 0:q.failText,progress:q==null?void 0:q.uploadingText,waiting:q==null?void 0:q.waitingText};return{iconMap:D,textMap:z}},A=function(){return l.createVNode("div",{class:"".concat(d.value,"__flow-empty")},[N.dragActive.value?f.value.dragger.dragDropText:f.value.dragger.clickAndDragText])},M=function(D,q){var z=I(),K=z.iconMap,P=z.textMap,R=e.abridgeName&&D.name?_c.apply(void 0,[D.name].concat(Ee(e.abridgeName))):D.name;return l.createVNode("li",{class:"".concat(d.value,"__card-item"),key:D.name+q+D.percent+D.status||"0"},[l.createVNode("div",{class:["".concat(d.value,"__card-content"),V({},"".concat(c.value,"-is-bordered"),D.status!=="waiting")]},[["fail","progress"].includes(D.status)&&l.createVNode("div",{class:"".concat(d.value,"__card-status-wrap ").concat(d.value,"__").concat(e.theme,"-").concat(D.status)},[K[D.status],l.createVNode("p",null,[P[D.status],e.showUploadProgress&&D.status==="progress"?" ".concat(D.percent,"%"):""])]),(["waiting","success"].includes(D.status)||!D.status&&D.url)&&l.createVNode(Di,{class:"".concat(d.value,"__card-image"),src:D.url||D.raw,error:"",loading:"",fit:"contain"},null),l.createVNode("div",{class:"".concat(d.value,"__card-mask")},[(D.url||D.raw)&&!["progress","fail"].includes(D.status)&&l.createVNode("span",{class:"".concat(d.value,"__card-mask-item")},[l.createVNode(p,{onClick:function(ee){var re,ae=ee.e;T.value=q,B.value=s.value,(re=e.onPreview)===null||re===void 0||re.call(e,{file:D,index:q,e:ae})}},null),l.createVNode("span",{class:"".concat(d.value,"__card-mask-item-divider")},null)]),!o.value&&l.createVNode("span",{class:"".concat(d.value,"__card-mask-item ").concat(d.value,"__delete"),onClick:function(ee){return e.onRemove({e:ee,index:q,file:D})}},[l.createVNode(g,null,null)])])]),e.showImageFileName&&l.createVNode("p",{class:["".concat(d.value,"__card-name"),"".concat(d.value,"__flow-status")]},[["success","waiting"].includes(D.status)&&K[D.status],R])])},$=function(D){var q,z,K=I(),P=K.iconMap,R=K.textMap;return l.createVNode("div",{class:"".concat(d.value,"__flow-status")},[P[D.status],l.createVNode("span",{class:"".concat(d.value,"__").concat(e.theme,"-").concat(D.status)},[(q=D.response)!==null&&q!==void 0&&q.error&&((z=D.response)===null||z===void 0?void 0:z.error)||R[D.status],e.showUploadProgress&&D.status==="progress"?" ".concat(D.percent||0,"%"):""])])},U=function(D,q){var z;return l.createVNode("td",null,[l.createVNode(zt,{theme:"primary",variant:"text",content:(z=f.value)===null||z===void 0||(z=z.triggerUploadText)===null||z===void 0?void 0:z.delete,class:"".concat(d.value,"__delete"),onClick:function(P){return e.onRemove({e:P,index:q,file:D})}},null)])},F=function(D){var q;return D===0?l.createVNode("td",{rowSpan:s.value.length,class:"".concat(d.value,"__flow-table__batch-row")},[l.createVNode(zt,{theme:"primary",variant:"text",content:(q=f.value)===null||q===void 0||(q=q.triggerUploadText)===null||q===void 0?void 0:q.delete,class:"".concat(d.value,"__delete"),onClick:function(K){return e.onRemove({e:K,index:-1,file:void 0})}},null)]):null},j=function(D){return Hre.test(D)?l.createVNode(x,null,null):Wre.test(D)?l.createVNode(w,null,null):Kre.test(D)?l.createVNode(C,null,null):qre.test(D)?l.createVNode(S,null,null):uO.test(D)?l.createVNode(O,null,null):l.createVNode(_,null,null)},W=function(D){if(!D||!D.raw&&D.url)return null;var q=D.raw.type,z="".concat(d.value,"__file-thumbnail");return Ure.test(q)?l.createVNode(Di,{class:z,src:D.url||D.raw,fit:"scale-down",error:"",loading:"",onClick:function(P){var R;P.preventDefault(),B.value=[D],T.value=0,(R=e.onPreview)===null||R===void 0||R.call(e,{file:D,index:0,e:P})}},null):l.createVNode("div",{class:z},[j(q)])},H=function(){var D,q,z,K,P=h("fileListDisplay",{params:{cancelUpload:e.cancelUpload,uploadFiles:e.uploadFiles,onPreview:e.onPreview,onRemove:e.onRemove,toUploadFiles:e.toUploadFiles,sizeOverLimitMessage:e.sizeOverLimitMessage,locale:e.locale,files:e.displayFiles,dragEvents:E.value}});return P||e.fileListDisplay?P:l.createVNode("table",l.mergeProps({class:"".concat(d.value,"__flow-table")},E.value),[l.createVNode("thead",null,[l.createVNode("tr",null,[l.createVNode("th",null,[(D=f.value.file)===null||D===void 0?void 0:D.fileNameText]),l.createVNode("th",{style:{minWidth:"120px"}},[(q=f.value.file)===null||q===void 0?void 0:q.fileSizeText]),l.createVNode("th",{style:{minWidth:"120px"}},[(z=f.value.file)===null||z===void 0?void 0:z.fileStatusText]),o.value?null:l.createVNode("th",null,[(K=f.value.file)===null||K===void 0?void 0:K.fileOperationText])])]),l.createVNode("tbody",null,[!s.value.length&&l.createVNode("tr",null,[l.createVNode("td",{colSpan:4},[A()])]),s.value.map(function(R,X){var ee,re=e.isBatchUpload,ae=re&&s.value.every(function(pe){return pe.status==="success"||!pe.status})?F(X):U(R,X),oe=(ee=e.abridgeName)!==null&&ee!==void 0&&ee.length?_c.apply(void 0,[R.name].concat(Ee(e.abridgeName))):R.name,ce=e.showThumbnail?l.createVNode("div",{class:"".concat(d.value,"__file-info")},[W(R),oe]):oe,ge=R.url?l.createVNode(fv,{href:R.url,target:"_blank",hover:"color",disabled:!1},S1e(ce)?ce:{default:function(){return[ce]}}):ce;return l.createVNode("tr",{key:R.name+X+R.size},[l.createVNode("td",{class:"".concat(d.value,"__file-name"),key:R.name+R.url},[ge]),l.createVNode("td",null,[Yre(R.size)]),l.createVNode("td",null,[$(R)]),o.value?null:ae])})])])},J=function(){var D=h("fileListDisplay",{params:{cancelUpload:e.cancelUpload,uploadFiles:e.uploadFiles,onRemove:e.onRemove,onPreview:e.onPreview,toUploadFiles:e.toUploadFiles,sizeOverLimitMessage:e.sizeOverLimitMessage,locale:e.locale,files:e.displayFiles,dragEvents:E.value}});return D||e.fileListDisplay?D:l.createVNode("ul",{class:"".concat(d.value,"__card clearfix")},[e.displayFiles.map(function(q,z){return M(q,z)})])};return function(){var Y,D,q,z="".concat(d.value,"__flow-card-area"),K=o.value||!i.value,P=r.uploadButton||Re(e.uploadButton),R=!!(o.value||i.value||!s.value.length),X=r.cancelUploadButton||Re(e.cancelUploadButton);return l.createVNode("div",{class:"".concat(d.value,"__flow ").concat(d.value,"__flow-").concat(e.theme)},[l.createVNode("div",{class:"".concat(d.value,"__flow-op")},[(Y=r.default)===null||Y===void 0?void 0:Y.call(r),e.placeholder&&l.createVNode("small",{class:"".concat(d.value,"__flow-placeholder ").concat(d.value,"__placeholder")},[e.placeholder])]),e.theme==="image-flow"&&l.createVNode("div",l.mergeProps({class:z},E.value),[s.value.length?J():A()]),e.theme==="file-flow"&&(s.value.length?H():l.createVNode("div",l.mergeProps({class:z},E.value),[A()])),!e.autoUpload&&(e.uploadButton!==null||e.cancelUploadButton!==null)&&l.createVNode("div",{class:"".concat(d.value,"__flow-bottom")},[e.cancelUploadButton!==null&&(P?h("cancelUploadButton",{params:{disabled:K,cancelUploadText:(D=f.value)===null||D===void 0?void 0:D.cancelUploadText,cancelUpload:e.cancelUpload}}):l.createVNode(zt,l.mergeProps({theme:"default",disabled:K,content:(q=f.value)===null||q===void 0?void 0:q.cancelUploadText,class:"".concat(d.value,"__cancel"),onClick:function(re){var ae;return(ae=e.cancelUpload)===null||ae===void 0?void 0:ae.call(e,{e:re})}},ot(e.cancelUploadButton)?e.cancelUploadButton:{}),null)),e.uploadButton!==null&&(X?h("uploadButton",{params:{disabled:R,uploading:i.value,uploadText:k.value,uploadFiles:e.uploadFiles}}):l.createVNode(zt,l.mergeProps({disabled:R,theme:"primary",loading:i.value,class:"".concat(d.value,"__continue"),content:k.value,onClick:function(){var re;return(re=e.uploadFiles)===null||re===void 0?void 0:re.call(e)}},ot(e.uploadButton)?e.uploadButton:{}),null))]),l.createVNode(yp,l.mergeProps({images:B.value.map(function(ee){return ee.url||ee.raw}),visible:!!B.value.length,onClose:function(){B.value=[]},index:T.value,onIndexChange:function(re){return T.value=re}},e.imageViewerProps),null)])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function x3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function C3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var k1e=l.defineComponent({name:"UploadCustomFile",props:C3(C3({},vf),{},{dragEvents:Object,draggable:Boolean,dragContent:Function,trigger:Function,triggerUpload:Function,childrenNode:[String,Function]}),setup:function(e,n){var r=n.slots,a=l.toRefs(e),i=a.classPrefix,o=a.displayFiles,s=a.accept,c=i1(e.dragEvents,s),u=c.dragActive,d=Ut(),f=function(){var v,p={dragActive:u.value||!1,files:o.value};return l.createVNode("div",{class:"".concat(i.value,"-upload__dragger ").concat(i.value,"-upload__dragger-center"),onDrop:c.handleDrop,onDragenter:c.handleDragenter,onDragover:c.handleDragover,onDragleave:c.handleDragleave,onClick:e.triggerUpload},[l.createVNode("div",{class:"".concat(i.value,"-upload__trigger")},[d("dragContent","trigger",{params:p})||((v=e.childrenNode)===null||v===void 0?void 0:v.call(e,p))])])};return function(){var h,v;return l.createVNode(l.Fragment,null,[e.draggable?f():l.createVNode("div",{class:"".concat(i.value,"-upload__trigger"),onClick:e.triggerUpload},[((h=e.childrenNode)===null||h===void 0?void 0:h.call(e,{files:o.value}))||((v=r.default)===null||v===void 0?void 0:v.call(r))])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function _3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Jp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O1e(t){var e,n=t.method,r=n===void 0?"POST":n,a=t.action,i=t.withCredentials,o=i===void 0?!1:i,s=t.headers,c=s===void 0?{}:s,u=t.data,d=u===void 0?{}:u,f=t.file,h=t.files,v=h===void 0?[]:h,p=t.name,g=p===void 0?"file":p,m=t.useMockProgress,y=m===void 0?!0:m,b=t.mockProgressDuration,w=b===void 0?300:b,x=t.formatRequest,C=t.onError,S=t.onProgress,_=t.onSuccess,O=v||[],N=0,B=new XMLHttpRequest;o&&(B.withCredentials=!0);var T,k;if(y&&((e=v[0])===null||e===void 0?void 0:e.status)==="progress")var E=setTimeout(function(){T=setInterval(function(){N+10<100?(N=Math.max(N+10,N),v[0]&&N!==v[0].percent&&(v[0].percent=N,S({percent:N,file:f||O[0],files:O.map(function($){return Jp(Jp({},$),{},{percent:N})}),type:"mock",XMLHttpRequest:B}))):clearInterval(T)},w),clearTimeout(E)},w);var I={};if(d){var A=Re(d)?d(O):d;Object.assign(I,A)}O.forEach(function($,U){var F=O.length>1?"".concat(g,"[").concat(U,"]"):g;I[F]=$.raw}),O.length===1?I[g]=O[0].raw:I[g]=O.map(function($){return $.raw}),I.length=O.length,x&&(I=x(I));var M=new FormData;return Object.keys(I).forEach(function($){M.append($,I[$])}),B.open(r,a,!0),Object.keys(c).forEach(function($){B.setRequestHeader($,c[$])}),B.onerror=function($){C({event:$,file:f,files:O,XMLHttpRequest:B}),clearInterval(T),clearTimeout(k)},B.ontimeout=function($){C({event:$,file:f,files:O,XMLHttpRequest:B})},B.upload&&(B.upload.onprogress=function($){var U,F=0;if($.total>0&&(F=Math.round($.loaded/$.total*100)),N=Math.max(F,N),N!==F&&((U=O[0])===null||U===void 0?void 0:U.percent)!==N){var j=O.map(function(W){return Jp(Jp({},W),{},{percent:N})});S({event:$,percent:N,file:f||j[0],files:j,type:"real",XMLHttpRequest:B})}}),B.onload=function($){var U={};U.XMLHttpRequest=B;var F=B.status<200||B.status>=300;if(F)return C({event:$,file:f,files:O,response:U,XMLHttpRequest:B});var j=B.responseText||B.response;try{U=JSON.parse(j)}catch{U=j,st.error("Upload","response does not a valid json")}clearInterval(T),clearTimeout(k),O.forEach(function(W){var H;W.percent=100,W.status="success",W.uploadTime=((H=U)===null||H===void 0?void 0:H.uploadTime)||fO()}),wt(U)==="object"&&(U.XMLHttpRequest=B),_({event:$,file:f||O[0],files:Ee(O),XMLHttpRequest:B,response:U})},B.send(M),B.upload.requestParams=I,B.upload.requestHeaders=c,B}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function S3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E1e(t,e){var n=e.sizeLimit,r=e.beforeUpload,a=new Promise(function(c){var u=null;if(n){var d=Et(n)?{size:n,unit:"KB"}:n,f=Jre(t.size,d.size,d.unit);f&&(u=d)}c(u)}),i=[a,void 0];if(Re(r)){var o=r(t),s=o instanceof Promise?o:new Promise(function(c){return c(o)});i[1]=s}return new Promise(function(c){Promise.all(i).then(function(u){c(u)})})}function T3(t){var e=t.event,n=t.files,r=t.response,a=t.XMLHttpRequest,i=t.formatResponse,o=r;return Re(i)&&(o=i(r,{file:n[0],currentFiles:n})),n.forEach(function(s){s.status="fail",s.response=o}),{response:o,event:e,files:n,XMLHttpRequest:a}}function P1e(t){var e=t.event,n=t.files,r=t.response,a=t.XMLHttpRequest;(n==null?void 0:n.length)<=0&&st.error("Upload","Empty File in Success Callback"),n.forEach(function(o){var s;o.percent=100,o.status="success",(s=o.response)===null||s===void 0||delete s.error});var i=r;return n[0].url=i.url||n[0].url,{response:i,event:e,files:n,XMLHttpRequest:a}}function I1e(t){return t?t.status?["success","fail"].includes(t.status)?(t.status==="success"&&(!t.response||!t.response.url&&!t.response.files)&&st.warn("Upload","`requestMethodResponse.response.url` or `requestMethodResponse.response.files` is required if `status` is `success`"),!0):(st.error("Upload","`requestMethodResponse.status` must be `success` or `fail`, examples `{ status: 'success', response: { url: '' } }`"),!1):(st.error("Upload","`requestMethodResponse.status` is missing, which value only can be `success` or `fail`"),!1):(st.error("Upload","`requestMethodResponse` is required."),!1)}function k3(t){var e=t.action,n=t.toUploadFiles,r=t.requestMethod;return new Promise(function(a){if(!e&&!r){st.error("Upload","one of action and requestMethod must be exist."),a({});return}if(!n||!n.length){st.warn("Upload","No files need to be uploaded"),a({});return}if(n.forEach(function(s){s.status="progress"}),r)r(t.multiple?n:n[0]).then(function(s){if(!I1e(s)){a({});return}var c=s.response||{};Re(t.formatResponse)&&(c=t.formatResponse(c,{file:n[0],currentFiles:n})),s.status==="fail"&&(c.error=s.error||c.error);var u=[];s.status==="success"&&c.files?u=c.files.map(function(v){var p=n.find(function(g){return v.name&&g.name===v.name||v.raw&&g.raw===v.raw});return mr(mr(mr({},p),v),{},{status:s.status,response:c})}):(n.forEach(function(v){var p;v.status=s.status,v.response=c,v.url=c.url,v.percent=s.status==="success"?100:0,v.uploadTime=((p=c)===null||p===void 0?void 0:p.uploadTime)||fO()}),u=n);var d={response:c,file:u[0],files:u};if(s.status==="success"){var f;(f=t.onResponseSuccess)===null||f===void 0||f.call(t,d)}else if(s.status==="fail"){var h;(h=t.onResponseError)===null||h===void 0||h.call(t,d)}a({status:s.status,data:d})});else{var i,o=O1e({action:t.action,files:t.toUploadFiles,useMockProgress:t.useMockProgress,mockProgressDuration:t.mockProgressDuration,onError:function(c){var u,d=T3(mr(mr({},c),{},{formatResponse:t.formatResponse}));(u=t.onResponseError)===null||u===void 0||u.call(t,d),a({status:"fail",data:d})},onProgress:t.onResponseProgress,onSuccess:function(c){var u=t.formatResponse,d=c.response;if(Re(u)&&(d=u(c.response,{file:c.file,currentFiles:c.files})),d.error){var f,h=T3(mr(mr({},c),{},{response:d}));(f=t.onResponseError)===null||f===void 0||f.call(t,h),a({status:"fail",data:h})}else{var v;c.file.response=d,c.files[0].response=d;var p=P1e(mr(mr({},c),{},{response:d}));(v=t.onResponseSuccess)===null||v===void 0||v.call(t,p),a({status:"success",data:p})}},formatRequest:t.formatRequest,data:t.data,name:t.name,headers:t.headers,withCredentials:t.withCredentials,method:t.method});(i=t.setXhrObject)===null||i===void 0||i.call(t,{files:t.toUploadFiles,xhrReq:o})}})}function A1e(t,e){for(var n=t.filter(function(s){return s.url}),r=n,a=function(){var c=e[i],u=t.findIndex(function(f){return f.raw&&f.raw===c.raw||f.name&&f.name===c.name}),d=u>=0?mr(mr({},t[u]),c):c;r.push(d)},i=0,o=e.length;i<o;i++)a();return r}function N1e(t){var e=t.uploadAllFilesInOneRequest,n=t.toUploadFiles,r=t.uploadedFiles,a=t.isBatchUpload,i=n.filter(function(o){return!o.response||o.response&&!o.response.error});return new Promise(function(o){if(e||!t.multiple){k3(t).then(function(c){c.status==="success"&&(c.data.files=a||!t.multiple?c.data.files:A1e(r,c.data.files));var u=c.status==="fail"?c.data.files:[];o(mr(mr({},c),{},{failedFiles:u}))});return}var s=i.map(function(c){return k3(mr(mr({},t),{},{toUploadFiles:[c]}))});Promise.all(s).then(function(c){var u=[],d=[];c.forEach(function(v){v.status==="success"?u.push(v.data.files[0]):v.status==="fail"&&d.push(v.data.files[0])});var f=t.autoUpload?r.concat(u):r,h=a||!t.multiple?u:f;o({status:u.length?"success":"fail",data:{files:h},failedFiles:d,list:c})})})}function o1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return t.map(function(a){var i=a;Re(e)&&(i=e(a));var o=mr({raw:a,lastModified:a.lastModified,name:a.name,size:a.size,type:a.type,percent:r,status:n},i);return o})}function D1e(t){var e=t.files,n=t.uploadValue,r=t.max,a=t.allowUploadDuplicateFile;return new Promise(function(i){var o=e.filter(function(m){var y=n.find(function(b){return b.name===m.name});return a||!y}),s=!1;if(o.length<e.length&&(s=!0),!o.length){var c=o1(e,t.format,t.autoUpload?"progress":"waiting");i({hasSameNameFile:s,file:c==null?void 0:c[0],files:c,validateResult:{type:"FILTER_FILE_SAME_NAME"}});return}var u=!1;if(r&&o.length&&!t.isBatchUpload){var d=o.length;o=o.slice(0,r-n.length),d+n.length>r&&(u=!0)}var f=o1(o,t.format,t.autoUpload?"progress":"waiting"),h;if(t.beforeAllFilesUpload){var v,p=(v=t.beforeAllFilesUpload)===null||v===void 0?void 0:v.call(t,f);h=p instanceof Promise?p:new Promise(function(m){return m(p)})}var g=f.map(function(m){return new Promise(function(y){E1e(m,{beforeUpload:t.beforeUpload,sizeLimit:t.sizeLimit}).then(function(b){var w=$e(b,2),x=w[0],C=w[1];x?y({file:m,validateResult:{type:"FILE_OVER_SIZE_LIMIT",extra:x}}):C===!1&&y({file:m,validateResult:{type:"CUSTOM_BEFORE_UPLOAD"}}),y({file:m})})})});Promise.all([h].concat(g)).then(function(m){var y=ID(m),b=y[0],w=y.slice(1);i(b===!1?{lengthOverLimit:u,hasSameNameFile:s,validateResult:{type:"BEFORE_ALL_FILES_UPLOAD"},files:f}:{lengthOverLimit:u,hasSameNameFile:s,fileValidateList:w,files:f})})})}function R1e(t,e){var n=[],r=[],a=[];return t.forEach(function(i){var o,s;if(((o=i.validateResult)===null||o===void 0?void 0:o.type)==="CUSTOM_BEFORE_UPLOAD"){r.push(i.file);return}if(((s=i.validateResult)===null||s===void 0?void 0:s.type)==="FILE_OVER_SIZE_LIMIT"){i.file.response||(i.file.response={}),i.file.response.error=i.file.response.error||e(i.validateResult.extra),n.push(i);return}a.push(i.file)}),{sizeLimitErrors:n,beforeUploadErrorFiles:r,toFiles:a}}function M1e(t){return t.isBatchUpload&&t.status||t.status==="fail"?"reupload":t.status==="progress"?"uploading":t.status==="success"||!t.autoUpload&&t.status==="waiting"?t.multiple?"continueUpload":"reupload":"fileInput"}function L1e(t){var e=t.multiple,n=t.uploadValue,r=t.toUploadFiles,a=t.autoUpload,i=a?r:r.filter(function(o){return o.status!=="success"});return e&&!t.isBatchUpload?a?(i.length?n.concat(i):n)||[]:n:(i.length?i:n)||[]}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function O3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Qp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F1e(t){var e=l.ref(),n=l.toRefs(t),r=n.disabled,a=n.autoUpload,i=n.isBatchUpload,o=n.multiple,s=n.files,c=n.modelValue,u=n.defaultFiles,d=Qe("upload"),f=d.globalConfig,h=d.t,v=d.classPrefix,p=Mt(s,c,u.value,t.onChange,"files"),g=$e(p,2),m=g[0],y=g[1],b=l.ref([]),w=l.ref([]),x=l.ref(""),C=l.computed(function(){return Wh({},f.value,t.locale)}),S="".concat(v.value,"-upload__tips ").concat(v.value,"-size-s"),_=[S].concat("".concat(v.value,"-upload__tips-error")),O="".concat(v.value,"-upload__placeholder"),N=l.computed(function(){var z,K=M1e({isBatchUpload:i.value,multiple:o.value,status:(z=m.value)===null||z===void 0||(z=z[0])===null||z===void 0?void 0:z.status,autoUpload:a.value});return C.value.triggerUploadText[K]}),B=l.ref(!1),T=l.computed(function(){return L1e({multiple:t.multiple,toUploadFiles:w.value,uploadValue:m.value,autoUpload:a.value,isBatchUpload:i.value})}),k=function(K){var P=K.file,R=K.percent,X=a.value?w:m,ee=X.value.findIndex(function(re){return P.raw===re.raw});X.value[ee]=Qp(Qp({},X.value[ee]),{},{percent:R})},E=function(){t.autoUpload&&(w.value=Ee(w.value))},I=function(K){var P;if(!(!K||!K.files||!K.files[0])){var R=K.response,X=K.event,ee=K.files;E(),(P=t.onOneFileFail)===null||P===void 0||P.call(t,{e:X,file:ee==null?void 0:ee[0],currentFiles:ee,failedFiles:ee,response:R}),(!t.multiple||t.isBatchUpload)&&y([],{trigger:"progress-fail",e:K.event,file:K.files[0]})}},A=function(K){var P;E(),(P=t.onProgress)===null||P===void 0||P.call(t,{e:K.event,file:K.file,currentFiles:K.files,percent:K.percent,type:K.type,XMLHttpRequest:K.XMLHttpRequest})},M=function(K){if(t.multiple&&!t.uploadAllFilesInOneRequest){var P;E(),(P=t.onOneFileSuccess)===null||P===void 0||P.call(t,{e:K.event,file:K.files[0],response:K.response})}};function $(z){var K=z;return K.message?h(K.message,{sizeLimit:K.size}):"".concat(h(C.value.sizeLimitMessage,{sizeLimit:K.size})," ").concat(K.unit)}var U=function(K){var P=t.multiple&&!i.value?m.value.concat(K):K;P.length&&(y(P,{trigger:"add",index:m.value.length,file:K[0],files:K}),w.value=[])},F=function(K){var P;if(!r.value){var R={currentSelectedFiles:o1(Ee(K),t.format)};(P=t.onSelectChange)===null||P===void 0||P.call(t,Ee(K),R),D1e({uploadValue:m.value,files:Ee(K),allowUploadDuplicateFile:t.allowUploadDuplicateFile,max:t.multiple?t.max:0,sizeLimit:t.sizeLimit,isBatchUpload:i.value,autoUpload:a.value,format:t.format,beforeUpload:t.beforeUpload,beforeAllFilesUpload:t.beforeAllFilesUpload}).then(function(X){var ee;if(((ee=X.validateResult)===null||ee===void 0?void 0:ee.type)==="BEFORE_ALL_FILES_UPLOAD"){var re,ae={type:"BEFORE_ALL_FILES_UPLOAD",files:X.files};(re=t.onValidate)===null||re===void 0||re.call(t,ae);return}if(X.lengthOverLimit){var oe,ce={type:"FILES_OVER_LENGTH_LIMIT",files:X.files};if((oe=t.onValidate)===null||oe===void 0||oe.call(t,ce),!X.files.length)return}if(X.hasSameNameFile){var ge,pe={type:"FILTER_FILE_SAME_NAME",files:X.files};(ge=t.onValidate)===null||ge===void 0||ge.call(t,pe)}if(X.fileValidateList instanceof Array){var _e,be=R1e(X.fileValidateList,$),Se=be.sizeLimitErrors,Ne=be.beforeUploadErrorFiles,Ae=be.toFiles,Pe=a.value?Ae:w.value.concat(Ae);if(w.value=Pe,(_e=t.onWaitingUploadFilesChange)===null||_e===void 0||_e.call(t,{files:Pe,trigger:"validate"}),Se[0]){var Me;x.value=Se[0].file.response.error,(Me=t.onValidate)===null||Me===void 0||Me.call(t,{type:"FILE_OVER_SIZE_LIMIT",files:Se.map(function(ye){return ye.file})})}else if(x.value="",Ne.length){var me,ie={type:"CUSTOM_BEFORE_UPLOAD",files:Ne};(me=t.onValidate)===null||me===void 0||me.call(t,ie)}a.value?J(Pe):U(Pe)}}),e.value.value=null}},j=function(K){var P=hO(K.target.files);F==null||F(P)};function W(z){F==null||F(z)}function H(z){F==null||F(Ee(z.clipboardData.files))}function J(z){var K=m.value.filter(function(R){return R.status!=="success"}),P=a.value?z||w.value:K;!P||!P.length||(B.value=!0,b.value=[],N1e({action:t.action,headers:t.headers,method:t.method,name:t.name,withCredentials:t.withCredentials,uploadedFiles:m.value,toUploadFiles:P,multiple:t.multiple,isBatchUpload:i.value,autoUpload:t.autoUpload,uploadAllFilesInOneRequest:t.uploadAllFilesInOneRequest,useMockProgress:t.useMockProgress,data:t.data,mockProgressDuration:t.mockProgressDuration,requestMethod:t.requestMethod,formatRequest:t.formatRequest,formatResponse:t.formatResponse,onResponseProgress:A,onResponseSuccess:M,onResponseError:I,setXhrObject:function(X){var ee;(ee=X.files[0])!==null&&ee!==void 0&&ee.raw&&b.value.find(function(re){var ae;return((ae=re.files[0])===null||ae===void 0?void 0:ae.raw)===X.files[0].raw})||(b.value=b.value.concat(X))}}).then(function(R){var X=R.status,ee=R.data,re=R.list,ae=R.failedFiles;if(B.value=!1,X==="success"){var oe;y(Ee(ee.files),{trigger:"add",file:ee.files[0]}),b.value=[],(oe=t.onSuccess)===null||oe===void 0||oe.call(t,{fileList:ee.files,currentFiles:P,file:P[0],results:re==null?void 0:re.map(function(pe){return pe.data}),response:ee.response||re.map(function(pe){return pe.data.response}),XMLHttpRequest:ee.XMLHttpRequest})}else if(ae!=null&&ae[0]){var ce;(ce=t.onFail)===null||ce===void 0||ce.call(t,{e:ee.event,file:ae[0],failedFiles:ae,currentFiles:P,response:ee.response,XMLHttpRequest:ee.XMLHttpRequest})}if(a.value){var ge;w.value=ae,(ge=t.onWaitingUploadFilesChange)===null||ge===void 0||ge.call(t,{files:ae,trigger:"uploaded"})}}))}function Y(z){var K,P,R;x.value="",(K=(P=z.e).stopPropagation)===null||K===void 0||K.call(P);var X={e:z.e,trigger:"remove",index:z.index,file:z.file};if(t.isBatchUpload||!t.multiple){var ee;w.value=[],(ee=t.onWaitingUploadFilesChange)===null||ee===void 0||ee.call(t,{files:[],trigger:"remove"}),y([],X)}else if(!t.autoUpload)m.value.splice(z.index,1),y(Ee(m.value),X);else if(z.index<m.value.length)m.value.splice(z.index,1),y(Ee(m.value),X);else{var re;w.value.splice(z.index-m.value.length,1),w.value=Ee(w.value),(re=t.onWaitingUploadFilesChange)===null||re===void 0||re.call(t,{files:Ee(w.value),trigger:"remove"})}(R=t.onRemove)===null||R===void 0||R.call(t,z)}var D=function(K){var P;r.value||!e.value||(K==null||(P=K.stopPropagation)===null||P===void 0||P.call(K),e.value.click())},q=function(K){var P,R;(P=b.value)===null||P===void 0||P.forEach(function(X){var ee;(ee=X.xhrReq)===null||ee===void 0||ee.abort()}),B.value=!1,a.value?w.value=[]:y(m.value.map(function(X){return X.status!=="success"?Qp(Qp({},X),{},{status:"waiting"}):X}),{trigger:"abort"}),K!=null&&K.file&&!a.value&&(Y==null||Y({file:K.file,e:K.e,index:0})),(R=t.onCancelUpload)===null||R===void 0||R.call(t)};return{t:h,locale:C,classPrefix:v,triggerUploadText:N,toUploadFiles:w,uploadValue:m,displayFiles:T,sizeOverLimitMessage:x,uploading:B,tipsClasses:S,errorClasses:_,placeholderClass:O,inputRef:e,disabled:r,xhrReq:b,uploadFilePercent:k,uploadFiles:J,onFileChange:F,onNormalFileChange:j,onDragFileChange:W,onPasteFileChange:H,onInnerRemove:Y,triggerUpload:D,cancelUpload:q}}/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function E3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function B1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(n),!0).forEach(function(r){V(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var j1e=l.defineComponent({name:"TUpload",props:m1e,setup:function(e,n){var r=n.slots,a=n.expose,i=Ut(),o=We(),s=F1e(e),c=s.locale,u=s.classPrefix,d=s.triggerUploadText,f=s.toUploadFiles,h=s.displayFiles,v=s.uploadValue,p=s.sizeOverLimitMessage,g=s.uploading,m=s.tipsClasses,y=s.errorClasses,b=s.placeholderClass,w=s.inputRef,x=s.onInnerRemove,C=s.uploadFiles,S=s.onNormalFileChange,_=s.onDragFileChange,O=s.onPasteFileChange,N=s.triggerUpload,B=s.cancelUpload,T=s.uploadFilePercent,k=Vt(),E=St({UploadIcon:Bee}),I=E.UploadIcon,A=l.computed(function(){var D,q;return((D=e.triggerButtonProps)===null||D===void 0?void 0:D.default)||((q=e.triggerButtonProps)===null||q===void 0?void 0:q.content)||d.value});a({upload:w.value,uploading:g,triggerUpload:N,uploadFiles:C,cancelUpload:B,uploadFilePercent:T});var M=function(){var q=function(){return e.theme==="file-input"?l.createVNode(zt,l.mergeProps({disabled:k.value,variant:"outline"},e.triggerButtonProps),{default:function(){return[A.value]}}):l.createVNode(zt,l.mergeProps({disabled:k.value,variant:"outline",icon:function(){return l.createVNode(I,null,null)}},e.triggerButtonProps),{default:function(){return[A.value]}})};return i("default","trigger",{params:{dragActive:!1,files:v.value}})||q()},$=l.computed(function(){return{accept:e.accept,files:v.value,toUploadFiles:f.value,displayFiles:h.value,theme:e.theme,placeholder:e.placeholder,disabled:k.value,tips:e.tips,status:e.status,sizeOverLimitMessage:p.value,uploading:g.value,classPrefix:u.value,tipsClasses:m,errorClasses:y,placeholderClass:b,locale:c.value,autoUpload:e.autoUpload,abridgeName:e.abridgeName,showUploadProgress:e.showUploadProgress,fileListDisplay:e.fileListDisplay,onRemove:x,uploadPastedFiles:e.uploadPastedFiles,onPasteFileChange:O,imageViewerProps:e.imageViewerProps}}),U={onDragFileChange:_,onDragenter:e.onDragenter,onDragleave:e.onDragleave,onDrop:e.onDrop},F=l.computed(function(){return["".concat(u.value,"-upload"),V({},"".concat(u.value,"-upload--theme-").concat(e.theme),e.theme==="file-input")]}),j=function(){return l.createVNode(w1e,l.mergeProps($.value,{multiple:e.multiple}),{default:function(){return[l.createVNode("div",{class:"".concat(u.value,"-upload__trigger"),onClick:N},[M()])]},fileListDisplay:r.fileListDisplay,"file-list-display":r["file-list-display"]})},W=function(){return l.createVNode(x1e,l.mergeProps($.value,{dragEvents:U,trigger:e.trigger,cancelUpload:B,triggerUpload:N,uploadFiles:C,onCancelUpload:e.onCancelUpload}),{fileListDisplay:r.fileListDisplay,"file-list-display":r["file-list-display"]})},H=function(){return l.createVNode(_1e,l.mergeProps($.value,{multiple:e.multiple,max:e.max,showUploadProgress:e.showUploadProgress,triggerUpload:N,uploadFiles:C,cancelUpload:B,onPreview:e.onPreview,showImageFileName:e.showImageFileName}),{fileListDisplay:r.fileListDisplay,"file-list-display":r["file-list-display"]})},J=function(){return l.createVNode(T1e,l.mergeProps($.value,{isBatchUpload:e.isBatchUpload,draggable:e.draggable,dragEvents:U,uploadFiles:C,cancelUpload:B,onPreview:e.onPreview,showImageFileName:e.showImageFileName,showThumbnail:e.showThumbnail,uploadButton:e.uploadButton,cancelUploadButton:e.cancelUploadButton}),{default:function(){return[l.createVNode("div",{class:"".concat(u.value,"-upload__trigger"),onClick:N},[!e.draggable&&M()])]},fileListDisplay:r.fileListDisplay,"file-list-display":r["file-list-display"],uploadButton:r.uploadButton,"upload-button":r["upload-button"],cancelUploadButton:r.cancelUploadButton,"cancel-upload-button":r["cancel-upload-button"]})},Y=function(){return l.createVNode(k1e,l.mergeProps($.value,{draggable:e.draggable,dragContent:e.dragContent,dragEvents:U,triggerUpload:N,trigger:e.trigger,childrenNode:r.default}),{default:function(){return[M()]},dragContent:r.dragContent,"drag-content":r["drag-content"],trigger:r.trigger})};return function(){return l.createVNode("div",{class:F.value,onPaste:e.uploadPastedFiles?O:void 0},[l.createVNode("input",l.mergeProps({ref:w,type:"file",disabled:k.value,onChange:S,multiple:e.multiple,accept:e.accept,hidden:!0},e.inputAttributes?B1e({},e.inputAttributes):{}),null),["file","file-input"].includes(e.theme)&&!e.draggable&&j(),["file","image"].includes(e.theme)&&e.draggable&&W(),e.theme==="image"&&!e.draggable&&H(),["image-flow","file-flow"].includes(e.theme)&&J(),e.theme==="custom"&&Y(),!!(e.tips||r.tips)&&l.createVNode("small",{class:[m,V({},"".concat(u.value,"-upload__tips-").concat(e.status),e.status)]},[o("tips")]),p.value&&l.createVNode("small",{class:y},[p.value])])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var $1e=Be(j1e);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var U1e={globalConfig:Object},z1e=l.defineComponent({name:"TConfigProvider",props:U1e,setup:function(e){xX(e);var n=We();return function(){return l.createVNode(l.Fragment,null,[n("default")])}}});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var H1e=Be(z1e);/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */var l1=Object.freeze({__proto__:null,Button:zt,Icon:Y0,Link:fv,Row:vte,Col:pte,Aside:Ste,Layout:Tte,Header:kte,Footer:Ote,Content:Ete,Divider:J0,Space:Q0,Descriptions:Ute,DescriptionsItem:zte,Affix:mc,Anchor:cae,AnchorItem:uae,AnchorTarget:dae,Breadcrumb:aie,BreadcrumbItem:iie,Dropdown:hie,DropdownItem:vie,DropdownMenu:pie,Menu:Wie,HeadMenu:Kie,Submenu:qie,MenuItem:Gie,MenuGroup:Yie,Pagination:Dy,PaginationMini:fP,Steps:Vse,StepItem:ece,Tabs:ZO,TabPanel:VO,StickyItem:nce,StickyTool:rce,BackTop:oce,AutoComplete:vce,HighlightOption:pce,Cascader:rue,CascaderPanel:aue,Checkbox:Ni,CheckboxGroup:zd,DatePicker:xfe,DatePickerPanel:Cfe,DateRangePicker:_fe,DateRangePickerPanel:Sfe,Form:Bfe,FormItem:jfe,InputAdornment:uP,Input:Va,InputGroup:aoe,InputNumber:jd,Radio:hA,RadioGroup:np,RadioButton:ib,Select:Jl,Option:cP,OptionGroup:Lse,Slider:che,SliderButton:uhe,Switch:vhe,TagInput:HE,SelectInput:Ec,Textarea:xhe,Transfer:Xhe,TimePicker:Vhe,TimeRangePicker:eve,TimePickerPanel:tve,TreeSelect:npe,ColorPickerPanel:Xpe,ColorPicker:Jpe,RangeInput:vfe,RangeInputPopup:Gy,Avatar:rge,AvatarGroup:age,Badge:lge,Calendar:Ige,Card:Rge,Comment:Bge,Empty:qge,Image:Di,ImageViewer:yp,List:Pme,ListItem:Ime,ListItemMeta:Ame,Progress:Mme,Skeleton:v5,Statistic:Kme,Swiper:Jme,SwiperItem:Qme,BaseTable:Gye,PrimaryTable:Yye,EnhancedTable:Xye,Table:Qye,Tag:Iy,CheckTag:$E,CheckTagGroup:tse,Timeline:nbe,TimelineItem:rbe,Tooltip:Tr,Tree:YA,Collapse:cbe,CollapsePanel:ube,Watermark:bbe,Rate:_be,Typography:Bbe,Text:jbe,Title:$be,Paragraph:Ube,Alert:Wbe,DialogPlugin:mp,Dialog:t5,Drawer:Qbe,Guide:r1e,LoadingPlugin:U0,LoadingDirective:KS,Loading:lr,MessagePlugin:$r,Message:a1e,NotifyPlugin:fs,Notification:f1e,Popconfirm:g1e,Popup:sa,Upload:$1e,ConfigProvider:H1e});/**
 * tdesign v1.10.7
 * (c) 2025 tdesign
 * @license MIT
 */function W1e(t,e){Object.keys(l1).forEach(function(n){/directive/i.test(n)||(/plugin/i.test(n)?t.use(l1[n]):t.use(l1[n],e))})}var P3={install:W1e,version:"1.10.7"};const I3={createFolder(t){return new Promise((e,n)=>{})},deleteFolder(t){return new Promise((e,n)=>{})},saveComponent(t){return new Promise((e,n)=>{})},deleteComponent(t){return new Promise((e,n)=>{})},getTree(t){return new Promise((e,n)=>{e({code:200,data:[]})})}};function K1e(t){if(!t)throw new Error("api is required!");Object.assign(I3,t)}function q1e(){return new Proxy(I3,{get(t,e){return typeof t[e]=="function"?t[e].bind(t):(console.error(`api proxy: ${e} not found!`),function(){return new Promise((n,r)=>{r(new Error(`数据接口: ${e} 不存在，请先在插件选项中定义`))})})}})}function G1e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function N3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(n),!0).forEach(function(r){G1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function X1e(t,e){if(t==null)return{};var n=Y1e(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function J1e(t,e){return Q1e(t)||Z1e(t,e)||V1e(t,e)||ewe()}function Q1e(t){if(Array.isArray(t))return t}function Z1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function V1e(t,e){if(t){if(typeof t=="string")return D3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D3(t,e)}}function D3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ewe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function twe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function M3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R3(Object(n),!0).forEach(function(r){twe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nwe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(a,i){return i(a)},r)}}function pf(t){return function e(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return a.length>=t.length?t.apply(this,a):function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return e.apply(n,[].concat(a,s))}}}function Zp(t){return{}.toString.call(t).includes("Object")}function rwe(t){return!Object.keys(t).length}function gf(t){return typeof t=="function"}function awe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function iwe(t,e){return Zp(e)||sl("changeType"),Object.keys(e).some(function(n){return!awe(t,n)})&&sl("changeField"),e}function owe(t){gf(t)||sl("selectorType")}function lwe(t){gf(t)||Zp(t)||sl("handlerType"),Zp(t)&&Object.values(t).some(function(e){return!gf(e)})&&sl("handlersType")}function swe(t){t||sl("initialIsRequired"),Zp(t)||sl("initialType"),rwe(t)&&sl("initialContent")}function cwe(t,e){throw new Error(t[e]||t.default)}var uwe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},sl=pf(cwe)(uwe),Vp={changes:iwe,selector:owe,handler:lwe,initial:swe};function dwe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vp.initial(t),Vp.handler(e);var n={current:t},r=pf(vwe)(n,e),a=pf(hwe)(n),i=pf(Vp.changes)(t),o=pf(fwe)(n);function s(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Vp.selector(u),u(n.current)}function c(u){nwe(r,a,i,o)(u)}return[s,c]}function fwe(t,e){return gf(e)?e(t.current):e}function hwe(t,e){return t.current=M3(M3({},t.current),e),e}function vwe(t,e,n){return gf(e)?e(t.current):Object.keys(n).forEach(function(r){var a;return(a=e[r])===null||a===void 0?void 0:a.call(e,t.current[r])}),n}var pwe={create:dwe},gwe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function mwe(t){return function e(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return a.length>=t.length?t.apply(this,a):function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return e.apply(n,[].concat(a,s))}}}function ywe(t){return{}.toString.call(t).includes("Object")}function bwe(t){return t||F3("configIsRequired"),ywe(t)||F3("configType"),t.urls?(wwe(),{paths:{vs:t.urls.monacoBase}}):t}function wwe(){console.warn(L3.deprecation)}function xwe(t,e){throw new Error(t[e]||t.default)}var L3={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},F3=mwe(xwe)(L3),Cwe={config:bwe},_we=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(a){return n.reduceRight(function(i,o){return o(i)},a)}};function B3(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],B3(t[n],e[n]))}),N3(N3({},t),e)}var Swe={type:"cancelation",msg:"operation is manually canceled"};function s1(t){var e=!1,n=new Promise(function(r,a){t.then(function(i){return e?a(Swe):r(i)}),t.catch(a)});return n.cancel=function(){return e=!0},n}var Twe=pwe.create({config:gwe,isInitialized:!1,resolve:null,reject:null,monaco:null}),j3=J1e(Twe,2),mf=j3[0],eg=j3[1];function kwe(t){var e=Cwe.config(t),n=e.monaco,r=X1e(e,["monaco"]);eg(function(a){return{config:B3(a.config,r),monaco:n}})}function Owe(){var t=mf(function(e){var n=e.monaco,r=e.isInitialized,a=e.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!t.isInitialized){if(eg({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),s1(c1);if(window.monaco&&window.monaco.editor)return $3(window.monaco),t.resolve(window.monaco),s1(c1);_we(Ewe,Iwe)(Awe)}return s1(c1)}function Ewe(t){return document.body.appendChild(t)}function Pwe(t){var e=document.createElement("script");return t&&(e.src=t),e}function Iwe(t){var e=mf(function(r){var a=r.config,i=r.reject;return{config:a,reject:i}}),n=Pwe("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Awe(){var t=mf(function(n){var r=n.config,a=n.resolve,i=n.reject;return{config:r,resolve:a,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){$3(n),t.resolve(n)},function(n){t.reject(n)})}function $3(t){mf().monaco||eg({monaco:t})}function Nwe(){return mf(function(t){var e=t.monaco;return e})}var c1=new Promise(function(t,e){return eg({resolve:t,reject:e})}),u1={config:kwe,init:Owe,__getMonacoInstance:Nwe},Dwe=Object.defineProperty,Rwe=Object.defineProperties,Mwe=Object.getOwnPropertyDescriptors,U3=Object.getOwnPropertySymbols,Lwe=Object.prototype.hasOwnProperty,Fwe=Object.prototype.propertyIsEnumerable,z3=(t,e,n)=>e in t?Dwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d1=(t,e)=>{for(var n in e||(e={}))Lwe.call(e,n)&&z3(t,n,e[n]);if(U3)for(var n of U3(e))Fwe.call(e,n)&&z3(t,n,e[n]);return t},Bwe=(t,e)=>Rwe(t,Mwe(e));const f1={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function H3(t,e){const n=l.computed(()=>{const{width:a,height:i}=t;return Bwe(d1({},f1.wrapper),{width:a,height:i})}),r=l.computed(()=>d1(d1({},f1.fullWidth),!e.value&&f1.hide));return{wrapperStyle:n,containerStyle:r}}function W3(){const t=l.shallowRef(u1.__getMonacoInstance()),e=l.ref(!1);let n;return l.onMounted(()=>{t.value||(n=u1.init(),n.then(a=>t.value=a).catch(a=>{(a==null?void 0:a.type)!=="cancelation"&&(e.value=!0,console.error("Monaco initialization error:",a))}))}),{monacoRef:t,unload:()=>n==null?void 0:n.cancel(),isLoadFailed:e}}function tg(t){return typeof t=="function"?t():t}function h1(t){return t===void 0}function au(t,e,n,r){return jwe(t,r)||$we(t,e,n,r)}function jwe(t,e){return t.editor.getModel(K3(t,e))}function $we(t,e,n,r){return t.editor.createModel(e,n,r?K3(t,r):void 0)}function K3(t,e){return t.Uri.parse(e)}var Uwe=Object.defineProperty,q3=Object.getOwnPropertySymbols,zwe=Object.prototype.hasOwnProperty,Hwe=Object.prototype.propertyIsEnumerable,G3=(t,e,n)=>e in t?Uwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wwe=(t,e)=>{for(var n in e||(e={}))zwe.call(e,n)&&G3(t,n,e[n]);if(q3)for(var n of q3(e))Hwe.call(e,n)&&G3(t,n,e[n]);return t};const Kwe={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var qwe=l.defineComponent({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(t,e){const n=new Map,r=l.shallowRef(null),{monacoRef:a,unload:i,isLoadFailed:o}=W3(),{editorRef:s}=Gwe(e,t,a,r),{disposeValidator:c}=Ywe(e,t,a,s),u=l.computed(()=>!!a.value&&!!s.value),{wrapperStyle:d,containerStyle:f}=H3(t,u);return l.onUnmounted(()=>{var h,v;(h=c.value)==null||h.call(c),s.value?((v=s.value.getModel())==null||v.dispose(),s.value.dispose()):i()}),l.watch([()=>t.path,()=>t.value,()=>t.language,()=>t.line],([h,v,p,g],[m,y,b,w])=>{if(u.value){if(h!==m){const x=au(a.value,v||t.defaultValue||"",p||t.defaultLanguage||"",h||t.defaultPath||"");t.saveViewState&&n.set(m,s.value.saveViewState()),s.value.setModel(x),t.saveViewState&&s.value.restoreViewState(n.get(h)),h1(g)||s.value.revealLine(g);return}s.value.getValue()!==v&&s.value.setValue(v),p!==b&&a.value.editor.setModelLanguage(s.value.getModel(),p),!h1(g)&&g!==w&&s.value.revealLine(g)}}),l.watch(()=>t.options,h=>s.value&&s.value.updateOptions(h),{deep:!0}),l.watch(()=>t.theme,h=>a.value&&a.value.editor.setTheme(h)),{containerRef:r,isEditorReady:u,isLoadFailed:o,wrapperStyle:d,containerStyle:f}},render(){const{$slots:t,isEditorReady:e,isLoadFailed:n,wrapperStyle:r,containerStyle:a,className:i}=this;return l.h("div",{style:r},[!e&&l.h("div",{style:Kwe},n?t.failure?tg(t.failure):"load failed":t.default?tg(t.default):"loading..."),l.h("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:i})])}});function Gwe({emit:t},e,n,r){const a=l.shallowRef(null);l.onMounted(()=>{const o=l.watch(n,()=>{r.value&&n.value&&(l.nextTick(()=>o()),i())},{immediate:!0})});function i(){var o;if(!r.value||!n.value||a.value)return;t("beforeMount",n.value);const s=e.path||e.defaultPath,c=au(n.value,e.value||e.defaultValue||"",e.language||e.defaultLanguage||"",s||"");a.value=n.value.editor.create(r.value,Wwe({model:c,theme:e.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},e.options),e.overrideServices),(o=a.value)==null||o.onDidChangeModelContent(u=>{const d=a.value.getValue();d!==e.value&&(t("update:value",d),t("change",d,u))}),a.value&&!h1(e.line)&&a.value.revealLine(e.line),t("mount",a.value,n.value)}return{editorRef:a}}function Ywe({emit:t},e,n,r){const a=l.ref(null),i=l.watch([n,r],()=>{if(n.value&&r.value){l.nextTick(()=>i());const o=n.value.editor.onDidChangeMarkers(s=>{var c,u;const d=(u=(c=r.value)==null?void 0:c.getModel())==null?void 0:u.uri;if(d&&s.find(h=>h.path===d.path)){const h=n.value.editor.getModelMarkers({resource:d});t("validate",h)}});a.value=()=>o==null?void 0:o.dispose()}});return{disposeValidator:a}}var Xwe=Object.defineProperty,Y3=Object.getOwnPropertySymbols,Jwe=Object.prototype.hasOwnProperty,Qwe=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?Xwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zwe=(t,e)=>{for(var n in e||(e={}))Jwe.call(e,n)&&X3(t,n,e[n]);if(Y3)for(var n of Y3(e))Qwe.call(e,n)&&X3(t,n,e[n]);return t};const Vwe={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};l.defineComponent({name:"VueMonacoDiffEditor",props:{original:String,modified:String,language:String,originalLanguage:String,modifiedLanguage:String,originalModelPath:String,modifiedModelPath:String,theme:{type:String,default:"vs"},options:{type:Object,default:()=>({})},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},setup(t,e){const n=l.shallowRef(null),{monacoRef:r,unload:a,isLoadFailed:i}=W3(),{diffEditorRef:o}=exe(e,t,r,n),s=l.computed(()=>!!r.value&&!!o.value),{wrapperStyle:c,containerStyle:u}=H3(t,s);return l.onUnmounted(()=>{var d,f,h,v,p,g,m,y;!r.value&&a();const b=(f=(d=o.value)==null?void 0:d.getModel)==null?void 0:f.call(d);(v=(h=b==null?void 0:b.original)==null?void 0:h.dispose)==null||v.call(h),(g=(p=b==null?void 0:b.modified)==null?void 0:p.dispose)==null||g.call(p),(y=(m=o.value)==null?void 0:m.dispose)==null||y.call(m)}),l.watch([()=>t.originalModelPath,()=>t.original,()=>t.originalLanguage,()=>t.language],([d,f,h,v],[p,g,m,y])=>{if(!s.value)return;const b=o.value.getOriginalEditor();if(d!==p){const w=au(r.value,f||"",h||v||"text",d||"");b.setModel(w);return}f!==b.getValue()&&b.setValue(f||""),(h!==m||v!==y)&&r.value.editor.setModelLanguage(o.value.getModel().original,h||v||"text")}),l.watch([()=>t.modifiedModelPath,()=>t.modified,()=>t.modifiedLanguage,()=>t.language],([d,f,h,v],[p,g,m,y])=>{if(!s.value)return;const b=o.value.getModifiedEditor();if(p!==d){const w=au(r.value,f||"",h||v||"text",d||"");b.setModel(w);return}if(f!==b.getValue()){const w=r.value.editor.EditorOption.readOnly;b.getOption(w)?b.setValue(f||""):(b.executeEdits("",[{range:b.getModel().getFullModelRange(),text:f||"",forceMoveMarkers:!0}]),b.pushUndoStop())}(h!==m||v!==y)&&r.value.editor.setModelLanguage(o.value.getModel().modified,h||v||"text")}),l.watch(()=>t.theme,()=>{var d;return(d=r.value)==null?void 0:d.editor.setTheme(t.theme)}),l.watch(()=>t.options,()=>{var d;return(d=o.value)==null?void 0:d.updateOptions(t.options)},{deep:!0}),{containerRef:n,isDiffEditorReady:s,isLoadFailed:i,wrapperStyle:c,containerStyle:u}},render(){const{$slots:t,isDiffEditorReady:e,isLoadFailed:n,wrapperStyle:r,containerStyle:a,className:i}=this;return l.h("div",{style:r},[!e&&l.h("div",{style:Vwe},n?t.failure?tg(t.failure):"load failed":t.default?tg(t.default):"loading..."),l.h("div",{ref:"containerRef",key:"monaco_diff_editor_container",style:a,class:i})])}});function exe({emit:t},e,n,r){const a=l.shallowRef(null);l.onMounted(()=>{const o=l.watch(n,()=>{r.value&&n.value&&(l.nextTick(()=>o()),i())},{immediate:!0})});function i(){var o;if(!r.value||!n.value||a.value)return;t("beforeMount",n.value),a.value=n.value.editor.createDiffEditor(r.value,Zwe({automaticLayout:!0,autoIndent:"brackets",theme:e.theme,formatOnPaste:!0,formatOnType:!0},e.options));const s=au(n.value,e.original||"",e.originalLanguage||e.language||"text",e.originalModelPath||""),c=au(n.value,e.modified||"",e.modifiedLanguage||e.language||"text",e.modifiedModelPath||"");(o=a.value)==null||o.setModel({original:s,modified:c}),t("mount",a.value,n.value)}return{diffEditorRef:a}}u1.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}});const txe=()=>Promise.resolve().then(()=>rEe),nxe=()=>Promise.resolve().then(()=>cEe);function rxe(t,e){console.log("install meta2d...",t),K1e(e==null?void 0:e.api),t.use(P3)}const axe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAUkUlEQVR42u2daYxcVXbHf91d3e3eXN1e2xs22AYKGJZhnTAwAwmZzMZkkg+ZfIiyaPIhk0T5EBFFkaJE+ZAPURRpFGWRokSKFJFIzMCMWYfNwAybMZhMgLbNYrCNsVldeIG23d358L+Pet1d7rrvVlW/9+qdn1QqbPq133L+55177rnngmEUmK60T8Aw2skE5S5k5z2xTwkYBVaZAIyOYYJyNzAELAWWAWVgObAaOAdYD6x1fx4HRkwARqaZ48H7gF73GQBWImNejwx6DXAesAIYAQbd94A7Zh4mACMVJihDffvrQ557BBnyGLAKWIe8+Epqxj4KLEHi6HafniTnYQIw2o7z4t3IuPuAfmS4ZWTQ65FBrwM2oDBl2H0G3WeJ+x0txQRgBOMMG2RH8c8AMu5lyMDHkFFvdH9ehbx4FKr0MtuDL5pdmgAML5yx9yLv3Yc8cj8y6Cg8WY08eGTcQ8iLL0FevC/t65iLCaDgnMWLl5DhLkeGvBwZ9SYUqixzfx5F3nwQee+u2HcuyM2JGs0Ry6bEY/B+ZOiR195ALV24hloGZYn77qcNcXiamAA6EGfs/dRy4KtRqLKWWsow+rtlKEYvpX3eaWACyBHOsEvIuKPMyCAKQ6LsyTnuO8qqRJ6+F3n/RR1kZh27ERnFzWqOIENejjx3NKO5Bhn9MhSjr0Ahij3PhNgNW2ScYUcefMh9l1FYEqUKo3x4ZPwl5MFL7tNRcXiamABaxFmyKX3U4vBV1GYyNyGDX468+HJq+XBjETEBBDBBuZdajjuqNxlFYUqUSVlDzeAHqXnvqCLR7n0GsIfgmFN0Fc1IllBl4Qpqs5eRJ9+IPHc04zmCRGHhSY4opABcHL4EGewIMvIxZOibUMgSpQzXICOPYvDoO1HRlZFNOkYAsRi8Bxlp5MH7UHgyjgaX4+4ThSej7lNGghhI+1qMxSPzAligbLZELQ4fpTZ1H4Un0cTPSmYXXZVin8xfv9FeMmUAsTg8MtBo8cMwMuL11CZ91iEDH0UhzHDs28ITw4vUBOCMvQ955jH3GaUWe0dxeDTwXEatFiWKwW3AaTRFywUQW/wQDzV6qS1fi1KEG6mtzVyKhDCMwpr+dpybYcylKSOboNyDctzRhM4otdg7ClHWovAlqi6Mwpxclc0anck8A4zF4d3MHjQOUgtJNqAwJZqyX0ltWn8YefBCVhca+aJrgnI/8txRHnwl8taRF4/ClKguxabrjY6hBNyJvPkwyoEPUmsjYSGK0dF0TVCeSfskDCMtLI1oFBoTgFFoTABGoTEBGIXGBGAUGhOAUWhMAEahMQEYhcYEYBQaE4BRaEwARqExARiFxgRgFBoTgFFoTABGoTEBGIXGBGAUGhOAUWhMAEahMQEYhcYEYBQaE4BRaEwARqExARiFxgRgFBoTgFFoSsCTC/z/bkwkEdbOXcRb24e21ZwGzgCn3acH7dG2yX0vGiXg1gYXa9Sw+9EcfWgzlGh72VXAucCFaH+JRd/ayh6o0TLc3hLRLp19qNP4OmTkW4Hzqe3zttx9+tM8ZxOAkYjYdrQRUfiyGhn2FmTsW4Dz0L4SA8jQe8lYSG0CMBrijD7ac3kJ2kTlAmAzcBGK3degDVbGyNEmKiYA4zPmePcuZMzr3ed8ZPTnI8OPDL2PjHn1JJgACk7Mu/ejTQy3AJfEPtEmhyN01v7LM8BbJoAC4ox+CG1Zuxm4HBn7ZWjTw8ir59azN2AG2AncZgIoABOUu5GHH0YpxxuA65G3X4k2SSyKLcwALwDfA3YW5aILyQTlJShuvwr4MnAdSkl2UiiTlFeA3wN2VKjO2F6+HYQLbfpRSvJG4NvAFe7PA2mfXwZ4G/hL4PkK1Rmwzaw7hgnKJeAa4DfQ7P6mtM8pY5wC/h64u0L1TPSXJoCc4zY6vwj4Y+CXUT6+UwevoUwDDwD/jWqQPsME0GZiufUu9+kDqFD9pAW/twx8F/hDYCPFGcgm5RDwd8C7UegTYQJoA7FYfAQVf40jL32x+/4LlIYL/f3dKIPzN8A3UErTqM8Z4D+Ixf1xTABNECv+6kEGP46yLJuBCorDN6CZ1KXu554F9jT5b1aAfwBuxp5hI14Gbgcm6/1Pu3kJiHn2UfdZj9KMFZRf34jCkiFUMzM3Fp8CflCheqyJf/9c9Dr/RYqdzvThNPL+r9fz/mACqIsLMXrQ/VmCZkzPQ559q/vv9ahMYJhafN+I/cCjTZzaEPBnaLBrxt+YV4E74lmfuZgAmFUaUEZ1LxupFX9dgLzuELWy3tDB5tPAG4Hn2AP8GvCb2HPz4TTwX8C7C/1QYW6kM/JoOV8JLdbYgEKXrWiAut793TitX6gxCdxVofpx4LlvRqnOpSndwrzxKvDjCtWphX6oowXgQploCd5KZNwXocKv89FqpSUoNdnuGvb9wPbAY7uA30GzuoYf9wKvNfqh3AugTp59AHn0C5CxX448+zhad5rWErz7gQ8Djx0HfguL+32ZAm6vUD3V6AdzKQAXD4+ieH0chQeXojCmgpbmReW8WZgceg+4K/BaS8j7r037InLEw8BLPj+YWQHEYvYoGzNELVaPPuOo0Cvry/BeBvacLRXXgJXALVh5gy+fAHegt0BDMiOA2KTSGDLqtcibX4KMfSvK0vTgn3bMApPANuBw4D25Brgy7YvIEXtIMNZadAHEDL0fDUDHUCamgmL2zSiEWYEMPjMiDeQD4OFA79+FKjtH0r6InDAN/BQ44Hu/F8W4nNEPIK8eX3O6FeXYx6iFOnnx7L78jMDcPwrxfintC8gRn6BU82nfA9oiAGfw3ciwtwA3AV9EtTGr0AA2757dhxPA3cCnSQ909/ArSASGHzuBF5Mc0FIjjA1c1wG/gl7f1yCD76XzvHsj3gCeQ6/mpCxFAuhL+yJywmngPiBRnVXLBOCMfwT4VeD30aRNkct0zwBPAPuSxv+xmd/r0r6IHHEQjbXOJDmoJQJwD2wtcBvw28jjF52TwP0+kzF16EGx/4a0LyInzKDQJ3GZedMCcMY/jtZbfpuUm51miJdQ+40QBoGvYbl/Xz4FtlWonkh6YCveAEPA3wK/TrYnoxaTKRSPJi59cA7lauBzaV9EjthLYJ1VUx5mgnIvWpP6Hcz447yNHkhI+NOHEghW9enHNCp9eDfk4GZfsZcBf4ImtAwRxaP/Fzj5NY7SxkVIE7eCD4CHQpsMBAvAteO4Da2WMmpMAg8Cx5Me6Ir8rsLCnyS8QhMNBpp5A1yK8vw2UJvNQfRKDqEEfB3L/ftyGjmbj0J/QZDxTlAeQquTLPSZzQzwCPB2YPhzAerhafhxCCUbQjfrSy4Al6W4DHtQ9agi738y6YFu9dr1qFTE8ONJ4M1AZwOEvQFKqBnT+rSvPoPsRV2HQ0oflgNfpdiz50k4hsKfxGus44QIYBmK/YtW19OIKeAx9FpOhHurbkX5f8OPN4FnCKuz+owQAdyIKjyN2RxH8ajXSqQ59KBGVyvSvoicMI3mWfZVqDb1ixIJYILyMCp2syzFfJ7Fcx1qHVagyS/L/ftxDLiHOZ2eQ/AWgHtNbwGuxcKfuZxG2Z+PAys/r0IhkOHHz9E66+DBb0SSN0APWtSyMe2rzyCHgEeTrESKMYAqP5enfRE54RQa/L7fTPYnIokARlD2x17T83keeaQQ1qDSB5tQ9OM99LYNcTbzSHLTL8O6E9RjBpXihm54cTUW/iRhF/DzVnh/8BSAq/q8FVvoUo/X0Cs5MROU+1DDW5tR92Ma9fxpanedOL5vgLXAL2Dhz1xmULvzo4HHX4zWTFtSwY83UbatJd4fPATgpuivRMVvxmyqwL0h4Y+r/PwSGgMYjYmczcFWhT/g9wYYRBWKts/sfN4AdgQeW0YbXdicih/HUIe9xHVWC+EjgE3IUxnz2UbgSiQ08P1C2heQIw4AT7bS+0MDAbjw5xbsNV2Pj4D7Qh6Iu6+3Yssek3B3hWpoe/mzclYBTFAGTc7cjMIgYzbPAK8HHrsaTX5Z7t+PD1CdVctZ6AF0oQUan0/76jPIp8BPIHkllit9uBYrKEzCDmB3O37xQgLoRfXp1ptyPtFsZEgpbh9qeTiW9kXkhFPI2bQ8/IGFBbAMlejaa3o+zwK7Awdky1D4Y7l/Pz4EftJos7tQ6hq3e01fj0IgYzZngB8m7UEJn93Xm7HwJwlPo5V2beFs3n0Q5agtSzGfPYTn/vtRQaHhx6fAnYFLTL2YJ4BYo9svYuHPXKZRx+fQ7Y4qqPTB8GMPegO0jbMZ+C1Y+FOPo8CPCCvG6sY6PidhGngc9VlqG/UE0IM6E9uetPN5E3gucPAbZX+sh6ofJ4EHKlQn2/mP1BPAldhruh4zqPQhtA3H51BDAcOPV1Dfn7YySwCu7v8rWN1/PQ4DDxGQ+4+VPpj392MGzfwm7veflLlvgBVo8sse1HyeA/YGhj/rUFbN8OMQcD9N9vzxYa4ALgMuT/vqM8hJNPMbsuFFNyonsdy/P7uA11pd+VmPzwTg0nTfwpbn1eMdYHtgProfJRWs9MGPT2iy43MS4m+Ac1HpgzGfZwjf7HoNdl+TELWYabv3BycA95r+MpoAM2ZzEriX8M2ub0BjAMOPx1C6eVGI3gDDqDWfdSaez27CN7seQctJbedMP44BD9DCrg+NiASwCRVpGbOZQlPxBwJbHm5FbQ+t8tOPV9EAeFHCH4Bu96BuwVrz1eMo4bORvSistD3U/DiNwp/9ixX/g94Ao2iDa2M+rxBe+TmIwkorKfHjGNrtsSUtD33pRp0JLkz76jPINIpHjwYe/3k0r2L48QLqsbqodKPY33LU83kHbcKQ2CNNUC6hsHI07YvICdNoorG53S4C6EYLNKzufzYzaO/ZicB49BxU+mwlJX4cQPH/ooY/IMO3Kfr5TAIPV6geTXqgm1O5Ai1+MRozgzI/oc6mKbqxQVo9jqDKzxD6kfe3ORU/JtFEY1O7PYZioU99HgH2Bx67CSt9SMJBtPIrFUwA8zmOirES5/5d+HMj1koyCY8D76QR/oAJoB570QA45IGMorp/C3/8OIoWvrS043MSTACzmUGpz9DShy1oyyMrffDjdeCFdrY9aYQJYDaTaMOLUwHHRuGPVdT6MYPGWgfSPAkTwGx2EV76MILW/VpWzY+TwI/a1fLQFxNAjRnUhDVx3b/jarTnl+HHC7Sp43MSTAA1DiIBhHR96EOD33LaF5ETTqMWM8fSPhETQI1mZiPXoNJnC3/8OITSn6mGP2ACiHNHhWpoMdbVqPGV4ceLwEtp5f7jmADEOwSWPrjtTr+FLXv0ZQa4K2Rr2XZgAhCPEN6G41zgprQvIEfsQ3MtmcAEIMO/k7C6/27UStKWk/oR5f7fS/tEIkwAmo18PjAeLSMBWDMxP6oEtphpF0UXwDTwKPB24PHnoQGw4cc+4NksDH4jii6A48C2kNlIV/vzTWwXzSQ8iNZaZIaiC6CZ2cgy1vE5CR8D92TJ+0OxBXAKxaOhm11fh3XTSMLTqM1MpiiyAN5B8X/IbGQ/GvzaLpp+TKIyk0Xv+tCIogpgBniJ8NKHaBNxK33w4wPgsbQrP+tRVAFMAj9oYjbyBuCStC8iRzyNHE7mKKoA9gFPhRzoJr++ga368uU0cP9itzz0pYgCmAYeJnz/2Yux3R6TsBuNtTJJEQVwFD2QxOGPa3n4JWBl2heRE6bRVqeZyv3HKaIA9gDPBA5+l6LwZyDti8gJVVRlm4nKz3oUTQBnkPdPXIwV2/Di2rQvIkfsBZ7K2uRXnKIJ4D3U8jykDUcX6vdvuX8/plHu/4O0T2QhiiaAZ4DdTSx7/CrFu2ehvIfCnzNpn8hCFOlhnkQLMRIvfHGpz6uxTtpJeAHYm+XwB4olgEPA44GzkQNo5ndZ2heRE04i75/p8AeKJYCfAa8lPcgNfqPNrm3yy4/DwPYslj7MpSgC+BS4m/CVSNcDG9O+iBzxNAHOJg2KIoCXgZ2BTViHUO7flj36ETmbzOb+4xRBAFHuP/FspAt/LkGbXRfhXrWCvWgAnFrH5yQU4aFWgUcCN7suoYUv69K+iJwwhcZaidvLp0URBLAL5f9DGEPhj+326MfHwD0E7K6TFkUQwH1o8XsIlwKXp30BOeJVtOFFLrw/dL4A9qNGTCEdn0to5tdKH/yYRoPf0A57qdDpAngKeKuJza5vwsIfX6I11plc+HI2OlkAUTou8f6zrvThKqz0IQm7gD15Cn+gswVwEHg08IEMoPBnJO2LyAmn0Fjrw7RPJCmdLID7gHcDjz0HbXhh+PE+8FDevD90rgA+QlvwJH4gsY7Pttm1P0+Q8m6PoXSqAF4EXgn0SGNIALbhhR8nkLPJ1eA3ohMFMIVaHiYOf1zpw4XYdkdJ2APsSHOz62boRAFUgTsDS3G70V6/Vvrgz3bgrbRPIpROFMBThD+QERT+GH5MAz+uUM30sseF6DQBnARub+J1fCNQSfsicsQuYEfaJ9EMnSaA3cBzIQdOUF4CfA2b+fUlGmudSvtEmqGTBDCFpuJDw59zUdNbW/boxwEyuOFFUjpJANHgNzQddxNqfGX48SQZ3PAiKZ0kgO0o/5+YCcp9wHew8MeXE8B/ojFXrukUARwB/p3whRjXAVekfRE5YRrF/qH9VTNFKe0TaAFn0EzkT0lY+uAmvkaA30WL343G7Af+ifBFRpmiEwTwIvD9CtXQB/IFVPlpg9/GfAz8Ix3i/SH/IdA+4K8I2OrUef+VwJ8Dq9O+kBxwAvhX4N8qVHOd+oyT1zfAFPC/wF+jMtyQsodh4E/RG8BYmCPAvwDfp0NCn4i8CWAKpTv/B/hn1Ok5kfE7zz8E/BHwB1jV59mYRpNcT6CY/8EK1dDOepklywKYQg/gOFpw8TZ6GNtQBeJkkjg0ZvhXAd/DdnqJM4XKmY+jVV1HgJ1oUdFzwLG8Vns2ooT6uGSBMyiNeQJ5+cNoVvcIKm0+DBxt4kGU0Cqv7wJ9qFtEUZlGa6ZPont9BN3rw8jZHAHez0Nz22b5f5GpAQrraWqAAAAAAElFTkSuQmCC";/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */var J3;(function(t){t.pop="pop",t.push="push"})(J3||(J3={}));var Q3;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Q3||(Q3={})),Symbol(process.env.NODE_ENV!=="production"?"navigation failure":"");var Z3;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Z3||(Z3={})),Symbol(process.env.NODE_ENV!=="production"?"router view location matched":""),Symbol(process.env.NODE_ENV!=="production"?"router view depth":"");const ixe=Symbol(process.env.NODE_ENV!=="production"?"router":""),oxe=Symbol(process.env.NODE_ENV!=="production"?"route location":"");Symbol(process.env.NODE_ENV!=="production"?"router view location":"");function lxe(){return l.inject(ixe)}function sxe(t){return l.inject(oxe)}function hs(t,e){const n=e||new Path2D;let r=t.calculative.borderRadius||0,a=r;const{x:i,y:o,width:s,height:c,ex:u,ey:d}=t.calculative.worldRect;r<1&&(r=s*r,a=c*a);let f=r<a?r:a;if(s<2*f&&(f=s/2),c<2*f&&(f=c/2),n.moveTo(i+f,o),n.arcTo(u,o,u,d,f),n.arcTo(u,d,i,d,f),n.arcTo(i,d,i,o,f),n.arcTo(i,o,u,o,f),n.closePath(),n instanceof Path2D)return n}const cxe=hs;function uxe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.ellipse(r+i/2,a+o/2,i/2,o/2,0,0,Math.PI*2),n instanceof Path2D)return n}var Gt=(t=>(t[t.Node=0]="Node",t[t.Line=1]="Line",t))(Gt||{}),Ft=(t=>(t[t.None=0]="None",t[t.DisableEdit=1]="DisableEdit",t[t.DisableMove=2]="DisableMove",t[t.DisableScale=3]="DisableScale",t[t.DisableMoveScale=4]="DisableMoveScale",t[t.Disable=10]="Disable",t))(Ft||{}),yf=(t=>(t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.Radial=2]="Radial",t))(yf||{}),Wt=(t=>(t[t.CanvasTemplate=1]="CanvasTemplate",t[t.CanvasImageBottom=2]="CanvasImageBottom",t[t.CanvasMain=3]="CanvasMain",t[t.CanvasImage=4]="CanvasImage",t))(Wt||{});const dxe=["text","textWidth","textHeight","textLeft","textTop","fontFamily","fontSize","lineHeight","fontStyle","fontWeight","textAlign","textBaseline","whiteSpace","ellipsis","keepDecimal"],fxe=["x","y","width","height","flipX","flipY"],hxe=["paddingTop","paddingRight","paddingBottom","paddingLeft","flipX","flipY","visible","showChild"],vxe=["iconLeft","iconTop","iconRotate"];var Fa=(t=>(t[t.Normal=0]="Normal",t[t.Beads=1]="Beads",t[t.Dot=2]="Dot",t[t.Arrow=3]="Arrow",t[t.WaterDrop=4]="WaterDrop",t))(Fa||{});const pxe=["gif","iframe","video","echarts","highcharts","lightningCharts"],v1=["radio","checkbox","button","inputDom","slider","echarts"],bf=new Set(["borderRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","progress","progressColor","verticalProgress","reverseProgress","flipX","flipY","input","lineDash","lineCap","lineJoin","strokeType","lineGradientFromColor","lineGradientToColor","lineGradientAngle","color","hoverColor","activeColor","lineWidth","bkType","gradientFromColor","gradientToColor","gradientAngle","gradientRadius","hoverBackground","activeBackground","globalAlpha","anchorColor","anchorRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textHasShadow","fontFamily","fontSize","textColor","hoverTextColor","activeTextColor","textBackground","fontStyle","fontWeight","textAlign","textBaseline","lineHeight","whiteSpace","textWidth","textHeight","textLeft","textTop","ellipsis","hiddenText","keepDecimal","borderWidth","borderColor","animateLineWidth","lineAnimateType","frames","animateColor","animateType","animateReverse","background","gradientColors","lineGradientColors","animateLineWidth","gradientSmooth","lineSmooth","animations"]);function gxe(t){t.onAdd=void 0,t.onValue=void 0,t.onBeforeValue=void 0,t.onDestroy=void 0,t.onMove=void 0,t.onResize=void 0,t.onRotate=void 0,t.onClick=void 0,t.onMouseEnter=void 0,t.onMouseLeave=void 0,t.onMouseDown=void 0,t.onMouseMove=void 0,t.onMouseUp=void 0,t.onShowInput=void 0,t.onInput=void 0,t.onChangeId=void 0,t.onBinds=void 0,t.onStartVideo=void 0,t.onPauseVideo=void 0,t.onStopVideo=void 0,t.onRenderPenRaw=void 0,t.onKeyDown=void 0,t.onContextmenu=void 0,t.onScale=void 0,t.onWheel=void 0,t.onConnectLine=void 0}var at=(t=>(t[t.None=0]="None",t[t.LineAnchor=1]="LineAnchor",t[t.NodeAnchor=2]="NodeAnchor",t[t.Line=3]="Line",t[t.Node=4]="Node",t[t.Resize=5]="Resize",t[t.Rotate=6]="Rotate",t[t.LineAnchorPrev=7]="LineAnchorPrev",t[t.LineAnchorNext=8]="LineAnchorNext",t))(at||{}),Qt=(t=>(t[t.None=0]="None",t[t.Translate=1]="Translate",t[t.Select=2]="Select",t[t.Resize=3]="Resize",t[t.AddAnchor=4]="AddAnchor",t))(Qt||{}),cl=(t=>(t[t.None=0]="None",t[t.Down=1]="Down",t[t.Translate=2]="Translate",t))(cl||{}),Pt=(t=>(t[t.None=-1]="None",t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t))(Pt||{});const V3=["nw-resize","ne-resize","se-resize","sw-resize"],e4=["n-resize","e-resize","s-resize","w-resize"],mxe=["curve","polyline","line"],t4=["dash","lineWidth","lineCap","lineJoin","strokeType","color","lineGradientFromColor","lineGradientToColor","lineGradientAngle","globalAlpha","bkType","background","gradientFromColor","gradientToColor","gradientAngle","gradientRadius","fontFamily","fontSize","textColor","hoverTextColor","activeTextColor","textBackground","fontStyle","fontWeight","textAlign","textBaseline","lineHeight","whiteSpace","textLeft","textTop","flipX","flipY","lineDash","visible","iconColor"];var iu=(t=>(t[t.Mirror=0]="Mirror",t[t.Bilateral=1]="Bilateral",t[t.Free=2]="Free",t))(iu||{}),yr=(t=>(t[t.Default=0]="Default",t[t.In=1]="In",t[t.Out=2]="Out",t[t.DisableConnected=3]="DisableConnected",t[t.DisableConnectTo=4]="DisableConnectTo",t[t.Disable=10]="Disable",t))(yr||{}),vs=(t=>(t[t.Default=0]="Default",t[t.Line=1]="Line",t))(vs||{});function nn(t,e,n){if(!e||e%360===0)return;const r=e*Math.PI/180,a=(t.x-n.x)*Math.cos(r)-(t.y-n.y)*Math.sin(r)+n.x,i=(t.x-n.x)*Math.sin(r)+(t.y-n.y)*Math.cos(r)+n.y;t.x=a,t.y=i,t.prev&&nn(t.prev,e,n),t.next&&nn(t.next,e,n)}function ou(t,e,n=5,r){if(e.type===1){let a=r.rotate;r.flipX&&(a*=-1),r.flipY&&(a*=-1);let i=e.rotate+a;return r.flipX&&(i*=-1),r.flipY&&(i*=-1),fl(t,{x:e.x-e.length*r.calculative.canvas.store.data.scale/2,y:e.y-n,width:e.length*r.calculative.canvas.store.data.scale,height:n*2,rotate:i})}else return t.x>e.x-n&&t.x<e.x+n&&t.y>e.y-n&&t.y<e.y+n}function ng(t,e,n){t.x=n.x-(n.x-t.x)*e,t.y=n.y-(n.y-t.y)*e}function Ba(t,e){if(t.x===e.x)return t.y<=e.y?0:180;if(t.y===e.y)return t.x<e.x?270:90;const n=t.x-e.x,r=t.y-e.y;let a=Math.atan(Math.abs(n/r))/(2*Math.PI)*360;return n>0&&r>0?a=180-a:n<0&&r>0?a+=180:n<0&&r<0&&(a=360-a),a}function rg(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function yxe(t,e){let n=Pt.None;if(!e)return n;const r=t.x-e.x,a=t.y-e.y;return Math.abs(r)>Math.abs(a)?r>0?n=Pt.Right:n=Pt.Left:a>0?n=Pt.Bottom:n=Pt.Up,n}function wf(t,e,n){t&&(t.x+=e,t.y+=n,t.next&&(t.next.x+=e,t.next.y+=n),t.prev&&(t.prev.x+=e,t.prev.y+=n))}function n4(t,e){return t.anchorId===e.anchorId&&t.connectTo===e.connectTo}function ag(t,e,n){let r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))/n.data.scale;e.rotate===0?t.x<e.x?n.pens[e.penId].flipX||(r*=-1):n.pens[e.penId].flipX&&(r*=-1):t.y<e.y?n.pens[e.penId].flipY||(r*=-1):n.pens[e.penId].flipY&&(r*=-1),t.distance=r}const r4={version:"1.0.42"},gt={version:r4.version,path2dDraws:{},canvasDraws:{},anchors:{},htmlElements:{}};function ja(t){Object.assign(gt.path2dDraws,t)}function di(t){Object.assign(gt.canvasDraws,t)}function xf(t){Object.assign(gt.anchors,t)}function bxe(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r&&r.push(n)||t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&r.splice(r.indexOf(n)>>>0,1)},emit:function(e,n){(t.get(e)||[]).slice().map(function(r){r(n)}),(t.get("*")||[]).slice().map(function(r){r(e,n)})}}}var Cf=(t=>(t[t.None=-1]="None",t[t.Document=0]="Document",t[t.Canvas=1]="Canvas",t))(Cf||{});const wxe={fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,lineHeight:1.5,textAlign:"center",textBaseline:"middle",color:"#222222",activeColor:"#278df8",hoverColor:"rgba(39,141,248,0.50)",anchorColor:"#278DF8",hoverAnchorColor:"#FF4101",anchorRadius:4,anchorBackground:"#fff",dockColor:"rgba(39,141,248,0.50)",dockPenColor:"#1890FF",dragColor:"#1890ff",rotateCursor:"rotate.cur",rightCursor:"right.cur",downCursor:"down.cur",hoverCursor:"pointer",minScale:.1,maxScale:10,keydown:0,gridSize:20,gridColor:"#e2e2e2",ruleColor:"#888888",drawingLineName:"curve",interval:30,animateInterval:30,autoPolyline:!0,autoAnchor:!0,autoAlignGrid:!1,animateColor:"#30EEDC",ruleLineColor:"#FF4101",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:64,shadowColor:"#00000014",globalAlpha:1,defaultAnchors:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],measureTextWidth:!0,moveConnectedLine:!0,mouseRightActive:!0,disableClipboard:!1,drawingLineLength:0,disableTouchPadScale:!1,cdn:"",polylineSpace:10,domShapes:[],containerShapes:["tablePlus"],textFlip:!0,textRotate:!0,unavailableKeys:[],diagramOptions:{},svgPathStroke:!0},xxe={dark:{color:"#bdc7db",background:"#1e2430",parentBackground:"#080b0f",ruleColor:"#222E47",ruleOptions:{background:"#121924",textColor:"#6E7B91"}},light:{color:"#222222",background:"#FFFFFF",parentBackground:"#F0F1F2",ruleColor:"#C8D0E1",ruleOptions:{background:"#F7F8FA",textColor:"#C8D0E1"}}};var nt=(t=>(t[t.Add=0]="Add",t[t.Update=1]="Update",t[t.Delete=2]="Delete",t[t.Replace=3]="Replace",t))(nt||{});const Cxe=()=>({data:{x:0,y:0,scale:1,pens:[],origin:{x:0,y:0},center:{x:0,y:0},paths:{},theme:"light"},histories:[],pens:{},path2dMap:new WeakMap,animateMap:new WeakMap,active:[],animates:new Set,options:{...wxe},theme:{...xxe},emitter:bxe(),bindDatas:{},bind:{},pensNetwork:{},cacheDatas:[],messageEvents:{},templatePens:{},globalTriggers:{}}),_xe=(t="default")=>(gt[t]||(gt[t]=Cxe(),gt[t].id=t),gt[t]),Sxe=(t,e)=>{const n=t.data.template===e;if(n)for(const r of t.data.pens)r.canvasLayer===Wt.CanvasTemplate&&(t.templatePens[r.id]=r);t.lastScale=t.data.scale,t.data={x:0,y:0,scale:1,pens:[],origin:{x:0,y:0},center:{x:0,y:0},paths:{},template:n?e:null},t.sameTemplate=n,t.pens={},t.histories=[],t.historyIndex=null,t.path2dMap=new WeakMap,t.animateMap=new WeakMap,t.bindDatas={},t.bind={},t.pensNetwork={},t.active=[],t.hover=void 0,t.lastHover=void 0,t.animates.clear()};function Bi(t){const{paddingTop:e,paddingBottom:n,paddingLeft:r,paddingRight:a,worldRect:i,canvas:o}=t.calculative;let{textLeft:s,textTop:c,textWidth:u,textHeight:d}=t.calculative,f=r,h=e;const v=i.width-r-a,p=i.height-e-n;u&&u<1&&(u*=i.width),d&&d<1&&(d*=i.height),u<t.calculative.fontSize&&(u=t.calculative.fontSize),f+=(s||0)+i.x,h+=(c||0)+i.y;const g=t.textAlign||o.store.options.textAlign,m=t.textBaseline||o.store.options.textBaseline;switch(g){case"center":f+=(v-(u||v))/2;break;case"right":f+=v-(u||v);break}switch(m){case"middle":h+=(p-(d||p))/2;break;case"bottom":h+=p-(d||p);break}const y={x:f,y:h,width:u||v,height:d||p};bn(y),t.calculative.worldTextRect=y,_f(t),t.calculative.textDrawRect=void 0}function a4(t,e){const n=e.calculative.fontSize*e.calculative.lineHeight,r=e.calculative.textLines.length*n,a=Txe(t,e),i=e.calculative.worldTextRect;let o=i.x+(i.width-a)/2,s=i.y+(i.height-r)/2;const c=e.calculative.canvas.store.options;switch(e.textAlign||c.textAlign){case"left":o=i.x;break;case"right":o=i.x+i.width-a;break}switch(e.textBaseline||c.textBaseline){case"top":s=i.y;break;case"bottom":s=i.ey-r;break}e.calculative.textDrawRect={x:o,y:s,width:a,height:r},bn(e.calculative.textDrawRect)}function _f(t,e=t.calculative.text){if(e==null){t.calculative.textLines=[];return}e=e.toString();let n=[];const r=t.calculative.fontSize*t.calculative.lineHeight,a=t.calculative.worldTextRect.height,i=Math.floor(a/r),o=i>1?i:1;switch(t.whiteSpace){case"nowrap":if(t.ellipsis!==!1){const d=o4(e.split(""),t);d[0]&&(n.push(d[0]),d.length>1&&p1(n))}else n.push(e);break;case"pre-line":n=e.split(/[\n]/g),t.ellipsis!==!1&&n.length>o&&(n=n.slice(0,o),p1(n));break;case"break-all":default:const c=e.split(/[\n]/g);let u=0;e:for(const d of c){const f=t.whiteSpace==="break-all"?d.split(""):i4(d);let h=o4(f,t);if(h.length===0&&(h=[""]),t.ellipsis!=!1)for(const v of h)if(u++,u>o){p1(n);break e}else n.push(v);else n.push(...h)}break}const s=t.calculative.keepDecimal;return s!=null&&n.forEach((c,u)=>{const d=Number(c);isNaN(d)||(n[u]=d.toFixed(s))}),t.calculative.textLines=n,n}function i4(t=""){const e=[];let n="";for(let r=0;r<t.length;++r){const a=t.charCodeAt(r);a<33||a>126?(n&&(e.push(n),n=""),e.push(t[r])):n+=t[r]}return n&&e.push(n),e}function o4(t,e){const n=e.calculative.canvas,r=n.offscreen.getContext("2d"),{fontStyle:a,fontWeight:i,fontSize:o,fontFamily:s,lineHeight:c}=e.calculative;r.save();const u=[];let d=t[0]||"";for(let f=1;f<t.length;++f){const h=t[f]||"",v=d+h;let p=0;if(n.store.options.measureTextWidth)r.font=ya({fontStyle:a,fontWeight:i,fontFamily:s||n.store.options.fontFamily,fontSize:o,lineHeight:c}),p=r.measureText(v).width;else{const m=v.match(/[^\x00-\xff]/g)||"",y=m.length*o,b=v.match(/\s/g)||"",w=b.length*o*.3,x=(v.length-m.length-b.length)*o*.6;p=y+w+x}const g=e.calculative.worldTextRect.width;p<=g+.1?d+=h:(d.length&&u.push(d),d=h)}return d.length&&u.push(d),r.restore(),u}function Txe(t,e){let n=0;return e.calculative.textLineWidths=[],e.calculative.textLines.forEach(r=>{const a=t.measureText(r).width;e.calculative.textLineWidths.push(a),n<a&&(n=a)}),n}function p1(t){t[t.length-1]=t[t.length-1].slice(0,-3)+"..."}function kxe(t){let e=t.text.split(`
`);const n=t.calculative.canvas,r=n.offscreen.getContext("2d"),{fontStyle:a,fontWeight:i,fontSize:o,fontFamily:s,lineHeight:c}=t.calculative;let u=0,d=0;r.save();for(let h=0;h<e.length;h++){if(n.store.options.measureTextWidth)r.font=ya({fontStyle:a,fontWeight:i,fontFamily:s||n.store.options.fontFamily,fontSize:o,lineHeight:c}),d=r.measureText(e[h]).width;else{const v=e[h].match(/[^\x00-\xff]/g)||"",p=v.length*o,g=e[h].match(/\s/g)||"",m=g.length*o*.3,y=(e[h].length-v.length-g.length)*o*.6;d=p+m+y}d>u&&(u=d)}r.restore();let f=e.length*o*c;t.textAlign==="left"||(t.textAlign==="right"?t.x=t.x-(u-t.width):t.x=t.x-(u-t.width)/2),t.textBaseline==="top"||(t.textBaseline==="bottom"?t.y=t.y-(f-t.height):t.y=t.y-(f-t.height)/2),t.height=f+2,t.width=u+2,t.calculative.canvas.updatePenRect(t),t.calculative.canvas.calcActiveRect()}function Te(t,e=!1){if(Array.isArray(t)){const n=[];return t.forEach(r=>{n.push(Te(r,e))}),n}else if(typeof t=="object"){if(t===null)return null;if(t.constructor===RegExp)return t;const n={};for(const r in t)if(!(["canvas","lastFrame"].includes(r)||t[r]instanceof HTMLImageElement||t[r]instanceof HTMLMediaElement)){{if(r==="calculative"&&!e)continue;if(r==="singleton"){e?n[r]={}:n[r]=t[r];continue}}n[r]=Te(t[r],e)}return n}return t}function g1(t,e,n){if(Array.isArray(t)){const r=[];return t.forEach(a=>{r.push(g1(a,e,n))}),r}else if(typeof t=="object"){if(t===null)return null;for(const r in t)if(e.includes(r))if(Array.isArray(t[r]))t[r].forEach((a,i)=>{Number.isNaN(Number(a))||(t[r][i]=Number(a*n))});else{if(Number.isNaN(Number(t[r])))continue;t[r]=Number(t[r])*n}else t[r]=g1(t[r],e,n);return t}return t}const ga={};function l4(t,e,n){if(!ga[e.fromArrow])return;const r=Sn(e),{x:a,y:i}=r,o={x:a,y:i};if(o.step=(e.fromArrowSize||10)*n.data.scale,r.next)o.rotate=Ba(r.next,r)+90;else{const c=e.calculative.worldAnchors[1];if(!c)return;c.prev?o.rotate=Ba(c.prev,r)+90:o.rotate=Ba(c,r)+90}t.save(),t.beginPath(),t.setLineDash([]);const s=e.fromArrowColor||e.calculative.color;s&&(t.strokeStyle=s),ga[e.fromArrow](t,e,n,o),t.restore()}function s4(t,e,n){if(!ga[e.toArrow]||e.calculative.worldAnchors.length<2)return;t.save();const r=Xt(e),{x:a,y:i}=r,o={x:a,y:i};if(o.step=(e.toArrowSize||10)*n.data.scale,r.prev)o.rotate=Ba(r.prev,r)+90;else{const c=e.calculative.worldAnchors[e.calculative.worldAnchors.length-2];c.next?o.rotate=Ba(c.next,r)+90:o.rotate=Ba(c,r)+90}t.beginPath(),t.setLineDash([]);const s=e.toArrowColor||e.calculative.color;s&&(t.strokeStyle=s),ga[e.toArrow](t,e,n,o),t.restore()}ga.triangleSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step;t.moveTo(a,r.y-r.step/4),t.lineTo(r.x,r.y),t.lineTo(a,r.y+r.step/4),t.closePath(),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()},ga.triangle=(t,e,n,r)=>{t.save(),t.lineWidth<2&&(t.lineWidth=2),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step;t.moveTo(a,r.y-r.step/4),t.lineTo(r.x,r.y),t.lineTo(a,r.y+r.step/4),t.closePath(),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()},ga.circleSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.step/2;t.arc(r.x-a,r.y,a,0,2*Math.PI),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()},ga.circle=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.step/2;t.arc(r.x-a,r.y,a,0,2*Math.PI),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()},ga.diamondSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step,i=r.step/2;t.moveTo(a,r.y),t.lineTo(a+i,r.y-i/2),t.lineTo(r.x,r.y),t.lineTo(a+i,r.y+i/2),t.closePath(),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()},ga.diamond=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step,i=r.step/2;t.moveTo(a,r.y),t.lineTo(a+i,r.y-i/2),t.lineTo(r.x,r.y),t.lineTo(a+i,r.y+i/2),t.closePath(),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()},ga.line=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step;t.moveTo(a,r.y-r.step/3),t.lineTo(r.x,r.y),t.lineTo(a,r.y+r.step/3),t.stroke(),t.restore()},ga.lineUp=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step;t.moveTo(a,r.y-r.step/3),t.lineTo(r.x,r.y),t.stroke(),t.restore()},ga.lineDown=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const a=r.x-r.step;t.moveTo(a,r.y+r.step/3),t.lineTo(r.x,r.y),t.stroke(),t.restore()};function m1(t){const e=parseInt,n=Math.round;let r=t.length,a={};if(r>9){const[i,o,s,c]=t=t.split(",");if(r=t.length,r<3||r>4)return null;a.r=e(i[3]=="a"?i.slice(5):i.slice(4)),a.g=e(o),a.b=e(s),a.a=c?parseFloat(c):-1}else{if(r==8||r==6||r<4)return null;r<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(r>4?t[4]+t[4]:"")),t=e(t.slice(1),16),r==9||r==5?(a.r=t>>24&255,a.g=t>>16&255,a.b=t>>8&255,a.a=n((t&255)/.255)/1e3):(a.r=t>>16,a.g=t>>8&255,a.b=t&255,a.a=-1)}return a}function ur(t,e,n,r){let a,i,o,s,c,u,d,f=Math.round,h=typeof n=="string";return typeof t!="number"||t<-1||t>1||typeof e!="string"||e[0]!="r"&&e[0]!="#"||n&&!h||(d=e.length>9,d=h?n.length>9?!0:n=="c"?!d:!1:d,c=m1(e),s=t<0,u=n&&n!="c"?m1(n):s?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},t=s?t*-1:t,s=1-t,!c||!u)?null:(r?(a=f(s*c.r+t*u.r),i=f(s*c.g+t*u.g),o=f(s*c.b+t*u.b)):(a=f((s*c.r**2+t*u.r**2)**.5),i=f((s*c.g**2+t*u.g**2)**.5),o=f((s*c.b**2+t*u.b**2)**.5)),h=c.a,u=u.a,c=h>=0||u>=0,h=c?h<0?u:u<0?h:h*s+u*t:0,d?"rgb"+(c?"a(":"(")+a+","+i+","+o+(c?","+f(h*1e3)/1e3:"")+")":"#"+(4294967296+a*16777216+i*65536+o*256+(c?f(h*255):0)).toString(16).slice(1,c?void 0:-2))}globalThis.pSBC=ur;function ig(t,e){const n=m1(t)||{r:0,g:0,b:0};return n.a<0?`rgba(${n.r},${n.g},${n.b},${e})`:`rgba(${n.r},${n.g},${n.b},${e+n.a})`}function lu(t,e){if(isNaN(t)){console.warn("realValue not number");return}if(typeof e!="string"){console.warn("collection must be string");return}const[n,r]=[e[0],e[e.length-1]];if(!["[","("].includes(n)){console.warn('collection must start with "[" or "("');return}if(!["]",")"].includes(r)){console.warn('collection must end with "]" or ")"');return}const a=e.substring(1,e.length-1).split(",");if(a.length!==2){console.warn("collection must have 2 numbers");return}const[i,o]=[+a[0],+a[1]];if(i>=o){console.warn("startNum must less than endNum");return}return t>i||n==="["&&t===i?t<o||r==="]"&&t===o:!1}function su(t,e){if(typeof e!="string"){console.warn("collection must be string");return}const[n,r]=[e[0],e[e.length-1]];if(n!=="["||r!=="]"){console.warn('collection must start with "[" and end with "]"');return}const a=e.substring(1,e.length-1).split(",");for(const i of a)if(i.includes("..")){const[o,s]=i.split(".."),[c,u]=[+o,+s];if(c>=u){console.warn("startNum must less than endNum");return}if(t>=c&&t<=u)return!0}else if(t==i)return!0;return!1}function Oxe(){return((1+Math.random())*65536|0).toString(16).substring(1)}function it(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function og(){return Oxe()+it()}const Io=t=>{let e=0,n=0,r=0,a=0;return typeof t=="number"?e=n=r=a=t:typeof t=="string"?e=n=r=a=parseInt(t,10):Array.isArray(t)&&(e=t[0],r=y1(t[1])?t[0]:t[1],a=y1(t[2])?t[0]:t[2],n=y1(t[3])?r:t[3]),[e,r,a,n]};function y1(t){return t==null}async function Exe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{e(a.target.result)},r.onerror=a=>{n(a)},r.readAsDataURL(t)})}async function Pxe(t,e,n,r){const a=new FormData;if(a.append("file",t),n)for(const o in n)n.hasOwnProperty(o)&&a.append(o,n[o]);return(await(await fetch(e,{method:"POST",headers:r,body:a})).json()).url}function Ixe(t,e,n){var r=document.createElement("link");r.href=t,r.rel="stylesheet",e&&(r.onload=e),document.head.appendChild(r)}function b1(t){let e=t||window.location.search.split("?")[1];const n=new URLSearchParams(e);return Object.fromEntries(n.entries())}function cu(t,e){if(e==null)return t;const n=e.split(".");for(;n.length&&(t=t[n.shift()]););return t}function w1(t,e,n){e!=null&&e.split(".").reduce((r,a,i)=>r[a]=e.split(".").length===++i?n:r[a]||{},t)}function Axe(t){const e=["天","一","二","三","四","五","六"],n=new Date,r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),o=n.getDay(),s=n.getHours(),c=n.getMinutes(),u=n.getSeconds();return new Function("year","month","day","week","hours","minutes","seconds",`return ${t}`)(r,a,i,e[o],s,c,u)}function Nxe(t,e){if(!t||!e)return!1;let n=ma(t);for(;n;){if(n.id===e.id)return!0;n=ma(n)}return!1}function ma(t,e){if(!t||!t.parentId||!t.calculative)return;const r=t.calculative.canvas.store.pens[t.parentId];return e&&ma(r,e)||r}function fi(t,e){if(!t||!t.children)return[];const n=[];return t.children.forEach(r=>{const a=e.pens[r];a&&(n.push(a),n.push(...fi(a,e)))}),n}function x1(t,e){if(!t||!t.followers)return[];const n=[];return t.followers.forEach(r=>{const a=e.pens[r];a&&!a.parentId&&(n.push(a),n.push(...x1(a,e)))}),n}function Dxe(t,e){const{worldRect:n,gradientFromColor:r,gradientToColor:a,gradientAngle:i}=e.calculative;return d4(t,n,r,a,i)}function Rxe(t,e){const{worldRect:n,gradientFromColor:r,gradientToColor:a,gradientRadius:i}=e.calculative;if(!r||!a)return;const{width:o,height:s,center:c}=n,{x:u,y:d}=c;let f=o;f<s&&(f=s),f*=.5;const h=t.createRadialGradient(u,d,f*(i||0),u,d,f);return h.addColorStop(0,r),h.addColorStop(1,a),h}function Mxe(t,e,n,r,a){let i=0;i=Math.PI/2-Math.atan2(r-e,n-t);const o=(t+n)/2,s=(e+r)/2,c=o+a*Math.sin(90*Math.PI/180-i),u=s+a*-Math.cos(90*Math.PI/180-i),d=o+a*Math.sin(270*Math.PI/180-i),f=s+a*-Math.cos(270*Math.PI/180-i);return[c,u,d,f]}function Lxe(t,e){const{worldRect:n,gradientColors:r,gradientRadius:a}=e.calculative;if(!r)return;let i=e.calculative.gradientColors;e.calculative.checked&&(i=e.calculative.onGradientColors);const{width:o,height:s,center:c}=n,{x:u,y:d}=c;let f=o;f<s&&(f=s),f*=.5;const{colors:h}=ps(i),v=t.createRadialGradient(u,d,f*(a||0),u,d,f);return h.forEach(p=>{v.addColorStop(p.i,p.color)}),v}function Fxe(t,e){const{x:n,y:r,ex:a,width:i,height:o,center:s}=e.calculative.worldRect;let c=[{x:a,y:r+o/2},{x:n,y:r+o/2}],u=e.calculative.gradientColors;e.calculative.checked&&(u=e.calculative.onGradientColors);const{angle:d,colors:f}=ps(u);let h=C1(d,i,o);return c.forEach(v=>{nn(v,d,s)}),lg(t,c,f,h)}function Bxe(t,e){const{worldRect:n,textGradientColors:r}=e.calculative;if(!r)return;const{width:a,height:i,center:o}=n,{x:s,y:c}=o;let u=a;u<i&&(u=i),u*=.5;const{colors:d}=ps(r),f=t.createRadialGradient(s,c,0,s,c,u);return d.forEach(h=>{f.addColorStop(h.i,h.color)}),f}function jxe(t,e){const{x:n,y:r,ex:a,width:i,height:o,center:s}=e.calculative.worldRect;let c=[{x:a,y:r+o/2},{x:n,y:r+o/2}];const{angle:u,colors:d}=ps(e.calculative.textGradientColors);let f=C1(u,i,o);return c.forEach(h=>{nn(h,u,s)}),lg(t,c,d,f)}function C1(t,e,n){const r=Math.atan(n/e)/Math.PI*180;let a=(t-90)%360,i=0;return a>r&&a<180-r||a>180+r&&a<360-r||a<0?(a>270?a=360-a:a>180?a=a-180:a>90&&(a=180-a),i=Math.abs(n/Math.sin(a/180*Math.PI)/2)):(a>270?a=360-a:a>180?a=a-180:a>90&&(a=180-a),i=Math.abs(e/Math.cos(a/180*Math.PI)/2)),i}function ps(t){if(typeof t=="string"&&t.startsWith("linear-gradient")){let e=t.slice(16,-2).split("deg,");if(e.length>1){let n=e[1].split("%,");const r=[];return n.forEach(a=>{if(/rgba?/.test(a)){let i=a.split(") ");r.push({color:$xe(i[0]+")"),i:parseFloat(i[1])/100})}else{let i=a.split(" ");i.length>2?r.push({color:i[1],i:parseFloat(i[2])/100}):r.push({color:i[0],i:parseFloat(i[1])/100})}}),{angle:parseFloat(e[0]),colors:r}}else return{angle:parseFloat(e[0]),colors:[]}}else return{angle:0,colors:[]}}function $xe(t){if(/rgba?/.test(t)){let e=t.split(",");if(e.length<3)return"";t="#";for(let n=0,r;r=e[n++];)if(n<4)r=parseInt(r.replace(/[^\d]/gi,""),10).toString(16),t+=r.length==1?"0"+r:r;else{r=r.replace(")","");let i=parseInt(r*255+"").toString(16);i=i.length===2?i:"0"+i,t+=i}t=t.toUpperCase()}return t}function Uxe(t,e){const{x:n,y:r,ex:a,width:i,height:o,center:s}=e.calculative.worldRect;let c=[{x:a,y:r+o/2},{x:n,y:r+o/2}];const{angle:u,colors:d}=ps(e.calculative.lineGradientColors);let f=C1(u,i,o);return c.forEach(h=>{nn(h,u,s)}),lg(t,c,d,f)}function lg(t,e,n,r){let a=Mxe(e[0].x,e[0].y,e[1].x,e[1].y,r),i=t.createLinearGradient(a[0],a[1],a[2],a[3]);return n.forEach(o=>{i.addColorStop(o.i,o.color)}),i}function ul(t,e,n){let r=[];e.calculative.gradientColorStop?r=e.calculative.gradientColorStop:(r=ps(e.calculative.lineGradientColors).colors,e.calculative.gradientColorStop=r),t.strokeStyle=lg(t,n,r,e.calculative.lineWidth/2),t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.stroke()}function c4(t,e){const n=e.calculative.worldAnchors;let r=e.calculative.lineWidth*(e.calculative.gradientSmooth||e.calculative.lineSmooth||0);for(let a=0;a<n.length-1;a++)if((e.lineName==="curve"||e.lineName==="mind")&&n[a].curvePoints){if(a>0){let s=n[a-1].curvePoints;s?sg(t,e,r,s[s.length-1],n[a],n[a].curvePoints[0]):sg(t,e,r,n[a-1],n[a],n[a].curvePoints[0]);let c=Ao(r,n[a],n[a].curvePoints[0]);ul(t,e,[c,n[a].curvePoints[1]])}else ul(t,e,[n[a],n[a].curvePoints[0]]),ul(t,e,[n[a].curvePoints[0],n[a].curvePoints[1]]);let i=n[a].curvePoints.length-1;for(let s=1;s<i;s++)ul(t,e,[n[a].curvePoints[s],n[a].curvePoints[s+1]]);let o=Ao(r,n[a+1],n[a].curvePoints[i]);ul(t,e,[n[a].curvePoints[i],o])}else{let i=n[a],o=n[a+1];if(a>0&&a<n.length-1){let c=n[a-1].curvePoints;c?sg(t,e,r,c[c.length-1],n[a],n[a+1]):sg(t,e,r,n[a-1],n[a],n[a+1])}a>0&&a<n.length-1&&(i=Ao(r,n[a],n[a+1])),a<n.length-2&&(o=Ao(r,n[a+1],n[a]));let s=!1;if(a===0&&e.fromLineCap&&e.fromLineCap!=="butt"&&(t.save(),s=!0,t.lineCap=e.fromLineCap),a!==0&&a===n.length-2&&e.toLineCap&&e.toLineCap!=="butt"&&(t.save(),s=!0,t.lineCap=e.toLineCap),ul(t,e,[i,o]),s&&t.restore(),n.length===2&&a===0){t.save(),s=!0,t.lineCap=e.toLineCap;let c=.1,u=.1;i.x-o.x===0?u=0:c=(i.y-o.y)/(i.x-o.x)*.1,ul(t,e,[{x:o.x-u,y:o.y-c},o]),t.restore()}}}function Ao(t,e,n){let r=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));return r===0?{x:e.x,y:e.y}:t<r?{x:e.x+(n.x-e.x)*t/r,y:e.y+(n.y-e.y)*t/r}:{x:e.x+(n.x-e.x)/r/2,y:e.y+(n.y-e.y)/r/2}}function sg(t,e,n,r,a,i){let o=Ao(n,a,r),s=Ao(n,a,i),c={x:a.x,y:a.y},u=zxe(e.calculative.canvas.store.data.smoothNum||20,o,c,s);for(let d=0;d<u.length-1;d++)ul(t,e,[{x:u[d].x,y:u[d].y},{x:u[d+1].x,y:u[d+1].y}])}function u4(t,e,n,r){let a=Ao(e,n,r),i={x:n.x,y:n.y};t.quadraticCurveTo(i.x,i.y,a.x,a.y)}function _1(t){const e=t.calculative.worldAnchors;let n=t.calculative.lineWidth*(t.calculative.gradientSmooth||t.calculative.lineSmooth||0);const r=new Path2D;for(let a=0;a<e.length-1;a++){e[a];let i=e[a+1];if(a==0&&r.moveTo(e[a].x,e[a].y),a>0&&a<e.length-1){let o=e[a-1].curvePoints;u4(r,n,e[a],e[a+1])}a>0&&a<e.length-1&&Ao(n,e[a],e[a+1]),a<e.length-2&&(i=Ao(n,e[a+1],e[a])),r.lineTo(i.x,i.y)}return r}function zxe(t=100,e,n,r,a){let i=null;const o=[];r?r&&(i=Wxe):i=Hxe;for(let s=0;s<t;s++)o.push(i(s/t,e,n,r,a));return r&&o.push(r),o}function Hxe(t,e,n){const{x:r,y:a}=e,{x:i,y:o}=n;let s=r+(i-r)*t,c=a+(o-a)*t;return{x:s,y:c}}function Wxe(t,e,n,r){const{x:a,y:i}=e,{x:o,y:s}=n,{x:c,y:u}=r;let d=(1-t)*(1-t)*a+2*t*(1-t)*o+t*t*c,f=(1-t)*(1-t)*i+2*t*(1-t)*s+t*t*u;return{x:d,y:f}}function Kxe(t,e){const{worldRect:n,lineGradientFromColor:r,lineGradientToColor:a,lineGradientAngle:i}=e.calculative;return d4(t,n,r,a,i)}function d4(t,e,n,r,a){if(!n||!r)return;const{x:i,y:o,center:s,ex:c,ey:u}=e,d={x:i,y:s.y},f={x:c,y:s.y};a%90===0&&a%180?(d.x=s.x,f.x=s.x,a%270?(d.y=o,f.y=u):(d.y=u,f.y=o)):a&&(nn(d,a,e.center),nn(f,a,e.center));const h=t.createLinearGradient(d.x,d.y,f.x,f.y);return h.addColorStop(0,n),h.addColorStop(1,r),h}function qxe(t){const{worldIconRect:e,iconWidth:n,iconHeight:r,imgNaturalWidth:a,imgNaturalHeight:i}=t.calculative;let{x:o,y:s,width:c,height:u}=e;if(n&&(c=n),r&&(u=r),a&&i&&t.imageRatio){const d=e.width/a,f=e.height/i,h=Math.min(d,f),v=a/i;n?u=n/v:r?c=r*v:(c=h*a,u=h*i)}switch(o+=(e.width-c)/2,s+=(e.height-u)/2,t.iconAlign){case"top":s=e.y;break;case"bottom":s=e.ey-u;break;case"left":o=e.x;break;case"right":o=e.ex-c;break;case"left-top":o=e.x,s=e.y;break;case"right-top":o=e.ex-c,s=e.y;break;case"left-bottom":o=e.x,s=e.ey-u;break;case"right-bottom":o=e.ex-c,s=e.ey-u;break}return{x:o,y:s,width:c,height:u}}function uu(t,e){const{x:n,y:r,width:a,height:i}=qxe(e),{worldIconRect:o,iconRotate:s,img:c}=e.calculative;if(s){const{x:u,y:d}=o.center;t.translate(u,d),t.rotate(s*Math.PI/180),t.translate(-u,-d)}if(e.imageRadius){t.save();let u=e.calculative.imageRadius||0,d=u;const{x:f,y:h,width:v,height:p,ex:g,ey:m}=e.calculative.worldRect;u<1&&(u=v*u,d=p*d);let y=u<d?u:d;v<2*y&&(y=v/2),p<2*y&&(y=p/2),t.beginPath(),t.moveTo(f+y,h),t.arcTo(g,h,g,m,y),t.arcTo(g,m,f,m,y),t.arcTo(f,m,f,h,y),t.arcTo(f,h,g,h,y),t.clip(),t.drawImage(c,n,r,a,i),t.restore()}else t.drawImage(c,n,r,a,i)}function dl(t,e){const{textColor:n,color:r}=t.calculative,{data:a,options:i}=e;return n||r||a.textColor||a.color||i.textColor||i.color}function f4(t,e){const{fontStyle:n,fontWeight:r,fontSize:a,fontFamily:i,lineHeight:o,text:s,hiddenText:c,canvas:u,textHasShadow:d,textBackground:f,textType:h}=e.calculative;if(s==null||c)return;const v=u.store;t.save(),d||(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0);let p;e.calculative.disabled?p=e.disabledTextColor||e.disabledColor||ur(.4,dl(e,v)):e.calculative.hover?p=e.hoverTextColor||e.hoverColor||v.options.hoverColor:e.calculative.active&&(p=e.activeTextColor||e.activeColor||v.options.activeColor);let g;h===yf.Linear?g=jxe(t,e):h===yf.Radial&&(g=Bxe(t,e)),t.fillStyle=p||g||dl(e,v),t.font=ya({fontStyle:n,fontWeight:r,fontFamily:i||v.options.fontFamily,fontSize:a,lineHeight:o}),!e.calculative.textDrawRect&&a4(t,e);const{x:m,y,width:b,height:w}=e.calculative.textDrawRect;f&&(t.save(),t.fillStyle=f,t.fillRect(m,y,b,w),t.restore());const x=.55,C=e.textAlign||v.options.textAlign,S=a*o;e.calculative.textLines.forEach((_,O)=>{const N=e.calculative.textLineWidths[O];let B=0;C==="center"?B=(b-N)/2:C==="right"&&(B=b-N),t.fillText(_,m+B,y+(O+x)*S);const{textDecorationColor:T,textDecorationDash:k,textDecoration:E}=e;E&&Gxe(t,{x:m+B,y:y+(O+x)*S,width:N},{textDecorationColor:T,textDecorationDash:k,fontSize:a});const{textStrickoutColor:I,textStrickoutDash:A,textStrickout:M}=e;M&&Yxe(t,{x:m+B,y:y+(O+x)*S,width:N},{textStrickoutColor:I,textStrickoutDash:A,fontSize:a})}),t.restore()}function Gxe(t,e,n){const{textDecorationColor:r,textDecorationDash:a,fontSize:i}=n;let{x:o,y:s,width:c}=e;switch(t.textBaseline){case"top":s+=i;break;case"middle":s+=i/2;break}t.save(),t.beginPath(),t.strokeStyle=r||t.fillStyle,t.lineWidth=1,t.moveTo(o,s),t.setLineDash(a||[]),t.lineTo(o+c,s),t.stroke(),t.restore()}function Yxe(t,e,n){const{textStrickoutColor:r,textStrickoutDash:a,fontSize:i}=n;let{x:o,y:s,width:c}=e;switch(t.textBaseline){case"top":s+=i/2;break;case"bottom":s-=i/2;break}t.save(),t.beginPath(),t.strokeStyle=r||t.fillStyle,t.lineWidth=1,t.moveTo(o,s),t.setLineDash(a||[]),t.lineTo(o+c,s),t.stroke(),t.restore()}function h4(t,e,n){if(n==null)return;const{fontStyle:r,fontWeight:a,fontSize:i,fontFamily:o,lineHeight:s,canvas:c}=e.calculative,u=c.store;t.save();let d;e.calculative.hover?d=e.hoverTextColor||e.hoverColor||u.options.hoverColor:e.calculative.active&&(d=e.activeTextColor||e.activeColor||u.options.activeColor),t.fillStyle=d||dl(e,u),t.font=ya({fontStyle:r,fontWeight:a,fontFamily:o||u.options.fontFamily,fontSize:i,lineHeight:s});const f=t.measureText(n).width;let h,v;for(const p of e.calculative.worldAnchors){if(!v){v=p;continue}const g=rg(v,p),m=Math.floor(g/f);h="";for(let b=0;b<m;b++)h+=n;const y=Ba(v,p)-270;if(t.save(),y%360!==0){const{x:b,y:w}=v;t.translate(b,w);let x=y*Math.PI/180;t.rotate(x),t.translate(-b,-w)}t.fillText(h,v.x,v.y+s/2),t.restore(),v=p}t.restore()}function v4(t,e){const n=e.calculative.canvas.store;t.save(),t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.textAlign="center",t.textBaseline="middle";const r=e.calculative.worldIconRect;let a=r.x+r.width/2,i=r.y+r.height/2;switch(e.iconAlign){case"top":i=r.y,t.textBaseline="top";break;case"bottom":i=r.ey,t.textBaseline="bottom";break;case"left":a=r.x,t.textAlign="left";break;case"right":a=r.ex,t.textAlign="right";break;case"left-top":a=r.x,i=r.y,t.textAlign="left",t.textBaseline="top";break;case"right-top":a=r.ex,i=r.y,t.textAlign="right",t.textBaseline="top";break;case"left-bottom":a=r.x,i=r.ey,t.textAlign="left",t.textBaseline="bottom";break;case"right-bottom":a=r.ex,i=r.ey,t.textAlign="right",t.textBaseline="bottom";break}const o=e.calculative.iconWeight;let s;const c=e.calculative.iconFamily;e.calculative.iconSize>0?s=e.calculative.iconSize:r.width>r.height?s=r.height:s=r.width,t.font=ya({fontSize:s,fontWeight:o,fontFamily:c}),t.fillStyle=e.calculative.iconColor||dl(e,n),e.calculative.iconRotate&&(t.translate(r.center.x,r.center.y),t.rotate(e.calculative.iconRotate*Math.PI/180),t.translate(-r.center.x,-r.center.y)),t.beginPath(),t.fillText(e.calculative.icon,a,i),t.restore()}function p4(t,e){const n=e.calculative.canvas.store.data.scale,r=e.calculative.canvas.inputDiv.dataset.penId,{x:a,y:i,width:o,height:s}=e.calculative.worldRect;t.save(),t.beginPath(),e.id===r?(t.moveTo(a+o-20*n,i+s/2+2*n),t.lineTo(a+o-14*n,i+s/2-4*n),t.lineTo(a+o-8*n,i+s/2+2*n)):(t.moveTo(a+o-20*n,i+s/2-4*n),t.lineTo(a+o-14*n,i+s/2+2*n),t.lineTo(a+o-8*n,i+s/2-4*n)),t.stroke(),t.restore()}function ya({fontStyle:t="normal",textDecoration:e="normal",fontWeight:n="normal",fontSize:r=12,fontFamily:a="Arial",lineHeight:i=1}={}){return`${t} ${e} ${n} ${r}px/${i} ${a}`}function gs(t,e){const{x:n,ex:r,y:a,ey:i}=e.calculative.worldRect||{};e.calculative.flipX&&(t.translate(n+r+.5,.5),t.scale(-1,1)),e.calculative.flipY&&(t.translate(.5,a+i+.5),t.scale(1,-1))}function No(t,e,n=!1){const{x:r,y:a}=e.calculative.worldRect.pivot||e.calculative.worldRect.center;t.translate(r,a);let i=e.calculative.rotate*Math.PI/180;n||(e.calculative.flipX&&(i*=-1),e.calculative.flipY&&(i*=-1)),t.rotate(i),t.translate(-r,-a)}function ms(t,e,n){t.save(),t.translate(.5,.5),t.beginPath();const r=e.calculative.canvas.store,a=e.textFlip||r.options.textFlip,i=e.textRotate||r.options.textRotate;(!a||!i)&&t.save(),gs(t,e),e.calculative.rotate&&e.name!=="line"&&No(t,e),(e.calculative.lineWidth>1||n)&&(t.lineWidth=e.calculative.lineWidth),aCe(t,r,e);let o,s=!1,c;e.calculative.disabled?(c=e.disabledColor||r.options.disabledColor||ur(.4,e.calculative.color||Sf(r)),o=e.disabledBackground||r.options.disabledBackground||ur(.4,e.calculative.background||r.data.penBackground)):e.mouseDownValid&&e.calculative.mouseDown?(c=e.mouseDownColor||ur(-.4,e.calculative.color||Sf(r)),o=e.mouseDownBackground||ur(-.4,e.calculative.background||r.data.penBackground)):e.switch&&e.calculative.checked?e.calculative.bkType||(o=e.onBackground):e.calculative.hover?(c=e.hoverColor||r.options.hoverColor,o=e.hoverBackground||r.options.hoverBackground):e.calculative.active?(c=e.activeColor||r.options.activeColor,o=e.activeBackground||r.options.activeBackground):e.calculative.isDock&&(e.type===Gt.Line?c=r.options.dockPenColor:o=ig(r.options.dockPenColor,.2));const u=e.calculative.strokeImg;if(e.calculative.strokeImage&&u)t.strokeStyle=c||t.createPattern(u,"repeat");else{let f;e.calculative.strokeType?e.calculative.lineGradientColors?e.name==="line"?s=!0:e.calculative.lineGradient?f=e.calculative.lineGradient:(f=Uxe(t,e),e.calculative.lineGradient=f):f=Kxe(t,e):f=e.calculative.color||(e.type?r.data.lineColor:"")||Sf(r),t.strokeStyle=c||f}const d=e.calculative.backgroundImg;if(e.calculative.backgroundImage&&d)t.fillStyle=o||t.createPattern(d,"repeat"),o=!0;else{let f;e.calculative.bkType===yf.Linear?e.calculative.gradientColors?e.calculative.gradient?f=e.calculative.gradient:(f=Fxe(t,e),e.calculative.gradient=f):f=Dxe(t,e):e.calculative.bkType===yf.Radial?e.calculative.gradientColors?e.calculative.radialGradient?f=e.calculative.radialGradient:(f=Lxe(t,e),e.calculative.radialGradient=f):f=Rxe(t,e):f=e.calculative.background||r.data.penBackground,t.fillStyle=o||f,o=!!f}if(g4(t,e),m4(t,e),bs(t,e),e.calculative.lineDash&&t.setLineDash(e.calculative.lineDash.map(f=>f*e.calculative.canvas.store.data.scale)),e.calculative.lineDashOffset&&(t.lineDashOffset=e.calculative.lineDashOffset),e.calculative.shadowColor&&(t.shadowColor=e.calculative.shadowColor,t.shadowOffsetX=e.calculative.shadowOffsetX,t.shadowOffsetY=e.calculative.shadowOffsetY,t.shadowBlur=e.calculative.shadowBlur),s?(c4(t,e),b4(!0,t,e,r)):(y4(!0,t,e,r,o),N4(t,e)),!(e.image&&e.calculative.img)&&e.calculative.icon&&v4(t,e),e.dropdownList&&p4(t,e),(!a||!i)&&t.restore(),a&&!i&&gs(t,e),!a&&i&&e.calculative.rotate&&e.name!=="line"&&No(t,e,!0),f4(t,e),e.type===Gt.Line&&e.fillTexts)for(const f of e.fillTexts)h4(t,e,f);t.restore()}function g4(t,e){const n=e.lineCap||(e.type?"round":"square");n?t.lineCap=n:e.type&&(t.lineCap="round")}function m4(t,e){const n=e.lineJoin;n?t.lineJoin=n:e.type&&(t.lineJoin="round")}function cg(t,e,n,r){var u;t.save(),n&&t.translate(-n.x,-n.y),(u=t.setAttrs)==null||u.call(t,e);let a=!1;const i=e.calculative.canvas.store,o=e.textFlip||i.options.textFlip,s=e.textRotate||i.options.textRotate;t.beginPath(),(!o||!s)&&t.save(),e.calculative.flipX&&(t.translate(e.calculative.worldRect.x+e.calculative.worldRect.ex,0),t.scale(-1,1)),e.calculative.flipY&&(t.translate(0,e.calculative.worldRect.y+e.calculative.worldRect.ey),t.scale(1,-1)),e.calculative.rotate&&e.name!=="line"&&No(t,e),(e.calculative.lineWidth>1||r)&&(t.lineWidth=e.calculative.lineWidth);let c;if(e.calculative.hover)t.strokeStyle=e.hoverColor||i.options.hoverColor,t.fillStyle=e.hoverBackground||i.options.hoverBackground,c=e.hoverBackground||i.options.hoverBackground;else if(e.calculative.active)t.strokeStyle=e.activeColor||i.options.activeColor,t.fillStyle=e.activeBackground||i.options.activeBackground,c=e.activeBackground||i.options.activeBackground;else{if(e.strokeImage)e.calculative.strokeImg&&(t.strokeStyle=t.createPattern(e.calculative.strokeImg,"repeat"),c=!0);else{let d;e.calculative.strokeType&&e.calculative.lineGradientColors&&e.name==="line"?a=!0:d=e.calculative.color||Sf(i),t.strokeStyle=d}e.backgroundImage?e.calculative.backgroundImg&&(t.fillStyle=t.createPattern(e.calculative.backgroundImg,"repeat"),c=!0):(t.fillStyle=e.background,c=!!e.background)}if(g4(t,e),m4(t,e),bs(t,e),e.calculative.lineDash&&t.setLineDash(e.calculative.lineDash),e.calculative.lineDashOffset&&(t.lineDashOffset=e.calculative.lineDashOffset),e.calculative.shadowColor&&(t.shadowColor=e.calculative.shadowColor,t.shadowOffsetX=e.calculative.shadowOffsetX,t.shadowOffsetY=e.calculative.shadowOffsetY,t.shadowBlur=e.calculative.shadowBlur),a?(c4(t,e),b4(!0,t,e,i)):(y4(!1,t,e,i,c),N4(t,e)),e.calculative.img?(t.save(),t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,uu(t,e),t.restore()):e.calculative.icon&&v4(t,e),e.dropdownList&&p4(t,e),(!o||!s)&&t.restore(),o&&!s&&(e.calculative.flipX&&(t.translate(e.calculative.worldRect.x+e.calculative.worldRect.ex,0),t.scale(-1,1)),e.calculative.flipY&&(t.translate(0,e.calculative.worldRect.y+e.calculative.worldRect.ey),t.scale(1,-1))),!o&&s&&e.calculative.rotate&&e.name!=="line"&&No(t,e,!0),f4(t,e),e.type===Gt.Line&&e.fillTexts)for(const d of e.fillTexts)h4(t,e,d);t.restore()}function y4(t=!0,e,n,r,a){if(n.name==="drawCommand")return;const i=t?r.path2dMap.get(n):gt.path2dDraws[n.name];let o=null,s=null;if(n.type===Gt.Line&&(n.fromLineCap&&n.fromLineCap!=="butt"&&(e.lineCap="butt",o=new Path2D,o.moveTo(n.calculative.worldAnchors[0].x,n.calculative.worldAnchors[0].y),o.lineTo(n.calculative.worldAnchors[0].x,n.calculative.worldAnchors[0].y)),n.toLineCap&&n.toLineCap!=="butt"&&(e.lineCap="butt",s=new Path2D,s.moveTo(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].x,n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].y),s.lineTo(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].x,n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].y))),i){if(n.type===Gt.Line&&n.borderWidth){e.save(),e.beginPath();const u=n.calculative.lineWidth+n.calculative.borderWidth;e.lineWidth=u,e.strokeStyle=n.borderColor,o&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(o),e.restore()),i instanceof Path2D?(a&&e.fill(i),u&&e.stroke(i)):(i(n,e),a&&e.fill(),u&&e.stroke()),s&&(e.save(),e.lineCap=n.toLineCap,e.stroke(s),e.restore()),e.restore()}i instanceof Path2D?n.type?n.close&&a&&e.fill(i):a&&e.fill(i):(e.save(),i(n,e),a&&e.fill(),e.restore());const c=n.calculative.progress;if(c!=null){e.save();const{ex:u,x:d,y:f,width:h,height:v,ey:p}=n.calculative.worldRect;let g=null;if(n.calculative.verticalProgress?g=n.reverseProgress?e.createLinearGradient(d,f,d,f+v*c):e.createLinearGradient(d,p,d,f+v*(1-c)):g=n.reverseProgress?e.createLinearGradient(u,f,d+h*(1-c),f):e.createLinearGradient(d,f,d+h*c,f),n.calculative.progressGradientColors){const{colors:m}=ps(n.calculative.progressGradientColors);m.forEach(y=>{g.addColorStop(y.i,y.color)})}else{const m=n.calculative.progressColor||n.calculative.color||r.options.activeColor;g.addColorStop(0,m),g.addColorStop(1,m)}g.addColorStop(1,"transparent"),e.fillStyle=g,i instanceof Path2D?e.fill(i):(i(n,e),e.fill()),e.restore()}if(n.calculative.lineWidth&&(i instanceof Path2D?(r.options.svgPathStroke||n.name!=="svgPath")&&(o&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(o),e.restore()),e.stroke(i),s&&(e.save(),e.lineCap=n.toLineCap,e.stroke(s),e.restore())):(i(n,e),e.stroke())),n.type){if(n.calculative.animatePos){if(e.save(),w4(e,n,r),n.lineAnimateType===Fa.Arrow||n.lineAnimateType===Fa.WaterDrop){let u=Q4(n,e);u instanceof Path2D?(e.stroke(u),e.fill(u)):(e.stroke(),e.fill())}else i instanceof Path2D?(o&&!n.lineAnimateType&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(o),e.restore()),e.lineCap=n.lineCap,e.stroke(i)):(i(n,e),e.stroke());e.restore()}n.fromArrow&&l4(e,n,r),n.toArrow&&s4(e,n,r),n.calculative.active&&!n.calculative.pencil&&!r.options.disableAnchor&&!r.data.locked&&x4(e,n)}}}function b4(t=!0,e,n,r){const a=t?r.path2dMap.get(n):gt.path2dDraws[n.name];if(a&&n.type){if(n.calculative.animatePos){if(e.save(),w4(e,n,r),e.beginPath(),a instanceof Path2D)if(n.lineName==="polyline"||n.lineName==="line")if(n.lineAnimateType===Fa.Arrow||n.lineAnimateType===Fa.WaterDrop){const i=Q4(n);e.stroke(i),e.fill(i)}else n.calculative.gradientSmooth||n.calculative.lineSmooth?(n.calculative.gradientAnimatePath||(n.calculative.gradientAnimatePath=_1(n)),n.calculative.gradientAnimatePath instanceof Path2D&&e.stroke(n.calculative.gradientAnimatePath)):e.stroke(a);else e.stroke(a);else a(n,e),e.stroke();e.restore()}n.fromArrow&&l4(e,n,r),n.toArrow&&s4(e,n,r),n.calculative.active&&!n.calculative.pencil&&!r.options.disableAnchor&&!r.data.locked&&x4(e,n)}}function w4(t,e,n){t.strokeStyle=e.animateColor||n.options.animateColor,e.animateShadow&&(t.shadowBlur=e.animateShadowBlur||e.animateLineWidth||6,t.shadowColor=e.animateShadowColor||e.animateColor||n.options.animateColor),e.calculative.animateLineWidth&&(t.lineWidth=e.calculative.animateLineWidth*n.data.scale);let r=0;switch(e.lineAnimateType){case Fa.Beads:e.animateReverse?t.lineDashOffset=e.calculative.animatePos:t.lineDashOffset=e.length-e.calculative.animatePos,r=e.calculative.lineWidth||5,r<5&&(r=5);const a=e.animateLineDash&&e.animateLineDash.map(i=>i*r/5);t.setLineDash(a||[r,r*2]);break;case Fa.Dot:e.animateReverse?t.lineDashOffset=e.calculative.animatePos:t.lineDashOffset=e.length-e.calculative.animatePos,r=e.calculative.animateDotSize||e.calculative.lineWidth*2||6,r<6&&(r=6),r>40&&(r=40),t.lineWidth=(e.calculative.animateLineWidth||r)*n.data.scale,t.setLineDash([.1,e.length]);break;case Fa.Arrow:t.fillStyle=e.animateColor||n.options.animateColor,t.lineWidth=1;break;case Fa.WaterDrop:t.fillStyle=e.animateColor||n.options.animateColor,t.lineWidth=1;break;default:e.animateReverse?(t.lineDashOffset=Number.EPSILON,t.setLineDash([0,e.length-e.calculative.animatePos+1,e.calculative.animatePos])):t.setLineDash([e.calculative.animatePos,e.length+.01-e.calculative.animatePos]);break}}function Sf(t){const{data:e,options:n}=t;return e.color||n.color}function x4(t,e){const n=e.calculative.canvas.store;t.save(),t.lineWidth=1,t.fillStyle=e.activeColor||n.options.activeColor,e.calculative.worldAnchors.forEach(r=>{!r.hidden&&!r.isTemp&&Xxe(t,r,e)}),t.restore()}function Xxe(t,e,n){if(!e)return;const r=n.calculative.canvas.store.activeAnchor===n.calculative.activeAnchor&&n.calculative.activeAnchor===e;let a=3;n.calculative.lineWidth>3&&(a=n.calculative.lineWidth),n.anchorRadius&&(a=n.anchorRadius),e.radius&&(a=e.radius),r?(e.prev&&(t.save(),t.strokeStyle="#4dffff",t.beginPath(),t.moveTo(e.prev.x,e.prev.y),t.lineTo(e.x,e.y),t.stroke(),t.restore(),t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.prev.x,e.prev.y,a,0,Math.PI*2),t.fill(),t.stroke(),t.restore()),e.next&&(t.save(),t.strokeStyle="#4dffff",t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.next.x,e.next.y),t.stroke(),t.restore(),t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.next.x,e.next.y,a,0,Math.PI*2),t.fill(),t.stroke(),t.restore(),t.beginPath(),t.arc(e.x,e.y,a,0,Math.PI*2),t.fill(),t.stroke()),t.beginPath(),t.arc(e.x,e.y,a,0,Math.PI*2),t.fill(),t.stroke()):(t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.x,e.y,a,0,Math.PI*2),t.fill(),t.stroke(),t.restore())}function C4(t){const e=t.calculative.canvas.store;let n={x:t.x,y:t.y};if(!t.parentId||t.parentId&&!e.pens[t.parentId])t.parentId=void 0,n.width=t.width,n.height=t.height,n.rotate=t.rotate,bn(n),cn(n),t.pivot&&A1(n,t.pivot);else{const r=e.pens[t.parentId];let a=r.calculative.worldRect;a||(a=C4(r)),n.x=a.x+a.width*t.x,n.y=a.y+a.height*t.y,n.width=a.width*t.width,n.height=a.height*t.height,r.flipX&&(n.x=a.width-(n.x-a.x+n.width)+a.x),r.flipY&&(n.y=a.height-(n.y-a.y+n.height)+a.y),bn(n),n.rotate=a.rotate+t.rotate,cn(n),t.pivot&&A1(n,t.pivot)}return t.calculative.worldRect=n,S1(t,n),n}function S1(t,e){!t.paddingTop&&(t.calculative.paddingTop=0),!t.paddingBottom&&(t.calculative.paddingBottom=0),!t.paddingLeft&&(t.calculative.paddingLeft=0),!t.paddingRight&&(t.calculative.paddingRight=0),Math.abs(t.calculative.paddingTop)<1&&(t.calculative.paddingTop*=e.height),Math.abs(t.calculative.paddingBottom)<1&&(t.calculative.paddingBottom*=e.height),Math.abs(t.calculative.paddingLeft)<1&&(t.calculative.paddingLeft*=e.width),Math.abs(t.calculative.paddingRight)<1&&(t.calculative.paddingRight*=e.width)}function ug(t){const e=Te(t.calculative.worldRect);if(delete e.pivot,!t.parentId){Object.assign(t,e);return}const r=t.calculative.canvas.store.pens[t.parentId].calculative.worldRect;Object.assign(t,hl(e,r))}function du(t){const e=t.calculative.canvas.store;let n=[];if(t.anchors){let r=Te(t.anchors);t.flipX&&r.forEach(a=>{a.x=.5-(a.x-.5)}),t.flipY&&r.forEach(a=>{a.y=.5-(a.y-.5)}),r.forEach(a=>{n.push(Jxe(t,a))})}if(!n.length&&!t.type&&!t.calculative.canvas.parent.isCombine(t)){const{x:r,y:a,width:i,height:o}=t.calculative.worldRect;n=e.options.defaultAnchors.map((s,c)=>({id:`${c}`,penId:t.id,x:r+i*s.x,y:a+o*s.y}))}t.calculative.rotate&&n.forEach(r=>{nn(r,t.calculative.rotate,t.calculative.worldRect.pivot||t.calculative.worldRect.center)}),(!t.type||t.anchors)&&(t.calculative.worldAnchors=n),t.calculative.activeAnchor&&n.length&&(t.calculative.activeAnchor=n.find(r=>{r.id,t.calculative.activeAnchor.id})),t.calculative.gradientAnimatePath=void 0}function _4(t){var e;if((e=t.children)!=null&&e.length){let n=t.calculative.worldRect;t.children.forEach(r=>{const a=t.calculative.canvas.store.pens[r];a.calculative.initRect&&a.calculative.initRelativeRect&&(a.calculative.initRect.x=n.x+n.width*a.calculative.initRelativeRect.x,a.calculative.initRect.y=n.y+n.height*a.calculative.initRelativeRect.y,a.calculative.initRect.ex=a.calculative.initRect.x+n.width*a.calculative.initRelativeRect.width,a.calculative.initRect.ey=a.calculative.initRect.y+n.height+a.calculative.initRelativeRect.height,cn(a.calculative.initRect)),_4(a)})}}function Jxe(t,e){const n={...e},{x:r,y:a,width:i,height:o}=t.calculative.worldRect;return n.x=r+i*e.x,n.y=a+o*e.y,e.prev&&(n.prev={penId:t.id,connectTo:e.prev.connectTo,x:r+i*e.prev.x,y:a+o*e.prev.y}),e.next&&(n.next={penId:t.id,connectTo:e.next.connectTo,x:r+i*e.next.x,y:a+o*e.next.y}),n}function S4(t,e){const{paddingTop:n,paddingBottom:r,paddingLeft:a,paddingRight:i}=e.calculative;let o=a,s=n,c=e.calculative.worldRect.width-a-i,u=e.calculative.worldRect.height-n-r,d=e.calculative.iconLeft,f=e.calculative.iconTop;d&&Math.abs(d)<1&&(d=e.calculative.worldRect.width*d),f&&Math.abs(f)<1&&(f=e.calculative.worldRect.height*f),o+=d||0,s+=f||0,c-=d||0,u-=f||0;let h=e.calculative.iconRotate||0;if(e.parentId){const v=t[e.parentId].calculative;v&&(h+=v.rotate,h%=360)}o=e.calculative.worldRect.x+o,s=e.calculative.worldRect.y+s,e.calculative.worldIconRect={x:o,y:s,width:c,height:u,rotate:h},bn(e.calculative.worldIconRect),cn(e.calculative.worldIconRect)}function fu(t,e,n){kf(t.calculative.worldRect,e,n,t.pivot),t.calculative.initRect&&kf(t.calculative.initRect,e,n,t.pivot),T4(t,e,n),t.calculative.x&&ng(t.calculative,e,n),t.type&&du(t)}function T4(t,e,n){var r;t&&(r=t.children)!=null&&r.length&&t.children.forEach(a=>{const i=t.calculative.canvas.store.pens[a];i&&(i.calculative.initRect&&kf(i.calculative.initRect,e,n),T4(i,e,n))})}function Qxe(t,e){t.anchors||(t.anchors=[]),t.calculative.worldAnchors||(t.calculative.worldAnchors=[]);const n={id:e.id,penId:t.id,x:e.x,y:e.y};if(t.calculative.worldAnchors.push(n),t.calculative.worldRect){t.rotate%360&&nn(e,-t.rotate,t.calculative.worldRect.center);const r={id:e.id,penId:t.id,x:(e.x-t.calculative.worldRect.x)/t.calculative.worldRect.width,y:(e.y-t.calculative.worldRect.y)/t.calculative.worldRect.height};t.anchors.push(r)}return n}function Zxe(t,e,n){t.anchors||(t.anchors=[]),t.calculative.worldAnchors||(t.calculative.worldAnchors=[]);const r=GCe(t,e,n);return t.calculative.worldAnchors.splice(n+1,0,r),t.anchors.splice(n+1,0,Of(r,t.calculative.worldRect)),t.calculative.activeAnchor=r,r}function Vxe(t,e){if(!t||!t.calculative.worldAnchors)return;let n=t.calculative.worldAnchors.findIndex(r=>r.id===e.id);n>-1&&t.calculative.worldAnchors.splice(n,1),n=t.anchors.findIndex(r=>r.id===e.id),n>-1&&t.anchors.splice(n,1)}function hu(t,e){if(!e||!e.calculative||!e.calculative.worldRect.center)return Pt.None;if(t.anchorId){let n=e.anchors.filter(r=>r.id===t.anchorId);if(n.length&&n[0].direction>-1)return n[0].direction}return yxe(t,e.calculative.worldRect.center)}function vu(t,e){let n=1/0,r;return t.calculative.worldAnchors.forEach(a=>{const i=rg(e,a);n>i&&(n=i,r=a)}),r}function k4(t,e,n){t.x+=e,t.y+=n,t.anchors&&t.anchors.forEach(r=>{wf(r,e,n)}),t.calculative.worldAnchors&&t.calculative.worldAnchors.forEach(r=>{wf(r,e,n)})}function T1(t){if(t&&t.calculative&&t.calculative.worldAnchors.length){let e=Xt(t);if(!t.anchors||!t.anchors.length)for(;t.calculative.worldAnchors.length&&e!==t.calculative.activeAnchor;)t.calculative.worldAnchors.pop(),e=Xt(t);else e===t.calculative.activeAnchor?t.calculative.worldAnchors=[t.calculative.worldAnchors[0]]:t.calculative.worldAnchors[0]===t.calculative.activeAnchor&&(t.calculative.worldAnchors=[t.calculative.worldAnchors[t.calculative.worldAnchors.length-1]])}}function Zn(t,e,n,r){var s,c,u,d,f,h;if(!t||!e||!n||!r||e.twoWay===yr.DisableConnected||e.twoWay===yr.Disable||r.twoWay===yr.DisableConnectTo||r.twoWay===yr.Disable)return;if(e.twoWay===yr.In){if(n.calculative.worldAnchors.length===1)return;const v=Xt(n);if(r.id!==v.id)return}if(e.twoWay===yr.Out){const v=Sn(n);if(r.id!==v.id)return}if(r.connectTo===t.id&&r.anchorId===e.id)return;if(r.connectTo){const v=t.calculative.canvas.store.pens[r.connectTo];pu(v,ys(v,r.anchorId),n,r)}t.connectedLines||(t.connectedLines=[]),t.connectedLines.findIndex(v=>v.lineId===n.id&&v.lineAnchor===r.id&&v.anchor===e.id)<0&&t.connectedLines.push({lineId:n.id,lineAnchor:r.id,anchor:e.id}),r.connectTo=t.id,r.anchorId=e.id,t.type&&Zn(n,r,t,e),t.calculative.canvas.store.emitter.emit("connectLine",{line:n,lineAnchor:r,pen:t,anchor:e});let i=((s=n.calculative.worldAnchors)==null?void 0:s.length)>=2?(c=n.calculative.worldAnchors)==null?void 0:c[0].connectTo:void 0,o=((u=n.calculative.worldAnchors)==null?void 0:u.length)>=2?(f=n.calculative.canvas.store.pens[(d=n.calculative.worldAnchors)==null?void 0:d[0].connectTo])==null?void 0:f.anchors.find(v=>{var p;return v.id===((p=n.calculative.worldAnchors)==null?void 0:p[0].anchorId)}):void 0;return(h=t.onConnectLine)==null||h.call(t,t,{line:n,lineAnchor:r,pen:t,anchor:e,fromPen:i,fromAnchor:o}),!0}function pu(t,e,n,r){if(!(!t||!e||!n||!r)&&!(!t.connectedLines||!t.connectedLines.length))return n.lastConnected||(n.lastConnected={}),n.lastConnected[t.id]||(n.lastConnected[t.id]=Te(t.connectedLines)),t.connectedLines.forEach((a,i,o)=>{(a.lineId===n.id||a.lineId===n.id)&&a.lineAnchor===r.id&&a.anchor===e.id&&o.splice(i,1)}),r.connectTo=void 0,r.anchorId=void 0,t.type&&e.connectTo===n.id&&e.anchorId===r.id&&pu(n,r,t,e),t.calculative.canvas.store.emitter.emit("disconnectLine",{line:n,lineAnchor:r,pen:t,anchor:e}),!0}function ys(t,e){var n;if(!(!t||!e))return(n=t.calculative.worldAnchors)==null?void 0:n.find(r=>r.id===e)}function Sn(t){if(!(!t||!t.calculative.worldAnchors))return t.calculative.worldAnchors[0]}function Xt(t){if(!(!t||!t.calculative.worldAnchors))return t.calculative.worldAnchors[t.calculative.worldAnchors.length-1]}function eCe(t,e){var r,a;if(t.calculative.start===0||!t.frames||!t.frames.length)return t.calculative.start=void 0,0;if(!t.calculative.duration){t.calculative.duration=0;for(const i of t.frames){t.calculative.duration+=i.duration;for(const o in i)o!=="duration"&&!t[o]&&o==="scale"&&(t[o]=1)}}if(t.animateCycle||(t.animateCycle=1/0),t.calculative.start){let i=0;const o=Math.ceil((e-t.calculative.start)/t.calculative.duration);if(o>t.animateCycle)return t.currentAnimation=void 0,t.calculative.start=void 0,E4(t,1),0;const s=(e-t.calculative.start)%t.calculative.duration;let c=0;for(const f of t.frames)if(c+=f.duration,s>c)++i;else break;if(!t.frames[i])return!0;t.calculative.frameDuration=t.frames[i].duration,t.calculative.frameStart=t.calculative.start+t.calculative.duration*(o-1),t.calculative.frameEnd=t.calculative.frameStart+t.calculative.frameDuration;const u=i!==t.calculative.frameIndex,d=o>t.calculative.cycleIndex;if(u&&(t.calculative.frameIndex=i),d&&(t.calculative.cycleIndex=o),u||d)if(t.calculative.x=t.calculative.initRect.x,t.calculative.y=t.calculative.initRect.y,(a=t.children)!=null&&a.length&&!t.parentId?t.calculative.canvas.rotatePen(t,(t.calculative.initRect.rotate||0)-(t.calculative.rotate||0),t.calculative.initRect):t.calculative.rotate=t.calculative.initRect.rotate||0,i>0){t.prevFrame={};const f=t.frames[i-1];for(const h in f)t.prevFrame[h]=f[h];Object.assign(t.prevFrame,{rotate:f.rotate||0,x:f.x||0,y:f.y||0,scale:f.scale||1})}else O4(t)}else{if(t.calculative.start=e,t.calculative.frameIndex=0,t.calculative.frameStart=t.calculative.start,t.calculative.frameDuration=t.frames[0].duration,t.calculative.frameEnd=t.calculative.frameStart+t.calculative.frameDuration,t.calculative.cycleIndex=1,t.calculative.x=t.calculative.worldRect.x,t.calculative.y=t.calculative.worldRect.y,t.calculative.initRect=Te(t.calculative.worldRect),t.parentId&&(t.calculative.initRelativeRect={x:t.x,y:t.y,width:t.width,height:t.height}),(r=t.children)!=null&&r.length){const i=t.calculative.canvas.store;t.calculative.childrenVisible={},t.children.forEach(o=>{t.calculative.childrenVisible[o]=i.pens[o].visible})}t.calculative.initRect.rotate=t.calculative.rotate||0,O4(t)}const n=(e-t.calculative.frameStart)/t.calculative.frameDuration%1;return E4(t,n),!0}function O4(t){t.prevFrame={};for(const e in t)(typeof t[e]!="object"||e==="lineDash")&&(t.prevFrame[e]=t[e]);t.prevFrame.rotate=0,t.prevFrame.x=0,t.prevFrame.y=0,t.prevFrame.scale=1}function E4(t,e){var r,a;if(e<0)return;e>1&&(e=1);const n=t.frames[t.calculative.frameIndex];for(const i in n)if(i!=="duration"){if(i==="scale"){t.calculative.worldRect=Te(t.calculative.initRect),kf(t.calculative.worldRect,t.prevFrame.scale,t.calculative.worldRect.center);const o=t.prevFrame.scale+(n[i]-t.prevFrame.scale)*e;kf(t.calculative.worldRect,o/t.prevFrame.scale,t.calculative.worldRect.center),t.calculative.patchFlags=!0}else if(i==="x"){const o=O1(t,i,t.calculative.frameIndex);t.calculative.worldRect.x=t.calculative.initRect.x+o,t.calculative.worldRect.ex=t.calculative.initRect.ex+o,xs(t.calculative.worldRect,n[i]*e*t.calculative.canvas.store.data.scale,0),t.calculative.patchFlags=!0}else if(i==="y"){const o=O1(t,i,t.calculative.frameIndex);t.calculative.worldRect.y=t.calculative.initRect.y+o,t.calculative.worldRect.ey=t.calculative.initRect.ey+o,xs(t.calculative.worldRect,0,n[i]*e*t.calculative.canvas.store.data.scale),t.calculative.patchFlags=!0}else if(i==="rotate"){t.prevFrame[i]>=360&&(t.prevFrame[i]%=360);const o=O1(t,i,t.calculative.frameIndex),s=(t.calculative.initRect.rotate+o+n[i]*e)%360-(t.calculative.rotate||0);(r=t.children)!=null&&r.length?t.calculative.canvas.rotatePen(t,s,t.calculative.initRect):t.calculative.rotate=(t.calculative.initRect.rotate+o+n[i]*e)%360,t.calculative.patchFlags=!0}else if(i==="image")t.image=n.image,t.calculative.image=void 0,t.calculative.canvas.loadImage(t),t.canvasLayer===Wt.CanvasImageBottom?t.calculative.canvas.canvasImageBottom.init():t.canvasLayer===Wt.CanvasImage&&t.calculative.canvas.canvasImage.init();else if(tCe(n[i],i,t)){t.prevFrame[i]==null&&(i==="globalAlpha"?t.prevFrame[i]=1:t.prevFrame[i]=0);const o=t.prevFrame[i]+(n[i]-t.prevFrame[i])*e;t.calculative[i]=Math.round(o*100)/100}else{if(i==="visible"){if(t.calculative.image)t.canvasLayer===Wt.CanvasImageBottom?t.calculative.canvas.canvasImageBottom.init():t.canvasLayer===Wt.CanvasImage&&t.calculative.canvas.canvasImage.init();else if((a=t.children)!=null&&a.length){const s=fi(t,t.calculative.canvas.store);t.calculative.canvas.initImageCanvas(s)}}t.calculative[i]=n[i];const o={};o[i]=n[i],E1(t,o)}i==="text"&&_f(t)}}function tCe(t,e,n){const r=["strokeType","bkType","showChild"];return typeof t=="number"&&n.linear!==!1&&!r.includes(e)}function nCe(t,e){if(t.calculative.start===0)return t.calculative.start=void 0,0;if(t.animateCycle||(t.animateCycle=1/0),t.animateSpan||(t.animateSpan=1),t.calculative.animatePos+=t.animateSpan*(t.calculative.canvas.store.data.scale||1),!t.calculative.start)t.calculative.start=Date.now(),t.calculative.animatePos=t.animateSpan*(t.calculative.canvas.store.data.scale||1),t.calculative.cycleIndex=1;else if(t.calculative.animatePos>t.length){if(++t.calculative.cycleIndex,t.calculative.cycleIndex>t.animateCycle)return t.currentAnimation=void 0,t.calculative.start=void 0,0;t.calculative.animatePos=t.animateSpan}return!0}function gu(t,e=!0){if(!t.children||t.childActive===!1)return;const n=t.calculative.canvas.store;t.children.forEach(r=>{const a=n.pens[r];a&&(a.calculative.active=e,gu(a,e))})}function Tf(t,e=!0){if(!t)return;const n=t.calculative.canvas.store;t.calculative.hover=e,t.childHover!==!1&&t.children&&t.children.forEach(r=>{var a,i;((a=n.pens[r])==null?void 0:a.hoverColor)==null&&((i=n.pens[r])==null?void 0:i.hoverBackground)==null&&Tf(n.pens[r],e)})}function dr(t,e){if(!e)return;const n=t.calculative.canvas.store,r=t.calculative.worldRect;e.style.opacity=t.globalAlpha+"",e.style.position="absolute",e.style.outline="none",e.style.left=r.x+n.data.x+"px",e.style.top=r.y+n.data.y+"px",e.style.width=r.width+"px",e.style.height=r.height+"px",e.style.display=t.calculative.inView!=!1?t.calculative.cssDisplay||"inline":"none",!t.calculative.rotate&&(t.calculative.rotate=0),e.style.transform=`rotate(${t.calculative.rotate}deg)`,t.calculative.rotate||(t.calculative.flipX&&(e.style.transform="rotateY(180deg)"),t.calculative.flipY&&(e.style.transform="rotateX(180deg)"),t.calculative.flipX&&t.calculative.flipY&&(e.style.transform="rotateZ(180deg)")),e.style.zIndex=t.calculative.zIndex!==void 0?t.calculative.zIndex+"":"5",t.calculative.zIndex>t.calculative.canvas.maxZindex&&(t.calculative.canvas.maxZindex=t.calculative.zIndex),t.locked===Ft.DisableEdit||t.locked===Ft.DisableMove||n.data.locked?(e.style.userSelect="initial",e.style.pointerEvents="initial",t.name==="gif"&&(e.style.userSelect="none",e.style.pointerEvents="none")):(e.style.userSelect="none",e.style.pointerEvents="none")}function k1(t){return t.every(e=>e.locked)}function P4(t){return t.every(e=>e.disableRotate)}function I4(t,e,n){var r;t.type?(t.calculative.worldAnchors.forEach(a=>{nn(a,e,n.center)}),rCe(t),ug(t)):(t.calculative.rotate?t.calculative.rotate+=e:t.calculative.rotate=e,nn(t.calculative.worldRect.center,e,n.center),t.parentId&&(t.calculative.worldRect.x=t.calculative.worldRect.center.x-t.calculative.worldRect.width/2,t.calculative.worldRect.y=t.calculative.worldRect.center.y-t.calculative.worldRect.height/2,t.x=(t.calculative.worldRect.x-n.x)/n.width,t.y=(t.calculative.worldRect.y-n.y)/n.height)),(r=t.children)==null||r.forEach(a=>{const i=t.calculative.canvas.store.pens[a];I4(i,e,n)})}function rCe(t){var a;if(!((a=t.calculative.worldAnchors)!=null&&a.length)||!isFinite(t.x)||!isFinite(t.x)||t.x==null||t.y==null)return;const e=L1(t);t.parentId||Object.assign(t,e);const{fontSize:n,lineHeight:r}=t.calculative.canvas.store.options;t.fontSize?t.fontSize<0&&(t.fontSize=0,t.calculative.fontSize=0):(t.fontSize=n>=0?n:12,t.calculative.fontSize=t.fontSize*t.calculative.canvas.store.data.scale),t.lineHeight||(t.lineHeight=r,t.calculative.lineHeight=t.lineHeight),cn(e),t.calculative.worldRect=e,S1(t,e),Bi(t),t.calculative.worldAnchors&&(t.anchors=t.calculative.worldAnchors.map(i=>Of(i,t.calculative.worldRect)))}function A4(t){return t.every(e=>e.disableSize||e.pivot)}function O1(t,e,n){if(!t.frames||!e)return 0;let r=0;for(let a=0;a<n;a++)t.frames[a]&&(r+=t.frames[a][e]||0);return r}function dg(t,e){var r;let n=t;for(;n&&n.parentId;){const a=n;n=e.pens[n.parentId];const i=(r=n==null?void 0:n.calculative)==null?void 0:r.showChild;if(i!=null&&n.children[i]!==a.id)return!1}return!0}function Do(t,e=!1){var a,i;const{store:n,canvasRect:r}=t.calculative.canvas;if(e&&((a=t.children)==null||a.forEach(o=>{const s=n.pens[o];s&&Do(s,!0)})),t.calculative.inView=!0,!dg(t,n)||t.visible==!1||t.calculative.visible==!1)t.calculative.inView=!1;else{const{x:o,y:s,width:c,height:u,rotate:d}=t.calculative.worldRect,f={x:o+n.data.x,y:s+n.data.y,width:c,height:u,rotate:d};bn(f),Mo(f,r)||(t.calculative.inView=!1)}(i=t.calculative.singleton)!=null&&i.div&&dr(t,t.calculative.singleton.div)}function aCe(t,e,n){if(e.fillWorldTextRect){t.save(),t.fillStyle="#c3deb7";const{x:r,y:a,width:i,height:o}=n.calculative.worldTextRect;t.fillRect(r,a,i,o),t.restore()}}function bs(t,e){const n=e.calculative.globalAlpha;typeof n=="number"&&n<1&&!isNaN(n)&&(t.globalAlpha=n)}function N4(t,e){const n=iCe(t,e)||gt.canvasDraws[e.name];n&&(t.save(),n(t,e),t.restore())}function iCe(t,e){const n=e.drawCommand;if(!(!n||e.name==="line"))return(r,a)=>{n.forEach(i=>{try{i.steps=i.steps.flat(1/0),i.steps.reduce((o,s)=>{const c=oCe(s,a,o.x,o.y);try{if(c.c){if(c.c.startsWith("_")){const d=c.c.split("_")[1];return typeof c.v.value=="number"&&(c.v.value*=a.calculative.canvas.store.data.scale),(c.p||r)[d]=c.v.value,{x:o.x,y:o.y}}let u=[];for(const d in c.v)u.push(c.v[d]);return(c.p||r)[c.c](...u),{x:c.startX||c.v.x,y:c.startY||c.v.y}}return{x:o.x,y:o.y}}catch{}},{})}catch{}}),r.stroke()}}function oCe(t,e,n,r){return{visio:sCe,dxf:lCe}[e.parseType](t,e,n,r)}function lCe(t,e,n,r){const{x:a,y:i,width:o,height:s}=e.calculative.worldRect,{originWidth:c,originHeight:u}=e.dxfOrigin;switch(t.c){case"beginPath":return{c:"beginPath",v:{}};case"closePath":return{c:"closePath",v:{}};case"moveTo":return{c:"moveTo",v:{x:t.v.x*(o/c)+a,y:t.v.y*(s/u)+i}};case"lineTo":return{c:"lineTo",v:{x:t.v.x*(o/c)+a,y:t.v.y*(s/u)+i}};case"arc":return{c:"ellipse",v:{x:t.v.x*(o/c)+a,y:t.v.y*(s/u)+i,rx:t.v.xr*(o/c),ry:t.v.yr*(s/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"ellipse":return{c:"ellipse",v:{x:t.v.x*(o/c)+a,y:t.v.y*(s/u)+i,rx:t.v.xr*(o/c),ry:t.v.yr*(s/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"_font":return{c:"_font",v:{value:t.v.fontSize*e.calculative.canvas.store.data.scale+"px "+(t.v.fontFamily||e.calculative.canvas.store.options.fontFamily)}};case"_fillStyle":return{c:"_fillStyle",v:{value:e.color||t.v.value}};default:const d={c:t.c,v:{...t.v}};return d.v.x!==void 0&&(d.v.x=t.v.x*(o/c)+a),d.v.y!==void 0&&(d.v.y=t.v.y*(s/u)+i),d}}function sCe(t,e,n,r){const{x:a,y:i,width:o,height:s}=e.calculative.worldRect,{width:c,height:u}=e.origin;switch(t.c){case"MoveTo":return{c:"moveTo",v:{x:+t.v.X*100*(o/c)+a,y:+t.v.Y*100*(s/u)+i}};case"RelMoveTo":return{c:"moveTo",v:{x:+t.v.X*c*(o/c)+a,y:+t.v.Y*u*(s/u)+i}};case"LineTo":return{c:"lineTo",v:{x:+t.v.X*100*(o/c)+a,y:+t.v.Y*100*(s/u)+i}};case"RelLineTo":return{c:"lineTo",v:{x:+t.v.X*c*(o/c)+a,y:+t.v.Y*u*(s/u)+i}};case"Ellipse":let d=t.v.X,f=t.v.Y,h=Math.abs(t.v.A-t.v.C),v=Math.abs(t.v.B-t.v.D);return{c:"ellipse",v:{x:d*100*(o/c)+a,y:f*100*(s/u)+i,radiuX:h*100*(o/c),radiuY:v*100*(s/u),rotation:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!0}};case"EllipticalArcTo":const p=t.v.X*100*(o/c)+a,g=t.v.Y*100*(s/u)+i,m=t.v.A*100*(o/c)+a,y=t.v.B*100*(s/u)+i;t.v.C;const b=t.v.D*(o/s)*(u/c),w=(p-n)*(y-r)-(g-r)*(m-n)>0,x=D4(n,r,p,g,m,y,b);return!t.orign&&(t.orign={}),!t.orign.startA&&(t.orign.startA=fg(x.x0,x.y0,n,r)),!t.orign.endA&&(t.orign.endA=fg(x.x0,x.y0,p,g)),{c:"ellipse",v:{centerX:x.x0,centerY:x.y0,radiuX:x.a,radiuY:x.b,rotation:0,startAngle:t.orign.startA,endAngle:t.orign.endA,anticlockwise:w},startX:p,startY:g};case"RelEllipticalArcTo":const C=t.v.X*c*(o/c)+a,S=t.v.Y*u*(s/u)+i,_=t.v.A*c*(o/c)+a,O=t.v.B*u*(s/u)+i;t.v.C;const N=t.v.D*(o/s)*(u/c),B=(C-n)*(O-r)-(S-r)*(_-n)>0,T=D4(n,r,C,S,_,O,N);return!t.orign&&(t.orign={}),!t.orign.startA&&(t.orign.startA=fg(T.x0,T.y0,n,r)),!t.orign.endA&&(t.orign.endA=fg(T.x0,T.y0,C,S)),{c:"ellipse",v:{centerX:T.x0,centerY:T.y0,radiuX:T.a,radiuY:T.b,rotation:0,startAngle:t.orign.startA,endAngle:t.orign.endA,anticlockwise:B},startX:C,startY:S};case"ArcTo":let k=t.v.X*100*o/c+a,E=t.v.Y*100*s/u+i,I=t.v.A*100*(o/s)*(u/c),A=(n+k)/2,M=(r+E)/2,$=Math.sqrt((k-n)**2+(E-r)**2),U=$**2/(8*I)+I/2,F=-(E-r)/$,j=(k-n)/$,W=A+F*U,H=M+j*U,J=W,Y=H,D=Math.atan2(r-Y,n-J),q=Math.atan2(E-Y,k-J);return{c:"arc",v:{x:J,y:Y,radius:U,startAngle:D,endAngle:q,aclockwise:!0}};default:const z=Te(t);return Object.entries(z.v).forEach(([K,P])=>{var R,X;(R=K.endsWith)!=null&&R.call(K,"_x")?typeof P=="number"&&(z.v[K]=P*(o/c)+a):(X=K.endsWith)!=null&&X.call(K,"_y")?typeof P=="number"&&(z.v[K]=P*(s/u)+i):typeof P=="number"&&(z.v[K]=P)}),z}}function E1(t,e){for(const n in e)t4.includes(n)&&(n=="fontSize"&&e[n]<0&&(e[n]=0),t[n]=e[n],["fontSize","lineWidth"].includes(n)?(t.calculative[n]=e[n]*t.calculative.canvas.store.data.scale,Bi(t)):t.calculative[n]=e[n]);if(t.calculative.canvas.parent.isCombine(t)){const n=t.children;n==null||n.forEach(r=>{let a=Te(e);t.calculative.childrenVisible&&t.calculative.childrenVisible[r]===!1&&delete a.visible;const i=t.calculative.canvas.store.pens[r];i&&E1(i,a)})}}function D4(t,e,n,r,a,i,o){let s=(t-n)*(t+n)*(r-i)-(n-a)*(n+a)*(e-r)+o*o*(e-r)*(r-i)*(e-i),c=2*((t-n)*(r-i)-(n-a)*(e-r)),u=s/c,d=(t-n)*(n-a)*(t-a)+o*o*((n-a)*(e-r)*(e+r)-(t-n)*(r-i)*(r+i)),f=2*o*o*((n-a)*(e-r)-(t-n)*(r-i)),h=d/f,v=Math.sqrt(Math.pow(t-u,2)+Math.pow(o*(e-h),2)),p=v/o;return{x0:u,y0:h,a:v,b:p}}function fg(t,e,n,r){let a=n-t,i=r-e,o=Math.atan2(i,a);return o<0&&(o+=2*Math.PI),o}function R4(t,e,n){let r,a,i=1/0,o=1/0;const s=8;for(const c of t.data.pens){if(c.calculative.inView===!1)continue;P1(c).forEach(d=>{if(d===e||d===n)return;let f=(c.calculative.worldRect.center.x-e.x)*(c.calculative.worldRect.center.x-e.x)+(c.calculative.worldRect.center.y-e.y)*(c.calculative.worldRect.center.y-e.y);const h=Math.abs(d.x-e.x);h>0&&h<s&&f<i&&(r={x:Math.round(d.x)+.5,y:Math.round(d.y)+.5,prev:{x:Math.round(e.x)+.5,y:Math.round(e.y)+.5},step:d.x-e.x},i=f);const v=Math.abs(d.y-e.y);v>0&&v<s&&f<o&&(a={x:Math.round(d.x)+.5,y:Math.round(d.y)+.5,prev:{x:Math.round(e.x)+.5,y:Math.round(e.y)+.5},step:d.y-e.y},o=f)})}return{xDock:r,yDock:a}}function cCe(t,e,n,r){let a=[];return n.length===1?(a=Te(P1(n[0])),a.forEach(i=>{i.x+=r.x,i.y+=r.y})):(cn(e),a=[e.center,...Ro(e)]),M4(t,a,e,!0)}function P1(t){if(t.type){if(t.type===Gt.Line)return t.calculative.worldAnchors}else{const e=Ro(t.calculative.worldRect);return cn(t.calculative.worldRect),[...t.calculative.worldAnchors,...e,t.calculative.worldRect.center]}}function uCe(t,e,n,r){const a=Ro(e);return M4(t,a,e)}function M4(t,e,n,r=!1){let a,i,o=1/0,s=1/0;const c=10,u=gCe(n,c);return t.data.pens.forEach(d=>{const{inView:f,worldRect:h,active:v}=d.calculative;if(f===!1||!r&&v||pCe(u,h)||d.type&&t.active.some(g=>L4(t,g,d)))return;const p=P1(d);if(p)for(const g of p)for(const m of e){const y=g.x-m.x,b=g.y-m.y,w=Math.abs(y),x=Math.abs(b);n.center||(n.center={x:n.x+n.width/2,y:n.y+n.height/2}),w<c&&w<o&&(a={x:Math.round(g.x)+.5,y:Math.round(g.y)+.5,step:y,prev:{x:Math.round(m.x)+.5,y:Math.round(m.y)+.5},penId:d.id,anchorId:m.id,dockAnchorId:g.id},o=w),x<c&&x<s&&(i={x:Math.round(g.x)+.5,y:Math.round(g.y)+.5,step:b,prev:{x:Math.round(m.x)+.5,y:Math.round(m.y)+.5},penId:d.id,anchorId:m.id,dockAnchorId:g.id},s=x)}}),{xDock:a,yDock:i}}function L4(t,e,n){if(!n.type)return!1;if(Array.isArray(e==null?void 0:e.connectedLines)){for(const r of e==null?void 0:e.connectedLines)if(r.lineId===n.id)return!0}if(Array.isArray(e==null?void 0:e.children))for(const r of e.children){const a=t.pens[r];if(L4(t,a,n))return!0}return!1}function I1(t,e){return t.toFixed(12)==e}function F4(t){if(t.id=it(),Array.isArray(t.anchors))for(const e of t.anchors)t.type&&(e.id=it()),e.penId=t.id,e.prev&&(t.type&&(e.prev.id=it()),e.prev.penId=t.id),e.next&&(t.type&&(e.next.id=it()),e.next.penId=t.id)}function dCe(){let t=null,e=new Map;return(n,r,a,i=!1)=>{if(e.has(n)&&e.get(n)?t=e.get(n):e.set(n,t=new Map),typeof a!="function")return()=>{console.warn("[rewritePenLifeCycle] warn: not a function ")};let o=new Set,s=new Map;t.has(r)&&t.get(r)?o=t.get(r):(s.set(r,n[r]),t.set(r,o)),i?o.delete(a):o.add(a);let c=s.get(r),u=(...d)=>{c==null||c(...d),o.forEach(f=>{f(...d)})};n[r]=u}}let fCe=dCe();function hCe(t){return!t.name&&!t.install?(console.error("installPenPlugin Error: Validation Failed"),!1):!0}function fl(t,e){if(!e)return;if(e.ex==null&&bn(e),!e.rotate||e.rotate%360===0)return t.x>e.x&&t.x<e.ex&&t.y>e.y&&t.y<e.ey;e.center||cn(e);const n=[{x:e.x,y:e.y},{x:e.ex,y:e.y},{x:e.ex,y:e.ey},{x:e.x,y:e.ey}];return n.forEach(r=>{nn(r,e.rotate,e.pivot||e.center)}),vCe(t,n)}function ws(t,e,n=0){const{x:r,y:a,ex:i,ey:o}=e;return t.x>=r-n&&t.x<=i+n&&t.y>=a-n&&t.y<=o+n}function cn(t){t.center||(t.center={}),t.center.x=t.x+t.width/2,t.center.y=t.y+t.height/2}function bn(t){t.ex=t.x+t.width,t.ey=t.y+t.height}function A1(t,e){t.pivot||(t.pivot={}),t.pivot.x=t.x+t.width*e.x,t.pivot.y=t.y+t.height*e.y}function vCe(t,e){if(e.length<3)return!1;let n=!1,r=e[e.length-1];for(const a of e)r.y>t.y!=a.y>t.y&&a.x+(t.y-a.y)*(r.x-a.x)/(r.y-a.y)>t.x&&(n=!n),r=a;return n}function hi(t){const e=[];t.forEach(r=>{if(r.isRuleLine)return;const a=r.calculative.worldRect;if(a){const i=Ro(a);e.push(...i)}});const n=mu(e);return cn(n),n}function Ro(t){const e=[{x:t.x,y:t.y},{x:t.ex,y:t.y},{x:t.ex,y:t.ey},{x:t.x,y:t.ey}];return t.rotate&&(t.center||cn(t),e.forEach(n=>{nn(n,t.rotate,t.pivot||t.center)})),e}function mu(t){let e=1/0,n=1/0,r=-1/0,a=-1/0;return t==null||t.forEach(i=>{!isFinite(i.x)||!isFinite(i.y)||(e=Math.min(e,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x),a=Math.max(a,i.y))}),{x:e,y:n,ex:r,ey:a,width:r-e,height:a-n}}function Mo(t,e,n){return t.rotate&&(t=mu(Ro(t))),n?t.x>e.x&&t.ex<e.ex&&t.y>e.y&&t.ey<e.ey:!(t.x>e.ex||t.ex<e.x||t.ey<e.y||t.y>e.ey)}function pCe(t,e){return(e.x>t.ex||e.ex<t.x)&&(e.y>t.ey||e.ey<t.y)}function gCe(t,e){const n=Io(e),r={x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2]};return bn(r),r}function xs(t,e,n){t.x+=e,t.y+=n,t.ex+=e,t.ey+=n,t.center&&(t.center.x+=e,t.center.y+=n),t.pivot&&(t.pivot.x+=e,t.pivot.y+=n)}function mCe(t,e){const n=(t.to.y-t.from.y)/(t.to.x-t.from.x),r=(e.to.y-e.from.y)/(e.to.x-e.from.x);return N1({k:n,point:t.from},{k:r,point:e.from})}function N1(t,e){if(I1(t.k,0))return{x:e.point.x,y:t.point.y};if(I1(e.k,0))return{x:t.point.x,y:e.point.y};const n=t.point.y-t.k*t.point.x,a=(e.point.y-e.k*e.point.x-n)/(t.k-e.k),i=t.k*a+n;return{x:a,y:i}}function yCe(t,e){const n=mCe({from:t[0],to:t[2]},{from:t[1],to:t[3]});for(const r of t)nn(r,-e,n);return mu(t)}function B4(t,e,n,r){let a=t.rotate?t.rotate%360:0;if(a){const i=Ro(t),o=(i[0].y-i[1].y)/(i[0].x-i[1].x),s=(i[1].y-i[2].y)/(i[1].x-i[2].x);if(r<4){if(i[r].x+=e,t.ratio)if(r===0||r===2){let d=e*Math.tan((90-(360-a)-Math.atan(t.width/t.height)/Math.PI*180)/180*Math.PI);i[r].y+=d}else{let d=e*Math.tan((90-(360-a)+Math.atan(t.width/t.height)/Math.PI*180)/180*Math.PI);i[r].y+=d}else i[r].y+=n;const u=i[(r+2)%4];i[(r+1)%4]=N1({k:r%2?s:o,point:i[r]},{k:r%2?o:s,point:u}),i[(r+4-1)%4]=N1({k:r%2?o:s,point:i[r]},{k:r%2?s:o,point:u})}else{const u=[4,6].includes(r)?s:o;I1(u,0)?(i[r%4].x+=e,i[(r+1)%4].x+=e):(i[r%4].y+=n,i[r%4].x+=n/u,i[(r+1)%4].y+=n,i[(r+1)%4].x+=n/u)}if((i[0].x-i[1].x)**2+(i[0].y-i[1].y)**2<25||(i[1].x-i[2].x)**2+(i[1].y-i[2].y)**2<25)return;const c=yCe(i,t.rotate);cn(c),Object.assign(t,c);return}switch(r){case 0:if(t.width-e<5||t.height-n<5)break;t.x+=e,t.y+=n,t.width-=e,t.height-=n;break;case 1:if(t.width+e<5||t.height-n<5)break;t.ex+=e,t.y+=n,t.width+=e,t.height-=n;break;case 2:if(t.width+e<5||t.height+n<5)break;t.ex+=e,t.ey+=n,t.width+=e,t.height+=n;break;case 3:if(t.width-e<5||t.height+n<5)break;t.x+=e,t.ey+=n,t.width-=e,t.height+=n;break;case 4:if(t.height-n<5)break;t.y+=n,t.height-=n;break;case 5:if(t.width+e<5)break;t.ex+=e,t.width+=e;break;case 6:if(t.height+n<5)break;t.ey+=n,t.height+=n;break;case 7:if(t.width-e<5)break;t.x+=e,t.width-=e;break}}function kf(t,e,n,r){t&&(t.width*=e,t.height*=e,ng(t,e,n),bn(t),cn(t),r&&A1(t,r))}function hl(t,e){const n={x:(t.x-e.x)/e.width,y:(t.y-e.y)/e.height,width:t.width/e.width,height:t.height/e.height};return bn(n),n}function Of(t,e){const{x:n,y:r,width:a,height:i}=e,{penId:o,connectTo:s}=t,c=Object.assign({},t,{x:a?(t.x-n)/a:0,y:i?(t.y-r)/i:0});return t.prev&&(c.prev={penId:o,connectTo:s,x:a?(t.prev.x-n)/a:0,y:i?(t.prev.y-r)/i:0}),t.next&&(c.next={penId:o,connectTo:s,x:a?(t.next.x-n)/a:0,y:i?(t.next.y-r)/i:0}),c}function bCe(t,e){let n=!1;for(let r=0,a=e.length-1;r<e.length;a=r++){let i=e[r].x,o=e[r].y,s=e[a].x,c=e[a].y;o>t.y!=c>t.y&&t.x<(s-i)*(t.y-o)/(c-o)+i&&(n=!n)}return n}const wCe=/^[\t\n\f\r ]*([MLHVZCSQTAmlhvzcsqta])[\t\n\f\r ]*/,j4=/^[01]/,ln=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,xCe=/^(([\t\n\f\r ]+,?[\t\n\f\r ]*)|(,[\t\n\f\r ]*))/,CCe={M:[ln,ln],L:[ln,ln],H:[ln],V:[ln],Z:[],C:[ln,ln,ln,ln,ln,ln],S:[ln,ln,ln,ln],Q:[ln,ln,ln,ln],T:[ln,ln],A:[ln,ln,ln,j4,j4,ln,ln]};function $4(t){let e=0;const n=[];for(;e<t.length;){const r=t.slice(e).match(wCe);if(r!==null){const a=r[1];e+=r[0].length;const i=kCe(a,t,e);e=i.cursor,n.push(...i.commands)}else throw new Error("malformed path (first error at "+e+")")}return{commands:n}}function D1(t){let e=1/0,n=1/0,r=-1/0,a=-1/0;return ECe(t),t.commands.forEach(i=>{i.worldPoints.forEach((o,s)=>{s%2===0?(o<e&&(e=o),o>r&&(r=o)):(o<n&&(n=o),o>a&&(a=o))})}),--e,--n,{x:e,y:n,ex:r,ey:a,width:r-e+1,height:a-n+1}}function _Ce(t,e,n){n==null&&(n=e),t.commands.forEach((r,a)=>{if(!(r.relative&&a))switch(r.key){case"A":case"a":r.values[5]+=e,r.values[6]+=n;break;case"V":case"v":r.values[0]+=n;break;default:r.values.forEach((i,o)=>{r.values[o]=i+(o%2===0?e:n)});break}})}function SCe(t,e,n){n==null&&(n=e),t.commands.forEach(r=>{switch(r.key){case"A":case"a":const a=r.values[0],i=r.values[1],o=Math.PI*r.values[2]/180,s=Math.cos(o),c=Math.sin(o),u=i*i*n*n*s*s+a*a*n*n*c*c,d=2*e*n*s*c*(i*i-a*a),f=a*a*e*e*s*s+i*i*e*e*c*c,h=-(a*a*i*i*e*e*n*n),v=d*d-4*u*f,p=Math.sqrt((u-f)*(u-f)+d*d);r.values[2]=d!==0?Math.atan((f-u-p)/d)*180/Math.PI:u<f?0:90,r.values[0]=-Math.sqrt(2*v*h*(u+f+p))/v,r.values[1]=-Math.sqrt(2*v*h*(u+f-p))/v,r.values[5]*=e,r.values[6]*=n,r.values[4]=e*n>=0?r.values[4]:1-r.values[4];break;case"V":case"v":r.values[0]*=n;break;default:r.values.forEach((g,m)=>{r.values[m]=g*(m%2===0?e:n)});break}})}function TCe(t){let e="";return t.commands.forEach(n=>{e+=n.key+" ",n.values.forEach(r=>{e+=r+" "})}),e}function kCe(t,e,n){const r=CCe[t.toUpperCase()],a=[];for(;n<=e.length;){const i={key:t,values:[]};for(const o of r){const s=e.slice(n).match(o);if(s!==null){i.values.push(+s[0]),n+=s[0].length;const c=e.slice(n).match(xCe);c!==null&&(n+=c[0].length)}else{if(i.values.length===0)return{cursor:n,commands:a};throw new Error("malformed path (first error at "+n+")")}}if(i.relative=i.key.toUpperCase()!==i.key,a.push(i),r.length===0)return{cursor:n,commands:a};t==="m"&&(t="l"),t==="M"&&(t="L")}throw new Error("malformed path (first error at "+n+")")}function OCe(t,e){const n=[];let r=t.relative&&e?{x:e.worldPoints[e.worldPoints.length-2],y:e.worldPoints[e.worldPoints.length-1]}:{x:0,y:0};for(let a=0;a<t.values.length-1;a+=2)n.push(r.x+t.values[a]),n.push(r.y+t.values[a+1]);t.worldPoints=n}function ECe(t){let e,n=0,r=0;t.commands.forEach(a=>{switch(a.key){case"Z":case"z":a.worldPoints=[n,r];break;case"H":a.worldPoints=[a.values[0],e.worldPoints[e.worldPoints.length-1]];break;case"h":a.worldPoints=[a.values[0]+e.worldPoints[e.worldPoints.length-2],e.worldPoints[e.worldPoints.length-1]];break;case"V":a.worldPoints=[e.worldPoints[e.worldPoints.length-2],a.values[0]];break;case"v":a.worldPoints=[e.worldPoints[e.worldPoints.length-2],a.values[0]+e.worldPoints[e.worldPoints.length-1]];break;case"A":a.worldPoints=[e.worldPoints[e.worldPoints.length-2],a.values[0]+e.worldPoints[e.worldPoints.length-1]];break;default:OCe(a,e);break}(a.key==="M"||a.key==="m"||a.key==="Z"||a.key==="z")&&(n=a.worldPoints[a.worldPoints.length-2],r=a.worldPoints[a.worldPoints.length-1]),e=a})}function PCe(t,e){var c;const r=t.calculative.canvas.store.data.paths[t.pathId];if(!r)return new Path2D;const a=$4(r);t.calculative.svgRect=D1(a),cn(t.calculative.svgRect),(t.calculative.svgRect.width!==t.calculative.worldRect.width||t.calculative.svgRect.height!==t.calculative.worldRect.height)&&(t.calculative.worldRect.width/t.calculative.svgRect.width,t.calculative.worldRect.height/t.calculative.svgRect.height,SCe(a,t.calculative.worldRect.width/t.calculative.svgRect.width,t.calculative.worldRect.height/t.calculative.svgRect.height));const i=D1(a);cn(i),_Ce(a,t.calculative.worldRect.x-i.x,t.calculative.worldRect.y-i.y);const o=TCe(a);if(e){(c=e.svgPath)==null||c.call(e,o);return}return new Path2D(o)}function ICe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r+i/2,a),n.lineTo(r+i,a+o/2),n.lineTo(r+i/2,a+o),n.lineTo(r,a+o/2),n.lineTo(r+i/2,a),n.closePath(),n instanceof Path2D)return n}function ACe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r+i/2,a),n.lineTo(r+i,a+o),n.lineTo(r,a+o),n.lineTo(r+i/2,a),n.closePath(),n instanceof Path2D)return n}function NCe(t){const e=[{x:.5,y:0},{x:.75,y:.5},{x:.5,y:1},{x:.25,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function DCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r+i/2,a),n.lineTo(r+i,a+o*2/5),n.lineTo(r+i*4/5,a+o),n.lineTo(r+i/5,a+o),n.lineTo(r,a+o*2/5),n.closePath(),n instanceof Path2D)return n}function RCe(t){const e=[{x:.5,y:0},{x:1,y:.4},{x:.8,y:1},{x:.2,y:1},{x:0,y:.4}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function MCe(t,e){t.onResize||(t.onResize=LCe);const n=e||new Path2D,{width:r,height:a,center:i}=t.calculative.worldRect,o=r>a?a:r,s=i.x,c=i.y,u=c-o/2,d=c-o/4,f=-(d-c)*Math.sin(Math.PI/180*324)+s,h=(d-c)*Math.cos(Math.PI/180*324)+c;n.moveTo(f,h);for(let v=0;v<5;++v)n.lineTo(-(u-c)*Math.sin(Math.PI/180*72*v)+s,(u-c)*Math.cos(Math.PI/180*72*v)+c),n.lineTo((f-s)*Math.cos(Math.PI/180*72*(v+1))-(h-c)*Math.sin(Math.PI/180*72*(v+1))+s,(f-s)*Math.sin(Math.PI/180*72*(v+1))+(h-c)*Math.cos(Math.PI/180*72*(v+1))+c);if(n.closePath(),n instanceof Path2D)return n}function U4(t){const{width:e,height:n}=t,r=e>n?n:e,a=[];for(let i=0;i<5;++i)a.push({flag:1,id:String(i),penId:t.id,x:.5+r/2*Math.sin(Math.PI/180*72*i)/e,y:-r/2*Math.cos(Math.PI/180*72*i)/n+.5});t.anchors=a}function LCe(t){const e=t.anchors.filter(n=>n.flag!==1);U4(t),t.anchors=t.anchors.concat(...e)}function FCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r+i/4,a),n.lineTo(r+i*3/4,a),n.lineTo(r+i,a+o/2),n.lineTo(r+i*3/4,a+o),n.lineTo(r+i*1/4,a+o),n.lineTo(r,a+o/2),n.lineTo(r+i/4,a),n.closePath(),n instanceof Path2D)return n}function BCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r,a+o/2),n.lineTo(r+o/2,a),n.lineTo(r+o/2,a+o/3),n.lineTo(r+i,a+o/3),n.lineTo(r+i,a+o*2/3),n.lineTo(r+o/2,a+o*2/3),n.lineTo(r+o/2,a+o*2/3),n.lineTo(r+o/2,a+o),n.closePath(),n instanceof Path2D)return n}function jCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r,a+o/3),n.lineTo(r+(i-o/2),a+o/3),n.lineTo(r+(i-o/2),a),n.lineTo(r+i,a+o/2),n.lineTo(r+(i-o/2),a+o),n.lineTo(r+(i-o/2),a+o*2/3),n.lineTo(r,a+o*2/3),n.closePath(),n instanceof Path2D)return n}function $Ce(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r,a+o/2),n.lineTo(r+o/2,a),n.lineTo(r+o/2,a+o/3),n.lineTo(r+(i-o/2),a+o/3),n.lineTo(r+(i-o/2),a),n.lineTo(r+i,a+o/2),n.lineTo(r+(i-o/2),a+o),n.lineTo(r+(i-o/2),a+o*2/3),n.lineTo(r+o/2,a+o*2/3),n.lineTo(r+o/2,a+o),n.closePath(),n instanceof Path2D)return n}function UCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ey:s}=t.calculative.worldRect;if(n.moveTo(r,a),n.lineTo(r+i,a),n.lineTo(r+i,a+o*3/4),n.lineTo(r+i*8/16,a+o*3/4),n.lineTo(r+i/4,s),n.lineTo(r+i*5/16,a+o*3/4),n.lineTo(r,a+o*3/4),n.closePath(),n instanceof Path2D)return n}function zCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r+i/5,a+o*13/16),n.bezierCurveTo(r-i/15,a+o*13/16,r-i/15,a+o*7/16,r+i/5,a+o*7/16),n.bezierCurveTo(r+i/5,a,r+i*4/5,a,r+i*4/5,a+o*7/16),n.bezierCurveTo(r+i*16/15,a+o*7/16,r+i*16/15,a+o*13/16,r+i*4/5,a+o*13/16),n.closePath(),n instanceof Path2D)return n}function HCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect,c=i/6;if(n.moveTo(r,a),n.lineTo(o-c,a),n.lineTo(o,a+c),n.lineTo(o,s),n.lineTo(r,s),n.closePath(),n.moveTo(o-c,a),n.lineTo(o-c,a+c),n.lineTo(o,a+c),n.closePath(),n instanceof Path2D)return n}function WCe(t,e){const{x:n,y:r,width:a,ex:i,ey:o}=e.calculative.worldRect;let s=a*.25;const c=e.z;c>1?s=c:c>0&&(s=a*c);const u={x:n,y:r+s},d={x:i-s,y:r+s},f={x:i-s,y:o};R1(t,[u,d,f,{x:n,y:o}],e.backgroundFront||e.background,e.color),R1(t,[u,{x:n+s,y:r},{x:i,y:r},d],e.backgroundUp||e.background,e.color),R1(t,[d,{x:i,y:r},{x:i,y:o-s},f],e.backgroundRight||e.background,e.color)}function R1(t,e,n="",r=""){t.save(),n&&(t.fillStyle=n),r&&(t.strokeStyle=r),t.beginPath();for(let a=0;a<e.length;++a)a?t.lineTo(e[a].x,e[a].y):t.moveTo(e[a].x,e[a].y);t.closePath(),n&&t.fill(),t.stroke(),t.restore()}function KCe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect,c=i/4,u=r+i/2;if(n.arc(u,a+c,c,0,Math.PI*2),n.moveTo(r,a+c*3),n.lineTo(o,a+c*3),n.moveTo(u,a+c*2),n.lineTo(u,a+c*4),n.moveTo(u,a+c*4),n.lineTo(r,s),n.moveTo(u,a+c*4),n.lineTo(o,s),n.closePath(),n instanceof Path2D)return n}function qCe(t,e,n){if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),n)e.calculative.activeAnchor&&(e.calculative.activeAnchor.next={penId:e.id,x:n.x,y:n.y},rg(e.calculative.activeAnchor.next,e.calculative.activeAnchor)<5?e.calculative.activeAnchor.next=void 0:(e.calculative.activeAnchor.prev={...e.calculative.activeAnchor.next},nn(e.calculative.activeAnchor.prev,180,e.calculative.activeAnchor)));else{const r=e.calculative.worldAnchors[0];if(!r.next){const i=hu(r,t.pens[r.connectTo]);z4(r,i,50),r.prev=void 0}const a=e.calculative.worldAnchors[e.calculative.worldAnchors.length-1];if(a&&a!==r&&!a.prev){const i=hu(a,t.pens[a.connectTo]);z4(a,i,-50),a.next=void 0}}}function z4(t,e,n){switch(e){case Pt.Up:t.prev={penId:t.penId,x:t.x,y:t.y+n},t.next={penId:t.penId,x:t.x,y:t.y-n};break;case Pt.Right:t.prev={penId:t.penId,x:t.x-n,y:t.y},t.next={penId:t.penId,x:t.x+n,y:t.y};break;case Pt.Bottom:t.prev={penId:t.penId,x:t.x,y:t.y-n},t.next={penId:t.penId,x:t.x,y:t.y+n};break;case Pt.Left:t.prev={penId:t.penId,x:t.x+n,y:t.y},t.next={penId:t.penId,x:t.x-n,y:t.y};break}}function M1(t,e,n,r){const a=1-t,i=a*a*e.x+2*a*t*n.x+t*t*r.x,o=a*a*e.y+2*a*t*n.y+t*t*r.y;return{x:i,y:o,step:t}}function H4(t,e,n,r,a){const{x:i,y:o}=e,{x:s,y:c}=a,{x:u,y:d}=n,{x:f,y:h}=r,v=1-t,p=i*v*v*v+3*u*t*v*v+3*f*t*t*v+s*t*t*t,g=o*v*v*v+3*d*t*v*v+3*h*t*t*v+c*t*t*t;return{x:p,y:g,step:t}}function vl(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function GCe(t,e,n){let r=t.calculative.worldAnchors[n],a=t.calculative.worldAnchors[n+1];!a&&t.close&&(a=t.calculative.worldAnchors[0]);const i=e.step;let o;if(r.next&&a.prev){const s=r,c=r.next,u=a.prev,d=a,f=vl(s,c,i),h=vl(c,u,i),v=vl(u,d,i),p=vl(f,h,i),g=vl(h,v,i);o=vl(p,g,i),p.penId=t.id,o.prev=p,g.penId=t.id,o.next=g,r.next.x=f.x,r.next.y=f.y,a.prev.x=v.x,a.prev.y=v.y}else if(r.next||a.prev){const s=r,c=r.next||a.prev,u=a,d=vl(s,c,i),f=vl(c,u,i);o=e,d.penId=t.id,f.penId=t.id,o.prev=d,o.next=f,r.next=void 0,a.prev=void 0}else o=e;return o.penId=t.id,o.id=it(),o.prevNextType=iu.Bilateral,o}function YCe(t,e,n){if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.calculative.worldAnchors.length<2)return;let r=e.calculative.activeAnchor,a=n||Xt(e);if(!r||!a)return;const i=20,o=t.pens[r.connectTo];let s=hu(r,o);switch(s===Pt.None&&(a.x>r.x?s=Pt.Right:s=Pt.Left),r.next={id:it(),penId:e.id,x:r.x,y:r.y,prevNextType:2},a.prev={id:it(),penId:e.id,x:a.x,y:a.y,prevNextType:2},s){case Pt.Up:r.next.y-=i,a.prev.y=r.y;break;case Pt.Bottom:r.next.y+=i,a.prev.y=r.y;break;case Pt.Left:r.next.x-=i,a.prev.x=r.x;break;default:r.next.x+=i,a.prev.x=r.x;break}}function XCe(t,e){const n=e||new Path2D;if((t.lineName==="line"||t.lineName==="polyline")&&t.calculative.lineSmooth){let a=_1(t);if(n.addPath(a),n instanceof Path2D)return n}const r=t.calculative.worldAnchors;if(r.length>1){let a;r.forEach(i=>{a?W4(n,a,i):i.start=!0,a=i}),t.close&&(t.lineName==="curve"?W4(n,a,r[0]):n.closePath())}if(n instanceof Path2D)return n}function JCe(t,e,n){var i;if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.calculative.worldAnchors.length<2||((i=e.anchors)==null?void 0:i.length)>1)return;const r=Sn(e),a=Xt(e);!r||!a||!a.id||r===a||(r.next=void 0,T1(e),a.prev=void 0,e.calculative.worldAnchors.push(a))}function W4(t,e,n){!n||n.isTemp||(e.start&&t.moveTo(e.x,e.y),e.next?n.prev?t.bezierCurveTo(e.next.x,e.next.y,n.prev.x,n.prev.y,n.x,n.y):t.quadraticCurveTo(e.next.x,e.next.y,n.x,n.y):n.prev?t.quadraticCurveTo(n.prev.x,n.prev.y,n.x,n.y):t.lineTo(n.x,n.y))}function L1(t){return F1(t),mu(K4(t))}function K4(t){const e=[];let n;return t.calculative.worldAnchors.forEach(r=>{e.push(r),n&&e.push(...q4(n,r,t)),n=r}),t.close&&t.calculative.worldAnchors.length>1&&e.push(...q4(n,t.calculative.worldAnchors[0],t)),e}function hg(t){return t!=null&&t.lineWidth?t.lineWidth/2+4:4}function q4(t,e,n){const r=[];if(!e)return r;let a=.02;if(t.lineLength&&(a=hg(n)/t.lineLength),t.next)if(e.prev)for(let i=a;i<1;i+=a)r.push(H4(i,t,t.next,e.prev,e));else for(let i=a;i<1;i+=a)r.push(M1(i,t,t.next,e));else if(e.prev)for(let i=a;i<1;i+=a)r.push(M1(i,t,e.prev,e));else r.push({x:e.x,y:e.y});return r.length>1&&(t.curvePoints=r),r}function QCe(t,e){const n=hg(e);let r=0,a,i;for(const o of e.calculative.worldAnchors){if(a){if(i=G4(t,a,o,n),i)return{i:r,point:i};++r}a=o}if(e.close&&e.calculative.worldAnchors.length>1&&(i=G4(t,a,e.calculative.worldAnchors[0],n)))return{i:r,point:i}}function G4(t,e,n,r=4){if(!e.next&&!n.prev){const{x:a,y:i}=e,{x:o,y:s}=n,c=Math.min(a,o),u=Math.max(a,o),d=Math.min(i,s),f=Math.max(i,s);return t.x>=c-r&&t.x<=u+r&&t.y>=d-r&&t.y<=f+r?ZCe(t,e,n,r):void 0}else if(e.curvePoints){for(const a of e.curvePoints)if(ou(t,a,r))return a}}function ZCe(t,e,n,r=4){if(e.x===n.x){if(Math.abs(t.x-e.x)<=r)return{x:e.x,y:t.y}}else{const a=(e.y-n.y)/(e.x-n.x),i=e.y-a*e.x;if(Math.abs((a*t.x+i-t.y)/Math.sqrt(a*a+1))<=r){const c=(t.x+a*t.y-a*i)/(a*a+1);return{x:c,y:a*c+i}}}}function Y4(t,e,n,r){if(!e&&!n)return Math.sqrt(Math.pow(Math.abs(t.x-r.x),2)+Math.pow(Math.abs(t.y-r.y),2))||0;const a=document.createElementNS("http://www.w3.org/2000/svg","path");return e&&n?a.setAttribute("d",`M${t.x} ${t.y} C${e.x} ${e.y} ${n.x} ${n.y} ${r.x} ${r.y}`):e?a.setAttribute("d",`M${t.x} ${t.y} Q${e.x} ${e.y} ${r.x} ${r.y}`):a.setAttribute("d",`M${t.x} ${t.y} Q${n.x} ${n.y} ${r.x} ${r.y}`),a.getTotalLength()||0}function F1(t){if(t.calculative.worldAnchors.length<2)return 0;let e=0,n;if(t.calculative.worldAnchors.forEach(r=>{n&&(n.lineLength=Y4(n,n.next,r.prev,r),e+=n.lineLength),n=r}),t.close){const r=Sn(t);n.lineLength=Y4(n,n.next,r.prev,r),e+=n.lineLength}return t.calculative.animatePos&&(t.calculative.animatePos=e/t.length*t.calculative.animatePos),t.length=e,e}function B1(t,e){const n=t.calculative.worldAnchors;for(let r=0;r<n.length-1;r++){const a=n[r],i=n[r+1];if(!a.next&&!i.prev){if(X4(a,i,e))return!0}else if(VCe(a,i,e))return!0}return!1}function X4(t,e,n){if(ws(t,n)||ws(e,n))return!0;const r=t.x,a=t.y,i=e.x,o=e.y;let s=n.x,c=n.y,u=n.ex,d=n.ey;const f=a-o,h=i-r,v=r*o-i*a;if(f*s+h*c+v>=0&&f*u+h*d+v<=0||f*s+h*c+v<=0&&f*u+h*d+v>=0||f*s+h*d+v>=0&&f*u+h*c+v<=0||f*s+h*d+v<=0&&f*u+h*c+v>=0){if(s>u){const p=s;s=u,u=p}if(c<d){const p=c;c=d,d=p}return!(r<s&&i<s||r>u&&i>u||a>c&&o>c||a<d&&o<d)}else return!1}function VCe(t,e,n){if(!t.next&&!e.prev)return X4(t,e,n);if(t.next&&e.prev)for(let a=.02;a<1;a+=.02){const i=H4(a,t,t.next,e.prev,e);if(ws(i,n))return!0}else if(t.next||e.prev)for(let a=.02;a<1;a+=.02){const i=M1(a,t,t.next||e.prev,e);if(ws(i,n))return!0}return!1}let Xr=10;function e_e(t,e,n){var g;if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),Xr=t.options.polylineSpace||10,e.calculative.worldAnchors.length<2)return;let r=Sn(e),a=Xt(e);if(!r||!a)return;let i;if((g=e.anchors)!=null&&g.length&&r===e.calculative.activeAnchor?(i=!0,r=a,a=Sn(e)):(!e.anchors||!e.anchors.length)&&r!==e.calculative.activeAnchor&&(r=e.calculative.activeAnchor),!r||!a)return;r.next=void 0,a.prev=void 0;const o=a.connectTo;T1(e);const s=[],c=t.pens[r.connectTo],u=t.pens[a.connectTo],d=hu(r,c),f=hu(a,u);let h=J4(r,d,Xr);h&&(r=h,s.push(h)),h=J4(a,f,Xr);const v=a;let p;if(h&&(a=h,v.connectTo&&(h.y>v.y&&r.y<v.y||h.y<v.y&&r.y>v.y))){p=h;let m=Xr;r.x<h.x&&(m=-m),Math.abs(r.x-h.x)<m&&(m=-m),a={x:h.x+m,y:h.y,id:it()}}switch(d){case Pt.Up:s.push(...t_e(r,a,f));break;case Pt.Right:s.push(...n_e(r,a,f));break;case Pt.Bottom:s.push(...r_e(r,a,f));break;case Pt.Left:s.push(...a_e(r,a,f));break;default:s.push(...i_e(e,r,a));break}if(s.forEach(m=>{m.id=it(),m.penId=e.id,e.calculative.worldAnchors.push(m)}),e.calculative.worldAnchors.push(a),p&&e.calculative.worldAnchors.push(p),h&&e.calculative.worldAnchors.push(v),i&&e.calculative.worldAnchors.reverse(),o){const m=e.calculative.worldAnchors.length-2;e.calculative.worldAnchors[m].isTemp=!1,e.calculative.worldAnchors[1].isTemp=!1}}function J4(t,e,n){const r={x:t.x,y:t.y,id:it()};switch(e){case Pt.Up:r.y-=n;break;case Pt.Right:r.x+=n;break;case Pt.Bottom:r.y+=n;break;case Pt.Left:r.x-=n;break;default:return}return r}function t_e(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let a,i;switch(n){case Pt.Up:t.y<e.y?(a=e.x,i=t.y):(a=t.x,i=e.y),r.push({x:a,y:i});break;case Pt.Bottom:if(a=e.x,i=t.y,e.y>t.y)a=t.x+(e.x-t.x)/2,r.push({x:a,y:t.y},{x:a,y:e.y});else{const o=(t.y+e.y)/2;r.push({x:t.x,y:o},{x:e.x,y:o})}break;case Pt.Right:a=e.x,i=t.y,e.x<t.x&&e.y<t.y&&(a=t.x,i=e.y),r.push({x:a,y:i});break;case Pt.Left:a=e.x,i=t.y,e.x>t.x&&e.y<t.y&&(a=t.x,i=e.y),r.push({x:a,y:i});break;default:if(e.y>t.y-Xr)a=t.x+(e.x-t.x)/2,r.push({x:a,y:t.y},{x:a,y:e.y});else{const o=(t.y+e.y+Xr)/2;r.push({x:t.x,y:o},{x:e.x,y:o})}break}return r}function n_e(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let a,i;switch(n){case Pt.Up:a=t.x,i=e.y,e.x>t.x&&e.y>t.y&&(a=e.x,i=t.y),r.push({x:a,y:i});break;case Pt.Bottom:a=t.x,i=e.y,e.x>t.x&&e.y<t.y&&(a=e.x,i=t.y),r.push({x:a,y:i});break;case Pt.Left:if(a=e.x,i=t.y,e.x<t.x)i=t.y+(e.y-t.y)/2,r.push({x:t.x,y:i},{x:e.x,y:i});else{const o=(t.x+e.x)/2;r.push({x:o,y:i},{x:o,y:e.y})}break;case Pt.Right:e.x<t.x?r.push({x:t.x,y:e.y}):r.push({x:e.x,y:t.y});break;default:if(a=e.x,i=e.y,e.x<t.x+Xr)r.push({x:t.x,y:i});else{const o=(t.x+e.x-Xr)/2;r.push({x:o,y:t.y},{x:o,y:i})}break}return r}function r_e(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let a,i;switch(n){case Pt.Up:if(a=t.x,i=e.y,e.y<t.y)a=t.x+(e.x-t.x)/2,r.push({x:a,y:t.y},{x:a,y:e.y});else{const o=(t.y+e.y)/2;r.push({x:a,y:o},{x:e.x,y:o})}break;case Pt.Right:a=e.x,i=t.y,e.x<t.x&&e.y>t.y&&(a=t.x,i=e.y),r.push({x:a,y:i});break;case Pt.Bottom:t.y>e.y?(a=e.x,i=t.y):(a=t.x,i=e.y),r.push({x:a,y:i});break;case Pt.Left:a=e.x,i=t.y,e.x>t.x&&e.y>t.y&&(a=t.x,i=e.y),r.push({x:a,y:i});break;default:if(a=t.x,e.y<t.y+Xr)a=t.x+(e.x-t.x)/2,r.push({x:a,y:t.y},{x:a,y:e.y});else{const o=(t.y+e.y-Xr)/2;r.push({x:a,y:o},{x:e.x,y:o})}break}return r}function a_e(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let a,i;switch(n){case Pt.Up:a=t.x,i=e.y,e.x<t.x&&e.y>t.y&&(a=e.x,i=t.y),r.push({x:a,y:i});break;case Pt.Bottom:a=t.x,i=e.y,e.x<t.x&&e.y<t.y&&(a=e.x,i=t.y),r.push({x:a,y:i});break;case Pt.Right:if(a=t.x,i=e.y,e.x>t.x)a=e.x,i=t.y+(e.y-t.y)/2,r.push({x:t.x,y:i},{x:e.x,y:i});else{const o=(t.x+e.x)/2;r.push({x:o,y:t.y},{x:o,y:e.y})}break;case Pt.Left:e.x>t.x?r.push({x:t.x,y:e.y}):r.push({x:e.x,y:t.y});break;default:if(a=t.x,i=e.y,e.x<t.x-Xr){const o=(t.x+e.x+Xr)/2;r.push({x:o,y:t.y},{x:o,y:i})}else r.push({x:t.x,y:i});break}return r}function i_e(t,e,n){const r=[];t.calculative.drawlineH==null&&(t.calculative.drawlineH=Math.abs(n.x-e.x)>Math.abs(n.y-e.y));let a=t.calculative.worldAnchors.findIndex(i=>i.id==e.id);if(a>1){let i=t.calculative.worldAnchors[a-1];if(i.x===e.x&&i.y!==e.y)return r.push({x:n.x,y:e.y}),r;if(i.y===e.y&&i.x!==e.x)return r.push({x:e.x,y:n.y}),r}return t.calculative.worldAnchors.length&&(n.isTemp=void 0,t.calculative.drawlineH?(r.push({x:n.x,y:e.y}),Math.abs(n.y-e.y)<Xr&&(n.isTemp=!0)):(r.push({x:e.x,y:n.y}),Math.abs(n.x-e.x)<Xr&&(n.isTemp=!0))),r}function vg(t,e,n=!0){var a,i;let r=t.calculative.worldAnchors;n||(r=[],t.calculative.worldAnchors.forEach(o=>{r.unshift(o)}));for(let o=0;o<r.length&&r[o].id!==e.id;o++)if(r[o].y!==e.y||r[o].x===((a=r[o+1])==null?void 0:a.x)&&r[o].y!==((i=r[o+1])==null?void 0:i.y))return!1;return!0}function pg(t,e,n=!0){var a,i;let r=t.calculative.worldAnchors;n||(r=[],t.calculative.worldAnchors.forEach(o=>{r.unshift(o)}));for(let o=0;o<r.length&&r[o].id!==e.id;o++)if(r[o].x!==e.x||r[o].y===((a=r[o+1])==null?void 0:a.y)&&r[o].x!==((i=r[o+1])==null?void 0:i.x))return!1;return!0}function o_e(t,e,n){if(!t.calculative.worldAnchors)return;const r=t.calculative.worldAnchors.findIndex(c=>c.id===e.id),a=Sn(t),i=Xt(t);let o=t.calculative.worldAnchors[r-1],s=t.calculative.worldAnchors[r+1];if(t.calculative.h==null&&(a.connectTo&&(vg(t,e,!0)?t.calculative.h=!0:pg(t,e,!0)&&(t.calculative.h=!1)),t.calculative.h==null&&i.connectTo&&(vg(t,e,!1)?t.calculative.h=!0:pg(t,e,!1)&&(t.calculative.h=!1)),t.calculative.h==null&&(o?t.calculative.h=o.y===e.y:s&&(t.calculative.h=s.y===e.y))),t.calculative.h){if(e.x=n.x,a.connectTo&&vg(t,e,!0)){s&&s.y!==e.y&&(s.x=e.x);return}if(i.connectTo&&vg(t,e,!1)){o&&o.y!==e.y&&(o.x=e.x);return}const c=t.anchors[r];let u;for(let d=r-1;d>-1;d--)if(o=t.anchors[d],u==null&&(u=o.y===c.y),u===!0)if(o.y===c.y)t.calculative.worldAnchors[d].y=n.y;else break;else if(o.x===c.x)t.calculative.worldAnchors[d].x=n.x;else break;u=void 0;for(let d=r+1;d<t.calculative.worldAnchors.length&&(s=t.anchors[d],s);d++)if(u==null&&(u=s.y===c.y),u===!0)if(s.y===c.y)t.calculative.worldAnchors[d].y=n.y;else break;else if(s.x===c.x)t.calculative.worldAnchors[d].x=n.x;else break;e.y=n.y}else{if(e.y=n.y,a.connectTo&&pg(t,e,!0)){s&&s.x!==e.x&&(s.y=e.y);return}if(i.connectTo&&pg(t,e,!1)){o&&o.x!==e.x&&(o.y=e.y);return}const c=t.anchors[r];let u;for(let d=r-1;d>-1;d--)if(o=t.anchors[d],u==null&&(u=o.x===c.x),u===!0)if(o.x===c.x)t.calculative.worldAnchors[d].x=n.x;else break;else if(o.y===c.y)t.calculative.worldAnchors[d].y=n.y;else break;u=void 0;for(let d=r+1;d<t.calculative.worldAnchors.length&&(s=t.anchors[d],s);d++)if(u==null&&(u=s.x===c.x),u===!0)if(s.x===c.x)t.calculative.worldAnchors[d].x=n.x;else break;else if(s.y===c.y)t.calculative.worldAnchors[d].y=n.y;else break;e.x=n.x}}function j1(t,e,n,r){const a=[];let i,o,s,c,u,d,f,h,v,p,g,m,y,b;v=t[n],p=t[r],s=v.x,c=v.y,f=p.x-s,h=p.y-c,b=f*f+h*h,i=e;for(let w=n+1;w<r;w++)g=t[w],f!==0||h!==0?(m=((g.x-s)*f+(g.y-c)*h)/b,m>1?(u=g.x-p.x,d=g.y-p.y):m>0?(u=g.x-(s+f*m),d=g.y-(c+h*m)):(u=g.x-s,d=g.y-c)):(u=g.x-s,d=g.y-c),y=u*u+d*d,y>i&&(o=w,i=y);return i>e&&(o-n>1&&a.push(...j1(t,e,n,o)),a.push({id:t[o].id,penId:t[o].penId,x:t[o].x,y:t[o].y}),r-o>1&&a.push(...j1(t,e,o,r))),a}function l_e(t,e=.8,n=!1){if(t.length<3)return t;let r,a,i,o,s,c,u,d,f,h,v,p,g,m,y;const b=(w,x,C,S)=>(o=Math.sqrt(w*w+x*x),o>0?(p=w/o,m=x/o):(p=1,m=0),s=Math.sqrt(C*C+S*S),s>0?(g=C/s,y=S/s):(g=1,y=0),Math.acos(p*g+m*y));h=[],v=t.length,r=t[0],t[v-1],h.push({...t[0]});for(let w=0;w<v-1;w++){if(a=t[w],i=t[w+1],f=Math.abs(b(a.x-r.x,a.y-r.y,i.x-a.x,i.y-a.y)),o)if(f<e*3.14)if(n&&(o=Math.min(o,s),s=o),c=(p+g)/2,u=(m+y)/2,d=Math.sqrt(c*c+u*u),d===0)h.push({...a});else{c/=d,u/=d;const x={...a};x.prevNextType=iu.Bilateral,x.prev={penId:x.penId,x:a.x-c*o*.25,y:a.y-u*o*.25},x.next={penId:x.penId,x:a.x+c*s*.25,y:a.y+u*s*.25},h.push(x)}else h.push({...a});r=a}return h.push({...t[t.length-1]}),h}function Q4(t,e){const n=e||new Path2D,r=t.calculative.worldAnchors;let a=t.calculative.canvas.store.data.scale,i=(t.calculative.animateLineWidth||6)*a,o=(t.animateLineWidth*2||12)*a;t.lineAnimateType===Fa.WaterDrop&&(o=(t.animateLineWidth*4||24)*a);let s=(t.animateInterval||100)*a,c=t.calculative.lineWidth*(t.calculative.lineSmooth||0),u=(t.calculative.animateLineWidth/2||3)*a;if(t.animateReverse&&(o=-o,i=-i),r.length>1){let d,f=0;for(let h=0;h<r.length;h++){let v=r[h];if(d){let p=s_e(d,v),g={x:d.x+(t.calculative.animatePos-f)%s*Math.cos(p*Math.PI/180),y:d.y-(t.calculative.animatePos-f)%s*Math.sin(p*Math.PI/180)};t.animateReverse&&(g={x:d.x+(t.length-(t.calculative.animatePos+f))%s*Math.cos(p*Math.PI/180),y:d.y-(t.length-(t.calculative.animatePos+f))%s*Math.sin(p*Math.PI/180)});let m=Math.sqrt((g.x-d.x)**2+(g.y-d.y)**2),y=Math.sqrt((v.x-d.x)**2+(v.y-d.y)**2);for(;m<y;)(t.animateReverse&&m-o<y||!t.animateReverse&&m>o)&&m>c+o&&y-m>c&&(t.lineAnimateType===Fa.Arrow?c_e(n,g,i,p,u,o):t.lineAnimateType===Fa.WaterDrop&&u_e(n,g,t.animateReverse,p,u,o)),g.x+=s*Math.cos(p*Math.PI/180),g.y-=s*Math.sin(p*Math.PI/180),m=Math.sqrt((g.x-d.x)**2+(g.y-d.y)**2)}d=v}}if(n instanceof Path2D)return n}function s_e(t,e){let n=e.x-t.x,r=e.y-t.y,a=Math.atan(r/n)*180/Math.PI;return e.x>=t.x?a=-a:a=180-a,a}function pl(t,e,n){let r=(180-n)*Math.PI/180;return{x:(t.x-e.x)*Math.cos(r)-(t.y-e.y)*Math.sin(r)+e.x,y:(t.x-e.x)*Math.sin(r)+(t.y-e.y)*Math.cos(r)+e.y}}function c_e(t,e,n,r,a,i){let o=pl({x:e.x+n,y:e.y+.57*n},{x:e.x,y:e.y},r),s=pl({x:e.x+n,y:e.y-.57*n},{x:e.x,y:e.y},r),c=pl({x:e.x+n,y:e.y+a/2},{x:e.x,y:e.y},r),u=pl({x:e.x+i,y:e.y+a/2},{x:e.x,y:e.y},r),d=pl({x:e.x+n,y:e.y-a/2},{x:e.x,y:e.y},r),f=pl({x:e.x+i,y:e.y-a/2},{x:e.x,y:e.y},r);t.moveTo(o.x,o.y),t.lineTo(e.x,e.y),t.lineTo(s.x,s.y),t.lineTo(d.x,d.y),t.lineTo(f.x,f.y),t.lineTo(u.x,u.y),t.lineTo(c.x,c.y),t.lineTo(o.x,o.y)}function u_e(t,e,n,r,a,i){let o=a/2;n&&(o=-a/2);let s=pl({x:e.x,y:e.y+o},{x:e.x,y:e.y},r),c=pl({x:e.x+i,y:e.y},{x:e.x,y:e.y},r),u=Math.PI/2;n&&(u=-Math.PI/2),t.moveTo(e.x,e.y),t.arc(e.x,e.y,a/2,-u-r/180*Math.PI,u-r/180*Math.PI,!1),t.lineTo(c.x,c.y),t.lineTo(s.x,s.y)}function d_e(t){var n;t.onDestroy||(t.onDestroy=f_e,t.onMove=gg,t.onResize=gg,t.onRotate=gg,t.onValue=gg,t.onMouseMove=v_e,t.onBeforeValue=h_e,t.onRenderPenRaw=p_e),t.calculative.singleton||(t.calculative.singleton={});const e=t.calculative.worldRect;if(!t.calculative.singleton.div){const r=document.createElement("div");r.style.position="absolute",r.style.outline="none",r.style.left="-9999px",r.style.top="-9999px",r.style.width=e.width+"px",r.style.height=e.height+"px",document.body.appendChild(r),(n=t.calculative.canvas.externalElements)==null||n.parentElement.appendChild(r),dr(t,r),t.calculative.singleton.div=r;const a=document.createElement("iframe");a.style.width="100%",a.style.height="100%",a.scrolling=t.scrolling||"no",a.frameBorder="0",a.style.border="none",a.src=t.iframe,t.calculative.iframe=t.iframe,r.appendChild(a),V4(t),a.onload=()=>{a.setAttribute("document.domain","")}}return t.calculative.patchFlags&&dr(t,t.calculative.singleton.div),t.onRenderPenRaw(t),new Path2D}function f_e(t){e8(t),t.calculative.singleton&&t.calculative.singleton.div&&(t.calculative.singleton.div.remove(),delete t.calculative.singleton.div)}function gg(t){t.calculative.singleton.div&&dr(t,t.calculative.singleton.div)}function h_e(t,e){if(e.iframe&&t.calculative.singleton.div&&(t.calculative.singleton.div.children[0].src=e.iframe,t.calculative.iframe=e.iframe),e.operationalRect||e["operationalRect.x"]!==void 0||e["operationalRect.y"]!==void 0||e["operationalRect.width"]!==void 0||e["operationalRect.height"]!==void 0){t.operationalRect||(t.operationalRect={});let n=Te(e);n.operationalRect||(n.operationalRect={}),n["operationalRect.x"]!==void 0&&(n.operationalRect.x=n["operationalRect.x"]),n["operationalRect.y"]!==void 0&&(n.operationalRect.y=n["operationalRect.y"]),n["operationalRect.width"]!==void 0&&(n.operationalRect.width=n["operationalRect.width"]),n["operationalRect.height"]!==void 0&&(n.operationalRect.height=n["operationalRect.height"]),Object.assign(t.operationalRect,n.operationalRect),t.calculative.singleton.div&&(t.calculative.singleton.div.children.length===1?V4(t):(t.calculative.singleton.div.children[1].style.height=t.operationalRect.y*100+"%",t.calculative.singleton.div.children[1].style.left=t.operationalRect.x*100+"%",t.calculative.singleton.div.children[1].style.width=t.operationalRect.width*100+"%",t.calculative.singleton.div.children[2].style.width=(1-t.operationalRect.x-t.operationalRect.width)*100+"%",t.calculative.singleton.div.children[3].style.height=(1-t.operationalRect.y-t.operationalRect.height)*100+"%",t.calculative.singleton.div.children[3].style.left=t.operationalRect.x*100+"%",t.calculative.singleton.div.children[3].style.width=t.operationalRect.width*100+"%",t.calculative.singleton.div.children[4].style.width=t.operationalRect.x*100+"%"))}if(e.blur!==void 0)for(let n=1;n<5;n++)t.calculative.singleton.div.children[n].style["backdrop-filter"]=`blur(${e.blur||2}px)`;if(e.blurBackground!==void 0)for(let n=1;n<5;n++)t.calculative.singleton.div.children[n].style.backgroundColor=e.blurBackground;return e}function v_e(t,e){if(!(!t.calculative.canvas.store.data.locked&&!t.locked)&&Z4(t.operationalRect)&&t.calculative.zIndex<5&&e.x>t.x+t.width*t.operationalRect.x&&e.x<t.x+t.width*(t.operationalRect.x+t.operationalRect.width)&&e.y>t.y+t.height*t.operationalRect.y&&e.y<t.y+t.height*(t.operationalRect.y+t.operationalRect.height)&&t.calculative.singleton.div){let n=t.calculative.singleton.div.parentNode.children;for(let r=0;r<6;r++)n[r].style.pointerEvents="none"}}function Z4(t){return t?!t.width||!t.height?!1:(t.x===void 0&&(t.x=(1-t.width)/2),t.y===void 0&&(t.y=(1-t.height)/2),!0):!1}function V4(t){if(!Z4(t.operationalRect))return;const e=t.calculative.singleton.div;if(!e)return;const n=document.createElement("div");n.style.position="absolute",n.style.left=t.operationalRect.x*100+"%",n.style.top="0px",n.style.width=t.operationalRect.width*100+"%",n.style.height=t.operationalRect.y*100+"%",n.style["backdrop-filter"]=`blur(${t.blur||2}px)`,n.style.backgroundColor=t.blurBackground,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.right="0px",r.style.top="0px",r.style.width=(1-t.operationalRect.x-t.operationalRect.width)*100+"%",r.style.height="100%",r.style["backdrop-filter"]=`blur(${t.blur||2}px)`,r.style.backgroundColor=t.blurBackground,e.appendChild(r);const a=document.createElement("div");a.style.position="absolute",a.style.left=t.operationalRect.x*100+"%",a.style.bottom="0px",a.style.width=t.operationalRect.width*100+"%",a.style.height=(1-t.operationalRect.y-t.operationalRect.height)*100+"%",a.style["backdrop-filter"]=`blur(${t.blur||2}px)`,a.style.backgroundColor=t.blurBackground,e.appendChild(a);const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=t.operationalRect.x*100+"%",i.style.height="100%",i.style["backdrop-filter"]=`blur(${t.blur||2}px)`,i.style.backgroundColor=t.blurBackground,e.appendChild(i);let o=()=>{e8(t)};n.onmouseenter=o,a.onmouseenter=o,r.onmouseenter=o,i.onmouseenter=o,e.onmouseleave=o}function e8(t){if(!(!t.calculative.canvas.store.data.locked&&!t.locked)&&t.calculative.zIndex<5){let e=t.calculative.singleton.div.parentNode.children;for(let n=1;n<6;n++)e[n].style.pointerEvents="initial"}}function p_e(t){if(t.thumbImg&&!t.calculative.img){const e=new Image;e.crossOrigin=t.crossOrigin==="undefined"?void 0:t.crossOrigin||"anonymous",t.calculative.canvas.store.options.cdn&&!(t.thumbImg.startsWith("http")||t.thumbImg.startsWith("//")||t.thumbImg.startsWith("data:image"))?e.src=t.calculative.canvas.store.options.cdn+t.thumbImg:e.src=t.thumbImg,e.onerror=n=>{e.remove(),t.calculative.img=void 0},t.calculative.img=e}}const Jr={},mg=['<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M473.088 125.44L256 256H52.224C23.552 256 0 279.552 0 308.224V716.8c0 28.16 23.04 51.2 51.2 51.2h204.8l217.088 130.56c16.896 10.24 38.912-2.048 38.912-22.016V147.456c0-19.968-21.504-32.256-38.912-22.016zM699.904 320.512c-20.992-18.944-53.248-17.408-72.192 3.584-18.944 20.992-17.408 53.248 3.584 72.192 0.512 0.512 58.368 54.784 58.368 121.344 0 37.888-19.456 74.752-58.368 110.08-20.992 18.944-22.528 51.2-3.584 72.192 10.24 11.264 24.064 16.896 37.888 16.896 12.288 0 24.576-4.608 34.304-13.312 61.44-55.296 92.16-117.76 92.16-185.856 0-112.64-88.576-193.536-92.16-197.12z" fill="" p-id="2434"></path><path d="M853.504 166.4c-20.992-18.944-53.248-16.896-72.192 4.096-18.944 20.992-16.896 53.248 4.096 72.192 1.536 1.024 135.68 122.88 135.68 280.576 0 90.624-45.568 177.152-135.68 257.536-20.992 18.944-23.04 51.2-4.096 72.192 10.24 11.264 24.064 16.896 38.4 16.896 12.288 0 24.576-4.096 34.304-12.8 112.64-100.864 169.984-212.992 169.984-333.824-1.024-202.752-163.84-350.208-170.496-356.864z"></path></svg>','<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" ><path d="M256 768H51.2c-28.16 0-51.2-23.04-51.2-51.2V308.224C0 279.552 23.552 256 52.224 256H256v512zM512 147.456v728.576c0 19.968-21.504 32.256-38.912 22.016L256 768V256l217.088-130.56c17.408-10.24 38.912 2.048 38.912 22.016zM623.104 656.896c-19.968-19.968-19.968-52.224 0-72.192l217.088-217.088c19.968-19.968 52.224-19.968 72.192 0 19.968 19.968 19.968 52.224 0 72.192l-217.088 217.088c-19.456 19.968-52.224 19.968-72.192 0z" fill="" p-id="2582"></path><path d="M623.104 367.104c19.968-19.968 52.224-19.968 72.192 0l217.088 217.088c19.968 19.968 19.968 52.224 0 72.192-19.968 19.968-52.224 19.968-72.192 0l-217.088-217.088c-19.968-19.456-19.968-52.224 0-72.192z"></path></svg>'];function g_e(t){var e;if(t.onDestroy||(t.onDestroy=m_e,t.onMove=$1,t.onResize=$1,t.onRotate=$1,t.onClick=t8,t.onValue=b_e,t.onChangeId=y_e),Jr[t.id])t.video&&t.calculative.media&&t.video!==t.calculative.video?(console.warn("video 更改, 此处是否执行？"),t.calculative.media.src=t.video,t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop,t.calculative.video=t.video):t.audio&&t.calculative.media&&t.audio!==t.calculative.audio&&(t.calculative.media.src=t.audio,t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop,t.calculative.audio=t.audio);else{const n=document.createElement("div"),r=document.createElement("div");r.style.position="absolute",r.style.outline="none",r.style.left="0",r.style.bottom="0",r.style.width="0",r.style.height="2px",r.style.background="#52c41a",r.style.zIndex="1",t.hideProgress&&(r.style.display="none");const a=document.createElement("div");a.innerHTML=mg[1],a.style.position="absolute",a.style.right="0",a.style.bottom="0",a.style.width="20px",a.style.height="20px",a.style.fill="hsla(0, 0%, 100%, .8)",a.style.zIndex="1",a.style.display="none",n.appendChild(r),n.appendChild(a),a.onclick=o=>{o.stopPropagation(),t.calculative.media.muted?(a.innerHTML=mg[0],t.calculative.media.muted=!1):(a.innerHTML=mg[1],t.calculative.media.muted=!0)},t.calculative.singleton||(t.calculative.singleton={}),t.calculative.singleton.muted=a,n.onmouseenter=o=>{a.style.display="block"},n.onmouseleave=o=>{a.style.display="none"},n.onclick=o=>{o.stopPropagation(),t8(t)};let i;t.video?(i=document.createElement("video"),i.src=t.video):t.audio&&(i=document.createElement("audio"),i.src=t.audio),i.loop=t.playLoop,i.ontimeupdate=()=>{n8(r,i,t.calculative.worldRect.width)},i.onended=()=>{t.calculative.onended&&t.calculative.onended(t)},t.calculative.media=i,i.style.position="absolute",i.style.outline="none",i.style.left="0",i.style.top="0",i.style.width="100%",i.style.height="100%",n.appendChild(i),Jr[t.id]=n,(e=t.calculative.canvas.externalElements)==null||e.parentElement.appendChild(n),dr(t,n),t.autoPlay&&(i.autoplay=!0,i.muted=!0)}return t.calculative.patchFlags&&dr(t,Jr[t.id]),new Path2D}function m_e(t){Jr[t.id].onclick=null,Jr[t.id].remove(),Jr[t.id]=void 0}function $1(t){dr(t,Jr[t.id]);const e=Jr[t.id].children[0],n=Jr[t.id].children[1];n8(e,n,t.calculative.worldRect.width)}function t8(t){t.calculative.media&&(t.calculative.media.muted=!1,t.calculative.singleton.muted.innerHTML=mg[0],t.calculative.media.paused?t.calculative.media.play():t.calculative.media.pause())}function n8(t,e,n){t.style.width=e.currentTime/e.duration*n+"px"}function y_e(t,e,n){Jr[e]&&(Jr[n]=Jr[e],delete Jr[e])}function b_e(t){const e=Jr[t.id];if(!e)return;dr(t,e);const n=t.calculative.media.getAttribute("src");t.video?n!==t.video&&(t.calculative.media.src=t.video):t.audio&&n!==t.audio&&(t.calculative.media.src=t.audio),t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop}function ji(){try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.arc?t:document.createElement("canvas")}catch{return document.createElement("canvas")}}class Ef{constructor(e,n){de(this,"box");de(this,"text");de(this,"arrowUp");de(this,"arrowDown");de(this,"x");de(this,"y");de(this,"currentPen");this.parentElement=e,this.store=n,this.box=document.createElement("div"),this.text=document.createElement("div"),this.arrowUp=document.createElement("div"),this.arrowDown=document.createElement("div"),this.box.className="meta2d-tooltip",this.text.className="text",this.arrowUp.className="arrow",this.arrowDown.className="arrow down",this.box.appendChild(this.text),this.box.appendChild(this.arrowUp),this.box.appendChild(this.arrowDown),e.appendChild(this.box),this.box.onmouseleave=()=>{this.hide(),this.store.lastHover=void 0};let r;for(let a=0;a<document.styleSheets.length;a++)document.styleSheets[a].title==="le5le.com/tooltip"&&(r=document.styleSheets[a]);if(!r){let a=document.createElement("style");a.type="text/css",a.title="le5le.com/tooltip",document.head.appendChild(a),a=document.createElement("style"),a.type="text/css",document.head.appendChild(a),r=a.sheet,r.insertRule(".meta2d-tooltip{position:absolute;padding:8px 0;z-index:10;left: -9999px;top: -9999px;}"),r.insertRule(".meta2d-tooltip .text{max-width:320px;min-height:30px;max-height:400px;outline:none;padding:8px 16px;border-radius:4px;background:#777777;color:#ffffff;line-height:1.8;overflow-y:auto;}"),r.insertRule(".meta2d-tooltip .arrow{position:absolute;border:10px solid transparent;background:transparent;top:-5px;left:50%;transform:translateX(-50%)}"),r.insertRule(".meta2d-tooltip .arrow.down{top:initial;bottom: -1px;}")}}static getTitle(e){if(e.titleFnJs&&!e.titleFn)try{e.titleFn=new Function("pen",e.titleFnJs)}catch(n){console.log("titleFnJs",n)}return e.titleFn?e.titleFn(e):String(e.title)}setText(e){const n=this.box.getBoundingClientRect();let r=globalThis.marked;const a=Ef.getTitle(e);if(r){this.text.innerHTML=r(a);const i=this.text.getElementsByTagName("A");for(let o=0;o<i.length;++o)i[o].setAttribute("target","_blank")}else this.text.innerHTML=a;return n}updateText(e){var a;if(((a=this.currentPen)==null?void 0:a.id)!==e.id||Ef.titleEmpty(e))return;const n=this.setText(e),r=this.box.getBoundingClientRect();this.changePositionByText(n,r)}changePositionByText(e,n){this.x-=(n.width-e.width)/2,this.y-=n.height-e.height,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}static titleEmpty(e){return!e.title&&!e.titleFn&&!e.titleFnJs}show(e,n){if(this.currentPen=e,Ef.titleEmpty(e)){let s=ma(e,!0);s&&this.show(s,n);return}this.setText(e);const r=this.box.getBoundingClientRect(),a=e.calculative.worldRect;let i=e.calculative.canvas.store.data.x+n.x-r.width/2,o=e.calculative.canvas.store.data.y+n.y-r.height;e.type||(i=e.calculative.canvas.store.data.x+a.x-(r.width-a.width)/2,o=e.calculative.canvas.store.data.y+a.ey-r.height-a.height),o>0?(this.arrowUp.style.borderBottomColor="transparent",this.arrowDown.style.borderTopColor="#777777"):(o+=r.height+a.height+5,this.arrowUp.style.borderBottomColor="#777777",this.arrowDown.style.borderTopColor="transparent"),this.x=i,this.y=o,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}hide(){this.currentPen=null,this.x=-9999,this.box.style.left="-9999px"}translate(e,n){this.x<-1e3||(this.x+=e,this.y+=n,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px")}destroy(){this.box.onmouseleave=null}}class r8{constructor(e){de(this,"h");de(this,"v");de(this,"isDownH");de(this,"isDownV");de(this,"x");de(this,"y");de(this,"hSize");de(this,"vSize");de(this,"scrollX");de(this,"scrollY");de(this,"lastScrollX");de(this,"lastScrollY");de(this,"rect");de(this,"isShow");de(this,"pageMode");de(this,"onMouseDownH",e=>{e.preventDefault(),e.stopPropagation(),this.isDownH=e.x,this.x=this.parent.store.data.x||0,this.lastScrollX=this.scrollX});de(this,"onMouseDownV",e=>{e.preventDefault(),e.stopPropagation(),this.isDownV=e.y,this.y=this.parent.store.data.y||0,this.lastScrollY=this.scrollY});de(this,"onMouseMove",e=>{if(this.isDownH){const n=e.x-this.isDownH;this.scrollX=this.lastScrollX+n,this.h.style.left=`${this.scrollX}px`,this.parent.store.data.x=this.x-n*this.rect.width/this.parent.parentElement.clientWidth}if(this.isDownV){const n=e.y-this.isDownV;if(this.pageMode&&this.canMouseMove(n))return;this.scrollY=this.lastScrollY+n,this.v.style.top=`${this.scrollY}px`,this.parent.store.data.y=this.y-n*this.rect.height/this.parent.parentElement.clientHeight}(this.isDownH||this.isDownV)&&(this.parent.onMovePens(),this.parent.canvasTemplate.init(),this.parent.canvasImage.init(),this.parent.canvasImageBottom.init(),this.parent.render())});de(this,"onMouseUp",e=>{!this.isDownH&&!this.isDownV||(this.isDownH=void 0,this.isDownV=void 0,this.scrollX<20?(this.scrollX=20,this.h.style.left=`${this.scrollX}px`):this.scrollX>this.parent.parentElement.clientWidth-this.hSize-20&&(this.scrollX=this.parent.parentElement.clientWidth-this.hSize-20,this.h.style.left=`${this.scrollX}px`),this.scrollY<20?(this.scrollY=20,this.v.style.top=`${this.scrollY}px`):this.scrollY>this.parent.parentElement.clientHeight-this.vSize-20&&(this.scrollY=this.parent.parentElement.clientHeight-this.vSize-20,this.v.style.top=`${this.scrollY}px`),this.resize())});this.parent=e,this.h=document.createElement("div"),this.v=document.createElement("div"),this.parent.externalElements.appendChild(this.h),this.parent.externalElements.appendChild(this.v),this.h.className="meta2d-scroll h",this.h.onmousedown=this.onMouseDownH,this.v.className="meta2d-scroll v",this.v.onmousedown=this.onMouseDownV,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp);let n;for(let r=0;r<document.styleSheets.length;r++)document.styleSheets[r].title==="le5le/scroll"&&(n=document.styleSheets[r]);if(!n){let r=document.createElement("style");r.type="text/css",r.title="le5le.com/scroll",document.head.appendChild(r),r=document.createElement("style"),r.type="text/css",document.head.appendChild(r),n=r.sheet,n.insertRule(".meta2d-scroll{position:absolute;width:8px;height:200px;background:#dddddd;border-radius:10px;z-index:20;cursor:default;}"),n.insertRule(".meta2d-scroll:hover{background:#cccccc;cursor:pointer}"),n.insertRule(".meta2d-scroll.v{right:0;top:calc(50% - 100px);}"),n.insertRule(".meta2d-scroll.h{bottom:2px;left:calc(50% - 100px);width:200px;height:8px;}")}this.init()}init(){this.isShow=!0,this.resize(),this.initPos()}canMouseMove(e){const n=this.parent.parent.getRect();return e<0&&n.y+this.parent.store.data.y>=0||e>0&&n.ey-this.parent.height+this.parent.store.data.y<=0}changeMode(){this.pageMode=!0,this.h.style.display="none",this.parent.parent.getRect().height<this.parent.height&&(this.v.style.display="none")}initPos(){this.scrollX=(this.parent.parentElement.clientWidth-this.hSize)/2,this.scrollY=(this.parent.parentElement.clientHeight-this.vSize)/2,this.h.style.left=`${this.scrollX}px`,this.v.style.top=`${this.scrollY}px`}resize(){this.rect=hi(this.parent.store.data.pens),this.rect.width<1400&&(this.rect.width=1400),this.rect.height<900&&(this.rect.height=900),this.parent.store.data.x>0?this.rect.width+=this.parent.store.data.x+(this.rect.x>0?0:this.rect.x):this.rect.width-=this.parent.store.data.x+(this.rect.x>0?0:this.rect.x),this.parent.store.data.y>0?this.rect.height+=this.parent.store.data.y+(this.rect.y>0?0:this.rect.y):this.rect.height-=this.parent.store.data.y+(this.rect.y>0?0:this.rect.y),this.rect.width<1400&&(this.rect.width=1400),this.rect.height<900&&(this.rect.height=900),this.hSize=1e3*this.parent.parentElement.clientWidth/this.rect.width/3,this.vSize=1e3*this.parent.parentElement.clientHeight/this.rect.height/3,this.h.style.width=this.hSize+"px",this.v.style.height=this.vSize+"px"}show(){this.isShow=!0,this.h.style.display="block",this.v.style.display="block",document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}hide(){this.isShow=!1,this.h.style.display="none",this.v.style.display="none",this.destroy()}translate(e,n){e&&(this.scrollX-=e*this.parent.parentElement.clientWidth/this.rect.width,this.h.style.left=`${this.scrollX}px`),n&&(this.scrollY-=n*this.parent.parentElement.clientHeight/this.rect.height,this.v.style.top=`${this.scrollY}px`)}wheel(e){let n=10;e&&(n=-10),!(this.pageMode&&this.canMouseMove(n))&&(this.scrollY+=n,this.v.style.top=`${this.scrollY}px`,this.parent.store.data.y-=n*this.rect.height/this.parent.parentElement.clientHeight,this.parent.onMovePens(),this.parent.canvasTemplate.init(),this.parent.canvasImage.init(),this.parent.canvasImageBottom.init(),this.parent.render())}destroy(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}class a8{constructor(e,n,r){de(this,"canvas",document.createElement("canvas"));de(this,"otherOffsreen",ji());de(this,"offscreen",ji());de(this,"animateOffsScreen",ji());de(this,"fitOffscreen",ji());de(this,"fitFlag",!1);de(this,"currentFit");de(this,"activeFit");this.parentElement=e,this.store=n,this.isBottom=r,e.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.otherOffsreen.width=e,this.otherOffsreen.height=n,this.offscreen.width=e,this.offscreen.height=n,this.animateOffsScreen.width=e,this.animateOffsScreen.height=n,this.fitOffscreen.width=e,this.fitOffscreen.height=n,this.otherOffsreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.otherOffsreen.getContext("2d").textBaseline="middle",this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.animateOffsScreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.animateOffsScreen.getContext("2d").textBaseline="middle",this.fitOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.fitOffscreen.getContext("2d").textBaseline="middle",this.init()}init(){this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.animateOffsScreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.fitOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height);for(const e of this.store.data.pens)this.hasImage(e)&&(e.calculative.imageDrawed=!1);this.isBottom?this.store.patchFlagsBackground=!0:this.store.patchFlagsTop=!0}clear(){this.otherOffsreen.getContext("2d").clearRect(0,0,this.otherOffsreen.width,this.otherOffsreen.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.animateOffsScreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.fitOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)}hasImage(e){return e.calculative.hasImage=e.calculative&&e.calculative.inView&&(this.isBottom&&e.canvasLayer===Wt.CanvasImageBottom||!this.isBottom&&e.canvasLayer===Wt.CanvasImage)&&e.image&&e.calculative.img&&e.name!=="gif",e.calculative.hasImage}render(){var o;let e=!1,n=!1;for(const s of this.store.data.pens)this.hasImage(s)&&(this.store.animates.has(s)?n=!0:s.calculative.imageDrawed||(e=!0),s.parentId&&this.store.animates.has(ma(s,!0))&&(n=!0));const r=this.store.patchFlagsBackground,a=this.store.patchFlagsTop;if(a&&!this.isBottom){const s=this.otherOffsreen.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderRule(s)}if(this.store.patchFlagsLast&&this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),e){const s=this.offscreen.getContext("2d");s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.translate(this.store.data.x,this.store.data.y);for(const c of this.store.data.pens)!c.calculative.hasImage||this.store.animates.has(c)||this.store.animates.has(ma(c,!0))||c.canvasLayer!==Wt.CanvasTemplate&&(c.name==="combine"&&!c.draw||(c.calculative.imageDrawed=!0,s.save(),gs(s,c),c.calculative.rotate&&No(s,c),bs(s,c),uu(s,c),s.restore()));s.restore()}if(n){const s=this.animateOffsScreen.getContext("2d");s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.translate(this.store.data.x,this.store.data.y);for(const c of this.store.animates)c.calculative.hasImage&&c.canvasLayer!==Wt.CanvasTemplate&&(c.calculative.imageDrawed=!0,s.save(),gs(s,c),c.calculative.rotate&&No(s,c),bs(s,c),uu(s,c),s.restore());for(const c of this.store.data.pens)!c.calculative.hasImage||!c.parentId||c.canvasLayer!==Wt.CanvasTemplate&&this.store.animates.has(ma(c,!0))&&(c.calculative.imageDrawed=!0,s.save(),gs(s,c),c.calculative.rotate&&No(s,c),bs(s,c),uu(s,c),s.restore());s.restore()}if(!this.isBottom&&!this.store.data.locked&&this.fitFlag){const s=(this.store.data.width||this.store.options.width)*this.store.data.scale,c=(this.store.data.height||this.store.options.height)*this.store.data.scale,u=this.store.data.origin.x+this.store.data.x||this.store.options.x||0,d=this.store.data.origin.y+this.store.data.y||this.store.options.y||0,f=this.fitOffscreen.getContext("2d");f.save(),f.clearRect(0,0,this.canvas.width,this.canvas.height),f.fillStyle="#ffffff66",f.strokeStyle=this.store.options.activeColor,(o=this.store.data.fits)==null||o.forEach((h,v)=>{f.fillRect(u+s*h.x,d+c*h.y,s*h.width,c*h.height),h.active&&f.strokeRect(u+s*h.x,d+c*h.y,s*h.width,c*h.height)}),f.restore()}if(e||n||r&&this.isBottom||a&&!this.isBottom){const s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),this.isBottom&&(this.store.patchFlagsBackground=!1),s.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height),s.drawImage(this.animateOffsScreen,0,0,this.canvas.width,this.canvas.height),this.isBottom||(s.drawImage(this.otherOffsreen,0,0,this.canvas.width,this.canvas.height),this.store.patchFlagsTop=!1,!this.store.data.locked&&this.fitFlag&&s.drawImage(this.fitOffscreen,0,0,this.canvas.width,this.canvas.height))}}renderRule(e){var w,x,C,S,_,O,N,B;const{data:n,options:r}=this.store,{rule:a,ruleColor:i,scale:o,origin:s}=n;if(!(a??r.rule))return;const c=o*10;e.save();const u=i||r.ruleColor;e.strokeStyle=ig(u,.7);const d=s.x+n.x,f=s.y+n.y,{width:h,height:v}=this.canvas;let p=((w=r.ruleOptions)==null?void 0:w.height)||20;(x=r.ruleOptions)!=null&&x.background&&(e.beginPath(),e.fillStyle=(C=r.ruleOptions)==null?void 0:C.background,e.rect(0,0,h,p),e.fill(),e.rect(0,0,p,v),e.fill()),(S=r.ruleOptions)!=null&&S.underline&&(e.beginPath(),e.fillStyle=ig(u,.7),e.moveTo(0,p),e.lineTo(h,p),e.stroke(),e.moveTo(p,0),e.lineTo(p,v),e.stroke());let g=p/4;((_=r.ruleOptions)==null?void 0:_.baseline)==="bottom"&&(g=p*3/4),e.beginPath(),e.lineWidth=p/2,e.lineDashOffset=-d%c,e.setLineDash([1,c-1]),e.moveTo(0,g),e.lineTo(h,g),e.stroke(),e.beginPath(),e.lineDashOffset=-f%c,e.moveTo(g,0),e.lineTo(g,v),e.stroke(),e.strokeStyle=u,e.beginPath(),e.lineWidth=p,e.lineDashOffset=-d%(c*10),e.setLineDash([1,c*10-1]),e.moveTo(0,p/2),e.lineTo(h,p/2),e.stroke(),e.beginPath(),e.lineDashOffset=-f%(c*10),e.moveTo(p/2,0),e.lineTo(p/2,v),e.stroke(),e.beginPath(),e.fillStyle=((O=r.ruleOptions)==null?void 0:O.textColor)||e.strokeStyle;let m=0-Math.floor(d/c/10)*100,y=((N=r.ruleOptions)==null?void 0:N.textTop)||16,b=((B=r.ruleOptions)==null?void 0:B.textLeft)||4;d<0&&(m-=100);for(let T=d%(c*10);T<h;T+=10*c,m+=100)c<3&&m%500||e.fillText(m.toString(),T+b,y);m=0-Math.floor(f/c/10)*100,f<0&&(m-=100);for(let T=f%(c*10);T<v;T+=10*c,m+=100)c<3&&m%500||(e.save(),e.beginPath(),e.translate(y,T-b),e.rotate(270*Math.PI/180),e.fillText(m.toString(),0,0),e.restore());e.restore()}}class w_e{constructor(e,n,r){de(this,"canvas",document.createElement("canvas"));de(this,"magnifierScreen",ji());de(this,"offscreen",ji());de(this,"domOffscreen",ji());de(this,"magnifierSize",300);de(this,"magnifier");this.parentCanvas=e,this.parentElement=n,this.store=r,n.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.offscreen.width=e,this.offscreen.height=n,this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.domOffscreen.width=e,this.domOffscreen.height=n,this.domOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.domOffscreen.getContext("2d").textBaseline="middle",this.magnifierScreen.width=this.magnifierSize+5,this.magnifierScreen.height=this.magnifierSize+5}renderMagnifier(){if(!this.magnifier)return;const e=this.magnifierSize/2,n=this.magnifierSize+5,r=this.magnifierScreen.getContext("2d");r.clearRect(0,0,n,n),r.lineWidth=5,r.save(),r.translate(2.5,2.5),r.save(),r.arc(e,e,e,0,Math.PI*2,!1),r.clip(),r.translate(-e,-e),r.scale(2,2);const a={x:(this.parentCanvas.mousePos.x+this.store.data.x)*this.store.dpiRatio,y:(this.parentCanvas.mousePos.y+this.store.data.y)*this.store.dpiRatio};[this.parentCanvas.canvasTemplate.bgOffscreen,this.parentCanvas.canvasTemplate.offscreen,this.parentCanvas.canvasImageBottom.offscreen,this.parentCanvas.canvasImageBottom.animateOffsScreen,this.parentCanvas.offscreen,this.parentCanvas.canvasImage.offscreen,this.parentCanvas.canvasImage.animateOffsScreen,this.domOffscreen].forEach(c=>{r.drawImage(c,a.x-e,a.y-e,this.magnifierSize,this.magnifierSize,0,0,this.magnifierSize,this.magnifierSize)}),r.restore(),r.beginPath();const o=r.createRadialGradient(e,e,e-5,e,e,e);o.addColorStop(0,"rgba(0,0,0,0.2)"),o.addColorStop(.8,"rgb(200,200,200)"),o.addColorStop(.9,"rgb(200,200,200)"),o.addColorStop(1,"rgba(200,200,200,0.9)"),r.strokeStyle=o,r.arc(e,e,e,0,Math.PI*2,!1),r.stroke(),r.restore(),this.offscreen.getContext("2d").drawImage(this.magnifierScreen,0,0,this.magnifierSize+5,this.magnifierSize+5,(a.x-e-2.5)/this.store.dpiRatio,(a.y-e-2.5)/this.store.dpiRatio,(this.magnifierSize+5)/this.store.dpiRatio,(this.magnifierSize+5)/this.store.dpiRatio)}updateDomOffscreen(){const e=this.domOffscreen.getContext("2d");e.clearRect(0,0,this.domOffscreen.width,this.domOffscreen.height);for(const n of this.store.data.pens)if((n.externElement||n.name==="gif")&&n.calculative.img){e.save(),e.translate(this.store.data.x,this.store.data.y);const{x:r,y:a,width:i,height:o}=n.calculative.worldRect;e.drawImage(n.calculative.img,r,a,i,o),e.restore()}}render(){this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.renderMagnifier();const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height)}}function i8(t){if(t.data.locked)throw new Error("canvas is locked")}class x_e{constructor(e){de(this,"box");de(this,"iframe");de(this,"dialog");de(this,"close");de(this,"title");de(this,"body");de(this,"x");de(this,"y");de(this,"url");this.parentElement=e,this.box=document.createElement("div"),this.dialog=document.createElement("div");let n=document.createElement("div");this.title=document.createElement("div"),this.close=document.createElement("span"),this.close.innerHTML=`
      <svg fill="none" viewBox="0 0 16 16" width="1em" height="1em">
      <path
        fill="currentColor"
        d="M8 8.92L11.08 12l.92-.92L8.92 8 12 4.92 11.08 4 8 7.08 4.92 4 4 4.92 7.08 8 4 11.08l.92.92L8 8.92z"
        fill-opacity="0.9"
      ></path>
    </svg>`,this.body=document.createElement("div"),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.box.className="meta2d-dialog_mask",this.dialog.className="meta2d-dialog",this.body.className="meta2d-dialog_body",n.className="meta2d-dialog_header",this.title.className="meta2d-dialog-content",this.close.className="meta2d-dialog-close",n.appendChild(this.title),n.appendChild(this.close),this.body.appendChild(this.iframe),this.dialog.appendChild(n),this.dialog.appendChild(this.body),this.box.appendChild(this.dialog),e.appendChild(this.box),this.dialog.onclick=a=>{a.stopPropagation()},this.box.onclick=()=>{this.hide()},this.close.onclick=()=>{this.hide()};let r;for(let a=0;a<document.styleSheets.length;a++)document.styleSheets[a].title==="le5le.com/dialog"&&(r=document.styleSheets[a]);if(!r){let a=document.createElement("style");a.type="text/css",a.title="le5le.com/dialog",document.head.appendChild(a),a=document.createElement("style"),a.type="text/css",document.head.appendChild(a),r=a.sheet,r.insertRule(`.meta2d-dialog_mask {
        display: none;
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100%;
        background-color: #0000006f;
        z-index: 9999;`),r.insertRule(`.meta2d-dialog_mask .meta2d-dialog {
            position: absolute;
            top: 15vh;
            left: 10%;
            width: 80%;
            height:420px;
            padding: 16px 20px;
            border-radius: 9px;
            background-color: #1e2430;
            z-index: 19999;
            overflow: auto;
        }`),r.insertRule(`.meta2d-dialog_header {
            display: flex;
        }`),r.insertRule(`.meta2d-dialog-content {
            width: calc(100% - 20px);
            font-weight: 600;
            font-size: 14px;
            color: #bdc7db;
            padding-bottom:8px;
        }`),r.insertRule(`.meta2d-dialog-close {
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            color: #617b91;
            position: absolute;
            right:20px;
            top:18px;
        }`),r.insertRule(`.meta2d-dialog-close :hover{
            cursor: pointer;
        }`),r.insertRule(`.meta2d-dialog_body{
            // margin-top: 4px;
        } `),r.insertRule(`.meta2d-dialog_body iframe{
            width: 100%;
            height: 100%;
        }`)}}show(e,n,r){n&&(n!==this.url&&(this.iframe.setAttribute("src",n),this.url=n),e&&(this.title.innerText=e),e?(this.dialog.style.padding="16px 20px",this.title.style.display="block",this.body.style.height="calc(100% - 26px)"):(this.dialog.style.padding="0px",this.title.style.display="none",this.body.style.height="100%",this.body.style.overflow="hidden"),r&&(this.dialog.style.width=r.width?r.width+"px":"80%",this.dialog.style.height=r.height?r.height+"px":"420px",this.dialog.style.top=r.y?r.y+"px":"15vh",this.dialog.style.left=r.x?r.x+"px":`calc( 50% - ${r.width?r.width/2+"px":"40%"} )`),this.box.style.display="block")}hide(){this.box.style.display="none"}destroy(){this.dialog.onclick=void 0,this.box.onclick=void 0,this.close.onclick=void 0}}class yg{constructor(e){de(this,"box");de(this,"currentAnchor");this.parentElement=e,this.box=document.createElement("div"),this.box.className="meta2d-title",e.appendChild(this.box);let n;for(let r=0;r<document.styleSheets.length;r++)document.styleSheets[r].title==="le5le.com/title"&&(n=document.styleSheets[r]);if(!n){let r=document.createElement("style");r.type="text/css",r.title="le5le.com/title",document.head.appendChild(r),r=document.createElement("style"),r.type="text/css",document.head.appendChild(r),n=r.sheet,n.insertRule(".meta2d-title{position:absolute;padding:0;z-index:10;left: -9999px;top: -9999px;background:#fff;color:#000; cursor: crosshair;border: 1px solid black;}")}}static getTitle(e){}setText(e){this.box.innerText=e.title}updateText(e){var n;((n=this.currentAnchor)==null?void 0:n.id)===e.id&&(yg.titleEmpty(e)||(this.setText(e),this.changePositionByAnchor(e)))}changePositionByAnchor(e){this.box.style.left=e.x+10+"px",this.box.style.top=e.y+10+"px"}static titleEmpty(e){return!e.title}show(e,n){if(yg.titleEmpty(e))return;this.currentAnchor=e,this.setText(e);let r={x:n.calculative.canvas.store.data.x+e.x,y:n.calculative.canvas.store.data.y+e.y};this.changePositionByAnchor(r)}hide(){this.box.style.left="-9999px",this.box.innerText="",this.currentAnchor=null}destroy(){this.box.onmouseleave=null}}class C_e{constructor(e,n){de(this,"canvas",document.createElement("canvas"));de(this,"offscreen",ji());de(this,"bgOffscreen",ji());de(this,"patchFlags");de(this,"bgPatchFlags");this.parentElement=e,this.store=n,e.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.bgOffscreen.width=e,this.bgOffscreen.height=n,this.offscreen.width=e,this.offscreen.height=n,this.bgOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.bgOffscreen.getContext("2d").textBaseline="middle",this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.init()}init(){this.bgOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.patchFlags=!0,this.bgPatchFlags=!0}hidden(){this.canvas.style.display="none"}show(){this.canvas.style.display="block"}clear(){this.bgOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.bgPatchFlags=!0,this.patchFlags=!0}render(){if(this.bgPatchFlags){const e=this.bgOffscreen.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);const n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height,a=this.store.data.x||this.store.options.x||0,i=this.store.data.y||this.store.options.y||0,o=this.store.data.background||this.store.options.background;o&&(e.save(),e.fillStyle=o,e.globalAlpha=this.store.data.globalAlpha??this.store.options.globalAlpha,n&&r?(e.shadowOffsetX=this.store.options.shadowOffsetX,e.shadowOffsetY=this.store.options.shadowOffsetY,e.shadowBlur=this.store.options.shadowBlur,e.shadowColor=this.store.options.shadowColor,e.fillRect(this.store.data.origin.x+a,this.store.data.origin.y+i,n*this.store.data.scale,r*this.store.data.scale)):e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore()),n&&r&&this.store.bkImg&&(e.save(),e.drawImage(this.store.bkImg,this.store.data.origin.x+a,this.store.data.origin.y+i,n*this.store.data.scale,r*this.store.data.scale),e.restore()),this.renderGrid(e)}if(this.patchFlags){const e=this.offscreen.getContext("2d");e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.translate(this.store.data.x,this.store.data.y);for(const n of this.store.data.pens)if(isFinite(n.x)&&n.canvasLayer===Wt.CanvasTemplate&&n.calculative.inView){if(n.name==="combine"&&!n.draw)continue;ms(e,n),n.image&&n.name!=="gif"&&n.calculative.img&&(e.save(),gs(e,n),n.calculative.rotate&&No(e,n),bs(e,n),uu(e,n),e.restore())}e.restore()}if(this.patchFlags||this.bgPatchFlags){const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.bgOffscreen,0,0,this.canvas.width,this.canvas.height),e.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height),this.patchFlags=!1,this.bgPatchFlags=!1}}renderGrid(e){const{data:n,options:r}=this.store,{grid:a,gridRotate:i,gridColor:o,gridSize:s,scale:c,origin:u}=n;if(!(a??r.grid))return;e.save();const d=(n.width||r.width)*c,f=(n.height||r.height)*c,h=(n.x||r.x||0)+u.x,v=(n.y||r.y||0)+u.y;i&&(e.translate(d/2,f/2),e.rotate(i*Math.PI/180),e.translate(-d/2,-f/2)),e.lineWidth=1,e.strokeStyle=o||r.gridColor,e.beginPath();let p=(s||r.gridSize)*c;if(p=p<0?0:p,!d||!f){const g=this.store.dpiRatio,m=this.canvas.width/g,y=this.canvas.height/g,b=h/p,w=v/p,x=p*10,C=h-Math.ceil(b)*p,S=v-Math.ceil(w)*p,_=m+C+x,O=y+S+x;for(let N=C;N<=_;N+=p)e.moveTo(N,S),e.lineTo(N,y+S+x);for(let N=S;N<=O;N+=p)e.moveTo(C,N),e.lineTo(m+C+x,N)}else{const g=d+h,m=f+v;for(let y=h;y<=g;y+=p)e.moveTo(y,v),e.lineTo(y,f+v);for(let y=v;y<=m;y+=p)e.moveTo(h,y),e.lineTo(d+h,y)}e.stroke(),e.restore()}}const __e={info:{icon:'<svg fill="none" viewBox="0 0 24 24"><path fill="#0052d9" d="M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"></path></svg>'}};class S_e{constructor(e,n){de(this,"box");de(this,"text");de(this,"arrowUp");de(this,"arrowDown");de(this,"icon");de(this,"confirm");de(this,"cancel");de(this,"x");de(this,"y");this.parentElement=e,this.store=n,this.box=document.createElement("div"),this.text=document.createElement("div"),this.arrowUp=document.createElement("div"),this.arrowDown=document.createElement("div"),this.icon=document.createElement("div"),this.confirm=document.createElement("button"),this.cancel=document.createElement("button"),this.box.className="meta2d-popconfirm",this.text.className="text",this.arrowUp.className="arrow",this.arrowDown.className="arrow down",this.icon.className="icon",this.confirm.className="confirm",this.cancel.className="cancel",this.confirm.innerHTML="确定",this.cancel.innerHTML="取消",this.icon.innerHTML=__e.info.icon,this.box.appendChild(this.text),this.box.appendChild(this.arrowUp),this.box.appendChild(this.arrowDown),this.box.appendChild(this.confirm),this.box.appendChild(this.cancel),this.box.appendChild(this.icon),e.appendChild(this.box);let r;for(let a=0;a<document.styleSheets.length;a++)document.styleSheets[a].title==="le5le.com/popconfirm"&&(r=document.styleSheets[a]);if(!r){let a=document.createElement("style");a.type="text/css",a.title="le5le.com/popconfirm",document.head.appendChild(a),a=document.createElement("style"),a.type="text/css",document.head.appendChild(a),r=a.sheet,r.insertRule(".meta2d-popconfirm{position:absolute;z-index:999;left: -9999px;top: -9999px;padding:16px;max-width:400px;background:#fff;border-radius:6px;box-shadow:0 3px 14px 2px rgba(0, 0, 0, .05),0 8px 10px 1px rgba(0, 0, 0, 6%),0 5px 5px -3px rgba(0, 0, 0, 10%);}"),r.insertRule(".meta2d-popconfirm .text{outline:none;padding:0px 0px 40px 28px;border-radius:4px;color:rgba(0, 0, 0, 0.9);overflow-y:auto;line-height:22px;font-size:13px;}"),r.insertRule(".meta2d-popconfirm .arrow{position:absolute;border:10px solid transparent;background:transparent;top:-18px;left:50%;transform:translateX(-50%)}"),r.insertRule(".meta2d-popconfirm .arrow.down{top:initial;bottom: -18px;}"),r.insertRule(".meta2d-popconfirm .icon{position:absolute;width:22px;height:22px;left:16px;top:16px;}"),r.insertRule(".meta2d-popconfirm .confirm{position:absolute;right:16px;bottom:16px;width:40px;height:24px;text-align:center;background:#4582e6;color:#fff;border-radius:3px;border-color:transparent}"),r.insertRule(".meta2d-popconfirm .confirm:hover{background:#003cab;}"),r.insertRule(".meta2d-popconfirm .cancel{position:absolute;right:64px;bottom:16px;width:40px;height:24px;text-align:center;background:#dcdcdc;color:rgba(0, 0, 0, 0.9);border-radius:3px;border-color:transparent}"),r.insertRule(".meta2d-popconfirm .cancel:hover{background:#a6a6a6;}")}}show(e,n){if(!e)return;const r=this.box.getBoundingClientRect(),a=e.calculative.worldRect;let i=e.calculative.canvas.store.data.x+n.x-r.width/2,o=e.calculative.canvas.store.data.y+n.y-r.height-20;e.type||(i=e.calculative.canvas.store.data.x+a.x-(r.width-a.width)/2,o=e.calculative.canvas.store.data.y+a.ey-r.height-a.height),o>0?(this.arrowUp.style.borderBottomColor="transparent",this.arrowDown.style.borderTopColor="#fff",o-=10):(o+=r.height+a.height+5,o+=10,this.arrowUp.style.borderBottomColor="#fff",this.arrowDown.style.borderTopColor="transparent"),this.x=i,this.y=o,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}hide(){this.x=-9999,this.box.style.left="-9999px"}showModal(e,n,r){return new Promise(a=>{this.text.innerHTML=r||"确认执行操作吗？",this.show(e,n),this.confirm.onclick=()=>{a(!0),this.hide()},this.cancel.onclick=()=>{a(!1),this.hide()}})}destroy(){this.box=null}}const Qr="-moving";class o8{constructor(e,n,r){de(this,"canvas",document.createElement("canvas"));de(this,"offscreen",ji());de(this,"width");de(this,"height");de(this,"externalElements",document.createElement("div"));de(this,"clientRect");de(this,"canvasRect");de(this,"activeRect");de(this,"initActiveRect");de(this,"dragRect");de(this,"lastRotate",0);de(this,"sizeCPs");de(this,"activeInitPos");de(this,"hoverType",at.None);de(this,"resizeIndex",0);de(this,"mouseDown");de(this,"hotkeyType");de(this,"mouseRight");de(this,"addCaches");de(this,"touchCenter");de(this,"initTouchDis");de(this,"initScale");de(this,"touchScaling");de(this,"touchMoving");de(this,"startTouches");de(this,"lastOffsetX",0);de(this,"lastOffsetY",0);de(this,"drawingLineName");de(this,"drawLineFns",[...mxe]);de(this,"drawingLine");de(this,"pencil");de(this,"pencilLine");de(this,"movingPens");de(this,"patchFlagsLines",new Set);de(this,"dock");de(this,"prevAnchor");de(this,"nextAnchor");de(this,"lastMouseTime",0);de(this,"hoverTimer",0);de(this,"fitTimer",0);de(this,"willInactivePen");de(this,"patchFlags",!1);de(this,"lastRender",0);de(this,"touchStart",0);de(this,"touchStartTimer");de(this,"timer");de(this,"lastAnimateRender",0);de(this,"animateRendering",!1);de(this,"renderTimer");de(this,"initPens");de(this,"pointSize",8);de(this,"pasteOffset",!0);de(this,"opening",!1);de(this,"maxZindex",5);de(this,"canMoveLine",!1);de(this,"randomIdObj");de(this,"keyOptions");de(this,"beforeAddPen");de(this,"beforeAddPens");de(this,"beforeAddAnchor");de(this,"beforeRemovePens");de(this,"beforeRemoveAnchor");de(this,"customResizeDock");de(this,"customMoveDock");de(this,"inputParent",document.createElement("div"));de(this,"inputDiv",document.createElement("div"));de(this,"dropdown",document.createElement("ul"));de(this,"tooltip");de(this,"popconfirm");de(this,"title");de(this,"mousePos",{x:0,y:0});de(this,"scroll");de(this,"movingAnchor");de(this,"canvasTemplate");de(this,"canvasImage");de(this,"canvasImageBottom");de(this,"magnifierCanvas");de(this,"dialog");de(this,"autoPolylineFlag",!1);de(this,"stopPropagation",e=>{e.stopPropagation()});de(this,"curve",qCe);de(this,"polyline",e_e);de(this,"mind",YCe);de(this,"line",JCe);de(this,"onCopy",e=>{this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements||this.copy()});de(this,"onCut",e=>{this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements||this.cut()});de(this,"onPaste",e=>{if(this.store.data.locked||this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements)return;let n;if(navigator.clipboard&&e.clipboardData){const r=e.clipboardData.items;if(r){for(let a=0;a<r.length;a++)if(r[a].type.indexOf("image")!==-1&&r[a].getAsFile()){n=!0;break}}}if(n){const r=e.clipboardData.items;if(r){for(let a=0;a<r.length;a++)if(r[a].type.indexOf("image")!==-1&&r[a].getAsFile()){const{x:i,y:o}=this.mousePos,s=r[a].getAsFile();let c=r[a].type.slice(6)==="gif"?"gif":"image";if(s!==null){let u;const d=new FileReader;d.onload=f=>{u=f.target.result;const h=new Image;h.src=u,h.onload=()=>{const{width:v,height:p}=h,g={name:c,x:i-50/2,y:o-p/v*50,externElement:c==="gif",width:100,height:p/v*100,image:u};this.addPens([g]),this.active([g]),this.copy([g])}},d.readAsDataURL(s)}}}}else this.paste()});de(this,"onMessage",e=>{if(typeof e.data!="string"||!e.data||e.data.startsWith("setImmediate"))return;let n=JSON.parse(e.data);typeof n=="object"?this.parent.doMessageEvent(n.name,n.value):this.parent.doMessageEvent(n)});de(this,"onwheel",e=>{if(this.inputDiv.contentEditable==="true"||this.drawingLine||this.pencil)return;if(this.store.hover&&this.store.hover.onWheel){this.store.hover.onWheel(this.store.hover,e);return}if(this.store.data.disableScale||this.store.options.disableScale||(e.preventDefault(),e.stopPropagation(),this.mouseDown&&(this.hoverType===at.Node||this.hoverType===at.Line))||this.store.data.locked===Ft.Disable||this.store.data.locked===Ft.DisableScale||this.store.data.locked===Ft.DisableMoveScale)return;if(!e.ctrlKey&&Math.abs(e.wheelDelta)<100&&e.deltaY.toString().indexOf(".")===-1){if(this.store.options.scroll&&!e.metaKey&&this.scroll){this.scroll.wheel(e.deltaY<0);return}const i=this.store.data.scale||1;this.translate(-e.deltaX/i,-e.deltaY/i);return}if(Math.abs(e.wheelDelta)>100&&this.store.options.scroll&&this.scroll&&!this.store.options.scrollButScale&&!(e.ctrlKey||e.metaKey)){this.scroll.wheel(e.deltaY<0);return}if(this.store.options.disableTouchPadScale)return;let n=.015;if(this.store.options.scaleOff)n=this.store.options.scaleOff,e.deltaY>0&&(n=-this.store.options.scaleOff);else if(/mac os /i.test(navigator.userAgent))e.ctrlKey?e.deltaY>0&&(n*=-1):n*=e.wheelDeltaY/240;else{let o=.2;e.deltaY.toString().indexOf(".")!==-1&&(o=.01),e.deltaY>0?n=-o:n=o}let{offsetX:r,offsetY:a}=e;this.scale(this.store.data.scale+n,{x:r,y:a}),this.externalElements.focus()});de(this,"onkeydown",e=>{var i,o,s;if(this.store.data.locked>=Ft.DisableEdit&&e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&!e.target.dataset.meta2dIgnore&&this.store.active.forEach(c=>{var u;(u=c.onKeyDown)==null||u.call(c,c,e.key)}),this.store.data.locked>=Ft.DisableEdit||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.dataset.meta2dIgnore||this.store.options.unavailableKeys.includes(e.key))return;this.keyOptions||(this.keyOptions={}),this.keyOptions.altKey=e.altKey,this.keyOptions.shiftKey=e.shiftKey,this.keyOptions.ctrlKey=e.ctrlKey,this.keyOptions.metaKey=e.metaKey;let n=10,r=10,a=null;if(this.store.options.strictScope){const c=this.store.data.width||this.store.options.width,u=this.store.data.height||this.store.options.height;c&&u&&(a={x:this.store.data.origin.x,y:this.store.data.origin.y,width:c*this.store.data.scale,height:u*this.store.data.scale})}switch(e.key){case" ":this.hotkeyType=Qt.Translate;break;case"Control":this.drawingLine?this.drawingLine.calculative.drawlineH=!this.drawingLine.calculative.drawlineH:this.hotkeyType||(this.patchFlags=!0,this.hotkeyType=Qt.Select);break;case"Meta":break;case"Shift":this.store.active.length===1&&this.store.active[0].type&&this.store.activeAnchor?this.toggleAnchorHand():this.hotkeyType||(this.patchFlags=!0,this.store.options.resizeMode||(this.hotkeyType=Qt.Resize));break;case"Alt":if(!e.ctrlKey&&!e.shiftKey&&this.drawingLine){const c=Xt(this.drawingLine);c!==this.drawingLine.calculative.activeAnchor?(T1(this.drawingLine),this.drawingLine.calculative.worldAnchors.push(c)):this.drawingLine.calculative.worldAnchors.push({x:c.x,y:c.y});const u=this.drawLineFns.indexOf(this.drawingLineName);this.drawingLineName=this.drawLineFns[(u+1)%this.drawLineFns.length],this.drawingLine.lineName=this.drawingLineName,this.drawline(),this.patchFlags=!0}e.preventDefault();break;case"a":case"A":e.ctrlKey||e.metaKey?(this.active(this.store.data.pens.filter(c=>!c.parentId&&c.locked!==Ft.Disable)),e.preventDefault()):this.toggleAnchorMode();break;case"Delete":case"Backspace":if(this.canvasImage.fitFlag&&this.canvasImage.activeFit){this.deleteFit();break}!this.store.data.locked&&this.delete();break;case"ArrowLeft":if(this.movingAnchor){this.translateAnchor(-1,0);break}if(n=-1,e.shiftKey&&(n=-5),(e.ctrlKey||e.metaKey)&&(n=-10),n=n*this.store.data.scale,this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x+n,y:this.store.activeAnchor.y},{});break}a&&this.activeRect.x+n<a.x&&(n=a.x-this.activeRect.x),this.translatePens(this.store.active,n,0);break;case"ArrowUp":if(this.movingAnchor){this.translateAnchor(0,-1);break}if(r=-1,e.shiftKey&&(r=-5),(e.ctrlKey||e.metaKey)&&(r=-10),r=r*this.store.data.scale,a&&this.activeRect.y+r<a.y&&(r=a.y-this.activeRect.y),this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x,y:this.store.activeAnchor.y+r},{});break}this.translatePens(this.store.active,0,r);break;case"ArrowRight":if(this.movingAnchor){this.translateAnchor(1,0);break}if(n=1,e.shiftKey&&(n=5),(e.ctrlKey||e.metaKey)&&(n=10),n=n*this.store.data.scale,this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x+n,y:this.store.activeAnchor.y},{});break}a&&this.activeRect.x+this.activeRect.width+n>a.x+a.width&&(n=a.x+a.width-(this.activeRect.x+this.activeRect.width)),this.translatePens(this.store.active,n,0);break;case"ArrowDown":if(this.movingAnchor){this.translateAnchor(0,1);break}if(r=1,e.shiftKey&&(r=5),(e.ctrlKey||e.metaKey)&&(r=10),r=r*this.store.data.scale,a&&this.activeRect.y+this.activeRect.height+r>a.y+a.height&&(r=a.y+a.height-(this.activeRect.y+this.activeRect.height)),this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x,y:this.store.activeAnchor.y+r},{});break}this.translatePens(this.store.active,0,r);break;case"d":case"D":(i=this.store.active[0])!=null&&i.locked||this.removeAnchorHand();break;case"h":case"H":(o=this.store.active[0])!=null&&o.locked||this.addAnchorHand();break;case"m":case"M":this.toggleMagnifier();break;case"g":case"G":this.hoverType===at.NodeAnchor&&(this.movingAnchor=this.store.hoverAnchor,this.externalElements.style.cursor="move");break;case"s":case"S":!this.store.data.locked&&this.hoverType===at.LineAnchor&&this.store.hover===this.store.active[0]&&this.splitLine(this.store.active[0],this.store.hoverAnchor),(e.ctrlKey||e.metaKey)&&this.store.emitter.emit("save",{event:e});break;case"c":case"C":(e.ctrlKey||e.metaKey)&&this.store.options.disableClipboard&&this.copy();break;case"x":case"X":(e.ctrlKey||e.metaKey)&&this.store.options.disableClipboard&&this.cut();break;case"√":case"v":case"V":!e.ctrlKey&&!e.metaKey&&(this.pencil&&this.stopPencil(),this.drawingLineName?(this.finishDrawline(),this.drawingLineName=""):this.drawingLineName=this.store.options.drawingLineName),!this.store.data.locked&&(e.ctrlKey||e.metaKey)&&(this.store.options.disableClipboard||!this.store.options.disableClipboard&&e.altKey)&&this.paste();break;case"b":case"B":this.drawingLineName&&(this.finishDrawline(),this.drawingLineName=""),this.pencil?this.stopPencil():this.drawingPencil();break;case"y":case"Y":(e.ctrlKey||e.metaKey)&&this.redo();break;case"z":case"Z":e.ctrlKey||e.metaKey?this.undo():e.shiftKey&&this.redo();break;case"Enter":this.drawingLineName&&(this.finishDrawline(!0),this.store.active[0].anchors[0].connectTo?this.drawingLineName="":this.drawingLineName=this.store.options.drawingLineName),this.store.active&&(this.store.active.forEach(c=>{c.type?(c.close=!c.close,c.close&&K4(c),this.store.path2dMap.set(c,gt.path2dDraws.line(c)),F1(c)):c.calculative.focus=!0}),this.render());break;case"Escape":this.drawingLineName&&this.finishDrawline(),this.drawingLineName=void 0,this.stopPencil(),this.store.active&&this.store.active.forEach(c=>{c.type||(c.calculative.focus=!1)}),this.movingPens&&(this.getAllByPens(this.movingPens).forEach(c=>{this.store.pens[c.id]=void 0}),this.movingPens=void 0,this.mouseDown=void 0,this.clearDock(),(s=this.store.active)==null||s.forEach(c=>{this.updateLines(c)}),this.calcActiveRect(),this.patchFlags=!0),this.hotkeyType=Qt.None,this.movingAnchor=void 0,this.magnifierCanvas.magnifier&&(this.magnifierCanvas.magnifier=!1,this.patchFlags=!0);break;case"E":case"e":this.store.options.disableAnchor=!this.store.options.disableAnchor,this.store.emitter.emit("disableAnchor",this.store.options.disableAnchor);break;case"=":(e.ctrlKey||e.metaKey)&&(this.scale(this.store.data.scale+.1),e.preventDefault(),e.stopPropagation());break;case"-":(e.ctrlKey||e.metaKey)&&(this.scale(this.store.data.scale-.1),e.preventDefault(),e.stopPropagation());break;case"l":case"L":this.canMoveLine=!0;break;case"[":this.parent.down();break;case"]":this.parent.up();break;case"{":this.parent.bottom();break;case"}":this.parent.top();break;case"F":case"f":this.setFollowers();break}this.render(!1)});de(this,"onkeyup",e=>{switch(e.key){case"l":case"L":this.canMoveLine=!1;break}this.hotkeyType&&this.render(),this.hotkeyType<Qt.AddAnchor&&(this.hotkeyType=Qt.None)});de(this,"ondrop",async e=>{if(this.store.data.locked){console.warn("canvas is locked, can not drop");return}e.preventDefault(),e.stopPropagation();const n=e.dataTransfer.getData("Meta2d")||e.dataTransfer.getData("Text");let r=null;try{n&&(r=JSON.parse(n))}catch{}if(!r){const{files:a}=e.dataTransfer;if(a.length&&a[0].type.match("image.*")&&!(this.addCaches&&this.addCaches.length)){const i=a[0].type==="image/gif";r=await this.fileToPen(a[0],i)}else if(this.addCaches&&this.addCaches.length)r=this.addCaches,this.addCaches=[];else{this.store.emitter.emit("drop",void 0);return}}if(r=Array.isArray(r)?r:[r],r[0]&&r[0].draggable!==!1){const a={x:e.offsetX,y:e.offsetY};this.calibrateMouse(a),this.dropPens(r,a),this.addCaches=[],this.getContainerHover(a),this.mousePos.x=a.x,this.mousePos.y=a.y,this.store.emitter.emit("mouseup",{x:a.x,y:a.y,pen:this.store.hoverContainer})}this.store.emitter.emit("drop",r||n)});de(this,"ontouchstart",e=>{this.store.data.locked!==Ft.Disable&&(this.touchStartTimer&&clearTimeout(this.touchStartTimer),this.touchStartTimer=setTimeout(()=>{this.touchStart=performance.now();const n=e.touches[0].pageX-this.clientRect.x,r=e.touches[0].pageY-this.clientRect.y,a={x:n,y:r};if(this.calibrateMouse(a),this.getHover(a),this.onMouseDown({x:n,y:r,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1}),e.touches.length===2){this.initTouchDis=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),this.initScale=this.store.data.scale,this.startTouches=e.touches,this.touchCenter={x:e.touches[0].pageX+(e.touches[1].pageX-e.touches[0].pageX)/2-this.clientRect.x,y:e.touches[0].pageY+(e.touches[1].pageY-e.touches[0].pageY)/2-this.clientRect.y};return}else e.touches.length===3&&(this.store.emitter.emit("contextmenu",{e:{x:n,y:r,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},clientRect:this.clientRect}),e.preventDefault(),e.stopPropagation());this.touchStartTimer=void 0},50))});de(this,"ontouchmove",e=>{var s;if(this.store.data.locked===Ft.Disable)return;e.stopPropagation(),e.preventDefault();const n=performance.now();if(n-this.touchStart<50)return;this.touchStart=n;const r=e.touches,a=r.length,i=e.touches[0].pageX-this.clientRect.x,o=e.touches[0].pageY-this.clientRect.y;if(a===1)this.onMouseMove({x:i,y:o,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1});else if(a===2&&((s=this.startTouches)==null?void 0:s.length)===2){if(!this.touchMoving&&!this.touchScaling){const c=this.startTouches[0].pageX-r[0].pageX,u=this.startTouches[1].pageX-r[1].pageX,d=this.startTouches[0].pageY-r[0].pageY,f=this.startTouches[1].pageY-r[1].pageY;(c>=0&&u<0||c<=0&&u>0)&&(d>=0&&f<0||d<=0&&f>0)?this.touchScaling=!0:this.touchMoving=!0}if(this.touchScaling){if(this.store.data.disableScale||this.store.options.disableScale)return;const c=Math.hypot(r[0].pageX-r[1].pageX,r[0].pageY-r[1].pageY)/this.initTouchDis;this.scale(this.initScale*c,Te(this.touchCenter))}if(this.touchMoving){if(this.store.data.locked>=Ft.DisableMove&&this.store.data.locked!==Ft.DisableScale||this.store.data.disableScale||this.store.options.disableScale)return;if(this.lastOffsetX){const{scale:c}=this.store.data;this.translate((i-this.lastOffsetX)/c,(o-this.lastOffsetY)/c)}this.lastOffsetX=i,this.lastOffsetY=o}}});de(this,"ontouchend",e=>{if(this.store.data.locked===Ft.Disable)return;this.touchCenter=void 0,this.touchScaling=void 0,this.touchMoving=void 0,this.startTouches=void 0,this.lastOffsetX=0,this.lastOffsetY=0;const n=e.changedTouches[0].pageX-this.clientRect.x,r=e.changedTouches[0].pageY-this.clientRect.y;this.onMouseUp({x:n,y:r,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1}),setTimeout(()=>{this.render()},20)});de(this,"onGesturestart",e=>{e.preventDefault()});de(this,"onMouseDown",e=>{var n,r,a,i,o;if(e.buttons===2&&!this.drawingLine&&(this.mouseRight=cl.Down),this.hideInput(),this.popconfirm.hide(),this.store.data.locked===Ft.Disable||e.buttons!==1&&e.buttons!==2){this.hoverType=at.None;return}if(!this.magnifierCanvas.magnifier){if(this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.mouseDown=e,this.lastMouseTime=performance.now(),this.canvasImage.fitFlag){this.canvasImage.currentFit||this.calcuActiveFit();return}if(this.hotkeyType===Qt.AddAnchor){this.setAnchor(this.store.pointAt);return}if(!this.store.options.autoAnchor&&!this.drawingLine&&e.shiftKey&&e.ctrlKey&&e.altKey){this.setAnchor(this.store.pointAt),this.drawingLineName=this.store.options.drawingLineName;const s=this.store.activeAnchor;if(!s)return;const c={id:it(),x:s.x,y:s.y};this.drawingLine=this.createDrawingLine(c);let u=Sn(this.drawingLine);this.drawingLine.calculative.activeAnchor=u,Zn(this.store.hover,s,this.drawingLine,c),this.drawline();return}if(!(this.hotkeyType===Qt.Translate||this.mouseRight===cl.Down&&!this.store.options.mouseRightActive)){if(this.drawingLine){if(this.store.hoverAnchor){const c=Xt(this.drawingLine);this.store.hoverAnchor.type===vs.Line?ag(c,this.store.hoverAnchor,this.store):(c.x=this.store.hoverAnchor.x,c.y=this.store.hoverAnchor.y),Zn(this.store.hover,this.store.hoverAnchor,this.drawingLine,c),this.drawline(),this.finishDrawline(!0);return}if(!this.store.options.autoAnchor&&e.shiftKey&&e.altKey&&e.ctrlKey){this.setAnchor(this.store.pointAt);const c=Xt(this.drawingLine),u=this.store.activeAnchor;if(!u)return;c.x=u.x,c.y=u.y,Zn(this.store.hover,u,this.drawingLine,c),this.drawline(),this.finishDrawline(!0);return}if(e.buttons===2||this.drawingLineName==="mind"&&((n=this.drawingLine)==null?void 0:n.calculative.worldAnchors.length)>1||this.store.options.drawingLineLength&&((r=this.drawingLine)==null?void 0:r.calculative.worldAnchors.length)>this.store.options.drawingLineLength){this.finishDrawline(!0),(a=this.store.active[0])!=null&&a.anchors[0].connectTo||this.store.active.length==0?this.drawingLineName="":this.drawingLineName=this.store.options.drawingLineName;return}if(this.store.options.autoAnchor&&this.hoverType===at.Node){const c=Xt(this.drawingLine),u=vu(this.store.hover,e);c.x=u.x,c.y=u.y,this.drawingLine.autoTo=!0,Zn(this.store.hover,u,this.drawingLine,c),this.drawline(),this.finishDrawline(!0);return}const s=Xt(this.drawingLine);s.isTemp?(this.drawingLine.calculative.activeAnchor=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2],s.isTemp=void 0):(this.drawingLine.calculative.activeAnchor=s,this.drawingLine.calculative.worldAnchors.push({x:s.x,y:s.y,penId:s.penId})),this.drawingLine.calculative.drawlineH=void 0,this.drawingLineName!=="polyline"&&this.drawline()}if(this.drawingLineName){if(this.hoverType===at.Node)if(this.store.options.autoAnchor){this.inactive(!0);const s=vu(this.store.hover,e);this.store.hoverAnchor=s;const c={id:it(),x:s.x,y:s.y};this.drawingLine=this.createDrawingLine(c),this.drawingLine.autoFrom=!0,Zn(this.store.hover,s,this.drawingLine,c)}else this.inactive(),this.hoverType=at.None;else if(this.hoverType===at.NodeAnchor){this.drawingLineName=this.store.options.drawingLineName;const s={id:it(),x:this.store.hoverAnchor.x,y:this.store.hoverAnchor.y};this.drawingLine=this.createDrawingLine(s),this.drawingLine.calculative.activeAnchor=s,Zn(this.store.hover,this.store.hoverAnchor,this.drawingLine,s)}else if(!this.drawingLine&&this.drawingLineName!=="curve"){this.inactive(!0);const s={id:it(),x:e.x,y:e.y};this.drawingLine=this.createDrawingLine(s),this.drawingLine.calculative.activeAnchor=s}}else if(this.pencil){this.inactive(!0);const s=it(),c={x:e.x,y:e.y,id:it(),penId:s};this.pencilLine=this.getInitPencilLine(c)}else{switch(this.hoverType){case at.None:(this.store.data.rule||this.store.options.rule)&&!this.store.options.disableRuleLine&&this.addRuleLine(e),this.store.options.resizeMode&&(this.hotkeyType=Qt.None),this.inactive();break;case at.Node:case at.Line:if(this.store.hover){if((i=this.store.active)!=null&&i.length&&this.store.active.length===1&&this.store.hover.id===this.store.active[0].id){this.calcActiveRect();break}const s=ma(this.store.hover,!0);let c=s||this.store.hover;s&&(s.container||(o=this.store.options.containerShapes)!=null&&o.includes(s.name))&&(c=this.store.hover),e.ctrlKey&&!e.shiftKey?(c.calculative.active?this.willInactivePen=c:this.store.active.length>0&&(c.calculative.active=!0,gu(c),this.store.active.push(c),this.store.emitter.emit("active",this.store.active)),this.patchFlags=!0):e.ctrlKey&&e.shiftKey&&this.store.hover.parentId?this.active([this.store.hover]):(!(this.activeRect&&fl({x:e.x,y:e.y},this.activeRect))||this.store.active.length==1)&&(c.calculative.active||(this.active([c]),this.store.options.resizeMode&&(this.hotkeyType=Qt.Resize))),this.calcActiveRect()}break;case at.LineAnchor:this.store.activeAnchor=this.store.hoverAnchor,this.store.hover.calculative.activeAnchor=this.store.hoverAnchor,this.active([this.store.hover]);break;case at.LineAnchorPrev:case at.LineAnchorNext:this.store.activeAnchor&&(this.prevAnchor={...this.store.activeAnchor.prev},this.nextAnchor={...this.store.activeAnchor.next});break;case at.Resize:this.activeInitPos=[],this.store.active.forEach(s=>{this.activeInitPos.push({x:(s.calculative.worldRect.x-this.activeRect.x)/this.activeRect.width,y:(s.calculative.worldRect.y-this.activeRect.y)/this.activeRect.height})});break}this.store.hover&&(this.store.hover.calculative.mouseDown=!0),this.store.emitter.emit("mousedown",{x:e.x,y:e.y,pen:this.store.hover})}this.render()}}});de(this,"onMouseMove",e=>{var r,a,i,o,s,c,u,d;if(this.store.data.locked===Ft.Disable){this.hoverType=at.None;return}if(this.mouseDown&&!this.mouseDown.restore&&e.buttons!==1&&e.buttons!==2){this.onMouseUp(e);return}if(this.lastMouseTime){if(performance.now()-this.lastMouseTime<50){this.lastMouseTime=0;return}this.lastMouseTime=0}if(this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.magnifierCanvas.magnifier){this.render();return}if(this.canvasImage.fitFlag&&this.canvasImage.activeFit){const f=performance.now();f-this.fitTimer>100&&(this.mouseDown?this.updateFit(e):this.inFitBorder(this.mousePos),this.fitTimer=f);return}if(this.mouseDown&&!this.store.options.disableTranslate&&!this.store.data.disableTranslate){if(this.mouseRight===cl.Down&&(this.mouseRight=cl.Translate),this.store.data.locked===Ft.DisableEdit||this.store.data.locked===Ft.DisableScale||this.hotkeyType===Qt.Translate||this.mouseRight===cl.Translate){const{scale:f}=this.store.data;let h=(e.x-this.mouseDown.x)/f,v=(e.y-this.mouseDown.y)/f;e.shiftKey&&!e.ctrlKey&&(v=0),e.ctrlKey&&(h=0),this.translate(h,v);return}if(this.store.data.locked)return;if(!this.drawingLine&&!this.pencil){if(!this.drawingLineName&&!this.movingAnchor){if(this.hoverType===at.NodeAnchor){if(!this.store.hoverAnchor)return;this.drawingLineName=this.store.options.drawingLineName;const f={id:it(),x:this.store.hoverAnchor.x,y:this.store.hoverAnchor.y};this.drawingLine=this.createDrawingLine(f),this.drawingLine.calculative.activeAnchor=f,Zn(this.store.hover,this.store.hoverAnchor,this.drawingLine,f),this.drawline();return}}else if(this.drawingLineName&&this.hoverType===at.None){const f={id:it(),x:e.x,y:e.y};this.drawingLine=this.createDrawingLine(f),this.drawingLine.calculative.activeAnchor=f,this.drawline();return}if(e.buttons===1&&(e.ctrlKey||!this.hoverType&&!this.hotkeyType)&&!(e.ctrlKey&&(this.store.activeAnchor||(r=this.store.active)!=null&&r.length))){this.dragRect={x:Math.min(this.mouseDown.x,e.x),y:Math.min(this.mouseDown.y,e.y),ex:Math.max(this.mouseDown.x,e.x),ey:Math.max(this.mouseDown.y,e.y),width:Math.abs(e.x-this.mouseDown.x),height:Math.abs(e.y-this.mouseDown.y)},this.render();return}if(this.movingAnchor){const f=e.x-this.movingAnchor.x,h=e.y-this.movingAnchor.y;this.translateAnchor(f,h),this.render();return}else if(!((a=this.store.active[0])!=null&&a.locked)){const f={x:e.x,y:e.y};if(this.hoverType===at.LineAnchor){(this.dockInAnchor(e)||((i=this.store.active[0])==null?void 0:i.lineName)==="line")&&!this.store.options.disableDock&&!this.store.options.disableLineDock&&(this.clearDock(),this.dock=R4(this.store,f,this.store.activeAnchor),(o=this.dock)!=null&&o.xDock&&(f.x+=this.dock.xDock.step),(s=this.dock)!=null&&s.yDock&&(f.y+=this.dock.yDock.step)),this.moveLineAnchor(f,e);return}if(this.hoverType===at.LineAnchorPrev){this.moveLineAnchorPrev(e);return}if(this.hoverType===at.LineAnchorNext){this.moveLineAnchorNext(e);return}}if(this.hoverType===at.Rotate){this.rotatePens({x:e.x,y:e.y});return}if(this.hoverType===at.Resize){this.resizePens(e);return}if(this.hoverType===at.Node||this.hoverType===at.Line){const f=e.x-this.mouseDown.x,h=e.y-this.mouseDown.y,v=20;if(e.ctrlKey&&!e.shiftKey&&(Math.abs(f)>=v||Math.abs(h)>=v)&&(this.willInactivePen=void 0),this.store.active.length===1){const p=this.store.active[0];if((p.locked===void 0||p.locked<Ft.DisableMove)&&((c=p==null?void 0:p.onMouseMove)==null||c.call(p,p,this.mousePos)),p.calculative.focus)return}this.movePens(e),this.getContainerHover(e);return}}else if(this.pencil){const{x:f,y:h}=e,v={x:f,y:h};v.id=it(),v.penId=this.pencilLine.id,this.pencilLine.calculative.worldAnchors.push(v),this.store.path2dMap.set(this.pencilLine,gt.path2dDraws[this.pencilLine.name](this.pencilLine)),this.patchFlags=!0}}if(this.drawingLine){const{x:f,y:h}=e,v={x:f,y:h};if(v.id=it(),v.penId=this.drawingLine.id,!this.store.options.disableDock&&!this.store.options.disableLineDock&&(this.clearDock(),this.dock=R4(this.store,v),(u=this.dock)!=null&&u.xDock&&(v.x+=this.dock.xDock.step),(d=this.dock)!=null&&d.yDock&&(v.y+=this.dock.yDock.step)),this.mouseDown&&this.drawingLineName==="curve"&&!this.drawingLine.calculative.worldAnchors[0].connectTo)this.drawline(v);else{let p;if(this.drawingLine.calculative.worldAnchors.length>1&&(p=Xt(this.drawingLine)),p?(p.prev=void 0,p.next=void 0,p.id||(p.id=it()),p.x=v.x,p.y=v.y,p.connectTo=void 0):(p={...v},this.drawingLine.calculative.worldAnchors.push(p)),(this.hoverType===at.NodeAnchor||this.hoverType===at.LineAnchor)&&(this.store.hoverAnchor.type!==vs.Line&&(p.x=this.store.hoverAnchor.x,p.y=this.store.hoverAnchor.y),p.connectTo=this.store.hoverAnchor.penId,this.drawingLineName==="polyline"&&(p.isTemp=!1)),this.drawingLineName==="line"){if(e.ctrlKey&&!e.shiftKey)p.x=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2].x;else if(e.shiftKey&&!e.ctrlKey)p.y=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2].y;else if(e.shiftKey&&e.ctrlKey){let g=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2];this.getSpecialAngle(p,g)}}this.drawline()}}globalThis.debug&&console.time("hover");const n=performance.now();n-this.hoverTimer>50&&(this.hoverTimer=n,this.getHover(e)),globalThis.debug&&console.timeEnd("hover"),this.hotkeyType===Qt.AddAnchor&&(this.patchFlags=!0),this.render(!1)});de(this,"onMouseUp",e=>{if(this.store.data.locked===Ft.Disable){this.hoverType=at.None;return}if(this.mouseDown){if(this.mouseRight===cl.Down&&(this.store.hover&&this.store.hover.onContextmenu?this.store.hover.onContextmenu(this.store.hover,e):this.store.emitter.emit("contextmenu",{e,clientRect:this.clientRect,pen:this.store.hover})),this.mouseRight=cl.None,this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.pencil&&this.finishPencil(),this.drawingLine){if(this.store.hoverAnchor){const n=Xt(this.drawingLine);this.store.hoverAnchor.type===vs.Line?ag(n,this.store.hoverAnchor,this.store):(n.x=this.store.hoverAnchor.x,n.y=this.store.hoverAnchor.y),Zn(this.store.hover,this.store.hoverAnchor,this.drawingLine,n),this.drawline(),this.finishDrawline(!0);return}if(this.store.options.autoAnchor&&this.hoverType===at.Node){const n=Xt(this.drawingLine),r=vu(this.store.hover,e);n.x=r.x,n.y=r.y,this.drawingLine.autoTo=!0,Zn(this.store.hover,r,this.drawingLine,n),this.drawline(),this.finishDrawline(!0);return}}if(this.hoverType===at.LineAnchor&&this.store.hover&&this.store.active[0]&&this.store.active[0].name==="line"&&this.store.active[0]!==this.store.hover){const n=this.store.active[0],r=Sn(n),a=Xt(n);if(this.store.hoverAnchor){const i=this.store.hover,o=Sn(i)===this.store.hoverAnchor,s=Xt(i)===this.store.hoverAnchor,c=r===this.store.activeAnchor,u=a===this.store.activeAnchor;if((e.ctrlKey||e.altKey)&&i.type===Gt.Line&&(o||s)&&(c||u)){const d=i.calculative.worldAnchors.map(f=>({...f,penId:n.id}));o?d.shift():s&&d.pop(),(o&&c||s&&u)&&d.reverse(),c?(n.calculative.worldAnchors[0].connectTo=void 0,n.calculative.worldAnchors.unshift(...d)):u&&(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].connectTo=void 0,n.calculative.worldAnchors.push(...d)),this.delete([i]),this.render()}else this.store.activeAnchor&&(this.store.hoverAnchor.type===vs.Line?ag(this.store.activeAnchor,this.store.hoverAnchor,this.store):(this.store.activeAnchor.x=this.store.hoverAnchor.x,this.store.activeAnchor.y=this.store.hoverAnchor.y),Zn(this.store.hover,this.store.hoverAnchor,n,this.store.activeAnchor));this[n.lineName]&&n.lineName!=="polyline"&&this[n.lineName](this.store,n),this.store.path2dMap.set(n,gt.path2dDraws.line(n)),this.initLineRect(n)}else r===this.store.activeAnchor&&n.autoFrom?this.calcAutoAnchor(n,r,this.store.hover):a===this.store.activeAnchor&&n.autoTo&&this.calcAutoAnchor(n,a,this.store.hover)}if(this.addCaches&&this.addCaches.length){if(!this.store.data.locked){if(this.dragRect&&this.addCaches.length===1){const n=this.addCaches[0];n.width=this.dragRect.width/this.store.data.scale,n.height=this.dragRect.height/this.store.data.scale,e.x=(this.dragRect.x+this.dragRect.ex)/2,e.y=(this.dragRect.y+this.dragRect.ey)/2}this.dropPens(this.addCaches,e)}this.addCaches=void 0}if(this.hoverType===at.Rotate&&(this.getSizeCPs(),this.store.active.forEach(n=>{n.rotate=n.calculative.rotate})),this.patchFlagsLines.forEach(n=>{n.type&&this.initLineRect(n)}),this.patchFlagsLines.clear(),this.dragRect)if(this.canvasImage.fitFlag)this.makeFit();else{const n=this.store.data.pens.filter(r=>{if(r.visible===!1||r.locked>=Ft.DisableMove||r.parentId||r.isRuleLine)return!1;if(Mo(r.calculative.worldRect,this.dragRect,e.ctrlKey||this.store.options.dragAllIn))return r.type===Gt.Line&&!this.store.options.dragAllIn?B1(r,this.dragRect):!0});this.active(n)}if(e.button!==2&&(rg(this.mouseDown,e)<2&&(this.store.hover&&this.store.hover.input&&this.showInput(this.store.hover),this.store.emitter.emit("click",{x:e.x,y:e.y,pen:this.store.hover})),this.store.hover&&(this.store.hover.calculative.mouseDown=!1),this.store.hover!=this.store.hoverContainer&&this.store.emitter.emit("mouseup",{x:e.x,y:e.y,pen:this.store.hover}),this.store.emitter.emit("mouseup",{x:e.x,y:e.y,pen:this.store.hoverContainer})),this.willInactivePen){this.willInactivePen.calculative.active=void 0,gu(this.willInactivePen,!1);const n=this.store.active.findIndex(r=>r===this.willInactivePen);n>=0&&this.store.active.splice(n,1),this.calcActiveRect(),this.willInactivePen=void 0,this.store.emitter.emit("inactive",[this.willInactivePen]),this.render()}this.movingPens&&(e.altKey&&!e.shiftKey?this.copyMovedPens():this.movedActivePens(e.ctrlKey&&e.shiftKey),this.getAllByPens(this.movingPens).forEach(n=>{this.store.pens[n.id]=void 0}),this.movingPens=void 0),this.store.active&&this.store.active[0]&&(this.store.active[0].calculative.h=void 0),this.mouseDown=void 0,this.lastOffsetX=0,this.lastOffsetY=0,this.clearDock(),this.dragRect=void 0,this.initActiveRect=void 0,this.render()}});de(this,"clearDock",()=>{var i,o,s,c;const e=(o=(i=this.dock)==null?void 0:i.xDock)==null?void 0:o.penId,n=(c=(s=this.dock)==null?void 0:s.yDock)==null?void 0:c.penId,r=this.store.pens[e];r&&(r.calculative.isDock=!1);const a=this.store.pens[n];a&&(a.calculative.isDock=!1),this.dock=void 0});de(this,"onResize",()=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.resize(),this.timer=void 0},100)});de(this,"onScroll",()=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.clientRect=this.canvas.getBoundingClientRect(),this.timer=void 0},100)});de(this,"calibrateMouse",e=>(e.x-=this.store.data.x,e.y-=this.store.data.y,e));de(this,"getContainerHover",e=>{var r;if(this.dragRect)return;this.store.hoverContainer=void 0;const n=this.store.data.pens.filter(a=>{var i;return a.container||((i=this.store.options.containerShapes)==null?void 0:i.includes(a.name))});if(n.length)for(let a=n.length-1;a>=0;--a){const i=n[a];if(!(i.visible==!1||i.calculative.inView==!1||i.locked===Ft.Disable)){if(fl(e,i.calculative.worldRect))this.store.hoverContainer=i,(r=i==null?void 0:i.onMouseMove)==null||r.call(i,i,e),this.store.lastHoverContainer!==this.store.hoverContainer&&(this.patchFlags=!0,this.store.lastHoverContainer&&(this.store.lastHoverContainer.calculative.containerHover=!1,this.store.emitter.emit("leave",this.store.lastHoverContainer)),this.store.hoverContainer&&(this.store.hoverContainer.calculative.containerHover=!0,this.store.emitter.emit("enter",this.store.hoverContainer)),this.store.lastHoverContainer=this.store.hoverContainer);else if(i===this.store.hoverContainer&&(this.store.hoverContainer=void 0,this.store.lastHoverContainer!==this.store.hoverContainer)){this.patchFlags=!0;const o=this.store.lastHoverContainer.calculative.canvas.store.pens[this.store.lastHoverContainer.id+Qr];this.store.lastHoverContainer&&!o&&(this.store.lastHoverContainer.calculative.containerHover=!1,this.store.emitter.emit("leave",this.store.lastHoverContainer)),this.store.lastHoverContainer=this.store.hoverContainer}}}});de(this,"getHover",e=>{var a,i;if(this.dragRect||this.canvasImage.fitFlag)return;let n=at.None;this.store.hover=void 0,this.store.hoverAnchor=void 0,this.title.hide(),this.store.pointAt=void 0,this.store.pointAtIndex=void 0;const r=this.store.active.length===1&&this.store.active[0].type;if(!this.drawingLineName&&this.hotkeyType!==Qt.AddAnchor&&this.activeRect&&!r&&!this.store.data.locked){const o=k1(this.store.active),s=P4(this.store.active)||this.store.options.disableRotate,c=A4(this.store.active)||this.store.options.disableSize;if(!o&&!s){const u={x:this.activeRect.center.x,y:this.activeRect.y-30};this.activeRect.rotate&&nn(u,this.activeRect.rotate,this.activeRect.pivot||this.activeRect.center),!this.hotkeyType&&ou(e,u,this.pointSize)&&(n=at.Rotate,this.externalElements.style.cursor=`url("${this.store.options.rotateCursor}"), auto`)}if(!o&&!c)for(let u=0;u<8;u++){const d=u<4;if((this.hotkeyType===Qt.Resize||d&&!this.hotkeyType)&&ou(e,this.sizeCPs[u],this.pointSize)){let h=d?V3:e4,v=0;Math.abs(this.activeRect.rotate%90-45)<25?(h=d?e4:V3,v=Math.round((this.activeRect.rotate-45)/90)+(d?0:1)):v=Math.round(this.activeRect.rotate/90),n=at.Resize,this.resizeIndex=u,this.externalElements.style.cursor=h[(u+v)%4];break}}}n===at.None&&(n=this.inPens(e,this.store.data.pens)),!n&&!r&&fl(e,this.activeRect)&&(n=at.Node,this.externalElements.style.cursor="move"),this.hoverType=n,n===at.None&&(this.drawingLineName||this.pencil?this.externalElements.style.cursor="crosshair":this.mouseDown||(this.externalElements.style.cursor="default"),this.store.hover=void 0),this.store.lastHover!==this.store.hover&&(this.patchFlags=!0,this.store.lastHover&&(this.store.lastHover.calculative.hover=!1,Tf(ma(this.store.lastHover,!0)||this.store.lastHover,!1),this.store.emitter.emit("leave",this.store.lastHover),this.tooltip.hide()),this.store.hover&&(this.store.hover.calculative.hover=!0,Tf(ma(this.store.hover,!0)||this.store.hover),this.store.emitter.emit("enter",this.store.hover),this.tooltip.show(this.store.hover,e)),this.store.lastHover=this.store.hover),(i=(a=this.store.hover)==null?void 0:a.onMouseMove)==null||i.call(a,this.store.hover,this.mousePos)});de(this,"inPens",(e,n)=>{var a;let r=at.None;e:for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.visible==!1||o.calculative.inView==!1||o.locked===Ft.Disable)continue;const s=hg(o);if(!(!o.calculative.active&&!ws(e,o.calculative.worldRect,s)&&!fl(e,o.calculative.worldRect))){if(!this.store.data.locked&&this.hotkeyType!==Qt.Resize&&o.calculative.worldAnchors){for(const c of o.calculative.worldAnchors)if(r=this.inAnchor(e,o,c),r){let u=Te(c);Object.assign(u,e),this.title.show(u,o);break e}}if(o.type){if(o.isRuleLine){let u=((a=this.store.options.ruleOptions)==null?void 0:a.height)||20;if(e.x+this.store.data.x>u&&e.y+this.store.data.y>u)break}const c=QCe(e,o);if(c){!this.store.data.locked&&!o.locked?this.hotkeyType===Qt.AddAnchor?this.externalElements.style.cursor="pointer":this.externalElements.style.cursor="move":this.externalElements.style.cursor=this.store.options.hoverCursor,o.calculative.disabled&&(this.externalElements.style.cursor="not-allowed"),this.store.hover=o,this.store.pointAt=c.point,this.store.pointAtIndex=c.i,this.initTemplateCanvas([this.store.hover]),r=at.Line;break}}else{if(o.children){const u=[];if(o.children.forEach(d=>{this.store.pens[d]&&u.push(this.store.pens[d])}),r=this.inPens(e,u),r)break}let c=!1;if(o.name==="line"?c=ws(e,o.calculative.worldRect,o.lineWidth):c=fl(e,o.calculative.worldRect),c){if(o.type===Gt.Node&&o.name==="line"&&!bCe(e,o.calculative.worldAnchors))continue;if(!this.store.data.locked&&!o.locked?this.hotkeyType===Qt.AddAnchor?this.externalElements.style.cursor="pointer":this.externalElements.style.cursor="move":this.externalElements.style.cursor=this.store.options.hoverCursor,o.calculative.disabled&&(this.externalElements.style.cursor="not-allowed"),this.store.hover=o,this.initTemplateCanvas([this.store.hover]),r=at.Node,this.store.pointAt=e,!e.ctrlKey){let{x:u,y:d,ex:f,ey:h,rotate:v,center:p}=this.store.hover.calculative.worldRect;if(v){const g=[{x:u,y:d},{x:f,y:d},{x:f,y:h},{x:u,y:h}];g.forEach(y=>{nn(y,v,p)});let m=g[g.length-1];for(const y of g){if(m.y>e.y!=y.y>e.y){const b=y.x+(e.y-y.y)*(m.x-y.x)/(m.y-y.y);Math.abs(b-this.store.pointAt.x)<10&&(this.store.pointAt.x=b)}m=y}}else this.store.pointAt.x-10<u?this.store.pointAt.x=u:this.store.pointAt.x+10>f&&(this.store.pointAt.x=f),this.store.pointAt.y-10<d?this.store.pointAt.y=d:this.store.pointAt.y+10>h&&(this.store.pointAt.y=h)}break}}}}return r});de(this,"dockInAnchor",e=>{var n,r;this.store.hover=void 0;for(let a=this.store.data.pens.length-1;a>=0;--a){const i=this.store.data.pens[a];if(i.visible==!1||i.locked===Ft.Disable||i===this.store.active[0])continue;let o=hg(i);if(o+=2*this.store.options.anchorRadius,!!ws(e,i.calculative.worldRect,o)&&(this.store.hover=i,this.hotkeyType!==Qt.Resize&&i.calculative.worldAnchors))for(const s of i.calculative.worldAnchors){if(s.twoWay===yr.In){const c=Xt(this.store.active[0]);if(this.store.activeAnchor.id!==c.id)continue}if(s.twoWay===yr.Out){const c=Sn(this.store.active[0]);if(this.store.activeAnchor.id!==c.id)continue}if(!(s.twoWay===yr.DisableConnected||s.twoWay===yr.Disable||((n=this.store.activeAnchor)==null?void 0:n.twoWay)===yr.DisableConnectTo||((r=this.store.activeAnchor)==null?void 0:r.twoWay)===yr.Disable)&&(this.title.hide(),this.inAnchor(e,i,s))){let c=Te(s);return Object.assign(c,e),this.title.show(c,i),!0}}}});de(this,"imageTimer");de(this,"templateImageTimer");de(this,"render",e=>{if(e&&(this.opening=!1),this.opening)return;let n;if(e==null||e===!0||e===1/0?(n=performance.now(),this.patchFlags=!0):e>1?n=e:n=performance.now(),!this.patchFlags)return;if(n-this.lastRender<this.store.options.interval){this.renderTimer&&cancelAnimationFrame(this.renderTimer),this.renderTimer=requestAnimationFrame(this.render);return}this.renderTimer=void 0,this.lastRender=n;const r=this.offscreen.getContext("2d");r.clearRect(0,0,this.offscreen.width,this.offscreen.height),r.save(),r.translate(this.store.data.x,this.store.data.y),globalThis.debugRender&&console.time("renderPens"),this.renderPens(),globalThis.debugRender&&console.timeEnd("renderPens"),this.renderBorder(),this.renderHoverPoint(),r.restore(),this.magnifierCanvas.render();const a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.drawImage(this.offscreen,0,0,this.width,this.height),this.canvasTemplate.render(),this.canvasImageBottom.render(),this.canvasImage.render(),this.patchFlags=!1});de(this,"renderPens",()=>{const e=this.offscreen.getContext("2d");e.strokeStyle=Sf(this.store);for(const n of this.store.data.pens)isFinite(n.x)&&n.canvasLayer!==Wt.CanvasTemplate&&(n.name==="combine"&&!n.draw||n.calculative.inView&&(n.canvasLayer===Wt.CanvasMain&&n.name!=="gif"&&n.image&&n.calculative.img&&(e.save(),gs(e,n),n.calculative.rotate&&No(e,n),bs(e,n),uu(e,n),e.restore()),ms(e,n)));this.drawingLine&&ms(e,this.drawingLine),this.pencilLine&&ms(e,this.pencilLine),this.movingPens&&this.movingPens.forEach(n=>{this.renderPenContainChild(e,n)})});de(this,"renderPenContainChild",(e,n)=>{var r;n.calculative.inView&&ms(e,n),(r=n.children)==null||r.forEach(a=>{const i=this.store.pens[a];i&&this.renderPenContainChild(e,i)})});de(this,"renderBorder",()=>{if(!this.store.data.locked&&this.activeRect&&!(this.store.active.length===1&&this.store.active[0].type)&&!this.movingPens){const e=this.offscreen.getContext("2d");e.save(),e.translate(.5,.5);const n=this.activeRect.pivot||this.activeRect.center;if(this.activeRect.rotate&&(e.translate(n.x,n.y),e.rotate(this.activeRect.rotate*Math.PI/180),e.translate(-n.x,-n.y)),e.strokeStyle=this.store.options.activeColor,e.globalAlpha=this.store.options.activeGlobalAlpha===void 0?.3:this.store.options.activeGlobalAlpha,e.beginPath(),e.lineWidth=this.store.options.activeLineWidth||1,e.setLineDash(this.store.options.activeLineDash||[]),e.strokeRect(this.activeRect.x,this.activeRect.y,this.activeRect.width,this.activeRect.height),e.setLineDash([]),e.lineWidth=1,e.globalAlpha=1,k1(this.store.active)||P4(this.store.active)||this.store.options.disableRotate){e.restore();return}e.beginPath(),e.moveTo(this.activeRect.center.x,this.activeRect.y),e.lineTo(this.activeRect.center.x,this.activeRect.y-30),e.stroke(),e.beginPath(),e.strokeStyle=this.store.options.activeColor,e.fillStyle="#ffffff",e.arc(this.activeRect.center.x,this.activeRect.y-30,5,0,Math.PI*2),e.fill(),e.stroke(),e.restore()}});de(this,"renderHoverPoint",()=>{if(this.store.data.locked)return;const e=this.offscreen.getContext("2d");if(e.save(),e.translate(.5,.5),!this.store.options.disableAnchor&&this.store.hover&&!this.store.hover.disableAnchor&&(this.hotkeyType!==Qt.Resize||this.store.active.length!==1||this.store.active[0]!==this.store.hover)){const n=[...this.store.hover.calculative.worldAnchors];this.store.pointAt&&this.hotkeyType===Qt.AddAnchor&&n.push(this.store.pointAt),n&&(e.strokeStyle=this.store.hover.anchorColor||this.store.options.anchorColor,e.fillStyle=this.store.hover.anchorBackground||this.store.options.anchorBackground,n.forEach(r=>{if(r.hidden&&r.locked>Ft.DisableEdit)return;if(r===this.store.hoverAnchor){e.save();const i=this.store.hover.hoverAnchorColor||this.store.options.hoverAnchorColor;e.strokeStyle=i,e.fillStyle=i}e.beginPath();let a=r.radius||this.store.hover.anchorRadius||this.store.options.anchorRadius;if(this.store.hover.type&&!r.radius&&!this.store.hover.anchorRadius&&(a=3,this.store.hover.calculative.lineWidth>3&&(a=this.store.hover.calculative.lineWidth)),r.type===vs.Line){let i=this.store.pens[r.penId].rotate||0;this.store.pens[r.penId].calculative.flipX&&(i*=-1),this.store.pens[r.penId].calculative.flipY&&(i*=-1);let o=r.rotate+i;this.store.pens[r.penId].calculative.flipX&&(o*=-1),this.store.pens[r.penId].calculative.flipY&&(o*=-1),e.save(),e.translate(r.x,r.y),e.rotate(o*Math.PI/180),e.translate(-r.x,-r.y),e.rect(r.x-r.length*this.store.data.scale/2,r.y-a,r.length*this.store.data.scale,a*2),e.restore()}else e.arc(r.x,r.y,a,0,Math.PI*2);if(this.store.hover.type&&this.store.hoverAnchor===r?(e.save(),e.strokeStyle=this.store.hover.activeColor||this.store.options.activeColor,e.fillStyle=e.strokeStyle):(r.color||r.background)&&(e.save(),e.strokeStyle=r.color,e.fillStyle=r.background),e.fill(),e.stroke(),r===this.store.hoverAnchor&&e.restore(),(this.store.hover.type&&this.store.hoverAnchor===r||r.color||r.background)&&e.restore(),!this.store.hover.parentId&&this.store.hover.children&&this.store.hover.children.length>0&&r===this.store.hoverAnchor){e.save(),e.beginPath(),e.lineWidth=3;const i=this.store.hover.hoverAnchorColor||this.store.options.hoverAnchorColor;globalThis.pSBC&&(e.strokeStyle=globalThis.pSBC(.5,i)),e.arc(r.x,r.y,a+1.5,0,Math.PI*2),e.stroke(),e.restore()}}))}this.hotkeyType!==Qt.AddAnchor&&!this.movingPens&&this.activeRect&&!(this.store.active.length===1&&this.store.active[0].type)&&!k1(this.store.active)&&!A4(this.store.active)&&!this.store.options.disableSize&&(e.strokeStyle=this.store.options.activeColor,e.fillStyle="#ffffff",this.sizeCPs.forEach((n,r)=>{this.activeRect.rotate&&(e.save(),e.translate(n.x,n.y),e.rotate(this.activeRect.rotate*Math.PI/180),e.translate(-n.x,-n.y)),(r<4||this.hotkeyType===Qt.Resize)&&(e.beginPath(),e.fillRect(n.x-4.5,n.y-4.5,8,8),e.strokeRect(n.x-5.5,n.y-5.5,10,10)),this.activeRect.rotate&&e.restore()})),!this.store.data.locked&&this.dragRect&&(e.save(),e.fillStyle=ig(this.store.options.dragColor,.2),e.strokeStyle=this.store.options.dragColor,e.beginPath(),e.strokeRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height),e.fillRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height),e.restore()),this.dock&&(e.strokeStyle=this.store.options.dockColor,this.dock.xDock&&(e.beginPath(),e.moveTo(this.dock.xDock.x,this.dock.xDock.y),e.lineTo(this.dock.xDock.x,this.dock.xDock.prev.y),e.stroke()),this.dock.yDock&&(e.beginPath(),e.moveTo(this.dock.yDock.x,this.dock.yDock.y),e.lineTo(this.dock.yDock.prev.x,this.dock.yDock.y),e.stroke())),e.restore()});de(this,"pastePen",(e,n)=>{const r=e.id;if(F4(e),e.parentId=n,e.type===Gt.Line?this.changeNodeConnectedLine(r,e,this.store.clipboard.pens):this.changeLineAnchors(r,e,this.store.clipboard.pens),!e.parentId){const i=this.getPenRect(e,this.store.clipboard.origin,this.store.clipboard.scale),o=this.getPenRect(this.store.clipboard.initRect,this.store.clipboard.origin,this.store.clipboard.scale),{origin:s,scale:c}=this.store.data;e.x=s.x+i.x*c,e.y=s.y+i.y*c,e.width=i.width*c,e.height=i.height*c,o.x=s.x+o.x*c,o.y=s.y+o.y*c,cn(o),this.store.clipboard.pos&&(e.x-=o.center.x-this.store.clipboard.pos.x,e.y-=o.center.y-this.store.clipboard.pos.y),this.keyOptions&&this.keyOptions.altKey&&(this.keyOptions.ctrlKey||this.keyOptions.metaKey)?(e.x=-this.store.data.x+this.width/2-e.width/2,e.y=-this.store.data.y+this.height/2-e.height/2):this.keyOptions&&this.keyOptions.shiftKey&&(this.keyOptions.ctrlKey||this.keyOptions.metaKey)||(e.x+=this.store.clipboard.offset*this.store.data.scale,e.y+=this.store.clipboard.offset*this.store.data.scale)}this.makePen(e);const a=[];if(Array.isArray(e.children))for(const i of e.children){const o=this.store.clipboard.pens.find(s=>s.id===i);o&&a.push(this.pastePen(o,e.id).id)}return e.children=a,Do(e,!0),e});de(this,"ondblclick",e=>{var n;this.store.hover&&(!this.store.data.locked||this.store.hover.dbInput)&&!this.store.options.disableInput&&(this.store.hover.onShowInput?this.store.hover.onShowInput(this.store.hover,e):this.store.hover&&this.store.hover.parentId?((n=this.store.active)==null?void 0:n.length)===1&&this.store.active[0].id===this.store.hover.id?this.showInput(this.store.hover):(this.store.pens[this.store.hover.parentId].children.forEach(r=>{this.store.pens[r].calculative.active=!1,this.store.pens[r].calculative.hover=!1}),this.active([this.store.hover])):this.showInput(this.store.hover)),this.store.emitter.emit("dblclick",{x:e.x,y:e.y,pen:this.store.hover})});de(this,"showInput",(e,n,r="transparent")=>{if(!window||!this.store.hover||this.store.hover.locked||this.store.hover.externElement||this.store.hover.disableInput||this.store.hover.disabled)return;if(this.inputDiv.dataset.penId===e.id){this.inputDiv.dataset.isInput="true",this.inputDiv.contentEditable="true",this.inputDiv.focus();const d=window.getSelection();d.selectAllChildren(this.inputDiv),d.collapseToEnd(),this.inputDiv.scrollTop=this.inputDiv.scrollHeight,this.inputDiv.scrollLeft=this.inputDiv.scrollWidth;return}!n&&!e.dbInput?this.setInputStyle(e):(this.inputDiv.style.width="100%",this.inputDiv.style.height="100%");const a=n||e.calculative.worldTextRect,s=`${(e.calculative.tempText===void 0?e.text+""||"":e.calculative.tempText).replace(/\x20/g,"&nbsp;").split(/[\s\n]/).join("</div><div>")}</div>`.replace("</div>","").replace(/\<div\>\<\/div\>/g,"<div><br></div>");this.inputDiv.innerHTML=s,this.inputParent.style.left=a.x+this.store.data.x-(e.textLeft||0)+"px",this.inputParent.style.top=a.y+this.store.data.y-(e.textTop||0)+"px";let c=a.width;this.inputParent.style.width=(c<0?12:c)+"px",this.inputParent.style.height=a.height+(e.textTop||0)+"px",this.inputParent.style.zIndex="9999",this.inputParent.style.background=r,e.rotate%360?this.inputParent.style.transform=`rotate(${e.rotate}deg)`:this.inputParent.style.transform=null,this.inputParent.style.display="flex",this.inputDiv.dataset.penId=e.id,this.inputDiv.contentEditable=e.disableInput==null?"true":e.disableInput.toString(),e.dropdownList&&this.dropdown.style.display!=="block"&&(this.dropdown.style.background=e.dropdownBackground||"#fff",this.dropdown.style.color=e.dropdownColor||"#bdc7db",this.setDropdownList()),this.inputDiv.contentEditable="true",this.inputDiv.focus();const u=window.getSelection();u.selectAllChildren(this.inputDiv),u.collapseToEnd(),this.inputDiv.scrollTop=this.inputDiv.scrollHeight,this.inputDiv.scrollLeft=this.inputDiv.scrollWidth,e.calculative.text=void 0,this.initTemplateCanvas([e]),this.render()});de(this,"setInputStyle",e=>{e.text||(e.text="");let n;for(let c=0;c<document.styleSheets.length;c++)document.styleSheets[c].title==="le5le.com"&&(n=document.styleSheets[c]);let r="overflow: scroll;",a="",i=1;const{scale:o}=this.store.data;if(e.fontSize<12&&(i=12/e.fontSize),e.textAlign?r+=`text-align: ${e.textAlign};`:r+="text-align: center;",e.textAlign&&e.whiteSpace==="pre-line"&&(r+=`align-items: ${{left:"start",center:"center",right:"end"}[e.textAlign]};`),e.textBaseline?r+=`justify-content: ${{top:"start",middle:"center",bottom:"end"}[e.textBaseline]};`:r+="justify-content: center;",e.fontFamily&&(r+=`font-family: ${e.fontFamily};`),e.fontSize&&(e.fontSize*o<12?(r+=`font-size:${e.fontSize}px;`,r+=`zoom:${e.fontSize/12*o};`):r+=`font-size:${e.fontSize*o}px;`),r+=`color:${dl(e,this.store)};`,e.fontStyle&&(r+=`font-style: ${e.fontStyle};`),e.fontWeight&&(r+=`font-weight: ${e.fontWeight};`),e.textLeft&&(r+=`margin-left:${o>1?e.textLeft*i:e.textLeft*i/o}px;`),e.textTop&&(r+=`margin-top:${o>1?e.textTop*i:e.textTop*i/o}px;`),e.lineHeight&&(r+=`line-height:${o>1?e.fontSize*e.lineHeight*o:e.fontSize*e.lineHeight*i}px;`),e.textHeight)r+=`height:${o>1?e.textHeight*i*o:e.textHeight*i}px;`;else{let c=e.calculative.worldRect.height/o;c<0&&(c=0);let u=e.fontSize*o<12?c*i:c*o*i;u<e.fontSize*e.lineHeight*o&&(u=e.fontSize*e.lineHeight*o,r+=`top:-${u/2}px;`),r+=`height:${u}px;`}let s=null;if(e.textWidth)s=e.textWidth<1&&e.textWidth>-1?e.textWidth*e.calculative.worldRect.width:e.textWidth,e.whiteSpace!=="pre-line"&&(s<e.fontSize?r+=`width:${e.fontSize*1.2*i}px;`:r+=`width:${o>1?s*i*o:s*i}px;`);else if(e.whiteSpace===void 0||e.whiteSpace==="break-all"){let c=(e.calculative.worldTextRect.width||12)/o;c<0&&(c=0),r+=`width:${e.fontSize*o<12?c*i:c*o}px;`}if(e.whiteSpace&&(e.whiteSpace==="pre-line"?r+="white-space:pre;":(r+=`white-space:${e.whiteSpace};`,e.whiteSpace==="nowrap"&&(a+="display:contents;"))),e.whiteSpace!=="nowrap"){let c=e.fontSize*1.2*e.text.length,u=(s||e.calculative.worldRect.width/o)*Math.floor(e.calculative.worldRect.height/o/(e.lineHeight*e.fontSize));c>u&&(r+="justify-content: start;")}n.deleteRule(0),n.deleteRule(0),n.insertRule(`.meta2d-input
      .input-div{
        resize:none;border:none;outline:none;background:transparent;position:absolute;flex-grow:1;height:100%;width: 100%;position:absolute;left:0;top:0;display:flex;flex-direction: column;cursor: text;${r}}`),n.insertRule(`.input-div div{${a}}`)});de(this,"hideInput",()=>{if(this.inputParent.style.display==="flex"){this.inputParent.style.display="none";const e=this.store.pens[this.inputDiv.dataset.penId];if(!e)return;if(e.calculative.text=e.text,this.inputDiv.dataset.value=this.inputDiv.innerHTML.replace(/\<div\>/g,`
`).replace(/\<\/div\>/g,"").replace(/\<br\>/g,"").replace(/&nbsp;/g," ").replace(/(<([^>]+)>)/gi,""),this.inputDiv.dataset.value=this.convertSpecialCharacter(this.inputDiv.dataset.value),e.onInput)e.onInput(e,this.inputDiv.dataset.value);else if(e.text!==this.inputDiv.dataset.value){const n=[Te(e,!0)];e.text=this.inputDiv.dataset.value,e.calculative.text=e.text,this.inputDiv.dataset.penId=void 0,e.text&&e.textAutoAdjust&&kxe(e),Bi(e),this.patchFlags=!0,this.pushHistory({type:nt.Update,pens:[Te(e,!0)],initPens:n}),this.store.emitter.emit("change",e),this.store.emitter.emit("valueUpdate",e)}else e.text===this.inputDiv.dataset.value&&e.calculative.textLines.length==0&&Bi(e);this.initTemplateCanvas([e])}this.inputDiv.dataset.penId=void 0,this.dropdown.style.display="none",this.inputDiv.dataset.isInput="false",this.inputDiv.contentEditable="false",this.render()});de(this,"setDropdownList",e=>{this.clearDropdownList();const n=this.store.pens[this.inputDiv.dataset.penId];if(!this.store.data.locked&&!["tablePlus"].includes(n.name))return;if(this.dropdown.style.display="block",!n||!n.dropdownList){this.dropdown.style.display="none";return}if(!n.dropdownList.length){const i=document.createElement("div");i.innerText="None",i.style.padding="5px 12px",i.style.color="#ddd",this.dropdown.appendChild(i);return}const r=this.inputDiv.innerHTML.replace(/\<div\>/g,`
`).replace(/\<\/div\>/g,"").replace(/\<br\>/g,"");let a=0;for(const i of n.dropdownList){const o=typeof i=="string"?i:i.text;e&&r?o.includes(r)&&this.dropdownAppendOption(o,a):this.dropdownAppendOption(o,a),++a}if(!this.dropdown.hasChildNodes()){const i=document.createElement("div");i.innerText="None",i.style.padding="5px 12px",i.style.color="#ddd",this.dropdown.appendChild(i)}});de(this,"selectDropdown",e=>{const n=e.target,r=this.store.pens[this.inputDiv.dataset.penId];if(!n||!r||!r.dropdownList)return;const a=+n.dataset.i,i=r.dropdownList[a];if(!i)return;const o=[Te(r,!0)];typeof i=="object"?(this.updateValue(r,{...i}),r.calculative.text=void 0,this.calcActiveRect()):r.text=i+"",this.inputDiv.innerText=r.text,this.hideInput(),this.pushHistory({type:nt.Update,pens:[Te(r,!0)],initPens:o}),this.render(),this.store.emitter.emit("change",r),this.store.emitter.emit("valueUpdate",r)});de(this,"inFitBorder",e=>{let n;const r=this.store.data.width||this.store.options.width,a=this.store.data.height||this.store.options.height;let i={x:(e.x-this.store.data.origin.x)/this.store.data.scale,y:(e.y-this.store.data.origin.y)/this.store.data.scale};const o=this.canvasImage.activeFit;this.externalElements.style.cursor="default",i.y>a*o.y-10&&i.y<a*o.y+10&&(n="top",this.externalElements.style.cursor="row-resize"),i.y>a*(o.y+o.height)-10&&i.y<a*(o.y+o.height)+10&&(n="bottom",this.externalElements.style.cursor="row-resize"),i.x>r*o.x-10&&i.x<r*o.x&&(n="left",this.externalElements.style.cursor="col-resize"),i.x>r*(o.x+o.width)-10&&i.x<r*(o.x+o.width)+10&&(n="right",this.externalElements.style.cursor="col-resize"),this.canvasImage.currentFit=n});this.parent=e,this.parentElement=n,this.store=r,this.canvasTemplate=new C_e(n,r),this.canvasTemplate.canvas.style.zIndex="1",this.canvasImageBottom=new a8(n,r,!0),this.canvasImageBottom.canvas.style.zIndex="2",n.appendChild(this.canvas),this.canvas.style.position="absolute",this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.zIndex="3",this.canvasImage=new a8(n,r),this.canvasImage.canvas.style.zIndex="4",this.magnifierCanvas=new w_e(this,n,r),this.magnifierCanvas.canvas.style.zIndex="5",this.externalElements.style.position="absolute",this.externalElements.style.left="0",this.externalElements.style.top="0",this.externalElements.style.outline="none",this.externalElements.style.background="transparent",this.externalElements.style.zIndex="5",n.style.position="relative",n.appendChild(this.externalElements),this.createInput(),this.tooltip=new Ef(n,r),this.tooltip.box.onmouseleave=a=>{this.patchFlags=!0,this.store.lastHover&&(this.store.lastHover.calculative.hover=!1);let i=this.store.data.pens.find(o=>o.calculative.hover===!0);Tf(i,!1)},this.popconfirm=new S_e(n,r),this.dialog=new x_e(n),this.title=new yg(n),this.store.options.scroll&&(this.scroll=new r8(this)),this.store.dpiRatio=globalThis.devicePixelRatio||1,this.store.dpiRatio<1?this.store.dpiRatio=1:this.store.dpiRatio>1&&this.store.dpiRatio<1.5&&(this.store.dpiRatio=1.5),this.clientRect=this.externalElements.getBoundingClientRect(),this.listen(),window==null||window.addEventListener("resize",this.onResize),window==null||window.addEventListener("scroll",this.onScroll),window==null||window.addEventListener("message",this.onMessage)}listen(){switch(this.externalElements.addEventListener("gesturestart",this.onGesturestart),this.externalElements.ondragover=e=>e.preventDefault(),this.externalElements.ondrop=this.ondrop,this.externalElements.oncontextmenu=e=>e.preventDefault(),this.store.options.interval=50,this.externalElements.ontouchstart=this.ontouchstart,this.externalElements.ontouchmove=this.ontouchmove,this.externalElements.ontouchend=this.ontouchend,this.externalElements.onmousedown=e=>{this.onMouseDown({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons})},this.externalElements.onmousemove=e=>{e.target===this.externalElements&&this.onMouseMove({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons})},this.externalElements.onmouseup=e=>{this.onMouseUp({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons,button:e.button})},this.externalElements.onmouseleave=e=>{this.store.data.pens.forEach(n=>{n.calculative.hover&&(n.calculative.hover=!1)}),this.store.hover&&(this.store.hover.calculative.hover=!1,this.store.hover=void 0),this.render(),e.toElement!==this.tooltip.box&&e.toElement!==this.tooltip.arrowUp&&e.toElement!==this.tooltip.arrowDown&&(this.tooltip.hide(),this.store.lastHover=void 0)},this.externalElements.ondblclick=this.ondblclick,this.externalElements.tabIndex=0,this.externalElements.onblur=()=>{this.mouseDown=void 0},this.externalElements.onwheel=this.onwheel,document.addEventListener("copy",this.onCopy),document.addEventListener("cut",this.onCut),document.addEventListener("paste",this.onPaste),this.store.options.keydown){case Cf.Document:document.addEventListener("keydown",this.onkeydown),document.addEventListener("keyup",this.onkeyup);break;case Cf.Canvas:this.externalElements.addEventListener("keydown",this.onkeydown),this.externalElements.addEventListener("keyup",this.onkeyup);break}}splitLine(e,n){const r=e.calculative.worldAnchors,a=r.findIndex(d=>d===n);if([-1,0,r.length-1].includes(a))return;const i=Te(e,!0),o=Te(e,!0),s=it();o.id=s,o.calculative.canvas=this,o.calculative.active=!1,o.calculative.hover=!1;const c=Te(r.slice(0,a+1)),u=Te(r.slice(a)).map(d=>(d.penId=s,d));e.calculative.worldAnchors=c,o.calculative.worldAnchors=u,this.initLineRect(e),this.initLineRect(o),this.store.data.pens.push(o),this.store.pens[s]=o,this.pushHistory({type:nt.Add,pens:[Te(o,!0)],step:2}),this.pushHistory({type:nt.Update,initPens:[i],pens:[Te(e,!0)],step:2})}translateAnchor(e,n){this.movingAnchor.x+=e,this.movingAnchor.y+=n;const r=this.movingAnchor.penId;if(r){const a=this.store.pens[r],i=a.calculative.worldRect;this.movingAnchor.x<i.x?this.movingAnchor.x=i.x:this.movingAnchor.x>i.ex&&(this.movingAnchor.x=i.ex),this.movingAnchor.y<i.y?this.movingAnchor.y=i.y:this.movingAnchor.y>i.ey&&(this.movingAnchor.y=i.ey);const o=Of(this.movingAnchor,i),s=a.anchors.findIndex(c=>c.id===this.movingAnchor.id);a.anchors[s]=o,this.patchFlags=!0}}async fileToPen(e,n){let r="";return this.store.options.uploadFn?r=await this.store.options.uploadFn(e):this.store.options.uploadUrl?r=await Pxe(e,this.store.options.uploadUrl,this.store.options.uploadParams,this.store.options.uploadHeaders):r=await Exe(e),new Promise((a,i)=>{const o=new Image;o.onload=()=>{gt.htmlElements[r]=o,a({width:o.width,height:o.height,name:n?"gif":"image",image:r})},o.onerror=s=>{i(s)},o.crossOrigin="anonymous",o.src=r})}async dropPens(e,n){var c;this.randomIdObj={};for(const u of e)!u.parentId&&this.randomCombineId(u,e);if(Object.keys(this.randomIdObj).length!==0)for(const u of e)u.type?(u.anchors[0].connectTo=this.randomIdObj[u.anchors[0].connectTo],u.anchors[u.anchors.length-1].connectTo=this.randomIdObj[u.anchors[u.anchors.length-1].connectTo]):(c=u.connectedLines)==null||c.forEach(d=>{d.lineAnchor=this.randomIdObj[d.lineAnchor],d.lineId=this.randomIdObj[d.lineId]});for(const u of e)u.id||(u.id=it()),!u.calculative&&(u.calculative={canvas:this}),this.store.pens[u.id]=u;let r=0,a=0,i=0;for(const u of e)u.parentId||(u.width*=this.store.data.scale,u.height*=this.store.data.scale,u.x=n.x-u.width/2+i,u.y=n.y-u.height/2+a,u.tags&&u.tags.includes("meta3d")&&(u.x=this.store.data.origin.x,u.y=this.store.data.origin.y),u.dataset&&(r%2===0?i=u.width-40*this.store.data.scale:i=0,r++,r%2===0&&(a+=u.height+10*this.store.data.scale)));const o=this.store.data.width||this.store.options.width,s=this.store.data.height||this.store.options.height;if(o&&s){let u={x:this.store.data.origin.x,y:this.store.data.origin.y,width:o*this.store.data.scale,height:s*this.store.data.scale},d=!0;for(const f of e)if(!f.parentId){let h=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x,y:f.y+f.height},{x:f.x+f.width,y:f.y+f.height},{x:f.x+f.width/2,y:f.y+f.height/2}];if(f.x===u.x&&f.y===u.y&&f.width===u.width&&f.height===u.height||h.some(v=>fl(v,u))){d=!1,this.store.options.strictScope&&(f.x<u.x&&(f.x=u.x),f.y<u.y&&(f.y=u.y),f.x+f.width>u.x+u.width&&(f.x=u.x+u.width-f.width),f.y+f.height>u.y+u.height&&(f.y=u.y+u.height-f.height));break}}if(d){console.info("画笔在大屏范围外");return}}await this.addPens(e,!0),this.active(e.filter(u=>!u.parentId)),this.render(),this.externalElements.focus()}randomCombineId(e,n,r){let a=null;e.type?(e.anchors[0].connectTo||e.anchors[e.anchors.length-1].connectTo)&&(a=[e.id,e.anchors[0].id,e.anchors[e.anchors.length-1].id]):e.connectedLines&&e.connectedLines.length&&(a=[e.id]),F4(e),a&&(a.length===1?this.randomIdObj[a[0]]=e.id:(this.randomIdObj[a[0]]=e.id,this.randomIdObj[a[1]]=e.anchors[0].id,this.randomIdObj[a[2]]=e.anchors[e.anchors.length-1].id)),e.parentId=r;const i=[];if(Array.isArray(e.children))for(const o of e.children){const s=n.find(c=>c.id===o);s&&i.push(this.randomCombineId(s,n,e.id).id)}return e.children=i,e}async addPens(e,n,r){if(this.beforeAddPens&&await this.beforeAddPens(e)!=!0)return[];const a=[];for(const i of e)this.beforeAddPen&&this.beforeAddPen(i)!=!0||(r&&(i.x=i.x*this.store.data.scale+this.store.data.origin.x,i.y=i.y*this.store.data.scale+this.store.data.origin.y,i.width=i.width*this.store.data.scale,i.height=i.height*this.store.data.scale),this.makePen(i),a.push(i));return this.render(),this.store.emitter.emit("add",a),n&&this.pushHistory({type:nt.Add,pens:Te(a,!0)}),a}getInitPencilLine(e){const{data:n,options:r}=this.store,a=n.scale,i=n.lineWidth||1;return{id:e.penId,name:"line",x:e.x,y:e.y,type:Gt.Line,calculative:{canvas:this,pencil:!0,active:!0,worldAnchors:[e],lineWidth:i*a},fromArrow:n.fromArrow||r.fromArrow,toArrow:n.toArrow||r.toArrow,lineWidth:i}}createDrawingLine(e){this.inactive();const{data:n,options:r}=this.store,a=n.scale,i=n.lineWidth||1;return e.penId=it(),{id:e.penId,name:"line",lineName:this.drawingLineName,x:e.x,y:e.y,type:Gt.Line,calculative:{canvas:this,active:!0,worldAnchors:[e],lineWidth:i*a},fromArrow:n.fromArrow||r.fromArrow,toArrow:n.toArrow||r.toArrow,lineWidth:i}}addRuleLine(e){const{x:n,y:r,scale:a,origin:i}=this.store.data,o=e.x+n,s=e.y+r;let c=e.x,u=e.y,d=0,f=0,h=0,v=0;if(o<=s&&o<20)c=-n,d=this.width,h=1,e.ctrlKey||(u=Math.round((u-i.y)/(a*10))*(a*10)+i.y);else if(s<o&&s<20)u=-r,f=this.height,v=1,e.ctrlKey||(c=Math.round((c-i.x)/(a*10))*(a*10)+i.x);else return;this.addPen({isRuleLine:!0,type:Gt.Line,name:"line",lineName:"line",x:c,y:u,width:d,height:f,color:this.store.options.ruleLineColor,anchors:[{x:0,y:0},{x:h,y:v}]})}clearRuleLines(){this.delete(this.ruleLines)}get ruleLines(){return this.store.data.pens.filter(e=>e.isRuleLine)}alignPenToGrid(e){var r;if(this.store.options.autoAlignGrid&&this.store.data.grid&&!e.type){const a=this.store.data.gridSize||this.store.options.gridSize,{origin:i,scale:o}=this.store.data,{x:s,y:c}=e,u={x:s,y:c},d=this.getPenRect(e),f=parseInt((d.x/a).toFixed()),h=parseInt((d.y/a).toFixed()),v=f*a,p=h*a;u.x=i.x+v*o,u.y=i.y+p*o,Object.assign(e,u),(r=e.onMove)==null||r.call(e,e),this.updatePenRect(e),this.calcActiveRect(),this.getSizeCPs()}}movedActivePens(e){let n=this.getAllFollowersByPens(this.store.active,!1);const r=Te(n,!0),a=this.store.data.gridSize||this.store.options.gridSize,{origin:i,scale:o}=this.store.data,s=this.store.options.autoAlignGrid&&this.store.data.grid;if(n.forEach(h=>{var y;const v=this.movingPens.findIndex(b=>b.id===h.id+Qr);if(v<0)return;const{x:p,y:g}=this.movingPens[v],m={x:p,y:g};if(s&&!this.movingPens[v].type){const b=this.getPenRect(this.movingPens[v]),w=parseInt((b.x/a).toFixed()),x=parseInt((b.y/a).toFixed()),C=w*a,S=x*a;m.x=i.x+C*o,m.y=i.y+S*o}Object.assign(h,m),(y=h.onMove)==null||y.call(h,h),this.updatePenRect(h),this.updateLines(h),this.store.emitter.emit("updateLines",h),this.patchFlagsLines.forEach(b=>{b.type&&this.initLineRect(b)}),this.patchFlagsLines.clear(),h.calculative.x=h.x,h.calculative.y=h.y,h.calculative.initRect&&(h.calculative.initRect.x=h.calculative.x,h.calculative.initRect.y=h.calculative.y,h.calculative.initRect.ex=h.calculative.x+h.calculative.width,h.calculative.initRect.ey=h.calculative.y+h.calculative.height),_4(h),h.parentId&&this.parent.updateRectbyChild(h.calculative.worldRect,h,this.store.pens[h.parentId])}),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),!this.dock)return;const{xDock:c,yDock:u}=this.dock;let d;c&&(d=this.store.pens[c.penId]),!d&&u&&(d=this.store.pens[u.penId]);const f=Te(this.store.active,!0);if(e&&this.store.active.length===1&&(d==null?void 0:d.type)===1&&(c!=null&&c.anchorId||u!=null&&u.anchorId)){const h=Sn(d),v=Xt(d);if(c!=null&&c.anchorId){const p=this.store.pens[this.store.active[0].id+Qr].calculative.worldAnchors.find(g=>g.id===c.anchorId);p.x===h.x&&p.y===h.y?(r.push(Te(d,!0)),Zn(this.store.active[0],p,d,h),f.push(Te(d,!0))):p.x===v.x&&p.y===v.y&&(r.push(Te(d,!0)),Zn(this.store.active[0],p,d,v),f.push(Te(d,!0)))}else if(u!=null&&u.anchorId){const p=this.store.pens[this.store.active[0].id+Qr].calculative.worldAnchors.find(g=>g.id===u.anchorId);p.x===h.x&&p.y===h.y?(r.push(Te(d,!0)),Zn(this.store.active[0],p,d,h),f.push(Te(d,!0))):p.x===v.x&&p.y===v.y&&(r.push(Te(d,!0)),Zn(this.store.active[0],p,d,v),f.push(Te(d,!0)))}}s&&(this.calcActiveRect(),this.getSizeCPs()),this.pushHistory({type:nt.Update,pens:f,initPens:r}),this.store.emitter.emit("translatePens",f)}copyMovedPens(){this.copy(this.store.active.map((e,n)=>{const{x:r,y:a}=this.movingPens[n];return this.updateLines(e),{...e,x:r,y:a}})),this.pasteOffset=!1,this.paste()}initImageCanvas(e){e.some(n=>this.hasImage(n,!1))&&this.canvasImage.init(),e.some(n=>this.hasImage(n,!0))&&this.canvasImageBottom.init()}initTemplateCanvas(e){e.some(n=>n.canvasLayer===Wt.CanvasTemplate)&&this.canvasTemplate.init()}hasImage(e,n){var r;return e.image&&e.name!=="gif"?n?e.canvasLayer===Wt.CanvasImageBottom:e.canvasLayer===Wt.CanvasImage:(r=e.children)==null?void 0:r.some(a=>{const i=this.store.pens[a];return i&&this.hasImage(i,n)})}inactive(e){this.store.active.length&&(this.initTemplateCanvas(this.store.active),this.store.active.forEach(n=>{n.calculative.active=void 0,n.calculative.activeAnchor=void 0,n.calculative.hover=!1,gu(n,!1)}),!e&&this.store.emitter.emit("inactive",this.store.active),this.store.active=[],this.activeRect=void 0,this.sizeCPs=void 0,this.store.activeAnchor=void 0,this.patchFlags=!0)}active(e,n=!0){if(this.store.active){n&&this.store.emitter.emit("inactive",this.store.active);for(const r of this.store.active)r.calculative.active=void 0,r.calculative.hover=!1,gu(r,!1)}this.store.active=[],e.forEach(r=>{r.calculative.active=!0,gu(r)}),this.store.active.push(...e),this.activeRect=void 0,this.calcActiveRect(),this.initTemplateCanvas(e),this.patchFlags=!0,n&&this.store.emitter.emit("active",this.store.active)}getSizeCPs(){this.sizeCPs=Ro(this.activeRect);const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],{x:n,y:r,width:a,height:i,rotate:o,center:s}=this.activeRect;e.forEach(c=>{const u={x:c.x*a+n,y:c.y*i+r};nn(u,o,s),this.sizeCPs.push(u)})}getSpecialAngle(e,n){let r=0;e.x-n.x!==0?(r=Math.atan((n.y-e.y)/(e.x-n.x))*180/Math.PI,e.x<n.x&&(r>0?r-=180:r+=180)):n.y>e.y?r=90:n.y<e.y&&(r=-90),r=Math.round(r/15)*15;let a=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));e.x=n.x+Math.cos(r/180*Math.PI)*a,e.y=n.y-Math.sin(r/180*Math.PI)*a}clearHover(){this.hoverType=at.None,this.store.hover=null,this.store.hoverAnchor=null}inAnchor(e,n,r){var a;if(this.store.hoverAnchor=void 0,this.movingAnchor=void 0,!r||r.locked>Ft.DisableEdit||!(n.type&&n.calculative.active)&&this.store.options.disableAnchor||n.disableAnchor)return at.None;if((this.mouseDown||this.drawingLine)&&n.name==="line"&&r.connectTo){const i=this.findOne(r.connectTo);if(i!=null&&i.calculative&&!(i!=null&&i.calculative.active)){n=i;const o=i.calculative.worldAnchors.find(s=>s.id===r.anchorId);o&&(r=o)}}if(r.twoWay===yr.Disable&&n.name!=="line")return at.None;if(n.name==="line"&&r.connectTo){let i=(a=this.findOne(r.connectTo))==null?void 0:a.anchors.find(o=>o.id===r.anchorId);if(i&&i.twoWay)return at.None}if(this.drawingLine){if(r.twoWay===yr.Out)return at.None}else if(!(this.mouseDown&&this.hoverType===at.LineAnchor)){if(r.twoWay===yr.In)return at.None}if(ou(e,r,this.pointSize,r.penId?this.store.pens[r.penId]:void 0))return r!==this.store.hoverAnchor&&(this.patchFlags=!0),this.store.hoverAnchor=r,this.store.hover=n,n.type?r.connectTo&&!n.calculative.active&&(this.store.hover=this.store.pens[r.connectTo],this.store.hover)?(this.store.hoverAnchor=this.store.hover.calculative.worldAnchors.find(i=>i.id===r.anchorId),this.store.hoverAnchor?(this.externalElements.style.cursor="crosshair",at.NodeAnchor):at.None):(this.hotkeyType===Qt.AddAnchor?this.externalElements.style.cursor="vertical-text":this.externalElements.style.cursor="pointer",at.LineAnchor):(this.hotkeyType===Qt.AddAnchor?this.externalElements.style.cursor="vertical-text":this.externalElements.style.cursor="crosshair",at.NodeAnchor);if(!this.mouseDown&&n.type){if(n.calculative.active&&r.prev&&ou(e,r.prev,this.pointSize))return this.store.hoverAnchor=r,this.store.hover=n,this.externalElements.style.cursor="pointer",at.LineAnchorPrev;if(n.calculative.active&&r.next&&ou(e,r.next,this.pointSize))return this.store.hoverAnchor=r,this.store.hover=n,this.externalElements.style.cursor="pointer",at.LineAnchorNext}return at.None}resize(e,n){e=e||this.parentElement.clientWidth,n=n||this.parentElement.clientHeight,this.width=e,this.height=n,this.canvasRect={x:0,y:0,width:e,height:n},bn(this.canvasRect),this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",this.externalElements.style.width=e+"px",this.externalElements.style.height=n+"px",this.canvasTemplate.resize(e,n),this.canvasImage.resize(e,n),this.canvasImageBottom.resize(e,n),this.magnifierCanvas.resize(e,n),e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.offscreen.width=e,this.offscreen.height=n,this.clientRect=this.externalElements.getBoundingClientRect(),this.canvas.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle";for(const r of this.store.data.pens)r.isRuleLine&&(r.width?r.height||(r.width=this.width):r.height=this.height),Do(r);this.render()}clearCanvas(){this.activeRect=void 0,this.sizeCPs=void 0,this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.offscreen.width,this.offscreen.height),this.store.data.template||this.canvasTemplate.clear(),this.canvasImage.clear(),this.canvasImageBottom.clear()}async addPen(e,n,r,a){if(!(this.beforeAddPens&&await this.beforeAddPens([e])!=!0)&&!(this.beforeAddPen&&this.beforeAddPen(e)!=!0))return a&&(e.x=e.x*this.store.data.scale+this.store.data.origin.x,e.y=e.y*this.store.data.scale+this.store.data.origin.y,e.width=e.width*this.store.data.scale,e.height=e.height*this.store.data.scale),this.makePen(e),this.active([e]),this.render(),r&&this.store.emitter.emit("add",[e]),n&&this.pushHistory({type:nt.Add,pens:[e]}),e}pushHistory(e){var a;if(this.store.data.locked)return;const{origin:n,scale:r}=this.store.data;e.origin=Te(n),e.scale=r,e.type!==nt.Update&&e.pens&&e.pens.forEach(i=>{i.calculative&&(i.calculative.layer=this.store.data.pens.findIndex(o=>o.id===i.id))}),this.store.historyIndex<this.store.histories.length-1&&this.store.histories.splice(this.store.historyIndex+1,this.store.histories.length-this.store.historyIndex-1),(a=e.pens)==null||a.forEach(i=>{let o;if(e.initPens)for(const s of e.initPens)s.id===i.id&&(o=s);if(o)for(const s in i)o[s]==null&&(o[s]=void 0)}),this.store.histories.push(e),this.store.historyIndex=this.store.histories.length-1,this.store.emitter.emit("update",{previous:e.initPens,current:e.pens})}undo(){if(this.store.data.locked||this.store.historyIndex==null||this.store.historyIndex<0)return;const e=this.store.histories[this.store.historyIndex--];this.doEditAction(e,!0);let n=e.step;for(;n>1;){const r=this.store.histories[this.store.historyIndex--];this.doEditAction(r,!0),n--}(e.type==nt.Add||e.type==nt.Delete||e.type==nt.Update)&&this.activeHistory()}redo(){if(this.store.data.locked||this.store.historyIndex==null||this.store.historyIndex>this.store.histories.length-2)return;const e=this.store.histories[++this.store.historyIndex];this.doEditAction(e,!1);let n=e.step;for(;n>1;){const r=this.store.histories[++this.store.historyIndex];this.doEditAction(r,!1),n--}(e.type==nt.Add||e.type==nt.Delete||e.type==nt.Update)&&this.activeHistory()}activeHistory(){let e=this.store.histories[this.store.historyIndex+1];const n=[];if(e&&e.type===nt.Update){e.pens.forEach(a=>{n.push(this.store.pens[a.id])}),this.active(n);return}let r=this.store.histories[this.store.historyIndex];r&&(r.type===nt.Add||r.type===nt.Delete)&&(r.pens.forEach(a=>{n.push(this.store.pens[a.id])}),this.active(n))}doEditAction(e,n){switch(this.inactive(),this.store.hoverAnchor=void 0,this.store.hover=void 0,e.type){case nt.Add:e.pens.forEach(i=>{var c;const o=Te(i,!0),s=this.store.data.pens.findIndex(u=>u.id===o.id);s>-1&&((c=o.onDestroy)==null||c.call(o,this.store.pens[o.id]),this.store.data.pens.splice(s,1),this.store.pens[o.id]=void 0,o.calculative||(o.calculative={}),o.calculative.canvas=this,this.store.animates.delete(o),this.store.animateMap.delete(o))}),e.type=nt.Delete;break;case nt.Update:const r=n?e.initPens:e.pens,a=n?e.pens:e.initPens;r.forEach(i=>{const o=Te(i,!0),s=this.store.data.pens.findIndex(c=>c.id===o.id);if(s>-1){if(o.calculative=this.store.data.pens[s].calculative,this.store.data.pens[s].type&&this.store.data.pens[s].lastConnected){for(let u in this.store.data.pens[s].lastConnected)if(this.store.pens[u]){let d=Te(this.store.data.pens[s].lastConnected[u]);this.store.pens[u].connectedLines=d,o.anchors.forEach(f=>{d.forEach(h=>{f.id===h.lineAnchor&&(f.connectTo=u)})})}}this.store.data.pens[s]=o,this.store.pens[o.id]=o;for(const u in o)(typeof o[u]!="object"||u==="lineDash")&&(o.calculative[u]=o[u]);o.calculative.image=void 0;const c=this.getPenRect(o,e.origin,e.scale);if(this.setPenRect(o,c,!1),this.updateLines(o,!0),o.calculative.canvas.parent.isCombine(o)){let u=a.find(d=>d.id===o.id);t4.forEach(d=>{o[d]!==u[d]&&this.parent.setValue({id:o.id,[d]:o[d]},{render:!0,doEvent:!1})})}}});break;case nt.Delete:e.pens.reverse().forEach(i=>{var s,c;const o=Te(i,!0);if(o.calculative||(o.calculative={}),this.store.data.pens.splice(((s=o.calculative)==null?void 0:s.layer)!==-1?(c=o.calculative)==null?void 0:c.layer:this.store.data.pens.length,0,o),this.store.pens[o.id]=o,o.type&&o.lastConnected)for(let u in o.lastConnected)this.store.pens[u]&&(this.store.pens[u].connectedLines=o.lastConnected[u]);o.calculative.canvas=this}),e.pens.reverse().forEach(i=>{const o=this.store.pens[i.id],s=this.getPenRect(o,e.origin,e.scale);this.setPenRect(o,s,!1),o.calculative.image=void 0,o.calculative.backgroundImage=void 0,o.calculative.strokeImage=void 0,this.loadImage(o)}),e.type=nt.Add;break;case nt.Replace:{const i=n?e.initPens:e.pens;(n?e.pens:e.initPens).forEach(s=>{var d;const c=Te(s,!0);if(this.store.data.pens.findIndex(f=>f.id===c.id)>-1){(d=c.onDestroy)==null||d.call(c,this.store.data.pens.find(h=>h.id===c.id));const f=this.store.data.pens.findIndex(h=>h.id===c.id);this.store.data.pens.splice(f,1),this.store.pens[c.id]=void 0,c.calculative||(c.calculative={}),c.calculative.canvas=this,this.store.animates.delete(c),this.store.animateMap.delete(c)}}),i.reverse().forEach(s=>{var u,d;const c=Te(s,!0);if(c.calculative||(c.calculative={}),this.store.data.pens.splice(((u=c.calculative)==null?void 0:u.layer)!==-1?(d=c.calculative)==null?void 0:d.layer:this.store.data.pens.length,0,c),this.store.pens[c.id]=c,c.type&&c.lastConnected)for(let f in c.lastConnected)this.store.pens[f]&&(this.store.pens[f].connectedLines=c.lastConnected[f]);c.calculative.canvas=this}),i.reverse().forEach(s=>{const c=this.store.data.pens.find(d=>d.id===s.id),u=this.getPenRect(c,e.origin,e.scale);this.setPenRect(c,u,!1),c.calculative.image=void 0,c.calculative.backgroundImage=void 0,c.calculative.strokeImage=void 0,this.loadImage(c)}),e.type=nt.Replace;break}}if(e.type===nt.Update){let r=[...e.pens,...e.initPens];this.initImageCanvas(r),this.initTemplateCanvas(r)}else this.initImageCanvas(e.pens),this.initTemplateCanvas(e.pens);this.parent.onSizeUpdate(),this.render(),this.store.emitter.emit(n?"undo":"redo",e)}makePen(e){var a;if(e.id||(e.id=it()),Math.abs(this.store.lastScale-this.store.data.scale)<1e-4&&this.store.sameTemplate&&this.store.templatePens[e.id]&&e.canvasLayer===Wt.CanvasTemplate){e=this.store.templatePens[e.id],this.store.data.pens.push(e),this.updatePenRect(e);return}if(this.store.data.pens.push(e),this.store.pens[e.id]=e,e.path){!e.pathId&&(e.pathId=it());const i=this.store.data.paths;!i[e.pathId]&&(i[e.pathId]=e.path),e.path=void 0}e.lineWidth==null&&(e.lineWidth=1);const{fontSize:n,lineHeight:r}=this.store.options;e.fontSize?e.fontSize<0&&(e.fontSize=0):e.fontSize=n>=0?n:12,e.lineHeight||(e.lineHeight=r),e.image&&e.name!=="gif"&&e.canvasLayer===void 0&&(e.isBottom?e.canvasLayer=Wt.CanvasImageBottom:e.canvasLayer=Wt.CanvasImage,delete e.isBottom),e.template&&(e.canvasLayer=Wt.CanvasTemplate),e.calculative={canvas:this,singleton:(a=e.calculative)==null?void 0:a.singleton},(e.video||e.audio)&&(e.calculative.onended=i=>{this.nextAnimate(i)});for(const i in e)(typeof e[i]!="object"||i==="lineDash")&&(e.calculative[i]=e[i]);if(e.calculative.image=void 0,e.calculative.backgroundImage=void 0,e.calculative.strokeImage=void 0,!e.anchors&&gt.anchors[e.name]&&(e.anchors||(e.anchors=[]),gt.anchors[e.name](e)),!e.anchors){const i=Te(this.store.options.defaultAnchors);i.forEach((o,s)=>{o.id=`${s}`,o.penId=e.id}),e.anchors=i}this.updatePenRect(e),!e.anchors&&e.calculative.worldAnchors&&(e.anchors=e.calculative.worldAnchors.map(i=>Of(i,e.calculative.worldRect))),!e.rotate&&(e.rotate=0),this.loadImage(e),this.parent.penNetwork(e)}drawline(e){var n;this.drawingLine&&((n=this[this.drawingLineName])==null||n.call(this,this.store,this.drawingLine,e),this.store.path2dMap.set(this.drawingLine,gt.path2dDraws.line(this.drawingLine)),this.patchFlags=!0)}initLineRect(e){var i;if(!e)return;if(!((i=e.calculative.worldAnchors)!=null&&i.length)){this._del([e]);return}if(!isFinite(e.x)||!isFinite(e.x)||e.x==null||e.y==null)return;const n=L1(e);e.parentId||Object.assign(e,n);const{fontSize:r,lineHeight:a}=this.store.options;e.fontSize||(e.fontSize=r>=0?r:12,e.calculative.fontSize=e.fontSize*this.store.data.scale),e.lineHeight||(e.lineHeight=a,e.calculative.lineHeight=e.lineHeight),cn(n),e.calculative.worldRect=n,S1(e,n),Bi(e),Do(e),e.calculative&&(e.calculative.gradientAnimatePath=void 0),this.store.path2dMap.set(e,gt.path2dDraws[e.name](e)),e.calculative.worldAnchors&&(e.anchors=e.calculative.worldAnchors.map(o=>Of(o,e.calculative.worldRect)))}drawingPencil(){i8(this.store),this.pencil=!0,this.externalElements.style.cursor="crosshair"}stopPencil(){this.pencil=!1,this.pencilLine=void 0,this.externalElements.style.cursor="default"}async finishDrawline(e){if(!this.drawingLine)return;const n=Sn(this.drawingLine);let r=Xt(this.drawingLine);if(r.isTemp&&(this.drawingLine.calculative.worldAnchors.pop(),r=Xt(this.drawingLine)),!e&&(!r.connectTo&&this.drawingLine.calculative.worldAnchors.pop(),Sn(this.drawingLine)===this.drawingLine.calculative.activeAnchor)){this.drawingLine=void 0,this.render();return}if(!n.connectTo||!r.connectTo){if(this.store.options.disableEmptyLine){n.connectTo&&(this.store.pens[n.connectTo].connectedLines=this.store.pens[n.connectTo].connectedLines.filter(o=>o.lineId!==this.drawingLine.id)),this.drawingLine=void 0,this.render();return}}else if(this.store.options.disableRepeatLine&&this.store.data.pens.find(s=>{if(s.type){const c=Sn(s),u=Xt(s);return n4(c,n)&&n4(u,r)}})){this.drawingLine=void 0,this.render();return}const a=L1(this.drawingLine);Object.assign(this.drawingLine,a),this.drawingLine.calculative.worldRect=a,this.drawingLine.calculative.activeAnchor=Xt(this.drawingLine),this.store.activeAnchor=this.drawingLine.calculative.activeAnchor,(!this.beforeAddPens||await this.beforeAddPens([this.drawingLine]))&&(!this.beforeAddPen||this.beforeAddPen(this.drawingLine))&&(this.initLineRect(this.drawingLine),this.store.data.pens.push(this.drawingLine),this.store.pens[this.drawingLine.id]=this.drawingLine,this.store.emitter.emit("add",[this.drawingLine]),this.active([this.drawingLine]),this.pushHistory({type:nt.Add,pens:Te([this.drawingLine],!0)})),this.store.path2dMap.set(this.drawingLine,gt.path2dDraws[this.drawingLine.name](this.drawingLine)),this.drawingLine=void 0,this.drawingLineName=void 0,this.render()}async finishPencil(){if(this.pencilLine){const e=j1(this.pencilLine.calculative.worldAnchors,10,0,this.pencilLine.calculative.worldAnchors.length-1);let n=Sn(this.pencilLine);e.unshift({id:n.id,penId:n.penId,x:n.x,y:n.y}),n=Xt(this.pencilLine),e.push({id:n.id,penId:n.penId,x:n.x,y:n.y}),this.pencilLine.calculative.worldAnchors=l_e(e),this.pencilLine.calculative.worldAnchors.length>1&&(this.pencilLine.calculative.pencil=!1,this.store.path2dMap.set(this.pencilLine,gt.path2dDraws[this.pencilLine.name](this.pencilLine)),(!this.beforeAddPens||await this.beforeAddPens([this.pencilLine]))&&(!this.beforeAddPen||this.beforeAddPen(this.pencilLine))&&(this.initLineRect(this.pencilLine),this.store.data.pens.push(this.pencilLine),this.store.pens[this.pencilLine.id]=this.pencilLine,this.store.emitter.emit("add",[this.pencilLine]),this.active([this.pencilLine]),this.pushHistory({type:nt.Add,pens:Te([this.pencilLine],!0)}))),this.pencilLine=void 0,this.render()}}firefoxLoadSvg(e){const n=new Image,r=new XMLHttpRequest;r.open("GET",e.image,!0),r.onload=()=>{const o=new DOMParser().parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0],{width:s,height:c}=e.calculative.worldRect;o.setAttribute("width",`${s}px`),o.setAttribute("height",`${c}px`);const d="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(new XMLSerializer().serializeToString(o))));n.src=d,n.onload=()=>{e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,gt.htmlElements[e.image]=n,this.imageLoaded(),e.canvasLayer===Wt.CanvasTemplate&&this.templateImageLoaded()}},r.send()}loadImage(e){if(e.image!==e.calculative.image||!e.calculative.img){if(e.calculative.img=void 0,e.image)if(gt.htmlElements[e.image]){const n=gt.htmlElements[e.image];e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,this.imageLoaded(),e.canvasLayer===Wt.CanvasTemplate&&this.templateImageLoaded()}else if(navigator.userAgent.includes("Firefox")&&e.image.endsWith(".svg"))this.firefoxLoadSvg(e);else{const n=new Image;n.crossOrigin=e.crossOrigin==="undefined"?void 0:e.crossOrigin||"anonymous",n.src=e.image,this.store.options.cdn&&!(e.image.startsWith("http")||e.image.startsWith("//")||e.image.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.image),n.onload=()=>{e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,gt.htmlElements[e.image]=n,this.imageLoaded(),e.canvasLayer===Wt.CanvasTemplate&&this.templateImageLoaded()}}e.calculative.image=e.image}if(e.backgroundImage!==e.calculative.backgroundImage){if(e.calculative.backgroundImg=void 0,e.backgroundImage)if(gt.htmlElements[e.backgroundImage]){const n=gt.htmlElements[e.backgroundImage];e.calculative.backgroundImg=n}else{const n=new Image;n.crossOrigin="anonymous",n.src=e.backgroundImage,this.store.options.cdn&&!(e.backgroundImage.startsWith("http")||e.backgroundImage.startsWith("//")||e.backgroundImage.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.backgroundImage),n.onload=()=>{e.calculative.backgroundImg=n,gt.htmlElements[e.backgroundImage]=n,this.imageLoaded(),e.canvasLayer===Wt.CanvasTemplate&&this.templateImageLoaded()}}e.calculative.backgroundImage=e.backgroundImage}if(e.strokeImage!==e.calculative.strokeImage){if(e.calculative.strokeImg=void 0,e.strokeImage)if(gt.htmlElements[e.strokeImage]){const n=gt.htmlElements[e.strokeImage];e.calculative.strokeImg=n}else{const n=new Image;n.crossOrigin="anonymous",n.src=e.strokeImage,this.store.options.cdn&&!(e.strokeImage.startsWith("http")||e.strokeImage.startsWith("//")||e.strokeImage.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.strokeImage),n.onload=()=>{e.calculative.strokeImg=n,gt.htmlElements[e.strokeImage]=n,this.imageLoaded(),e.canvasLayer===Wt.CanvasTemplate&&e.name!=="gif"&&this.templateImageLoaded()}}e.calculative.strokeImage=e.strokeImage}}imageLoaded(){this.imageTimer&&clearTimeout(this.imageTimer),this.imageTimer=setTimeout(()=>{this.canvasImage.init(),this.canvasImageBottom.init(),this.render()},100)}templateImageLoaded(){this.templateImageTimer&&clearTimeout(this.templateImageTimer),this.templateImageTimer=setTimeout(()=>{this.canvasTemplate.init(),this.render()},100)}setCalculativeByScale(e){const n=this.store.data.scale;e.calculative.lineWidth=e.lineWidth*n,e.calculative.fontSize=e.fontSize*n,e.fontSize<1&&e.fontSize>0&&(e.calculative.fontSize=e.fontSize*e.calculative.worldRect.height),e.calculative.iconSize=e.iconSize*n,e.calculative.iconWidth=e.iconWidth*n,e.calculative.iconHeight=e.iconHeight*n,e.calculative.iconLeft=e.iconLeft<1&&e.iconLeft>-1?e.iconLeft:e.iconLeft*n,e.calculative.iconTop=e.iconTop<1&&e.iconTop>-1?e.iconTop:e.iconTop*n,e.calculative.textWidth=e.textWidth<1&&e.textWidth>-1?e.textWidth:e.textWidth*n,e.calculative.textHeight=e.textHeight<1&&e.textHeight>-1?e.textHeight:e.textHeight*n,e.calculative.textLeft=e.textLeft<1&&e.textLeft>-1?e.textLeft*e.calculative.worldRect.width:e.textLeft*n,e.calculative.textTop=e.textTop<1&&e.textTop>-1?e.textTop*e.calculative.worldRect.height:e.textTop*n,e.type===Gt.Line&&e.borderWidth&&(e.calculative.borderWidth=e.borderWidth*n)}updatePenRect(e,{worldRectIsReady:n,playingAnimate:r}={}){n?ug(e):C4(e),r||this.setCalculativeByScale(e),du(e),S4(this.store.pens,e),Bi(e),Do(e),gt.path2dDraws[e.name]&&this.store.path2dMap.set(e,gt.path2dDraws[e.name](e)),e.calculative.patchFlags=!0,this.patchFlags=!0,e.children&&e.children.forEach(a=>{const i=this.store.pens[a];i&&this.updatePenRect(i,{worldRectIsReady:!1})}),e.type&&this.initLineRect(e),e.calculative.gradientTimer&&clearTimeout(e.calculative.gradientTimer),e.calculative.gradientTimer=setTimeout(()=>{e.calculative.lineGradient&&(e.calculative.lineGradient=null),e.calculative.gradient&&(e.calculative.gradient=null),e.calculative.radialGradient&&(e.calculative.radialGradient=null),this.patchFlags=!0,e.calculative.gradientTimer=void 0},50)}translate(e=0,n=0){if(this.store.data.x+=e*this.store.data.scale,this.store.data.y+=n*this.store.data.scale,this.store.data.x=Math.round(this.store.data.x),this.store.data.y=Math.round(this.store.data.y),this.store.options.padding){let r=Io(this.store.options.padding);const a=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;this.width<(a+r[1]+r[3])*this.store.data.scale&&(this.store.data.x+this.store.data.origin.x>r[3]*this.store.data.scale&&(this.store.data.x=r[3]*this.store.data.scale-this.store.data.origin.x),this.store.data.x+this.store.data.origin.x+a*this.store.data.scale<this.width-r[1]*this.store.data.scale&&(this.store.data.x=this.width-r[1]*this.store.data.scale-(this.store.data.origin.x+a*this.store.data.scale))),this.height<(i+r[0]+r[2])*this.store.data.scale&&(this.store.data.y+this.store.data.origin.y>r[0]*this.store.data.scale&&(this.store.data.y=r[0]*this.store.data.scale-this.store.data.origin.y),this.store.data.y+this.store.data.origin.y+i*this.store.data.scale<this.height-r[2]*this.store.data.scale&&(this.store.data.y=this.height-r[2]*this.store.data.scale-(this.store.data.origin.y+i*this.store.data.scale)))}this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init(),this.render(),this.store.emitter.emit("translate",{x:this.store.data.x,y:this.store.data.y}),this.tooltip.translate(e,n),this.scroll&&this.scroll.isShow&&this.scroll.translate(e,n),this.onMovePens()}onMovePens(){var n;const e=this.parent.map;e&&e.isShow&&e.setView();for(const r of this.store.data.pens)Do(r),(n=r.onMove)==null||n.call(r,r),r.isRuleLine&&(r.width?r.height||(r.x=-this.store.data.x):r.y=-this.store.data.y,this.updatePenRect(r))}scale(e,n={x:0,y:0}){var s;const r=this.store.data.minScale||this.store.options.minScale,a=this.store.data.maxScale||this.store.options.maxScale;if(!(e>=r&&e<=a))return;this.calibrateMouse(n);const i=e/this.store.data.scale;this.store.data.scale=e,this.store.data.center=n,(s=this.store.clipboard)!=null&&s.pos&&ng(this.store.clipboard.pos,i,n),ng(this.store.data.origin,i,n),this.store.data.pens.forEach(c=>{if(!c.parentId){if(fu(c,i,n),c.onScale&&c.onScale(c),c.isRuleLine){const u=1/i,d=c.calculative.worldRect.center;c.width&&c.height||fu(c,u,d)}this.updatePenRect(c,{worldRectIsReady:!0}),this.execPenResize(c)}}),this.onMovePens(),this.calcActiveRect(),this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init();const o=this.parent.map;o&&o.isShow&&o.setView(),this.render(),this.store.emitter.emit("scale",this.store.data.scale)}templateScale(e,n={x:0,y:0}){const{minScale:r,maxScale:a}=this.store.options;if(!(e>=r&&e<=a))return;const i=e/this.store.data.scale;this.store.data.scale=e,this.store.data.center={x:0,y:0},this.store.data.origin={x:0,y:0},this.store.data.pens.forEach(o=>{if(!o.parentId){if(fu(o,i,n),o.onScale&&o.onScale(o),o.isRuleLine){const s=i>1?1:1/i/i,c=o.calculative.worldRect.center;o.width&&o.height||fu(o,s,c)}this.execPenResize(o)}}),this.calcActiveRect()}rotatePens(e){this.initPens||(this.initPens=Te(this.getAllByPens(this.store.active))),this.activeRect.rotate=Ba(e,this.activeRect.center),this.activeRect.rotate%90<10&&(this.activeRect.rotate-=this.activeRect.rotate%90),this.activeRect.rotate%90>80&&(this.activeRect.rotate+=90-this.activeRect.rotate%90),this.store.active.length===1&&(this.lastRotate=this.store.active[0].rotate||0);const n=this.activeRect.rotate-this.lastRotate;for(const r of this.store.active){if(r.parentId)return;this.rotatePen(r,n,this.activeRect),r.onRotate&&r.onRotate(r),this.updateLines(r)}this.lastRotate=this.activeRect.rotate,this.getSizeCPs(),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),this.render(),this.store.emitter.emit("rotatePens",this.store.active),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:nt.Update,pens:Te(this.getAllByPens(this.store.active)),initPens:this.initPens}),this.initPens=void 0},200)}resizePens(e){if(this.initPens||(this.initPens=Te(this.store.active,!0)),!this.initActiveRect){this.initActiveRect=Te(this.activeRect);return}const n={x:this.mouseDown.x,y:this.mouseDown.y},r={x:e.x,y:e.y};let a=r.x-n.x,i=r.y-n.y;const o=Te(this.initActiveRect);if(B4(o,a,i,this.resizeIndex),cn(o),!this.store.options.disableDock){this.clearDock();const v=this.customResizeDock||uCe;this.dock=v(this.store,o,this.store.active,this.resizeIndex);const{xDock:p,yDock:g}=this.dock;if(p){a+=p.step;const m=this.store.pens[p.penId];m.calculative.isDock=!0}if(g){i+=g.step;const m=this.store.pens[g.penId];m.calculative.isDock=!0}}const s=this.activeRect.width,c=this.activeRect.height;let u=a-this.lastOffsetX,d=i-this.lastOffsetY;if(this.lastOffsetX=a,this.lastOffsetY=i,(e.ctrlKey||this.initPens.length===1&&this.initPens[0].ratio)&&(d=([1,3].includes(this.resizeIndex)?-1:1)*(u*c)/s),this.activeRect.ratio=this.initPens[0].ratio,B4(this.activeRect,u,d,this.resizeIndex),this.store.options.strictScope){const v=this.store.data.width||this.store.options.width,p=this.store.data.height||this.store.options.height;if(v&&p){let g={x:this.store.data.origin.x,y:this.store.data.origin.y,width:v*this.store.data.scale,height:p*this.store.data.scale};this.activeRect.x<g.x&&(this.activeRect.width=this.activeRect.width-(g.x-this.activeRect.x),this.activeRect.x=g.x),this.activeRect.y<g.y&&(this.activeRect.height=this.activeRect.height-(g.y-this.activeRect.y),this.activeRect.y=g.y),this.activeRect.x+this.activeRect.width>g.x+g.width&&(this.activeRect.width=this.activeRect.width-(this.activeRect.x+this.activeRect.width-(g.x+g.width)),this.activeRect.x=g.x+g.width-this.activeRect.width,this.activeRect.ex=this.activeRect.x+this.activeRect.width),this.activeRect.y+this.activeRect.height>g.y+g.height&&(this.activeRect.height=this.activeRect.height-(this.activeRect.y+this.activeRect.height-(g.y+g.height)),this.activeRect.y=g.y+g.height-this.activeRect.height,this.activeRect.ey=this.activeRect.y+this.activeRect.height)}}cn(this.activeRect);const f=this.activeRect.width/s,h=this.activeRect.height/c;this.store.active.forEach((v,p)=>{v.calculative.worldRect.x=this.activeInitPos[p].x*this.activeRect.width+this.activeRect.x,v.calculative.worldRect.y=this.activeInitPos[p].y*this.activeRect.height+this.activeRect.y,v.calculative.worldRect.width*=f,v.calculative.iconWidth&&(v.calculative.iconWidth*=f),v.calculative.worldRect.height*=h,v.calculative.iconHeight&&(v.calculative.iconHeight*=h),bn(v.calculative.worldRect),cn(v.calculative.worldRect),this.updatePenRect(v,{worldRectIsReady:!0}),this.execPenResize(v),this.updateLines(v)}),this.getSizeCPs(),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),this.render(),this.store.emitter.emit("resizePens",this.store.active),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:nt.Update,pens:Te(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}movePens(e){var s,c;if(!this.activeRect||this.store.data.locked)return;if(!this.initActiveRect){this.initActiveRect=Te(this.activeRect);return}if(!this.store.options.moveConnectedLine&&!this.canMoveLine&&this.store.active.length===1&&((s=this.store.active[0].anchors[0])!=null&&s.connectTo||(c=this.store.active[0].anchors[this.store.active[0].anchors.length-1])!=null&&c.connectTo)||(this.movingPens||(this.initMovingPens(),this.store.active.forEach(u=>{Tf(u,!1)}),this.store.hover=void 0),!this.mouseDown))return;let n=e.x-this.mouseDown.x,r=e.y-this.mouseDown.y;e.shiftKey&&!e.ctrlKey&&(r=0),e.ctrlKey&&(n=0);const a=Te(this.initActiveRect);xs(a,n,r);let i=!1;if(this.store.options.strictScope){const u=this.store.data.width||this.store.options.width,d=this.store.data.height||this.store.options.height;if(u&&d){let f={x:this.store.data.origin.x,y:this.store.data.origin.y,width:u*this.store.data.scale,height:d*this.store.data.scale};a.x<f.x&&(a.x=f.x,i=!0),a.y<f.y&&(a.y=f.y,i=!0),a.x+a.width>f.x+f.width&&(a.x=f.x+f.width-a.width,i=!0),a.y+a.height>f.y+f.height&&(a.y=f.y+f.height-a.height,i=!0)}}const o={x:a.x-this.activeRect.x,y:a.y-this.activeRect.y};if(!this.store.options.disableDock&&!i){this.clearDock();const u=this.customMoveDock||cCe;this.dock=u(this.store,a,this.movingPens,o);const{xDock:d,yDock:f}=this.dock;let h;d&&(o.x+=d.step,h=this.store.pens[d.penId],h.calculative.isDock=!0),f&&(o.y+=f.step,h=this.store.pens[f.penId],h.calculative.isDock=!0)}this.translatePens(this.movingPens,o.x,o.y,!0)}changeIdsByMoving(e,n){e.id+=Qr,e.parentId&&n.find(r=>r.id===e.parentId)&&(e.parentId+=Qr),e.children&&(e.children=e.children.map(r=>r+Qr)),e.connectedLines&&(e.connectedLines=e.connectedLines.map(r=>(n.find(a=>a.id===r.lineId)&&(r.lineId+=Qr),r))),e.type&&e.calculative.worldAnchors&&(e.calculative.worldAnchors=e.calculative.worldAnchors.map(r=>(r.connectTo&&n.find(a=>a.id===r.connectTo)&&(r.connectTo+=Qr),r)))}initMovingPens(){var r,a;if(!this.store.options.moveConnectedLine&&!this.canMoveLine)for(let i=0;i<this.store.active.length;i++){const o=this.store.active[i];((r=o.anchors[0])!=null&&r.connectTo||(a=o.anchors[o.anchors.length-1])!=null&&a.connectTo)&&(this.store.active.splice(i,1),o.calculative.active=void 0,--i)}this.movingPens=Te(this.store.active,!0),this.movingPens=this.getAllFollowersByPens(this.movingPens);const e=this.getAllByPens(this.movingPens),n=Te(e,!0);e.forEach(i=>{this.changeIdsByMoving(i,n),this.store.pens[i.id]=i,i.calculative.canvas=this;const o={globalAlpha:.5};i.lineWidth===0&&(o.lineWidth=1),(i.name.endsWith("Dom")||pxe.includes(i.name)||this.store.options.domShapes.includes(i.name)||i.image)&&(o.name="rectangle",o.onDestroy=void 0),this.updateValue(i,o),i.calculative.image=void 0})}moveLineAnchor(e,n){var s,c,u,d,f;if(!this.activeRect||this.store.data.locked)return;if(this.initPens||(this.initPens=Te(this.store.active,!0)),(s=this.store.activeAnchor)!=null&&s.connectTo){const h=this.store.pens[this.store.activeAnchor.connectTo];pu(h,ys(h,this.store.activeAnchor.anchorId),this.store.pens[this.store.activeAnchor.penId],this.store.activeAnchor)}let r=(c=this.store.activeAnchor)==null?void 0:c.id,a=(d=(u=this.store.pens[this.store.activeAnchor.penId])==null?void 0:u.connectedLines)==null?void 0:d.filter(h=>h.anchor===r);a&&a.length>0&&a.forEach(h=>{const v=this.store.pens[h.lineId];pu(this.store.pens[this.store.activeAnchor.penId],this.store.activeAnchor,v,ys(v,h.lineAnchor))});const i=this.store.active[0];Sn(i);const o=Xt(i);if(i.lineName==="polyline"&&!n.shiftKey)o_e(i,this.store.activeAnchor,e);else{let h=0,v=0;if(i.lineName==="line"){let p=i.calculative.worldAnchors.findIndex(m=>m.id===this.store.activeAnchor.id);p===0&&(p=2);let g=i.calculative.worldAnchors[p-1];if(n.ctrlKey&&n.shiftKey){let m=Te(e);this.getSpecialAngle(m,g),h=m.x-this.store.activeAnchor.x,v=m.y-this.store.activeAnchor.y}else if(!n.ctrlKey&&n.shiftKey){let m={x:e.x,y:g.y};h=m.x-this.store.activeAnchor.x,v=m.y-this.store.activeAnchor.y}else if(n.ctrlKey&&!n.shiftKey){let m={x:g.x,y:e.y};h=m.x-this.store.activeAnchor.x,v=m.y-this.store.activeAnchor.y}else h=e.x-this.store.activeAnchor.x,v=e.y-this.store.activeAnchor.y}else!n.ctrlKey&&n.shiftKey?(h=e.x-this.store.activeAnchor.x,v=0):n.ctrlKey&&!n.shiftKey?(h=0,v=e.y-this.store.activeAnchor.y):(h=e.x-this.store.activeAnchor.x,v=e.y-this.store.activeAnchor.y);wf(this.store.activeAnchor,h,v),this.store.hover&&this.store.hoverAnchor&&this.store.hoverAnchor.penId!==this.store.activeAnchor.penId&&(this.store.hoverAnchor.type===vs.Line?(h=e.x-this.store.activeAnchor.x,v=e.y-this.store.activeAnchor.y,ag(this.store.activeAnchor,this.store.hoverAnchor,this.store)):(h=this.store.hoverAnchor.x-this.store.activeAnchor.x,v=this.store.hoverAnchor.y-this.store.activeAnchor.y),wf(this.store.activeAnchor,h,v),o.prev=void 0,i.lineName!=="polyline"&&((f=this[i.lineName])==null||f.call(this,this.store,i)))}this.patchFlagsLines.add(i),this.store.path2dMap.set(i,gt.path2dDraws[i.name](i)),this.render(),this.store.active[0].calculative&&(this.store.active[0].calculative.gradientAnimatePath=void 0),this.store.emitter.emit("moveLineAnchor",{pen:this.store.active[0],anchor:this.store.activeAnchor}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:nt.Update,pens:Te(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},500)}moveLineAnchorPrev(e){if(!this.activeRect||this.store.data.locked||!this.store.activeAnchor)return;if(this.initPens||(this.initPens=Te(this.store.active,!0)),this.store.activeAnchor.prev.x=e.x,this.store.activeAnchor.prev.y=e.y,this.store.activeAnchor.next){if(!this.store.activeAnchor.prevNextType)this.store.activeAnchor.next.x=e.x,this.store.activeAnchor.next.y=e.y,nn(this.store.activeAnchor.next,180,this.store.activeAnchor);else if(this.store.activeAnchor.prevNextType===iu.Bilateral&&this.prevAnchor){const r=Ba(e,this.store.activeAnchor),a=Ba(this.prevAnchor,this.store.activeAnchor);this.store.activeAnchor.next.x=this.nextAnchor.x,this.store.activeAnchor.next.y=this.nextAnchor.y,nn(this.store.activeAnchor.next,r-a,this.store.activeAnchor)}}const n=this.store.active[0];this.patchFlagsLines.add(n),this.store.path2dMap.set(n,gt.path2dDraws[n.name](n)),this.render(),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:nt.Update,pens:Te(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}moveLineAnchorNext(e){if(!this.activeRect||this.store.data.locked||!this.store.activeAnchor)return;if(this.initPens||(this.initPens=Te(this.store.active,!0)),this.store.activeAnchor.next.x=e.x,this.store.activeAnchor.next.y=e.y,this.store.activeAnchor.prev){if(!this.store.activeAnchor.prevNextType)this.store.activeAnchor.prev.x=e.x,this.store.activeAnchor.prev.y=e.y,nn(this.store.activeAnchor.prev,180,this.store.activeAnchor);else if(this.store.activeAnchor.prevNextType===iu.Bilateral&&this.nextAnchor){const r=Ba(e,this.store.activeAnchor),a=Ba(this.nextAnchor,this.store.activeAnchor);this.store.activeAnchor.prev.x=this.prevAnchor.x,this.store.activeAnchor.prev.y=this.prevAnchor.y,nn(this.store.activeAnchor.prev,r-a,this.store.activeAnchor)}}const n=this.store.active[0];this.patchFlagsLines.add(n),this.store.path2dMap.set(n,gt.path2dDraws[n.name](n)),this.render(),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:nt.Update,pens:Te(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}async setAnchor(e){var a;const n=[Te(this.store.hover,!0)],r=this.store.hover;if(this.store.hoverAnchor){if(this.beforeRemoveAnchor&&!await this.beforeRemoveAnchor(r,this.store.hoverAnchor))return;r.type===Gt.Line&&((a=r.calculative.worldAnchors)==null?void 0:a.length)<=2?this.delete([r]):(Vxe(r,this.store.hoverAnchor),r.type===Gt.Line&&this.initLineRect(r)),this.store.hoverAnchor=void 0,this.store.activeAnchor=void 0,this.externalElements.style.cursor="default"}else if(r){if(this.beforeAddAnchor&&!await this.beforeAddAnchor(r,this.store.pointAt))return;if(r.type===Gt.Line){this.store.activeAnchor=Zxe(r,this.store.pointAt,this.store.pointAtIndex),this.initLineRect(r);const i={x:e.x,y:e.y};this.getHover(i)}else{const i={id:it(),x:e.x,y:e.y};this.store.activeAnchor=Qxe(r,i)}}this.hotkeyType=Qt.None,this.render(),r&&this.pushHistory({type:nt.Update,pens:[Te(r,!0)],initPens:n})}checkDisconnect(e,n){if(e.id.indexOf(Qr)>0){const r=e.id;e=this.store.pens[r.replace(Qr,"")]}e.anchors.forEach(r=>{if(r.connectTo&&!n.find(a=>a.id===r.connectTo||a.id===r.connectTo+Qr)){const a=this.store.pens[r.connectTo];if(!a||a.type)return;pu(a,ys(a,r.anchorId),e,r)}})}translatePens(e=this.store.active,n,r,a){if(!e||!e.length||e.some(c=>{if(c.locked>=Ft.DisableMove)return!0}))return;const o=!a&&Te(e,!0);this.activeRect&&xs(this.activeRect,n,r);const s=this.getAllByPens(e);e.forEach(c=>{var u,d;if(!(c.locked>=Ft.DisableMove)){if(c.type===Gt.Line){if(!this.store.options.moveConnectedLine&&!this.canMoveLine||c.isRuleLine)return;k4(c,n,r),this.checkDisconnect(c,s),this.store.path2dMap.set(c,gt.path2dDraws[c.name](c)),a||(this.initLineRect(c),(u=c.connectedLines)==null||u.forEach(f=>{const h=this.store.pens[f.lineId];this.initLineRect(h)}))}else xs(c.calculative.worldRect,n,r),this.updatePenRect(c,{worldRectIsReady:!0}),c.calculative.x=c.x,c.calculative.y=c.y,c.calculative.initRect&&(c.calculative.initRect.x=c.calculative.x,c.calculative.initRect.y=c.calculative.y,c.calculative.initRect.ex=c.calculative.x+c.calculative.width,c.calculative.initRect.ey=c.calculative.y+c.calculative.height);this.updateLines(c),(d=c.onMove)==null||d.call(c,c)}}),this.activeRect&&this.getSizeCPs(),this.render(),this.tooltip.translate(n,r),a||(this.pushHistory({type:nt.Update,pens:Te(e,!0),initPens:o}),this.initImageCanvas(e),this.initTemplateCanvas(e),this.store.emitter.emit("translatePens",e)),this.store.emitter.emit("translatingPens",e)}templateTranslatePens(e=this.store.active,n,r){if(!e||!e.length)return;const a=this.getAllByPens(e);e.forEach(i=>{var o;if(i.type===Gt.Line){if(!this.store.options.moveConnectedLine&&!this.canMoveLine)return;k4(i,n,r),this.checkDisconnect(i,a),this.store.path2dMap.set(i,gt.path2dDraws[i.name](i))}else xs(i.calculative.worldRect,n,r),this.updatePenRect(i,{worldRectIsReady:!0}),i.calculative.x=i.x,i.calculative.y=i.y,i.calculative.initRect&&(i.calculative.initRect.x=i.calculative.x,i.calculative.initRect.y=i.calculative.y,i.calculative.initRect.ex=i.calculative.x+i.calculative.width,i.calculative.initRect.ey=i.calculative.y+i.calculative.height);(o=i.onMove)==null||o.call(i,i)})}calcAutoAnchor(e,n,r,a){const i=Sn(e),o=Xt(e),s=vu(r,n===i?o:i);s&&(n.x=s.x,n.y=s.y,n.prev=void 0,n.next=void 0,a?a.anchor=s.id:Zn(r,s,e,n),this[e.lineName]&&this[e.lineName](this.store,e),this.store.path2dMap.set(e,gt.path2dDraws.line(e)),this.initLineRect(e))}restoreNodeAnimate(e){var n,r;if(e.calculative.initRect){if(e.keepAnimateState)for(const a in e)e.calculative[a]!==void 0&&a!=="x"&&a!=="y"&&a!=="width"&&a!=="height"&&a!=="initRect"&&(typeof e[a]!="object"||a==="lineDash")&&(a==="fontSize"||a==="lineWidth"?e[a]=e.calculative[a]/e.calculative.canvas.store.data.scale:e[a]=e.calculative[a]);else{const a=e.calculative.initRect.rotate-e.calculative.rotate;for(const o in e)o!=="x"&&o!=="y"&&o!=="width"&&o!=="height"&&o!=="initRect"&&o!=="rotate"&&(typeof e[o]!="object"||o==="lineDash")&&(e.calculative[o]=e[o]);(n=e.children)!=null&&n.length?a&&I4(e,a,e.calculative.worldRect):e.calculative.rotate=e.rotate;const i=Te(this.store.animateMap.get(e));i&&(i.id=e.id,this.parent.setValue(i,{doEvent:!1,render:!0,history:!1})),e.calculative.worldRect=e.calculative.initRect}this.updatePenRect(e,{worldRectIsReady:!0}),this.updateLines(e),e.image&&e.name!=="gif"&&(this.canvasImage.init(),this.canvasImageBottom.init()),e.calculative.text!==e.text&&(e.calculative.text=e.text,_f(e)),(r=this.store.active)!=null&&r.length&&this.calcActiveRect(),e.calculative.initRect=void 0}}updateLines(e,n){var r;(r=e.children)==null||r.forEach(a=>{const i=this.store.pens[a];i&&this.updateLines(i,n)}),e.connectedLines&&e.connectedLines.forEach((a,i)=>{const o=this.store.pens[a.lineId];if(!o||o.calculative.active)return;const s=ys(o,a.lineAnchor);if(!s)return;if(!s.connectTo){e.connectedLines.splice(i,1);return}if(o.autoFrom){const h=Sn(o);h.id===s.id&&this.calcAutoAnchor(o,h,e,a)}if(o.autoTo){const h=Xt(o);h.id===s.id&&this.calcAutoAnchor(o,h,e,a)}const c=ys(e,a.anchor);if(!c)return;let u=e.rotate;e.flipX&&(u*=-1),e.flipY&&(u*=-1);let d=s.distance*this.store.data.scale*Math.cos((u+c.rotate)/180*Math.PI)||0,f=s.distance*this.store.data.scale*Math.sin((u+c.rotate)/180*Math.PI)||0;if(e.flipX&&(d=-d),e.flipY&&(f=-f),wf(s,c.x-s.x+d,c.y-s.y+f),this.store.options.autoPolyline&&!this.autoPolylineFlag&&o.autoPolyline!==!1&&o.lineName==="polyline"){let h=Sn(o),v=Xt(o),p=!1;h.id===s.id?(h=s,p=!0):v.id===s.id&&(v=s,p=!0),p&&(o.calculative.worldAnchors=[h,v],o.calculative.activeAnchor=h,this.polyline(this.store,o,v),this.initLineRect(o))}this.store.path2dMap.set(o,gt.path2dDraws[o.name](o)),this.patchFlagsLines.add(o),o.calculative.gradientSmooth&&(o.calculative.gradientAnimatePath=_1(o)),n&&F1(o)})}calcActiveRect(){const e=this.store.active.filter(n=>(!n.locked||n.locked<Ft.DisableMove)&&n.visible!=!1);if(e.length)e.length===1?(this.activeRect=Te(e[0].calculative.worldRect),this.activeRect.rotate=e[0].calculative.rotate||0,cn(this.activeRect)):(this.activeRect=hi(e),this.activeRect.rotate=0);else return;this.lastRotate=0,this.getSizeCPs()}rotatePen(e,n,r){e.type?(e.calculative.worldAnchors.forEach(a=>{nn(a,n,r.center)}),this.initLineRect(e),ug(e)):(e.calculative.rotate?e.calculative.rotate+=n:e.calculative.rotate=n,nn(e.calculative.worldRect.center,n,r.center),e.parentId?(e.calculative.worldRect.x=e.calculative.worldRect.center.x-e.calculative.worldRect.width/2,e.calculative.worldRect.y=e.calculative.worldRect.center.y-e.calculative.worldRect.height/2,e.x=(e.calculative.worldRect.x-r.x)/r.width,e.y=(e.calculative.worldRect.y-r.y)/r.height):(e.x=e.calculative.worldRect.center.x-e.width/2,e.y=e.calculative.worldRect.center.y-e.height/2),e.rotate=e.calculative.rotate,this.updatePenRect(e),e.children&&e.children.forEach(a=>{const i=this.store.pens[a];this.rotatePen(i,n,e.calculative.worldRect)}))}nextAnimate(e){if(!e)return;this.store.emitter.emit("animateEnd",e);let n;e.nextAnimate&&(n=this.store.data.pens.filter(r=>r.id===e.nextAnimate||r.tags&&r.tags.indexOf(e.nextAnimate)>-1)),n&&(n.forEach(r=>{var a,i,o,s,c;if(r.calculative.pause){const u=Date.now()-r.calculative.pause;r.calculative.pause=void 0,r.calculative.frameStart+=u,r.calculative.frameEnd+=u}else if(r.name==="video")r.calculative.media.currentTime=0,(a=r.calculative.media)==null||a.play(),(i=r.onStartVideo)==null||i.call(r,r);else if(r.type||(o=r.frames)!=null&&o.length||r.animations&&r.animations.length){if(r.type){if((c=r.animations)!=null&&c.length){const u=Te(r.animations[0]);delete u.name,u.currentAnimation=0,this.parent.setValue({id:r.id,...u},{doEvent:!1,history:!1})}}else{if(!r.frames&&r.animations&&r.animations.length){let u=(s=r.animations)==null?void 0:s.findIndex(h=>h.autoPlay),d=u===-1?0:u;const f=Te(r.animations[d]);delete f.name,f.currentAnimation=d,!r.type&&f.frames&&(f.showDuration=this.parent.calcAnimateDuration(f)),this.parent.setValue({id:r.id,...f},{doEvent:!1,history:!1})}this.store.animateMap.set(r,this.getFrameProps(r))}this.store.animates.add(r)}}),this.animate())}getFrameProps(e){let n={};return e.frames&&e.frames.forEach(r=>{for(let a in r)!["duration","x","y","width","height","rotate"].includes(a)&&!n[a]&&(n[a]=e[a])}),n}animate(){this.animateRendering||requestAnimationFrame(()=>{const e=Date.now();if(e-this.lastAnimateRender<this.store.options.animateInterval){this.store.animates.size>0&&this.animate();return}this.lastAnimateRender=e,this.animateRendering=!0;const n=[];let r=!1;for(const a of this.store.animates)if(!a.calculative.pause){if(a.calculative.active&&!a.type&&!this.movingPens&&(r=!0),!a.type)eCe(a,e)?a.calculative.patchFlags&&(cn(a.calculative.worldRect),this.updatePenRect(a,{worldRectIsReady:!0,playingAnimate:!0})):(requestAnimationFrame(()=>{this.restoreNodeAnimate(a)}),n.push(a),this.nextAnimate(a)),this.updateLines(a,!0);else if(!nCe(a)){if(a.keepAnimateState){for(const i in a)a.calculative[i]!==void 0&&i!=="length"&&(typeof a[i]!="object"||i==="lineDash")&&(i==="lineWidth"?a[i]=a.calculative[i]/a.calculative.canvas.store.data.scale:a[i]=a.calculative[i]);ug(a)}else for(const i in a)(typeof a[i]!="object"||i==="lineDash")&&(i==="lineWidth"?a.calculative[i]=a[i]*a.calculative.canvas.store.data.scale:a.calculative[i]=a[i]);n.push(a),this.nextAnimate(a)}this.patchFlags=!0}r&&this.calcActiveRect(),n.forEach(a=>{this.store.animates.delete(a)}),this.render(!1),this.animateRendering=!1,this.animate()})}get clipboardName(){return"meta2d-clipboard"}async copy(e,n=!0){const r=it(),{origin:a,scale:i}=this.store.data;this.store.clipboard=void 0,localStorage.removeItem(this.clipboardName),sessionStorage.setItem("page",r);let o=this.getAllByPens(Te(e||this.store.active,!0));o.forEach(c=>{c.copyIndex=this.store.data.pens.findIndex(u=>u.id===c.id),c.pathId&&(c.path=this.store.data.paths[c.pathId])}),o.sort((c,u)=>c.copyIndex-u.copyIndex),o.forEach(c=>{delete c.copyIndex});const s={meta2d:!0,pens:o,origin:Te(a),scale:i,page:r,initRect:Te(this.activeRect),offset:10};if(navigator.clipboard&&!this.store.options.disableClipboard&&!navigator.userAgent.includes("Firefox"))try{await navigator.clipboard.writeText(JSON.stringify(s))}catch{localStorage.setItem(this.clipboardName,JSON.stringify(s))}else localStorage.setItem(this.clipboardName,JSON.stringify(s));n&&this.store.emitter.emit("copy",s.pens)}cut(e){this.copy(e,!1),this.delete(e),this.store.emitter.emit("cut",e)}async paste(){var s;let e,n;if(navigator.clipboard&&!this.store.options.disableClipboard&&!navigator.userAgent.includes("Firefox"))try{e=await((s=navigator.clipboard)==null?void 0:s.readText())}catch{e=localStorage.getItem(this.clipboardName)}else e=localStorage.getItem(this.clipboardName);if(e){try{n=JSON.parse(e)}catch(c){console.warn("剪切板数据不是json",c.message);return}if(!n||!n.meta2d)return}else return;if(this.beforeAddPens&&await this.beforeAddPens(n.pens)!=!0)return;let r,a;this.store.clipboard&&(r=this.store.clipboard.offset+10,a=this.store.clipboard.pos),this.store.clipboard=Te(n),sessionStorage.getItem("page")!==n.page?(this.store.clipboard.pos={x:this.mousePos.x,y:this.mousePos.y},this.store.clipboard.offset=0):this.pasteOffset?(r&&(this.store.clipboard.offset=r),a&&(this.store.clipboard.pos=a)):(this.store.clipboard.offset=0,this.pasteOffset=!0);const o=this.store.clipboard.pens.filter(c=>!c.parentId);for(const c of o)this.pastePen(c,void 0);sessionStorage.setItem("page",n.page),this.active(o),this.pushHistory({type:nt.Add,pens:this.store.clipboard.pens}),this.render(),this.store.emitter.emit("add",this.store.clipboard.pens),this.store.emitter.emit("paste",this.store.clipboard.pens)}getAllByPens(e){const n=[];for(const r of e)n.push(...Te(fi(r,this.store),!0));return n.concat(e)}getAllFollowersByPens(e,n=!0){const r=e;for(const a of e){let i=x1(a,this.store);n&&(i=Te(i,!0));for(const o of i)r.find(s=>s.id===o.id)||r.push(o)}return r}setFollowers(e=this.store.active){if(e)if(e.length<2)e[0].followers=[];else{let n=e.map(a=>a.id);n.pop();const r=e[e.length-1];r.followers?n.forEach(a=>{r.followers.includes(a)||r.followers.push(a)}):r.followers=n}}changeLineAnchors(e,n,r){if(Array.isArray(n.connectedLines))for(let a=0;a<n.connectedLines.length;a++){const{lineId:i}=n.connectedLines[a],o=r.find(s=>s.id===i);if(o){const s=o.anchors[0],c=o.anchors[o.anchors.length-1];s.connectTo===e&&(s.connectTo=n.id),c.connectTo===e&&(c.connectTo=n.id)}else n.connectedLines.splice(a,1),a--}}changeNodeConnectedLine(e,n,r){var s;const a=n.anchors[0],i=n.anchors[n.anchors.length-1],o=[a,i];for(const c of o){const u=c.connectTo;if(u){const d=r.find(f=>f.id===u);d?(s=d.connectedLines)==null||s.forEach(f=>{f.lineId===e&&(f.lineId=n.id,f.lineAnchor=c.id)}):(c.connectTo=void 0,c.prev&&(c.prev.connectTo=void 0),c.next&&(c.next.connectTo=void 0))}}}async delete(e=this.store.active,n=!1,r=!0){if(!e||!e.length||this.beforeRemovePens&&await this.beforeRemovePens(e)!=!0||(n||(e=e.filter(i=>!i.locked)),!e||!e.length))return;const a=[];if(this._del(e,a,n),this.initImageCanvas(a),this.initTemplateCanvas(a),this.inactive(),this.clearHover(),this.render(),r){if(a.length===0)return;this.pushHistory({type:nt.Delete,pens:a})}this.store.emitter.emit("delete",e)}_del(e,n,r){e&&e.forEach(a=>{if(a.type&&(a.lastConnected={}),a.parentId)if(this.getLockedParent(a)){console.warn("父节点锁定");return}else{const o=ma(a),s=o.children.indexOf(a.id);o.children.splice(s,1),n&&this.getDelPens(a,n),this.delForce(a)}else{if(!r&&a.locked)return;n&&this.getDelPens(a,n),this.delForce(a)}})}getDelPens(e,n){if(!e)return;if(this.store.data.pens.findIndex(a=>a.id===e.id)>-1){const a=this.store.pens[e.id];a.calculative.active=void 0,n.push(a)}e.children&&e.children.forEach(a=>{this.getDelPens(this.store.pens[a],n)})}getLockedParent(e){if(!e.parentId)return!1;const n=ma(e);if(n.locked)return n;this.getLockedParent(n)}delForce(e){var r;if(!e)return;const n=this.store.data.pens.findIndex(a=>a.id===e.id);n>-1&&(this.delConnectedLines(this.store.data.pens[n]),this.store.data.pens.splice(n,1),this.store.pens[e.id]=void 0,delete this.store.pens[e.id],e.pathId&&delete this.store.data.paths[e.pathId]),this.store.animates.delete(e),this.store.animateMap.delete(e),e.children&&e.children.forEach(a=>{this.delForce(this.store.pens[a])}),(r=e.onDestroy)==null||r.call(e,e)}delConnectedLines(e){var n;if(e.connectedLines)for(let r=0;r<e.connectedLines.length;r++){const{lineId:a,lineAnchor:i}=e.connectedLines[r],o=this.store.pens[a];if(o){let s=o.anchors.find(c=>c.id===i);(s==null?void 0:s.connectTo)===e.id&&(s.connectTo=void 0,s.anchorId=void 0,s.prev&&(s.prev.connectTo=void 0),s.next&&(s.next.connectTo=void 0)),s=ys(o,i),s&&(s.connectTo=void 0,s.anchorId=void 0,s.prev&&(s.prev.connectTo=void 0),s.next&&(s.next.connectTo=void 0))}}e.type&&((n=e.calculative.worldAnchors)==null||n.forEach((r,a)=>{var o;if(!r.connectTo)return;const i=this.store.pens[r.connectTo];i&&((o=i.calculative.worldAnchors)==null||o.forEach(s=>{pu(i,s,e,r)}))}))}convertSpecialCharacter(e){var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(r,a){return n[a]})}createInput(){this.inputParent.classList.add("meta2d-input"),this.inputDiv.classList.add("input-div"),this.inputParent.appendChild(this.inputDiv),this.dropdown.onmouseleave=()=>{this.store.hover=null},this.inputParent.appendChild(this.dropdown),this.externalElements.appendChild(this.inputParent),this.inputParent.onmousedown=this.stopPropagation,this.inputDiv.onmousedown=this.stopPropagation,this.inputDiv.contentEditable="false",this.dropdown.onmousedown=this.stopPropagation;let e;for(let n=0;n<document.styleSheets.length;n++)document.styleSheets[n].title==="le5le.com"&&(e=document.styleSheets[n]);if(!e){const n=document.createElement("style");n.title="le5le.com",document.head.appendChild(n),e=n.sheet,e.insertRule(".meta2d-input{display:none;position:absolute;outline:none;align-items: center;}"),e.insertRule(".meta2d-input textarea{resize:none;border:none;outline:none;background:transparent;flex-grow:1;height:100%;left:0;top:0}"),e.insertRule(".meta2d-input .right{width:10px;height:10px;flex-shrink:0;border-top: 1px solid;border-right: 1px solid;margin-right: 5px;transition: all .3s cubic-bezier(.645,.045,.355,1);position:absolute;right:1px;}"),e.insertRule(".meta2d-input ul{position:absolute;top:100%;left:-5px;width:calc(100% + 10px);min-height:30px;border-radius: 2px;box-shadow: 0 2px 8px #00000026;list-style-type: none;background-color: #fff;padding: 4px 0;max-height: 105px;overflow-y: auto;}"),e.insertRule(".meta2d-input ul li{padding: 5px 12px;line-height: 22px;white-space: nowrap;cursor: pointer;}"),e.insertRule(".meta2d-input ul li:hover{background: #eeeeee;}"),e.insertRule(".input-div::-webkit-scrollbar {display:none}"),e.insertRule(".input-div{scrollbar-width: none;}"),e.insertRule(".meta2d-input .input-div{resize:none;border:none;outline:none;background:transparent;flex-grow:1;height:100%;width: 100%;left:0;top:0;display:flex;text-align: center;justify-content: center;flex-direction: column;}"),e.insertRule(".input-div div{}")}this.inputDiv.onfocus=n=>{if(navigator.userAgent.includes("Firefox")){if(!n.target.innerText){let r=this.inputDiv.offsetWidth/2;window.getComputedStyle(this.inputDiv,null).textAlign!=="center"&&(r=0),this.inputDiv.innerHTML=`<br style="margin-left:${r}px;margin-top:4px;" />`}}else if(n.target.innerText)this.inputDiv.style.paddingTop="";else{let r=window.getComputedStyle(this.inputDiv,null);r.justifyContent==="center"&&(this.inputDiv.style.paddingTop=` ${this.inputDiv.offsetHeight/2-parseFloat(r.lineHeight)/2}px`)}},this.inputDiv.onblur=()=>{setTimeout(()=>{this.hideInput()},300)},this.inputDiv.oninput=n=>{const r=this.store.pens[this.inputDiv.dataset.penId];if(r&&r.inputType==="number"){const a=n.target.innerText,i=a.replace(/[^0-9]/g,"");a!==i&&(n.preventDefault(),n.target.innerText=i)}if(navigator.userAgent.includes("Firefox")){if(!n.target.innerText.trim()){let a=this.inputDiv.offsetWidth/2;window.getComputedStyle(this.inputDiv,null).textAlign!=="center"&&(a=0),this.inputDiv.innerHTML=`<br style="margin-left:${a}px;margin-top:4px;" />`}}else if(n.target.innerText)this.inputDiv.style.paddingTop="";else{let a=window.getComputedStyle(this.inputDiv,null);a.justifyContent==="center"&&(this.inputDiv.style.paddingTop=` ${this.inputDiv.offsetHeight/2-parseFloat(a.lineHeight)/2}px`)}this.store.emitter.emit("input",r)},this.inputDiv.onclick=n=>{n.stopPropagation();const r=this.store.pens[this.inputDiv.dataset.penId];this.dropdown.style.display==="block"?this.dropdown.style.display="none":r!=null&&r.dropdownList&&this.store.data.locked&&(this.dropdown.style.display="block"),this.store.emitter.emit("clickInput",r)},this.inputDiv.onkeyup=n=>{this.setDropdownList(!0);const r=this.store.pens[this.inputDiv.dataset.penId];this.store.emitter.emit("input",{pen:r,text:n.key}),n.stopPropagation()},this.inputDiv.onkeydown=n=>{n.stopPropagation()},this.inputDiv.onmousedown=this.stopPropagation,this.inputDiv.onwheel=n=>{n.stopPropagation()},this.inputDiv.onpaste=n=>{n.preventDefault();let r="";n.clipboardData&&n.clipboardData.getData&&(r=n.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,r)}}clearDropdownList(){if(this.dropdown.hasChildNodes())for(let e=0;e<this.dropdown.childNodes.length;e++)this.dropdown.childNodes[e].remove(),--e}dropdownAppendOption(e,n){const r=document.createElement("li");r.onwheel=this.stopPropagation,r.innerText=e,r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.title=e,r.style.zoom=this.store.data.scale,r.onmousedown=this.stopPropagation,r.dataset.i=n+"",r.onclick=this.selectDropdown;const a=this.store.pens[this.inputDiv.dataset.penId];r.onmouseenter=()=>{r.style.background=a.dropdownHoverBackground||"#eee",r.style.color=a.dropdownHoverColor||"#bdc7db"},r.onmouseleave=()=>{r.style.background=a.dropdownBackground||"#fff",r.style.color=a.dropdownColor||"#bdc7db"},this.dropdown.appendChild(r)}find(e){return this.store.data.pens.filter(n=>n.id==e||n.tags&&n.tags.indexOf(e)>-1)}findOne(e){return this.store.data.pens.find(n=>n.id==e||n.tags&&n.tags.indexOf(e)>-1)}changePenId(e,n){var a,i,o,s,c,u,d;if(e===n)return;const r=this.store.pens[e];if(r&&!this.store.pens[n]){if(r.id=n,this.store.pens[n]=this.store.pens[e],(a=r.onChangeId)==null||a.call(r,r,e,n),delete this.store.pens[e],r.parentId){const f=this.store.pens[r.parentId],h=(i=f.children)==null?void 0:i.findIndex(v=>v===e);h!==-1&&((o=f.children)==null||o.splice(h,1,n))}(s=r.children)==null||s.forEach(f=>{const h=this.store.pens[f];h.parentId=n}),r.type===Gt.Line?this.changeNodeConnectedLine(e,r,this.store.data.pens):(this.changeLineAnchors(e,r,this.store.data.pens),(c=r.connectedLines)==null||c.forEach(({lineId:f})=>{const h=this.store.pens[f];du(h)})),(u=r.anchors)==null||u.forEach(f=>f.penId=n),(d=r.calculative.worldAnchors)==null||d.forEach(f=>f.penId=n)}}updateValue(e,n){var p,g;const r=this.getPenRect(e),a=e.name;Object.assign(e,n);const i=a!==e.name;n.newId&&this.changePenId(e.id,n.newId);let o=!1,s=!1,c=!1,u=!1,d=!1,f=!1,h,v=!1;for(const m in n)m.indexOf(".")===-1?(m==="rotate"?e.disableRotate?e.rotate=e.calculative.rotate||0:h=e.calculative.rotate||0:m==="canvasLayer"||m==="isBottom"||m==="showChild"?f=!0:m==="image"&&(v=!0),(typeof e[m]!="object"||m==="lineDash")&&(!e.disableRotate||m!=="rotate")&&(e.calculative[m]=n[m]),dxe.includes(m)&&(s=!0),["name","borderRadius","lineSmooth","close"].includes(m)&&(o=!0),fxe.includes(m)&&(d=!0),hxe.includes(m)&&(c=!0),vxe.includes(m)&&(u=!0),e.image&&e.name!=="gif"&&["globalAlpha","flipY","flipX","x","y","width","height","iconWidth","iconHeight","imageRatio","iconLeft","iconTop","iconAlign","rotate"].includes(m)&&(v=!0)):(delete e[m],w1(e,m,n[m])),m.split(".")[0]==="anchors"&&du(e);if(this.setCalculativeByScale(e),i&&((p=e.onDestroy)==null||p.call(e,e),gxe(e)),d){const m={x:n.x??r.x,y:n.y??r.y,width:n.width??r.width,height:n.height??r.height};this.setPenRect(e,m,!1),this.updateLines(e,!0),this.store.active&&this.store.active.length&&e.id===this.store.active[0].id&&this.calcActiveRect()}else c?this.updatePenRect(e):(s&&Bi(e),u&&S4(this.store.pens,e),o&&gt.path2dDraws[e.name]&&this.store.path2dMap.set(e,gt.path2dDraws[e.name](e)));if(h!==void 0){const m=e.calculative.rotate;e.calculative.rotate=h,this.rotatePen(e,m-h,e.calculative.worldRect)}(n.image||n.backgroundImage||n.strokeImage)&&(e.calculative.image=void 0,e.calculative.backgroundImage=void 0,e.calculative.strokeImage=void 0,this.loadImage(e)),n.lineGradientColors&&(e.calculative.lineGradient=void 0,e.calculative.gradientColorStop=void 0),n.gradientColors&&(e.calculative.gradient=void 0,e.calculative.radialGradient=void 0),n.gradientRadius&&(e.calculative.gradient=void 0,e.calculative.radialGradient=void 0),n.animateLineWidth&&(e.calculative.gradientAnimatePath=void 0),n.gradientSmooth&&(e.calculative.gradientAnimatePath=void 0),f?(this.canvasImage.init(),this.canvasImageBottom.init()):v&&(e.canvasLayer===void 0&&(e.canvasLayer=Wt.CanvasImageBottom,e.calculative.canvasLayer=Wt.CanvasImageBottom),e.canvasLayer===Wt.CanvasImageBottom?this.canvasImageBottom.init():e.canvasLayer===Wt.CanvasImage&&this.canvasImage.init()),(n.canvasLayer!==void 0||e.canvasLayer===Wt.CanvasTemplate)&&this.initTemplateCanvas([e]),n.zIndex!==void 0&&(g=e.calculative.singleton)!=null&&g.div&&dr(e,e.calculative.singleton.div)}execPenResize(e){var n,r;(n=e.onResize)==null||n.call(e,e),(r=e.children)==null||r.forEach(a=>{const i=this.store.pens[a];i&&this.execPenResize(i)})}setPenRect(e,n,r=!0){if(e.parentId)Object.assign(e,n);else{const{origin:a,scale:i}=this.store.data;e.x=a.x+n.x*i,e.y=a.y+n.y*i,e.width=n.width*i,e.height=n.height*i}this.updatePenRect(e),this.execPenResize(e),r&&this.render()}getPenRect(e,n=this.store.data.origin,r=this.store.data.scale){if(e)return e.parentId?{x:e.x,y:e.y,width:e.width,height:e.height}:{x:(e.x-n.x)/r,y:(e.y-n.y)/r,width:e.width/r,height:e.height/r}}toPng(e=2,n,r=!1,a){const i=hi(this.store.data.pens),o=this.store.data.scale;if(!isFinite(i.width))throw new Error("can not to png, because width is not finite");const s=Te(i),c=this.store.data,u=r&&!c.background&&this.store.bkImg;let d=!1,f=!1;if(u){if(i.x+=c.x,i.y+=c.y,bn(i),Mo(i,this.canvasRect,!0))Object.assign(i,this.canvasRect);else{const C=mu([...Ro(i),...Ro(this.canvasRect)]);Object.assign(i,C)}d=i.x===0,f=i.y===0}const h=this.store.data.width||this.store.options.width,v=this.store.data.height||this.store.options.height;let p=!1;h&&v&&!this.store.data.component&&(p=!0),p&&(i.x=this.store.data.origin.x,i.y=this.store.data.origin.y,i.width=h*this.store.data.scale,i.height=v*this.store.data.scale);const g=Te(i),m=Io(e);i.x-=m[3]*o,i.y-=m[0]*o,i.width+=(m[3]+m[1])*o,i.height+=(m[0]+m[2])*o;const y=(a||1920)/i.width;i.width*=y,i.height*=y,bn(i);const b=document.createElement("canvas");if(b.width=i.width,b.height=i.height,b.width>32767||b.height>32767||!navigator.userAgent.includes("Firefox")&&b.height*b.width>268435456||navigator.userAgent.includes("Firefox")&&b.height*b.width>472907776)throw new Error("can not to png, because the size exceeds the browser limit");const w=b.getContext("2d");w.textBaseline="middle",w.scale(y,y);const x=this.store.data.background||this.store.options.background;if(x&&(w.save(),w.fillStyle=x,p?w.fillRect(0,0,g.width+(m[1]+m[3])*o,g.height+(m[0]+m[2])*o):w.fillRect(0,0,s.width+(m[3]+m[1])*o,s.height+(m[0]+m[2])*o),w.restore()),u)if(p)w.drawImage(this.store.bkImg,m[3]*o||0,m[0]*o||0,g.width,g.height);else{const C=i.x<0?-i.x:0,S=i.y<0?-i.y:0;w.drawImage(this.store.bkImg,C,S,this.canvasRect.width,this.canvasRect.height)}u?p?w.translate(-s.x+m[3]*o||0,-s.y+m[0]*o||0):w.translate((d?c.x:-s.x)+m[3]*o||0,(f?c.y:-s.y)+m[0]*o||0):w.translate(-i.x,-i.y);for(const C of this.store.data.pens){if(!dg(C,this.store)||C.visible==!1)continue;const{active:S}=C.calculative;C.calculative.active=!1,C.calculative.img?cg(w,C):ms(w,C,!0),C.calculative.active=S}if(n){b.toBlob(n);return}return b.toDataURL()}activeToPng(e=2,n){return this.pensToPng(this.store.active,e,n)}pensToPng(e=this.store.active,n=2,r){if(e.length===0)return;const a=this.getAllByPens(e);let i=a.map(v=>v.id);const o=hi(a);if(!isFinite(o.width))throw new Error("can not to png, because width is not finite");const s=Te(o),c=Io(n);o.x-=c[3],o.y-=c[0],o.width+=c[3]+c[1],o.height+=c[0]+c[2],bn(o);const u=(r||o.width)/o.width;o.width*=u,o.height*=u;const d=document.createElement("canvas");if(d.width=o.width,d.height=o.height,d.width>32767||d.height>32767||!navigator.userAgent.includes("Firefox")&&d.height*d.width>268435456||navigator.userAgent.includes("Firefox")&&d.height*d.width>472907776)throw new Error("can not to png, because the size exceeds the browser limit");const f=d.getContext("2d");f.textBaseline="middle",f.scale(u,u);const h=this.store.data.background||this.store.options.background;h&&(f.save(),f.fillStyle=h,f.fillRect(0,0,s.width+(c[3]+c[1]),s.height+(c[0]+c[2])),f.restore()),f.translate(-s.x+c[3],-s.y+c[0]);for(const v of this.store.data.pens)if(i.includes(v.id)){if(!dg(v,this.store)||v.visible==!1)continue;const{active:p}=v.calculative;v.calculative.active=!1,v.calculative.img?cg(f,v):ms(f,v),v.calculative.active=p}return d.toDataURL()}toggleAnchorMode(){var e;if(this.hotkeyType)this.hotkeyType===Qt.AddAnchor&&(this.hotkeyType=Qt.None,this.store.hoverAnchor?this.externalElements.style.cursor="vertical-text":this.store.hover&&(this.externalElements.style.cursor="move"));else{if(this.store.options.disableAnchor||(e=this.store.hover)!=null&&e.disableAnchor)return;this.hotkeyType=Qt.AddAnchor,this.store.hover&&(this.externalElements.style.cursor="pointer")}this.patchFlags=!0}addAnchorHand(){if(this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){const e=[Te(this.store.active[0],!0)];this.store.activeAnchor.prev?this.store.activeAnchor.next||(this.store.activeAnchor.next={...this.store.activeAnchor.prev},nn(this.store.activeAnchor.next,180,this.store.activeAnchor),this.initLineRect(this.store.active[0]),this.patchFlags=!0):(this.store.activeAnchor.next||(this.store.activeAnchor.next={penId:this.store.activeAnchor.penId,x:this.store.activeAnchor.x+50,y:this.store.activeAnchor.y}),this.store.activeAnchor.prev={...this.store.activeAnchor.next},nn(this.store.activeAnchor.prev,180,this.store.activeAnchor),this.initLineRect(this.store.active[0]),this.patchFlags=!0),this.pushHistory({type:nt.Update,pens:[Te(this.store.active[0],!0)],initPens:e})}}removeAnchorHand(){if(this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){const e=[Te(this.store.active[0],!0)];this.hoverType===at.LineAnchorPrev?(this.store.activeAnchor.prev=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0):this.hoverType===at.LineAnchorNext?(this.store.activeAnchor.next=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0):(this.store.activeAnchor.prev=void 0,this.store.activeAnchor.next=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0),this.pushHistory({type:nt.Update,pens:[Te(this.store.active[0])],initPens:e})}}toggleAnchorHand(){this.store.active.length===1&&this.store.active[0].type&&this.store.activeAnchor&&(this.store.activeAnchor.prevNextType||(this.store.activeAnchor.prevNextType=iu.Mirror),this.store.activeAnchor.prevNextType=(this.store.activeAnchor.prevNextType+1)%3)}gotoView(e,n){let r=hi(this.store.data.pens);if(!isFinite(r.width))throw new Error("can not move view, because width is not finite");const a=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;a&&i&&(r={x:this.store.data.origin.x,y:this.store.data.origin.y,width:a*this.store.data.scale,height:i*this.store.data.scale}),this.store.data.x=this.canvas.clientWidth/2-e*r.width-r.x,this.store.data.y=this.canvas.clientHeight/2-n*r.height-r.y,this.onMovePens(),this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init(),this.render()}showMagnifier(){this.magnifierCanvas.canvas.style.zIndex="100",this.externalElements.style.zIndex="101",this.magnifierCanvas.magnifier=!0,this.magnifierCanvas.updateDomOffscreen(),this.externalElements.style.cursor="default",this.render()}hideMagnifier(){this.magnifierCanvas.canvas.style.zIndex="5",this.externalElements.style.zIndex="5",this.magnifierCanvas.magnifier=!1,this.externalElements.style.cursor="default",this.render()}showFit(){this.store.data.locked=0,this.canvasImage.fitFlag=!0,this.canvasImage.activeFit=void 0,this.canvasImage.currentFit=void 0,this.store.data.fits||(this.store.data.fits=[]),this.store.data.fits.forEach(e=>e.active=!1),this.canvasImage.init(),this.canvasImage.render()}hideFit(){this.canvasImage.fitFlag=!1,this.canvasImage.activeFit=void 0,this.canvasImage.currentFit=void 0,this.canvasImage.init(),this.canvasImage.render()}makeFit(){if(this.dragRect.width<100&&this.dragRect.height<100)return;const e=this.store.data.pens.filter(u=>{if(u.parentId||u.isRuleLine)return!1;if(Mo(u.calculative.worldRect,this.dragRect,!0))return u.type===Gt.Line&&!this.store.options.dragAllIn?B1(u,this.dragRect):!0});if(!e.length)return;const n=this.parent.getRect(e),r=this.store.data.scale,a=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;let o=(Math.floor(n.x)-this.store.data.origin.x)/r/a,s=(Math.floor(n.y)-this.store.data.origin.y)/r/i,c={x:o,y:s,width:(Math.ceil(n.width)+1)/r/a,height:(Math.ceil(n.height)+1)/r/i,children:e.map(u=>u.id),id:it(),active:!0};c.x<-.1&&(c.x=-.1),c.y<-.1&&(c.y=-.1),c.width>.5?(c.left=!0,c.right=!0,c.leftValue=(c.x-0)*r*a,c.rightValue=(1-(c.x+c.width))*r*a):c.x<.5?(c.left=!0,c.leftValue=(c.x-0)*r*a):(c.right=!0,c.rightValue=(1-(c.x+c.width))*r*a),c.leftValue<1&&(c.leftValue=0),c.rightValue<1&&(c.rightValue=0),c.height>.5?(c.top=!0,c.bottom=!0,c.topValue=(c.y-0)*r*i,c.bottomValue=(1-(c.y+c.height))*r*i):c.y<.5?(c.top=!0,c.topValue=(c.y-0)*r*i):(c.bottom=!0,c.bottomValue=(1-(c.y+c.height))*r*i),c.topValue<1&&(c.topValue=0),c.bottomValue<1&&(c.bottomValue=0),this.store.data.fits||(this.store.data.fits=[]),this.store.data.fits.forEach(u=>{u.active=!1}),this.store.data.fits.push(c),this.canvasImage.activeFit=c,this.store.emitter.emit("fit",c),this.canvasImage.init(),this.canvasImage.render()}updateFit(e){const n=this.store.data.scale,r=this.store.data.width||this.store.options.width,a=this.store.data.height||this.store.options.height;let i=(e.x-this.store.data.origin.x)/n/r,o=(e.y-this.store.data.origin.y)/n/a;if(this.canvasImage.currentFit){const s=this.canvasImage.activeFit;if(this.canvasImage.currentFit==="top"){o<-.1&&(o=-.1);let d=o-s.y;if(s.height-=d,s.height<.01){s.height=.01;return}s.y=o}if(this.canvasImage.currentFit==="bottom"&&(o>1.1&&(o=1.1),s.height=o-s.y,s.height<=.01&&(s.height=.01)),this.canvasImage.currentFit==="left"){i<-.1&&(i=-.1);let d=i-s.x;if(s.width-=d,s.width<.01){s.width=.01;return}s.x=i}this.canvasImage.currentFit==="right"&&(i>1.1&&(i=1.1),s.width=i-s.x,s.width<=.01&&(s.width=.01));let c={x:s.x*r*n+this.store.data.origin.x,y:s.y*a*n+this.store.data.origin.y,width:s.width*r*n,height:s.height*a*n};bn(c);const u=this.store.data.pens.filter(d=>{if(d.parentId||d.isRuleLine)return!1;if(Mo(d.calculative.worldRect,c,!0))return d.type===Gt.Line&&!this.store.options.dragAllIn?B1(d,c):!0});s.left=void 0,s.leftValue=void 0,s.right=void 0,s.rightValue=void 0,s.top=void 0,s.topValue=void 0,s.bottom=void 0,s.bottomValue=void 0,s.width>.5?(s.left=!0,s.right=!0,s.leftValue=(s.x-0)*n*r,s.rightValue=(1-(s.x+s.width))*n*r):s.x<.5?(s.left=!0,s.leftValue=(s.x-0)*n*r):(s.right=!0,s.rightValue=(1-(s.x+s.width))*n*r),Math.abs(s.leftValue)<1&&(s.leftValue=0),Math.abs(s.rightValue)<1&&(s.rightValue=0),s.height>.5?(s.top=!0,s.bottom=!0,s.topValue=(s.y-0)*n*a,s.bottomValue=(1-(s.y+s.height))*n*a):s.y<.5?(s.top=!0,s.topValue=(s.y-0)*n*a):(s.bottom=!0,s.bottomValue=(1-(s.y+s.height))*n*a),Math.abs(s.topValue)<1&&(s.topValue=0),Math.abs(s.bottomValue)<1&&(s.bottomValue=0),s.children=u.map(d=>d.id),this.store.emitter.emit("fit",s),this.mouseDown.x=e.x,this.mouseDown.y=e.y,this.canvasImage.init(),this.canvasImage.render()}}updateFitRect(e=this.canvasImage.activeFit){const n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height;e.left&&(e.leftValue?e.x=Math.abs(e.leftValue)<1?e.leftValue:e.leftValue/n:e.x=0),e.right&&(e.rightValue?e.width=1-(Math.abs(e.rightValue)<1?e.rightValue:e.rightValue/n)-e.x:e.width=1-e.x),e.top&&(e.topValue?e.y=Math.abs(e.topValue)<1?e.topValue:e.topValue/r:e.y=0),e.bottom&&(e.bottomValue?e.height=1-(Math.abs(e.bottomValue)<1?e.bottomValue:e.bottomValue/r)-e.y:e.height=1-e.y),this.canvasImage.init(),this.canvasImage.render()}deleteFit(e=this.canvasImage.activeFit){if(!e)return;const n=this.store.data.fits.findIndex(r=>r.id===e.id);this.store.data.fits.splice(n,1),this.canvasImage.activeFit=void 0,this.canvasImage.init(),this.canvasImage.render(),this.store.emitter.emit("fit",void 0)}calcuActiveFit(){var s;const e=this.store.data.width||this.store.options.width,n=this.store.data.height||this.store.options.height;let r=(this.mouseDown.x-this.store.data.origin.x)/this.store.data.scale/e,a=(this.mouseDown.y-this.store.data.origin.y)/this.store.data.scale/n,i=-1,o=-1;(s=this.store.data.fits)==null||s.forEach((c,u)=>{c.ex=null,c.ey=null,fl({x:r,y:a},c)&&(i=u),c.active&&(o=u)}),i!==-1&&i!==o?(this.canvasImage.activeFit=this.store.data.fits[i],this.store.data.fits[i].active=!0,o!==-1&&(this.store.data.fits[o].active=!1),this.store.emitter.emit("fit",this.store.data.fits[i])):i===-1&&o!==-1&&(this.store.data.fits[o].active=!1,this.store.emitter.emit("fit",void 0),this.canvasImage.activeFit=null),this.inactive(),this.canvasImage.init(),this.canvasImage.render()}toggleMagnifier(){this.magnifierCanvas.magnifier=!this.magnifierCanvas.magnifier,this.magnifierCanvas.magnifier&&(this.externalElements.style.cursor="default"),this.render()}destroy(){var e,n,r,a;switch(this.scroll&&this.scroll.destroy(),(e=this.tooltip)==null||e.destroy(),(n=this.dialog)==null||n.destroy(),(r=this.title)==null||r.destroy(),(a=this.popconfirm)==null||a.destroy(),this.externalElements.removeEventListener("gesturestart",this.onGesturestart),this.externalElements.ondragover=i=>i.preventDefault(),this.externalElements.ondrop=void 0,this.externalElements.ontouchstart=void 0,this.externalElements.ontouchmove=void 0,this.externalElements.ontouchend=void 0,this.externalElements.onmousedown=void 0,this.externalElements.onmousemove=void 0,this.externalElements.onmouseup=void 0,this.externalElements.onmouseleave=void 0,this.externalElements.ondblclick=void 0,this.store.options.keydown){case Cf.Document:document.removeEventListener("keydown",this.onkeydown),document.removeEventListener("keyup",this.onkeyup);break;case Cf.Canvas:this.externalElements.removeEventListener("keydown",this.onkeydown),this.externalElements.removeEventListener("keyup",this.onkeyup);break}document.removeEventListener("copy",this.onCopy),document.removeEventListener("cut",this.onCut),document.removeEventListener("paste",this.onPaste),window&&window.removeEventListener("message",this.onMessage),window&&window.removeEventListener("resize",this.onResize),window&&window.removeEventListener("scroll",this.onScroll),this.parentElement.innerHTML=""}}function T_e(t,e){const n=e||new Path2D;t.onDestroy||(t.onDestroy=E_e,t.onMove=l8,t.onRotate=l8,t.onMouseEnter=P_e,t.onMouseLeave=I_e,t.onMouseMove=N_e,t.onMouseUp=A_e,t.onInput=O_e);let r=t.calculative.borderRadius||0,a=r;const{x:i,y:o,width:s,height:c,ex:u,ey:d}=t.calculative.worldRect,{x:f}=t.calculative.worldTextRect;r<1&&(r=s*r,a=c*a);let h=r<a?r:a;s<2*h&&(h=s/2),c<2*h&&(h=c/2);const v=k_e(t.text,t.calculative.fontSize);if(n.moveTo(i+h,o),n.lineTo(f-5,o),n.moveTo(f+v+5,o),n.lineTo(f+v+5,o),n.arcTo(u,o,u,d,h),n.arcTo(u,d,i,d,h),n.arcTo(i,d,i,o,h),n.arcTo(i,o,u,o,h),n instanceof Path2D)return n}function k_e(t,e){const n=t.match(/[^\x00-\xff]/g)||"",r=n.length*e,a=t.match(/\s/g)||"",i=a.length*e*.3,o=(t.length-n.length-a.length)*e*.6;return r+i+o}function O_e(t,e){t.text=e,t.calculative.text=t.text,t.calculative.canvas.updatePenRect(t)}function E_e(t){}function l8(t){}function P_e(t){}function I_e(t){const e=t.calculative.canvas.store.active;e&&e.length&&e.forEach(n=>{if(t.followers){let r=t.followers.findIndex(a=>a===n.id);if(r!==-1){const a=t.calculative.canvas.store.pens[n.id+Qr];a&&a.calculative&&(Mo(a.calculative.worldRect,t.calculative.worldRect,!0)||t.followers.splice(r,1))}}})}function A_e(t){const e=t.calculative.canvas.store.active;e&&e.length&&e.forEach(n=>{const r=t.calculative.canvas.store.pens[n.id+Qr];if(r&&r.calculative){let a=Te(t.calculative.worldRect);a.x-=1,a.y-=1,a.width+=2,a.height+=2,Mo(r.calculative.worldRect,a,!0)&&(t.followers||(t.followers=[]),t.followers.includes(n.id)||t.followers.push(n.id))}})}function N_e(t,e){}const zn={};function D_e(t){t.onDestroy||(t.onDestroy=R_e,t.onMove=s8,t.onResize=M_e,t.onRotate=s8,t.onValue=L_e,t.onChangeId=F_e);const e=new Path2D;if(t.image){if(!zn[t.id]){const n=new Image;n.crossOrigin="anonymous",n.src=t.image,t.calculative.canvas.parent.store.options.cdn&&!(t.image.startsWith("http")||t.image.startsWith("//")||t.image.startsWith("data:image"))&&(n.src=t.calculative.canvas.parent.store.options.cdn+t.image),zn[t.id]=n,n.onload=()=>{var r;zn[t.id]===n&&(t.calculative.img=n,t.calculative.imgNaturalWidth=n.naturalWidth||t.iconWidth,t.calculative.imgNaturalHeight=n.naturalHeight||t.iconHeight,(r=t.calculative.canvas.externalElements)==null||r.parentElement.appendChild(n),Pf(t,n))}}return t.calculative.patchFlags&&zn[t.id]&&Pf(t,zn[t.id]),e}}function R_e(t){zn[t.id]&&(zn[t.id].remove(),zn[t.id]=void 0)}function s8(t){zn[t.id]&&Pf(t,zn[t.id])}function M_e(t){zn[t.id]&&Pf(t,zn[t.id])}function L_e(t){zn[t.id]&&(Pf(t,zn[t.id]),zn[t.id].getAttribute("src")!==t.image&&(zn[t.id].src=t.image))}function F_e(t,e,n){zn[e]&&(zn[n]=zn[e],delete zn[e])}function Pf(t,e){e.style.objectFit=t.imageRatio?"contain":"fill",dr(t,e)}function B_e(t,e){return t.onResize||(t.onResize=c8,t.onValue=j_e),hs(t,e)}function c8(t){const e=t.anchors.filter(n=>n.flag!==1);u8(t),t.anchors=t.anchors.concat(...e)}function j_e(t){c8(t),du(t)}function u8(t){const e=[],{x:n,y:r,width:a,height:i}=t,o=$_e(t),s=5;for(let f=0;f<s;f++){if(f===2)continue;let h=n+a*(f+1)/(s+1),v=r;h<n+o?v=wg(n+o,v+o,h,o,-1):h>n+a-o&&(v=wg(n+a-o,v+o,h,o,-1)),e.push({id:String(e.length),flag:1,penId:t.id,x:(h-n)/a,y:(v-r)/i})}const c=3;for(let f=0;f<c;f++){let h=r+i*(f+1)/(c+1),v=n+a;h<r+o?v=bg(v-o,r+o,h,o):h>r+i-o&&(v=bg(v-o,r+i-o,h,o)),e.push({id:String(e.length),flag:1,penId:t.id,x:(v-n)/a,y:(h-r)/i})}const u=5;for(let f=0;f<u;f++){if(f===2)continue;let h=n+a*(f+1)/(u+1),v=r+i;h<n+o?v=wg(n+o,v-o,h,o):h>n+a-o&&(v=wg(n+a-o,v-o,h,o)),e.push({id:String(e.length),flag:1,penId:t.id,x:(h-n)/a,y:(v-r)/i})}const d=3;for(let f=0;f<d;f++){let h=r+i*(f+1)/(d+1),v=n;h<r+o?v=bg(v+o,r+o,h,o,-1):h>r+i-o&&(v=bg(v+o,r+i-o,h,o,-1)),e.push({id:String(e.length),flag:1,penId:t.id,x:(v-n)/a,y:(h-r)/i})}t.anchors=e}function $_e(t){let e=t.calculative.borderRadius||0,n=t.calculative.borderRadius||0;const{width:r,height:a}=t;t.calculative.borderRadius<1&&(e=r*t.calculative.borderRadius,n=a*t.calculative.borderRadius);let i=e<n?e:n;return r<2*i&&(i=r/2),a<2*i&&(i=a/2),i}function bg(t,e,n,r,a=1){return a*Math.sqrt(r**2-(n-e)**2)+t}function wg(t,e,n,r,a=1){return a*Math.sqrt(r**2-(n-t)**2)+e}function U_e(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.moveTo(r,a+o),n.lineTo(r+i,a+o),n.closePath(),n instanceof Path2D)return n}function z_e(t){const e=[{x:0,y:1},{x:1,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:a+"",x:n,y:r,penId:t.id}))}function H_e(){return{rectangle:hs,square:cxe,circle:uxe,svgPath:PCe,diamond:ICe,triangle:ACe,pentagon:DCe,pentagram:MCe,hexagon:FCe,leftArrow:BCe,rightArrow:jCe,twowayArrow:$Ce,message:UCe,cloud:zCe,file:HCe,people:KCe,line:XCe,iframe:d_e,video:g_e,gif:D_e,mindNode:B_e,mindLine:U_e,mindNode2:hs,panel:T_e,combine:hs}}function W_e(){return{triangle:NCe,pentagon:RCe,pentagram:U4,mindNode:u8,mindLine:z_e}}var Hn=(t=>(t[t.Link=0]="Link",t[t.SetProps=1]="SetProps",t[t.StartAnimate=2]="StartAnimate",t[t.PauseAnimate=3]="PauseAnimate",t[t.StopAnimate=4]="StopAnimate",t[t.JS=5]="JS",t[t.GlobalFn=6]="GlobalFn",t[t.Emit=7]="Emit",t[t.StartVideo=8]="StartVideo",t[t.PauseVideo=9]="PauseVideo",t[t.StopVideo=10]="StopVideo",t[t.SendPropData=11]="SendPropData",t[t.SendVarData=12]="SendVarData",t[t.Navigator=13]="Navigator",t[t.Dialog=14]="Dialog",t[t.SendData=15]="SendData",t[t.PostMessage=16]="PostMessage",t[t.PostMessageToParent=17]="PostMessageToParent",t[t.Message=18]="Message",t))(Hn||{});class K_e{constructor(e){de(this,"box");de(this,"boxWidth",320);de(this,"boxHeight",180);de(this,"ratio",this.boxWidth/this.boxHeight);de(this,"padding",5);de(this,"img");de(this,"isShow");de(this,"isDown");de(this,"view");de(this,"onMouseDown",e=>{e.preventDefault(),e.stopPropagation(),this.isDown=!0});de(this,"onMouseMove",e=>{if(e.preventDefault(),e.stopPropagation(),this.isDown)try{this.parent.gotoView(e.offsetX/this.box.clientWidth,e.offsetY/this.box.clientHeight)}catch(n){console.warn(n.message),this.isDown=!1}});de(this,"onMouseUp",e=>{e.preventDefault(),e.stopPropagation();try{this.parent.gotoView(e.offsetX/this.box.clientWidth,e.offsetY/this.box.clientHeight)}catch(n){console.warn(n.message)}finally{this.isDown=!1}});de(this,"onWheel",e=>{let n=.015;if(this.parent.store.options.scaleOff)n=this.parent.store.options.scaleOff,e.deltaY>0&&(n=-this.parent.store.options.scaleOff);else if(/mac os /i.test(navigator.userAgent))e.ctrlKey?e.deltaY>0&&(n*=-1):n*=e.wheelDeltaY/240;else{let c=.2;e.deltaY.toString().indexOf(".")!==-1&&(c=.01),e.deltaY>0?n=-c:n=c}let{offsetX:r,offsetY:a}=e;const i=this.parent.store.data.width||this.parent.store.options.width,o=this.parent.store.data.height||this.parent.store.options.height;if(i&&o)r=r/this.boxWidth*i*this.parent.store.data.scale+this.parent.store.data.origin.x+this.parent.store.data.x,a=a/this.boxHeight*o*this.parent.store.data.scale+this.parent.store.data.origin.y+this.parent.store.data.y;else{const s=this.parent.parent.getRect();r=r/this.boxWidth*s.width+s.x+this.parent.store.data.x,a=a/this.boxHeight*s.height+s.y+this.parent.store.data.y}this.parent.scale(this.parent.store.data.scale+n,{x:r,y:a})});var r;this.parent=e,this.box=document.createElement("div"),this.img=new Image,this.view=document.createElement("div"),this.box.appendChild(this.img),this.box.appendChild(this.view),(r=this.parent.externalElements)==null||r.parentElement.appendChild(this.box),this.box.className="meta2d-map",this.box.onmousedown=this.onMouseDown,this.box.onmousemove=this.onMouseMove,this.box.onmouseup=this.onMouseUp,this.box.onwheel=this.onWheel;let n;for(let a=0;a<document.styleSheets.length;a++)document.styleSheets[a].title==="le5le/map"&&(n=document.styleSheets[a]);if(!n){let a=document.createElement("style");a.type="text/css",a.title="le5le.com/map",document.head.appendChild(a),a=document.createElement("style"),a.type="text/css",document.head.appendChild(a),n=a.sheet,n.insertRule(`.meta2d-map{display:flex;width:${this.boxWidth+2*this.padding}px;height:${this.boxHeight+2*this.padding}px;padding:${this.padding}px;background:#f4f4f4;border:1px solid #ffffff;box-shadow: 0px 0px 14px 0px rgba(0,10,38,0.30);border-radius:8px;position:absolute;z-index:9999;right:0;bottom:0;justify-content:center;align-items:center;cursor:default;user-select:none;overflow: hidden;}`),n.insertRule(".meta2d-map img{max-width:100%;max-height:100%;pointer-events: none;}"),n.insertRule(".meta2d-map div{pointer-events: none;border:1px solid #1890ff;position:absolute}")}}show(){this.box.style.display="flex",this.parent.store.data.pens.length?(this.img.style.display="block",this.img.src=this.parent.toPng(),this.setView()):this.img.style.display="none",this.isShow=!0}hide(){this.box.style.display="none",this.isShow=!1}setView(){const e=this.parent.store.data;if(e.pens.length){let n=hi(e.pens);const r=this.parent.store.data.width||this.parent.store.options.width,a=this.parent.store.data.height||this.parent.store.options.height;if(r&&a&&(n={x:this.parent.store.data.origin.x,y:this.parent.store.data.origin.y,width:r*this.parent.store.data.scale,height:a*this.parent.store.data.scale}),xs(n,e.x,e.y),n.width/n.height>this.ratio){const f=n.width/this.ratio;n.y-=(f-n.height)/2,n.height=f,bn(n)}else{const f=n.height*this.ratio;n.x-=(f-n.width)/2,n.width=f,bn(n)}const o=this.parent.canvasRect;let s=0,c=0;if(n.x<0)s=-n.x/n.width;else if(n.x+n.width>o.width){let f=0;o.width>n.width&&(f=o.width-n.width),s=(-n.x+f)/n.width}if(n.y<0)c=-n.y/n.height;else if(n.y+n.height>o.height){let f=0;o.height>n.height&&(f=o.height-n.height),c=(-n.y+f)/n.height}const u=o.width>n.width?1:o.width/n.width,d=o.height>n.height?1:o.height/n.height;this.view.style.left=this.padding+s*this.boxWidth+"px",this.view.style.width=u*this.boxWidth+"px",this.view.style.top=this.padding+c*this.boxHeight+"px",this.view.style.height=d*this.boxHeight+"px"}}}var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function q_e(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}function xg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d8={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function(){return function n(r,a,i){function o(u,d){if(!a[u]){if(!r[u]){var f=typeof xg=="function"&&xg;if(!d&&f)return f(u,!0);if(s)return s(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var v=a[u]={exports:{}};r[u][0].call(v.exports,function(p){return o(r[u][1][p]||p)},v,v.exports,n,r,a,i)}return a[u].exports}for(var s=typeof xg=="function"&&xg,c=0;c<i.length;c++)o(i[c]);return o}}()({1:[function(n,r,a){(function(i,o){(function(){const s=n("events").EventEmitter,c=n("./store"),u=n("./topic-alias-recv"),d=n("./topic-alias-send"),f=n("mqtt-packet"),h=n("./default-message-id-provider"),v=n("readable-stream").Writable,p=n("inherits"),g=n("reinterval"),m=n("rfdc/default"),y=n("./validations"),b=n("xtend"),w=n("debug")("mqttjs:client"),x=i?i.nextTick:function(E){setTimeout(E,0)},C=o.setImmediate||function(E){x(E)},S={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},_={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function O(E,I){let A;I.properties&&(A=I.properties.topicAlias);let M=I.topic.toString();if(M.length===0){if(A===void 0)return new Error("Unregistered Topic Alias");if((M=E.topicAliasSend.getTopicByAlias(A))===void 0)return new Error("Unregistered Topic Alias");I.topic=M}A&&delete I.properties.topicAlias}function N(E,I,A){w("sendPacket :: packet: %O",I),w("sendPacket :: emitting `packetsend`"),E.emit("packetsend",I),w("sendPacket :: writing to stream");const M=f.writeToStream(I,E.stream,E.options);w("sendPacket :: writeToStream result %s",M),!M&&A&&A!==T?(w("sendPacket :: handle events on `drain` once through callback."),E.stream.once("drain",A)):A&&(w("sendPacket :: invoking cb"),A())}function B(E,I,A,M){w("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let $,U=I;if(U.cmd==="publish"&&(U=m(I),$=O(E,U)))return A&&A($);E.outgoingStore.put(U,function(F){if(F)return A&&A(F);M(),N(E,I,A)})}function T(E){w("nop ::",E)}function k(E,I){let A;const M=this;if(!(this instanceof k))return new k(E,I);for(A in this.options=I||{},S)this.options[A]===void 0?this.options[A]=S[A]:this.options[A]=I[A];w("MqttClient :: options.protocol",I.protocol),w("MqttClient :: options.protocolVersion",I.protocolVersion),w("MqttClient :: options.username",I.username),w("MqttClient :: options.keepalive",I.keepalive),w("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),w("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),w("MqttClient :: options.topicAliasMaximum",I.topicAliasMaximum),this.options.clientId=typeof I.clientId=="string"?I.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),w("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=E,this.messageIdProvider=this.options.messageIdProvider===void 0?new h:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new c,this.incomingStore=I.incomingStore||new c,this.queueQoSZero=I.queueQoSZero===void 0||I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.topicAliasMaximum>0&&(I.topicAliasMaximum>65535?w("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new u(I.topicAliasMaximum)),this.on("connect",function(){const $=this.queue;w("connect :: sending queued packets"),function U(){const F=$.shift();w("deliver :: entry %o",F);let j=null;if(!F)return void M._resubscribe();j=F.packet,w("deliver :: call _sendPacket for %o",j);let W=!0;j.messageId&&j.messageId!==0&&(M.messageIdProvider.register(j.messageId)||(W=!1)),W?M._sendPacket(j,function(H){F.cb&&F.cb(H),U()}):(w("messageId: %d has already used. The message is skipped and removed.",j.messageId),U())}()}),this.on("close",function(){w("close :: connected set to `false`"),this.connected=!1,w("close :: clearing connackTimer"),clearTimeout(this.connackTimer),w("close :: clearing ping timer"),M.pingTimer!==null&&(M.pingTimer.clear(),M.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),w("close :: calling _setupReconnect"),this._setupReconnect()}),s.call(this),w("MqttClient :: setting up stream"),this._setupStream()}p(k,s),k.prototype._setupStream=function(){const E=this,I=new v,A=f.parser(this.options);let M=null;const $=[];function U(){if($.length)x(F);else{const W=M;M=null,W()}}function F(){w("work :: getting next packet in queue");const W=$.shift();if(W)w("work :: packet pulled from queue"),E._handlePacket(W,U);else{w("work :: no packets in queue");const H=M;M=null,w("work :: done flag is %s",!!H),H&&H()}}w("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),w("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),A.on("packet",function(W){w("parser :: on packet push to packets array."),$.push(W)}),I._write=function(W,H,J){M=J,w("writable stream :: parsing buffer"),A.parse(W),F()},w("_setupStream :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",function(W){w("streamErrorHandler :: error",W.message),W.code?(w("streamErrorHandler :: emitting error"),E.emit("error",W)):T(W)}),this.stream.on("close",function(){var W;w("(%s)stream :: on close",E.options.clientId),(W=E.outgoing)&&(w("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(W).forEach(function(H){W[H].volatile&&typeof W[H].cb=="function"&&(W[H].cb(new Error("Connection closed")),delete W[H])})),w("stream: emit close to MqttClient"),E.emit("close")}),w("_setupStream: sending packet `connect`");const j=Object.create(this.options);if(j.cmd="connect",this.topicAliasRecv&&(j.properties||(j.properties={}),this.topicAliasRecv&&(j.properties.topicAliasMaximum=this.topicAliasRecv.max)),N(this,j),A.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return E.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"&&N(this,b({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){w("!!connectTimeout hit!! Calling _cleanUp with force `true`"),E._cleanUp(!0)},this.options.connectTimeout)},k.prototype._handlePacket=function(E,I){const A=this.options;if(A.protocolVersion===5&&A.properties&&A.properties.maximumPacketSize&&A.properties.maximumPacketSize<E.length)return this.emit("error",new Error("exceeding packets size "+E.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(w("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",E),E.cmd){case"publish":this._handlePublish(E,I);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(E),I();break;case"pubrel":this._handlePubrel(E,I);break;case"connack":this._handleConnack(E),I();break;case"auth":this._handleAuth(E),I();break;case"pingresp":this._handlePingresp(E),I();break;case"disconnect":this._handleDisconnect(E),I()}},k.prototype._checkDisconnecting=function(E){return this.disconnecting&&(E&&E!==T?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},k.prototype.publish=function(E,I,A,M){w("publish :: message `%s` to topic `%s`",I,E);const $=this.options;if(typeof A=="function"&&(M=A,A=null),A=b({qos:0,retain:!1,dup:!1},A),this._checkDisconnecting(M))return this;const U=this,F=function(){let j=0;if((A.qos===1||A.qos===2)&&(j=U._nextId())===null)return w("No messageId left"),!1;const W={cmd:"publish",topic:E,payload:I,qos:A.qos,retain:A.retain,messageId:j,dup:A.dup};switch($.protocolVersion===5&&(W.properties=A.properties),w("publish :: qos",A.qos),A.qos){case 1:case 2:U.outgoing[W.messageId]={volatile:!1,cb:M||T},w("MqttClient:publish: packet cmd: %s",W.cmd),U._sendPacket(W,void 0,A.cbStorePut);break;default:w("MqttClient:publish: packet cmd: %s",W.cmd),U._sendPacket(W,M,A.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!F())&&this._storeProcessingQueue.push({invoke:F,cbStorePut:A.cbStorePut,callback:M}),this},k.prototype.subscribe=function(){const E=this,I=new Array(arguments.length);for(let Y=0;Y<arguments.length;Y++)I[Y]=arguments[Y];const A=[];let M=I.shift();const $=M.resubscribe;let U=I.pop()||T,F=I.pop();const j=this.options.protocolVersion;delete M.resubscribe,typeof M=="string"&&(M=[M]),typeof U!="function"&&(F=U,U=T);const W=y.validateTopics(M);if(W!==null)return C(U,new Error("Invalid topic "+W)),this;if(this._checkDisconnecting(U))return w("subscribe: discconecting true"),this;const H={qos:0};if(j===5&&(H.nl=!1,H.rap=!1,H.rh=0),F=b(H,F),Array.isArray(M)?M.forEach(function(Y){if(w("subscribe: array topic %s",Y),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,Y)||E._resubscribeTopics[Y].qos<F.qos||$){const D={topic:Y,qos:F.qos};j===5&&(D.nl=F.nl,D.rap=F.rap,D.rh=F.rh,D.properties=F.properties),w("subscribe: pushing topic `%s` and qos `%s` to subs list",D.topic,D.qos),A.push(D)}}):Object.keys(M).forEach(function(Y){if(w("subscribe: object topic %s",Y),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,Y)||E._resubscribeTopics[Y].qos<M[Y].qos||$){const D={topic:Y,qos:M[Y].qos};j===5&&(D.nl=M[Y].nl,D.rap=M[Y].rap,D.rh=M[Y].rh,D.properties=F.properties),w("subscribe: pushing `%s` to subs list",D),A.push(D)}}),!A.length)return U(null,[]),this;const J=function(){const Y=E._nextId();if(Y===null)return w("No messageId left"),!1;const D={cmd:"subscribe",subscriptions:A,qos:1,retain:!1,dup:!1,messageId:Y};if(F.properties&&(D.properties=F.properties),E.options.resubscribe){w("subscribe :: resubscribe true");const q=[];A.forEach(function(z){if(E.options.reconnectPeriod>0){const K={qos:z.qos};j===5&&(K.nl=z.nl||!1,K.rap=z.rap||!1,K.rh=z.rh||0,K.properties=z.properties),E._resubscribeTopics[z.topic]=K,q.push(z.topic)}}),E.messageIdToTopic[D.messageId]=q}return E.outgoing[D.messageId]={volatile:!0,cb:function(q,z){if(!q){const K=z.granted;for(let P=0;P<K.length;P+=1)A[P].qos=K[P]}U(q,A)}},w("subscribe :: call _sendPacket"),E._sendPacket(D),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!J())&&this._storeProcessingQueue.push({invoke:J,callback:U}),this},k.prototype.unsubscribe=function(){const E=this,I=new Array(arguments.length);for(let j=0;j<arguments.length;j++)I[j]=arguments[j];let A=I.shift(),M=I.pop()||T,$=I.pop();typeof A=="string"&&(A=[A]),typeof M!="function"&&($=M,M=T);const U=y.validateTopics(A);if(U!==null)return C(M,new Error("Invalid topic "+U)),this;if(E._checkDisconnecting(M))return this;const F=function(){const j=E._nextId();if(j===null)return w("No messageId left"),!1;const W={cmd:"unsubscribe",qos:1,messageId:j};return typeof A=="string"?W.unsubscriptions=[A]:Array.isArray(A)&&(W.unsubscriptions=A),E.options.resubscribe&&W.unsubscriptions.forEach(function(H){delete E._resubscribeTopics[H]}),typeof $=="object"&&$.properties&&(W.properties=$.properties),E.outgoing[W.messageId]={volatile:!0,cb:M},w("unsubscribe: call _sendPacket"),E._sendPacket(W),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!F())&&this._storeProcessingQueue.push({invoke:F,callback:M}),this},k.prototype.end=function(E,I,A){const M=this;function $(){w("end :: (%s) :: finish :: calling _cleanUp with force %s",M.options.clientId,E),M._cleanUp(E,()=>{w("end :: finish :: calling process.nextTick on closeStores"),x((function(){w("end :: closeStores: closing incoming and outgoing stores"),M.disconnected=!0,M.incomingStore.close(function(U){M.outgoingStore.close(function(F){if(w("end :: closeStores: emitting end"),M.emit("end"),A){const j=U||F;w("end :: closeStores: invoking callback with args"),A(j)}})}),M._deferredReconnect&&M._deferredReconnect()}).bind(M))},I)}return w("end :: (%s)",this.options.clientId),E!=null&&typeof E=="boolean"||(A=I||T,I=E,E=!1,typeof I!="object"&&(A=I,I=null,typeof A!="function"&&(A=T))),typeof I!="object"&&(A=I,I=null),w("end :: cb? %s",!!A),A=A||T,this.disconnecting?(A(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(w("end :: (%s) :: calling finish in 10ms once outgoing is empty",M.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,$,10))):(w("end :: (%s) :: immediately calling finish",M.options.clientId),$()),this)},k.prototype.removeOutgoingMessage=function(E){const I=this.outgoing[E]?this.outgoing[E].cb:null;return delete this.outgoing[E],this.outgoingStore.del({messageId:E},function(){I(new Error("Message removed"))}),this},k.prototype.reconnect=function(E){w("client reconnect");const I=this,A=function(){E?(I.options.incomingStore=E.incomingStore,I.options.outgoingStore=E.outgoingStore):(I.options.incomingStore=null,I.options.outgoingStore=null),I.incomingStore=I.options.incomingStore||new c,I.outgoingStore=I.options.outgoingStore||new c,I.disconnecting=!1,I.disconnected=!1,I._deferredReconnect=null,I._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=A:A(),this},k.prototype._reconnect=function(){w("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),w("client already connected. disconnecting first.")):(w("_reconnect: calling _setupStream"),this._setupStream())},k.prototype._setupReconnect=function(){const E=this;!E.disconnecting&&!E.reconnectTimer&&E.options.reconnectPeriod>0?(this.reconnecting||(w("_setupReconnect :: emit `offline` state"),this.emit("offline"),w("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),w("_setupReconnect :: setting reconnectTimer for %d ms",E.options.reconnectPeriod),E.reconnectTimer=setInterval(function(){w("reconnectTimer :: reconnect triggered!"),E._reconnect()},E.options.reconnectPeriod)):w("_setupReconnect :: doing nothing...")},k.prototype._clearReconnect=function(){w("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},k.prototype._cleanUp=function(E,I){const A=arguments[2];if(I&&(w("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),w("_cleanUp :: forced? %s",E),E)this.options.reconnectPeriod===0&&this.options.clean&&(M=this.outgoing)&&(w("flush: queue exists? %b",!!M),Object.keys(M).forEach(function($){typeof M[$].cb=="function"&&(M[$].cb(new Error("Connection closed")),delete M[$])})),w("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const $=b({cmd:"disconnect"},A);w("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket($,C.bind(null,this.stream.end.bind(this.stream)))}var M;this.disconnecting||(w("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(w("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),I&&!this.connected&&(w("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())},k.prototype._sendPacket=function(E,I,A){w("_sendPacket :: (%s) ::  start",this.options.clientId),A=A||T,I=I||T;const M=function($,U){if($.options.protocolVersion===5&&U.cmd==="publish"){let F;U.properties&&(F=U.properties.topicAlias);const j=U.topic.toString();if($.topicAliasSend)if(F){if(j.length!==0&&(w("applyTopicAlias :: register topic: %s - alias: %d",j,F),!$.topicAliasSend.put(j,F)))return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,F),new Error("Sending Topic Alias out of range")}else j.length!==0&&($.options.autoAssignTopicAlias?(F=$.topicAliasSend.getAliasByTopic(j))?(U.topic="",U.properties={...U.properties,topicAlias:F},w("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",j,F)):(F=$.topicAliasSend.getLruAlias(),$.topicAliasSend.put(j,F),U.properties={...U.properties,topicAlias:F},w("applyTopicAlias :: auto assign topic: %s - alias: %d",j,F)):$.options.autoUseTopicAlias&&(F=$.topicAliasSend.getAliasByTopic(j))&&(U.topic="",U.properties={...U.properties,topicAlias:F},w("applyTopicAlias :: auto use topic: %s - alias: %d",j,F)));else if(F)return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",j,F),new Error("Sending Topic Alias out of range")}}(this,E);if(M)I(M);else{if(!this.connected)return E.cmd==="auth"?(this._shiftPingInterval(),void N(this,E,I)):(w("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(E,I,A));switch(this._shiftPingInterval(),E.cmd){case"publish":break;case"pubrel":return void B(this,E,I,A);default:return void N(this,E,I)}switch(E.qos){case 2:case 1:B(this,E,I,A);break;case 0:default:N(this,E,I)}w("_sendPacket :: (%s) ::  end",this.options.clientId)}},k.prototype._storePacket=function(E,I,A){w("_storePacket :: packet: %o",E),w("_storePacket :: cb? %s",!!I),A=A||T;let M=E;if(M.cmd==="publish"){const $=O(this,M=m(E));if($)return I&&I($)}(M.qos||0)===0&&this.queueQoSZero||M.cmd!=="publish"?this.queue.push({packet:M,cb:I}):M.qos>0?(I=this.outgoing[M.messageId]?this.outgoing[M.messageId].cb:null,this.outgoingStore.put(M,function($){if($)return I&&I($);A()})):I&&I(new Error("No connection to broker"))},k.prototype._setupPingTimer=function(){w("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const E=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=g(function(){E._checkPing()},1e3*this.options.keepalive))},k.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},k.prototype._checkPing=function(){w("_checkPing :: checking ping..."),this.pingResp?(w("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(w("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},k.prototype._handlePingresp=function(){this.pingResp=!0},k.prototype._handleConnack=function(E){w("_handleConnack");const I=this.options,A=I.protocolVersion===5?E.reasonCode:E.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,E.properties){if(E.properties.topicAliasMaximum){if(E.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));E.properties.topicAliasMaximum>0&&(this.topicAliasSend=new d(E.properties.topicAliasMaximum))}E.properties.serverKeepAlive&&I.keepalive&&(I.keepalive=E.properties.serverKeepAlive,this._shiftPingInterval()),E.properties.maximumPacketSize&&(I.properties||(I.properties={}),I.properties.maximumPacketSize=E.properties.maximumPacketSize)}if(A===0)this.reconnecting=!1,this._onConnect(E);else if(A>0){const M=new Error("Connection refused: "+_[A]);M.code=A,this.emit("error",M)}},k.prototype._handleAuth=function(E){const I=this.options.protocolVersion,A=I===5?E.reasonCode:E.returnCode;if(I!==5){const $=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+I);return $.code=A,void this.emit("error",$)}const M=this;this.handleAuth(E,function($,U){if($)M.emit("error",$);else if(A===24)M.reconnecting=!1,M._sendPacket(U);else{const F=new Error("Connection refused: "+_[A]);$.code=A,M.emit("error",F)}})},k.prototype.handleAuth=function(E,I){I()},k.prototype._handlePublish=function(E,I){w("_handlePublish: packet %o",E),I=I!==void 0?I:T;let A=E.topic.toString();const M=E.payload,$=E.qos,U=E.messageId,F=this,j=this.options,W=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let H;if(E.properties&&(H=E.properties.topicAlias),H!==void 0)if(A.length===0){if(!(H>0&&H<=65535))return w("_handlePublish :: topic alias out of range. alias: %d",H),void this.emit("error",new Error("Received Topic Alias is out of range"));{const J=this.topicAliasRecv.getTopicByAlias(H);if(!J)return w("_handlePublish :: unregistered topic alias. alias: %d",H),void this.emit("error",new Error("Received unregistered Topic Alias"));w("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",A=J,H)}}else{if(!this.topicAliasRecv.put(A,H))return w("_handlePublish :: topic alias out of range. alias: %d",H),void this.emit("error",new Error("Received Topic Alias is out of range"));w("_handlePublish :: registered topic: %s - alias: %d",A,H)}}switch(w("_handlePublish: qos %d",$),$){case 2:j.customHandleAcks(A,M,E,function(H,J){return H instanceof Error||(J=H,H=null),H?F.emit("error",H):W.indexOf(J)===-1?F.emit("error",new Error("Wrong reason code for pubrec")):void(J?F._sendPacket({cmd:"pubrec",messageId:U,reasonCode:J},I):F.incomingStore.put(E,function(){F._sendPacket({cmd:"pubrec",messageId:U},I)}))});break;case 1:j.customHandleAcks(A,M,E,function(H,J){return H instanceof Error||(J=H,H=null),H?F.emit("error",H):W.indexOf(J)===-1?F.emit("error",new Error("Wrong reason code for puback")):(J||F.emit("message",A,M,E),void F.handleMessage(E,function(Y){if(Y)return I&&I(Y);F._sendPacket({cmd:"puback",messageId:U,reasonCode:J},I)}))});break;case 0:this.emit("message",A,M,E),this.handleMessage(E,I);break;default:w("_handlePublish: unknown QoS. Doing nothing.")}},k.prototype.handleMessage=function(E,I){I()},k.prototype._handleAck=function(E){const I=E.messageId,A=E.cmd;let M=null;const $=this.outgoing[I]?this.outgoing[I].cb:null,U=this;let F;if($){switch(w("_handleAck :: packet type",A),A){case"pubcomp":case"puback":{const j=E.reasonCode;j&&j>0&&j!==16&&((F=new Error("Publish error: "+_[j])).code=j,$(F,E)),delete this.outgoing[I],this.outgoingStore.del(E,$),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue();break}case"pubrec":{M={cmd:"pubrel",qos:2,messageId:I};const j=E.reasonCode;j&&j>0&&j!==16?((F=new Error("Publish error: "+_[j])).code=j,$(F,E)):this._sendPacket(M);break}case"suback":delete this.outgoing[I],this.messageIdProvider.deallocate(I);for(let j=0;j<E.granted.length;j++)if(128&E.granted[j]){const W=this.messageIdToTopic[I];W&&W.forEach(function(H){delete U._resubscribeTopics[H]})}this._invokeStoreProcessingQueue(),$(null,E);break;case"unsuback":delete this.outgoing[I],this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue(),$(null);break;default:U.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")}else w("_handleAck :: Server sent an ack in error. Ignoring.")},k.prototype._handlePubrel=function(E,I){w("handling pubrel packet"),I=I!==void 0?I:T;const A=this,M={cmd:"pubcomp",messageId:E.messageId};A.incomingStore.get(E,function($,U){$?A._sendPacket(M,I):(A.emit("message",U.topic,U.payload,U),A.handleMessage(U,function(F){if(F)return I(F);A.incomingStore.del(U,T),A._sendPacket(M,I)}))})},k.prototype._handleDisconnect=function(E){this.emit("disconnect",E)},k.prototype._nextId=function(){return this.messageIdProvider.allocate()},k.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},k.prototype._resubscribe=function(){w("_resubscribe");const E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){w("_resubscribe: protocolVersion 5");for(let I=0;I<E.length;I++){const A={};A[E[I]]=this._resubscribeTopics[E[I]],A.resubscribe=!0,this.subscribe(A,{properties:A[E[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},k.prototype._onConnect=function(E){if(this.disconnected)return void this.emit("connect",E);const I=this;this.connackPacket=E,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function A(){let M=I.outgoingStore.createStream();function $(){I._storeProcessing=!1,I._packetIdsDuringStoreProcessing={}}function U(){M.destroy(),M=null,I._flushStoreProcessingQueue(),$()}I.once("close",U),M.on("error",function(F){$(),I._flushStoreProcessingQueue(),I.removeListener("close",U),I.emit("error",F)}),M.on("end",function(){let F=!0;for(const j in I._packetIdsDuringStoreProcessing)if(!I._packetIdsDuringStoreProcessing[j]){F=!1;break}F?($(),I.removeListener("close",U),I._invokeAllStoreProcessingQueue(),I.emit("connect",E)):A()}),function F(){if(!M)return;I._storeProcessing=!0;const j=M.read(1);let W;j?I._packetIdsDuringStoreProcessing[j.messageId]?F():I.disconnecting||I.reconnectTimer?M.destroy&&M.destroy():(W=I.outgoing[j.messageId]?I.outgoing[j.messageId].cb:null,I.outgoing[j.messageId]={volatile:!1,cb:function(H,J){W&&W(H,J),F()}},I._packetIdsDuringStoreProcessing[j.messageId]=!0,I.messageIdProvider.register(j.messageId)?I._sendPacket(j):w("messageId: %d has already used.",j.messageId)):M.once("readable",F)}()}()},k.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1},k.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},k.prototype._flushStoreProcessingQueue=function(){for(const E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},r.exports=k}).call(this)}).call(this,n("_process"),typeof qn<"u"?qn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(n,r,a){const{Buffer:i}=n("buffer"),o=n("readable-stream").Transform,s=n("duplexify");let c,u,d,f=!1;r.exports=function(h,v){if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const p=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";(function(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})})(v);const g=function(m,y){const b=m.protocol==="alis"?"wss":"ws";let w=b+"://"+m.hostname+m.path;return m.port&&m.port!==80&&m.port!==443&&(w=b+"://"+m.hostname+":"+m.port+m.path),typeof m.transformWsUrl=="function"&&(w=m.transformWsUrl(w,m,y)),w}(v,h);return(c=v.my).connectSocket({url:g,protocols:p}),u=function(){const m=new o;return m._write=function(y,b,w){c.sendSocketMessage({data:y.buffer,success:function(){w()},fail:function(){w(new Error)}})},m._flush=function(y){c.closeSocket({success:function(){y()}})},m}(),d=s.obj(),f||(f=!0,c.onSocketOpen(function(){d.setReadable(u),d.setWritable(u),d.emit("connect")}),c.onSocketMessage(function(m){if(typeof m.data=="string"){const y=i.from(m.data,"base64");u.push(y)}else{const y=new FileReader;y.addEventListener("load",function(){let b=y.result;b=b instanceof ArrayBuffer?i.from(b):i.from(b,"utf8"),u.push(b)}),y.readAsArrayBuffer(m.data)}}),c.onSocketClose(function(){d.end(),d.destroy()}),c.onSocketError(function(m){d.destroy(m)})),d}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(n,r,a){const i=n("net"),o=n("debug")("mqttjs:tcp");r.exports=function(s,c){c.port=c.port||1883,c.hostname=c.hostname||c.host||"localhost";const u=c.port,d=c.hostname;return o("port %d and host %s",u,d),i.createConnection(u,d)}},{debug:18,net:16}],4:[function(n,r,a){const i=n("tls"),o=n("net"),s=n("debug")("mqttjs:tls");r.exports=function(c,u){u.port=u.port||8883,u.host=u.hostname||u.host||"localhost",o.isIP(u.host)===0&&(u.servername=u.host),u.rejectUnauthorized=u.rejectUnauthorized!==!1,delete u.path,s("port %d host %s rejectUnauthorized %b",u.port,u.host,u.rejectUnauthorized);const d=i.connect(u);function f(h){u.rejectUnauthorized&&c.emit("error",h),d.end()}return d.on("secureConnect",function(){u.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",f)}),d.on("error",f),d}},{debug:18,net:16,tls:16}],5:[function(n,r,a){(function(i){(function(){const{Buffer:o}=n("buffer"),s=n("ws"),c=n("debug")("mqttjs:ws"),u=n("duplexify"),d=n("readable-stream").Transform,f=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],h=i!==void 0&&i.title==="browser"||typeof __webpack_require__=="function";function v(g,m){let y=g.protocol+"://"+g.hostname+":"+g.port+g.path;return typeof g.transformWsUrl=="function"&&(y=g.transformWsUrl(y,g,m)),y}function p(g){const m=g;return g.hostname||(m.hostname="localhost"),g.port||(g.protocol==="wss"?m.port=443:m.port=80),g.path||(m.path="/"),g.wsOptions||(m.wsOptions={}),h||g.protocol!=="wss"||f.forEach(function(y){Object.prototype.hasOwnProperty.call(g,y)&&!Object.prototype.hasOwnProperty.call(g.wsOptions,y)&&(m.wsOptions[y]=g[y])}),m}r.exports=h?function(g,m){let y;c("browserStreamBuilder");const b=function(E){const I=p(E);if(I.hostname||(I.hostname=I.host),!I.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const A=new URL(document.URL);I.hostname=A.hostname,I.port||(I.port=A.port)}return I.objectMode===void 0&&(I.objectMode=!(I.binary===!0||I.binary===void 0)),I}(m).browserBufferSize||524288,w=m.browserBufferTimeout||1e3,x=!m.objectMode,C=function(E,I){const A=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt",M=v(I,E),$=new WebSocket(M,[A]);return $.binaryType="arraybuffer",$}(g,m),S=function(E,I,A){const M=new d({objectModeMode:E.objectMode});return M._write=I,M._flush=A,M}(m,function E(I,A,M){C.bufferedAmount>b&&setTimeout(E,w,I,A,M),x&&typeof I=="string"&&(I=o.from(I,"utf8"));try{C.send(I)}catch($){return M($)}M()},function(E){C.close(),E()});m.objectMode||(S._writev=k),S.on("close",()=>{C.close()});const _=C.addEventListener!==void 0;function O(){y.setReadable(S),y.setWritable(S),y.emit("connect")}function N(){y.end(),y.destroy()}function B(E){y.destroy(E)}function T(E){let I=E.data;I=I instanceof ArrayBuffer?o.from(I):o.from(I,"utf8"),S.push(I)}function k(E,I){const A=new Array(E.length);for(let M=0;M<E.length;M++)typeof E[M].chunk=="string"?A[M]=o.from(E[M],"utf8"):A[M]=E[M].chunk;this._write(o.concat(A),"binary",I)}return C.readyState===C.OPEN?y=S:(y=y=u(void 0,void 0,m),m.objectMode||(y._writev=k),_?C.addEventListener("open",O):C.onopen=O),y.socket=C,_?(C.addEventListener("close",N),C.addEventListener("error",B),C.addEventListener("message",T)):(C.onclose=N,C.onerror=B,C.onmessage=T),y}:function(g,m){c("streamBuilder");const y=p(m),b=v(y,g),w=function(C,S,_){c("createWebSocket"),c("protocol: "+_.protocolId+" "+_.protocolVersion);const O=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";return c("creating new Websocket for url: "+S+" and protocol: "+O),new s(S,[O],_.wsOptions)}(0,b,y),x=s.createWebSocketStream(w,y.wsOptions);return x.url=b,w.on("close",()=>{x.destroy()}),x}}).call(this)}).call(this,n("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(n,r,a){const{Buffer:i}=n("buffer"),o=n("readable-stream").Transform,s=n("duplexify");let c,u,d;r.exports=function(f,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");const v=h.protocolId==="MQIsdp"&&h.protocolVersion===3?"mqttv3.1":"mqtt";(function(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})})(h);const p=function(m,y){const b=m.protocol==="wxs"?"wss":"ws";let w=b+"://"+m.hostname+m.path;return m.port&&m.port!==80&&m.port!==443&&(w=b+"://"+m.hostname+":"+m.port+m.path),typeof m.transformWsUrl=="function"&&(w=m.transformWsUrl(w,m,y)),w}(h,f);c=wx.connectSocket({url:p,protocols:[v]}),u=function(){const m=new o;return m._write=function(y,b,w){c.send({data:y.buffer,success:function(){w()},fail:function(x){w(new Error(x))}})},m._flush=function(y){c.close({success:function(){y()}})},m}(),(d=s.obj())._destroy=function(m,y){c.close({success:function(){y&&y(m)}})};const g=d.destroy;return d.destroy=(function(){d.destroy=g;const m=this;setTimeout(function(){c.close({fail:function(){m._destroy(new Error)}})},0)}).bind(d),c.onOpen(function(){d.setReadable(u),d.setWritable(u),d.emit("connect")}),c.onMessage(function(m){let y=m.data;y=y instanceof ArrayBuffer?i.from(y):i.from(y,"utf8"),u.push(y)}),c.onClose(function(){d.end(),d.destroy()}),c.onError(function(m){d.destroy(new Error(m.errMsg))}),d}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(n,r,a){function i(){if(!(this instanceof i))return new i;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}i.prototype.allocate=function(){const o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o},i.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},i.prototype.register=function(o){return!0},i.prototype.deallocate=function(o){},i.prototype.clear=function(){},r.exports=i},{}],8:[function(n,r,a){const i=n("xtend"),o=n("readable-stream").Readable,s={objectMode:!0},c={clean:!0};function u(d){if(!(this instanceof u))return new u(d);this.options=d||{},this.options=i(c,d),this._inflights=new Map}u.prototype.put=function(d,f){return this._inflights.set(d.messageId,d),f&&f(),this},u.prototype.createStream=function(){const d=new o(s),f=[];let h=!1,v=0;return this._inflights.forEach(function(p,g){f.push(p)}),d._read=function(){!h&&v<f.length?this.push(f[v++]):this.push(null)},d.destroy=function(){if(h)return;const p=this;h=!0,setTimeout(function(){p.emit("close")},0)},d},u.prototype.del=function(d,f){return(d=this._inflights.get(d.messageId))?(this._inflights.delete(d.messageId),f(null,d)):f&&f(new Error("missing packet")),this},u.prototype.get=function(d,f){return(d=this._inflights.get(d.messageId))?f(null,d):f&&f(new Error("missing packet")),this},u.prototype.close=function(d){this.options.clean&&(this._inflights=null),d&&d()},r.exports=u},{"readable-stream":69,xtend:81}],9:[function(n,r,a){function i(o){if(!(this instanceof i))return new i(o);this.aliasToTopic={},this.max=o}i.prototype.put=function(o,s){return!(s===0||s>this.max)&&(this.aliasToTopic[s]=o,this.length=Object.keys(this.aliasToTopic).length,!0)},i.prototype.getTopicByAlias=function(o){return this.aliasToTopic[o]},i.prototype.clear=function(){this.aliasToTopic={}},r.exports=i},{}],10:[function(n,r,a){const i=n("lru-cache"),o=n("number-allocator").NumberAllocator;function s(c){if(!(this instanceof s))return new s(c);c>0&&(this.aliasToTopic=new i({max:c}),this.topicToAlias={},this.numberAllocator=new o(1,c),this.max=c,this.length=0)}s.prototype.put=function(c,u){if(u===0||u>this.max)return!1;const d=this.aliasToTopic.get(u);return d&&delete this.topicToAlias[d],this.aliasToTopic.set(u,c),this.topicToAlias[c]=u,this.numberAllocator.use(u),this.length=this.aliasToTopic.length,!0},s.prototype.getTopicByAlias=function(c){return this.aliasToTopic.get(c)},s.prototype.getAliasByTopic=function(c){const u=this.topicToAlias[c];return u!==void 0&&this.aliasToTopic.get(u),u},s.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},s.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},r.exports=s},{"lru-cache":37,"number-allocator":46}],11:[function(n,r,a){function i(o){const s=o.split("/");for(let c=0;c<s.length;c++)if(s[c]!=="+"){if(s[c]==="#")return c===s.length-1;if(s[c].indexOf("+")!==-1||s[c].indexOf("#")!==-1)return!1}return!0}r.exports={validateTopics:function(o){if(o.length===0)return"empty_topic_list";for(let s=0;s<o.length;s++)if(!i(o[s]))return o[s];return null}}},{}],12:[function(n,r,a){(function(i){(function(){const o=n("../client"),s=n("../store"),c=n("url"),u=n("xtend"),d=n("debug")("mqttjs"),f={};function h(v,p){if(d("connecting to an MQTT broker..."),typeof v!="object"||p||(p=v,v=null),p=p||{},v){const m=c.parse(v,!0);if(m.port!=null&&(m.port=Number(m.port)),(p=u(m,p)).protocol===null)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(function(m){let y;m.auth&&((y=m.auth.match(/^(.+):(.+)$/))?(m.username=y[1],m.password=y[2]):m.username=m.auth)}(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),p.cert&&p.key){if(!p.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+p.protocol+'"!')}}if(!f[p.protocol]){const m=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(y,b){return(!m||b%2!=0)&&typeof f[y]=="function"})[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);const g=new o(function(m){return p.servers&&(m._reconnectCount&&m._reconnectCount!==p.servers.length||(m._reconnectCount=0),p.host=p.servers[m._reconnectCount].host,p.port=p.servers[m._reconnectCount].port,p.protocol=p.servers[m._reconnectCount].protocol?p.servers[m._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,m._reconnectCount++),d("calling streambuilder for",p.protocol),f[p.protocol](m,p)},p);return g.on("error",function(){}),g}i!==void 0&&i.title!=="browser"||typeof __webpack_require__!="function"?(f.mqtt=n("./tcp"),f.tcp=n("./tcp"),f.ssl=n("./tls"),f.tls=n("./tls"),f.mqtts=n("./tls")):(f.wx=n("./wx"),f.wxs=n("./wx"),f.ali=n("./ali"),f.alis=n("./ali")),f.ws=n("./ws"),f.wss=n("./ws"),r.exports=h,r.exports.connect=h,r.exports.MqttClient=o,r.exports.Store=s}).call(this)}).call(this,n("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(n,r,a){a.byteLength=function(v){var p=f(v),g=p[0],m=p[1];return 3*(g+m)/4-m},a.toByteArray=function(v){var p,g,m=f(v),y=m[0],b=m[1],w=new s(function(S,_,O){return 3*(_+O)/4-O}(0,y,b)),x=0,C=b>0?y-4:y;for(g=0;g<C;g+=4)p=o[v.charCodeAt(g)]<<18|o[v.charCodeAt(g+1)]<<12|o[v.charCodeAt(g+2)]<<6|o[v.charCodeAt(g+3)],w[x++]=p>>16&255,w[x++]=p>>8&255,w[x++]=255&p;return b===2&&(p=o[v.charCodeAt(g)]<<2|o[v.charCodeAt(g+1)]>>4,w[x++]=255&p),b===1&&(p=o[v.charCodeAt(g)]<<10|o[v.charCodeAt(g+1)]<<4|o[v.charCodeAt(g+2)]>>2,w[x++]=p>>8&255,w[x++]=255&p),w},a.fromByteArray=function(v){for(var p,g=v.length,m=g%3,y=[],b=0,w=g-m;b<w;b+=16383)y.push(h(v,b,b+16383>w?w:b+16383));return m===1?(p=v[g-1],y.push(i[p>>2]+i[p<<4&63]+"==")):m===2&&(p=(v[g-2]<<8)+v[g-1],y.push(i[p>>10]+i[p>>4&63]+i[p<<2&63]+"=")),y.join("")};for(var i=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=c.length;u<d;++u)i[u]=c[u],o[c.charCodeAt(u)]=u;function f(v){var p=v.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=v.indexOf("=");return g===-1&&(g=p),[g,g===p?0:4-g%4]}function h(v,p,g){for(var m,y,b=[],w=p;w<g;w+=3)m=(v[w]<<16&16711680)+(v[w+1]<<8&65280)+(255&v[w+2]),b.push(i[(y=m)>>18&63]+i[y>>12&63]+i[y>>6&63]+i[63&y]);return b.join("")}o[45]=62,o[95]=63},{}],14:[function(n,r,a){const{Buffer:i}=n("buffer"),o=Symbol.for("BufferList");function s(c){if(!(this instanceof s))return new s(c);s._init.call(this,c)}s._init=function(c){Object.defineProperty(this,o,{value:!0}),this._bufs=[],this.length=0,c&&this.append(c)},s.prototype._new=function(c){return new s(c)},s.prototype._offset=function(c){if(c===0)return[0,0];let u=0;for(let d=0;d<this._bufs.length;d++){const f=u+this._bufs[d].length;if(c<f||d===this._bufs.length-1)return[d,c-u];u=f}},s.prototype._reverseOffset=function(c){const u=c[0];let d=c[1];for(let f=0;f<u;f++)d+=this._bufs[f].length;return d},s.prototype.get=function(c){if(c>this.length||c<0)return;const u=this._offset(c);return this._bufs[u[0]][u[1]]},s.prototype.slice=function(c,u){return typeof c=="number"&&c<0&&(c+=this.length),typeof u=="number"&&u<0&&(u+=this.length),this.copy(null,0,c,u)},s.prototype.copy=function(c,u,d,f){if((typeof d!="number"||d<0)&&(d=0),(typeof f!="number"||f>this.length)&&(f=this.length),d>=this.length||f<=0)return c||i.alloc(0);const h=!!c,v=this._offset(d),p=f-d;let g=p,m=h&&u||0,y=v[1];if(d===0&&f===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:i.concat(this._bufs,this.length);for(let b=0;b<this._bufs.length;b++)this._bufs[b].copy(c,m),m+=this._bufs[b].length;return c}if(g<=this._bufs[v[0]].length-y)return h?this._bufs[v[0]].copy(c,u,y,y+g):this._bufs[v[0]].slice(y,y+g);h||(c=i.allocUnsafe(p));for(let b=v[0];b<this._bufs.length;b++){const w=this._bufs[b].length-y;if(!(g>w)){this._bufs[b].copy(c,m,y,y+g),m+=w;break}this._bufs[b].copy(c,m,y),m+=w,g-=w,y&&(y=0)}return c.length>m?c.slice(0,m):c},s.prototype.shallowSlice=function(c,u){if(c=c||0,u=typeof u!="number"?this.length:u,c<0&&(c+=this.length),u<0&&(u+=this.length),c===u)return this._new();const d=this._offset(c),f=this._offset(u),h=this._bufs.slice(d[0],f[0]+1);return f[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,f[1]),d[1]!==0&&(h[0]=h[0].slice(d[1])),this._new(h)},s.prototype.toString=function(c,u,d){return this.slice(u,d).toString(c)},s.prototype.consume=function(c){if(c=Math.trunc(c),Number.isNaN(c)||c<=0)return this;for(;this._bufs.length;){if(!(c>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(c),this.length-=c;break}c-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){const c=this._new();for(let u=0;u<this._bufs.length;u++)c.append(this._bufs[u]);return c},s.prototype.append=function(c){if(c==null)return this;if(c.buffer)this._appendBuffer(i.from(c.buffer,c.byteOffset,c.byteLength));else if(Array.isArray(c))for(let u=0;u<c.length;u++)this.append(c[u]);else if(this._isBufferList(c))for(let u=0;u<c._bufs.length;u++)this.append(c._bufs[u]);else typeof c=="number"&&(c=c.toString()),this._appendBuffer(i.from(c));return this},s.prototype._appendBuffer=function(c){this._bufs.push(c),this.length+=c.length},s.prototype.indexOf=function(c,u,d){if(d===void 0&&typeof u=="string"&&(d=u,u=void 0),typeof c=="function"||Array.isArray(c))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof c=="number"?c=i.from([c]):typeof c=="string"?c=i.from(c,d):this._isBufferList(c)?c=c.slice():Array.isArray(c.buffer)?c=i.from(c.buffer,c.byteOffset,c.byteLength):i.isBuffer(c)||(c=i.from(c)),u=Number(u||0),isNaN(u)&&(u=0),u<0&&(u=this.length+u),u<0&&(u=0),c.length===0)return u>this.length?this.length:u;const f=this._offset(u);let h=f[0],v=f[1];for(;h<this._bufs.length;h++){const p=this._bufs[h];for(;v<p.length;)if(p.length-v>=c.length){const g=p.indexOf(c,v);if(g!==-1)return this._reverseOffset([h,g]);v=p.length-c.length+1}else{const g=this._reverseOffset([h,v]);if(this._match(g,c))return g;v++}v=0}return-1},s.prototype._match=function(c,u){if(this.length-c<u.length)return!1;for(let d=0;d<u.length;d++)if(this.get(c+d)!==u[d])return!1;return!0},function(){const c={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const u in c)(function(d){s.prototype[d]=c[d]===null?function(f,h){return this.slice(f,f+h)[d](0,h)}:function(f=0){return this.slice(f,f+c[d])[d](0)}})(u)}(),s.prototype._isBufferList=function(c){return c instanceof s||s.isBufferList(c)},s.isBufferList=function(c){return c!=null&&c[o]},r.exports=s},{buffer:17}],15:[function(n,r,a){const i=n("readable-stream").Duplex,o=n("inherits"),s=n("./BufferList");function c(u){if(!(this instanceof c))return new c(u);if(typeof u=="function"){this._callback=u;const d=(function(f){this._callback&&(this._callback(f),this._callback=null)}).bind(this);this.on("pipe",function(f){f.on("error",d)}),this.on("unpipe",function(f){f.removeListener("error",d)}),u=null}s._init.call(this,u),i.call(this)}o(c,i),Object.assign(c.prototype,s.prototype),c.prototype._new=function(u){return new c(u)},c.prototype._write=function(u,d,f){this._appendBuffer(u),typeof f=="function"&&f()},c.prototype._read=function(u){if(!this.length)return this.push(null);u=Math.min(u,this.length),this.push(this.slice(0,u)),this.consume(u)},c.prototype.end=function(u){i.prototype.end.call(this,u),this._callback&&(this._callback(null,this.slice()),this._callback=null)},c.prototype._destroy=function(u,d){this._bufs.length=0,this.length=0,d(u)},c.prototype._isBufferList=function(u){return u instanceof c||u instanceof s||c.isBufferList(u)},c.isBufferList=s.isBufferList,r.exports=c,r.exports.BufferListStream=c,r.exports.BufferList=s},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(n,r,a){},{}],17:[function(n,r,a){(function(i){(function(){var o=n("base64-js"),s=n("ieee754");a.Buffer=d,a.SlowBuffer=function(P){return+P!=P&&(P=0),d.alloc(+P)},a.INSPECT_MAX_BYTES=50;var c=2147483647;function u(P){if(P>c)throw new RangeError('The value "'+P+'" is invalid for option "size"');var R=new Uint8Array(P);return R.__proto__=d.prototype,R}function d(P,R,X){if(typeof P=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(P)}return f(P,R,X)}function f(P,R,X){if(typeof P=="string")return function(ae,oe){if(typeof oe=="string"&&oe!==""||(oe="utf8"),!d.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var ce=0|m(ae,oe),ge=u(ce),pe=ge.write(ae,oe);return pe!==ce&&(ge=ge.slice(0,pe)),ge}(P,R);if(ArrayBuffer.isView(P))return p(P);if(P==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(z(P,ArrayBuffer)||P&&z(P.buffer,ArrayBuffer))return function(ae,oe,ce){if(oe<0||ae.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<oe+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ge=oe===void 0&&ce===void 0?new Uint8Array(ae):ce===void 0?new Uint8Array(ae,oe):new Uint8Array(ae,oe,ce),ge.__proto__=d.prototype,ge}(P,R,X);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=P.valueOf&&P.valueOf();if(ee!=null&&ee!==P)return d.from(ee,R,X);var re=function(ae){if(d.isBuffer(ae)){var oe=0|g(ae.length),ce=u(oe);return ce.length===0||ae.copy(ce,0,0,oe),ce}if(ae.length!==void 0)return typeof ae.length!="number"||K(ae.length)?u(0):p(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return p(ae.data)}(P);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return d.from(P[Symbol.toPrimitive]("string"),R,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}function h(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function v(P){return h(P),u(P<0?0:0|g(P))}function p(P){for(var R=P.length<0?0:0|g(P.length),X=u(R),ee=0;ee<R;ee+=1)X[ee]=255&P[ee];return X}function g(P){if(P>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return 0|P}function m(P,R){if(d.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||z(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var X=P.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&X===0)return 0;for(var re=!1;;)switch(R){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return Y(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return D(P).length;default:if(re)return ee?-1:Y(P).length;R=(""+R).toLowerCase(),re=!0}}function y(P,R,X){var ee=P[R];P[R]=P[X],P[X]=ee}function b(P,R,X,ee,re){if(P.length===0)return-1;if(typeof X=="string"?(ee=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),K(X=+X)&&(X=re?0:P.length-1),X<0&&(X=P.length+X),X>=P.length){if(re)return-1;X=P.length-1}else if(X<0){if(!re)return-1;X=0}if(typeof R=="string"&&(R=d.from(R,ee)),d.isBuffer(R))return R.length===0?-1:w(P,R,X,ee,re);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(P,R,X):Uint8Array.prototype.lastIndexOf.call(P,R,X):w(P,[R],X,ee,re);throw new TypeError("val must be string, number or Buffer")}function w(P,R,X,ee,re){var ae,oe=1,ce=P.length,ge=R.length;if(ee!==void 0&&((ee=String(ee).toLowerCase())==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(P.length<2||R.length<2)return-1;oe=2,ce/=2,ge/=2,X/=2}function pe(Ne,Ae){return oe===1?Ne[Ae]:Ne.readUInt16BE(Ae*oe)}if(re){var _e=-1;for(ae=X;ae<ce;ae++)if(pe(P,ae)===pe(R,_e===-1?0:ae-_e)){if(_e===-1&&(_e=ae),ae-_e+1===ge)return _e*oe}else _e!==-1&&(ae-=ae-_e),_e=-1}else for(X+ge>ce&&(X=ce-ge),ae=X;ae>=0;ae--){for(var be=!0,Se=0;Se<ge;Se++)if(pe(P,ae+Se)!==pe(R,Se)){be=!1;break}if(be)return ae}return-1}function x(P,R,X,ee){X=Number(X)||0;var re=P.length-X;ee?(ee=Number(ee))>re&&(ee=re):ee=re;var ae=R.length;ee>ae/2&&(ee=ae/2);for(var oe=0;oe<ee;++oe){var ce=parseInt(R.substr(2*oe,2),16);if(K(ce))return oe;P[X+oe]=ce}return oe}function C(P,R,X,ee){return q(Y(R,P.length-X),P,X,ee)}function S(P,R,X,ee){return q(function(re){for(var ae=[],oe=0;oe<re.length;++oe)ae.push(255&re.charCodeAt(oe));return ae}(R),P,X,ee)}function _(P,R,X,ee){return S(P,R,X,ee)}function O(P,R,X,ee){return q(D(R),P,X,ee)}function N(P,R,X,ee){return q(function(re,ae){for(var oe,ce,ge,pe=[],_e=0;_e<re.length&&!((ae-=2)<0);++_e)oe=re.charCodeAt(_e),ce=oe>>8,ge=oe%256,pe.push(ge),pe.push(ce);return pe}(R,P.length-X),P,X,ee)}function B(P,R,X){return R===0&&X===P.length?o.fromByteArray(P):o.fromByteArray(P.slice(R,X))}function T(P,R,X){X=Math.min(P.length,X);for(var ee=[],re=R;re<X;){var ae,oe,ce,ge,pe=P[re],_e=null,be=pe>239?4:pe>223?3:pe>191?2:1;if(re+be<=X)switch(be){case 1:pe<128&&(_e=pe);break;case 2:(192&(ae=P[re+1]))==128&&(ge=(31&pe)<<6|63&ae)>127&&(_e=ge);break;case 3:ae=P[re+1],oe=P[re+2],(192&ae)==128&&(192&oe)==128&&(ge=(15&pe)<<12|(63&ae)<<6|63&oe)>2047&&(ge<55296||ge>57343)&&(_e=ge);break;case 4:ae=P[re+1],oe=P[re+2],ce=P[re+3],(192&ae)==128&&(192&oe)==128&&(192&ce)==128&&(ge=(15&pe)<<18|(63&ae)<<12|(63&oe)<<6|63&ce)>65535&&ge<1114112&&(_e=ge)}_e===null?(_e=65533,be=1):_e>65535&&(_e-=65536,ee.push(_e>>>10&1023|55296),_e=56320|1023&_e),ee.push(_e),re+=be}return function(Se){var Ne=Se.length;if(Ne<=k)return String.fromCharCode.apply(String,Se);for(var Ae="",Pe=0;Pe<Ne;)Ae+=String.fromCharCode.apply(String,Se.slice(Pe,Pe+=k));return Ae}(ee)}a.kMaxLength=c,d.TYPED_ARRAY_SUPPORT=function(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},P.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(P,R,X){return f(P,R,X)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(P,R,X){return function(ee,re,ae){return h(ee),ee<=0?u(ee):re!==void 0?typeof ae=="string"?u(ee).fill(re,ae):u(ee).fill(re):u(ee)}(P,R,X)},d.allocUnsafe=function(P){return v(P)},d.allocUnsafeSlow=function(P){return v(P)},d.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==d.prototype},d.compare=function(P,R){if(z(P,Uint8Array)&&(P=d.from(P,P.offset,P.byteLength)),z(R,Uint8Array)&&(R=d.from(R,R.offset,R.byteLength)),!d.isBuffer(P)||!d.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===R)return 0;for(var X=P.length,ee=R.length,re=0,ae=Math.min(X,ee);re<ae;++re)if(P[re]!==R[re]){X=P[re],ee=R[re];break}return X<ee?-1:ee<X?1:0},d.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(P,R){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return d.alloc(0);var X;if(R===void 0)for(R=0,X=0;X<P.length;++X)R+=P[X].length;var ee=d.allocUnsafe(R),re=0;for(X=0;X<P.length;++X){var ae=P[X];if(z(ae,Uint8Array)&&(ae=d.from(ae)),!d.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(ee,re),re+=ae.length}return ee},d.byteLength=m,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<P;R+=2)y(this,R,R+1);return this},d.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<P;R+=4)y(this,R,R+3),y(this,R+1,R+2);return this},d.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<P;R+=8)y(this,R,R+7),y(this,R+1,R+6),y(this,R+2,R+5),y(this,R+3,R+4);return this},d.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?T(this,0,P):(function(R,X,ee){var re=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0)<=(X>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return A(this,X,ee);case"utf8":case"utf-8":return T(this,X,ee);case"ascii":return E(this,X,ee);case"latin1":case"binary":return I(this,X,ee);case"base64":return B(this,X,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,X,ee);default:if(re)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),re=!0}}).apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(P){if(!d.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||d.compare(this,P)===0},d.prototype.inspect=function(){var P="",R=a.INSPECT_MAX_BYTES;return P=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(P+=" ... "),"<Buffer "+P+">"},d.prototype.compare=function(P,R,X,ee,re){if(z(P,Uint8Array)&&(P=d.from(P,P.offset,P.byteLength)),!d.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(R===void 0&&(R=0),X===void 0&&(X=P?P.length:0),ee===void 0&&(ee=0),re===void 0&&(re=this.length),R<0||X>P.length||ee<0||re>this.length)throw new RangeError("out of range index");if(ee>=re&&R>=X)return 0;if(ee>=re)return-1;if(R>=X)return 1;if(R>>>=0,X>>>=0,ee>>>=0,re>>>=0,this===P)return 0;for(var ae=re-ee,oe=X-R,ce=Math.min(ae,oe),ge=this.slice(ee,re),pe=P.slice(R,X),_e=0;_e<ce;++_e)if(ge[_e]!==pe[_e]){ae=ge[_e],oe=pe[_e];break}return ae<oe?-1:oe<ae?1:0},d.prototype.includes=function(P,R,X){return this.indexOf(P,R,X)!==-1},d.prototype.indexOf=function(P,R,X){return b(this,P,R,X,!0)},d.prototype.lastIndexOf=function(P,R,X){return b(this,P,R,X,!1)},d.prototype.write=function(P,R,X,ee){if(R===void 0)ee="utf8",X=this.length,R=0;else if(X===void 0&&typeof R=="string")ee=R,X=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(X)?(X>>>=0,ee===void 0&&(ee="utf8")):(ee=X,X=void 0)}var re=this.length-R;if((X===void 0||X>re)&&(X=re),P.length>0&&(X<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var ae=!1;;)switch(ee){case"hex":return x(this,P,R,X);case"utf8":case"utf-8":return C(this,P,R,X);case"ascii":return S(this,P,R,X);case"latin1":case"binary":return _(this,P,R,X);case"base64":return O(this,P,R,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,P,R,X);default:if(ae)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ae=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function E(P,R,X){var ee="";X=Math.min(P.length,X);for(var re=R;re<X;++re)ee+=String.fromCharCode(127&P[re]);return ee}function I(P,R,X){var ee="";X=Math.min(P.length,X);for(var re=R;re<X;++re)ee+=String.fromCharCode(P[re]);return ee}function A(P,R,X){var ee=P.length;(!R||R<0)&&(R=0),(!X||X<0||X>ee)&&(X=ee);for(var re="",ae=R;ae<X;++ae)re+=J(P[ae]);return re}function M(P,R,X){for(var ee=P.slice(R,X),re="",ae=0;ae<ee.length;ae+=2)re+=String.fromCharCode(ee[ae]+256*ee[ae+1]);return re}function $(P,R,X){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+R>X)throw new RangeError("Trying to access beyond buffer length")}function U(P,R,X,ee,re,ae){if(!d.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>re||R<ae)throw new RangeError('"value" argument is out of bounds');if(X+ee>P.length)throw new RangeError("Index out of range")}function F(P,R,X,ee,re,ae){if(X+ee>P.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function j(P,R,X,ee,re){return R=+R,X>>>=0,re||F(P,0,X,4),s.write(P,R,X,ee,23,4),X+4}function W(P,R,X,ee,re){return R=+R,X>>>=0,re||F(P,0,X,8),s.write(P,R,X,ee,52,8),X+8}d.prototype.slice=function(P,R){var X=this.length;P=~~P,R=R===void 0?X:~~R,P<0?(P+=X)<0&&(P=0):P>X&&(P=X),R<0?(R+=X)<0&&(R=0):R>X&&(R=X),R<P&&(R=P);var ee=this.subarray(P,R);return ee.__proto__=d.prototype,ee},d.prototype.readUIntLE=function(P,R,X){P>>>=0,R>>>=0,X||$(P,R,this.length);for(var ee=this[P],re=1,ae=0;++ae<R&&(re*=256);)ee+=this[P+ae]*re;return ee},d.prototype.readUIntBE=function(P,R,X){P>>>=0,R>>>=0,X||$(P,R,this.length);for(var ee=this[P+--R],re=1;R>0&&(re*=256);)ee+=this[P+--R]*re;return ee},d.prototype.readUInt8=function(P,R){return P>>>=0,R||$(P,1,this.length),this[P]},d.prototype.readUInt16LE=function(P,R){return P>>>=0,R||$(P,2,this.length),this[P]|this[P+1]<<8},d.prototype.readUInt16BE=function(P,R){return P>>>=0,R||$(P,2,this.length),this[P]<<8|this[P+1]},d.prototype.readUInt32LE=function(P,R){return P>>>=0,R||$(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},d.prototype.readUInt32BE=function(P,R){return P>>>=0,R||$(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},d.prototype.readIntLE=function(P,R,X){P>>>=0,R>>>=0,X||$(P,R,this.length);for(var ee=this[P],re=1,ae=0;++ae<R&&(re*=256);)ee+=this[P+ae]*re;return ee>=(re*=128)&&(ee-=Math.pow(2,8*R)),ee},d.prototype.readIntBE=function(P,R,X){P>>>=0,R>>>=0,X||$(P,R,this.length);for(var ee=R,re=1,ae=this[P+--ee];ee>0&&(re*=256);)ae+=this[P+--ee]*re;return ae>=(re*=128)&&(ae-=Math.pow(2,8*R)),ae},d.prototype.readInt8=function(P,R){return P>>>=0,R||$(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},d.prototype.readInt16LE=function(P,R){P>>>=0,R||$(P,2,this.length);var X=this[P]|this[P+1]<<8;return 32768&X?4294901760|X:X},d.prototype.readInt16BE=function(P,R){P>>>=0,R||$(P,2,this.length);var X=this[P+1]|this[P]<<8;return 32768&X?4294901760|X:X},d.prototype.readInt32LE=function(P,R){return P>>>=0,R||$(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},d.prototype.readInt32BE=function(P,R){return P>>>=0,R||$(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},d.prototype.readFloatLE=function(P,R){return P>>>=0,R||$(P,4,this.length),s.read(this,P,!0,23,4)},d.prototype.readFloatBE=function(P,R){return P>>>=0,R||$(P,4,this.length),s.read(this,P,!1,23,4)},d.prototype.readDoubleLE=function(P,R){return P>>>=0,R||$(P,8,this.length),s.read(this,P,!0,52,8)},d.prototype.readDoubleBE=function(P,R){return P>>>=0,R||$(P,8,this.length),s.read(this,P,!1,52,8)},d.prototype.writeUIntLE=function(P,R,X,ee){P=+P,R>>>=0,X>>>=0,ee||U(this,P,R,X,Math.pow(2,8*X)-1,0);var re=1,ae=0;for(this[R]=255&P;++ae<X&&(re*=256);)this[R+ae]=P/re&255;return R+X},d.prototype.writeUIntBE=function(P,R,X,ee){P=+P,R>>>=0,X>>>=0,ee||U(this,P,R,X,Math.pow(2,8*X)-1,0);var re=X-1,ae=1;for(this[R+re]=255&P;--re>=0&&(ae*=256);)this[R+re]=P/ae&255;return R+X},d.prototype.writeUInt8=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,1,255,0),this[R]=255&P,R+1},d.prototype.writeUInt16LE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,2,65535,0),this[R]=255&P,this[R+1]=P>>>8,R+2},d.prototype.writeUInt16BE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,2,65535,0),this[R]=P>>>8,this[R+1]=255&P,R+2},d.prototype.writeUInt32LE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,4,4294967295,0),this[R+3]=P>>>24,this[R+2]=P>>>16,this[R+1]=P>>>8,this[R]=255&P,R+4},d.prototype.writeUInt32BE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,4,4294967295,0),this[R]=P>>>24,this[R+1]=P>>>16,this[R+2]=P>>>8,this[R+3]=255&P,R+4},d.prototype.writeIntLE=function(P,R,X,ee){if(P=+P,R>>>=0,!ee){var re=Math.pow(2,8*X-1);U(this,P,R,X,re-1,-re)}var ae=0,oe=1,ce=0;for(this[R]=255&P;++ae<X&&(oe*=256);)P<0&&ce===0&&this[R+ae-1]!==0&&(ce=1),this[R+ae]=(P/oe>>0)-ce&255;return R+X},d.prototype.writeIntBE=function(P,R,X,ee){if(P=+P,R>>>=0,!ee){var re=Math.pow(2,8*X-1);U(this,P,R,X,re-1,-re)}var ae=X-1,oe=1,ce=0;for(this[R+ae]=255&P;--ae>=0&&(oe*=256);)P<0&&ce===0&&this[R+ae+1]!==0&&(ce=1),this[R+ae]=(P/oe>>0)-ce&255;return R+X},d.prototype.writeInt8=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,1,127,-128),P<0&&(P=255+P+1),this[R]=255&P,R+1},d.prototype.writeInt16LE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,2,32767,-32768),this[R]=255&P,this[R+1]=P>>>8,R+2},d.prototype.writeInt16BE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,2,32767,-32768),this[R]=P>>>8,this[R+1]=255&P,R+2},d.prototype.writeInt32LE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,4,2147483647,-2147483648),this[R]=255&P,this[R+1]=P>>>8,this[R+2]=P>>>16,this[R+3]=P>>>24,R+4},d.prototype.writeInt32BE=function(P,R,X){return P=+P,R>>>=0,X||U(this,P,R,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[R]=P>>>24,this[R+1]=P>>>16,this[R+2]=P>>>8,this[R+3]=255&P,R+4},d.prototype.writeFloatLE=function(P,R,X){return j(this,P,R,!0,X)},d.prototype.writeFloatBE=function(P,R,X){return j(this,P,R,!1,X)},d.prototype.writeDoubleLE=function(P,R,X){return W(this,P,R,!0,X)},d.prototype.writeDoubleBE=function(P,R,X){return W(this,P,R,!1,X)},d.prototype.copy=function(P,R,X,ee){if(!d.isBuffer(P))throw new TypeError("argument should be a Buffer");if(X||(X=0),ee||ee===0||(ee=this.length),R>=P.length&&(R=P.length),R||(R=0),ee>0&&ee<X&&(ee=X),ee===X||P.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),P.length-R<ee-X&&(ee=P.length-R+X);var re=ee-X;if(this===P&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,X,ee);else if(this===P&&X<R&&R<ee)for(var ae=re-1;ae>=0;--ae)P[ae+R]=this[ae+X];else Uint8Array.prototype.set.call(P,this.subarray(X,ee),R);return re},d.prototype.fill=function(P,R,X,ee){if(typeof P=="string"){if(typeof R=="string"?(ee=R,R=0,X=this.length):typeof X=="string"&&(ee=X,X=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!d.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(P.length===1){var re=P.charCodeAt(0);(ee==="utf8"&&re<128||ee==="latin1")&&(P=re)}}else typeof P=="number"&&(P&=255);if(R<0||this.length<R||this.length<X)throw new RangeError("Out of range index");if(X<=R)return this;var ae;if(R>>>=0,X=X===void 0?this.length:X>>>0,P||(P=0),typeof P=="number")for(ae=R;ae<X;++ae)this[ae]=P;else{var oe=d.isBuffer(P)?P:d.from(P,ee),ce=oe.length;if(ce===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(ae=0;ae<X-R;++ae)this[ae+R]=oe[ae%ce]}return this};var H=/[^+/0-9A-Za-z-_]/g;function J(P){return P<16?"0"+P.toString(16):P.toString(16)}function Y(P,R){var X;R=R||1/0;for(var ee=P.length,re=null,ae=[],oe=0;oe<ee;++oe){if((X=P.charCodeAt(oe))>55295&&X<57344){if(!re){if(X>56319){(R-=3)>-1&&ae.push(239,191,189);continue}if(oe+1===ee){(R-=3)>-1&&ae.push(239,191,189);continue}re=X;continue}if(X<56320){(R-=3)>-1&&ae.push(239,191,189),re=X;continue}X=65536+(re-55296<<10|X-56320)}else re&&(R-=3)>-1&&ae.push(239,191,189);if(re=null,X<128){if((R-=1)<0)break;ae.push(X)}else if(X<2048){if((R-=2)<0)break;ae.push(X>>6|192,63&X|128)}else if(X<65536){if((R-=3)<0)break;ae.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;ae.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return ae}function D(P){return o.toByteArray(function(R){if((R=(R=R.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(P))}function q(P,R,X,ee){for(var re=0;re<ee&&!(re+X>=R.length||re>=P.length);++re)R[re+X]=P[re];return re}function z(P,R){return P instanceof R||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===R.name}function K(P){return P!=P}}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(n,r,a){(function(i){(function(){a.formatArgs=function(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;s.splice(1,0,c,"color: inherit");let u=0,d=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&f==="%c"&&(d=++u)}),s.splice(d,0,c)},a.save=function(s){try{s?a.storage.setItem("debug",s):a.storage.removeItem("debug")}catch{}},a.load=function(){let s;try{s=a.storage.getItem("debug")}catch{}return!s&&i!==void 0&&"env"in i&&(s=i.env.DEBUG),s},a.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage=function(){try{return localStorage}catch{}}(),a.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),r.exports=n("./common")(a);const{formatters:o}=r.exports;o.j=function(s){try{return JSON.stringify(s)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}).call(this)}).call(this,n("_process"))},{"./common":19,_process:50}],19:[function(n,r,a){r.exports=function(i){function o(u){let d,f,h,v=null;function p(...g){if(!p.enabled)return;const m=p,y=Number(new Date),b=y-(d||y);m.diff=b,m.prev=d,m.curr=y,d=y,g[0]=o.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let w=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(x,C)=>{if(x==="%%")return"%";w++;const S=o.formatters[C];if(typeof S=="function"){const _=g[w];x=S.call(m,_),g.splice(w,1),w--}return x}),o.formatArgs.call(m,g),(m.log||o.log).apply(m,g)}return p.namespace=u,p.useColors=o.useColors(),p.color=o.selectColor(u),p.extend=s,p.destroy=o.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(f!==o.namespaces&&(f=o.namespaces,h=o.enabled(u)),h),set:g=>{v=g}}),typeof o.init=="function"&&o.init(p),p}function s(u,d){const f=o(this.namespace+(d===void 0?":":d)+u);return f.log=this.log,f}function c(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(u){return u instanceof Error?u.stack||u.message:u},o.disable=function(){const u=[...o.names.map(c),...o.skips.map(c).map(d=>"-"+d)].join(",");return o.enable(""),u},o.enable=function(u){let d;o.save(u),o.namespaces=u,o.names=[],o.skips=[];const f=(typeof u=="string"?u:"").split(/[\s,]+/),h=f.length;for(d=0;d<h;d++)f[d]&&((u=f[d].replace(/\*/g,".*?"))[0]==="-"?o.skips.push(new RegExp("^"+u.substr(1)+"$")):o.names.push(new RegExp("^"+u+"$")))},o.enabled=function(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=o.skips.length;d<f;d++)if(o.skips[d].test(u))return!1;for(d=0,f=o.names.length;d<f;d++)if(o.names[d].test(u))return!0;return!1},o.humanize=n("ms"),o.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(u=>{o[u]=i[u]}),o.names=[],o.skips=[],o.formatters={},o.selectColor=function(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return o.colors[Math.abs(d)%o.colors.length]},o.enable(o.load()),o}},{ms:45}],20:[function(n,r,a){(function(i,o){(function(){var s=n("readable-stream"),c=n("end-of-stream"),u=n("inherits"),d=n("stream-shift"),f=o.from&&o.from!==Uint8Array.from?o.from([0]):new o([0]),h=function(m,y){m._corked?m.once("uncork",y):y()},v=function(m,y){return function(b){b?function(w,x){w._autoDestroy&&w.destroy(x)}(m,b.message==="premature close"?null:b):y&&!m._ended&&m.end()}},p=function(){},g=function(m,y,b){if(!(this instanceof g))return new g(m,y,b);s.Duplex.call(this,b),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!b||b.autoDestroy!==!1,this._forwardDestroy=!b||b.destroy!==!1,this._forwardEnd=!b||b.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,m&&this.setWritable(m),y&&this.setReadable(y)};u(g,s.Duplex),g.obj=function(m,y,b){return b||(b={}),b.objectMode=!0,b.highWaterMark=16,new g(m,y,b)},g.prototype.cork=function(){++this._corked==1&&this.emit("cork")},g.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},g.prototype.setWritable=function(m){if(this._unwrite&&this._unwrite(),this.destroyed)m&&m.destroy&&m.destroy();else if(m!==null&&m!==!1){var y=this,b=c(m,{writable:!0,readable:!1},v(this,this._forwardEnd)),w=function(){var x=y._ondrain;y._ondrain=null,x&&x()};this._unwrite&&i.nextTick(w),this._writable=m,this._writable.on("drain",w),this._unwrite=function(){y._writable.removeListener("drain",w),b()},this.uncork()}else this.end()},g.prototype.setReadable=function(m){if(this._unread&&this._unread(),this.destroyed)m&&m.destroy&&m.destroy();else{if(m===null||m===!1)return this.push(null),void this.resume();var y,b=this,w=c(m,{writable:!1,readable:!0},v(this)),x=function(){b._forward()},C=function(){b.push(null)};this._drained=!0,this._readable=m,this._readable2=m._readableState?m:(y=m,new s.Readable({objectMode:!0,highWaterMark:16}).wrap(y)),this._readable2.on("readable",x),this._readable2.on("end",C),this._unread=function(){b._readable2.removeListener("readable",x),b._readable2.removeListener("end",C),w()},this._forward()}},g.prototype._read=function(){this._drained=!0,this._forward()},g.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var m;for(this._forwarding=!0;this._drained&&(m=d(this._readable2))!==null;)this.destroyed||(this._drained=this.push(m));this._forwarding=!1}},g.prototype.destroy=function(m,y){if(y||(y=p),this.destroyed)return y(null);this.destroyed=!0;var b=this;i.nextTick(function(){b._destroy(m),y(null)})},g.prototype._destroy=function(m){if(m){var y=this._ondrain;this._ondrain=null,y?y(m):this.emit("error",m)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},g.prototype._write=function(m,y,b){if(!this.destroyed)return this._corked?h(this,this._write.bind(this,m,y,b)):m===f?this._finish(b):this._writable?void(this._writable.write(m)===!1?this._ondrain=b:this.destroyed||b()):b()},g.prototype._finish=function(m){var y=this;this.emit("preend"),h(this,function(){var b,w;b=y._forwardEnd&&y._writable,w=function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),h(y,m)},b?b._writableState&&b._writableState.finished?w():b._writableState?b.end(w):(b.end(),w()):w()})},g.prototype.end=function(m,y,b){return typeof m=="function"?this.end(null,null,m):typeof y=="function"?this.end(m,null,y):(this._ended=!0,m&&this.write(m),this._writableState.ending||this._writableState.destroyed||this.write(f),s.Writable.prototype.end.call(this,b))},r.exports=g}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(n,r,a){(function(i){(function(){var o=n("once"),s=function(){},c=function(u,d,f){if(typeof d=="function")return c(u,null,d);d||(d={}),f=o(f||s);var h=u._writableState,v=u._readableState,p=d.readable||d.readable!==!1&&u.readable,g=d.writable||d.writable!==!1&&u.writable,m=!1,y=function(){u.writable||b()},b=function(){g=!1,p||f.call(u)},w=function(){p=!1,g||f.call(u)},x=function(N){f.call(u,N?new Error("exited with error code: "+N):null)},C=function(N){f.call(u,N)},S=function(){i.nextTick(_)},_=function(){if(!m)return(!p||v&&v.ended&&!v.destroyed)&&(!g||h&&h.ended&&!h.destroyed)?void 0:f.call(u,new Error("premature close"))},O=function(){u.req.on("finish",b)};return function(N){return N.setHeader&&typeof N.abort=="function"}(u)?(u.on("complete",b),u.on("abort",S),u.req?O():u.on("request",O)):g&&!h&&(u.on("end",y),u.on("close",y)),function(N){return N.stdio&&Array.isArray(N.stdio)&&N.stdio.length===3}(u)&&u.on("exit",x),u.on("end",w),u.on("finish",b),d.error!==!1&&u.on("error",C),u.on("close",S),function(){m=!0,u.removeListener("complete",b),u.removeListener("abort",S),u.removeListener("request",O),u.req&&u.req.removeListener("finish",b),u.removeListener("end",y),u.removeListener("close",y),u.removeListener("finish",b),u.removeListener("exit",x),u.removeListener("end",w),u.removeListener("error",C),u.removeListener("close",S)}};r.exports=c}).call(this)}).call(this,n("_process"))},{_process:50,once:48}],22:[function(n,r,a){var i=Object.create||function(w){var x=function(){};return x.prototype=w,new x},o=Object.keys||function(w){var x=[];for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&x.push(C);return C},s=Function.prototype.bind||function(w){var x=this;return function(){return x.apply(w,arguments)}};function c(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}r.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0;var u,d=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),u=f.x===0}catch{u=!1}function h(w){return w._maxListeners===void 0?c.defaultMaxListeners:w._maxListeners}function v(w,x,C,S){var _,O,N;if(typeof C!="function")throw new TypeError('"listener" argument must be a function');if((O=w._events)?(O.newListener&&(w.emit("newListener",x,C.listener?C.listener:C),O=w._events),N=O[x]):(O=w._events=i(null),w._eventsCount=0),N){if(typeof N=="function"?N=O[x]=S?[C,N]:[N,C]:S?N.unshift(C):N.push(C),!N.warned&&(_=h(w))&&_>0&&N.length>_){N.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+N.length+' "'+String(x)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');B.name="MaxListenersExceededWarning",B.emitter=w,B.type=x,B.count=N.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",B.name,B.message)}}else N=O[x]=C,++w._eventsCount;return w}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var w=new Array(arguments.length),x=0;x<w.length;++x)w[x]=arguments[x];this.listener.apply(this.target,w)}}function g(w,x,C){var S={fired:!1,wrapFn:void 0,target:w,type:x,listener:C},_=s.call(p,S);return _.listener=C,S.wrapFn=_,_}function m(w,x,C){var S=w._events;if(!S)return[];var _=S[x];return _?typeof _=="function"?C?[_.listener||_]:[_]:C?function(O){for(var N=new Array(O.length),B=0;B<N.length;++B)N[B]=O[B].listener||O[B];return N}(_):b(_,_.length):[]}function y(w){var x=this._events;if(x){var C=x[w];if(typeof C=="function")return 1;if(C)return C.length}return 0}function b(w,x){for(var C=new Array(x),S=0;S<x;++S)C[S]=w[S];return C}u?Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(w){if(typeof w!="number"||w<0||w!=w)throw new TypeError('"defaultMaxListeners" must be a positive number');d=w}}):c.defaultMaxListeners=d,c.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||isNaN(w))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=w,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(w){var x,C,S,_,O,N,B=w==="error";if(N=this._events)B=B&&N.error==null;else if(!B)return!1;if(B){if(arguments.length>1&&(x=arguments[1]),x instanceof Error)throw x;var T=new Error('Unhandled "error" event. ('+x+")");throw T.context=x,T}if(!(C=N[w]))return!1;var k=typeof C=="function";switch(S=arguments.length){case 1:(function(E,I,A){if(I)E.call(A);else for(var M=E.length,$=b(E,M),U=0;U<M;++U)$[U].call(A)})(C,k,this);break;case 2:(function(E,I,A,M){if(I)E.call(A,M);else for(var $=E.length,U=b(E,$),F=0;F<$;++F)U[F].call(A,M)})(C,k,this,arguments[1]);break;case 3:(function(E,I,A,M,$){if(I)E.call(A,M,$);else for(var U=E.length,F=b(E,U),j=0;j<U;++j)F[j].call(A,M,$)})(C,k,this,arguments[1],arguments[2]);break;case 4:(function(E,I,A,M,$,U){if(I)E.call(A,M,$,U);else for(var F=E.length,j=b(E,F),W=0;W<F;++W)j[W].call(A,M,$,U)})(C,k,this,arguments[1],arguments[2],arguments[3]);break;default:for(_=new Array(S-1),O=1;O<S;O++)_[O-1]=arguments[O];(function(E,I,A,M){if(I)E.apply(A,M);else for(var $=E.length,U=b(E,$),F=0;F<$;++F)U[F].apply(A,M)})(C,k,this,_)}return!0},c.prototype.addListener=function(w,x){return v(this,w,x,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(w,x){return v(this,w,x,!0)},c.prototype.once=function(w,x){if(typeof x!="function")throw new TypeError('"listener" argument must be a function');return this.on(w,g(this,w,x)),this},c.prototype.prependOnceListener=function(w,x){if(typeof x!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(w,g(this,w,x)),this},c.prototype.removeListener=function(w,x){var C,S,_,O,N;if(typeof x!="function")throw new TypeError('"listener" argument must be a function');if(!(S=this._events))return this;if(!(C=S[w]))return this;if(C===x||C.listener===x)--this._eventsCount==0?this._events=i(null):(delete S[w],S.removeListener&&this.emit("removeListener",w,C.listener||x));else if(typeof C!="function"){for(_=-1,O=C.length-1;O>=0;O--)if(C[O]===x||C[O].listener===x){N=C[O].listener,_=O;break}if(_<0)return this;_===0?C.shift():function(B,T){for(var k=T,E=k+1,I=B.length;E<I;k+=1,E+=1)B[k]=B[E];B.pop()}(C,_),C.length===1&&(S[w]=C[0]),S.removeListener&&this.emit("removeListener",w,N||x)}return this},c.prototype.removeAllListeners=function(w){var x,C,S;if(!(C=this._events))return this;if(!C.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):C[w]&&(--this._eventsCount==0?this._events=i(null):delete C[w]),this;if(arguments.length===0){var _,O=o(C);for(S=0;S<O.length;++S)(_=O[S])!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(x=C[w])=="function")this.removeListener(w,x);else if(x)for(S=x.length-1;S>=0;S--)this.removeListener(w,x[S]);return this},c.prototype.listeners=function(w){return m(this,w,!0)},c.prototype.rawListeners=function(w){return m(this,w,!1)},c.listenerCount=function(w,x){return typeof w.listenerCount=="function"?w.listenerCount(x):y.call(w,x)},c.prototype.listenerCount=y,c.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(n,r,a){a.read=function(i,o,s,c,u){var d,f,h=8*u-c-1,v=(1<<h)-1,p=v>>1,g=-7,m=s?u-1:0,y=s?-1:1,b=i[o+m];for(m+=y,d=b&(1<<-g)-1,b>>=-g,g+=h;g>0;d=256*d+i[o+m],m+=y,g-=8);for(f=d&(1<<-g)-1,d>>=-g,g+=c;g>0;f=256*f+i[o+m],m+=y,g-=8);if(d===0)d=1-p;else{if(d===v)return f?NaN:1/0*(b?-1:1);f+=Math.pow(2,c),d-=p}return(b?-1:1)*f*Math.pow(2,d-c)},a.write=function(i,o,s,c,u,d){var f,h,v,p=8*d-u-1,g=(1<<p)-1,m=g>>1,y=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=c?0:d-1,w=c?1:-1,x=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,f=g):(f=Math.floor(Math.log(o)/Math.LN2),o*(v=Math.pow(2,-f))<1&&(f--,v*=2),(o+=f+m>=1?y/v:y*Math.pow(2,1-m))*v>=2&&(f++,v/=2),f+m>=g?(h=0,f=g):f+m>=1?(h=(o*v-1)*Math.pow(2,u),f+=m):(h=o*Math.pow(2,m-1)*Math.pow(2,u),f=0));u>=8;i[s+b]=255&h,b+=w,h/=256,u-=8);for(f=f<<u|h,p+=u;p>0;i[s+b]=255&f,b+=w,f/=256,p-=8);i[s+b-w]|=128*x}},{}],24:[function(n,r,a){typeof Object.create=="function"?r.exports=function(i,o){o&&(i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(i,o){if(o){i.super_=o;var s=function(){};s.prototype=o.prototype,i.prototype=new s,i.prototype.constructor=i}}},{}],25:[function(n,r,a){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function o(s,c){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=s,this.value=c}return o.prototype.rotateLeft=function(){var s=this.parent,c=this.brother,u=this.leftChild,d=this.rightChild;if(!d)throw new Error("unknown error");var f=d.leftChild,h=d.rightChild;return s&&(s.leftChild===this?s.leftChild=d:s.rightChild===this&&(s.rightChild=d)),d.parent=s,d.brother=c,d.leftChild=this,d.rightChild=h,c&&(c.brother=d),this.parent=d,this.brother=h,this.leftChild=u,this.rightChild=f,h&&(h.parent=d,h.brother=this),u&&(u.parent=this,u.brother=f),f&&(f.parent=this,f.brother=u),d},o.prototype.rotateRight=function(){var s=this.parent,c=this.brother,u=this.leftChild;if(!u)throw new Error("unknown error");var d=this.rightChild,f=u.leftChild,h=u.rightChild;return s&&(s.leftChild===this?s.leftChild=u:s.rightChild===this&&(s.rightChild=u)),u.parent=s,u.brother=c,u.leftChild=f,u.rightChild=this,c&&(c.brother=u),f&&(f.parent=u,f.brother=this),this.parent=u,this.brother=f,this.leftChild=h,this.rightChild=d,h&&(h.parent=this,h.brother=d),d&&(d.parent=this,d.brother=h),u},o.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},o.TreeNodeColorType={red:!0,black:!1},o}();Object.freeze(i),a.default=i},{}],26:[function(n,r,a){var i=this&&this.__generator||function(s,c){var u,d,f,h,v={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(m){return function(y){if(u)throw new TypeError("Generator is already executing.");for(;v;)try{if(u=1,d&&(f=2&y[0]?d.return:y[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,y[1])).done)return f;switch(d=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return v.label++,{value:y[1],done:!1};case 5:v.label++,d=y[1],y=[0];continue;case 7:y=v.ops.pop(),v.trys.pop();continue;default:if(!(f=(f=v.trys).length>0&&f[f.length-1])&&(y[0]===6||y[0]===2)){v=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){v.label=y[1];break}if(y[0]===6&&v.label<f[1]){v.label=f[1],f=y;break}if(f&&v.label<f[2]){v.label=f[2],v.ops.push(y);break}f[2]&&v.ops.pop(),v.trys.pop();continue}y=c.call(s,v)}catch(b){y=[6,b],d=0}finally{u=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([g,m])}}};function o(s){var c=this;s===void 0&&(s=[]);var u=[],d=0,f=0,h=0,v=0,p=0,g=0;this.size=function(){return g},this.empty=function(){return g===0},this.clear=function(){d=h=f=v=p=g=0,y.call(this,o.bucketSize),g=0},this.front=function(){return u[d][f]},this.back=function(){return u[h][v]},this.forEach=function(b){if(!this.empty()){var w=0;if(d!==h){for(C=f;C<o.bucketSize;++C)b(u[d][C],w++);for(C=d+1;C<h;++C)for(var x=0;x<o.bucketSize;++x)b(u[C][x],w++);for(C=0;C<=v;++C)b(u[h][C],w++)}else for(var C=f;C<=v;++C)b(u[d][C],w++)}};var m=function(b){var w=d*o.bucketSize+f,x=w+b,C=h*o.bucketSize+v;if(x<w||x>C)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(x/o.bucketSize),curNodePointerIndex:x%o.bucketSize}};this.getElementByPos=function(b){var w=m(b),x=w.curNodeBucketIndex,C=w.curNodePointerIndex;return u[x][C]},this.eraseElementByPos=function(b){var w=this;if(b<0||b>g)throw new Error("pos should more than 0 and less than queue's size");if(b===0)this.popFront();else if(b===this.size())this.popBack();else{for(var x=[],C=b+1;C<g;++C)x.push(this.getElementByPos(C));this.cut(b),this.popBack(),x.forEach(function(S){return w.pushBack(S)})}},this.eraseElementByValue=function(b){if(!this.empty()){var w=[];this.forEach(function(S){S!==b&&w.push(S)});for(var x=w.length,C=0;C<x;++C)this.setElementByPos(C,w[C]);this.cut(x-1)}};var y=function(b){for(var w=[],x=b*o.sigma,C=Math.max(Math.ceil(x/o.bucketSize),2),S=0;S<C;++S)w.push(new Array(o.bucketSize));var _=Math.ceil(b/o.bucketSize),O=Math.floor(C/2)-Math.floor(_/2),N=O,B=0;if(this.size())for(S=0;S<_;++S){for(var T=0;T<o.bucketSize;++T)if(w[O+S][T]=this.front(),this.popFront(),this.empty()){N=O+S,B=T;break}if(this.empty())break}u=w,d=O,f=0,h=N,v=B,p=C,g=b};this.pushBack=function(b){this.empty()||(h===p-1&&v===o.bucketSize-1&&y.call(this,this.size()),v<o.bucketSize-1?++v:h<p-1&&(++h,v=0)),++g,u[h][v]=b},this.popBack=function(){this.empty()||(this.size()!==1&&(v>0?--v:d<h&&(--h,v=o.bucketSize-1)),g>0&&--g)},this.setElementByPos=function(b,w){var x=m(b),C=x.curNodeBucketIndex,S=x.curNodePointerIndex;u[C][S]=w},this.insert=function(b,w,x){var C=this;if(x===void 0&&(x=1),b===0)for(;x--;)this.pushFront(w);else if(b===this.size())for(;x--;)this.pushBack(w);else{for(var S=[],_=b;_<g;++_)S.push(this.getElementByPos(_));for(this.cut(b-1),_=0;_<x;++_)this.pushBack(w);S.forEach(function(O){return C.pushBack(O)})}},this.find=function(b){if(d===h){for(var w=f;w<=v;++w)if(u[d][w]===b)return!0;return!1}for(w=f;w<o.bucketSize;++w)if(u[d][w]===b)return!0;for(w=d+1;w<h;++w)for(var x=0;x<o.bucketSize;++x)if(u[w][x]===b)return!0;for(w=0;w<=v;++w)if(u[h][w]===b)return!0;return!1},this.reverse=function(){for(var b=0,w=g-1;b<w;){var x=this.getElementByPos(b);this.setElementByPos(b,this.getElementByPos(w)),this.setElementByPos(w,x),++b,--w}},this.unique=function(){if(!this.empty()){var b=[],w=this.front();this.forEach(function(C,S){S!==0&&C===w||(b.push(C),w=C)});for(var x=0;x<g;++x)this.setElementByPos(x,b[x]);this.cut(b.length-1)}},this.sort=function(b){var w=[];this.forEach(function(C){w.push(C)}),w.sort(b);for(var x=0;x<g;++x)this.setElementByPos(x,w[x])},this.pushFront=function(b){this.empty()||(d===0&&f===0&&y.call(this,this.size()),f>0?--f:d>0&&(--d,f=o.bucketSize-1)),++g,u[d][f]=b},this.popFront=function(){this.empty()||(this.size()!==1&&(f<o.bucketSize-1?++f:d<h&&(++d,f=0)),g>0&&--g)},this.shrinkToFit=function(){var b=this,w=[];this.forEach(function(_){w.push(_)});var x=w.length;u=[];for(var C=Math.ceil(x/o.bucketSize),S=0;S<C;++S)u.push(new Array(o.bucketSize));this.clear(),w.forEach(function(_){return b.pushBack(_)})},this.cut=function(b){if(b<0)this.clear();else{var w=m(b),x=w.curNodeBucketIndex,C=w.curNodePointerIndex;h=x,v=C,g=b+1}},this[Symbol.iterator]=function(){return function(){var b,w;return i(this,function(x){switch(x.label){case 0:if(g===0)return[2];if(d!==h)return[3,5];w=f,x.label=1;case 1:return w<=v?[4,u[d][w]]:[3,4];case 2:x.sent(),x.label=3;case 3:return++w,[3,1];case 4:return[2];case 5:w=f,x.label=6;case 6:return w<o.bucketSize?[4,u[d][w]]:[3,9];case 7:x.sent(),x.label=8;case 8:return++w,[3,6];case 9:w=d+1,x.label=10;case 10:if(!(w<h))return[3,15];b=0,x.label=11;case 11:return b<o.bucketSize?[4,u[w][b]]:[3,14];case 12:x.sent(),x.label=13;case 13:return++b,[3,11];case 14:return++w,[3,10];case 15:w=0,x.label=16;case 16:return w<=v?[4,u[h][w]]:[3,19];case 17:x.sent(),x.label=18;case 18:return++w,[3,16];case 19:return[2]}})}()},function(){var b=o.bucketSize;s.size?b=s.size():s.length&&(b=s.length);var w=b*o.sigma;p=Math.ceil(w/o.bucketSize),p=Math.max(p,3);for(var x=0;x<p;++x)u.push(new Array(o.bucketSize));var C=Math.ceil(b/o.bucketSize);d=Math.floor(p/2)-Math.floor(C/2),h=d,s.forEach(function(S){return c.pushBack(S)})}(),Object.freeze(this)}Object.defineProperty(a,"__esModule",{value:!0}),o.sigma=3,o.bucketSize=5e3,Object.freeze(o),a.default=o},{}],27:[function(n,r,a){var i=this&&this.__generator||function(d,f){var h,v,p,g,m={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(w){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,v&&(p=2&x[0]?v.return:x[0]?v.throw||((p=v.return)&&p.call(v),0):v.next)&&!(p=p.call(v,x[1])).done)return p;switch(v=0,p&&(x=[2&x[0],p.value]),x[0]){case 0:case 1:p=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,v=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(!(p=(p=m.trys).length>0&&p[p.length-1])&&(x[0]===6||x[0]===2)){m=0;continue}if(x[0]===3&&(!p||x[1]>p[0]&&x[1]<p[3])){m.label=x[1];break}if(x[0]===6&&m.label<p[1]){m.label=p[1],p=x;break}if(p&&m.label<p[2]){m.label=p[2],m.ops.push(x);break}p[2]&&m.ops.pop(),m.trys.pop();continue}x=f.call(d,m)}catch(C){x=[6,C],v=0}finally{h=p=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([b,w])}}},o=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&d[f],v=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&v>=d.length&&(d=void 0),{value:d&&d[v++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0});var s=n("../LinkList/LinkList"),c=n("../Map/Map");function u(d,f,h){var v=this;if(d===void 0&&(d=[]),f===void 0&&(f=u.initSize),h=h||function(y){var b,w,x=0,C="";if(typeof y=="number")x=((x=Math.floor(y))<<5)-x,x&=x;else{C=typeof y!="string"?JSON.stringify(y):y;try{for(var S=o(C),_=S.next();!_.done;_=S.next())x=(x<<5)-x+_.value.charCodeAt(0),x&=x}catch(O){b={error:O}}finally{try{_&&!_.done&&(w=S.return)&&w.call(S)}finally{if(b)throw b.error}}}return x^=x>>>16},(f&f-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var p=0,g=[],m=Math.max(u.initSize,Math.min(u.maxSize,f));this.size=function(){return p},this.empty=function(){return p===0},this.clear=function(){p=0,m=f,g=[]},this.forEach=function(y){var b=0;g.forEach(function(w){w.forEach(function(x){y(x,b++)})})},this.setElement=function(y,b){var w,x;if(y==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(b!=null){var C=h(y)&m-1;if(g[C]){var S=g[C].size();if(g[C]instanceof s.default){try{for(var _=o(g[C]),O=_.next();!O.done;O=_.next()){var N=O.value;if(N.key===y)return void(N.value=b)}}catch(T){w={error:T}}finally{try{O&&!O.done&&(x=_.return)&&x.call(_)}finally{if(w)throw w.error}}g[C].pushBack({key:y,value:b}),g[C].size()>=u.treeifyThreshold&&(g[C]=new c.default(g[C]))}else g[C].setElement(y,b);var B=g[C].size();p+=B-S}else++p,g[C]=new s.default([{key:y,value:b}]);p>m*u.sigma&&(function(T){if(!(T>=u.maxSize)){m=2*T;var k=[];g.forEach(function(E,I){if(!E.empty()){if(E instanceof s.default&&E.size()===1){var A=E.front(),M=A.key,$=A.value;k[h(M)&m-1]=new s.default([{key:M,value:$}])}else if(E instanceof c.default){var U=new s.default,F=new s.default;E.forEach(function(H){h(H.key)&T?F.pushBack(H):U.pushBack(H)}),U.size()>u.untreeifyThreshold?k[I]=new c.default(U):U.size()&&(k[I]=U),F.size()>u.untreeifyThreshold?k[I+T]=new c.default(F):F.size()&&(k[I+T]=F)}else{var j=new s.default,W=new s.default;E.forEach(function(H){h(H.key)&T?W.pushBack(H):j.pushBack(H)}),j.size()&&(k[I]=j),W.size()&&(k[I+T]=W)}g[I].clear()}}),g=k}}).call(this,m)}else this.eraseElementByKey(y)},this.getElementByKey=function(y){var b,w,x=h(y)&m-1;if(g[x]){if(g[x]instanceof c.default)return g[x].getElementByKey(y);try{for(var C=o(g[x]),S=C.next();!S.done;S=C.next()){var _=S.value;if(_.key===y)return _.value}}catch(O){b={error:O}}finally{try{S&&!S.done&&(w=C.return)&&w.call(C)}finally{if(b)throw b.error}}}},this.eraseElementByKey=function(y){var b,w,x=h(y)&m-1;if(g[x]){var C=g[x].size();if(g[x]instanceof c.default)g[x].eraseElementByKey(y),g[x].size()<=u.untreeifyThreshold&&(g[x]=new s.default(g[x]));else{var S=-1;try{for(var _=o(g[x]),O=_.next();!O.done;O=_.next())if(++S,O.value.key===y){g[x].eraseElementByPos(S);break}}catch(B){b={error:B}}finally{try{O&&!O.done&&(w=_.return)&&w.call(_)}finally{if(b)throw b.error}}}var N=g[x].size();p+=N-C}},this.find=function(y){var b,w,x=h(y)&m-1;if(!g[x])return!1;if(g[x]instanceof c.default)return g[x].find(y);try{for(var C=o(g[x]),S=C.next();!S.done;S=C.next())if(S.value.key===y)return!0}catch(_){b={error:_}}finally{try{S&&!S.done&&(w=C.return)&&w.call(C)}finally{if(b)throw b.error}}return!1},this[Symbol.iterator]=function(){return function(){var y,b,w,x,C,S;return i(this,function(_){switch(_.label){case 0:y=0,_.label=1;case 1:if(!(y<m))return[3,10];for(;y<m&&!g[y];)++y;if(y>=m)return[3,10];_.label=2;case 2:_.trys.push([2,7,8,9]),C=void 0,b=o(g[y]),w=b.next(),_.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:_.sent(),_.label=5;case 5:return w=b.next(),[3,3];case 6:return[3,9];case 7:return x=_.sent(),C={error:x},[3,9];case 8:try{w&&!w.done&&(S=b.return)&&S.call(b)}finally{if(C)throw C.error}return[7];case 9:return++y,[3,1];case 10:return[2]}})}()},d.forEach(function(y){var b=y.key,w=y.value;return v.setElement(b,w)}),Object.freeze(this)}u.initSize=16,u.maxSize=1<<30,u.sigma=.75,u.treeifyThreshold=8,u.untreeifyThreshold=6,u.minTreeifySize=64,Object.freeze(u),a.default=u},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(n,r,a){var i=this&&this.__generator||function(d,f){var h,v,p,g,m={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(w){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,v&&(p=2&x[0]?v.return:x[0]?v.throw||((p=v.return)&&p.call(v),0):v.next)&&!(p=p.call(v,x[1])).done)return p;switch(v=0,p&&(x=[2&x[0],p.value]),x[0]){case 0:case 1:p=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,v=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(!(p=(p=m.trys).length>0&&p[p.length-1])&&(x[0]===6||x[0]===2)){m=0;continue}if(x[0]===3&&(!p||x[1]>p[0]&&x[1]<p[3])){m.label=x[1];break}if(x[0]===6&&m.label<p[1]){m.label=p[1],p=x;break}if(p&&m.label<p[2]){m.label=p[2],m.ops.push(x);break}p[2]&&m.ops.pop(),m.trys.pop();continue}x=f.call(d,m)}catch(C){x=[6,C],v=0}finally{h=p=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([b,w])}}},o=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&d[f],v=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&v>=d.length&&(d=void 0),{value:d&&d[v++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0});var s=n("../Set/Set"),c=n("../LinkList/LinkList");function u(d,f,h){var v=this;if(d===void 0&&(d=[]),f===void 0&&(f=u.initSize),h=h||function(y){var b=0,w="";if(typeof y=="number")b=((b=Math.floor(y))<<5)-b,b&=b;else{w=typeof y!="string"?JSON.stringify(y):y;for(var x=0;x<w.length;x++)b=(b<<5)-b+w.charCodeAt(x),b&=b}return b^=b>>>16},(f&f-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var p=0,g=[],m=Math.max(u.initSize,Math.min(u.maxSize,f));this.size=function(){return p},this.empty=function(){return p===0},this.clear=function(){p=0,m=f,g=[]},this.forEach=function(y){var b=0;g.forEach(function(w){w.forEach(function(x){y(x,b++)})})},this.insert=function(y){if(y==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var b=h(y)&m-1;if(g[b]){var w=g[b].size();if(g[b]instanceof c.default){if(g[b].find(y))return;g[b].pushBack(y),g[b].size()>=u.treeifyThreshold&&(g[b]=new s.default(g[b]))}else g[b].insert(y);var x=g[b].size();p+=x-w}else g[b]=new c.default([y]),++p;p>m*u.sigma&&(function(C){if(!(C>=u.maxSize)){m=2*C;var S=[];g.forEach(function(_,O){if(!_.empty()){if(_ instanceof c.default&&_.size()===1){var N=_.front();if(N===void 0)throw new Error("unknown error");S[h(N)&m-1]=new c.default([N])}else if(_ instanceof s.default){var B=new c.default,T=new c.default;_.forEach(function(I){h(I)&C?T.pushBack(I):B.pushBack(I)}),B.size()>u.untreeifyThreshold?S[O]=new s.default(B):B.size()&&(S[O]=B),T.size()>u.untreeifyThreshold?S[O+C]=new s.default(T):T.size()&&(S[O+C]=T)}else{var k=new c.default,E=new c.default;_.forEach(function(I){h(I)&C?E.pushBack(I):k.pushBack(I)}),k.size()&&(S[O]=k),E.size()&&(S[O+C]=E)}g[O].clear()}}),g=S}}).call(this,m)},this.eraseElementByValue=function(y){var b=h(y)&m-1;if(g[b]){var w=g[b].size();g[b].eraseElementByValue(y),g[b]instanceof s.default&&g[b].size()<=u.untreeifyThreshold&&(g[b]=new c.default(g[b]));var x=g[b].size();p+=x-w}},this.find=function(y){var b=h(y)&m-1;return!!g[b]&&g[b].find(y)},this[Symbol.iterator]=function(){return function(){var y,b,w,x,C,S;return i(this,function(_){switch(_.label){case 0:y=0,_.label=1;case 1:if(!(y<m))return[3,10];for(;y<m&&!g[y];)++y;if(y>=m)return[3,10];_.label=2;case 2:_.trys.push([2,7,8,9]),C=void 0,b=o(g[y]),w=b.next(),_.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:_.sent(),_.label=5;case 5:return w=b.next(),[3,3];case 6:return[3,9];case 7:return x=_.sent(),C={error:x},[3,9];case 8:try{w&&!w.done&&(S=b.return)&&S.call(b)}finally{if(C)throw C.error}return[7];case 9:return++y,[3,1];case 10:return[2]}})}()},d.forEach(function(y){return v.insert(y)}),Object.freeze(this)}u.initSize=16,u.maxSize=1<<30,u.sigma=.75,u.treeifyThreshold=8,u.untreeifyThreshold=6,u.minTreeifySize=64,Object.freeze(u),a.default=u},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(n,r,a){var i=this&&this.__generator||function(c,u){var d,f,h,v,p={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return v={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function g(m){return function(y){return function(b){if(d)throw new TypeError("Generator is already executing.");for(;p;)try{if(d=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return p.label++,{value:b[1],done:!1};case 5:p.label++,f=b[1],b=[0];continue;case 7:b=p.ops.pop(),p.trys.pop();continue;default:if(!(h=(h=p.trys).length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){p=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){p.label=b[1];break}if(b[0]===6&&p.label<h[1]){p.label=h[1],h=b;break}if(h&&p.label<h[2]){p.label=h[2],p.ops.push(b);break}h[2]&&p.ops.pop(),p.trys.pop();continue}b=u.call(c,p)}catch(w){b=[6,w],f=0}finally{d=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([m,y])}}};Object.defineProperty(a,"__esModule",{value:!0});var o=function(){return function(c){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=c}}();function s(c){var u=this;c===void 0&&(c=[]);var d=0,f=void 0,h=void 0;this.size=function(){return d},this.empty=function(){return d===0},this.clear=function(){f=h=void 0,d=0},this.front=function(){return f==null?void 0:f.value},this.back=function(){return h==null?void 0:h.value},this.forEach=function(v){for(var p=f,g=0;p;){if(p.value===void 0)throw new Error("unknown error");v(p.value,g++),p=p.next}},this.getElementByPos=function(v){if(v<0||v>=d)throw new Error("pos must more then 0 and less then the list length");for(var p=f;v--&&p;)p=p.next;if(!p||p.value===void 0)throw new Error("unknown error");return p.value},this.eraseElementByPos=function(v){if(v<0||v>=d)throw new Error("erase pos must more then 0 and less then the list length");if(v===0)this.popFront();else if(v===d-1)this.popBack();else{for(var p=f;v--;){if(!(p!=null&&p.next))throw new Error("unknown error");p=p.next}if(!p||!p.pre||!p.next)throw new Error("unknown error");var g=p.pre,m=p.next;m.pre=g,g.next=m,d>0&&--d}},this.eraseElementByValue=function(v){for(;f&&f.value===v;)this.popFront();for(;h&&h.value===v;)this.popBack();if(f)for(var p=f;p;){if(p.value===v){var g=p.pre,m=p.next;m&&(m.pre=g),g&&(g.next=m),d>0&&--d}p=p.next}},this.pushBack=function(v){if(v==null)throw new Error("you can't push null or undefined here");++d;var p=new o(v);h?(h.next=p,p.pre=h,h=p):f=h=p},this.popBack=function(){h&&(d>0&&--d,h&&(f===h?f=h=void 0:(h=h.pre)&&(h.next=void 0)))},this.setElementByPos=function(v,p){if(p==null)throw new Error("you can't set null or undefined here");if(v<0||v>=d)throw new Error("pos must more then 0 and less then the list length");for(var g=f;v--;){if(!g)throw new Error("unknown error");g=g.next}g&&(g.value=p)},this.insert=function(v,p,g){if(g===void 0&&(g=1),p==null)throw new Error("you can't insert null or undefined here");if(v<0||v>d)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(g<0)throw new Error("insert size must more than 0");if(v===0)for(;g--;)this.pushFront(p);else if(v===d)for(;g--;)this.pushBack(p);else{for(var m=f,y=1;y<v;++y){if(!(m!=null&&m.next))throw new Error("unknown error");m=m==null?void 0:m.next}if(!m)throw new Error("unknown error");var b=m.next;for(d+=g;g--;)m.next=new o(p),m.next.pre=m,m=m.next;m.next=b,b&&(b.pre=m)}},this.find=function(v){for(var p=f;p;){if(p.value===v)return!0;p=p.next}return!1},this.reverse=function(){for(var v=f,p=h,g=0;v&&p&&2*g<d;){var m=v.value;v.value=p.value,p.value=m,v=v.next,p=p.pre,++g}},this.unique=function(){for(var v=f;v;){for(var p=v;p&&p.next&&p.value===p.next.value;)p=p.next,d>0&&--d;v.next=p.next,v.next&&(v.next.pre=v),v=v.next}},this.sort=function(v){var p=[];this.forEach(function(m){p.push(m)}),p.sort(v);var g=f;p.forEach(function(m){g&&(g.value=m,g=g.next)})},this.pushFront=function(v){if(v==null)throw new Error("you can't push null or undefined here");++d;var p=new o(v);f?(p.next=f,f.pre=p,f=p):f=h=p},this.popFront=function(){f&&(d>0&&--d,f&&(f===h?f=h=void 0:(f=f.next)&&(f.pre=void 0)))},this.merge=function(v){var p=this,g=f;v.forEach(function(m){for(;g&&g.value!==void 0&&g.value<=m;)g=g.next;if(g===void 0)p.pushBack(m),g=h;else if(g===f)p.pushFront(m),g=f;else{++d;var y=g.pre;y&&(y.next=new o(m),y.next.pre=y,y.next.next=g,g&&(g.pre=y.next))}})},this[Symbol.iterator]=function(){return function(){var v;return i(this,function(p){switch(p.label){case 0:v=f,p.label=1;case 1:if(v===void 0)return[3,3];if(!v.value)throw new Error("unknown error");return[4,v.value];case 2:return p.sent(),v=v.next,[3,1];case 3:return[2]}})}()},c.forEach(function(v){return u.pushBack(v)}),Object.freeze(this)}Object.freeze(s),a.default=s},{}],30:[function(n,r,a){var i=this&&this.__generator||function(u,d){var f,h,v,p,g={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(y){return function(b){return function(w){if(f)throw new TypeError("Generator is already executing.");for(;g;)try{if(f=1,h&&(v=2&w[0]?h.return:w[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,w[1])).done)return v;switch(h=0,v&&(w=[2&w[0],v.value]),w[0]){case 0:case 1:v=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,h=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(!(v=(v=g.trys).length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){g.label=w[1];break}if(w[0]===6&&g.label<v[1]){g.label=v[1],v=w;break}if(v&&g.label<v[2]){g.label=v[2],g.ops.push(w);break}v[2]&&g.ops.pop(),g.trys.pop();continue}w=d.call(u,g)}catch(x){w=[6,x],h=0}finally{f=v=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([y,b])}}},o=this&&this.__values||function(u){var d=typeof Symbol=="function"&&Symbol.iterator,f=d&&u[d],h=0;if(f)return f.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&h>=u.length&&(u=void 0),{value:u&&u[h++],done:!u}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0});var s=n("../Base/TreeNode");function c(u,d){var f=this;u===void 0&&(u=[]),d=d||function(T,k){return T<k?-1:T>k?1:0};var h=0,v=new s.default;v.color=s.default.TreeNodeColorType.black,this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){h=0,v.key=v.value=void 0,v.leftChild=v.rightChild=v.brother=void 0};var p=function(T){if(!T||T.key===void 0)throw new Error("unknown error");return T.leftChild?p(T.leftChild):T},g=function(T){if(!T||T.key===void 0)throw new Error("unknown error");return T.rightChild?g(T.rightChild):T};this.front=function(){if(!this.empty()){var T=p(v);if(T.key===void 0||T.value===void 0)throw new Error("unknown error");return{key:T.key,value:T.value}}},this.back=function(){if(!this.empty()){var T=g(v);if(T.key===void 0||T.value===void 0)throw new Error("unknown error");return{key:T.key,value:T.value}}},this.forEach=function(T){var k,E,I=0;try{for(var A=o(this),M=A.next();!M.done;M=A.next())T(M.value,I++)}catch($){k={error:$}}finally{try{M&&!M.done&&(E=A.return)&&E.call(A)}finally{if(k)throw k.error}}},this.getElementByPos=function(T){var k,E;if(T<0||T>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var A=o(this),M=A.next();!M.done;M=A.next()){var $=M.value;if(I===T)return $;++I}}catch(U){k={error:U}}finally{try{M&&!M.done&&(E=A.return)&&E.call(A)}finally{if(k)throw k.error}}throw new Error("unknown Error")};var m=function(T,k){if(T&&T.key!==void 0&&T.value!==void 0){var E=d(T.key,k);return E===0?{key:T.key,value:T.value}:E<0?m(T.rightChild,k):m(T.leftChild,k)||{key:T.key,value:T.value}}};this.lowerBound=function(T){return m(v,T)};var y=function(T,k){if(T&&T.key!==void 0&&T.value!==void 0)return d(T.key,k)<=0?y(T.rightChild,k):y(T.leftChild,k)||{key:T.key,value:T.value}};this.upperBound=function(T){return y(v,T)};var b=function(T,k){if(T&&T.key!==void 0&&T.value!==void 0){var E=d(T.key,k);return E===0?{key:T.key,value:T.value}:E>0?b(T.leftChild,k):b(T.rightChild,k)||{key:T.key,value:T.value}}};this.reverseLowerBound=function(T){return b(v,T)};var w=function(T,k){if(T&&T.key!==void 0&&T.value!==void 0)return d(T.key,k)>=0?w(T.leftChild,k):w(T.rightChild,k)||{key:T.key,value:T.value}};this.reverseUpperBound=function(T){return w(v,T)};var x=function(T){var k=T.parent;if(!k){if(T===v)return;throw new Error("unknown error")}if(T.color!==s.default.TreeNodeColorType.red){var E=T.brother;if(!E)throw new Error("unknown error");if(T===k.leftChild)if(E.color===s.default.TreeNodeColorType.red){E.color=s.default.TreeNodeColorType.black,k.color=s.default.TreeNodeColorType.red;var I=k.rotateLeft();v===k&&(v=I),x(T)}else E.color===s.default.TreeNodeColorType.black&&(E.rightChild&&E.rightChild.color===s.default.TreeNodeColorType.red?(E.color=k.color,k.color=s.default.TreeNodeColorType.black,E.rightChild&&(E.rightChild.color=s.default.TreeNodeColorType.black),I=k.rotateLeft(),v===k&&(v=I),T.color=s.default.TreeNodeColorType.black):E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||!E.leftChild||E.leftChild.color!==s.default.TreeNodeColorType.red?E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||(E.color=s.default.TreeNodeColorType.red,x(k)):(E.color=s.default.TreeNodeColorType.red,E.leftChild&&(E.leftChild.color=s.default.TreeNodeColorType.black),I=E.rotateRight(),v===E&&(v=I),x(T)));else T===k.rightChild&&(E.color===s.default.TreeNodeColorType.red?(E.color=s.default.TreeNodeColorType.black,k.color=s.default.TreeNodeColorType.red,I=k.rotateRight(),v===k&&(v=I),x(T)):E.color===s.default.TreeNodeColorType.black&&(E.leftChild&&E.leftChild.color===s.default.TreeNodeColorType.red?(E.color=k.color,k.color=s.default.TreeNodeColorType.black,E.leftChild&&(E.leftChild.color=s.default.TreeNodeColorType.black),I=k.rotateRight(),v===k&&(v=I),T.color=s.default.TreeNodeColorType.black):E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||!E.rightChild||E.rightChild.color!==s.default.TreeNodeColorType.red?E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||(E.color=s.default.TreeNodeColorType.red,x(k)):(E.color=s.default.TreeNodeColorType.red,E.rightChild&&(E.rightChild.color=s.default.TreeNodeColorType.black),I=E.rotateLeft(),v===E&&(v=I),x(T))))}else T.color=s.default.TreeNodeColorType.black},C=function(T){for(var k=T;k.leftChild||k.rightChild;){if(k.rightChild){k=p(k.rightChild);var E=T.key;T.key=k.key,k.key=E;var I=T.value;T.value=k.value,k.value=I,T=k}k.leftChild&&(k=g(k.leftChild),E=T.key,T.key=k.key,k.key=E,I=T.value,T.value=k.value,k.value=I,T=k)}x(k),k&&k.remove(),--h,v.color=s.default.TreeNodeColorType.black},S=function(T,k){return!(!T||T.key===void 0)&&(!!S(T.leftChild,k)||!!k(T)||S(T.rightChild,k))};this.eraseElementByPos=function(T){if(T<0||T>=h)throw new Error("pos must more than 0 and less than set's size");var k=0;S(v,function(E){return T===k?(C(E),!0):(++k,!1)})},this.eraseElementByKey=function(T){if(!this.empty()){var k=N(v,T);k!==void 0&&k.key!==void 0&&d(k.key,T)===0&&C(k)}};var _=function(T,k){if(!T||T.key===void 0)throw new Error("unknown error");var E=d(k,T.key);return E<0?T.leftChild?_(T.leftChild,k):(T.leftChild=new s.default,T.leftChild.parent=T,T.leftChild.brother=T.rightChild,T.rightChild&&(T.rightChild.brother=T.leftChild),T.leftChild):E>0?T.rightChild?_(T.rightChild,k):(T.rightChild=new s.default,T.rightChild.parent=T,T.rightChild.brother=T.leftChild,T.leftChild&&(T.leftChild.brother=T.rightChild),T.rightChild):T},O=function(T){var k=T.parent;if(!k){if(T===v)return;throw new Error("unknown error")}if(k.color!==s.default.TreeNodeColorType.black&&k.color===s.default.TreeNodeColorType.red){var E=k.brother,I=k.parent;if(!I)throw new Error("unknown error");if(E&&E.color===s.default.TreeNodeColorType.red)E.color=k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red,O(I);else if(!E||E.color===s.default.TreeNodeColorType.black)if(k===I.leftChild)if(T===k.leftChild){k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red;var A=I.rotateRight();I===v&&(v=A)}else T===k.rightChild&&(A=k.rotateLeft(),I===v&&(v=A),O(k));else k===I.rightChild&&(T===k.leftChild?(A=k.rotateRight(),I===v&&(v=A),O(k)):T===k.rightChild&&(k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red,A=I.rotateLeft(),I===v&&(v=A)))}};this.setElement=function(T,k){if(T==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(k!=null){if(this.empty())return++h,v.key=T,v.value=k,void(v.color=s.default.TreeNodeColorType.black);var E=_(v,T);E.key===void 0||d(E.key,T)!==0?(++h,E.key=T,E.value=k,O(E),v.color=s.default.TreeNodeColorType.black):E.value=k}else this.eraseElementByKey(T)};var N=function(T,k){if(T&&T.key!==void 0){var E=d(k,T.key);return E<0?N(T.leftChild,k):E>0?N(T.rightChild,k):T}};this.find=function(T){return!!N(v,T)},this.getElementByKey=function(T){var k=N(v,T);if((k==null?void 0:k.key)===void 0||(k==null?void 0:k.value)===void 0)throw new Error("unknown error");return k.value},this.union=function(T){var k=this;T.forEach(function(E){var I=E.key,A=E.value;return k.setElement(I,A)})},this.getHeight=function(){if(this.empty())return 0;var T=function(k){return k?Math.max(T(k.leftChild),T(k.rightChild))+1:1};return T(v)};var B=function(T){return i(this,function(k){switch(k.label){case 0:return T&&T.key!==void 0&&T.value!==void 0?[5,o(B(T.leftChild))]:[2];case 1:return k.sent(),[4,{key:T.key,value:T.value}];case 2:return k.sent(),[5,o(B(T.rightChild))];case 3:return k.sent(),[2]}})};this[Symbol.iterator]=function(){return B(v)},u.forEach(function(T){var k=T.key,E=T.value;return f.setElement(k,E)}),Object.freeze(this)}Object.freeze(c),a.default=c},{"../Base/TreeNode":25}],31:[function(n,r,a){function i(o,s){o===void 0&&(o=[]),s=s||function(h,v){return h>v?-1:h<v?1:0};var c=[];o.forEach(function(h){return c.push(h)});var u=c.length,d=function(h,v){if(h<0||h>=u)throw new Error("unknown error");if(v<0||v>=u)throw new Error("unknown error");var p=c[h];c[h]=c[v],c[v]=p},f=function(h){if(h<0||h>=u)throw new Error("unknown error");var v=2*h+1,p=2*h+2;v<u&&s(c[h],c[v])>0&&d(h,v),p<u&&s(c[h],c[p])>0&&d(h,p)};(function(){for(var h=Math.floor((u-1)/2);h>=0;--h)for(var v=h,p=2*v+1;p<u;){var g=p+1,m=p;if(g<u&&s(c[p],c[g])>0&&(m=g),s(c[v],c[m])<=0)break;d(v,m),p=2*(v=m)+1}})(),this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,c.length=0},this.push=function(h){if(c.push(h),++u!==1)for(var v=u-1;v>0;){var p=Math.floor((v-1)/2);if(s(c[p],h)<=0)break;f(p),v=p}},this.pop=function(){if(!this.empty())if(this.size()!==1){var h=c[u-1];--u;for(var v=0;v<this.size();){var p=2*v+1,g=2*v+2;if(p>=this.size())break;var m=p;if(g<this.size()&&s(c[p],c[g])>0&&(m=g),s(c[m],h)>=0)break;c[v]=c[m],v=m}c[v]=h}else--u},this.top=function(){return c[0]},Object.freeze(this)}Object.defineProperty(a,"__esModule",{value:!0}),Object.freeze(i),a.default=i},{}],32:[function(n,r,a){Object.defineProperty(a,"__esModule",{value:!0});var i=n("../LinkList/LinkList");function o(s){s===void 0&&(s=[]);var c=new i.default(s);this.size=function(){return c.size()},this.empty=function(){return c.empty()},this.clear=function(){c.clear()},this.push=function(u){c.pushBack(u)},this.pop=function(){c.popFront()},this.front=function(){return c.front()},Object.freeze(this)}Object.freeze(o),a.default=o},{"../LinkList/LinkList":29}],33:[function(n,r,a){var i=this&&this.__generator||function(u,d){var f,h,v,p,g={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(y){return function(b){return function(w){if(f)throw new TypeError("Generator is already executing.");for(;g;)try{if(f=1,h&&(v=2&w[0]?h.return:w[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,w[1])).done)return v;switch(h=0,v&&(w=[2&w[0],v.value]),w[0]){case 0:case 1:v=w;break;case 4:return g.label++,{value:w[1],done:!1};case 5:g.label++,h=w[1],w=[0];continue;case 7:w=g.ops.pop(),g.trys.pop();continue;default:if(!(v=(v=g.trys).length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){g=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){g.label=w[1];break}if(w[0]===6&&g.label<v[1]){g.label=v[1],v=w;break}if(v&&g.label<v[2]){g.label=v[2],g.ops.push(w);break}v[2]&&g.ops.pop(),g.trys.pop();continue}w=d.call(u,g)}catch(x){w=[6,x],h=0}finally{f=v=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([y,b])}}},o=this&&this.__values||function(u){var d=typeof Symbol=="function"&&Symbol.iterator,f=d&&u[d],h=0;if(f)return f.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&h>=u.length&&(u=void 0),{value:u&&u[h++],done:!u}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0});var s=n("../Base/TreeNode");function c(u,d){var f=this;u===void 0&&(u=[]),d=d||function(T,k){return T<k?-1:T>k?1:0};var h=0,v=new s.default;v.color=s.default.TreeNodeColorType.black,this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){h=0,v.key=void 0,v.leftChild=v.rightChild=v.brother=v.parent=void 0,v.color=s.default.TreeNodeColorType.black};var p=function(T){if(!T||T.key===void 0)throw new Error("unknown error");return T.leftChild?p(T.leftChild):T},g=function(T){if(!T||T.key===void 0)throw new Error("unknown error");return T.rightChild?g(T.rightChild):T};this.front=function(){if(!this.empty())return p(v).key},this.back=function(){if(!this.empty())return g(v).key},this.forEach=function(T){var k,E,I=0;try{for(var A=o(this),M=A.next();!M.done;M=A.next())T(M.value,I++)}catch($){k={error:$}}finally{try{M&&!M.done&&(E=A.return)&&E.call(A)}finally{if(k)throw k.error}}},this.getElementByPos=function(T){var k,E;if(T<0||T>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var A=o(this),M=A.next();!M.done;M=A.next()){var $=M.value;if(I===T)return $;++I}}catch(U){k={error:U}}finally{try{M&&!M.done&&(E=A.return)&&E.call(A)}finally{if(k)throw k.error}}throw new Error("unknown error")};var m=function(T){var k=T.parent;if(!k){if(T===v)return;throw new Error("unknown error")}if(T.color!==s.default.TreeNodeColorType.red){var E=T.brother;if(!E)throw new Error("unknown error");if(T===k.leftChild)if(E.color===s.default.TreeNodeColorType.red){E.color=s.default.TreeNodeColorType.black,k.color=s.default.TreeNodeColorType.red;var I=k.rotateLeft();v===k&&(v=I),m(T)}else E.color===s.default.TreeNodeColorType.black&&(E.rightChild&&E.rightChild.color===s.default.TreeNodeColorType.red?(E.color=k.color,k.color=s.default.TreeNodeColorType.black,E.rightChild&&(E.rightChild.color=s.default.TreeNodeColorType.black),I=k.rotateLeft(),v===k&&(v=I),T.color=s.default.TreeNodeColorType.black):E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||!E.leftChild||E.leftChild.color!==s.default.TreeNodeColorType.red?E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||(E.color=s.default.TreeNodeColorType.red,m(k)):(E.color=s.default.TreeNodeColorType.red,E.leftChild&&(E.leftChild.color=s.default.TreeNodeColorType.black),I=E.rotateRight(),v===E&&(v=I),m(T)));else T===k.rightChild&&(E.color===s.default.TreeNodeColorType.red?(E.color=s.default.TreeNodeColorType.black,k.color=s.default.TreeNodeColorType.red,I=k.rotateRight(),v===k&&(v=I),m(T)):E.color===s.default.TreeNodeColorType.black&&(E.leftChild&&E.leftChild.color===s.default.TreeNodeColorType.red?(E.color=k.color,k.color=s.default.TreeNodeColorType.black,E.leftChild&&(E.leftChild.color=s.default.TreeNodeColorType.black),I=k.rotateRight(),v===k&&(v=I),T.color=s.default.TreeNodeColorType.black):E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||!E.rightChild||E.rightChild.color!==s.default.TreeNodeColorType.red?E.leftChild&&E.leftChild.color!==s.default.TreeNodeColorType.black||E.rightChild&&E.rightChild.color!==s.default.TreeNodeColorType.black||(E.color=s.default.TreeNodeColorType.red,m(k)):(E.color=s.default.TreeNodeColorType.red,E.rightChild&&(E.rightChild.color=s.default.TreeNodeColorType.black),I=E.rotateLeft(),v===E&&(v=I),m(T))))}else T.color=s.default.TreeNodeColorType.black},y=function(T){for(var k=T;k.leftChild||k.rightChild;){if(k.rightChild){k=p(k.rightChild);var E=T.key;T.key=k.key,k.key=E,T=k}k.leftChild&&(k=g(k.leftChild),E=T.key,T.key=k.key,k.key=E,T=k)}m(k),k&&k.remove(),--h,v.color=s.default.TreeNodeColorType.black},b=function(T,k){return!(!T||T.key===void 0)&&(!!b(T.leftChild,k)||!!k(T)||b(T.rightChild,k))};this.eraseElementByPos=function(T){if(T<0||T>=h)throw new Error("pos must more than 0 and less than set's size");var k=0;b(v,function(E){return T===k?(y(E),!0):(++k,!1)})},this.eraseElementByValue=function(T){if(!this.empty()){var k=C(v,T);k!==void 0&&k.key!==void 0&&d(k.key,T)===0&&y(k)}};var w=function(T,k){if(!T||T.key===void 0)throw new Error("unknown error");var E=d(k,T.key);return E<0?T.leftChild?w(T.leftChild,k):(T.leftChild=new s.default,T.leftChild.parent=T,T.leftChild.brother=T.rightChild,T.rightChild&&(T.rightChild.brother=T.leftChild),T.leftChild):E>0?T.rightChild?w(T.rightChild,k):(T.rightChild=new s.default,T.rightChild.parent=T,T.rightChild.brother=T.leftChild,T.leftChild&&(T.leftChild.brother=T.rightChild),T.rightChild):T},x=function(T){var k=T.parent;if(!k){if(T===v)return;throw new Error("unknown error")}if(k.color!==s.default.TreeNodeColorType.black&&k.color===s.default.TreeNodeColorType.red){var E=k.brother,I=k.parent;if(!I)throw new Error("unknown error");if(E&&E.color===s.default.TreeNodeColorType.red)E.color=k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red,x(I);else if(!E||E.color===s.default.TreeNodeColorType.black)if(k===I.leftChild)if(T===k.leftChild){k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red;var A=I.rotateRight();I===v&&(v=A)}else T===k.rightChild&&(A=k.rotateLeft(),I===v&&(v=A),x(k));else k===I.rightChild&&(T===k.leftChild?(A=k.rotateRight(),I===v&&(v=A),x(k)):T===k.rightChild&&(k.color=s.default.TreeNodeColorType.black,I.color=s.default.TreeNodeColorType.red,A=I.rotateLeft(),I===v&&(v=A)))}};this.insert=function(T){if(T==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++h,v.key=T,void(v.color=s.default.TreeNodeColorType.black);var k=w(v,T);k.key!==void 0&&d(k.key,T)===0||(++h,k.key=T,x(k),v.color=s.default.TreeNodeColorType.black)};var C=function(T,k){if(T&&T.key!==void 0){var E=d(k,T.key);return E<0?C(T.leftChild,k):E>0?C(T.rightChild,k):T}};this.find=function(T){var k=C(v,T);return k!==void 0&&k.key!==void 0&&d(k.key,T)===0};var S=function(T,k){if(T&&T.key!==void 0){var E=d(T.key,k);if(E===0)return T.key;if(E<0)return S(T.rightChild,k);var I=S(T.leftChild,k);return I!==void 0?I:T.key}};this.lowerBound=function(T){return S(v,T)};var _=function(T,k){if(T&&T.key!==void 0){if(d(T.key,k)<=0)return _(T.rightChild,k);var E=_(T.leftChild,k);return E!==void 0?E:T.key}};this.upperBound=function(T){return _(v,T)};var O=function(T,k){if(T&&T.key!==void 0){var E=d(T.key,k);if(E===0)return T.key;if(E>0)return O(T.leftChild,k);var I=O(T.rightChild,k);return I!==void 0?I:T.key}};this.reverseLowerBound=function(T){return O(v,T)};var N=function(T,k){if(T&&T.key!==void 0){if(d(T.key,k)>=0)return N(T.leftChild,k);var E=N(T.rightChild,k);return E!==void 0?E:T.key}};this.reverseUpperBound=function(T){return N(v,T)},this.union=function(T){var k=this;T.forEach(function(E){return k.insert(E)})},this.getHeight=function(){if(this.empty())return 0;var T=function(k){return k?Math.max(T(k.leftChild),T(k.rightChild))+1:1};return T(v)};var B=function(T){return i(this,function(k){switch(k.label){case 0:return T&&T.key!==void 0?[5,o(B(T.leftChild))]:[2];case 1:return k.sent(),[4,T.key];case 2:return k.sent(),[5,o(B(T.rightChild))];case 3:return k.sent(),[2]}})};this[Symbol.iterator]=function(){return B(v)},u.forEach(function(T){return f.insert(T)}),Object.freeze(this)}Object.freeze(c),a.default=c},{"../Base/TreeNode":25}],34:[function(n,r,a){function i(o){var s=this;o===void 0&&(o=[]);var c=0,u=[];this.size=function(){return c},this.empty=function(){return c===0},this.clear=function(){c=0,u.length=0},this.push=function(d){u.push(d),++c},this.pop=function(){u.pop(),c>0&&--c},this.top=function(){return u[c-1]},o.forEach(function(d){return s.push(d)}),Object.freeze(this)}Object.defineProperty(a,"__esModule",{value:!0}),Object.freeze(i),a.default=i},{}],35:[function(n,r,a){var i=this&&this.__generator||function(d,f){var h,v,p,g,m={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(w){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,v&&(p=2&x[0]?v.return:x[0]?v.throw||((p=v.return)&&p.call(v),0):v.next)&&!(p=p.call(v,x[1])).done)return p;switch(v=0,p&&(x=[2&x[0],p.value]),x[0]){case 0:case 1:p=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,v=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(!(p=(p=m.trys).length>0&&p[p.length-1])&&(x[0]===6||x[0]===2)){m=0;continue}if(x[0]===3&&(!p||x[1]>p[0]&&x[1]<p[3])){m.label=x[1];break}if(x[0]===6&&m.label<p[1]){m.label=p[1],p=x;break}if(p&&m.label<p[2]){m.label=p[2],m.ops.push(x);break}p[2]&&m.ops.pop(),m.trys.pop();continue}x=f.call(d,m)}catch(C){x=[6,C],v=0}finally{h=p=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([b,w])}}},o=this&&this.__read||function(d,f){var h=typeof Symbol=="function"&&d[Symbol.iterator];if(!h)return d;var v,p,g=h.call(d),m=[];try{for(;(f===void 0||f-- >0)&&!(v=g.next()).done;)m.push(v.value)}catch(y){p={error:y}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return m},s=this&&this.__spreadArray||function(d,f,h){if(h||arguments.length===2)for(var v,p=0,g=f.length;p<g;p++)!v&&p in f||(v||(v=Array.prototype.slice.call(f,0,p)),v[p]=f[p]);return d.concat(v||Array.prototype.slice.call(f))},c=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&d[f],v=0;if(h)return h.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&v>=d.length&&(d=void 0),{value:d&&d[v++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(d){var f=this;d===void 0&&(d=[]);var h=0,v=[];this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){h=0,v.length=0},this.front=function(){if(!this.empty())return v[0]},this.back=function(){if(!this.empty())return v[h-1]},this.forEach=function(p){v.forEach(p)},this.getElementByPos=function(p){if(p<0||p>=h)throw new Error("pos must more than 0 and less than vector's size");return v[p]},this.eraseElementByPos=function(p){if(p<0||p>=h)throw new Error("pos must more than 0 and less than vector's size");for(var g=p;g<h-1;++g)v[g]=v[g+1];this.popBack()},this.eraseElementByValue=function(p){var g=[];this.forEach(function(y){y!==p&&g.push(y)}),g.forEach(function(y,b){v[b]=y});for(var m=g.length;h>m;)this.popBack()},this.pushBack=function(p){v.push(p),++h},this.popBack=function(){v.pop(),h>0&&--h},this.setElementByPos=function(p,g){if(p<0||p>=h)throw new Error("pos must more than 0 and less than vector's size");v[p]=g},this.insert=function(p,g,m){if(m===void 0&&(m=1),p<0||p>h)throw new Error("pos must more than 0 and less than or equal to vector's size");v.splice.apply(v,s([p,0],o(new Array(m).fill(g)),!1)),h+=m},this.find=function(p){return v.includes(p)},this.reverse=function(){v.reverse()},this.unique=function(){var p,g=[];this.forEach(function(y,b){b!==0&&y===p||(g.push(y),p=y)}),g.forEach(function(y,b){v[b]=y});for(var m=g.length;h>m;)this.popBack()},this.sort=function(p){v.sort(p)},this[Symbol.iterator]=function(){return function(){return i(this,function(p){switch(p.label){case 0:return[5,c(v)];case 1:return[2,p.sent()]}})}()},d.forEach(function(p){return f.pushBack(p)}),Object.freeze(this)}Object.defineProperty(a,"__esModule",{value:!0}),Object.freeze(u),a.default=u},{}],36:[function(n,r,a){Object.defineProperty(a,"__esModule",{value:!0}),a.HashMap=a.HashSet=a.Map=a.Set=a.PriorityQueue=a.Deque=a.LinkList=a.Queue=a.Stack=a.Vector=void 0;var i=n("./Vector/Vector");a.Vector=i.default;var o=n("./Stack/Stack");a.Stack=o.default;var s=n("./Queue/Queue");a.Queue=s.default;var c=n("./LinkList/LinkList");a.LinkList=c.default;var u=n("./Deque/Deque");a.Deque=u.default;var d=n("./PriorityQueue/PriorityQueue");a.PriorityQueue=d.default;var f=n("./Set/Set");a.Set=f.default;var h=n("./Map/Map");a.Map=h.default;var v=n("./HashSet/HashSet");a.HashSet=v.default;var p=n("./HashMap/HashMap");a.HashMap=p.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(n,r,a){const i=n("yallist"),o=Symbol("max"),s=Symbol("length"),c=Symbol("lengthCalculator"),u=Symbol("allowStale"),d=Symbol("maxAge"),f=Symbol("dispose"),h=Symbol("noDisposeOnSet"),v=Symbol("lruList"),p=Symbol("cache"),g=Symbol("updateAgeOnGet"),m=()=>1,y=(_,O,N)=>{const B=_[p].get(O);if(B){const T=B.value;if(b(_,T)){if(x(_,B),!_[u])return}else N&&(_[g]&&(B.value.now=Date.now()),_[v].unshiftNode(B));return T.value}},b=(_,O)=>{if(!O||!O.maxAge&&!_[d])return!1;const N=Date.now()-O.now;return O.maxAge?N>O.maxAge:_[d]&&N>_[d]},w=_=>{if(_[s]>_[o])for(let O=_[v].tail;_[s]>_[o]&&O!==null;){const N=O.prev;x(_,O),O=N}},x=(_,O)=>{if(O){const N=O.value;_[f]&&_[f](N.key,N.value),_[s]-=N.length,_[p].delete(N.key),_[v].removeNode(O)}};class C{constructor(O,N,B,T,k){this.key=O,this.value=N,this.length=B,this.now=T,this.maxAge=k||0}}const S=(_,O,N,B)=>{let T=N.value;b(_,T)&&(x(_,N),_[u]||(T=void 0)),T&&O.call(B,T.value,T.key,_)};r.exports=class{constructor(_){if(typeof _=="number"&&(_={max:_}),_||(_={}),_.max&&(typeof _.max!="number"||_.max<0))throw new TypeError("max must be a non-negative number");this[o]=_.max||1/0;const O=_.length||m;if(this[c]=typeof O!="function"?m:O,this[u]=_.stale||!1,_.maxAge&&typeof _.maxAge!="number")throw new TypeError("maxAge must be a number");this[d]=_.maxAge||0,this[f]=_.dispose,this[h]=_.noDisposeOnSet||!1,this[g]=_.updateAgeOnGet||!1,this.reset()}set max(_){if(typeof _!="number"||_<0)throw new TypeError("max must be a non-negative number");this[o]=_||1/0,w(this)}get max(){return this[o]}set allowStale(_){this[u]=!!_}get allowStale(){return this[u]}set maxAge(_){if(typeof _!="number")throw new TypeError("maxAge must be a non-negative number");this[d]=_,w(this)}get maxAge(){return this[d]}set lengthCalculator(_){typeof _!="function"&&(_=m),_!==this[c]&&(this[c]=_,this[s]=0,this[v].forEach(O=>{O.length=this[c](O.value,O.key),this[s]+=O.length})),w(this)}get lengthCalculator(){return this[c]}get length(){return this[s]}get itemCount(){return this[v].length}rforEach(_,O){O=O||this;for(let N=this[v].tail;N!==null;){const B=N.prev;S(this,_,N,O),N=B}}forEach(_,O){O=O||this;for(let N=this[v].head;N!==null;){const B=N.next;S(this,_,N,O),N=B}}keys(){return this[v].toArray().map(_=>_.key)}values(){return this[v].toArray().map(_=>_.value)}reset(){this[f]&&this[v]&&this[v].length&&this[v].forEach(_=>this[f](_.key,_.value)),this[p]=new Map,this[v]=new i,this[s]=0}dump(){return this[v].map(_=>!b(this,_)&&{k:_.key,v:_.value,e:_.now+(_.maxAge||0)}).toArray().filter(_=>_)}dumpLru(){return this[v]}set(_,O,N){if((N=N||this[d])&&typeof N!="number")throw new TypeError("maxAge must be a number");const B=N?Date.now():0,T=this[c](O,_);if(this[p].has(_)){if(T>this[o])return x(this,this[p].get(_)),!1;const E=this[p].get(_).value;return this[f]&&(this[h]||this[f](_,E.value)),E.now=B,E.maxAge=N,E.value=O,this[s]+=T-E.length,E.length=T,this.get(_),w(this),!0}const k=new C(_,O,T,B,N);return k.length>this[o]?(this[f]&&this[f](_,O),!1):(this[s]+=k.length,this[v].unshift(k),this[p].set(_,this[v].head),w(this),!0)}has(_){if(!this[p].has(_))return!1;const O=this[p].get(_).value;return!b(this,O)}get(_){return y(this,_,!0)}peek(_){return y(this,_,!1)}pop(){const _=this[v].tail;return _?(x(this,_),_.value):null}del(_){x(this,this[p].get(_))}load(_){this.reset();const O=Date.now();for(let N=_.length-1;N>=0;N--){const B=_[N],T=B.e||0;if(T===0)this.set(B.k,B.v);else{const k=T-O;k>0&&this.set(B.k,B.v,k)}}}prune(){this[p].forEach((_,O)=>y(this,O,!1))}}},{yallist:83}],38:[function(n,r,a){(function(i){(function(){const o=r.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.codes={};for(const c in o.types){const u=o.types[c];o.codes[u]=c}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=i.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=i.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=i.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(const c in o.properties){const u=o.properties[c];o.propertiesCodes[u]=c}function s(c){return[0,1,2].map(u=>[0,1].map(d=>[0,1].map(f=>{const h=i.alloc(1);return h.writeUInt8(o.codes[c]<<o.CMD_SHIFT|(d?o.DUP_MASK:0)|u<<o.QOS_SHIFT|f,0,!0),h})))}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},o.PUBLISH_HEADER=s("publish"),o.SUBSCRIBE_HEADER=s("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=s("unsubscribe"),o.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},o.SUBACK_HEADER=i.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=i.from([3]),o.VERSION4=i.from([4]),o.VERSION5=i.from([5]),o.VERSION131=i.from([131]),o.VERSION132=i.from([132]),o.QOS=[0,1,2].map(c=>i.from([c])),o.EMPTY={pingreq:i.from([o.codes.pingreq<<4,0]),pingresp:i.from([o.codes.pingresp<<4,0]),disconnect:i.from([o.codes.disconnect<<4,0])}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],39:[function(n,r,a){(function(i){(function(){const o=n("./writeToStream"),s=n("events");class c extends s{constructor(){super(),this._array=new Array(20),this._i=0}write(d){return this._array[this._i++]=d,!0}concat(){let d=0;const f=new Array(this._array.length),h=this._array;let v,p=0;for(v=0;v<h.length&&h[v]!==void 0;v++)typeof h[v]!="string"?f[v]=h[v].length:f[v]=i.byteLength(h[v]),d+=f[v];const g=i.allocUnsafe(d);for(v=0;v<h.length&&h[v]!==void 0;v++)typeof h[v]!="string"?(h[v].copy(g,p),p+=f[v]):(g.write(h[v],p),p+=f[v]);return g}}r.exports=function(u,d){const f=new c;return o(u,f,d),f.concat()}}).call(this)}).call(this,n("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(n,r,a){a.parser=n("./parser").parser,a.generate=n("./generate"),a.writeToStream=n("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(n,r,a){(function(i){(function(){const s={},c=i.isBuffer(i.from([1,2]).subarray(0,1));function u(d){const f=i.allocUnsafe(2);return f.writeUInt8(d>>8,0),f.writeUInt8(255&d,1),f}r.exports={cache:s,generateCache:function(){for(let d=0;d<65536;d++)s[d]=u(d)},generateNumber:u,genBufVariableByteInt:function(d){let f=0,h=0;const v=i.allocUnsafe(4);do f=d%128|0,(d=d/128|0)>0&&(f|=128),v.writeUInt8(f,h++);while(d>0&&h<4);return d>0&&(h=0),c?v.subarray(0,h):v.slice(0,h)},generate4ByteBuffer:function(d){const f=i.allocUnsafe(4);return f.writeUInt32BE(d,0),f}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],42:[function(n,r,a){r.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(n,r,a){const i=n("bl"),o=n("events"),s=n("./packet"),c=n("./constants"),u=n("debug")("mqtt-packet:parser");class d extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof d?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new d().parser(h)}_resetState(){u("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=i(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),u("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,u("parse: state complete. _stateCounter is now: %d",this._stateCounter),u("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return u("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const h=this._list.readUInt8(0);return this.packet.cmd=c.types[h>>c.CMD_SHIFT],this.packet.retain=(h&c.RETAIN_MASK)!=0,this.packet.qos=h>>c.QOS_SHIFT&c.QOS_MASK,this.packet.dup=(h&c.DUP_MASK)!=0,u("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),u("_parseLength %d",h.value),!!h}_parsePayload(){u("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return u("_parsePayload complete result: %s",h),h}_parseConnect(){let h,v,p,g;u("_parseConnect");const m={},y=this.packet,b=this._parseString();if(b===null)return this._emitError(new Error("Cannot parse protocolId"));if(b!=="MQTT"&&b!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=b,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.username=this._list.readUInt8(this._pos)&c.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&c.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&c.WILL_FLAG_MASK,m.will&&(y.will={},y.will.retain=(this._list.readUInt8(this._pos)&c.WILL_RETAIN_MASK)!=0,y.will.qos=(this._list.readUInt8(this._pos)&c.WILL_QOS_MASK)>>c.WILL_QOS_SHIFT),y.clean=(this._list.readUInt8(this._pos)&c.CLEAN_SESSION_MASK)!=0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(y.properties=x)}const w=this._parseString();if(w===null)return this._emitError(new Error("Packet too short"));if(y.clientId=w,u("_parseConnect: packet.clientId: %s",y.clientId),m.will){if(y.protocolVersion===5){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(y.will.properties=x)}if((h=this._parseString())===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=h,u("_parseConnect: packet.will.topic: %s",y.will.topic),(v=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=v,u("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(m.username){if((g=this._parseString())===null)return this._emitError(new Error("Cannot parse username"));y.username=g,u("_parseConnect: packet.username: %s",y.username)}if(m.password){if((p=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse password"));y.password=p}return this.settings=y,u("_parseConnect: complete"),y}_parseConnack(){u("_parseConnack");const h=this.packet;if(this._list.length<1)return null;if(h.sessionPresent=!!(this._list.readUInt8(this._pos++)&c.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}u("_parseConnack: complete")}_parsePublish(){u("_parsePublish");const h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0)||this._parseMessageId()){if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}h.payload=this._list.slice(this._pos,h.length),u("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){u("_parseSubscribe");const h=this.packet;let v,p,g,m,y,b,w;if(h.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(h.subscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(h.properties=x)}for(;this._pos<h.length;){if((v=this._parseString())===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));g=(p=this._parseByte())&c.SUBSCRIBE_OPTIONS_QOS_MASK,b=(p>>c.SUBSCRIBE_OPTIONS_NL_SHIFT&c.SUBSCRIBE_OPTIONS_NL_MASK)!=0,y=(p>>c.SUBSCRIBE_OPTIONS_RAP_SHIFT&c.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,m=p>>c.SUBSCRIBE_OPTIONS_RH_SHIFT&c.SUBSCRIBE_OPTIONS_RH_MASK,w={topic:v,qos:g},this.settings.protocolVersion===5?(w.nl=b,w.rap=y,w.rh=m):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),u("_parseSubscribe: push subscription `%s` to subscription",w),h.subscriptions.push(w)}}}_parseSuback(){u("_parseSuback");const h=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){u("_parseUnsubscribe");const h=this.packet;if(h.unsubscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}for(;this._pos<h.length;){const v=this._parseString();if(v===null)return this._emitError(new Error("Cannot parse topic"));u("_parseUnsubscribe: push topic `%s` to unsubscriptions",v),h.unsubscriptions.push(v)}}}_parseUnsuback(){u("_parseUnsuback");const h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const v=this._parseProperties();for(Object.getOwnPropertyNames(v).length&&(h.properties=v),h.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){u("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(h.length>2?(h.reasonCode=this._parseByte(),u("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)):h.reasonCode=0,h.length>3)){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}return!0}_parseDisconnect(){const h=this.packet;if(u("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?h.reasonCode=this._parseByte():h.reasonCode=0;const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(h.properties=v)}return u("_parseDisconnect result: true"),!0}_parseAuth(){u("_parseAuth");const h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));h.reasonCode=this._parseByte();const v=this._parseProperties();return Object.getOwnPropertyNames(v).length&&(h.properties=v),u("_parseAuth: result: true"),!0}_parseMessageId(){const h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(u("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){const v=this._parseNum(),p=v+this._pos;if(v===-1||p>this._list.length||p>this.packet.length)return null;const g=this._list.toString("utf8",this._pos,p);return this._pos+=v,u("_parseString: result: %s",g),g}_parseStringPair(){return u("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const h=this._parseNum(),v=h+this._pos;if(h===-1||v>this._list.length||v>this.packet.length)return null;const p=this._list.slice(this._pos,v);return this._pos+=h,u("_parseBuffer: result: %o",p),p}_parseNum(){if(this._list.length-this._pos<2)return-1;const h=this._list.readUInt16BE(this._pos);return this._pos+=2,u("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const h=this._list.readUInt32BE(this._pos);return this._pos+=4,u("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){u("_parseVarByteNum");let v,p=0,g=1,m=0,y=!1;const b=this._pos?this._pos:0;for(;p<4&&b+p<this._list.length;){if(m+=g*((v=this._list.readUInt8(b+p++))&c.VARBYTEINT_MASK),g*=128,(v&c.VARBYTEINT_FIN_MASK)==0){y=!0;break}if(this._list.length<=p)break}return!y&&p===4&&this._list.length>=p&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=p),u("_parseVarByteNum: result: %o",y=!!y&&(h?{bytes:p,value:m}:m)),y}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),u("_parseByte: result: %o",h),h}_parseByType(h){switch(u("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){u("_parseProperties");const h=this._parseVarByteNum(),v=this._pos+h,p={};for(;this._pos<v;){const g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;const m=c.propertiesCodes[g];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m!=="userProperties")p[m]?Array.isArray(p[m])?p[m].push(this._parseByType(c.propertiesTypes[m])):(p[m]=[p[m]],p[m].push(this._parseByType(c.propertiesTypes[m]))):p[m]=this._parseByType(c.propertiesTypes[m]);else{p[m]||(p[m]=Object.create(null));const y=this._parseByType(c.propertiesTypes[m]);if(p[m][y.name])if(Array.isArray(p[m][y.name]))p[m][y.name].push(y.value);else{const b=p[m][y.name];p[m][y.name]=[b],p[m][y.name].push(y.value)}else p[m][y.name]=y.value}}return p}_newPacket(){return u("_newPacket"),this.packet&&(this._list.consume(this.packet.length),u("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),u("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(h){u("_emitError"),this.error=h,this.emit("error",h)}}r.exports=d},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(n,r,a){(function(i){(function(){const o=n("./constants"),s=i.allocUnsafe(0),c=i.from([0]),u=n("./numbers"),d=n("process-nextick-args").nextTick,f=n("debug")("mqtt-packet:writeToStream"),h=u.cache,v=u.generateNumber,p=u.generateCache,g=u.genBufVariableByteInt,m=u.generate4ByteBuffer;let y=N,b=!0;function w(U,F,j){switch(f("generate called"),F.cork&&(F.cork(),d(x,F)),b&&(b=!1,p()),f("generate: packet.cmd: %s",U.cmd),U.cmd){case"connect":return function(W,H,J){const Y=W||{},D=Y.protocolId||"MQTT";let q=Y.protocolVersion||4;const z=Y.will;let K=Y.clean;const P=Y.keepalive||0,R=Y.clientId||"",X=Y.username,ee=Y.password,re=Y.properties;K===void 0&&(K=!0);let ae=0;if(typeof D!="string"&&!i.isBuffer(D))return H.emit("error",new Error("Invalid protocolId")),!1;if(ae+=D.length+2,q!==3&&q!==4&&q!==5)return H.emit("error",new Error("Invalid protocol version")),!1;if(ae+=1,(typeof R=="string"||i.isBuffer(R))&&(R||q>=4)&&(R||K))ae+=i.byteLength(R)+2;else{if(q<4)return H.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*K==0)return H.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof P!="number"||P<0||P>65535||P%1!=0)return H.emit("error",new Error("Invalid keepalive")),!1;if(ae+=2,ae+=1,q===5){var oe=k(H,re);if(!oe)return!1;ae+=oe.length}if(z){if(typeof z!="object")return H.emit("error",new Error("Invalid will")),!1;if(!z.topic||typeof z.topic!="string")return H.emit("error",new Error("Invalid will topic")),!1;if(ae+=i.byteLength(z.topic)+2,ae+=2,z.payload){if(!(z.payload.length>=0))return H.emit("error",new Error("Invalid will payload")),!1;typeof z.payload=="string"?ae+=i.byteLength(z.payload):ae+=z.payload.length}var ce={};if(q===5){if(!(ce=k(H,z.properties)))return!1;ae+=ce.length}}let ge=!1;if(X!=null){if(!$(X))return H.emit("error",new Error("Invalid username")),!1;ge=!0,ae+=i.byteLength(X)+2}if(ee!=null){if(!ge)return H.emit("error",new Error("Username is required to use password")),!1;if(!$(ee))return H.emit("error",new Error("Invalid password")),!1;ae+=M(ee)+2}H.write(o.CONNECT_HEADER),S(H,ae),T(H,D),Y.bridgeMode&&(q+=128),H.write(q===131?o.VERSION131:q===132?o.VERSION132:q===4?o.VERSION4:q===5?o.VERSION5:o.VERSION3);let pe=0;return pe|=X!=null?o.USERNAME_MASK:0,pe|=ee!=null?o.PASSWORD_MASK:0,pe|=z&&z.retain?o.WILL_RETAIN_MASK:0,pe|=z&&z.qos?z.qos<<o.WILL_QOS_SHIFT:0,pe|=z?o.WILL_FLAG_MASK:0,pe|=K?o.CLEAN_SESSION_MASK:0,H.write(i.from([pe])),y(H,P),q===5&&oe.write(),T(H,R),z&&(q===5&&ce.write(),_(H,z.topic),T(H,z.payload)),X!=null&&T(H,X),ee!=null&&T(H,ee),!0}(U,F);case"connack":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=Y===5?D.reasonCode:D.returnCode,z=D.properties;let K=2;if(typeof q!="number")return H.emit("error",new Error("Invalid return code")),!1;let P=null;if(Y===5){if(!(P=k(H,z)))return!1;K+=P.length}return H.write(o.CONNACK_HEADER),S(H,K),H.write(D.sessionPresent?o.SESSIONPRESENT_HEADER:c),H.write(i.from([q])),P!=null&&P.write(),!0}(U,F,j);case"publish":return function(W,H,J){f("publish: packet: %o",W);const Y=J?J.protocolVersion:4,D=W||{},q=D.qos||0,z=D.retain?o.RETAIN_MASK:0,K=D.topic,P=D.payload||s,R=D.messageId,X=D.properties;let ee=0;if(typeof K=="string")ee+=i.byteLength(K)+2;else{if(!i.isBuffer(K))return H.emit("error",new Error("Invalid topic")),!1;ee+=K.length+2}if(i.isBuffer(P)?ee+=P.length:ee+=i.byteLength(P),q&&typeof R!="number")return H.emit("error",new Error("Invalid messageId")),!1;q&&(ee+=2);let re=null;if(Y===5){if(!(re=k(H,X)))return!1;ee+=re.length}return H.write(o.PUBLISH_HEADER[q][D.dup?1:0][z?1:0]),S(H,ee),y(H,M(K)),H.write(K),q>0&&y(H,R),re!=null&&re.write(),f("publish: payload: %o",P),H.write(P)}(U,F,j);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.cmd||"puback",z=D.messageId,K=D.dup&&q==="pubrel"?o.DUP_MASK:0;let P=0;const R=D.reasonCode,X=D.properties;let ee=Y===5?3:2;if(q==="pubrel"&&(P=1),typeof z!="number")return H.emit("error",new Error("Invalid messageId")),!1;let re=null;if(Y===5&&typeof X=="object"){if(!(re=E(H,X,J,ee)))return!1;ee+=re.length}return H.write(o.ACKS[q][P][K][0]),S(H,ee),y(H,z),Y===5&&H.write(i.from([R])),re!==null&&re.write(),!0}(U,F,j);case"subscribe":return function(W,H,J){f("subscribe: packet: ");const Y=J?J.protocolVersion:4,D=W||{},q=D.dup?o.DUP_MASK:0,z=D.messageId,K=D.subscriptions,P=D.properties;let R=0;if(typeof z!="number")return H.emit("error",new Error("Invalid messageId")),!1;R+=2;let X=null;if(Y===5){if(!(X=k(H,P)))return!1;R+=X.length}if(typeof K!="object"||!K.length)return H.emit("error",new Error("Invalid subscriptions")),!1;for(let re=0;re<K.length;re+=1){const ae=K[re].topic,oe=K[re].qos;if(typeof ae!="string")return H.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof oe!="number")return H.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(Y===5){if(typeof(K[re].nl||!1)!="boolean")return H.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(K[re].rap||!1)!="boolean")return H.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const pe=K[re].rh||0;if(typeof pe!="number"||pe>2)return H.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}R+=i.byteLength(ae)+2+1}f("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),H.write(o.SUBSCRIBE_HEADER[1][q?1:0][0]),S(H,R),y(H,z),X!==null&&X.write();let ee=!0;for(const re of K){const ae=re.topic,oe=re.qos,ce=+re.nl,ge=+re.rap,pe=re.rh;let _e;_(H,ae),_e=o.SUBSCRIBE_OPTIONS_QOS[oe],Y===5&&(_e|=ce?o.SUBSCRIBE_OPTIONS_NL:0,_e|=ge?o.SUBSCRIBE_OPTIONS_RAP:0,_e|=pe?o.SUBSCRIBE_OPTIONS_RH[pe]:0),ee=H.write(i.from([_e]))}return ee}(U,F,j);case"suback":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.messageId,z=D.granted,K=D.properties;let P=0;if(typeof q!="number")return H.emit("error",new Error("Invalid messageId")),!1;if(P+=2,typeof z!="object"||!z.length)return H.emit("error",new Error("Invalid qos vector")),!1;for(let X=0;X<z.length;X+=1){if(typeof z[X]!="number")return H.emit("error",new Error("Invalid qos vector")),!1;P+=1}let R=null;if(Y===5){if(!(R=E(H,K,J,P)))return!1;P+=R.length}return H.write(o.SUBACK_HEADER),S(H,P),y(H,q),R!==null&&R.write(),H.write(i.from(z))}(U,F,j);case"unsubscribe":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.messageId,z=D.dup?o.DUP_MASK:0,K=D.unsubscriptions,P=D.properties;let R=0;if(typeof q!="number")return H.emit("error",new Error("Invalid messageId")),!1;if(R+=2,typeof K!="object"||!K.length)return H.emit("error",new Error("Invalid unsubscriptions")),!1;for(let re=0;re<K.length;re+=1){if(typeof K[re]!="string")return H.emit("error",new Error("Invalid unsubscriptions")),!1;R+=i.byteLength(K[re])+2}let X=null;if(Y===5){if(!(X=k(H,P)))return!1;R+=X.length}H.write(o.UNSUBSCRIBE_HEADER[1][z?1:0][0]),S(H,R),y(H,q),X!==null&&X.write();let ee=!0;for(let re=0;re<K.length;re++)ee=_(H,K[re]);return ee}(U,F,j);case"unsuback":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.messageId,z=D.dup?o.DUP_MASK:0,K=D.granted,P=D.properties,R=D.cmd;let X=2;if(typeof q!="number")return H.emit("error",new Error("Invalid messageId")),!1;if(Y===5){if(typeof K!="object"||!K.length)return H.emit("error",new Error("Invalid qos vector")),!1;for(let re=0;re<K.length;re+=1){if(typeof K[re]!="number")return H.emit("error",new Error("Invalid qos vector")),!1;X+=1}}let ee=null;if(Y===5){if(!(ee=E(H,P,J,X)))return!1;X+=ee.length}return H.write(o.ACKS[R][0][z][0]),S(H,X),y(H,q),ee!==null&&ee.write(),Y===5&&H.write(i.from(K)),!0}(U,F,j);case"pingreq":case"pingresp":return function(W,H,J){return H.write(o.EMPTY[W.cmd])}(U,F);case"disconnect":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.reasonCode,z=D.properties;let K=Y===5?1:0,P=null;if(Y===5){if(!(P=E(H,z,J,K)))return!1;K+=P.length}return H.write(i.from([o.codes.disconnect<<4])),S(H,K),Y===5&&H.write(i.from([q])),P!==null&&P.write(),!0}(U,F,j);case"auth":return function(W,H,J){const Y=J?J.protocolVersion:4,D=W||{},q=D.reasonCode,z=D.properties;let K=Y===5?1:0;Y!==5&&H.emit("error",new Error("Invalid mqtt version for auth packet"));const P=E(H,z,J,K);return P?(K+=P.length,H.write(i.from([o.codes.auth<<4])),S(H,K),H.write(i.from([q])),P!==null&&P.write(),!0):!1}(U,F,j);default:return F.emit("error",new Error("Unknown command")),!1}}function x(U){U.uncork()}Object.defineProperty(w,"cacheNumbers",{get:()=>y===N,set(U){U?(h&&Object.keys(h).length!==0||(b=!0),y=N):(b=!1,y=B)}});const C={};function S(U,F){if(F>o.VARBYTEINT_MAX)return U.emit("error",new Error(`Invalid variable byte integer: ${F}`)),!1;let j=C[F];return j||(j=g(F),F<16384&&(C[F]=j)),f("writeVarByteInt: writing to stream: %o",j),U.write(j)}function _(U,F){const j=i.byteLength(F);return y(U,j),f("writeString: %s",F),U.write(F,"utf8")}function O(U,F,j){_(U,F),_(U,j)}function N(U,F){return f("writeNumberCached: number: %d",F),f("writeNumberCached: %o",h[F]),U.write(h[F])}function B(U,F){const j=v(F);return f("writeNumberGenerated: %o",j),U.write(j)}function T(U,F){typeof F=="string"?_(U,F):F?(y(U,F.length),U.write(F)):y(U,0)}function k(U,F){if(typeof F!="object"||F.length!=null)return{length:1,write(){A(U,{},0)}};let j=0;function W(H,J){let Y=0;switch(o.propertiesTypes[H]){case"byte":if(typeof J!="boolean")return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=2;break;case"int8":if(typeof J!="number"||J<0||J>255)return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=2;break;case"binary":if(J&&J===null)return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=1+i.byteLength(J)+2;break;case"int16":if(typeof J!="number"||J<0||J>65535)return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=3;break;case"int32":if(typeof J!="number"||J<0||J>4294967295)return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=5;break;case"var":if(typeof J!="number"||J<0||J>268435455)return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=1+i.byteLength(g(J));break;case"string":if(typeof J!="string")return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=3+i.byteLength(J.toString());break;case"pair":if(typeof J!="object")return U.emit("error",new Error(`Invalid ${H}: ${J}`)),!1;Y+=Object.getOwnPropertyNames(J).reduce((D,q)=>{const z=J[q];return Array.isArray(z)?D+=z.reduce((K,P)=>K+=3+i.byteLength(q.toString())+2+i.byteLength(P.toString()),0):D+=3+i.byteLength(q.toString())+2+i.byteLength(J[q].toString()),D},0);break;default:return U.emit("error",new Error(`Invalid property ${H}: ${J}`)),!1}return Y}if(F)for(const H in F){let J=0,Y=0;const D=F[H];if(Array.isArray(D))for(let q=0;q<D.length;q++){if(!(Y=W(H,D[q])))return!1;J+=Y}else{if(!(Y=W(H,D)))return!1;J=Y}if(!J)return!1;j+=J}return{length:i.byteLength(g(j))+j,write(){A(U,F,j)}}}function E(U,F,j,W){const H=["reasonString","userProperties"],J=j&&j.properties&&j.properties.maximumPacketSize?j.properties.maximumPacketSize:0;let Y=k(U,F);if(J)for(;W+Y.length>J;){const D=H.shift();if(!D||!F[D])return!1;delete F[D],Y=k(U,F)}return Y}function I(U,F,j){switch(o.propertiesTypes[F]){case"byte":U.write(i.from([o.properties[F]])),U.write(i.from([+j]));break;case"int8":U.write(i.from([o.properties[F]])),U.write(i.from([j]));break;case"binary":U.write(i.from([o.properties[F]])),T(U,j);break;case"int16":U.write(i.from([o.properties[F]])),y(U,j);break;case"int32":U.write(i.from([o.properties[F]])),function(W,H){const J=m(H);f("write4ByteNumber: %o",J),W.write(J)}(U,j);break;case"var":U.write(i.from([o.properties[F]])),S(U,j);break;case"string":U.write(i.from([o.properties[F]])),_(U,j);break;case"pair":Object.getOwnPropertyNames(j).forEach(W=>{const H=j[W];Array.isArray(H)?H.forEach(J=>{U.write(i.from([o.properties[F]])),O(U,W.toString(),J.toString())}):(U.write(i.from([o.properties[F]])),O(U,W.toString(),H.toString()))});break;default:return U.emit("error",new Error(`Invalid property ${F} value: ${j}`)),!1}}function A(U,F,j){S(U,j);for(const W in F)if(Object.prototype.hasOwnProperty.call(F,W)&&F[W]!==null){const H=F[W];if(Array.isArray(H))for(let J=0;J<H.length;J++)I(U,W,H[J]);else I(U,W,H)}}function M(U){return U?U instanceof i?U.length:i.byteLength(U):0}function $(U){return typeof U=="string"||U instanceof i}r.exports=w}).call(this)}).call(this,n("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(n,r,a){var i=1e3,o=60*i,s=60*o,c=24*s,u=7*c,d=365.25*c;function f(h,v,p,g){var m=v>=1.5*p;return Math.round(h/p)+" "+g+(m?"s":"")}r.exports=function(h,v){v=v||{};var p=typeof h;if(p==="string"&&h.length>0)return function(g){if(!((g=String(g)).length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(m){var y=parseFloat(m[1]);switch((m[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*d;case"weeks":case"week":case"w":return y*u;case"days":case"day":case"d":return y*c;case"hours":case"hour":case"hrs":case"hr":case"h":return y*s;case"minutes":case"minute":case"mins":case"min":case"m":return y*o;case"seconds":case"second":case"secs":case"sec":case"s":return y*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}(h);if(p==="number"&&isFinite(h))return v.long?function(g){var m=Math.abs(g);return m>=c?f(g,m,c,"day"):m>=s?f(g,m,s,"hour"):m>=o?f(g,m,o,"minute"):m>=i?f(g,m,i,"second"):g+" ms"}(h):function(g){var m=Math.abs(g);return m>=c?Math.round(g/c)+"d":m>=s?Math.round(g/s)+"h":m>=o?Math.round(g/o)+"m":m>=i?Math.round(g/i)+"s":g+"ms"}(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},{}],46:[function(n,r,a){const i=n("./lib/number-allocator.js");r.exports.NumberAllocator=i},{"./lib/number-allocator.js":47}],47:[function(n,r,a){const i=n("js-sdsl").Set,o=n("debug")("number-allocator:trace"),s=n("debug")("number-allocator:error");function c(d,f){this.low=d,this.high=f}function u(d,f){if(!(this instanceof u))return new u(d,f);this.min=d,this.max=f,this.ss=new i([],(h,v)=>h.compare(v)),o("Create"),this.clear()}c.prototype.equals=function(d){return this.low===d.low&&this.high===d.high},c.prototype.compare=function(d){return this.low<d.low&&this.high<d.low?-1:d.low<this.low&&d.high<this.low?1:0},u.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},u.prototype.alloc=function(){if(this.ss.size()===0)return o("alloc():empty"),null;const d=this.ss.front(),f=d.low;return f+1<=d.high?++d.low:this.ss.eraseElementByPos(0),o("alloc():"+f),f},u.prototype.use=function(d){const f=new c(d,d),h=this.ss.lowerBound(f);if(h){if(h.equals(f))return this.ss.eraseElementByValue(h),o("use():"+d),!0;if(h.low>d)return!1;if(h.low===d)return++h.low,o("use():"+d),!0;if(h.high===d)return--h.high,o("use():"+d),!0;const v=h.low;return h.low=d+1,this.ss.insert(new c(v,d-1)),o("use():"+d),!0}return o("use():failed"),!1},u.prototype.free=function(d){if(d<this.min||d>this.max)return void s("free():"+d+" is out of range");const f=new c(d,d),h=this.ss.lowerBound(f);if(h){if(h.low<=d&&d<=h.high)return void s("free():"+d+" has already been vacant");if(h===this.ss.front())d+1===h.low?--h.low:this.ss.insert(f);else{const v=this.ss.reverseLowerBound(f);v.high+1===d?d+1===h.low?(this.ss.eraseElementByValue(v),h.low=v.low):v.high=d:d+1===h.low?h.low=d:this.ss.insert(f)}}else{if(h===this.ss.front())return void this.ss.insert(f);const v=this.ss.reverseLowerBound(f);v.high+1===d?v.high=d:this.ss.insert(f)}o("free():"+d)},u.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new c(this.min,this.max))},u.prototype.intervalCount=function(){return this.ss.size()},u.prototype.dump=function(){console.log("length:"+this.ss.size());for(const d of this.ss)console.log(d)},r.exports=u},{debug:18,"js-sdsl":36}],48:[function(n,r,a){var i=n("wrappy");function o(c){var u=function(){return u.called?u.value:(u.called=!0,u.value=c.apply(this,arguments))};return u.called=!1,u}function s(c){var u=function(){if(u.called)throw new Error(u.onceError);return u.called=!0,u.value=c.apply(this,arguments)},d=c.name||"Function wrapped with `once`";return u.onceError=d+" shouldn't be called more than once",u.called=!1,u}r.exports=i(o),r.exports.strict=i(s),o.proto=o(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})})},{wrappy:79}],49:[function(n,r,a){(function(i){(function(){i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?r.exports={nextTick:function(o,s,c,u){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var d,f,h=arguments.length;switch(h){case 0:case 1:return i.nextTick(o);case 2:return i.nextTick(function(){o.call(null,s)});case 3:return i.nextTick(function(){o.call(null,s,c)});case 4:return i.nextTick(function(){o.call(null,s,c,u)});default:for(d=new Array(h-1),f=0;f<d.length;)d[f++]=arguments[f];return i.nextTick(function(){o.apply(null,d)})}}}:r.exports=i}).call(this)}).call(this,n("_process"))},{_process:50}],50:[function(n,r,a){var i,o,s=r.exports={};function c(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function d(w){if(i===setTimeout)return setTimeout(w,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(w,0);try{return i(w,0)}catch{try{return i.call(null,w,0)}catch{return i.call(this,w,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:c}catch{i=c}try{o=typeof clearTimeout=="function"?clearTimeout:u}catch{o=u}})();var f,h=[],v=!1,p=-1;function g(){v&&f&&(v=!1,f.length?h=f.concat(h):p=-1,h.length&&m())}function m(){if(!v){var w=d(g);v=!0;for(var x=h.length;x;){for(f=h,h=[];++p<x;)f&&f[p].run();p=-1,x=h.length}f=null,v=!1,function(C){if(o===clearTimeout)return clearTimeout(C);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(C);try{o(C)}catch{try{return o.call(null,C)}catch{return o.call(this,C)}}}(w)}}function y(w,x){this.fun=w,this.array=x}function b(){}s.nextTick=function(w){var x=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)x[C-1]=arguments[C];h.push(new y(w,x)),h.length!==1||v||d(m)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(w){return[]},s.binding=function(w){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(w){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],51:[function(n,r,a){(function(i){(function(){(function(o){var s=typeof a=="object"&&a&&!a.nodeType&&a,c=typeof r=="object"&&r&&!r.nodeType&&r,u=typeof i=="object"&&i;u.global!==u&&u.window!==u&&u.self!==u||(o=u);var d,f,h=2147483647,v=36,p=1,g=26,m=38,y=700,b=72,w=128,x="-",C=/^xn--/,S=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=v-p,B=Math.floor,T=String.fromCharCode;function k(W){throw new RangeError(O[W])}function E(W,H){for(var J=W.length,Y=[];J--;)Y[J]=H(W[J]);return Y}function I(W,H){var J=W.split("@"),Y="";return J.length>1&&(Y=J[0]+"@",W=J[1]),Y+E((W=W.replace(_,".")).split("."),H).join(".")}function A(W){for(var H,J,Y=[],D=0,q=W.length;D<q;)(H=W.charCodeAt(D++))>=55296&&H<=56319&&D<q?(64512&(J=W.charCodeAt(D++)))==56320?Y.push(((1023&H)<<10)+(1023&J)+65536):(Y.push(H),D--):Y.push(H);return Y}function M(W){return E(W,function(H){var J="";return H>65535&&(J+=T((H-=65536)>>>10&1023|55296),H=56320|1023&H),J+=T(H)}).join("")}function $(W,H){return W+22+75*(W<26)-((H!=0)<<5)}function U(W,H,J){var Y=0;for(W=J?B(W/y):W>>1,W+=B(W/H);W>N*g>>1;Y+=v)W=B(W/N);return B(Y+(N+1)*W/(W+m))}function F(W){var H,J,Y,D,q,z,K,P,R,X,ee,re=[],ae=W.length,oe=0,ce=w,ge=b;for((J=W.lastIndexOf(x))<0&&(J=0),Y=0;Y<J;++Y)W.charCodeAt(Y)>=128&&k("not-basic"),re.push(W.charCodeAt(Y));for(D=J>0?J+1:0;D<ae;){for(q=oe,z=1,K=v;D>=ae&&k("invalid-input"),((P=(ee=W.charCodeAt(D++))-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:v)>=v||P>B((h-oe)/z))&&k("overflow"),oe+=P*z,!(P<(R=K<=ge?p:K>=ge+g?g:K-ge));K+=v)z>B(h/(X=v-R))&&k("overflow"),z*=X;ge=U(oe-q,H=re.length+1,q==0),B(oe/H)>h-ce&&k("overflow"),ce+=B(oe/H),oe%=H,re.splice(oe++,0,ce)}return M(re)}function j(W){var H,J,Y,D,q,z,K,P,R,X,ee,re,ae,oe,ce,ge=[];for(re=(W=A(W)).length,H=w,J=0,q=b,z=0;z<re;++z)(ee=W[z])<128&&ge.push(T(ee));for(Y=D=ge.length,D&&ge.push(x);Y<re;){for(K=h,z=0;z<re;++z)(ee=W[z])>=H&&ee<K&&(K=ee);for(K-H>B((h-J)/(ae=Y+1))&&k("overflow"),J+=(K-H)*ae,H=K,z=0;z<re;++z)if((ee=W[z])<H&&++J>h&&k("overflow"),ee==H){for(P=J,R=v;!(P<(X=R<=q?p:R>=q+g?g:R-q));R+=v)ce=P-X,oe=v-X,ge.push(T($(X+ce%oe,0))),P=B(ce/oe);ge.push(T($(P,0))),q=U(J,ae,Y==D),J=0,++Y}++J,++H}return ge.join("")}if(d={version:"1.4.1",ucs2:{decode:A,encode:M},decode:F,encode:j,toASCII:function(W){return I(W,function(H){return S.test(H)?"xn--"+j(H):H})},toUnicode:function(W){return I(W,function(H){return C.test(H)?F(H.slice(4).toLowerCase()):H})}},s&&c)if(r.exports==s)c.exports=d;else for(f in d)d.hasOwnProperty(f)&&(s[f]=d[f]);else o.punycode=d})(this)}).call(this)}).call(this,typeof qn<"u"?qn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(n,r,a){function i(s,c){return Object.prototype.hasOwnProperty.call(s,c)}r.exports=function(s,c,u,d){c=c||"&",u=u||"=";var f={};if(typeof s!="string"||s.length===0)return f;var h=/\+/g;s=s.split(c);var v=1e3;d&&typeof d.maxKeys=="number"&&(v=d.maxKeys);var p=s.length;v>0&&p>v&&(p=v);for(var g=0;g<p;++g){var m,y,b,w,x=s[g].replace(h,"%20"),C=x.indexOf(u);C>=0?(m=x.substr(0,C),y=x.substr(C+1)):(m=x,y=""),b=decodeURIComponent(m),w=decodeURIComponent(y),i(f,b)?o(f[b])?f[b].push(w):f[b]=[f[b],w]:f[b]=w}return f};var o=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},{}],53:[function(n,r,a){var i=function(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}};r.exports=function(u,d,f,h){return d=d||"&",f=f||"=",u===null&&(u=void 0),typeof u=="object"?s(c(u),function(v){var p=encodeURIComponent(i(v))+f;return o(u[v])?s(u[v],function(g){return p+encodeURIComponent(i(g))}).join(d):p+encodeURIComponent(i(u[v]))}).join(d):h?encodeURIComponent(i(h))+f+encodeURIComponent(i(u)):""};var o=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function s(u,d){if(u.map)return u.map(d);for(var f=[],h=0;h<u.length;h++)f.push(d(u[h],h));return f}var c=Object.keys||function(u){var d=[];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&d.push(f);return d}},{}],54:[function(n,r,a){a.decode=a.parse=n("./decode"),a.encode=a.stringify=n("./encode")},{"./decode":52,"./encode":53}],55:[function(n,r,a){var i={};function o(c,u,d){d||(d=Error);var f=function(h){var v,p;function g(m,y,b){return h.call(this,function(w,x,C){return typeof u=="string"?u:u(w,x,C)}(m,y,b))||this}return p=h,(v=g).prototype=Object.create(p.prototype),v.prototype.constructor=v,v.__proto__=p,g}(d);f.prototype.name=d.name,f.prototype.code=c,i[c]=f}function s(c,u){if(Array.isArray(c)){var d=c.length;return c=c.map(function(f){return String(f)}),d>2?"one of ".concat(u," ").concat(c.slice(0,d-1).join(", "),", or ")+c[d-1]:d===2?"one of ".concat(u," ").concat(c[0]," or ").concat(c[1]):"of ".concat(u," ").concat(c[0])}return"of ".concat(u," ").concat(String(c))}o("ERR_INVALID_OPT_VALUE",function(c,u){return'The value "'+u+'" is invalid for option "'+c+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(c,u,d){var f,h,v;if(typeof u=="string"&&(h="not ",u.substr(0,h.length)===h)?(f="must not be",u=u.replace(/^not /,"")):f="must be",function(g,m,y){return(y===void 0||y>g.length)&&(y=g.length),g.substring(y-m.length,y)===m}(c," argument"))v="The ".concat(c," ").concat(f," ").concat(s(u,"type"));else{var p=function(g,m,y){return typeof y!="number"&&(y=0),!(y+m.length>g.length)&&g.indexOf(m,y)!==-1}(c,".")?"property":"argument";v='The "'.concat(c,'" ').concat(p," ").concat(f," ").concat(s(u,"type"))}return v+=". Received type ".concat(typeof d)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=i},{}],56:[function(n,r,a){(function(i){(function(){var o=Object.keys||function(g){var m=[];for(var y in g)m.push(y);return m};r.exports=h;var s=n("./_stream_readable"),c=n("./_stream_writable");n("inherits")(h,s);for(var u=o(c.prototype),d=0;d<u.length;d++){var f=u[d];h.prototype[f]||(h.prototype[f]=c.prototype[f])}function h(g){if(!(this instanceof h))return new h(g);s.call(this,g),c.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v)))}function v(){this._writableState.ended||i.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,n("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(n,r,a){r.exports=o;var i=n("./_stream_transform");function o(s){if(!(this instanceof o))return new o(s);i.call(this,s)}n("inherits")(o,i),o.prototype._transform=function(s,c,u){u(null,s)}},{"./_stream_transform":59,inherits:24}],58:[function(n,r,a){(function(i,o){(function(){var s;r.exports=k,k.ReadableState=T,n("events").EventEmitter;var c=function(P,R){return P.listeners(R).length},u=n("./internal/streams/stream"),d=n("buffer").Buffer,f=o.Uint8Array||function(){},h,v=n("util");h=v&&v.debuglog?v.debuglog("stream"):function(){};var p,g,m,y=n("./internal/streams/buffer_list"),b=n("./internal/streams/destroy"),w=n("./internal/streams/state").getHighWaterMark,x=n("../errors").codes,C=x.ERR_INVALID_ARG_TYPE,S=x.ERR_STREAM_PUSH_AFTER_EOF,_=x.ERR_METHOD_NOT_IMPLEMENTED,O=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("inherits")(k,u);var N=b.errorOrDestroy,B=["error","close","destroy","pause","resume"];function T(P,R,X){s=s||n("./_stream_duplex"),P=P||{},typeof X!="boolean"&&(X=R instanceof s),this.objectMode=!!P.objectMode,X&&(this.objectMode=this.objectMode||!!P.readableObjectMode),this.highWaterMark=w(this,P,"readableHighWaterMark",X),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(p||(p=n("string_decoder/").StringDecoder),this.decoder=new p(P.encoding),this.encoding=P.encoding)}function k(P){if(s=s||n("./_stream_duplex"),!(this instanceof k))return new k(P);var R=this instanceof s;this._readableState=new T(P,this,R),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),u.call(this)}function E(P,R,X,ee,re){h("readableAddChunk",R);var ae,oe=P._readableState;if(R===null)oe.reading=!1,function(ce,ge){if(h("onEofChunk"),!ge.ended){if(ge.decoder){var pe=ge.decoder.end();pe&&pe.length&&(ge.buffer.push(pe),ge.length+=ge.objectMode?1:pe.length)}ge.ended=!0,ge.sync?$(ce):(ge.needReadable=!1,ge.emittedReadable||(ge.emittedReadable=!0,U(ce)))}}(P,oe);else if(re||(ae=function(ce,ge){var pe;_e=ge,d.isBuffer(_e)||_e instanceof f||typeof ge=="string"||ge===void 0||ce.objectMode||(pe=new C("chunk",["string","Buffer","Uint8Array"],ge));var _e;return pe}(oe,R)),ae)N(P,ae);else if(oe.objectMode||R&&R.length>0)if(typeof R=="string"||oe.objectMode||Object.getPrototypeOf(R)===d.prototype||(R=function(ce){return d.from(ce)}(R)),ee)oe.endEmitted?N(P,new O):I(P,oe,R,!0);else if(oe.ended)N(P,new S);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!X?(R=oe.decoder.write(R),oe.objectMode||R.length!==0?I(P,oe,R,!1):F(P,oe)):I(P,oe,R,!1)}else ee||(oe.reading=!1,F(P,oe));return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function I(P,R,X,ee){R.flowing&&R.length===0&&!R.sync?(R.awaitDrain=0,P.emit("data",X)):(R.length+=R.objectMode?1:X.length,ee?R.buffer.unshift(X):R.buffer.push(X),R.needReadable&&$(P)),F(P,R)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(P){this._readableState&&(this._readableState.destroyed=P)}}),k.prototype.destroy=b.destroy,k.prototype._undestroy=b.undestroy,k.prototype._destroy=function(P,R){R(P)},k.prototype.push=function(P,R){var X,ee=this._readableState;return ee.objectMode?X=!0:typeof P=="string"&&((R=R||ee.defaultEncoding)!==ee.encoding&&(P=d.from(P,R),R=""),X=!0),E(this,P,R,!1,X)},k.prototype.unshift=function(P){return E(this,P,null,!0,!1)},k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(P){p||(p=n("string_decoder/").StringDecoder);var R=new p(P);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,ee="";X!==null;)ee+=R.write(X.data),X=X.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var A=1073741824;function M(P,R){return P<=0||R.length===0&&R.ended?0:R.objectMode?1:P!=P?R.flowing&&R.length?R.buffer.head.data.length:R.length:(P>R.highWaterMark&&(R.highWaterMark=function(X){return X>=A?X=A:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}(P)),P<=R.length?P:R.ended?R.length:(R.needReadable=!0,0))}function $(P){var R=P._readableState;h("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(h("emitReadable",R.flowing),R.emittedReadable=!0,i.nextTick(U,P))}function U(P){var R=P._readableState;h("emitReadable_",R.destroyed,R.length,R.ended),R.destroyed||!R.length&&!R.ended||(P.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,Y(P)}function F(P,R){R.readingMore||(R.readingMore=!0,i.nextTick(j,P,R))}function j(P,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){var X=R.length;if(h("maybeReadMore read 0"),P.read(0),X===R.length)break}R.readingMore=!1}function W(P){var R=P._readableState;R.readableListening=P.listenerCount("readable")>0,R.resumeScheduled&&!R.paused?R.flowing=!0:P.listenerCount("data")>0&&P.resume()}function H(P){h("readable nexttick read 0"),P.read(0)}function J(P,R){h("resume",R.reading),R.reading||P.read(0),R.resumeScheduled=!1,P.emit("resume"),Y(P),R.flowing&&!R.reading&&P.read(0)}function Y(P){var R=P._readableState;for(h("flow",R.flowing);R.flowing&&P.read()!==null;);}function D(P,R){return R.length===0?null:(R.objectMode?X=R.buffer.shift():!P||P>=R.length?(X=R.decoder?R.buffer.join(""):R.buffer.length===1?R.buffer.first():R.buffer.concat(R.length),R.buffer.clear()):X=R.buffer.consume(P,R.decoder),X);var X}function q(P){var R=P._readableState;h("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,i.nextTick(z,R,P))}function z(P,R){if(h("endReadableNT",P.endEmitted,P.length),!P.endEmitted&&P.length===0&&(P.endEmitted=!0,R.readable=!1,R.emit("end"),P.autoDestroy)){var X=R._writableState;(!X||X.autoDestroy&&X.finished)&&R.destroy()}}function K(P,R){for(var X=0,ee=P.length;X<ee;X++)if(P[X]===R)return X;return-1}k.prototype.read=function(P){h("read",P),P=parseInt(P,10);var R=this._readableState,X=P;if(P!==0&&(R.emittedReadable=!1),P===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return h("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?q(this):$(this),null;if((P=M(P,R))===0&&R.ended)return R.length===0&&q(this),null;var ee,re=R.needReadable;return h("need readable",re),(R.length===0||R.length-P<R.highWaterMark)&&h("length less than watermark",re=!0),R.ended||R.reading?h("reading or ended",re=!1):re&&(h("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(P=M(X,R))),(ee=P>0?D(P,R):null)===null?(R.needReadable=R.length<=R.highWaterMark,P=0):(R.length-=P,R.awaitDrain=0),R.length===0&&(R.ended||(R.needReadable=!0),X!==P&&R.ended&&q(this)),ee!==null&&this.emit("data",ee),ee},k.prototype._read=function(P){N(this,new _("_read()"))},k.prototype.pipe=function(P,R){var X=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=P;break;case 1:ee.pipes=[ee.pipes,P];break;default:ee.pipes.push(P)}ee.pipesCount+=1,h("pipe count=%d opts=%j",ee.pipesCount,R);var re=(!R||R.end!==!1)&&P!==i.stdout&&P!==i.stderr?oe:Ne;function ae(Ae,Pe){h("onunpipe"),Ae===X&&Pe&&Pe.hasUnpiped===!1&&(Pe.hasUnpiped=!0,h("cleanup"),P.removeListener("close",be),P.removeListener("finish",Se),P.removeListener("drain",ce),P.removeListener("error",_e),P.removeListener("unpipe",ae),X.removeListener("end",oe),X.removeListener("end",Ne),X.removeListener("data",pe),ge=!0,!ee.awaitDrain||P._writableState&&!P._writableState.needDrain||ce())}function oe(){h("onend"),P.end()}ee.endEmitted?i.nextTick(re):X.once("end",re),P.on("unpipe",ae);var ce=function(Ae){return function(){var Pe=Ae._readableState;h("pipeOnDrain",Pe.awaitDrain),Pe.awaitDrain&&Pe.awaitDrain--,Pe.awaitDrain===0&&c(Ae,"data")&&(Pe.flowing=!0,Y(Ae))}}(X);P.on("drain",ce);var ge=!1;function pe(Ae){h("ondata");var Pe=P.write(Ae);h("dest.write",Pe),Pe===!1&&((ee.pipesCount===1&&ee.pipes===P||ee.pipesCount>1&&K(ee.pipes,P)!==-1)&&!ge&&(h("false write response, pause",ee.awaitDrain),ee.awaitDrain++),X.pause())}function _e(Ae){h("onerror",Ae),Ne(),P.removeListener("error",_e),c(P,"error")===0&&N(P,Ae)}function be(){P.removeListener("finish",Se),Ne()}function Se(){h("onfinish"),P.removeListener("close",be),Ne()}function Ne(){h("unpipe"),X.unpipe(P)}return X.on("data",pe),function(Ae,Pe,Me){if(typeof Ae.prependListener=="function")return Ae.prependListener(Pe,Me);Ae._events&&Ae._events[Pe]?Array.isArray(Ae._events[Pe])?Ae._events[Pe].unshift(Me):Ae._events[Pe]=[Me,Ae._events[Pe]]:Ae.on(Pe,Me)}(P,"error",_e),P.once("close",be),P.once("finish",Se),P.emit("pipe",X),ee.flowing||(h("pipe resume"),X.resume()),P},k.prototype.unpipe=function(P){var R=this._readableState,X={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return P&&P!==R.pipes?this:(P||(P=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,P&&P.emit("unpipe",this,X),this);if(!P){var ee=R.pipes,re=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var ae=0;ae<re;ae++)ee[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=K(R.pipes,P);return oe===-1?this:(R.pipes.splice(oe,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),P.emit("unpipe",this,X),this)},k.prototype.on=function(P,R){var X=u.prototype.on.call(this,P,R),ee=this._readableState;return P==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):P==="readable"&&(ee.endEmitted||ee.readableListening||(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,h("on readable",ee.length,ee.reading),ee.length?$(this):ee.reading||i.nextTick(H,this))),X},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(P,R){var X=u.prototype.removeListener.call(this,P,R);return P==="readable"&&i.nextTick(W,this),X},k.prototype.removeAllListeners=function(P){var R=u.prototype.removeAllListeners.apply(this,arguments);return P!=="readable"&&P!==void 0||i.nextTick(W,this),R},k.prototype.resume=function(){var P=this._readableState;return P.flowing||(h("resume"),P.flowing=!P.readableListening,function(R,X){X.resumeScheduled||(X.resumeScheduled=!0,i.nextTick(J,R,X))}(this,P)),P.paused=!1,this},k.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(P){var R=this,X=this._readableState,ee=!1;for(var re in P.on("end",function(){if(h("wrapped end"),X.decoder&&!X.ended){var oe=X.decoder.end();oe&&oe.length&&R.push(oe)}R.push(null)}),P.on("data",function(oe){h("wrapped data"),X.decoder&&(oe=X.decoder.write(oe)),(!X.objectMode||oe!=null)&&(X.objectMode||oe&&oe.length)&&(R.push(oe)||(ee=!0,P.pause()))}),P)this[re]===void 0&&typeof P[re]=="function"&&(this[re]=function(oe){return function(){return P[oe].apply(P,arguments)}}(re));for(var ae=0;ae<B.length;ae++)P.on(B[ae],this.emit.bind(this,B[ae]));return this._read=function(oe){h("wrapped _read",oe),ee&&(ee=!1,P.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=n("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(P){this._readableState&&(this._readableState.flowing=P)}}),k._fromList=D,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(k.from=function(P,R){return m===void 0&&(m=n("./internal/streams/from")),m(k,P,R)})}).call(this)}).call(this,n("_process"),typeof qn<"u"?qn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(n,r,a){r.exports=f;var i=n("../errors").codes,o=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,c=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=i.ERR_TRANSFORM_WITH_LENGTH_0,d=n("./_stream_duplex");function f(p){if(!(this instanceof f))return new f(p);d.call(this,p),this._transformState={afterTransform:(function(g,m){var y=this._transformState;y.transforming=!1;var b=y.writecb;if(b===null)return this.emit("error",new s);y.writechunk=null,y.writecb=null,m!=null&&this.push(m),b(g);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}).bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,p&&(typeof p.transform=="function"&&(this._transform=p.transform),typeof p.flush=="function"&&(this._flush=p.flush)),this.on("prefinish",h)}function h(){var p=this;typeof this._flush!="function"||this._readableState.destroyed?v(this,null,null):this._flush(function(g,m){v(p,g,m)})}function v(p,g,m){if(g)return p.emit("error",g);if(m!=null&&p.push(m),p._writableState.length)throw new u;if(p._transformState.transforming)throw new c;return p.push(null)}n("inherits")(f,d),f.prototype.push=function(p,g){return this._transformState.needTransform=!1,d.prototype.push.call(this,p,g)},f.prototype._transform=function(p,g,m){m(new o("_transform()"))},f.prototype._write=function(p,g,m){var y=this._transformState;if(y.writecb=m,y.writechunk=p,y.writeencoding=g,!y.transforming){var b=this._readableState;(y.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},f.prototype._read=function(p){var g=this._transformState;g.writechunk===null||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))},f.prototype._destroy=function(p,g){d.prototype._destroy.call(this,p,function(m){g(m)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(n,r,a){(function(i,o){(function(){function s(F){var j=this;this.next=null,this.entry=null,this.finish=function(){(function(W,H,J){var Y=W.entry;for(W.entry=null;Y;){var D=Y.callback;H.pendingcb--,D(J),Y=Y.next}H.corkedRequestsFree.next=W})(j,F)}}var c;r.exports=k,k.WritableState=T;var u={deprecate:n("util-deprecate")},d=n("./internal/streams/stream"),f=n("buffer").Buffer,h=o.Uint8Array||function(){},v,p=n("./internal/streams/destroy"),g=n("./internal/streams/state").getHighWaterMark,m=n("../errors").codes,y=m.ERR_INVALID_ARG_TYPE,b=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_MULTIPLE_CALLBACK,x=m.ERR_STREAM_CANNOT_PIPE,C=m.ERR_STREAM_DESTROYED,S=m.ERR_STREAM_NULL_VALUES,_=m.ERR_STREAM_WRITE_AFTER_END,O=m.ERR_UNKNOWN_ENCODING,N=p.errorOrDestroy;function B(){}function T(F,j,W){c=c||n("./_stream_duplex"),F=F||{},typeof W!="boolean"&&(W=j instanceof c),this.objectMode=!!F.objectMode,W&&(this.objectMode=this.objectMode||!!F.writableObjectMode),this.highWaterMark=g(this,F,"writableHighWaterMark",W),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=F.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(J){(function(Y,D){var q=Y._writableState,z=q.sync,K=q.writecb;if(typeof K!="function")throw new w;if(function(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}(q),D)(function(R,X,ee,re,ae){--X.pendingcb,ee?(i.nextTick(ae,re),i.nextTick(U,R,X),R._writableState.errorEmitted=!0,N(R,re)):(ae(re),R._writableState.errorEmitted=!0,N(R,re),U(R,X))})(Y,q,z,D,K);else{var P=M(q)||Y.destroyed;P||q.corked||q.bufferProcessing||!q.bufferedRequest||A(Y,q),z?i.nextTick(I,Y,q,P,K):I(Y,q,P,K)}})(j,J)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function k(F){var j=this instanceof(c=c||n("./_stream_duplex"));if(!j&&!v.call(k,this))return new k(F);this._writableState=new T(F,this,j),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),d.call(this)}function E(F,j,W,H,J,Y,D){j.writelen=H,j.writecb=D,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new C("write")):W?F._writev(J,j.onwrite):F._write(J,Y,j.onwrite),j.sync=!1}function I(F,j,W,H){W||function(J,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,J.emit("drain"))}(F,j),j.pendingcb--,H(),U(F,j)}function A(F,j){j.bufferProcessing=!0;var W=j.bufferedRequest;if(F._writev&&W&&W.next){var H=j.bufferedRequestCount,J=new Array(H),Y=j.corkedRequestsFree;Y.entry=W;for(var D=0,q=!0;W;)J[D]=W,W.isBuf||(q=!1),W=W.next,D+=1;J.allBuffers=q,E(F,j,!0,j.length,J,"",Y.finish),j.pendingcb++,j.lastBufferedRequest=null,Y.next?(j.corkedRequestsFree=Y.next,Y.next=null):j.corkedRequestsFree=new s(j),j.bufferedRequestCount=0}else{for(;W;){var z=W.chunk,K=W.encoding,P=W.callback;if(E(F,j,!1,j.objectMode?1:z.length,z,K,P),W=W.next,j.bufferedRequestCount--,j.writing)break}W===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=W,j.bufferProcessing=!1}function M(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function $(F,j){F._final(function(W){j.pendingcb--,W&&N(F,W),j.prefinished=!0,F.emit("prefinish"),U(F,j)})}function U(F,j){var W=M(j);if(W&&(function(J,Y){Y.prefinished||Y.finalCalled||(typeof J._final!="function"||Y.destroyed?(Y.prefinished=!0,J.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,i.nextTick($,J,Y)))}(F,j),j.pendingcb===0&&(j.finished=!0,F.emit("finish"),j.autoDestroy))){var H=F._readableState;(!H||H.autoDestroy&&H.endEmitted)&&F.destroy()}return W}n("inherits")(k,d),T.prototype.getBuffer=function(){for(var F=this.bufferedRequest,j=[];F;)j.push(F),F=F.next;return j},function(){try{Object.defineProperty(T.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(F){return!!v.call(this,F)||this===k&&F&&F._writableState instanceof T}})):v=function(F){return F instanceof this},k.prototype.pipe=function(){N(this,new x)},k.prototype.write=function(F,j,W){var H,J=this._writableState,Y=!1,D=!J.objectMode&&(H=F,f.isBuffer(H)||H instanceof h);return D&&!f.isBuffer(F)&&(F=function(q){return f.from(q)}(F)),typeof j=="function"&&(W=j,j=null),D?j="buffer":j||(j=J.defaultEncoding),typeof W!="function"&&(W=B),J.ending?function(q,z){var K=new _;N(q,K),i.nextTick(z,K)}(this,W):(D||function(q,z,K,P){var R;return K===null?R=new S:typeof K=="string"||z.objectMode||(R=new y("chunk",["string","Buffer"],K)),!R||(N(q,R),i.nextTick(P,R),!1)}(this,J,F,W))&&(J.pendingcb++,Y=function(q,z,K,P,R,X){if(!K){var ee=function(ce,ge,pe){return ce.objectMode||ce.decodeStrings===!1||typeof ge!="string"||(ge=f.from(ge,pe)),ge}(z,P,R);P!==ee&&(K=!0,R="buffer",P=ee)}var re=z.objectMode?1:P.length;z.length+=re;var ae=z.length<z.highWaterMark;if(ae||(z.needDrain=!0),z.writing||z.corked){var oe=z.lastBufferedRequest;z.lastBufferedRequest={chunk:P,encoding:R,isBuf:K,callback:X,next:null},oe?oe.next=z.lastBufferedRequest:z.bufferedRequest=z.lastBufferedRequest,z.bufferedRequestCount+=1}else E(q,z,!1,re,P,R,X);return ae}(this,J,D,F,j,W)),Y},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||A(this,F))},k.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new O(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(F,j,W){W(new b("_write()"))},k.prototype._writev=null,k.prototype.end=function(F,j,W){var H=this._writableState;return typeof F=="function"?(W=F,F=null,j=null):typeof j=="function"&&(W=j,j=null),F!=null&&this.write(F,j),H.corked&&(H.corked=1,this.uncork()),H.ending||function(J,Y,D){Y.ending=!0,U(J,Y),D&&(Y.finished?i.nextTick(D):J.once("finish",D)),Y.ended=!0,J.writable=!1}(this,H,W),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(F,j){j(F)}}).call(this)}).call(this,n("_process"),typeof qn<"u"?qn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(n,r,a){(function(i){(function(){var o;function s(x,C,S){return C in x?Object.defineProperty(x,C,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[C]=S,x}var c=n("./end-of-stream"),u=Symbol("lastResolve"),d=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),v=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function m(x,C){return{value:x,done:C}}function y(x){var C=x[u];if(C!==null){var S=x[g].read();S!==null&&(x[v]=null,x[u]=null,x[d]=null,C(m(S,!1)))}}var b=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((s(o={get stream(){return this[g]},next:function(){var x=this,C=this[f];if(C!==null)return Promise.reject(C);if(this[h])return Promise.resolve(m(void 0,!0));if(this[g].destroyed)return new Promise(function(N,B){i.nextTick(function(){x[f]?B(x[f]):N(m(void 0,!0))})});var S,_=this[v];if(_)S=new Promise(function(N,B){return function(T,k){N.then(function(){B[h]?T(m(void 0,!0)):B[p](T,k)},k)}}(_,this));else{var O=this[g].read();if(O!==null)return Promise.resolve(m(O,!1));S=new Promise(this[p])}return this[v]=S,S}},Symbol.asyncIterator,function(){return this}),s(o,"return",function(){var x=this;return new Promise(function(C,S){x[g].destroy(null,function(_){_?S(_):C(m(void 0,!0))})})}),o),b);r.exports=function(x){var C,S=Object.create(w,(s(C={},g,{value:x,writable:!0}),s(C,u,{value:null,writable:!0}),s(C,d,{value:null,writable:!0}),s(C,f,{value:null,writable:!0}),s(C,h,{value:x._readableState.endEmitted,writable:!0}),s(C,p,{value:function(_,O){var N=S[g].read();N?(S[v]=null,S[u]=null,S[d]=null,_(m(N,!1))):(S[u]=_,S[d]=O)},writable:!0}),C));return S[v]=null,c(x,function(_){if(_&&_.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=S[d];return O!==null&&(S[v]=null,S[u]=null,S[d]=null,O(_)),void(S[f]=_)}var N=S[u];N!==null&&(S[v]=null,S[u]=null,S[d]=null,N(m(void 0,!0))),S[h]=!0}),x.on("readable",(function(_){i.nextTick(y,_)}).bind(null,S)),S}}).call(this)}).call(this,n("_process"))},{"./end-of-stream":64,_process:50}],62:[function(n,r,a){function i(f,h){var v=Object.keys(f);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(f);h&&(p=p.filter(function(g){return Object.getOwnPropertyDescriptor(f,g).enumerable})),v.push.apply(v,p)}return v}function o(f,h,v){return h in f?Object.defineProperty(f,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):f[h]=v,f}function s(f,h){for(var v=0;v<h.length;v++){var p=h[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}var c=n("buffer").Buffer,u=n("util").inspect,d=u&&u.custom||"inspect";r.exports=function(){function f(){(function(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var h,v;return h=f,(v=[{key:"push",value:function(p){var g={data:p,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(p){var g={data:p,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var g=this.head,m=""+g.data;g=g.next;)m+=p+g.data;return m}},{key:"concat",value:function(p){if(this.length===0)return c.alloc(0);for(var g,m,y,b=c.allocUnsafe(p>>>0),w=this.head,x=0;w;)g=w.data,m=b,y=x,c.prototype.copy.call(g,m,y),x+=w.data.length,w=w.next;return b}},{key:"consume",value:function(p,g){var m;return p<this.head.data.length?(m=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):m=p===this.head.data.length?this.shift():g?this._getString(p):this._getBuffer(p),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var g=this.head,m=1,y=g.data;for(p-=y.length;g=g.next;){var b=g.data,w=p>b.length?b.length:p;if(w===b.length?y+=b:y+=b.slice(0,p),(p-=w)===0){w===b.length?(++m,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=b.slice(w));break}++m}return this.length-=m,y}},{key:"_getBuffer",value:function(p){var g=c.allocUnsafe(p),m=this.head,y=1;for(m.data.copy(g),p-=m.data.length;m=m.next;){var b=m.data,w=p>b.length?b.length:p;if(b.copy(g,g.length-p,0,w),(p-=w)===0){w===b.length?(++y,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=b.slice(w));break}++y}return this.length-=y,g}},{key:d,value:function(p,g){return u(this,function(m){for(var y=1;y<arguments.length;y++){var b=arguments[y]!=null?arguments[y]:{};y%2?i(Object(b),!0).forEach(function(w){o(m,w,b[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(b)):i(Object(b)).forEach(function(w){Object.defineProperty(m,w,Object.getOwnPropertyDescriptor(b,w))})}return m}({},g,{depth:0,customInspect:!1}))}}])&&s(h.prototype,v),f}()},{buffer:17,util:16}],63:[function(n,r,a){(function(i){(function(){function o(u,d){c(u,d),s(u)}function s(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function c(u,d){u.emit("error",d)}r.exports={destroy:function(u,d){var f=this,h=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return h||v?(d?d(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(c,this,u)):i.nextTick(c,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(p){!d&&p?f._writableState?f._writableState.errorEmitted?i.nextTick(s,f):(f._writableState.errorEmitted=!0,i.nextTick(o,f,p)):i.nextTick(o,f,p):d?(i.nextTick(s,f),d(p)):i.nextTick(s,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,d){var f=u._readableState,h=u._writableState;f&&f.autoDestroy||h&&h.autoDestroy?u.destroy(d):u.emit("error",d)}}}).call(this)}).call(this,n("_process"))},{_process:50}],64:[function(n,r,a){var i=n("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}r.exports=function s(c,u,d){if(typeof u=="function")return s(c,null,u);u||(u={}),d=function(C){var S=!1;return function(){if(!S){S=!0;for(var _=arguments.length,O=new Array(_),N=0;N<_;N++)O[N]=arguments[N];C.apply(this,O)}}}(d||o);var f=u.readable||u.readable!==!1&&c.readable,h=u.writable||u.writable!==!1&&c.writable,v=function(){c.writable||g()},p=c._writableState&&c._writableState.finished,g=function(){h=!1,p=!0,f||d.call(c)},m=c._readableState&&c._readableState.endEmitted,y=function(){f=!1,m=!0,h||d.call(c)},b=function(C){d.call(c,C)},w=function(){var C;return f&&!m?(c._readableState&&c._readableState.ended||(C=new i),d.call(c,C)):h&&!p?(c._writableState&&c._writableState.ended||(C=new i),d.call(c,C)):void 0},x=function(){c.req.on("finish",g)};return function(C){return C.setHeader&&typeof C.abort=="function"}(c)?(c.on("complete",g),c.on("abort",w),c.req?x():c.on("request",x)):h&&!c._writableState&&(c.on("end",v),c.on("close",v)),c.on("end",y),c.on("finish",g),u.error!==!1&&c.on("error",b),c.on("close",w),function(){c.removeListener("complete",g),c.removeListener("abort",w),c.removeListener("request",x),c.req&&c.req.removeListener("finish",g),c.removeListener("end",v),c.removeListener("close",v),c.removeListener("finish",g),c.removeListener("end",y),c.removeListener("error",b),c.removeListener("close",w)}}},{"../../../errors":55}],65:[function(n,r,a){r.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(n,r,a){var i,o=n("../../../errors").codes,s=o.ERR_MISSING_ARGS,c=o.ERR_STREAM_DESTROYED;function u(h){if(h)throw h}function d(h){h()}function f(h,v){return h.pipe(v)}r.exports=function(){for(var h=arguments.length,v=new Array(h),p=0;p<h;p++)v[p]=arguments[p];var g,m=function(b){return b.length?typeof b[b.length-1]!="function"?u:b.pop():u}(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new s("streams");var y=v.map(function(b,w){var x=w<v.length-1;return function(C,S,_,O){O=function(T){var k=!1;return function(){k||(k=!0,T.apply(void 0,arguments))}}(O);var N=!1;C.on("close",function(){N=!0}),i===void 0&&(i=n("./end-of-stream")),i(C,{readable:S,writable:_},function(T){if(T)return O(T);N=!0,O()});var B=!1;return function(T){if(!N&&!B)return B=!0,function(k){return k.setHeader&&typeof k.abort=="function"}(C)?C.abort():typeof C.destroy=="function"?C.destroy():void O(T||new c("pipe"))}}(b,x,w>0,function(C){g||(g=C),C&&y.forEach(d),x||(y.forEach(d),m(g))})});return v.reduce(f)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(n,r,a){var i=n("../../../errors").codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(o,s,c,u){var d=function(f,h,v){return f.highWaterMark!=null?f.highWaterMark:h?f[v]:null}(s,u,c);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new i(u?c:"highWaterMark",d);return Math.floor(d)}return o.objectMode?16:16384}}},{"../../../errors":55}],68:[function(n,r,a){r.exports=n("events").EventEmitter},{events:22}],69:[function(n,r,a){(a=r.exports=n("./lib/_stream_readable.js")).Stream=a,a.Readable=a,a.Writable=n("./lib/_stream_writable.js"),a.Duplex=n("./lib/_stream_duplex.js"),a.Transform=n("./lib/_stream_transform.js"),a.PassThrough=n("./lib/_stream_passthrough.js"),a.finished=n("./lib/internal/streams/end-of-stream.js"),a.pipeline=n("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(n,r,a){r.exports=function(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var i;if(arguments.length>0){i=new Array(arguments.length-2);for(var o=0;o<i.length;o++)i[o]=arguments[o+2]}return new function(s,c,u){var d=this;this._callback=s,this._args=u,this._interval=setInterval(s,c,this._args),this.reschedule=function(f){f||(f=d._interval),d._interval&&clearInterval(d._interval),d._interval=setInterval(d._callback,f,d._args)},this.clear=function(){d._interval&&(clearInterval(d._interval),d._interval=void 0)},this.destroy=function(){d._interval&&clearInterval(d._interval),d._callback=void 0,d._interval=void 0,d._args=void 0}}(arguments[0],arguments[1],i)}},{}],71:[function(n,r,a){r.exports=n("./index.js")()},{"./index.js":72}],72:[function(n,r,a){(function(i){(function(){function o(s){return s instanceof i?i.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}r.exports=function(s){return(s=s||{}).circles?function(u){var d=[],f=[];return u.proto?function v(p){if(typeof p!="object"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return h(p,v);if(p instanceof Map)return new Map(h(Array.from(p),v));if(p instanceof Set)return new Set(h(Array.from(p),v));var g={};for(var m in d.push(p),f.push(g),p){var y=p[m];if(typeof y!="object"||y===null)g[m]=y;else if(y instanceof Date)g[m]=new Date(y);else if(y instanceof Map)g[m]=new Map(h(Array.from(y),v));else if(y instanceof Set)g[m]=new Set(h(Array.from(y),v));else if(ArrayBuffer.isView(y))g[m]=o(y);else{var b=d.indexOf(y);g[m]=b!==-1?f[b]:v(y)}}return d.pop(),f.pop(),g}:function v(p){if(typeof p!="object"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return h(p,v);if(p instanceof Map)return new Map(h(Array.from(p),v));if(p instanceof Set)return new Set(h(Array.from(p),v));var g={};for(var m in d.push(p),f.push(g),p)if(Object.hasOwnProperty.call(p,m)!==!1){var y=p[m];if(typeof y!="object"||y===null)g[m]=y;else if(y instanceof Date)g[m]=new Date(y);else if(y instanceof Map)g[m]=new Map(h(Array.from(y),v));else if(y instanceof Set)g[m]=new Set(h(Array.from(y),v));else if(ArrayBuffer.isView(y))g[m]=o(y);else{var b=d.indexOf(y);g[m]=b!==-1?f[b]:v(y)}}return d.pop(),f.pop(),g};function h(v,p){for(var g=Object.keys(v),m=new Array(g.length),y=0;y<g.length;y++){var b=g[y],w=v[b];if(typeof w!="object"||w===null)m[b]=w;else if(w instanceof Date)m[b]=new Date(w);else if(ArrayBuffer.isView(w))m[b]=o(w);else{var x=d.indexOf(w);m[b]=x!==-1?f[x]:p(w)}}return m}}(s):s.proto?function u(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return c(d,u);if(d instanceof Map)return new Map(c(Array.from(d),u));if(d instanceof Set)return new Set(c(Array.from(d),u));var f={};for(var h in d){var v=d[h];typeof v!="object"||v===null?f[h]=v:v instanceof Date?f[h]=new Date(v):v instanceof Map?f[h]=new Map(c(Array.from(v),u)):v instanceof Set?f[h]=new Set(c(Array.from(v),u)):ArrayBuffer.isView(v)?f[h]=o(v):f[h]=u(v)}return f}:function u(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return c(d,u);if(d instanceof Map)return new Map(c(Array.from(d),u));if(d instanceof Set)return new Set(c(Array.from(d),u));var f={};for(var h in d)if(Object.hasOwnProperty.call(d,h)!==!1){var v=d[h];typeof v!="object"||v===null?f[h]=v:v instanceof Date?f[h]=new Date(v):v instanceof Map?f[h]=new Map(c(Array.from(v),u)):v instanceof Set?f[h]=new Set(c(Array.from(v),u)):ArrayBuffer.isView(v)?f[h]=o(v):f[h]=u(v)}return f};function c(u,d){for(var f=Object.keys(u),h=new Array(f.length),v=0;v<f.length;v++){var p=f[v],g=u[p];typeof g!="object"||g===null?h[p]=g:g instanceof Date?h[p]=new Date(g):ArrayBuffer.isView(g)?h[p]=o(g):h[p]=d(g)}return h}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],73:[function(n,r,a){var i=n("buffer"),o=i.Buffer;function s(u,d){for(var f in u)d[f]=u[f]}function c(u,d,f){return o(u,d,f)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=i:(s(i,a),a.Buffer=c),c.prototype=Object.create(o.prototype),s(o,c),c.from=function(u,d,f){if(typeof u=="number")throw new TypeError("Argument must not be a number");return o(u,d,f)},c.alloc=function(u,d,f){if(typeof u!="number")throw new TypeError("Argument must be a number");var h=o(u);return d!==void 0?typeof f=="string"?h.fill(d,f):h.fill(d):h.fill(0),h},c.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return o(u)},c.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(u)}},{buffer:17}],74:[function(n,r,a){r.exports=function(i){var o=i._readableState;return o?o.objectMode||typeof i._duplexState=="number"?i.read():i.read((s=o,s.buffer.length?s.buffer.head?s.buffer.head.data.length:s.buffer[0].length:s.length)):null;var s}},{}],75:[function(n,r,a){var i=n("safe-buffer").Buffer,o=i.isEncoding||function(m){switch((m=""+m)&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(m){var y;switch(this.encoding=function(b){var w=function(x){if(!x)return"utf8";for(var C;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(C)return;x=(""+x).toLowerCase(),C=!0}}(b);if(typeof w!="string"&&(i.isEncoding===o||!o(b)))throw new Error("Unknown encoding: "+b);return w||b}(m),this.encoding){case"utf16le":this.text=d,this.end=f,y=4;break;case"utf8":this.fillLast=u,y=4;break;case"base64":this.text=h,this.end=v,y=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(y)}function c(m){return m<=127?0:m>>5==6?2:m>>4==14?3:m>>3==30?4:m>>6==2?-1:-2}function u(m){var y=this.lastTotal-this.lastNeed,b=function(w,x,C){if((192&x[0])!=128)return w.lastNeed=0,"�";if(w.lastNeed>1&&x.length>1){if((192&x[1])!=128)return w.lastNeed=1,"�";if(w.lastNeed>2&&x.length>2&&(192&x[2])!=128)return w.lastNeed=2,"�"}}(this,m);return b!==void 0?b:this.lastNeed<=m.length?(m.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(m.copy(this.lastChar,y,0,m.length),void(this.lastNeed-=m.length))}function d(m,y){if((m.length-y)%2==0){var b=m.toString("utf16le",y);if(b){var w=b.charCodeAt(b.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",y,m.length-1)}function f(m){var y=m&&m.length?this.write(m):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function h(m,y){var b=(m.length-y)%3;return b===0?m.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",y,m.length-b))}function v(m){var y=m&&m.length?this.write(m):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function p(m){return m.toString(this.encoding)}function g(m){return m&&m.length?this.write(m):""}a.StringDecoder=s,s.prototype.write=function(m){if(m.length===0)return"";var y,b;if(this.lastNeed){if((y=this.fillLast(m))===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<m.length?y?y+this.text(m,b):this.text(m,b):y||""},s.prototype.end=function(m){var y=m&&m.length?this.write(m):"";return this.lastNeed?y+"�":y},s.prototype.text=function(m,y){var b=function(x,C,S){var _=C.length-1;if(_<S)return 0;var O=c(C[_]);return O>=0?(O>0&&(x.lastNeed=O-1),O):--_<S||O===-2?0:(O=c(C[_]))>=0?(O>0&&(x.lastNeed=O-2),O):--_<S||O===-2?0:(O=c(C[_]))>=0?(O>0&&(O===2?O=0:x.lastNeed=O-3),O):0}(this,m,y);if(!this.lastNeed)return m.toString("utf8",y);this.lastTotal=b;var w=m.length-(b-this.lastNeed);return m.copy(this.lastChar,0,w),m.toString("utf8",y,w)},s.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length}},{"safe-buffer":73}],76:[function(n,r,a){var i=n("punycode"),o=n("./util");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}a.parse=C,a.resolve=function(S,_){return C(S,!1,!0).resolve(_)},a.resolveObject=function(S,_){return S?C(S,!1,!0).resolveObject(_):_},a.format=function(S){return o.isString(S)&&(S=C(S)),S instanceof s?S.format():s.prototype.format.call(S)},a.Url=s;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),h=["'"].concat(f),v=["%","/","?",";","#"].concat(h),p=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=n("querystring");function C(S,_,O){if(S&&o.isObject(S)&&S instanceof s)return S;var N=new s;return N.parse(S,_,O),N}s.prototype.parse=function(S,_,O){if(!o.isString(S))throw new TypeError("Parameter 'url' must be a string, not "+typeof S);var N=S.indexOf("?"),B=N!==-1&&N<S.indexOf("#")?"?":"#",T=S.split(B);T[0]=T[0].replace(/\\/g,"/");var k=S=T.join(B);if(k=k.trim(),!O&&S.split("#").length===1){var E=d.exec(k);if(E)return this.path=k,this.href=k,this.pathname=E[1],E[2]?(this.search=E[2],this.query=_?x.parse(this.search.substr(1)):this.search.substr(1)):_&&(this.search="",this.query={}),this}var I=c.exec(k);if(I){var A=(I=I[0]).toLowerCase();this.protocol=A,k=k.substr(I.length)}if(O||I||k.match(/^\/\/[^@\/]+@[^@\/]+/)){var M=k.substr(0,2)==="//";!M||I&&b[I]||(k=k.substr(2),this.slashes=!0)}if(!b[I]&&(M||I&&!w[I])){for(var $,U,F=-1,j=0;j<p.length;j++)(W=k.indexOf(p[j]))!==-1&&(F===-1||W<F)&&(F=W);for((U=F===-1?k.lastIndexOf("@"):k.lastIndexOf("@",F))!==-1&&($=k.slice(0,U),k=k.slice(U+1),this.auth=decodeURIComponent($)),F=-1,j=0;j<v.length;j++){var W;(W=k.indexOf(v[j]))!==-1&&(F===-1||W<F)&&(F=W)}F===-1&&(F=k.length),this.host=k.slice(0,F),k=k.slice(F),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var J=this.hostname.split(/\./),Y=(j=0,J.length);j<Y;j++){var D=J[j];if(D&&!D.match(g)){for(var q="",z=0,K=D.length;z<K;z++)D.charCodeAt(z)>127?q+="x":q+=D[z];if(!q.match(g)){var P=J.slice(0,j),R=J.slice(j+1),X=D.match(m);X&&(P.push(X[1]),R.unshift(X[2])),R.length&&(k="/"+R.join(".")+k),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=i.toASCII(this.hostname));var ee=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+ee,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!y[A])for(j=0,Y=h.length;j<Y;j++){var ae=h[j];if(k.indexOf(ae)!==-1){var oe=encodeURIComponent(ae);oe===ae&&(oe=escape(ae)),k=k.split(ae).join(oe)}}var ce=k.indexOf("#");ce!==-1&&(this.hash=k.substr(ce),k=k.slice(0,ce));var ge=k.indexOf("?");if(ge!==-1?(this.search=k.substr(ge),this.query=k.substr(ge+1),_&&(this.query=x.parse(this.query)),k=k.slice(0,ge)):_&&(this.search="",this.query={}),k&&(this.pathname=k),w[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ee=this.pathname||"";var pe=this.search||"";this.path=ee+pe}return this.href=this.format(),this},s.prototype.format=function(){var S=this.auth||"";S&&(S=(S=encodeURIComponent(S)).replace(/%3A/i,":"),S+="@");var _=this.protocol||"",O=this.pathname||"",N=this.hash||"",B=!1,T="";this.host?B=S+this.host:this.hostname&&(B=S+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(B+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(T=x.stringify(this.query));var k=this.search||T&&"?"+T||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||w[_])&&B!==!1?(B="//"+(B||""),O&&O.charAt(0)!=="/"&&(O="/"+O)):B||(B=""),N&&N.charAt(0)!=="#"&&(N="#"+N),k&&k.charAt(0)!=="?"&&(k="?"+k),_+B+(O=O.replace(/[?#]/g,function(E){return encodeURIComponent(E)}))+(k=k.replace("#","%23"))+N},s.prototype.resolve=function(S){return this.resolveObject(C(S,!1,!0)).format()},s.prototype.resolveObject=function(S){if(o.isString(S)){var _=new s;_.parse(S,!1,!0),S=_}for(var O=new s,N=Object.keys(this),B=0;B<N.length;B++){var T=N[B];O[T]=this[T]}if(O.hash=S.hash,S.href==="")return O.href=O.format(),O;if(S.slashes&&!S.protocol){for(var k=Object.keys(S),E=0;E<k.length;E++){var I=k[E];I!=="protocol"&&(O[I]=S[I])}return w[O.protocol]&&O.hostname&&!O.pathname&&(O.path=O.pathname="/"),O.href=O.format(),O}if(S.protocol&&S.protocol!==O.protocol){if(!w[S.protocol]){for(var A=Object.keys(S),M=0;M<A.length;M++){var $=A[M];O[$]=S[$]}return O.href=O.format(),O}if(O.protocol=S.protocol,S.host||b[S.protocol])O.pathname=S.pathname;else{for(var U=(S.pathname||"").split("/");U.length&&!(S.host=U.shift()););S.host||(S.host=""),S.hostname||(S.hostname=""),U[0]!==""&&U.unshift(""),U.length<2&&U.unshift(""),O.pathname=U.join("/")}if(O.search=S.search,O.query=S.query,O.host=S.host||"",O.auth=S.auth,O.hostname=S.hostname||S.host,O.port=S.port,O.pathname||O.search){var F=O.pathname||"",j=O.search||"";O.path=F+j}return O.slashes=O.slashes||S.slashes,O.href=O.format(),O}var W=O.pathname&&O.pathname.charAt(0)==="/",H=S.host||S.pathname&&S.pathname.charAt(0)==="/",J=H||W||O.host&&S.pathname,Y=J,D=O.pathname&&O.pathname.split("/")||[],q=(U=S.pathname&&S.pathname.split("/")||[],O.protocol&&!w[O.protocol]);if(q&&(O.hostname="",O.port=null,O.host&&(D[0]===""?D[0]=O.host:D.unshift(O.host)),O.host="",S.protocol&&(S.hostname=null,S.port=null,S.host&&(U[0]===""?U[0]=S.host:U.unshift(S.host)),S.host=null),J=J&&(U[0]===""||D[0]==="")),H)O.host=S.host||S.host===""?S.host:O.host,O.hostname=S.hostname||S.hostname===""?S.hostname:O.hostname,O.search=S.search,O.query=S.query,D=U;else if(U.length)D||(D=[]),D.pop(),D=D.concat(U),O.search=S.search,O.query=S.query;else if(!o.isNullOrUndefined(S.search))return q&&(O.hostname=O.host=D.shift(),(X=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=X.shift(),O.host=O.hostname=X.shift())),O.search=S.search,O.query=S.query,o.isNull(O.pathname)&&o.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O;if(!D.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var z=D.slice(-1)[0],K=(O.host||S.host||D.length>1)&&(z==="."||z==="..")||z==="",P=0,R=D.length;R>=0;R--)(z=D[R])==="."?D.splice(R,1):z===".."?(D.splice(R,1),P++):P&&(D.splice(R,1),P--);if(!J&&!Y)for(;P--;P)D.unshift("..");!J||D[0]===""||D[0]&&D[0].charAt(0)==="/"||D.unshift(""),K&&D.join("/").substr(-1)!=="/"&&D.push("");var X,ee=D[0]===""||D[0]&&D[0].charAt(0)==="/";return q&&(O.hostname=O.host=ee?"":D.length?D.shift():"",(X=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=X.shift(),O.host=O.hostname=X.shift())),(J=J||O.host&&D.length)&&!ee&&D.unshift(""),D.length?O.pathname=D.join("/"):(O.pathname=null,O.path=null),o.isNull(O.pathname)&&o.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=S.auth||O.auth,O.slashes=O.slashes||S.slashes,O.href=O.format(),O},s.prototype.parseHost=function(){var S=this.host,_=u.exec(S);_&&((_=_[0])!==":"&&(this.port=_.substr(1)),S=S.substr(0,S.length-_.length)),S&&(this.hostname=S)}},{"./util":77,punycode:51,querystring:54}],77:[function(n,r,a){r.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}},{}],78:[function(n,r,a){(function(i){(function(){function o(s){try{if(!i.localStorage)return!1}catch{return!1}var c=i.localStorage[s];return c!=null&&String(c).toLowerCase()==="true"}r.exports=function(s,c){if(o("noDeprecation"))return s;var u=!1;return function(){if(!u){if(o("throwDeprecation"))throw new Error(c);o("traceDeprecation")?console.trace(c):console.warn(c),u=!0}return s.apply(this,arguments)}}}).call(this)}).call(this,typeof qn<"u"?qn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(n,r,a){r.exports=function i(o,s){if(o&&s)return i(o)(s);if(typeof o!="function")throw new TypeError("need wrapper function");return Object.keys(o).forEach(function(u){c[u]=o[u]}),c;function c(){for(var u=new Array(arguments.length),d=0;d<u.length;d++)u[d]=arguments[d];var f=o.apply(this,u),h=u[u.length-1];return typeof f=="function"&&f!==h&&Object.keys(h).forEach(function(v){f[v]=h[v]}),f}}},{}],80:[function(n,r,a){r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(n,r,a){r.exports=function(){for(var o={},s=0;s<arguments.length;s++){var c=arguments[s];for(var u in c)i.call(c,u)&&(o[u]=c[u])}return o};var i=Object.prototype.hasOwnProperty},{}],82:[function(n,r,a){r.exports=function(i){i.prototype[Symbol.iterator]=function*(){for(let o=this.head;o;o=o.next)yield o.value}}},{}],83:[function(n,r,a){function i(d){var f=this;if(f instanceof i||(f=new i),f.tail=null,f.head=null,f.length=0,d&&typeof d.forEach=="function")d.forEach(function(p){f.push(p)});else if(arguments.length>0)for(var h=0,v=arguments.length;h<v;h++)f.push(arguments[h]);return f}function o(d,f,h){var v=f===d.head?new u(h,null,f,d):new u(h,f,f.next,d);return v.next===null&&(d.tail=v),v.prev===null&&(d.head=v),d.length++,v}function s(d,f){d.tail=new u(f,d.tail,null,d),d.head||(d.head=d.tail),d.length++}function c(d,f){d.head=new u(f,null,d.head,d),d.tail||(d.tail=d.head),d.length++}function u(d,f,h,v){if(!(this instanceof u))return new u(d,f,h,v);this.list=v,this.value=d,f?(f.next=this,this.prev=f):this.prev=null,h?(h.prev=this,this.next=h):this.next=null}r.exports=i,i.Node=u,i.create=i,i.prototype.removeNode=function(d){if(d.list!==this)throw new Error("removing node which does not belong to this list");var f=d.next,h=d.prev;return f&&(f.prev=h),h&&(h.next=f),d===this.head&&(this.head=f),d===this.tail&&(this.tail=h),d.list.length--,d.next=null,d.prev=null,d.list=null,f},i.prototype.unshiftNode=function(d){if(d!==this.head){d.list&&d.list.removeNode(d);var f=this.head;d.list=this,d.next=f,f&&(f.prev=d),this.head=d,this.tail||(this.tail=d),this.length++}},i.prototype.pushNode=function(d){if(d!==this.tail){d.list&&d.list.removeNode(d);var f=this.tail;d.list=this,d.prev=f,f&&(f.next=d),this.tail=d,this.head||(this.head=d),this.length++}},i.prototype.push=function(){for(var d=0,f=arguments.length;d<f;d++)s(this,arguments[d]);return this.length},i.prototype.unshift=function(){for(var d=0,f=arguments.length;d<f;d++)c(this,arguments[d]);return this.length},i.prototype.pop=function(){if(this.tail){var d=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,d}},i.prototype.shift=function(){if(this.head){var d=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,d}},i.prototype.forEach=function(d,f){f=f||this;for(var h=this.head,v=0;h!==null;v++)d.call(f,h.value,v,this),h=h.next},i.prototype.forEachReverse=function(d,f){f=f||this;for(var h=this.tail,v=this.length-1;h!==null;v--)d.call(f,h.value,v,this),h=h.prev},i.prototype.get=function(d){for(var f=0,h=this.head;h!==null&&f<d;f++)h=h.next;if(f===d&&h!==null)return h.value},i.prototype.getReverse=function(d){for(var f=0,h=this.tail;h!==null&&f<d;f++)h=h.prev;if(f===d&&h!==null)return h.value},i.prototype.map=function(d,f){f=f||this;for(var h=new i,v=this.head;v!==null;)h.push(d.call(f,v.value,this)),v=v.next;return h},i.prototype.mapReverse=function(d,f){f=f||this;for(var h=new i,v=this.tail;v!==null;)h.push(d.call(f,v.value,this)),v=v.prev;return h},i.prototype.reduce=function(d,f){var h,v=this.head;if(arguments.length>1)h=f;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");v=this.head.next,h=this.head.value}for(var p=0;v!==null;p++)h=d(h,v.value,p),v=v.next;return h},i.prototype.reduceReverse=function(d,f){var h,v=this.tail;if(arguments.length>1)h=f;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");v=this.tail.prev,h=this.tail.value}for(var p=this.length-1;v!==null;p--)h=d(h,v.value,p),v=v.prev;return h},i.prototype.toArray=function(){for(var d=new Array(this.length),f=0,h=this.head;h!==null;f++)d[f]=h.value,h=h.next;return d},i.prototype.toArrayReverse=function(){for(var d=new Array(this.length),f=0,h=this.tail;h!==null;f++)d[f]=h.value,h=h.prev;return d},i.prototype.slice=function(d,f){(f=f||this.length)<0&&(f+=this.length),(d=d||0)<0&&(d+=this.length);var h=new i;if(f<d||f<0)return h;d<0&&(d=0),f>this.length&&(f=this.length);for(var v=0,p=this.head;p!==null&&v<d;v++)p=p.next;for(;p!==null&&v<f;v++,p=p.next)h.push(p.value);return h},i.prototype.sliceReverse=function(d,f){(f=f||this.length)<0&&(f+=this.length),(d=d||0)<0&&(d+=this.length);var h=new i;if(f<d||f<0)return h;d<0&&(d=0),f>this.length&&(f=this.length);for(var v=this.length,p=this.tail;p!==null&&v>f;v--)p=p.prev;for(;p!==null&&v>d;v--,p=p.prev)h.push(p.value);return h},i.prototype.splice=function(d,f,...h){d>this.length&&(d=this.length-1),d<0&&(d=this.length+d);for(var v=0,p=this.head;p!==null&&v<d;v++)p=p.next;var g=[];for(v=0;p&&v<f;v++)g.push(p.value),p=this.removeNode(p);for(p===null&&(p=this.tail),p!==this.head&&p!==this.tail&&(p=p.prev),v=0;v<h.length;v++)p=o(this,p,h[v]);return g},i.prototype.reverse=function(){for(var d=this.head,f=this.tail,h=d;h!==null;h=h.prev){var v=h.prev;h.prev=h.next,h.next=v}return this.head=f,this.tail=d,this};try{n("./iterator.js")(i)}catch{}},{"./iterator.js":82}]},{},[12])(12)})})(d8);var Cg=d8.exports;const f8={success:{color:"#2ba471",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zM7.5 10.59l3 3 6-6L17.91 9l-7.41 7.41L6.09 12l1.41-1.41z"></path></svg>'},info:{color:"#0052d9",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"></path></svg>'},warning:{color:"#e37318",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"></path></svg>'},error:{color:"#d54941",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"></path></svg>'},question:{color:"#0052d9",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zm-.17-11.11c.43-.53.97-.97 1.4-1.32A2 2 0 0012 7a2 2 0 00-1.89 1.33l-.33.95L7.9 8.6l.34-.94a4 4 0 116.24 4.47 7 7 0 00-1.1 1.01c-.27.34-.37.61-.37.85v1.25h-2V14c0-.87.39-1.57.83-2.11zM11 18.25v-2h2v2h-2z"></path></svg>'}},ba={};class G_e{constructor(e,n){de(this,"box");de(this,"icon");de(this,"text");de(this,"closeBtn");de(this,"duration");de(this,"content");de(this,"theme");de(this,"placement");de(this,"id");this.parentElement=e,this.box=document.createElement("div"),this.icon=document.createElement("div"),this.text=document.createElement("div"),this.box.className="meta2d-message",this.icon.className="icon",this.text.className="text",this.icon.innerHTML=f8[n.theme||"info"].icon,this.text.innerHTML=n.content,this.box.appendChild(this.icon),this.box.appendChild(this.text),n.closeBtn&&(this.closeBtn=document.createElement("div"),this.closeBtn.className="close",this.closeBtn.innerHTML="x",this.closeBtn.onclick=()=>{this.close()},this.box.appendChild(this.closeBtn)),e.appendChild(this.box);let r;for(let a=0;a<document.styleSheets.length;a++)document.styleSheets[a].title==="le5le.com/message"&&(r=document.styleSheets[a]);if(!r){let a=document.createElement("style");a.type="text/css",a.title="le5le.com/message",document.head.appendChild(a),a=document.createElement("style"),a.type="text/css",document.head.appendChild(a),r=a.sheet,r.insertRule(`.meta2d-message{
           position:absolute;
           z-index:999;
           transform: translateX(-50%); 
           padding:12px 16px;
           max-width:400px;
           background:#fff;
           border-radius:6px;
           box-shadow:0 3px 14px 2px rgba(0, 0, 0, .05),0 8px 10px 1px rgba(0, 0, 0, 6%),0 5px 5px -3px rgba(0, 0, 0, 10%);
           display:flex;
           animation: fadein .5s;}`),r.insertRule(`
        @keyframes fadein {
          0% {
              transform: translate(-50%, -100%);
          }
          100% {
              transform: translate(-50%,0);
          }
      }`),r.insertRule(".meta2d-message .icon{width:20px;height:20px;}"),r.insertRule(".meta2d-message .text{color:rgba(0, 0, 0, 0.9);font-size:12px;margin-left:8px;line-height:20px;}"),r.insertRule(".meta2d-message .close{width:20px;height:20px;padding-left: 16px; cursor: pointer;}")}this.id=n.id||it(),this.duration=n.duration??3e3,this.placement=n.placement||"top",this.theme=n.theme||"info"}init(){ba[this.id]=this,this.duration&&setTimeout(()=>{this.close()},this.duration);let e=-1;Object.keys(ba).forEach(n=>{var r;((r=ba[n])==null?void 0:r.placement)===this.placement&&e++}),this.setPosition(this.placement,e),this.icon.children[0].style.fill=f8[this.theme].color}setPosition(e,n=0){switch(e){case"top":this.box.style.top=`${30+n*60}px`,this.box.style.left="50%";break;case"bottom":this.box.style.bottom=`${30+n*60}px`,this.box.style.left="50%";break;case"left":this.box.style.top=`${30+n*60}px`,this.box.style.left="30px";break;case"right":this.box.style.top=`${30+n*60}px`,this.box.style.right="30px";break}}close(){Object.keys(ba).forEach(e=>{var n;if(((n=ba[e])==null?void 0:n.placement)===this.placement)switch(this.placement){case"top":case"left":case"right":ba[e].box.style.top=parseInt(ba[e].box.style.top)-60+"px";break;case"bottom":ba[e].box.style.bottom=parseInt(ba[e].box.style.bottom)-60+"px";break}}),ba[this.id]=null,delete ba[this.id],this.box.remove()}}class h8{constructor(e,n={}){de(this,"store");de(this,"canvas");de(this,"websocket");de(this,"mqttClient");de(this,"websockets");de(this,"mqttClients");de(this,"penPluginMap",new Map);de(this,"socketFn");de(this,"events",{});de(this,"map");de(this,"mapTimer");de(this,"facePen",hu);de(this,"getWords",i4);de(this,"calcTextLines",_f);de(this,"calcTextRect",Bi);de(this,"calcTextDrawRect",a4);de(this,"jetLinksList",[]);de(this,"jetLinksClient");de(this,"register",ja);de(this,"registerCanvasDraw",di);de(this,"registerAnchors",xf);de(this,"websocketTimes",0);de(this,"mqttTimes",0);de(this,"httpTimer");de(this,"httpTimerList",[]);de(this,"updateTimer");de(this,"updateTimerList",[]);de(this,"sqlTimerList",[]);de(this,"onEvent",(e,n)=>{switch(e){case"add":n.forEach(r=>{var a;(a=r.onAdd)==null||a.call(r,r)}),this.onSizeUpdate();break;case"enter":n&&n.onMouseEnter&&n.onMouseEnter(n,this.canvas.mousePos),this.store.data.locked&&this.doEvent(n,e);break;case"leave":n&&n.onMouseLeave&&n.onMouseLeave(n,this.canvas.mousePos),this.store.data.locked&&this.doEvent(n,e);break;case"active":case"inactive":this.store.data.locked&&n.forEach(r=>{this.doEvent(r,e)});break;case"click":this.store.data.locked&&n.pen&&!n.pen.disabled&&n.pen.switch&&(n.pen.checked=!n.pen.checked,n.pen.calculative.checked=n.pen.checked,n.pen.calculative.gradient=void 0,n.pen.calculative.radialGradient=void 0),n.pen&&n.pen.onClick&&!n.pen.disabled&&n.pen.onClick(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"contextmenu":n.pen&&n.pen.onContextmenu&&!n.pen.disabled&&n.pen.onContextmenu(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"mousedown":n.pen&&n.pen.onMouseDown&&!n.pen.disabled&&n.pen.onMouseDown(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"mouseup":n.pen&&n.pen.onMouseUp&&!n.pen.disabled&&n.pen.onMouseUp(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"dblclick":this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"valueUpdate":this.store.data.locked&&this.doEvent(n,e),this.canvas.tooltip.updateText(n);break;case"update":case"delete":case"translatePens":case"rotatePens":case"resizePens":this.onSizeUpdate();break;case"navigator":this.store.data.id||console.warn("请先保存当前图纸"),this.navigatorTo(n.params);break;case"input":this.store.data.locked&&n&&!n.disabled&&this.doEvent(n,e);break;case"change":this.store.data.locked&&n&&!n.disabled&&this.doEvent(n,e);break}this.doMessageEvent(e)});de(this,"doEvent",(e,n)=>{var i,o,s,c,u,d,f,h,v,p;if(!e)return;let r=!1,a=[];if((i=e.events)==null||i.forEach((g,m)=>{var y;if(g.actions&&g.actions.length){if(g.name===n){let b=!1;g.conditions&&g.conditions.length?g.conditionType==="and"?b=g.conditions.every(w=>this.judgeCondition(e,w.key,w)):g.conditionType==="or"&&(b=g.conditions.some(w=>this.judgeCondition(e,w.key,w))):b=!0,b&&a.push(m)}}else if(r=!0,this.events[g.action]&&g.name===n){let b=!((y=g.where)!=null&&y.type);if(g.where){const{fn:w,fnJs:x,comparison:C,key:S,value:_}=g.where;if(w)b=w(e,{meta2d:this});else if(x){try{g.where.fn=new Function("pen","context",x)}catch(O){console.error("Error: make function:",O)}g.where.fn&&(b=g.where.fn(e,{meta2d:this}))}else{let O=e[S];switch(["x","y","width","height"].includes(S)&&(O=this.getPenRect(e)[S]),C){case">":b=O>+_;break;case">=":b=O>=+_;break;case"<":b=O<+_;break;case"<=":b=O<=+_;break;case"=":case"==":b=O==_;break;case"!=":b=O!=_;break;case"[)":b=lu(+O,_);break;case"![)":b=!lu(+O,_);break;case"[]":b=su(O,_);break;case"![]":b=!su(O,_);break}}}b&&a.push(m)}}),r?(o=e.events)==null||o.forEach((g,m)=>{a.includes(m)&&this.events[g.action](e,g)}):(s=e.events)==null||s.forEach(async(g,m)=>{if(a.includes(m)){if(g.confirm&&!await this.canvas.popconfirm.showModal(e,this.canvas.mousePos,g.confirmTitle))return;g.actions.forEach(y=>{if(y.timeout){let b=setTimeout(()=>{this.events[y.action]&&(this.events[y.action](e,y),clearTimeout(b),b=null)},y.timeout)}else this.events[y.action]&&this.events[y.action](e,y)})}}),n==="valueUpdate"){(c=e.realTimes)==null||c.forEach(m=>{var b,w;let y=[];(b=m.triggers)==null||b.forEach((x,C)=>{var _;let S=!1;(_=x.conditions)!=null&&_.length?x.conditionType==="and"?S=x.conditions.every(O=>this.judgeCondition(e,m.key,O)):x.conditionType==="or"&&(S=x.conditions.some(O=>this.judgeCondition(e,m.key,O))):S=!0,S&&y.push(C)}),(w=m.triggers)==null||w.forEach((x,C)=>{var S;y.includes(C)&&((S=x.actions)==null||S.forEach(_=>{if(_.timeout){let O=setTimeout(()=>{this.events[_.action]&&(this.events[_.action](e,_),clearTimeout(O),O=null)},_.timeout)}else this.events[_.action](e,_)}))})});let g=[];if((u=this.store.globalTriggers[e.id])==null||u.forEach((m,y)=>{var w;let b=!1;(w=m.conditions)!=null&&w.length?m.conditionType==="and"?b=m.conditions.every(x=>this.judgeCondition(this.store.pens[x.source],x.key,x)):m.conditionType==="or"&&(b=m.conditions.some(x=>this.judgeCondition(this.store.pens[x.source],x.key,x))):b=!0,b&&g.push(y)}),(d=this.store.globalTriggers[e.id])==null||d.forEach((m,y)=>{var b;g.includes(y)&&((b=m.actions)==null||b.forEach(w=>{if(w.timeout){let x=setTimeout(()=>{this.events[w.action]&&(this.events[w.action](e,w),clearTimeout(x),x=null)},w.timeout)}else this.events[w.action](e,w)}))}),(f=e.triggers)!=null&&f.length){for(let m of e.triggers)if((h=m.status)!=null&&h.length)for(let y of m.status){let b=!1;if((v=y.conditions)!=null&&v.length?y.conditionType==="and"?b=y.conditions.every(w=>this.judgeCondition(e,w.key,w)):y.conditionType==="or"&&(b=y.conditions.some(w=>this.judgeCondition(e,w.key,w))):b=!0,b){(p=y.actions)==null||p.forEach(w=>{if(w.timeout){let x=setTimeout(()=>{this.events[w.action]&&(this.events[w.action](e,w),clearTimeout(x),x=null)},w.timeout)}else this.events[w.action](e,w)});break}}}}this.doEvent(this.store.pens[e.parentId],n)});de(this,"doDataEvent",e=>{var a,i,o;if(!((a=this.store.data.dataEvents)!=null&&a.length))return;const n=e.reduce((s,{dataId:c,id:u,value:d})=>(s[u||c]=d,s),{});let r=[];(i=this.store.data.dataEvents)==null||i.forEach((s,c)=>{let u=!1;s.conditions&&s.conditions.length?s.conditionType==="and"?u=s.conditions.every(d=>this.dataJudegeCondition(n,d.key,d)):s.conditionType==="or"&&(u=s.conditions.some(d=>this.dataJudegeCondition(n,d.key,d))):u=!0,u&&r.push(c)}),(o=this.store.data.dataEvents)==null||o.forEach((s,c)=>{var u;r.includes(c)&&((u=s.actions)==null||u.forEach(d=>{this.events[d.action](n,d)}))})});de(this,"renderPenRaw",cg);de(this,"setElemPosition",dr);de(this,"setLifeCycleFunc",fCe);this.store=_xe(it()),this.setOptions(n),this.setDatabyOptions(n),this.init(e),this.register(H_e()),this.registerCanvasDraw({cube:WCe}),this.registerAnchors(W_e()),globalThis.meta2d=this,this.initEventFns(),this.store.emitter.on("*",this.onEvent)}get beforeAddPen(){return this.canvas.beforeAddPen}set beforeAddPen(e){this.canvas.beforeAddPen=e}get beforeAddPens(){return this.canvas.beforeAddPens}set beforeAddPens(e){this.canvas.beforeAddPens=e}get beforeAddAnchor(){return this.canvas.beforeAddAnchor}set beforeAddAnchor(e){this.canvas.beforeAddAnchor=e}get beforeRemovePens(){return this.canvas.beforeRemovePens}set beforeRemovePens(e){this.canvas.beforeRemovePens=e}get beforeRemoveAnchor(){return this.canvas.beforeRemoveAnchor}set beforeRemoveAnchor(e){this.canvas.beforeRemoveAnchor=e}setOptions(e={}){var n;(e.grid!==void 0||e.gridColor!==void 0||e.gridSize!==void 0)&&this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),(e.rule!==void 0||e.ruleColor!==void 0||e.ruleOptions!==void 0)&&(this.store.patchFlagsTop=!0,e.ruleOptions&&(n=this.store.options)!=null&&n.ruleOptions&&(Object.assign(this.store.options.ruleOptions,e.ruleOptions),e.ruleOptions=this.store.options.ruleOptions)),e.background!==void 0&&this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),e.resizeMode!==void 0&&(e.resizeMode||(this.canvas.hotkeyType=Qt.None)),(e.width!==void 0||e.height!==void 0)&&(this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),this.canvas&&this.canvas.canvasTemplate.canvas.style.backgroundImage&&(this.canvas.canvasTemplate.canvas.style.backgroundImage="")),this.store.options=Object.assign(this.store.options,e),this.canvas&&e.scroll!==void 0&&(e.scroll?(!this.canvas.scroll&&(this.canvas.scroll=new r8(this.canvas)),this.canvas.scroll.show()):this.canvas.scroll&&this.canvas.scroll.hide())}getOptions(){return this.store.options}setTheme(e){this.store.data.theme=e,this.setBackgroundColor(this.store.theme[e].background),this.canvas.parentElement.style.background=this.store.theme[e].parentBackground,this.store.data.color=this.store.theme[e].color,this.setOptions({ruleColor:this.store.theme[e].ruleColor,ruleOptions:this.store.theme[e].ruleOptions}),this.render()}setDatabyOptions(e={}){const{color:n,activeColor:r,activeBackground:a,grid:i,gridColor:o,gridSize:s,fromArrow:c,toArrow:u,rule:d,ruleColor:f,textColor:h,x:v=0,y:p=0}=e;this.setRule({rule:d,ruleColor:f}),this.setGrid({grid:i,gridColor:o,gridSize:s}),this.store.data=Object.assign(this.store.data,{textColor:h,color:n,activeColor:r,activeBackground:a,fromArrow:c,toArrow:u,x:v,y:p})}init(e){typeof e=="string"?this.canvas=new o8(this,document.getElementById(e),this.store):this.canvas=new o8(this,e,this.store),this.resize(),this.canvas.listen()}initEventFns(){this.events[Hn.Link]=(e,n)=>{if(window&&n.value&&typeof n.value=="string"){window.open(n.value,n.params??"_blank");return}console.warn("[meta2d] Link param is not a string")},this.events[Hn.SetProps]=(e,n)=>{const r=n.value;if(r&&typeof r=="object"){(n.params?this.find(n.params):this.find(e.id)).forEach(i=>{r.hasOwnProperty("visible")&&i.visible!==r.visible&&this.setVisible(i,r.visible),this.setValue({id:i.id,...r},{render:!1,doEvent:!1})}),this.render();return}console.warn("[meta2d] SetProps value is not an object")},this.events[Hn.StartAnimate]=(e,n)=>{let r=e;if(n.value&&(r=this.findOne(n.value)),!(this.store.animates.has(r)&&!r.calculative.pause&&r.animateName===n.params)){if(n.targetType&&n.params){this.startAnimate(n.value||[e],n.params);return}if(!n.value||typeof n.value=="string"){this.startAnimate(n.value||[e]);return}console.warn("[meta2d] StartAnimate value is not a string")}},this.events[Hn.PauseAnimate]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.pauseAnimate(n.value||[e]);return}console.warn("[meta2d] PauseAnimate value is not a string")},this.events[Hn.StopAnimate]=(e,n)=>{if(!n.value||typeof n.value=="string"){if(n.value){let r=this.findOne(n.value);if(!this.store.animates.has(r))return}else if(!this.store.animates.has(e))return;this.stopAnimate(n.value||[e]);return}console.warn("[meta2d] StopAnimate event value is not a string")},this.events[Hn.StartVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.startVideo(n.value||[e]);return}console.warn("[meta2d] StartVideo value is not a string")},this.events[Hn.PauseVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.pauseVideo(n.value||[e]);return}console.warn("[meta2d] PauseVideo value is not a string")},this.events[Hn.StopVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.stopVideo(n.value||[e]);return}console.warn("[meta2d] StopVideo event value is not a string")},this.events[Hn.JS]=(e,n,r)=>{var a;if(n.value&&!n.fn)try{if(typeof n.value!="string")throw new Error("[meta2d] Function value must be string");const i=n.value;n.fn=new Function("pen","params","context",i)}catch(i){console.error("[meta2d]: Error on make a function:",i)}(a=n.fn)==null||a.call(n,e,r||n.params,{meta2d:this,eventName:n.name})},this.events[Hn.GlobalFn]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] GlobalFn value must be a string");return}globalThis[n.value]&&globalThis[n.value](e,n.params)},this.events[Hn.Emit]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}this.store.emitter.emit(n.value,{pen:e,params:n.params,eventName:n.name})},this.events[Hn.SendPropData]=(e,n)=>{const r=Te(n.value);if(r&&typeof r=="object"){const a=n.params?this.findOne(n.params):e;for(let i in r)(r[i]===void 0||r[i]==="")&&(r[i]=a[i]);r.id=a.id,this.doSendDataEvent(r,n.extend);return}console.warn("[meta2d] SendPropData value is not an object")},this.events[Hn.SendVarData]=(e,n)=>{const r=Te(n.value);if(r&&typeof r=="object"){const a=n.params?this.findOne(n.params):e;let i=[];for(let o in r){let s={dataId:o,value:r[o]};if(!s.value){let c=a.form.find(u=>u.dataIds&&u.dataIds.dataId===s.dataId);c&&(s.value=a[c.key])}i.push(s)}this.doSendDataEvent(i,n.extend);return}console.warn("[meta2d] SendVarData value is not an object")},this.events[Hn.Navigator]=(e,n)=>{n.value&&typeof n.value=="string"&&this.navigatorTo(n.value)},this.events[Hn.Dialog]=(e,n)=>{if(n.params&&typeof n.params=="string"){let r=n.params;if(n.params.includes("${")){let a=n.params.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));a&&(a==null||a.forEach(i=>{r=r.replace(`\${${i}}`,e[i])}))}this.canvas.dialog.show(n.value,r,n.extend)}},this.events[Hn.SendData]=(e,n)=>{var a,i;if((a=n.list)!=null&&a.length){if(n.network&&n.network.protocol==="jetLinks"){const s=[];n.list.forEach((c,u)=>{var f,h;const d=c.params?this.findOne(c.params):e;s[u]={deviceId:d.deviceId,productId:d.productId,properties:{}};for(let v in c.value)if(c.value[v]===void 0||c.value[v]===""){const p=(f=d.realTimes)==null?void 0:f.find(g=>g.propertyId===v);p&&(s[u].properties[v]=d[p.key])}else if(typeof c.value[v]=="string"&&((h=c.value[v])==null?void 0:h.indexOf("${"))>-1){let p=c.value[v].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));p!=null&&p.length&&(s[u].properties[v]=d[p[0]])}else s[u].properties[v]=c.value[v]}),this.jetLinksClient&&s.length&&s.forEach(c=>{this.jetLinksClient.send(JSON.stringify({type:"sub",topic:`/device-message-sender/${c.productId}/${c.deviceId}`,parameter:{messageType:"WRITE_PROPERTY",properties:c.properties,headers:{async:!1}},id:c.productId+"/"+c.deviceId+"-"+it()}))});return}const o={};n.list.forEach(s=>{var u;const c=s.params?this.findOne(s.params):e;for(let d in s.value)if(s.value[d]===void 0||s.value[d]==="")o[d]=c[d];else if(typeof s.value[d]=="string"&&((u=s.value[d])==null?void 0:u.indexOf("${"))>-1){let f=s.value[d].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));f!=null&&f.length&&(o[d]=c[f[0]])}else o[d]=s.value[d]}),e.deviceId&&(o.deviceId=e.deviceId),this.sendDataToNetWork(o,e,n);return}const r=Te(n.value);if(r&&typeof r=="object"&&n.targetType==="id"){const o=n.params?this.findOne(n.params):e;for(let s in r)if(r[s]===void 0||r[s]==="")r[s]=o[s];else if(typeof r[s]=="string"&&((i=r[s])==null?void 0:i.indexOf("${"))>-1){let c=r[s].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));c!=null&&c.length&&(r[s]=o[c[0]])}o.deviceId&&(r.deviceId=o.deviceId),this.sendDataToNetWork(r,e,n);return}},this.events[Hn.PostMessage]=(e,n)=>{var o;if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}const r=n.params?this.findOne(n.params):e;if(r.name!=="iframe"||!r.iframe){console.warn("不是嵌入页面");return}let a=b1(r.iframe.split("?")[1]);const i={};(o=n.list)!=null&&o.length&&n.list.forEach(s=>{var u;const c=s.params?this.findOne(s.params):e;for(let d in s.value)if(s.value[d]===void 0||s.value[d]==="")i[d]=c[d];else if(typeof s.value[d]=="string"&&((u=s.value[d])==null?void 0:u.indexOf("${"))>-1){let f=s.value[d].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));f!=null&&f.length&&(i[d]=c[f[0]])}else i[d]=s.value[d]}),r.calculative.singleton.div.children[0].contentWindow.postMessage(JSON.stringify({name:n.value,id:a.id,value:i}),"*")},this.events[Hn.PostMessageToParent]=(e,n)=>{var a;if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}const r={};(a=n.list)!=null&&a.length&&n.list.forEach(i=>{var s;const o=i.params?this.findOne(i.params):e;for(let c in i.value)if(i.value[c]===void 0||i.value[c]==="")r[c]=o[c];else if(typeof i.value[c]=="string"&&((s=i.value[c])==null?void 0:s.indexOf("${"))>-1){let u=i.value[c].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));u!=null&&u.length&&(r[c]=o[u[0]])}else r[c]=i.value[c]}),window.parent.postMessage(JSON.stringify({name:n.value,value:r}),"*")},this.events[Hn.Message]=(e,n)=>{this.message({theme:n.params,content:n.value,...n.extend})}}message(e){new G_e(this.canvas.parentElement,e).init()}closeAll(){for(let e in ba)ba[e].close()}async navigatorTo(e){if(!e)return;const n=new URL(window.location);n.searchParams.set("id",e),history.pushState({},"",n);const r=this.store.options.navigatorNetWork,a=location.href.includes("2d.")||location.href.includes("/2d")?"2d":"v",i=await fetch(((r==null?void 0:r.url)||`/api/data/${a}/get`)+((r==null?void 0:r.method)==="GET"?`?id=${e}`:""),{headers:{Authorization:`Bearer ${this.getCookie("token")||localStorage.getItem("token")||new URLSearchParams(location.search).get("token")||""}`},method:(r==null?void 0:r.method)||"POST",body:(r==null?void 0:r.method)==="GET"?void 0:JSON.stringify({id:e})});if(i.ok){let o=await i.text();o.constructor===Object||o.constructor===Array?o=JSON.parse(JSON.stringify(o)):typeof o=="string"&&(o=JSON.parse(o)),o.data&&(o=o.data),this.open(o)}else this.store.emitter.emit("error",{type:"http",error:i})}doSendDataEvent(e,n){let r=JSON.stringify(e);this.mqttClient&&this.mqttClient.connected&&(n?n.split(",").forEach(a=>{this.mqttClient.publish(a,r)}):this.store.data.mqttTopics&&this.store.data.mqttTopics.split(",").forEach(a=>{this.mqttClient.publish(a,r)})),this.websocket&&this.websocket.readyState===1&&this.websocket.send(r),(this.store.data.https||this.store.data.http)&&this.sendDatabyHttp(r),this.store.emitter.emit("sendData",r)}async sendDataToNetWork(e,n,r){var i;const a=Te(r.network);if(a.data&&(Object.assign(a,a.data),delete a.data),!!a.url){if(a.protocol==="http"){if(typeof a.headers=="object"){for(let u in a.headers)if(typeof a.headers[u]=="string"){let d=a.headers[u].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));d&&(a.headers[u]=a.headers[u].replace(`\${${d[0]}}`,this.getDynamicParam(d[0])))}}let o,s=a.url;if(a.method==="GET"&&(o="?"+Object.keys(e).map(u=>u+"="+e[u]).join("&")),a.method==="POST"&&s.indexOf("${")>-1){let u=s.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));u&&u.forEach(d=>{s=s.replace(`\${${d}}`,cu(n,d)||this.getDynamicParam(d))})}const c=await fetch(s+(o||""),{headers:a.headers||{},method:a.method,body:a.method==="POST"?JSON.stringify(e):void 0});if(c.ok){if(r.callback){const u=await c.text();if(!r.fn)try{if(typeof r.callback!="string")throw new Error("[meta2d] Function callback must be string");const d=r.callback;r.fn=new Function("pen","data","context",d)}catch(d){console.error("[meta2d]: Error on make a function:",d)}(i=r.fn)==null||i.call(r,n,u,{meta2d:this,e:r})}console.info("http消息发送成功")}}else if(a.protocol==="mqtt"){const o=this.mqttClients.filter(s=>s.options.href===a.url);if(o&&o.length)o[0].connected&&a.topics.split(",").forEach(s=>{o[0].publish(s,e)});else{let s=Cg.connect(a.url,a.options);s.on("connect",()=>{console.info("mqtt连接成功"),a.topics.split(",").forEach(c=>{s.publish(c,e),s==null||s.end()})})}}else if(a.protocol==="websocket"){const o=this.websockets.filter(s=>s.url===a.url);if(o&&o.length)o[0].readyState===1&&o[0].send(e);else{let s=new WebSocket(a.url,a.protocols||void 0);s.onopen=function(){console.info("websocket连接成功"),s.send(e),setTimeout(()=>{s.close()},100)}}}}}resize(e,n){this.canvas.resize(e,n),this.render(),this.store.emitter.emit("resize",{width:e,height:n}),this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.init()}async addPen(e,n,r=!0,a=!1){return await this.canvas.addPen(e,n,r,a)}async addPens(e,n,r=!1){return await this.canvas.addPens(e,n,r)}render(e){var n;(n=this.canvas)==null||n.render(e)}async setBackgroundImage(e,n){var s,c,u,d;let r=this;async function a(f){return new Promise(h=>{const v=new Image;v.src=f,r.store.options.cdn&&!(f.startsWith("http")||f.startsWith("//")||f.startsWith("data:image"))&&(v.src=r.store.options.cdn+f),v.crossOrigin="anonymous",v.onload=()=>{h(v)}})}this.store.data.bkImage=e;const i=(n==null?void 0:n.width)||((s=this.store.data)==null?void 0:s.width)||((c=this.store.options)==null?void 0:c.width),o=(n==null?void 0:n.height)||((u=this.store.data)==null?void 0:u.height)||((d=this.store.options)==null?void 0:d.height);if(i&&o?(this.canvas.canvasTemplate.canvas.style.backgroundImage=null,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)):this.canvas.canvasTemplate.canvas.style.backgroundImage=e?`url('${e}')`:"",e){const f=await a(e);this.store.bkImg=f,i&&o&&this.canvas&&(this.canvas.canvasTemplate.init(),this.render())}else this.store.bkImg=null}setBackgroundColor(e=this.store.data.background){this.store.data.background=e,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)}setGrid({grid:e=this.store.data.grid,gridColor:n=this.store.data.gridColor,gridSize:r=this.store.data.gridSize,gridRotate:a=this.store.data.gridRotate}={}){this.store.data.grid=e,this.store.data.gridColor=n,this.store.data.gridSize=r<0?0:r,this.store.data.gridRotate=a,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)}setRule({rule:e=this.store.data.rule,ruleColor:n=this.store.data.ruleColor}={}){this.store.data.rule=e,this.store.data.ruleColor=n,this.store.patchFlagsTop=!0}open(e,n=!0){if(this.clear(!1,e==null?void 0:e.template),this.canvas.autoPolylineFlag=!0,e){this.setBackgroundImage(e.bkImage,e),Object.assign(this.store.data,e),this.store.data.pens=[];for(const r of e.pens)r.id||(r.id=it()),!r.calculative&&(r.calculative={canvas:this.canvas}),this.store.pens[r.id]=r;for(const r of e.pens)this.canvas.makePen(r)}if(this.canvas.patchFlagsLines.forEach(r=>{r.type&&this.canvas.initLineRect(r)}),this.store.data.template||(this.store.data.template=it()),n||(this.canvas.opening=!0),this.initBindDatas(),this.initBinds(),this.initMessageEvents(),this.initGlobalTriggers(),this.render(),this.listenSocket(),this.connectSocket(),this.connectNetwork(),this.startDataMock(),this.startAnimate(),this.startVideo(),this.doInitJS(),this.doInitFn(),setTimeout(()=>{const r=this.store.data.pens.find(a=>a.autofocus);r&&this.focus(r.id)},100),this.store.data.iconUrls)for(const r of this.store.data.iconUrls)Ixe(r,()=>{this.render()});this.canvas.autoPolylineFlag=!1,this.store.emitter.emit("opened"),this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.init()}cacheData(e){if(e&&this.store.options.cacheLength){let n=this.store.cacheDatas.findIndex(r=>r.data&&r.data._id===e);if(n===-1)this.store.cacheDatas.push({data:Te(this.store.data,!0)}),this.store.cacheDatas.length>this.store.options.cacheLength&&this.store.cacheDatas.shift();else{let r=this.store.cacheDatas.splice(n,1)[0];this.store.cacheDatas.push(r)}}}loadCacheData(e){let n=this.store.cacheDatas.findIndex(r=>r.data&&r.data._id===e);n!==-1&&(this.store.data=this.store.cacheDatas[n].data,this.setBackgroundImage(this.store.data.bkImage),this.store.pens={},this.store.data.pens.forEach(r=>{r.calculative.canvas=this.canvas,this.store.pens[r.id]=r,gt.path2dDraws[r.name]&&this.store.path2dMap.set(r,gt.path2dDraws[r.name](r)),r.type&&this.store.path2dMap.set(r,gt.path2dDraws[r.name](r)),r.image&&(r.calculative.imageDrawed=!1,this.canvas.loadImage(r))}),this.render())}initBindDatas(){this.store.bindDatas={},this.store.data.pens.forEach(e=>{var n;(n=e.form)==null||n.forEach(r=>{let a;r.dataIds&&(Array.isArray(r.dataIds)?a=r.dataIds:a=[r.dataIds]),a==null||a.forEach(i=>{this.store.bindDatas[i.dataId]||(this.store.bindDatas[i.dataId]=[]),this.store.bindDatas[i.dataId].push({id:e.id,formItem:r})})})})}initBinds(){this.jetLinksList=[],this.store.bind={},this.store.data.pens.forEach(e=>{var n;(n=e.realTimes)==null||n.forEach(r=>{if(r.bind&&r.bind.id){this.store.bind[r.bind.id]||(this.store.bind[r.bind.id]=[]),this.store.bind[r.bind.id].push({id:e.id,key:r.key});const a=r.productId||e.productId,i=r.deviceId||e.deviceId,o=r.propertyId;if(a&&i&&o){const s=this.jetLinksList.findIndex(c=>c.topic.startsWith(`/${a}/${i}`));s>-1?this.jetLinksList[s].properties.includes(r.propertyId)||this.jetLinksList[s].properties.push(r.propertyId):this.jetLinksList.push({topic:`/${a}/${i}`,deviceId:i,properties:[r.propertyId]})}}})})}connectSocket(){this.connectWebsocket(),this.connectMqtt(),this.connectHttp()}doInitJS(){const e=this.store.data.initJs;if(e&&e.trim())try{new Function("context",e)({meta2d:this})}catch(n){console.warn("initJs error",n)}}doInitFn(){let e=b1(),n=[];for(let r in e)e.hasOwnProperty(r)&&r.startsWith("bind-")&&n.push({id:r.replace("bind-",""),dataId:r.replace("bind-",""),value:e[r]});n.length&&this.setDatas(n,{history:!1})}drawLine(e){e&&i8(this.store),this.canvas.drawingLineName=e}alignPenToGrid(e){this.canvas.alignPenToGrid(e)}drawingPencil(){this.canvas.drawingPencil()}stopPencil(){this.canvas.stopPencil()}lock(e){this.store.data.locked=e,this.finishDrawLine(!0),this.canvas.drawingLineName="",this.stopPencil(),this.store.data.pens.forEach(n=>{var r;n.externElement===!0&&(r=n.calculative.singleton)!=null&&r.div&&dr(n,n.calculative.singleton.div)}),e>0&&this.initMessageEvents()}async finishDrawLine(e){await this.canvas.finishDrawline(e)}async finishPencil(){await this.canvas.finishPencil()}updateLineType(e,n){if(!e||e.name!="line"||!n||!this.canvas[n])return;e.lineName=n;const r=Sn(e),a=Xt(e);r.prev=void 0,r.next=void 0,a.prev=void 0,a.next=void 0,e.calculative.worldAnchors=[r,a],e.calculative.activeAnchor=r,this.canvas[n](this.store,e,a),e.lineName==="curve"&&(r.prev={penId:r.penId,x:r.x-50,y:r.y},r.next={penId:r.penId,x:r.x+50,y:r.y},a.prev={penId:a.penId,x:a.x-50,y:a.y},a.next={penId:a.penId,x:a.x+50,y:a.y}),e.calculative.activeAnchor=void 0,this.canvas.initLineRect(e),this.render()}addDrawLineFn(e,n){this.canvas[e]=n,this.canvas.drawLineFns.push(e)}removeDrawLineFn(e){const n=this.canvas.drawLineFns.indexOf(e);n>-1&&this.canvas.drawLineFns.splice(n,1)}showMagnifier(){this.canvas.showMagnifier()}hideMagnifier(){this.canvas.hideMagnifier()}toggleMagnifier(){this.canvas.toggleMagnifier()}clear(e=!0,n){var r;for(const a of this.store.data.pens)(r=a.onDestroy)==null||r.call(a,a);Sxe(this.store,n),this.hideInput(),this.canvas.tooltip.hide(),this.map&&this.map.isShow&&(this.map.show(),this.map.setView()),this.canvas.clearCanvas(),sessionStorage.removeItem("page"),this.store.clipboard=void 0,this.store.sameTemplate||(this.canvas.canvasTemplate.bgPatchFlags=!0),this.store.patchFlagsBackground=!0,this.store.patchFlagsTop=!0,this.setBackgroundImage(void 0),e&&this.render()}emit(e,n){this.store.emitter.emit(e,n)}on(e,n){return this.store.emitter.on(e,n),this}off(e,n){return this.store.emitter.off(e,n),this}registerMoveDock(e){this.canvas.customMoveDock=e}registerResizeDock(e){this.canvas.customResizeDock=e}find(e){return this.canvas.find(e)}findOne(e){return this.canvas.findOne(e)}getPenRect(e){return this.canvas.getPenRect(e)}setPenRect(e,n,r=!0){this.canvas.setPenRect(e,n,r)}startAnimate(e,n){this.stopAnimate(e);let r;e?typeof e=="string"?r=this.find(e):r=e:r=this.store.data.pens.filter(a=>(a.type||a.frames)&&a.autoPlay||a.animations&&a.animations.length&&a.animations.findIndex(i=>i.autoPlay)!==-1),r.length&&(r.forEach(a=>{var i,o;if(a.calculative.pause){const s=Date.now()-a.calculative.pause;a.calculative.pause=void 0,a.calculative.frameStart+=s,a.calculative.frameEnd+=s}else{let s=-1;if(n!==void 0&&a.animations){if(typeof n=="string"){if(s=a.animations.findIndex(c=>c.name===n),s===-1)return}else if(typeof n=="number")if(a.animations.length>n)s=n;else return}else n===void 0&&(s=(i=a.animations)==null?void 0:i.findIndex(c=>c.autoPlay),s===-1&&((o=a.animations)!=null&&o.length)&&(s=0));if(s!==-1&&s!==void 0){const c=Te(a.animations[s]);c.animateName=c.name,delete c.name,c.currentAnimation=s,!a.type&&c.frames&&(c.showDuration=this.calcAnimateDuration(c)),this.setValue({id:a.id,...c},{doEvent:!1,history:!1})}this.store.animates.add(a),a.type||this.store.animateMap.set(a,a.calculative.canvas.getFrameProps(a))}}),this.initImageCanvas(r),this.canvas.animate())}pauseAnimate(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:this.store.animates.forEach(r=>{n.push(r)}),n.forEach(r=>{r.calculative.pause||(r.calculative.pause=Date.now())})}stopAnimate(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:this.store.animates.forEach(r=>{n.push(r)}),n.forEach(r=>{r.currentAnimation=void 0,r.calculative.pause=void 0,r.calculative.start=void 0,r.calculative.duration=void 0,r.calculative.animatePos=0,this.store.animates.delete(r),this.canvas.restoreNodeAnimate(r),this.canvas.updateLines(r),this.store.animateMap.delete(r)}),this.initImageCanvas(n),setTimeout(()=>{var r;(r=this.canvas)==null||r.calcActiveRect(),this.render()},20)}startVideo(e){let n;e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var a,i;(a=r.calculative.media)==null||a.play(),(i=r.onStartVideo)==null||i.call(r,r)})}pauseVideo(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var a,i;(a=r.calculative.media)==null||a.pause(),(i=r.onPauseVideo)==null||i.call(r,r)})}stopVideo(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var a;r.calculative.media&&(r.calculative.media.currentTime=0,r.calculative.media.pause()),(a=r.onStopVideo)==null||a.call(r,r)})}calcAnimateDuration(e){return e.frames.reduce((n,r)=>n+r.duration,0)}combine(e=this.store.active,n){if(!e||!e.length)return;const r=Te(e);if(e.length===1&&e[0].type){e[0].type=Gt.Node,this.canvas.active(e),this.pushHistory({type:nt.Update,initPens:r,pens:Te(e,!0)}),this.render();return}const a=hi(e);let i={id:it(),name:"combine",...a,children:[],showChild:n};this.canvas.makePen(i);const o=Te(i);let s=1/0;return e.forEach(c=>{const u=this.store.data.pens.findIndex(f=>f.id===c.id);if(u<s&&(s=u),c===i||c.parentId===i.id||c.id===i.id)return;i.children.push(c.id),c.parentId=i.id;const d=hl(c.calculative.worldRect,a);Object.assign(c,d),c.locked=c.lockedOnCombine??Ft.None,c.locked=c.interaction||v1.includes(c.name)?0:c.locked}),this.store.data.pens.splice(s,0,i),this.store.data.pens.pop(),this.canvas.active([i]),this.pushHistory({type:nt.Add,pens:[o],step:3}),this.pushHistory({type:nt.Update,initPens:[o],pens:[i],step:3}),this.pushHistory({type:nt.Update,initPens:r,pens:e,step:3}),n!=null&&(e.forEach(c=>{Do(c,!0)}),this.initImageCanvas([i])),this.store.emitter.emit("combine",[i]),this.render(),i}uncombine(e){if(!e&&this.store.active&&(e=this.store.active[0]),!e||!e.children)return;const n=e.children.map(i=>this.store.pens[i]);let r=Te(n);n.forEach(i=>{i.parentId=void 0,i.x=i.calculative.worldRect.x,i.y=i.calculative.worldRect.y,i.width=i.calculative.worldRect.width,i.height=i.calculative.worldRect.height,i.locked=Ft.None,i.calculative.active=void 0,i.calculative.hover=!1,this.setVisible(i,!0)});const a=this.isCombine(e)?3:2;this.pushHistory({type:nt.Update,initPens:r,pens:n,step:a}),r=[Te(e)],e.children=void 0,this.pushHistory({type:nt.Update,initPens:r,pens:[e],step:a}),this.isCombine(e)&&(this.delete([e]),this.store.histories[this.store.histories.length-1].step=a),this.inactive()}appendChild(e=this.store.active){if(!e||e.length<2)return;const n=e.findIndex(r=>r.name==="combine"&&r.showChild!==void 0);if(n!==-1){let r=e[n];const a=hi(e);Object.assign(r,a),Object.assign(r.calculative.worldRect,a),du(r),r.children.forEach(i=>{const o=this.store.pens[i],s=hl(o.calculative.worldRect,a);Object.assign(o,s)}),e.forEach(i=>{if(i.id!==r.id){r.children.push(i.id),i.parentId=r.id;const o=hl(i.calculative.worldRect,a);Object.assign(i,o),i.locked=i.lockedOnCombine??Ft.DisableMove,i.locked=i.interaction||v1.includes(i.name)?0:i.locked,Do(i,!0)}}),this.initImageCanvas(e),this.render()}else console.warn("Invalid operation!")}updateRectbyChild(e,n,r){if(bn(e),cn(e),n.calculative.worldRect=e,Mo(e,r.calculative.worldRect,!0)){const a=hl(e,r.calculative.worldRect);Object.assign(n,a)}else{let a=Math.min(e.x,r.calculative.worldRect.x),i=Math.min(e.y,r.calculative.worldRect.y),o=Math.max(e.ex,r.calculative.worldRect.ex),s=Math.max(e.ey,r.calculative.worldRect.ey);r.calculative.worldRect={x:a,y:i,width:o-a,height:s-i,ex:o,ey:s},r.parentId||Object.assign(r,r.calculative.worldRect),cn(r.calculative.worldRect),r.children.forEach(c=>{const u=this.store.pens[c],d=hl(u.calculative.worldRect,r.calculative.worldRect);Object.assign(u,d)}),r.parentId&&this.updateRectbyChild(r.calculative.worldRect,r,this.store.pens[r.parentId])}this.canvas.updatePenRect(r),this.render()}isCombine(e){return!!(e.name==="combine"||e.children&&e.children.length>0)}active(e,n=!0){this.canvas.active(e,n)}inactive(){this.canvas.inactive()}activeAll(){this.canvas.active(this.store.data.pens.filter(e=>!e.parentId&&e.locked!==Ft.Disable)),this.render()}focus(e){const n=this.findOne(e);n&&(this.store.hover=n,this.store.hover.calculative.hover=!0,this.showInput(n))}delete(e,n=!1,r=!0){this.canvas.delete(e,n,r)}scale(e,n={x:0,y:0}){this.canvas.scale(e,n)}translate(e,n){this.canvas.translate(e,n)}translatePens(e,n,r){this.canvas.translatePens(e,n,r)}getParent(e,n){return ma(e,n)}getAllChildren(e){return fi(e,this.store)}getAllFollowers(e){return x1(e,this.store)}data(){const e=Te(this.store.data),{pens:n,paths:r}=this.store.data;e.version=r4.version,e.paths={};for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.find(i=>i.pathId===a)&&(e.paths[a]=r[a]);return e.dataPoints=[...Object.keys(this.store.bind),...Object.keys(this.store.bindDatas)],e}copy(e){this.canvas.copy(e)}cut(e){this.canvas.cut(e)}paste(){this.canvas.paste()}undo(){this.canvas.undo()}redo(){this.canvas.redo()}listenSocket(){try{let e;const n=this.store.data.socketCbJs;if(n&&(e=new Function("e","context",n)),!e)return this.socketFn=null,!1;this.socketFn=e}catch(e){return console.error("Create the function for socket:",e),!1}return!0}connectWebsocket(e){this.closeWebsocket(),e&&(this.store.data.websocket=e),this.store.data.websocket&&(this.websocket=new WebSocket(this.store.data.websocket,this.store.data.websocketProtocols||void 0),this.websocket.onmessage=n=>{this.socketCallback(n.data,{type:"websocket",url:this.store.data.websocket})},this.websocket.onerror=n=>{this.store.emitter.emit("error",{type:"websocket",error:n})},this.websocket.onclose=()=>{if(this.store.options.reconnetTimes&&(this.websocketTimes++,this.websocketTimes>=this.store.options.reconnetTimes)){this.websocketTimes=0,this.closeWebsocket();return}console.info("Canvas websocket closed and reconneting..."),this.connectWebsocket()})}closeWebsocket(){this.websocket&&(this.websocket.onclose=void 0,this.websocket.close(),this.websocket=void 0)}connectMqtt(e){if(this.closeMqtt(),e&&(this.store.data.mqtt=e.mqtt,this.store.data.mqttTopics=e.mqttTopics,this.store.data.mqttOptions=e.mqttOptions),this.store.data.mqtt){this.store.data.mqttOptions.clientId&&!this.store.data.mqttOptions.customClientId&&(this.store.data.mqttOptions.clientId=it());const n={...this.store.data.mqttOptions};n.username||delete n.username,n.password||delete n.password;const{username:r,password:a}=n;r&&a||!r&&!a?(this.mqttClient=Cg.connect(this.store.data.mqtt,n),this.mqttClient.on("message",(i,o)=>{this.socketCallback(o.toString(),{topic:i,type:"mqtt",url:this.store.data.mqtt})}),this.mqttClient.on("error",i=>{this.store.emitter.emit("error",{type:"mqtt",error:i})}),this.mqttClient.on("close",()=>{this.store.options.reconnetTimes&&(this.mqttTimes++,this.mqttTimes>=this.store.options.reconnetTimes&&(this.mqttTimes=0,this.closeMqtt()))}),this.store.data.mqttTopics&&this.mqttClient.subscribe(this.store.data.mqttTopics.split(","))):console.warn("缺少用户名或密码")}}closeMqtt(){var e;(e=this.mqttClient)==null||e.end()}connectHttp(){this.closeHttp();const{https:e}=this.store.data;if(e)this.store.data.cancelFirstConnect||e.forEach(async n=>{this.oldRequestHttp(n)}),e.forEach((n,r)=>{n.http&&(n.times=0,this.httpTimerList[r]=setInterval(async()=>{this.oldRequestHttp(n),this.store.options.reconnetTimes&&(n.times++,n.times>=this.store.options.reconnetTimes&&(n.times=0,clearInterval(this.httpTimerList[r]),this.httpTimerList[r]=void 0))},n.httpTimeInterval||1e3))});else{const{http:n,httpTimeInterval:r,httpHeaders:a}=this.store.data;n&&(this.httpTimer=setInterval(async()=>{const i=await fetch(n,{headers:a});if(i.ok){const o=await i.text();this.socketCallback(o,{type:"http",url:n})}},r||1e3))}}async oldRequestHttp(e){let n=Te(e);if(n.http){const r=await fetch(n.http,{headers:n.httpHeaders,method:n.method||"GET",body:n.method==="POST"?JSON.stringify(n.body):void 0});if(r.ok){const a=await r.text();this.socketCallback(a,{type:"http",url:n.http})}else this.store.emitter.emit("error",{type:"http",error:r})}}async sendDatabyHttp(e){const{https:n}=this.store.data;if(n)n.forEach(async r=>{r.http&&(await fetch(r.http,{method:"post",body:e,headers:r.httpHeaders})).ok&&console.info("http消息发送成功")});else{const{http:r,httpHeaders:a}=this.store.data;r&&(await fetch(r,{method:"post",body:e,headers:a})).ok&&console.info("http消息发送成功")}}closeHttp(){clearInterval(this.httpTimer),this.httpTimer=void 0,this.httpTimerList&&this.httpTimerList.forEach(e=>{clearInterval(e),e=void 0})}connectNetwork(){this.closeNetwork();const{networks:e}=this.store.data,n=[];if(e){let r=0;this.mqttClients=[];let a=0,i=0;this.websockets=[],e.forEach(async o=>{if(o.protocol==="mqtt")o.index=r,o.options.clientId&&!o.options.customClientId&&(o.options.clientId=it()),o.times=0,this.mqttClients[r]=Cg.connect(o.url,o.options),this.mqttClients[r].on("message",(s,c)=>{this.socketCallback(c.toString(),{topic:s,type:"mqtt",url:o.url})}),this.mqttClients[r].on("error",s=>{this.store.emitter.emit("error",{type:"mqtt",error:s})}),this.mqttClients[r].on("close",()=>{var s;this.store.options.reconnetTimes&&(o.times++,o.times>=this.store.options.reconnetTimes&&(o.times=0,this.mqttClients&&((s=this.mqttClients[o.index])==null||s.end())))}),o.topics&&this.mqttClients[r].subscribe(o.topics.split(",")),r+=1;else if(o.protocol==="websocket")o.index=a,this.connectNetWebSocket(o),a+=1;else if(o.protocol==="http")n.push({url:o.url,interval:o.interval,headers:o.headers||void 0,method:o.method,body:o.body});else if(o.protocol==="iot"){const s=await this.getIotToken(o.devices);o.method==="mqtt"?(o.index=r,this.mqttClients[r]=Cg.connect(o.url),this.mqttClients[r].on("message",(c,u)=>{this.socketCallback(u.toString(),{topic:`le5le-iot/properties/${s}`,type:"iot",url:o.url,method:"mqtt"})}),this.mqttClients[r].on("error",c=>{this.store.emitter.emit("error",{type:"mqtt",error:c})}),this.mqttClients[r].subscribe(`le5le-iot/properties/${s}`),r+=1):o.method==="websocket"&&(o.index=a,this.websockets[a]=new WebSocket(`${location.protocol==="https:"?"wss":"ws"}://${location.host}/api/ws/iot/properties`,s),this.websockets[a].onmessage=c=>{this.socketCallback(c.data,{type:"iot",method:"websocket"})},this.websockets[a].onerror=c=>{this.store.emitter.emit("error",{type:"websocket",error:c})},a+=1)}else o.protocol==="sql"?(await this.doSqlCode("list",o.dbId,o.sql),o.interval&&(o.index=i,this.sqlTimerList[i]=setInterval(async()=>{await this.doSqlCode("list",o.dbId,o.sql)},o.interval),i+=1)):o.protocol==="jetLinks"&&this.jetLinksList.length&&(this.jetLinksClient=new WebSocket(`${o.url}/${localStorage.getItem("X-Access-Token")||this.getCookie("X-Access-Token")||new URLSearchParams(location.search).get("X-Access-Token")||""}`),this.jetLinksClient.onmessage=s=>{var u;const c=JSON.parse(s.data);if(c.payload&&c.payload.success&&((u=c.payload)!=null&&u.properties)){const d=[];for(let f in c.payload.properties)f.startsWith("_")||d.push({id:`${c.payload.headers.productId}#${c.payload.deviceId}#${f}`,value:c.payload.properties[f]});this.setDatas(d,{history:!1})}},this.jetLinksClient.onopen=()=>{this.jetLinksList.forEach(s=>{this.jetLinksClient.send(JSON.stringify({type:"sub",topic:`/device${s.topic}/message/property/report`,parameter:{deviceId:s.deviceId,properties:s.properties,history:1},id:s.topic+"-"+it()}))})})})}this.onNetworkConnect(n)}connectNetWebSocket(e){var n;this.websockets[e.index]&&(this.websockets[e.index].onclose=void 0,(n=this.websockets[e.index])==null||n.close(),this.websockets[e.index]=void 0),this.websockets[e.index]=new WebSocket(e.url,e.protocols||void 0),this.websockets[e.index].onmessage=r=>{this.socketCallback(r.data,{type:"websocket",url:e.url})},this.websockets[e.index].onerror=r=>{this.store.emitter.emit("error",{type:"websocket",error:r})},this.websockets[e.index].onclose=()=>{var r;if(this.store.options.reconnetTimes&&(e.times++,e.times>=this.store.options.reconnetTimes)){e.times=0,this.websockets[e.index].onclose=void 0,(r=this.websockets[e.index])==null||r.close(),this.websockets[e.index]=void 0;return}setTimeout(()=>{console.info("Canvas websocket closed and reconneting..."),this.connectNetWebSocket(e)},2e3)}}async getIotToken(e){const n=await fetch("/api/iot/subscribe/properties",{method:"POST",body:JSON.stringify({devices:e})});if(n.ok){const r=await n.text();return JSON.parse(r).token}}async doSqlCode(e,n,r){const a=await fetch(`/api/iot/data/sql/${e}`,{method:"POST",body:JSON.stringify({dbid:n,sql:r})});if(a.ok){const i=await a.text();i&&this.socketCallback(i,{type:"sql",url:`/api/iot/data/sql/${e}`})}}randomString(e){e=e||32;let n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=n.length,a="";for(let i=0;i<e;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}mockValue(e){let n;if(e.enableMock&&e.mock!==void 0)if(e.type==="float")if(e.mock&&e.mock.indexOf(",")!==-1){let r=e.mock.split(","),a=Math.floor(Math.random()*r.length);n=parseFloat(r[a])}else if(e.mock&&e.mock.indexOf("-")!==-1){let r,a,i,o=e.mock.split("-");if(e.mock.charAt(0)==="-"?o.length===4?(r=-parseFloat(o[3]),a=-parseFloat(o[1]),i=o[3]):(r=parseFloat(o[2]),a=-parseFloat(o[1]),i=o[2]):(r=parseFloat(o[1]),a=parseFloat(o[0]),i=o[1]),(i+"").indexOf(".")!==-1){let s=(i+"").split(".")[1].length;n=(Math.random()*(r-a)+a).toFixed(s)}else n=Math.random()*(r-a)+a}else n=parseFloat(e.mock);else if(e.type==="integer")if(e.mock&&e.mock.indexOf(",")!==-1){let r=e.mock.split(","),a=Math.floor(Math.random()*r.length);n=parseInt(r[a])}else if(e.mock&&e.mock.indexOf("-")!==-1){let r,a,i=e.mock.split("-");e.mock.charAt(0)==="-"?i.length===4?(r=-parseFloat(i[3]),a=-parseFloat(i[1])):(r=parseFloat(i[2]),a=-parseFloat(i[1])):(r=parseInt(i[1]),a=parseInt(i[0])),n=parseInt(Math.random()*(r-a)+a+"")}else n=parseInt(e.mock);else if(e.type==="bool")typeof e.mock=="boolean"?n=e.mock:e.mock==="true"?n=!0:e.mock==="false"?n=!1:n=Math.random()<.5;else if(e.type==="object"||e.type==="array")e.mock;else if(e.mock&&e.mock.indexOf(",")!==-1){let a=e.mock.substring(1,e.mock.length-1).split(","),i=Math.floor(Math.random()*a.length);n=a[i]}else if(e.mock&&e.mock.startsWith("[")&&e.mock.endsWith("]")){let r=parseInt(e.mock.substring(1,e.mock.length-1));n=this.randomString(r)}else n=e.mock;return n}dataMock(){var n,r;let e=[];(r=(n=this.store.data.dataset)==null?void 0:n.devices)==null||r.forEach(a=>{let i=this.mockValue(a);i!==void 0&&e.push({id:a.id,value:i})}),e.length&&this.setDatas(e,{render:!0,doEvent:!0,history:!1})}startDataMock(){this.store.data.enableMock&&(this.stopDataMock(),this.initBinds(),this.updateTimer=setInterval(()=>{this.store.data.pens.forEach(n=>{this.penMock(n)}),this.dataMock(),this.render()},this.store.data.networkInterval||1e3))}stopDataMock(){clearInterval(this.updateTimer),this.updateTimer=void 0}penMock(e){var n;if(e.realTimes){let r={};if(e.realTimes.forEach(a=>{let i=this.mockValue(a);i!==void 0&&(r[a.key]=i)}),Object.keys(r).length){let a=e.onBeforeValue?e.onBeforeValue(e,r):r;this.canvas.updateValue(e,a),(n=e.onValue)==null||n.call(e,e),this.store.emitter.emit("valueUpdate",e)}}}penNetwork(e){const n={url:e.apiUrl,method:e.apiMethod,headers:e.apiHeaders,body:e.apiBody};this.requestHttp(n),e.apiEnable?(this.store.pensNetwork||(this.store.pensNetwork={}),this.store.pensNetwork[e.id]=n):delete this.store.pensNetwork[e.id]}getCookie(e){let n;const r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(n=document.cookie.match(r))?decodeURIComponent(n[2]):""}getDynamicParam(e){return b1()[e]||localStorage[e]||this.getCookie(e)||""}onNetworkConnect(e){if(e&&e.length){if(this.store.pensNetwork)for(let n in this.store.pensNetwork)e.push(this.store.pensNetwork[n]);this.store.data.cancelFirstConnect||e.forEach(async n=>{this.requestHttp(n)}),e.forEach((n,r)=>{n.times=0,this.updateTimerList[r]=setInterval(async()=>{this.requestHttp(n),this.store.options.reconnetTimes&&(n.times++,n.times>=this.store.options.reconnetTimes&&(n.times=0,clearInterval(this.updateTimerList[r]),this.updateTimerList[r]=void 0))},n.interval||1e3)})}}async requestHttp(e){let n=Te(e);if(n.url){if(typeof n.headers=="object"){for(let a in n.headers)if(typeof n.headers[a]=="string"){let i=n.headers[a].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));i&&(n.headers[a]=n.headers[a].replace(`\${${i[0]}}`,this.getDynamicParam(i[0])))}}if(typeof n.body=="object"){for(let a in n.body)if(typeof n.body[a]=="string"){let i=n.body[a].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));i&&(n.body[a]=n.body[a].replace(`\${${i[0]}}`,this.getDynamicParam(i[0])))}}const r=await fetch(n.url,{headers:n.headers,method:n.method,body:n.method==="GET"?void 0:JSON.stringify(n.body)});if(r.ok){const a=await r.text();this.socketCallback(a,{type:"http",url:n.url})}else this.store.emitter.emit("error",{type:"http",error:r})}}closeNetwork(){this.mqttClients&&this.mqttClients.forEach(e=>{e.end()}),this.websockets&&this.websockets.forEach(e=>{e&&(e.onclose=void 0,e.close(),e=void 0)}),this.mqttClients=void 0,this.websockets=void 0,this.updateTimerList&&this.updateTimerList.forEach(e=>{clearInterval(e),e=void 0}),this.sqlTimerList&&this.sqlTimerList.forEach(e=>{clearInterval(e),e=void 0})}socketCallback(e,n){this.store.emitter.emit("socket",{message:e,context:n});let r=e;if(this.socketFn&&(r=this.socketFn(e,{meta2d:this,type:n.type,topic:n.topic,url:n.url,method:n.method}),!r))return;r===!0&&(r=e);let a;if(r.constructor===Object||r.constructor===Array)a=r;else if(typeof r=="string")try{a=JSON.parse(r)}catch(i){console.warn("Invalid socket data:",a,i)}else return;a&&(Array.isArray(a)||(a=[a]),a.length&&(a[0].dataId?this.setDatas(a):a.forEach(i=>{this.setValue(i)})))}setDatas(e,{render:n=!0,doEvent:r=!0,history:a}={}){const i=new Map;e.forEach(c=>{var u,d;(u=this.store.bindDatas[c.dataId])==null||u.forEach(f=>{const h=this.store.pens[f.id];if(!h)return;let v=i.get(h);if(!h.noOnBinds&&typeof h.onBinds=="function"){if(v)return;i.set(h,h.onBinds(h,e,f.formItem));return}v?v[f.formItem.key]=c.value:(v={id:f.id,[f.formItem.key]:c.value},i.set(h,v))}),(d=this.store.bind[c.id||c.dataId])==null||d.forEach(f=>{const h=this.store.pens[f.id];if(!h)return;let v=i.get(h);v?v[f.key]=c.value:(v={id:f.id,[f.key]:c.value},i.set(h,v))})}),this.store.data.locked&&this.doDataEvent(e);let o,s;a&&(o=[]),i.forEach((c,u)=>{this.setValue(c,{render:!1,doEvent:r,history:!1}),a&&(o.push(Te(u,!0)),s.push(u))}),n&&this.render(),a&&this.pushHistory({type:nt.Update,initPens:o,pens:s})}setValue(e,{render:n=!0,doEvent:r=!0,history:a}={}){let i=[];if(!e)return;if(e.id){if(e.id===this.store.data.id){this.setDatabyOptions(e),e.bkImage&&this.setBackgroundImage(e.bkImage),e.background&&this.setBackgroundColor(e.background),this.render();return}const s=this.store.pens[e.id];if(s)i=[s];else{let c=this.store.bind[e.id];if(c&&c.length){i=[],this.setDatas([e],{render:n,doEvent:r,history:a});return}}}else if(e.dataId){i=[],this.setDatas([e],{render:n,doEvent:r,history:a});return}else if(e.tag)i=this.find(e.tag);else{let s=[];for(let c in e)s.push({dataId:c,id:c,value:e[c]});s.length&&this.setDatas(s,{render:n,doEvent:r,history:a});return}a=a&&!this.store.data.locked;let o;if(a&&(o=Te(i)),i.forEach(s=>{var u;const c=s.onBeforeValue?s.onBeforeValue(s,e):e;e.frames&&(this.stopAnimate([s]),e.showDuration||(e.showDuration=e.frames.reduce((d,f)=>d+f.duration,0))),E1(s,c),this.canvas.updateValue(s,c),(u=s.onValue)==null||u.call(s,s)}),!this.store.data.locked&&this.store.active.length&&!this.canvas.movingPens&&this.canvas.calcActiveRect(),a){let s=Te(i);this.pushHistory({type:nt.Update,initPens:o,pens:s})}r&&i.forEach(s=>{this.store.emitter.emit("valueUpdate",s)}),n&&this.render()}_setValue(e,n=!1){this.setValue(e,{history:n,render:!1,doEvent:!1})}pushHistory(e){this.canvas.pushHistory(e)}showInput(e,n){this.canvas.showInput(e,n)}hideInput(){this.canvas.hideInput()}clearDropdownList(){this.canvas.clearDropdownList()}clearRuleLines(){this.canvas.clearRuleLines()}doMessageEvent(e,n){this.store.messageEvents[e]&&this.store.messageEvents[e].forEach(r=>{let a=!1;r.event.conditions&&r.event.conditions.length?r.event.conditionType==="and"?a=r.event.conditions.every(i=>this.judgeCondition(r.pen,i.key,i)):r.event.conditionType==="or"&&(a=r.event.conditions.some(i=>this.judgeCondition(r.pen,i.key,i))):a=!0,a&&r.event.actions.forEach(i=>{this.events[i.action](r.pen,i)})})}initGlobalTriggers(){var e;this.store.globalTriggers={},(e=this.store.data.triggers)==null||e.forEach(n=>{n.conditions.forEach(r=>{r.source&&(this.store.globalTriggers[r.source]||(this.store.globalTriggers[r.source]=[]),this.store.globalTriggers[r.source].includes(n)||this.store.globalTriggers[r.source].push(n))})})}initMessageEvents(){this.store.messageEvents={},this.store.data.pens.forEach(e=>{var n;(n=e.events)==null||n.forEach(r=>{r.name==="message"&&r.message&&(this.store.messageEvents[r.message]||(this.store.messageEvents[r.message]=[]),this.store.messageEvents[r.message].push({pen:e,event:r}))})})}dataJudegeCondition(e,n,r){const{type:a,target:i,fnJs:o,fn:s,operator:c,valueType:u}=r;let d=!1;if(a==="fn"){if(s)d=s(e,{meta2d:this});else if(o){try{r.fn=new Function("data","context",o)}catch(f){console.error("Error: make function:",f)}r.fn&&(d=r.fn(e,{meta2d:this}))}}else{let f=r.value;u==="prop"&&(f=e[r.value]);let h=e[n];switch(c){case">":d=h>+f;break;case">=":d=h>=+f;break;case"<":d=h<+f;break;case"<=":d=h<=+f;break;case"=":case"==":d=h==f;break;case"!=":d=h!=f;break;case"[)":d=lu(+h,f);break;case"![)":d=!lu(+h,f);break;case"[]":d=su(h,f);break;case"![]":d=!su(h,f);break}}return d}judgeCondition(e,n,r){const{type:a,target:i,fnJs:o,fn:s,operator:c,valueType:u}=r;let d=!1;if(a==="fn"){if(s)d=s(e,{meta2d:this});else if(o){try{r.fn=new Function("pen","context",o)}catch(f){console.error("Error: make function:",f)}r.fn&&(d=r.fn(e,{meta2d:this}))}}else{let f=r.value;u==="prop"&&(f=this.store.pens[i][r.value]);let h=cu(e,n);switch(["x","y","width","height"].includes(n)&&(h=this.getPenRect(e)[n]),c){case">":d=h>+f;break;case">=":d=h>=+f;break;case"<":d=h<+f;break;case"<=":d=h<=+f;break;case"=":case"==":d=h==f;break;case"!=":d=h!=f;break;case"[)":d=lu(+h,f);break;case"![)":d=!lu(+h,f);break;case"[]":d=su(h,f);break;case"![]":d=!su(h,f);break}}return d}pushChildren(e,n){const r=[Te(e,!0)],a=[];e.children||(e.children=[]);const i=[];n.forEach(s=>{let c=Te(s,!0);if((!s.id||!this.store.pens[s.id])&&(this.canvas.makePen(s),c=null),s.parentId){const d=this.store.pens[s.parentId],f=d.children.findIndex(h=>h===s.id);r.push(Te(d,!0)),d.children.splice(f,1),i.push(Te(d,!0))}e.children.push(s.id),s.parentId=e.id;const u=hl(s.calculative.worldRect,e.calculative.worldRect);Object.assign(s,u),s.locked=s.lockedOnCombine??Ft.DisableMove,s.locked=s.interaction||v1.includes(s.name)?0:s.locked,c?(r.push(c),i.push(Te(s,!0))):a.push(Te(s,!0))}),i.push(Te(e,!0));let o=1;a.length&&(o=2,this.pushHistory({type:nt.Add,pens:a,step:o})),this.pushHistory({type:nt.Update,initPens:r,pens:i,step:o})}toPng(e,n,r=!1,a){return this.canvas.toPng(e,n,r,a)}activeToPng(e,n){return this.canvas.activeToPng(e,n)}pensToPng(e=this.store.active,n,r){return this.canvas.pensToPng(e,n,r)}downloadPng(e,n,r){var a;for(const i of this.store.data.pens)(i.calculative.img||["iframe"].includes(i.name))&&((a=i.onRenderPenRaw)==null||a.call(i,i));setTimeout(()=>{const i=document.createElement("a");i.setAttribute("download",(e||this.store.data.name||"le5le.meta2d")+".png"),i.setAttribute("href",this.toPng(n,void 0,!0,r));const o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),i.dispatchEvent(o)},1e3)}downloadSvg(){if(!window.C2S)throw console.error("请先加载乐吾乐官网下的canvas2svg.js","https://assets.le5lecdn.com/2d/canvas2svg.js"),new Error("请先加载乐吾乐官网下的canvas2svg.js");const e=this.getRect();e.x-=10,e.y-=10;const n=new window.C2S(e.width+20,e.height+20);n.textBaseline="middle";for(const u of this.store.data.pens)u.visible==!1||!dg(u,this.store)||cg(n,u,e,!0);let r=n.getSerializedSvg();this.store.data.background?(r=r.replace("{{bk}}",""),r=r.replace("{{bkRect}}",`<rect x="0" y="0" width="100%" height="100%" fill="${this.store.data.background}"></rect>`)):(r=r.replace("{{bk}}",""),r=r.replace("{{bkRect}}","")),r=r.replace(/--le5le--/g,"&#x");const a=window.URL,i=new Blob([r]),o=a.createObjectURL(i),s=document.createElement("a");s.setAttribute("download",`${this.store.data.name||"le5le.meta2d"}.svg`),s.setAttribute("href",o);const c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),s.dispatchEvent(c)}getRect(e=this.store.data.pens){return hi(e)}hiddenTemplate(){this.canvas.canvasTemplate.hidden()}showTemplate(){this.canvas.canvasTemplate.show()}lockTemplate(e){this.store.data.pens.forEach(n=>{n.canvasLayer===Wt.CanvasTemplate&&(n.locked=e)})}fitView(e=!0,n=10){var f,h;if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:a,offsetHeight:i}=r;this.resize(a,i);const o=Io(n),s=this.getRect(),c=(a-o[1]-o[3])/s.width,u=(i-o[0]-o[2])/s.height;let d=c;e?d=c>u?u:c:d=c>u?c:u,(f=this.store.data.fits)!=null&&f.length&&(this.canvas.opening=!0),this.scale(d*this.store.data.scale),this.centerView(),(h=this.store.data.fits)!=null&&h.length&&this.fillView()}fillView(){var a,i;const e=this.getRect(),n=this.canvas.width-e.width,r=this.canvas.height-e.height;if(Math.abs(n)>10){(a=this.store.data.fits)==null||a.forEach(s=>{let c=[];s.children.forEach(d=>{this.store.pens[d].locked=Ft.None,c.push(this.store.pens[d])});let u=n/2;if(s.left&&s.right){let d=s.leftValue,f=s.rightValue;d?d=Math.abs(d)<1?d*this.canvas.width:d:d=0,f?f=Math.abs(f)<1?f*this.canvas.width:f:f=0;let h=(this.canvas.width-d-f)/(e.width-d-f);c.forEach(v=>{var p;v.image&&v.imageRatio&&v.calculative.worldRect.width/this.canvas.width>.1&&(v.imageRatio=!1),v.calculative.worldRect.x=e.x-n/2+d+(v.calculative.worldRect.x-e.x)*h,v.calculative.worldRect.width*=h,v.calculative.worldRect.ex=v.calculative.worldRect.x+v.calculative.worldRect.width,v.calculative.width=v.calculative.worldRect.width,v.calculative.x=v.calculative.worldRect.x,v.width=v.calculative.worldRect.width,v.x=v.calculative.worldRect.x,this.canvas.updatePenRect(v,{worldRectIsReady:!1}),v.externElement&&((p=v.onResize)==null||p.call(v,v))})}else s.left?(u=-u,s.leftValue&&(u+=Math.abs(s.leftValue)<1?s.leftValue*this.canvas.width:s.leftValue),this.translatePens(c,u,0)):s.right&&(s.rightValue&&(u=u-(Math.abs(s.rightValue)<1?s.rightValue*this.canvas.width:s.rightValue)),this.translatePens(c,u,0))});const o=this.store.data.pens.filter(s=>s.name==="iframe");o==null||o.forEach(s=>{var u,d;const c=s.calculative.worldRect;if(c.width/this.store.data.scale>e.width*.8){let f=c.width;s.calculative.worldRect.x=c.x-n/2,s.calculative.worldRect.width=c.width+n,s.calculative.worldRect.ex=c.ex+n,s.operationalRect.x=s.operationalRect.x*f/s.calculative.worldRect.width,s.operationalRect.width=(s.calculative.worldRect.width-(1-s.operationalRect.width)*f)/s.calculative.worldRect.width,(u=s.onBeforeValue)==null||u.call(s,s,{operationalRect:s.operationalRect}),(d=s.onResize)==null||d.call(s,s)}})}if(Math.abs(r)>10){(i=this.store.data.fits)==null||i.forEach(s=>{let c=[];s.children.forEach(d=>{this.store.pens[d].locked=Ft.None,c.push(this.store.pens[d])});let u=r/2;if(s.top&&s.bottom){let d=s.topValue,f=s.bottomValue;d?d=Math.abs(d)<1?d*this.canvas.height:d:d=0,f?f=Math.abs(f)<1?f*this.canvas.height:f:f=0;let h=(this.canvas.height-d-f)/(e.height-d-f);c.forEach(v=>{var p;v.image&&v.imageRatio&&v.calculative.worldRect.height/this.canvas.height>.1&&(v.imageRatio=!1),v.calculative.worldRect.y=e.y-r/2+d+(v.calculative.worldRect.y-e.y)*h,v.calculative.worldRect.height*=h,v.calculative.worldRect.ey=v.calculative.worldRect.y+v.calculative.worldRect.height,v.calculative.height=v.calculative.worldRect.height,v.calculative.y=v.calculative.worldRect.y,v.height=v.calculative.worldRect.height,v.y=v.calculative.worldRect.y,this.canvas.updatePenRect(v,{worldRectIsReady:!1}),v.externElement&&((p=v.onResize)==null||p.call(v,v))})}else s.top?(u=-u,s.topValue&&(u+=Math.abs(s.topValue)<1?s.topValue*this.canvas.height:s.topValue),this.translatePens(c,0,u)):s.bottom&&(s.bottomValue&&(u=u-(Math.abs(s.bottomValue)<1?s.bottomValue*this.canvas.height:s.bottomValue)),this.translatePens(c,0,u))});const o=this.store.data.pens.filter(s=>s.name==="iframe");o==null||o.forEach(s=>{var u,d;const c=s.calculative.worldRect;if(c.height/this.store.data.scale>e.height*.8){let f=c.height;s.calculative.worldRect.y=c.y-r/2,s.calculative.worldRect.height=c.height+r,s.calculative.worldRect.ey=c.ey+r,s.operationalRect.y=s.operationalRect.y*f/s.calculative.worldRect.width,s.operationalRect.height=(s.calculative.worldRect.height-(1-s.operationalRect.height)*f)/s.calculative.worldRect.height,(u=s.onBeforeValue)==null||u.call(s,s,{operationalRect:s.operationalRect}),(d=s.onResize)==null||d.call(s,s)}})}this.canvas.canvasTemplate.init(),this.canvas.canvasImage.init(),this.canvas.canvasImageBottom.init(),this.render(!0)}trimPens(){let e=this.store.data.pens.filter(n=>n.name==="line"&&n.anchors.length<2);this.delete(e)}fitTemplateView(e=!0,n=10){if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:a,offsetHeight:i}=r,o=Io(n),s=this.getRect(),c=(a-o[1]-o[3])/s.width,u=(i-o[0]-o[2])/s.height;let d=c;e?d=c>u?u:c:d=c>u?c:u,this.canvas.templateScale(d*this.store.data.scale);let f=this.getRect(),h=this.store.data.pens.filter(v=>!v.parentId);this.canvas.templateTranslatePens(h,-f.x,-f.y),this.store.data.pens.forEach(v=>{v.type?this.canvas.initLineRect(v):this.canvas.updateLines(v)}),this.centerView()}fitSizeView(e=!0,n=10){var h,v;const{canvas:r}=this.canvas,{offsetWidth:a,offsetHeight:i}=r;this.resize(a,i);const o=Io(n),s=(this.store.data.width||this.store.options.width)*this.store.data.scale,c=(this.store.data.height||this.store.options.height)*this.store.data.scale,u=(a-o[1]-o[3])/s,d=(i-o[0]-o[2])/c;let f=u;e==="width"?f=u:e==="height"?f=d:e?f=u>d?d:u:f=u>d?u:d,(h=this.store.data.fits)!=null&&h.length&&(this.canvas.opening=!0),this.scale(f*this.store.data.scale),this.centerSizeView(),(v=this.store.data.fits)!=null&&v.length&&this.fillView()}centerSizeView(){const e=this.getViewCenter(),n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height,a={x:0,y:0,width:n,height:r};cn(a);const{center:i}=a,{scale:o,origin:s,x:c,y:u}=this.store.data;this.translate((e.x-s.x)/o-i.x-c/o,(e.y-s.y)/o-i.y-u/o);const{canvas:d}=this.canvas,f=(d.scrollWidth-d.offsetWidth)/2,h=(d.scrollHeight-d.offsetHeight)/2;d.scrollTo(f,h)}scrollView(e=10,n=!1){if(!this.hasView()||!this.canvas.scroll)return;const{canvas:r}=this.canvas,{offsetWidth:a,offsetHeight:i}=r;this.resize(a,i);const o=Io(e),s=this.getRect(),c=(a-o[1]-o[3])/s.width;this.scale(c*this.store.data.scale),this.topView(o[0]),n&&this.canvas.scroll.changeMode()}screenView(e=10,n=!0){if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:a,offsetHeight:i}=r;this.resize(a,i);const o=Io(e),s=this.getRect();let c=(a-o[1]-o[3])/s.width;n||(c=(i-o[0]-o[2])/s.height),this.scale(c*this.store.data.scale),this.topView(o[0])}topView(e=10){if(!this.hasView())return;const n=this.getRect(),r=this.getViewCenter(),a=this.getPenRect(n);cn(a);const{center:i}=a,{scale:o,origin:s,x:c,y:u}=this.store.data;this.translate((r.x-s.x)/o-i.x-c/o,(e-s.y)/o-a.y-u/o);const{canvas:d}=this.canvas,f=(d.scrollWidth-d.offsetWidth)/2,h=(d.scrollHeight-d.offsetHeight)/2;d.scrollTo(f,h)}centerView(){if(!this.hasView())return;const e=this.getRect(),n=this.getViewCenter(),r=this.getPenRect(e);cn(r);const{center:a}=r,{scale:i,origin:o,x:s,y:c}=this.store.data;this.translate((n.x-o.x)/i-a.x-s/i,(n.y-o.y)/i-a.y-c/i);const{canvas:u}=this.canvas,d=(u.scrollWidth-u.offsetWidth)/2,f=(u.scrollHeight-u.offsetHeight)/2;u.scrollTo(d,f)}hasView(){return!!this.store.data.pens.filter(e=>!e.isRuleLine).length}getViewCenter(){const{width:e,height:n}=this.canvas;return{x:e/2,y:n/2}}beSameByFirst(e=this.store.data.pens,n){const r=Te(e),a=e[0],{width:i,height:o}=this.getPenRect(a);for(let s=1;s<e.length;s++){const c=e[s];n==="width"?this.setValue({id:c.id,width:i},{render:!1,doEvent:!1}):n==="height"?this.setValue({id:c.id,height:o},{render:!1,doEvent:!1}):this.setValue({id:c.id,width:i,height:o},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:nt.Update,initPens:r,pens:e})}beSameByLast(e=this.store.data.pens,n){const r=Te(e),a=e[e.length-1],{width:i,height:o}=this.getPenRect(a);for(let s=0;s<e.length-1;s++){const c=e[s];n==="width"?this.setValue({id:c.id,width:i},{render:!1,doEvent:!1}):n==="height"?this.setValue({id:c.id,height:o},{render:!1,doEvent:!1}):this.setValue({id:c.id,width:i,height:o},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:nt.Update,initPens:r,pens:e})}formatPainterByFirst(e=this.store.data.pens){const n=Te(e),r=e[0],a={};bf.forEach(i=>{a[i]=r[i]});for(let i=1;i<e.length;i++){const o=e[i];this.setValue({id:o.id,...a},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:nt.Update,initPens:n,pens:e})}formatPainterByLast(e=this.store.data.pens){const n=Te(e),r=e[e.length-1],a={};bf.forEach(i=>{a[i]=r[i]});for(let i=0;i<e.length-1;i++){const o=e[i];this.setValue({id:o.id,...a},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:nt.Update,initPens:n,pens:e})}setFormatPainter(){const e=this.store.active,n={};if(e.length>0){const r=e[0];bf.forEach(a=>{n[a]=r[a]!==void 0?r[a]:this.store.options.defaultFormat[a]||this.store.data[a]||this.store.options[a]})}else bf.forEach(r=>{this.store.options.defaultFormat[r]||this.store.data[r]||this.store.options[r]});localStorage.setItem("meta2d-formatPainter",JSON.stringify(n))}formatPainter(){const e=this.store.active,n=Te(e),r=JSON.parse(localStorage.getItem("meta2d-formatPainter"));for(let a=0;a<e.length;a++){const i=e[a];this.setValue({id:i.id,...r},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:nt.Update,initPens:n,pens:e})}clearFormatPainter(){const e=this.store.active,n=Te(e);bf.forEach(r=>{for(let a=0;a<e.length;a++){const i=e[a],{fontSize:o,lineHeight:s}=this.store.options;r==="lineWidth"?(i.lineWidth=1,i.calculative.lineWidth=1):r==="fontSize"?(i.fontSize=o,i.calculative.fontSize=o):r==="lineHeight"?(i.lineHeight=s,i.calculative.lineHeight=s):(delete i[r],delete i.calculative[r])}}),this.render(),this.pushHistory({type:nt.Update,initPens:n,pens:e})}alignNodes(e,n=this.store.data.pens,r){!r&&(r=this.getPenRect(this.getRect(n)));const a=Te(n);for(const i of n)this.alignPen(e,i,r);this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:nt.Update,initPens:a,pens:n})}alignNodesV(e,n=this.store.data.pens,r=!1){const a=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;let o={x:0,y:0,width:a,height:i};const s=Te(n);if(r){const c=this.store.data.scale,u=this.getRect(n),d=(u.x-this.store.data.origin.x)/c,f=(u.y-this.store.data.origin.y)/c,h=u.width/c,v=u.height/c;let p=0,g=0;switch(e){case"left":p=-d;break;case"right":p=a-(d+h);break;case"top":g=-f;break;case"bottom":g=i-(f+v);break;case"center":p=a/2-(d+h/2);break;case"middle":g=i/2-(f+v/2);break}this.translatePens(n,p*c,g*c)}else for(const c of n)this.alignPen(e,c,o);this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:nt.Update,initPens:s,pens:n})}alignNodesByFirst(e,n=this.store.data.pens){const r=Te(n),a=n[0],i=this.getPenRect(a);for(let o=1;o<n.length;o++){const s=n[o];this.alignPen(e,s,i)}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:nt.Update,initPens:r,pens:n})}alignNodesByLast(e,n=this.store.data.pens){const r=Te(n),a=n[n.length-1],i=this.getPenRect(a);for(let o=0;o<n.length-1;o++){const s=n[o];this.alignPen(e,s,i)}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:nt.Update,initPens:r,pens:n})}alignPen(e,n,r){const a=this.getPenRect(n);switch(e){case"left":a.x=r.x;break;case"right":a.x=r.x+r.width-a.width;break;case"top":a.y=r.y;break;case"bottom":a.y=r.y+r.height-a.height;break;case"center":a.x=r.x+r.width/2-a.width/2;break;case"middle":a.y=r.y+r.height/2-a.height/2;break}this.setValue({id:n.id,...a},{render:!1,doEvent:!1})}spaceBetweenByDirection(e,n=this.store.data.pens,r){if(!r){let u=1/0,d=-1/0,f=e==="width"?"x":"y";n.forEach(h=>{u=Math.min(u,h.calculative.worldRect[f]),d=Math.max(d,h.calculative.worldRect["e"+f])}),r=(d-u)/this.store.data.scale}if(n=n.filter(u=>!u.parentId),n.length<=2)return;const a=Te(n),i=n.reduce((u,d)=>{const f=this.getPenRect(d);return u+f[e]},0),o=(r-i)/(n.length-1);n=n.sort((u,d)=>e==="width"?u.x-d.x:u.y-d.y);const s=this.getPenRect(n[0]);let c=e==="width"?s.x:s.y;for(const u of n){const d=this.getPenRect(u);e==="width"?d.x=c:d.y=c,c+=d[e]+o,this.setValue({id:u.id,...d},{render:!1,doEvent:!1})}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:nt.Update,initPens:a,pens:n})}spaceBetween(e,n){this.spaceBetweenByDirection("width",e,n)}spaceBetweenColumn(e,n){this.spaceBetweenByDirection("height",e,n)}layout(e=this.store.data.pens,n,r=30){const a=this.getPenRect(hi(e));!n&&(n=a.width),e=e.filter(u=>!u.type&&!u.parentId);const i=Te(e);let o=0;e.forEach(u=>{const d=this.getPenRect(u);d.height>o&&(o=d.height)});let s=a.x,c=a.y;e.forEach((u,d)=>{const f=this.getPenRect(u);if(f.x=s,f.y=c+o/2-f.height/2,this.setValue({id:u.id,...f},{render:!1,doEvent:!1}),d===e.length-1)return;const h=s+f.width-a.x,v=this.getPenRect(e[d+1]);Math.round(n-h)>=Math.round(v.width+r)?s+=f.width+r:(s=a.x,c+=o+r)}),this.initImageCanvas(e),this.initTemplateCanvas(e),this.render(),this.pushHistory({type:nt.Update,initPens:i,pens:e})}gotoView(e){const n=this.getViewCenter(),r=n.x-e.calculative.worldRect.x-e.calculative.worldRect.width/2,a=n.y-e.calculative.worldRect.y-e.calculative.worldRect.height/2;this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.translate(r-this.store.data.x,a-this.store.data.y),this.store.data.x=r,this.store.data.y=a;for(const i of this.store.data.pens)Do(i);this.canvas.canvasImage.init(),this.canvas.canvasImageBottom.init(),this.render()}showMap(){this.map||(this.map=new K_e(this.canvas)),this.map.show()}hideMap(){this.map.hide()}onSizeUpdate(){this.mapTimer&&(clearTimeout(this.mapTimer),this.mapTimer=void 0),this.mapTimer=setTimeout(()=>{this.map&&this.map.isShow&&this.map.show(),this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.resize()},500)}toggleAnchorMode(){this.canvas.toggleAnchorMode()}addAnchorHand(){this.canvas.addAnchorHand()}removeAnchorHand(){this.canvas.removeAnchorHand()}toggleAnchorHand(){this.canvas.toggleAnchorHand()}top(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens,a=[...fi(n,this.store),n].map(o=>o.id);r.filter(o=>a.includes(o.id)).forEach(o=>{const s=r.findIndex(c=>c.id===o.id);s>-1&&(r.push(r[s]),r.splice(s,1),this.initTemplateCanvas([o]),this.initImageCanvas([o])),this.specificLayerMove(o,"top")})}this.store.emitter.emit("layer",{type:"top",pens:e})}initImageCanvas(e){this.canvas.initImageCanvas(e)}initTemplateCanvas(e){this.canvas.initTemplateCanvas(e)}bottom(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens,a=[...fi(n,this.store),n].map(o=>o.id),i=r.filter(o=>a.includes(o.id));for(let o=i.length-1;o>=0;o--){const s=i[o],c=r.findIndex(u=>u.id===s.id);c>-1&&(r.unshift(r[c]),r.splice(c+1,1),this.initTemplateCanvas([s]),this.initImageCanvas([s])),this.specificLayerMove(s,"bottom")}}this.store.emitter.emit("layer",{type:"bottom",pens:e})}upByArea(e){if(this.store.data.pens.findIndex(c=>c.id===e.id)===-1){console.warn("upByArea: pen not in canvas");return}const r=[e,...fi(e,this.store)];let a=r.map(c=>this.store.data.pens.findIndex(u=>u.id===c.id));a.includes(-1)&&(console.warn("upByArea: pen children not in canvas"),a=a.filter(c=>c!==-1));const i=Math.min(...a),o=e.calculative.worldRect,s=this.store.data.pens.findIndex((c,u)=>{if(u<=i||c.id===e.id||Nxe(c,e))return!1;const d=c.calculative.worldRect;return Mo(o,d)});if(s===-1){this.up(e);return}this.store.data.pens.splice(s+1,0,...r);for(const c of r){const u=this.store.data.pens.findIndex(d=>d.id===c.id);u>-1&&this.store.data.pens.splice(u,1)}this.initImageCanvas([e])}specificLayerMove(e,n){var r;if(e.image&&e.name!=="gif"){let a=Wt.CanvasImageBottom;n==="top"?a=Wt.CanvasImage:(n==="up"||n==="down")&&(a=Wt.CanvasMain),this.setValue({id:e.id,canvasLayer:a},{render:!1,doEvent:!1,history:!1})}else if(e.externElement||e.name==="gif"){let a=0;n==="top"?(e.calculative.canvas.maxZindex+=1,a=e.calculative.canvas.maxZindex):n==="up"?a=e.calculative.zIndex===void 0?6:e.calculative.zIndex+1:n==="down"&&(a=e.calculative.zIndex===void 0?3:e.calculative.zIndex-1,a<0&&(a=0)),this.setValue({id:e.id,zIndex:a},{render:!1,doEvent:!1,history:!1}),(r=e.calculative.singleton)!=null&&r.div&&dr(e,e.calculative.singleton.div)}}up(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens;if(n.children&&n.children.length){const a=[...fi(n,this.store),n],i=[];for(let c=0;c<r.length;c++){const u=r[c];a.findIndex(d=>d.id===u.id)!==-1&&(u.temIndex=c,i.push(u))}let o=-1,s=0;i.forEach(c=>{c.temIndex-=s,r.splice(c.temIndex,1),s+=1,o=c.temIndex,delete c.temIndex,this.specificLayerMove(c,"up")}),r.splice(o+1,0,...i),this.initTemplateCanvas(i),this.initImageCanvas(i)}else{const a=r.findIndex(i=>i.id===n.id);a>-1&&a!==r.length-1&&(r.splice(a+2,0,r[a]),r.splice(a,1),this.initTemplateCanvas([n]),this.initImageCanvas([n])),this.specificLayerMove(n,"up")}}this.store.emitter.emit("layer",{type:"up",pens:e})}down(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens;if(n.children&&n.children.length){const a=[...fi(n,this.store),n],i=[];for(let c=0;c<r.length;c++){const u=r[c];a.findIndex(d=>d.id===u.id)!==-1&&(u.temIndex=c,i.push(u))}let o=-1,s=0;i.forEach((c,u)=>{c.temIndex-=s,r.splice(c.temIndex,1),s+=1,u===0&&(o=c.temIndex),delete c.temIndex,this.specificLayerMove(c,"down")}),r.splice(o-1,0,...i),this.initTemplateCanvas(i),this.initImageCanvas(i)}else{const a=r.findIndex(i=>i.id===n.id);a>-1&&a!==0&&(r.splice(a-1,0,r[a]),r.splice(a+1,1),this.initTemplateCanvas([n]),this.initImageCanvas([n])),this.specificLayerMove(n,"down")}}this.store.emitter.emit("layer",{type:"down",pens:e})}setLayer(e,n,r=this.store.data.pens){const a=r.findIndex(i=>i.id===e.id);a>-1&&(a>n?(r.splice(n,0,r[a]),r.splice(a+1,1)):a<n&&(r.splice(n,0,r[a]),r.splice(a,1)))}changePenId(e,n){this.canvas.changePenId(e,n)}getLines(e,n="all"){var a;if(e.type===Gt.Line)return[];const r=[];return(a=e.connectedLines)==null||a.forEach(({lineId:i})=>{const o=this.store.pens[i];if(!o){console.warn(e,"node contain a error connectedLine");return}if(!r.find(s=>s.id===o.id))switch(n){case"all":r.push(o);break;case"in":Xt(o).connectTo===e.id&&r.push(o);break;case"out":Sn(o).connectTo===e.id&&r.push(o);break}}),r}nextNode(e){if(e.type===Gt.Line){const n=this.store.pens[Xt(e).connectTo];return n?[n]:[]}else{const n=this.getLines(e,"out"),r=[];return n.forEach(a=>{const i=this.nextNode(a);for(const o of i)!r.find(c=>c.id===o.id)&&r.push(o)}),r}}previousNode(e){if(e.type===Gt.Line){const n=this.store.pens[Sn(e).connectTo];return n?[n]:[]}else{const n=this.getLines(e,"in"),r=[];return n.forEach(a=>{const i=this.previousNode(a);for(const o of i)!r.find(c=>c.id===o.id)&&r.push(o)}),r}}getNext(e){var r;if(e.type===Gt.Line){console.warn("非连线节点");return}const n=[];return(r=e.connectedLines)==null||r.forEach(({lineId:a,anchor:i})=>{var c,u;const o=(c=e.anchors)==null?void 0:c.filter(d=>d.id===i)[0],s=this.findOne(a);if(s.anchors[0].connectTo==e.id){const d=s.anchors[s.anchors.length-1].connectTo;if(d){const f=this.findOne(d),h=(u=f.connectedLines)==null?void 0:u.filter(p=>p.lineId===s.id)[0],v=f.anchors.filter(p=>p.id===h.anchor)[0];n.push({from:e,fromAnchor:o,line:s,to:f,toAnchor:v})}}}),n}addAnchor(e,n,r){if(!e)return;if(e.anchors||(e.anchors=[]),e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.type===Gt.Line&&(r<0&&(r=e.anchors.length+1+r),r>e.anchors.length&&(r=e.anchors.length),r<0&&(r=0),r==0&&e.anchors[0].connectTo||r==e.anchors.length&&e.anchors[r-1].connectTo)){console.warn("端点存在连接关系");return}let a=null,i=null;n.x<=1&&n.x>=0&&n.y<=1&&n.y>=0?(i={id:n.id||it(),penId:e.id,x:e.calculative.worldRect.x+e.calculative.worldRect.width*n.x,y:e.calculative.worldRect.y+e.calculative.worldRect.height*n.y},e.calculative.worldRect&&e.rotate%360&&nn(i,e.rotate,e.calculative.worldRect.center),a={id:i.id,penId:e.id,x:n.x,y:n.y}):(i={id:n.id||it(),penId:e.id,x:n.x,y:n.y},e.calculative.worldRect&&(e.rotate%360&&nn(n,-e.rotate,e.calculative.worldRect.center),a={id:i.id,penId:e.id,x:(n.x-e.calculative.worldRect.x)/e.calculative.worldRect.width,y:(n.y-e.calculative.worldRect.y)/e.calculative.worldRect.height})),e.type===Gt.Line?(e.calculative.worldAnchors.splice(r,0,i),e.anchors.splice(r,0,a),this.canvas.updateLines(e),this.canvas.initLineRect(e),this.render()):(e.calculative.worldAnchors.push(i),e.anchors.push(a))}connectLine(e,n,r,a,i=!0){if(!r){const u=n.calculative.worldRect;r=vu(e,{x:u.x+u.width/2,y:u.y+u.height/2})}if(!a){const u=e.calculative.worldRect;a=vu(n,{x:u.x+u.width/2,y:u.y+u.height/2})}const o=Math.abs(r.x-a.x),c={height:Math.abs(r.y-a.y),lineName:"line",lineWidth:1,name:"line",type:1,width:o,x:Math.min(r.x,a.x),y:Math.min(r.y,a.y),anchors:[{x:r.x>a.x?1:0,y:r.y>a.y?1:0,id:it()},{x:r.x>a.x?0:1,y:r.x>a.x?0:1,id:it()}]};return this.addPens([c]),Zn(e,r,c,c.calculative.worldAnchors[0]),Zn(n,a,c,c.calculative.worldAnchors[1]),c.calculative.active=!1,this.canvas.updateLines(c),this.canvas.updateLines(e),this.canvas.updateLines(n),this.canvas.initLineRect(c),i&&this.render(),c}toComponent(e=this.store.data.pens,n,r){if(e.length===1){const d=Te(e[0]);return d.type=Gt.Node,d.id=void 0,[d]}const a=Te(e,!0),i=hi(a);let o={id:it(),name:"combine",...i,children:[],showChild:n};r&&(o.anchors=[{id:"0",penId:o.id,x:.5,y:0},{id:"1",penId:o.id,x:1,y:.5},{id:"2",penId:o.id,x:.5,y:1},{id:"3",penId:o.id,x:0,y:.5}]);const s=a.filter(d=>!d.parentId),c=a.find(d=>d.width===i.width&&d.height===i.height),u=c&&n===void 0;return s.length===1?o=s[0]:u&&(c.children||(c.children=[]),o=c),a.forEach(d=>{if(d===o||d.parentId===o.id||d.parentId)return;o.children.push(d.id),d.parentId=o.id;const f=hl(d.calculative.worldRect,i);Object.assign(d,f),d.locked=d.lockedOnCombine??Ft.DisableMove}),u||s.length===1?Te(a):Te([o,...a])}installPenPlugins(e,n){if(!e.tag&&!e.name&&!e.id)return;let r;e.id?r="id":e.tag?r="tag":e.name&&(r="name"),n.forEach(a=>{let i=a.plugin,o=a.options;if(i&&hCe(i)&&r)if(i.install(e,o),!this.penPluginMap.has(i))this.penPluginMap.set(i,[{[r]:e[r],option:o}]);else{let s=this.penPluginMap.get(i).find(c=>c[r]===e[r]);s?s.option=o:this.penPluginMap.get(i).push({[r]:e[r],option:o})}})}uninstallPenPlugins(e,n){let r;e.id?r="id":e.tag?r="tag":e.name&&(r="name"),r&&n.forEach(a=>{let i=a.plugin;i.uninstall(e,a.options);let o=this.penPluginMap.get(i),s=o.findIndex(c=>c[r]===e[r]);s!==-1&&(o.splice(s,1),o.length===0&&this.penPluginMap.delete(i))})}setVisible(e,n,r=!0){if(this.onSizeUpdate(),this.setValue({id:e.id,visible:n},{render:!1,doEvent:!1}),e.children)for(const i of e.children){const o=this.store.pens[i];o&&this.setVisible(o,n,!1)}let a=fi(e,this.store);a.push(e),this.initImageCanvas(a),r&&this.render()}clearHover(){this.canvas.clearHover()}closeSocket(){this.closeWebsocket(),this.closeMqtt(),this.closeHttp()}destroy(e){if(this.clear(!1),this.stopDataMock(),this.closeSocket(),this.closeNetwork(),this.closeAll(),this.store.emitter.all.clear(),this.canvas.destroy(),this.canvas=void 0,gt[this.store.id]=void 0,!e){for(const n in gt)delete gt[n];gt.path2dDraws={},gt.canvasDraws={},gt.anchors={},gt.htmlElements={}}}}var v8={exports:{}};(function(t,e){(function(n,r){r()})(qn,function(){function n(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,f){var h=new XMLHttpRequest;h.open("GET",u),h.responseType="blob",h.onload=function(){c(h.response,d,f)},h.onerror=function(){console.error("could not download file")},h.send()}function a(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qn=="object"&&qn.global===qn?qn:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,d,f){var h=o.URL||o.webkitURL,v=document.createElement("a");d=d||u.name||"download",v.download=d,v.rel="noopener",typeof u=="string"?(v.href=u,v.origin===location.origin?i(v):a(v.href)?r(u,d,f):i(v,v.target="_blank")):(v.href=h.createObjectURL(u),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){i(v)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,f),d);else if(a(u))r(u,d,f);else{var h=document.createElement("a");h.href=u,h.target="_blank",setTimeout(function(){i(h)})}}:function(u,d,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,f);var v=u.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||v&&p||s)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var w=m.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},m.readAsDataURL(u)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(u);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})})(v8);var Y_e=v8.exports;const X_e=yu(Y_e),p8=[{元件类型:"C",释义:"电容",类型:"27",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-30,-13)",右下角坐标:"(30,13)","宽度(X向)":"60","高度(Y向)":"26",接线盘排列方式:"横向","":""},{元件类型:"R",释义:"电阻",类型:"27",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-30,-11)",右下角坐标:"(30,11)","宽度(X向)":"60","高度(Y向)":"22",接线盘排列方式:"横向","":""},{元件类型:"TerminalsXT",释义:"端子",类型:"27",接线盘1:"",接线盘2:"",左上角坐标:"(-22,-12)",右下角坐标:"(22,12)","宽度(X向)":"44","高度(Y向)":"24",接线盘排列方式:"","":""},{元件类型:"IProbe",释义:"电流表",类型:"4",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-35,-15)",右下角坐标:"(35,15)","宽度(X向)":"70","高度(Y向)":"30",接线盘排列方式:"横向","":""},{元件类型:"GND",释义:"接地",类型:"2",接线盘1:"0, 0",接线盘2:"",左上角坐标:"(-12，0)",右下角坐标:"(12，25)","宽度(X向)":"24","高度(Y向)":"25",接线盘排列方式:"","":""},{元件类型:"DoubleCoil",释义:"双位置继电器",类型:"30",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-18，-30)",右下角坐标:"(18,30)","宽度(X向)":"36","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Coil",释义:"中间继电器",类型:"24",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-18，-30)",右下角坐标:"(18,30)","宽度(X向)":"36","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"CoilOffDelay",释义:"失电延时继电器",类型:"24",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-18，-30)",右下角坐标:"(18,30)","宽度(X向)":"36","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"CoilOnDelay",释义:"得电延时继电器",类型:"24",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-18，-30)",右下角坐标:"(18,30)","宽度(X向)":"36","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Contact",释义:"继电器常闭触电",类型:"18",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-20，-30)",右下角坐标:"(20,30)","宽度(X向)":"30","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Contactk",释义:"继电器常开触电",类型:"17",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-20，-30)",右下角坐标:"(20,30)","宽度(X向)":"30","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Switch",释义:"开关",类型:"28",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-32,-17)",右下角坐标:"(30,7)","宽度(X向)":"62","高度(Y向)":"24",接线盘排列方式:"横向","":""},{元件类型:"Vdc",释义:"电源",类型:"1",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-30,-14)",右下角坐标:"(30,14)","宽度(X向)":"60","高度(Y向)":"28",接线盘排列方式:"横向","":""},{元件类型:"Lamp",释义:"灯",类型:"5",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-15，-30)",右下角坐标:"(15，30)","宽度(X向)":"30","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"MultipleContact",释义:"多位置开关",类型:"28",接线盘1:"",接线盘2:"",左上角坐标:"",右下角坐标:"","宽度(X向)":"80","高度(Y向)":"40",接线盘排列方式:"","":""},{元件类型:"IOput",释义:"IO端口",类型:"无",接线盘1:"",接线盘2:"",左上角坐标:"",右下角坐标:"","宽度(X向)":"","高度(Y向)":"",接线盘排列方式:"","":""},{元件类型:"TransformerNew",释义:"变压器",类型:"24",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-10，-30)",右下角坐标:"(10，30)","宽度(X向)":"20","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Breaker",释义:"断路器",类型:"28",接线盘1:"(0, -30)",接线盘2:"(0, 30)",左上角坐标:"(-20，-30)",右下角坐标:"(10,30)","宽度(X向)":"30","高度(Y向)":"60",接线盘排列方式:"纵向","":""},{元件类型:"Input",释义:"输出端口",类型:"无",接线盘1:"",接线盘2:"",左上角坐标:"",右下角坐标:"","宽度(X向)":"30","高度(Y向)":"20",接线盘排列方式:"","":""},{元件类型:"Output",释义:"输入端口",类型:"无",接线盘1:"",接线盘2:"",左上角坐标:"",右下角坐标:"","宽度(X向)":"30","高度(Y向)":"20",接线盘排列方式:"","":""},{元件类型:"RectangularNoteBox",释义:"注释矩形框",类型:"无",接线盘1:"",接线盘2:"",左上角坐标:"",右下角坐标:"","宽度(X向)":"","高度(Y向)":"",接线盘排列方式:"","":""},{元件类型:"Diode",释义:"二极管",类型:"26",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-30,-11)",右下角坐标:"(30,11)","宽度(X向)":"60","高度(Y向)":"22",接线盘排列方式:"横向","":""},{元件类型:"Btn_SelfReset",释义:"自复位按钮",类型:"28",接线盘1:"(20, 30)",接线盘2:"(20, -30)",左上角坐标:"(-30,-35)",右下角坐标:"(30,35)","宽度(X向)":"60","高度(Y向)":"70",接线盘排列方式:"纵向","":""},{元件类型:"Btn_SelfLock",释义:"自锁按钮",类型:"28",接线盘1:"(20, 30)",接线盘2:"(20, -30)",左上角坐标:"(-30，-35)",右下角坐标:"(30，35)","宽度(X向)":"60","高度(Y向)":"70",接线盘排列方式:"纵向","":""},{元件类型:"Knob_SelfReset",释义:"自复位旋钮",类型:"28",接线盘1:"(20, 30)",接线盘2:"(20, -30)",左上角坐标:"(-30，-35)",右下角坐标:"(30，35)","宽度(X向)":"60","高度(Y向)":"70",接线盘排列方式:"纵向","":""},{元件类型:"Knob_SelfLock",释义:"自锁旋钮",类型:"28",接线盘1:"(20, 30)",接线盘2:"(20, -30)",左上角坐标:"(-30，-35)",右下角坐标:"(30，35)","宽度(X向)":"60","高度(Y向)":"70",接线盘排列方式:"纵向","":""},{元件类型:"VProbe",释义:"电压表",类型:"4",接线盘1:"(-30, 0)",接线盘2:"(30, 0)",左上角坐标:"(-35，-15)",右下角坐标:"(35，15)","宽度(X向)":"70","高度(Y向)":"30",接线盘排列方式:"横向","":""},{元件类型:"ElectromagneticValve",释义:"电磁阀",类型:"无",接线盘1:"(-10, -30)",接线盘2:"(-10, 30)",左上角坐标:"(-25，-30)",右下角坐标:"(30，35)","宽度(X向)":"55","高度(Y向)":"65",接线盘排列方式:"纵向","":""},{元件类型:"duanluqi_wx",释义:"微型断路器",类型:"28",接线盘1:"(20, 30)",接线盘2:"(20, -30)",左上角坐标:"(2，-35)",右下角坐标:"(30，35)","宽度(X向)":"32","高度(Y向)":"70",接线盘排列方式:"纵向","":""}],g8=[{name:"二极管",icon:"svg/二极管.svg",data:{text:"",name:"image",image:"svg/二极管.svg",tags:["Diode"],electricTypeCode:"Diode",electricName:""}},{name:"半圆-封口",icon:"svg/半圆-封口.svg",data:{text:"",name:"image",image:"svg/半圆-封口.svg",tags:[],electricTypeCode:"",electricName:""}},{name:"半圆-开口",icon:"svg/半圆-开口.svg",data:{text:"",name:"image",image:"svg/半圆-开口.svg",tags:[],electricTypeCode:"",electricName:""}},{name:"声音-扬声器",icon:"svg/声音-扬声器.svg",data:{text:"",name:"image",image:"svg/声音-扬声器.svg",tags:[],electricTypeCode:"",electricName:""}},{name:"声音-蜂鸣器",icon:"svg/声音-蜂鸣器.svg",data:{text:"",name:"image",image:"svg/声音-蜂鸣器.svg",tags:[],electricTypeCode:"",electricName:""}},{name:"开关-三位置-1位",icon:"svg/开关-三位置-1位.svg",data:{text:"",name:"image",image:"svg/开关-三位置-1位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-三位置-2位",icon:"svg/开关-三位置-2位.svg",data:{text:"",name:"image",image:"svg/开关-三位置-2位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-三位置-3位",icon:"svg/开关-三位置-3位.svg",data:{text:"",name:"image",image:"svg/开关-三位置-3位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-单刀双掷-中间位",icon:"svg/开关-单刀双掷-中间位.svg",data:{text:"",name:"image",image:"svg/开关-单刀双掷-中间位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-单刀双掷-右位",icon:"svg/开关-单刀双掷-右位.svg",data:{text:"",name:"image",image:"svg/开关-单刀双掷-右位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-单刀双掷-左位",icon:"svg/开关-单刀双掷-左位.svg",data:{text:"",name:"image",image:"svg/开关-单刀双掷-左位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-惯性开关-断开",icon:"svg/开关-惯性开关-断开.svg",data:{text:"",name:"image",image:"svg/开关-惯性开关-断开.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"开关-惯性开关-闭合",icon:"svg/开关-惯性开关-闭合.svg",data:{text:"",name:"image",image:"svg/开关-惯性开关-闭合.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"开关-按钮-断开",icon:"svg/开关-按钮-断开.svg",data:{text:"",name:"image",image:"svg/开关-按钮-断开.svg",tags:["Btn_SelfReset"],electricTypeCode:"Btn_SelfReset",electricName:""}},{name:"开关-按钮-闭合",icon:"svg/开关-按钮-闭合.svg",data:{text:"",name:"image",image:"svg/开关-按钮-闭合.svg",tags:["Btn_SelfReset"],electricTypeCode:"Btn_SelfReset",electricName:""}},{name:"开关-断路器-断开",icon:"svg/开关-断路器-断开.svg",data:{text:"",name:"image",image:"svg/开关-断路器-断开.svg",tags:["duanluqi_wx"],electricTypeCode:"duanluqi_wx",electricName:""}},{name:"开关-断路器-闭合",icon:"svg/开关-断路器-闭合.svg",data:{text:"",name:"image",image:"svg/开关-断路器-闭合.svg",tags:["duanluqi_wx"],electricTypeCode:"duanluqi_wx",electricName:""}},{name:"开关-自复旋转开关-断开",icon:"svg/开关-自复旋转开关-断开.svg",data:{text:"",name:"image",image:"svg/开关-自复旋转开关-断开.svg",tags:["Knob_SelfReset"],electricTypeCode:"Knob_SelfReset",electricName:""}},{name:"开关-自复旋转开关-闭合",icon:"svg/开关-自复旋转开关-闭合.svg",data:{text:"",name:"image",image:"svg/开关-自复旋转开关-闭合.svg",tags:["Knob_SelfReset"],electricTypeCode:"Knob_SelfReset",electricName:""}},{name:"开关-自锁按钮-断开",icon:"svg/开关-自锁按钮-断开.svg",data:{text:"",name:"image",image:"svg/开关-自锁按钮-断开.svg",tags:["Btn_SelfLock"],electricTypeCode:"Btn_SelfLock",electricName:""}},{name:"开关-自锁按钮-闭合",icon:"svg/开关-自锁按钮-闭合.svg",data:{text:"",name:"image",image:"svg/开关-自锁按钮-闭合.svg",tags:["Btn_SelfLock"],electricTypeCode:"Btn_SelfLock",electricName:""}},{name:"开关-自锁旋转开关-断开",icon:"svg/开关-自锁旋转开关-断开.svg",data:{text:"",name:"image",image:"svg/开关-自锁旋转开关-断开.svg",tags:["Knob_SelfLock"],electricTypeCode:"Knob_SelfLock",electricName:""}},{name:"开关-自锁旋转开关-闭合",icon:"svg/开关-自锁旋转开关-闭合.svg",data:{text:"",name:"image",image:"svg/开关-自锁旋转开关-闭合.svg",tags:["Knob_SelfLock"],electricTypeCode:"Knob_SelfLock",electricName:""}},{name:"开关-通用开关-断开",icon:"svg/开关-通用开关-断开.svg",data:{text:"",name:"image",image:"svg/开关-通用开关-断开.svg",tags:["Switch","Contactk"],electricTypeCode:"Switch",electricName:""}},{name:"开关-通用开关-闭合",icon:"svg/开关-通用开关-闭合.svg",data:{text:"",name:"image",image:"svg/开关-通用开关-闭合.svg",tags:["Switch","Contact"],electricTypeCode:"Switch",electricName:""}},{name:"指示灯",icon:"svg/指示灯.svg",data:{text:"",name:"image",image:"svg/指示灯.svg",tags:["Lamp"],electricTypeCode:"Lamp",electricName:""}},{name:"测量-电压表",icon:"svg/测量-电压表.svg",data:{text:"",name:"image",image:"svg/测量-电压表.svg",tags:["VProbe"],electricTypeCode:"VProbe",electricName:""}},{name:"测量-电流表",icon:"svg/测量-电流表.svg",data:{text:"",name:"image",image:"svg/测量-电流表.svg",tags:["IProbe"],electricTypeCode:"IProbe",electricName:""}},{name:"电动机-三相",icon:"svg/电动机-三相.svg",data:{text:"",name:"image",image:"svg/电动机-三相.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"电容器",icon:"svg/电容器.svg",data:{text:"",name:"image",image:"svg/电容器.svg",tags:["C"],electricTypeCode:"C",electricName:""}},{name:"电感-变压器",icon:"svg/电感-变压器.svg",data:{text:"",name:"image",image:"svg/电感-变压器.svg",tags:["TransformerNew"],electricTypeCode:"TransformerNew",electricName:""}},{name:"电感-绕组-短",icon:"svg/电感-绕组-短.svg",data:{text:"",name:"image",image:"svg/电感-绕组-短.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"电感-绕组-长",icon:"svg/电感-绕组-长.svg",data:{text:"",name:"image",image:"svg/电感-绕组-长.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"电源-接地",icon:"svg/电源-接地.svg",data:{text:"",name:"image",image:"svg/电源-接地.svg",tags:["GND"],electricTypeCode:"GND",electricName:""}},{name:"电源-电池组",icon:"svg/电源-电池组.svg",data:{text:"",name:"image",image:"svg/电源-电池组.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"电源-直流电源",icon:"svg/电源-直流电源.svg",data:{text:"",name:"image",image:"svg/电源-直流电源.svg",tags:["Vdc"],electricTypeCode:"Vdc",electricName:""}},{name:"电磁阀",icon:"svg/电磁阀.svg",data:{text:"",name:"image",image:"svg/电磁阀.svg",tags:["ElectromagneticValve"],electricTypeCode:"ElectromagneticValve",electricName:""}},{name:"电阻",icon:"svg/电阻.svg",data:{text:"",name:"image",image:"svg/电阻.svg",tags:["R"],electricTypeCode:"R",electricName:""}},{name:"端子-环形",icon:"svg/端子-环形.svg",data:{text:"",name:"image",image:"svg/端子-环形.svg",tags:["TerminalsXT"],electricTypeCode:"TerminalsXT",electricName:""}},{name:"端子-实心",icon:"svg/端子-实心.svg",data:{text:"",name:"image",image:"svg/端子-实心.svg",tags:["TerminalsXT"],electricTypeCode:"TerminalsXT",electricName:""}},{name:"继电器-中间继电器-折线连接二极管",icon:"svg/继电器-中间继电器-折线连接二极管.svg",data:{text:"",name:"image",image:"svg/继电器-中间继电器-折线连接二极管.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"继电器-中间继电器-折线连接电阻",icon:"svg/继电器-中间继电器-折线连接电阻.svg",data:{text:"",name:"image",image:"svg/继电器-中间继电器-折线连接电阻.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"继电器-中间继电器",icon:"svg/继电器-中间继电器.svg",data:{text:"",name:"image",image:"svg/继电器-中间继电器.svg",tags:["Coil"],electricTypeCode:"Coil",electricName:""}},{name:"继电器-双位置",icon:"svg/继电器-双位置.svg",data:{text:"",name:"image",image:"svg/继电器-双位置.svg",tags:["DoubleCoil"],electricTypeCode:"DoubleCoil",electricName:""}},{name:"继电器-失电延时",icon:"svg/继电器-失电延时.svg",data:{text:"",name:"image",image:"svg/继电器-失电延时.svg",tags:["CoilOffDelay"],electricTypeCode:"CoilOffDelay",electricName:""}},{name:"继电器-得电延时",icon:"svg/继电器-得电延时.svg",data:{text:"",name:"image",image:"svg/继电器-得电延时.svg",tags:["CoilOnDelay"],electricTypeCode:"CoilOnDelay",electricName:""}},{name:"跨接线",icon:"svg/跨接线.svg",data:{text:"",name:"image",image:"svg/跨接线.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"输出",icon:"svg/输入输出.svg",data:{text:"",name:"image",image:"svg/输入输出.svg",tags:["Output"],anchors:[{x:0,y:.5}],electricTypeCode:"Output",electricName:""}},{name:"输入",icon:"svg/输入输出.svg",data:{text:"",name:"image",image:"svg/输入输出.svg",tags:["Input"],anchors:[{x:1,y:.5}],electricTypeCode:"Input",electricName:""}},{name:"连接端子-插针针孔",icon:"svg/连接端子-插针针孔.svg",data:{text:"",name:"image",image:"svg/连接端子-插针针孔.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"避雷器",icon:"svg/避雷器.svg",data:{text:"",name:"image",image:"svg/避雷器.svg",tags:[""],electricTypeCode:"",electricName:""}}],J_e=[{name:"开关",children:[{name:"开关-三位置",icon:"svg/开关-三位置-1位.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-三位置-1位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:"",showChild:0}},{name:"开关-单刀双掷",icon:"svg/开关-单刀双掷-中间位.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-单刀双掷-中间位.svg",tags:["MultipleContact"],electricTypeCode:"MultipleContact",electricName:""}},{name:"开关-惯性开关",icon:"svg/开关-惯性开关-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-惯性开关-断开.svg",tags:[""],electricTypeCode:"",electricName:""}},{name:"开关-按钮",icon:"svg/开关-按钮-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-按钮-断开.svg",tags:["Btn_SelfReset"],electricTypeCode:"Btn_SelfReset",electricName:""}},{name:"开关-断路器",icon:"svg/开关-断路器-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-断路器-断开.svg",tags:["duanluqi_wx"],electricTypeCode:"duanluqi_wx",electricName:""}},{name:"开关-自复旋转开关",icon:"svg/开关-自复旋转开关-闭合.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-自复旋转开关-闭合.svg",tags:["Knob_SelfReset"],electricTypeCode:"Knob_SelfReset",electricName:""}},{name:"开关-自锁按钮",icon:"svg/开关-自锁按钮-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-自锁按钮-断开.svg",tags:["Btn_SelfLock"],electricTypeCode:"Btn_SelfLock",electricName:""}},{name:"开关-自锁旋转开关",icon:"svg/开关-自锁旋转开关-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-自锁旋转开关-断开.svg",tags:["Knob_SelfLock"],electricTypeCode:"Knob_SelfLock",electricName:""}},{name:"开关-通用开关",icon:"svg/开关-通用开关-断开.svg",type:"combine-json",data:{text:"",name:"image",image:"svg/开关-通用开关-断开.svg",tags:["Switch"],electricTypeCode:"Switch",electricName:""}}]}];var U1={},_g={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+n+"]*",a=new RegExp("^"+r+"$"),i=function(s,c){const u=[];let d=c.exec(s);for(;d;){const f=[];f.startIndex=c.lastIndex-d[0].length;const h=d.length;for(let v=0;v<h;v++)f.push(d[v]);u.push(f),d=c.exec(s)}return u},o=function(s){const c=a.exec(s);return!(c===null||typeof c>"u")};t.isExist=function(s){return typeof s<"u"},t.isEmptyObject=function(s){return Object.keys(s).length===0},t.merge=function(s,c,u){if(c){const d=Object.keys(c),f=d.length;for(let h=0;h<f;h++)u==="strict"?s[d[h]]=[c[d[h]]]:s[d[h]]=c[d[h]]}},t.getValue=function(s){return t.isExist(s)?s:""},t.isName=o,t.getAllMatches=i,t.nameRegexp=r})(_g);const z1=_g,Q_e={allowBooleanAttributes:!1,unpairedTags:[]};U1.validate=function(t,e){e=Object.assign({},Q_e,e);const n=[];let r=!1,a=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=y8(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=b8(t,i);continue}else{let s=!1;t[i]==="/"&&(s=!0,i++);let c="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)c+=t[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!iSe(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",Dn("InvalidTag",f,Er(t,i))}const u=eSe(t,i);if(u===!1)return Dn("InvalidAttr","Attributes for '"+c+"' have open quote.",Er(t,i));let d=u.value;if(i=u.index,d[d.length-1]==="/"){const f=i-d.length;d=d.substring(0,d.length-1);const h=w8(d,e);if(h===!0)r=!0;else return Dn(h.err.code,h.err.msg,Er(t,f+h.err.line))}else if(s)if(u.tagClosed){if(d.trim().length>0)return Dn("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Er(t,o));if(n.length===0)return Dn("InvalidTag","Closing tag '"+c+"' has not been opened.",Er(t,o));{const f=n.pop();if(c!==f.tagName){let h=Er(t,f.tagStartPos);return Dn("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",Er(t,o))}n.length==0&&(a=!0)}}else return Dn("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Er(t,i));else{const f=w8(d,e);if(f!==!0)return Dn(f.err.code,f.err.msg,Er(t,i-d.length+f.err.line));if(a===!0)return Dn("InvalidXml","Multiple possible root nodes found.",Er(t,i));e.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:o}),r=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=b8(t,i);continue}else if(t[i+1]==="?"){if(i=y8(t,++i),i.err)return i}else break;else if(t[i]==="&"){const f=rSe(t,i);if(f==-1)return Dn("InvalidChar","char '&' is not expected.",Er(t,i));i=f}else if(a===!0&&!m8(t[i]))return Dn("InvalidXml","Extra text at the end",Er(t,i));t[i]==="<"&&i--}}else{if(m8(t[i]))continue;return Dn("InvalidChar","char '"+t[i]+"' is not expected.",Er(t,i))}if(r){if(n.length==1)return Dn("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",Er(t,n[0].tagStartPos));if(n.length>0)return Dn("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Dn("InvalidXml","Start tag expected.",1);return!0};function m8(t){return t===" "||t==="	"||t===`
`||t==="\r"}function y8(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return Dn("InvalidXml","XML declaration allowed only at the start of the document.",Er(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function b8(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Z_e='"',V_e="'";function eSe(t,e){let n="",r="",a=!1;for(;e<t.length;e++){if(t[e]===Z_e||t[e]===V_e)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){a=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:a}}const tSe=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w8(t,e){const n=z1.getAllMatches(t,tSe),r={};for(let a=0;a<n.length;a++){if(n[a][1].length===0)return Dn("InvalidAttr","Attribute '"+n[a][2]+"' has no space in starting.",If(n[a]));if(n[a][3]!==void 0&&n[a][4]===void 0)return Dn("InvalidAttr","Attribute '"+n[a][2]+"' is without value.",If(n[a]));if(n[a][3]===void 0&&!e.allowBooleanAttributes)return Dn("InvalidAttr","boolean attribute '"+n[a][2]+"' is not allowed.",If(n[a]));const i=n[a][2];if(!aSe(i))return Dn("InvalidAttr","Attribute '"+i+"' is an invalid name.",If(n[a]));if(!r.hasOwnProperty(i))r[i]=1;else return Dn("InvalidAttr","Attribute '"+i+"' is repeated.",If(n[a]))}return!0}function nSe(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function rSe(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,nSe(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function Dn(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function aSe(t){return z1.isName(t)}function iSe(t){return z1.isName(t)}function Er(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function If(t){return t.startIndex+t[1].length}var H1={};const x8={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}},oSe=function(t){return Object.assign({},x8,t)};H1.buildOptions=oSe,H1.defaultOptions=x8;class lSe{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var sSe=lSe;const cSe=_g;function uSe(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,a=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(a&&hSe(t,e)){e+=7;let s,c;[s,c,e]=dSe(t,e+1),c.indexOf("&")===-1&&(n[mSe(s)]={regx:RegExp(`&${s};`,"g"),val:c})}else if(a&&vSe(t,e))e+=8;else if(a&&pSe(t,e))e+=8;else if(a&&gSe(t,e))e+=9;else if(fSe)i=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,r--):r--,r===0)break}else t[e]==="["?a=!0:o+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}function dSe(t,e){let n="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)n+=t[e];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=t[e++];let a="";for(;e<t.length&&t[e]!==r;e++)a+=t[e];return[n,a,e]}function fSe(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function hSe(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function vSe(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function pSe(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function gSe(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function mSe(t){if(cSe.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var ySe=uSe;const bSe=/^[-+]?0x[a-fA-F0-9]+$/,wSe=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const xSe={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function CSe(t,e={}){if(e=Object.assign({},xSe,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(e.hex&&bSe.test(n))return Number.parseInt(n,16);{const r=wSe.exec(n);if(r){const a=r[1],i=r[2];let o=_Se(r[3]);const s=r[4]||r[6];if(!e.leadingZeros&&i.length>0&&a&&n[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!a&&n[1]!==".")return t;{const c=Number(n),u=""+c;return u.search(/[eE]/)!==-1||s?e.eNotation?c:t:n.indexOf(".")!==-1?u==="0"&&o===""||u===o||a&&u==="-"+o?c:t:i?o===u||a+o===u?c:t:n===u||n===a+u?c:t}}else return t}}function _Se(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var SSe=CSe;function TSe(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}var C8=TSe;const _8=_g,Af=sSe,kSe=ySe,OSe=SSe,ESe=C8;let PSe=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=ISe,this.parseXml=MSe,this.parseTextData=ASe,this.resolveNameSpace=NSe,this.buildAttributesMap=RSe,this.isItStopNode=jSe,this.replaceEntitiesValue=FSe,this.readStopNodeData=USe,this.saveTextToParentTag=BSe,this.addChild=LSe,this.ignoreAttributesFn=ESe(this.options.ignoreAttributes)}};function ISe(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function ASe(t,e,n,r,a,i,o){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const s=this.options.tagValueProcessor(e,t,n,a,i);return s==null?t:typeof s!=typeof t||s!==t?s:this.options.trimValues?K1(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?K1(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function NSe(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const DSe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function RSe(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=_8.getAllMatches(t,DSe),a=r.length,i={};for(let o=0;o<a;o++){const s=this.resolveNameSpace(r[o][1]);if(this.ignoreAttributesFn(s,e))continue;let c=r[o][4],u=this.options.attributeNamePrefix+s;if(s.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const d=this.options.attributeValueProcessor(s,c,e);d==null?i[u]=c:typeof d!=typeof c||d!==c?i[u]=d:i[u]=K1(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const MSe=function(t){t=t.replace(/\r\n?/g,`
`);const e=new Af("!xml");let n=e,r="",a="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const s=Cs(t,">",i,"Closing Tag is not closed.");let c=t.substring(i+2,s).trim();if(this.options.removeNSPrefix){const f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(r=this.saveTextToParentTag(r,n,a));const u=a.substring(a.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let d=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(d=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):d=a.lastIndexOf("."),a=a.substring(0,d),n=this.tagsNodeStack.pop(),r="",i=s}else if(t[i+1]==="?"){let s=W1(t,i,!1,"?>");if(!s)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,a),!(this.options.ignoreDeclaration&&s.tagName==="?xml"||this.options.ignorePiTags)){const c=new Af(s.tagName);c.add(this.options.textNodeName,""),s.tagName!==s.tagExp&&s.attrExpPresent&&(c[":@"]=this.buildAttributesMap(s.tagExp,a,s.tagName)),this.addChild(n,c,a)}i=s.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const s=Cs(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const c=t.substring(i+4,s-2);r=this.saveTextToParentTag(r,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}i=s}else if(t.substr(i+1,2)==="!D"){const s=kSe(t,i);this.docTypeEntities=s.entities,i=s.i}else if(t.substr(i+1,2)==="!["){const s=Cs(t,"]]>",i,"CDATA is not closed.")-2,c=t.substring(i+9,s);r=this.saveTextToParentTag(r,n,a);let u=this.parseTextData(c,n.tagname,a,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):n.add(this.options.textNodeName,u),i=s+2}else{let s=W1(t,i,this.options.removeNSPrefix),c=s.tagName;const u=s.rawTagName;let d=s.tagExp,f=s.attrExpPresent,h=s.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,a,!1));const v=n;if(v&&this.options.unpairedTags.indexOf(v.tagname)!==-1&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),c!==e.tagname&&(a+=a?"."+c:c),this.isItStopNode(this.options.stopNodes,a,c)){let p="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),d=c):d=d.substr(0,d.length-1),i=s.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)i=s.closeIndex;else{const m=this.readStopNodeData(t,u,h+1);if(!m)throw new Error(`Unexpected end of ${u}`);i=m.i,p=m.tagContent}const g=new Af(c);c!==d&&f&&(g[":@"]=this.buildAttributesMap(d,a,c)),p&&(p=this.parseTextData(p,c,a,!0,f,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),g.add(this.options.textNodeName,p),this.addChild(n,g,a)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const p=new Af(c);c!==d&&f&&(p[":@"]=this.buildAttributesMap(d,a,c)),this.addChild(n,p,a),a=a.substr(0,a.lastIndexOf("."))}else{const p=new Af(c);this.tagsNodeStack.push(n),c!==d&&f&&(p[":@"]=this.buildAttributesMap(d,a,c)),this.addChild(n,p,a),n=p}r="",i=h}}else r+=t[i];return e.child};function LSe(t,e,n){const r=this.options.updateTag(e.tagname,n,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),t.addChild(e))}const FSe=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function BSe(t,e,n,r){return t&&(r===void 0&&(r=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function jSe(t,e,n){const r="*."+n;for(const a in t){const i=t[a];if(r===i||e===i)return!0}return!1}function $Se(t,e,n=">"){let r,a="";for(let i=e;i<t.length;i++){let o=t[i];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(t[i+1]===n[1])return{data:a,index:i}}else return{data:a,index:i};else o==="	"&&(o=" ");a+=o}}function Cs(t,e,n,r){const a=t.indexOf(e,n);if(a===-1)throw new Error(r);return a+e.length-1}function W1(t,e,n,r=">"){const a=$Se(t,e+1,r);if(!a)return;let i=a.data;const o=a.index,s=i.search(/\s/);let c=i,u=!0;s!==-1&&(c=i.substring(0,s),i=i.substring(s+1).trimStart());const d=c;if(n){const f=c.indexOf(":");f!==-1&&(c=c.substr(f+1),u=c!==a.data.substr(f+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u,rawTagName:d}}function USe(t,e,n){const r=n;let a=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const i=Cs(t,">",n,`${e} is not closed`);if(t.substring(n+2,i).trim()===e&&(a--,a===0))return{tagContent:t.substring(r,n),i};n=i}else if(t[n+1]==="?")n=Cs(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=Cs(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=Cs(t,"]]>",n,"StopNode is not closed.")-2;else{const i=W1(t,n,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&a++,n=i.closeIndex)}}function K1(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:OSe(t,n)}else return _8.isExist(t)?t:""}var zSe=PSe,S8={};function HSe(t,e){return T8(t,e)}function T8(t,e,n){let r;const a={};for(let i=0;i<t.length;i++){const o=t[i],s=WSe(o);let c="";if(n===void 0?c=s:c=n+"."+s,s===e.textNodeName)r===void 0?r=o[s]:r+=""+o[s];else{if(s===void 0)continue;if(o[s]){let u=T8(o[s],e,c);const d=qSe(u,e);o[":@"]?KSe(u,o[":@"],c,e):Object.keys(u).length===1&&u[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?u=u[e.textNodeName]:Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""),a[s]!==void 0&&a.hasOwnProperty(s)?(Array.isArray(a[s])||(a[s]=[a[s]]),a[s].push(u)):e.isArray(s,c,d)?a[s]=[u]:a[s]=u}}}return typeof r=="string"?r.length>0&&(a[e.textNodeName]=r):r!==void 0&&(a[e.textNodeName]=r),a}function WSe(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function KSe(t,e,n,r){if(e){const a=Object.keys(e),i=a.length;for(let o=0;o<i;o++){const s=a[o];r.isArray(s,n+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}}function qSe(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}S8.prettify=HSe;const{buildOptions:GSe}=H1,YSe=zSe,{prettify:XSe}=S8,JSe=U1;var QSe=class{constructor(e){this.externalEntities={},this.options=GSe(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const i=JSe.validate(e,n);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const r=new YSe(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(e);return this.options.preserveOrder||a===void 0?a:XSe(a,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}};const ZSe=`
`;function VSe(t,e){let n="";return e.format&&e.indentBy.length>0&&(n=ZSe),k8(t,e,"",n)}function k8(t,e,n,r){let a="",i=!1;for(let o=0;o<t.length;o++){const s=t[o],c=e2e(s);if(c===void 0)continue;let u="";if(n.length===0?u=c:u=`${n}.${c}`,c===e.textNodeName){let p=s[c];t2e(u,e)||(p=e.tagValueProcessor(c,p),p=E8(p,e)),i&&(a+=r),a+=p,i=!1;continue}else if(c===e.cdataPropName){i&&(a+=r),a+=`<![CDATA[${s[c][0][e.textNodeName]}]]>`,i=!1;continue}else if(c===e.commentPropName){a+=r+`<!--${s[c][0][e.textNodeName]}-->`,i=!0;continue}else if(c[0]==="?"){const p=O8(s[":@"],e),g=c==="?xml"?"":r;let m=s[c][0][e.textNodeName];m=m.length!==0?" "+m:"",a+=g+`<${c}${m}${p}?>`,i=!0;continue}let d=r;d!==""&&(d+=e.indentBy);const f=O8(s[":@"],e),h=r+`<${c}${f}`,v=k8(s[c],e,u,d);e.unpairedTags.indexOf(c)!==-1?e.suppressUnpairedNode?a+=h+">":a+=h+"/>":(!v||v.length===0)&&e.suppressEmptyNode?a+=h+"/>":v&&v.endsWith(">")?a+=h+`>${v}${r}</${c}>`:(a+=h+">",v&&r!==""&&(v.includes("/>")||v.includes("</"))?a+=r+e.indentBy+v+r:a+=v,a+=`</${c}>`),i=!0}return a}function e2e(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(t.hasOwnProperty(r)&&r!==":@")return r}}function O8(t,e){let n="";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let a=e.attributeValueProcessor(r,t[r]);a=E8(a,e),a===!0&&e.suppressBooleanAttributes?n+=` ${r.substr(e.attributeNamePrefix.length)}`:n+=` ${r.substr(e.attributeNamePrefix.length)}="${a}"`}return n}function t2e(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let n=t.substr(t.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]==="*."+n)return!0;return!1}function E8(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const r=e.entities[n];t=t.replace(r.regex,r.val)}return t}var n2e=VSe;const r2e=n2e,a2e=C8,i2e={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function gl(t){this.options=Object.assign({},i2e,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=a2e(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=s2e),this.processTextOrObjNode=o2e,this.options.format?(this.indentate=l2e,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}gl.prototype.build=function(t){return this.options.preserveOrder?r2e(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},gl.prototype.j2x=function(t,e,n){let r="",a="";const i=n.join(".");for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(typeof t[o]>"u")this.isAttribute(o)&&(a+="");else if(t[o]===null)this.isAttribute(o)?a+="":o[0]==="?"?a+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:a+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)a+=this.buildTextValNode(t[o],o,"",e);else if(typeof t[o]!="object"){const s=this.isAttribute(o);if(s&&!this.ignoreAttributesFn(s,i))r+=this.buildAttrPairStr(s,""+t[o]);else if(!s)if(o===this.options.textNodeName){let c=this.options.tagValueProcessor(o,""+t[o]);a+=this.replaceEntitiesValue(c)}else a+=this.buildTextValNode(t[o],o,"",e)}else if(Array.isArray(t[o])){const s=t[o].length;let c="",u="";for(let d=0;d<s;d++){const f=t[o][d];if(!(typeof f>"u"))if(f===null)o[0]==="?"?a+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:a+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){const h=this.j2x(f,e+1,n.concat(o));c+=h.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(u+=h.attrStr)}else c+=this.processTextOrObjNode(f,o,e,n);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(o,f);h=this.replaceEntitiesValue(h),c+=h}else c+=this.buildTextValNode(f,o,"",e)}this.options.oneListGroup&&(c=this.buildObjectNode(c,o,u,e)),a+=c}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){const s=Object.keys(t[o]),c=s.length;for(let u=0;u<c;u++)r+=this.buildAttrPairStr(s[u],""+t[o][s[u]])}else a+=this.processTextOrObjNode(t[o],o,e,n);return{attrStr:r,val:a}},gl.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function o2e(t,e,n,r){const a=this.j2x(t,n+1,r.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,a.attrStr,n):this.buildObjectNode(a.val,e,a.attrStr,n)}gl.prototype.buildObjectNode=function(t,e,n,r){if(t==="")return e[0]==="?"?this.indentate(r)+"<"+e+n+"?"+this.tagEndChar:this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar;{let a="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",a=""),(n||n==="")&&t.indexOf("<")===-1?this.indentate(r)+"<"+e+n+i+">"+t+a:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(r)+`<!--${t}-->`+this.newLine:this.indentate(r)+"<"+e+n+i+this.tagEndChar+t+this.indentate(r)+a}},gl.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},gl.prototype.buildTextValNode=function(t,e,n,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+n+"?"+this.tagEndChar;{let a=this.options.tagValueProcessor(e,t);return a=this.replaceEntitiesValue(a),a===""?this.indentate(r)+"<"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+n+">"+a+"</"+e+this.tagEndChar}},gl.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t};function l2e(t){return this.options.indentBy.repeat(t)}function s2e(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var c2e=gl,u2e={XMLParser:QSe,XMLValidator:U1,XMLBuilder:c2e};const $i=":@";let ft,_s,ml=[];function P8(t){const r=new u2e.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",preserveOrder:!0}).parse(t).filter(i=>i.svg),a=[];return ml=[],r.forEach(i=>{const o=i[$i];ft=v2e(o),ft.width<ft.height?(o.height||(o.height=40),_s=o.height/ft.height,!o.width&&(o.width=_s*ft.width)):(o.width||(o.width=40),_s=o.width/ft.width,!o.height&&(o.height=_s*ft.height));const c=i.svg,u={};for(let f=0;f<c.length;f++)c[f].g&&(u[f]=I8(c[f]));for(let f in u)c.splice(Number(f),1,...u[f]);const d=A8(o,c);a.push(...d)}),d2e(a[0]),a}function I8(t){if(t.g&&t.g.length==1&&t.g[0][$i]){const e=Object.keys(t.g[0][$i]);if(e.length==2&&e[0]=="id"&&e[1]=="data-name")return I8(t.g[0])}return t.g}function d2e(t){ml=ml.map((e,n)=>({id:n+"",penId:t.id,x:e.x,y:e.y})),t.anchors=ml}function A8(t,e){const n=[],[r,a]=S2e(t),i={id:it(),name:"combine",x:t.x,y:t.y,locked:t.locked,width:r,height:a,children:[]};return n.push(i),e.forEach(o=>{let s;const c=o[$i];if(c&&c.transform&&o.g&&o.g.forEach(u=>{u[$i]?u[$i].transform=c.transform:u[$i]={transform:c.transform}}),o.g)s=A8({x:0,y:0,width:1,height:1,locked:10,...c},o.g);else if(o.defs)F8(o.defs.filter(u=>u.style)),C2e(o.defs.filter(u=>u.linearGradient));else if(o.style)F8([{style:o.style}]);else if(c)if(s=p2e(c,t,i.id),o.path)s=f2e(c,s);else if(o.rect){s=h2e(c,s);const u=s;[{x:u.x+u.width*.5,y:u.y},{x:u.x+u.width*1,y:u.y+u.height*.5},{x:u.x+u.width*.5,y:u.y+u.height*1},{x:u.x,y:u.y+u.height*.5}].forEach(f=>{(f.x<=.01||f.x>=.99||f.y<=.01||f.y>=.99)&&ml.push(f)})}else if(o.circle){s=D8(c,s);const u=s;[{x:u.x+u.width*.5,y:u.y},{x:u.x+u.width*1,y:u.y+u.height*.5},{x:u.x+u.width*.5,y:u.y+u.height*1},{x:u.x,y:u.y+u.height*.5}].forEach(f=>{(f.x<=.01||f.x>=.99||f.y<=.01||f.y>=.99)&&ml.push(f)})}else if(o.ellipse)s=D8(c,s);else if(o.line){s=m2e(c,s);const u=s;u.anchors.forEach(d=>{const f=u.x+d.x*u.width,h=u.y+d.y*u.height;(f<.01||f>.99||h<.01||h>.99)&&ml.push({x:f,y:h})})}else if(o.polygon)s=R8(c,s);else if(o.polyline){s=y2e(c,s);const u=s;u.anchors.forEach(d=>{const f=u.x+d.x*u.width,h=u.y+d.y*u.height;(f<.01||f>.99||h<.01||h>.99)&&ml.push({x:f,y:h})})}else o.text?s=b2e(c,o.text,s):o.image?s=w2e(c,s):s=void 0;if(s)if(Array.isArray(s)){for(const u of s)u.parentId||(u.parentId=i.id,i.children.push(u.id));n.push(...s)}else i.children.push(s.id),n.push(s)}),n}function N8(t){let e=0,n=0;if(t){let r=t.replace("translate(","").replace(")","").split(",");e=parseFloat(r[0]),n=parseFloat(r[1])}return{offsetX:e,offsetY:n}}function f2e(t,e){let n=t.d;if(!n)return;let r=$4(n),a=D1(r),{offsetX:i,offsetY:o}=N8(t.transform);a.x+=i,a.ex+=i,a.y+=o,a.ey+=o;const s=(a.x+e.x-ft.x)/ft.width,c=(a.y+e.y-ft.y)/ft.height,u=a.width/ft.width<=1?a.width/ft.width:1,d=a.height/ft.height<=1?a.height/ft.height:1;return{...e,name:"svgPath",pathId:it(),path:n,x:s,y:c,width:u,height:d,disableAnchor:!0}}function h2e(t,e){const n=(t.x||0-ft.x+e.x)/ft.width,r=(t.y||0-ft.y+e.y)/ft.height,a=t.width/ft.width<=1?t.width/ft.width:1,i=t.height/ft.height<=1?t.height/ft.height:1,o=t.rx/t.width||t.ry/t.height||0;return{...e,name:"rectangle",x:n,y:r,width:a,height:i,borderRadius:o}}function D8(t,e){const n=t.rx||t.r,r=t.ry||t.r,a=(t.cx-n-ft.x+e.x)/ft.width,i=(t.cy-r-ft.y+e.y)/ft.height,o=2*n/ft.width,s=2*r/ft.height;return{...e,name:"circle",x:a,y:i,width:o,height:s}}function v2e(t){if(t.viewBox){const e=t.viewBox.split(" ");return{x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}}else return{x:0,y:0,width:parseFloat(t.width),height:parseFloat(t.height)}}function p2e(t,e,n){var v;const r=B8(t.class),a=B8(e.class),i=q1(t.style),o=q1(e.style),s={...e,...a,...o,...t,...r,...i};let c;if(s.fill!=="none")if((v=s.fill)!=null&&v.includes("url")){const p=s.fill.replace("url(#","").replace(")","");let g=G1.find(m=>m.id===p);g&&!g.color&&(g=G1.find(m=>g.from===`#${m.id}`)),c=g==null?void 0:g.color}else c=s.fill,!c&&(c="#000");let u=0,d=0,f=0,h=null;return s.transform&&s.transform.split(") ").forEach(g=>{const[m,y]=g.split("("),[b,w]=y.split(" ");m==="translate"?(u=Number(b)||0,d=Number(w)||0):m==="rotate"?(f=parseFloat(y),u=0,d=0):m==="matrix"&&(h=y.split(" ").map(x=>parseFloat(x)))}),{id:it(),locked:10,parentId:n,x:u,y:d,rotate:f,background:c,color:s.stroke,lineWidth:s["stroke-width"]?parseFloat(s["stroke-width"])*_s:s.stroke?1:0,lineCap:s.strokeLinecap,lineJoin:s.strokeLinejoin,lineDash:s.strokeDasharray,lineDashOffset:s.strokeDashoffset,globalAlpha:Number(s.opacity),fontSize:s["font-size"]?parseFloat(s["font-size"])*_s:16,fontFamily:s["font-family"],fontWeight:s["font-weight"],fontStyle:s["font-style"],matrix:h}}function g2e(t){const n=t.replace(/[\'\"\\\/\b\f\n\r\t]/g,"").split(/\s|,/),r=[];return n.forEach((a,i)=>{i%2===0&&r.push({x:Number(a),y:Number(n[i+1])})}),r}function R8(t,e){const n=t.points,r=g2e(n),a=mu(r),i=r.map(o=>({x:(o.x-a.x)/a.width,y:(o.y-a.y)/a.height,id:it()}));return{...e,name:"line",lineName:"line",type:0,close:!0,anchors:i,x:(a.x-ft.x+e.x)/ft.width,y:(a.y-ft.y+e.y)/ft.height,width:a.width/ft.width,height:a.height/ft.height}}function M8(t,e){const[n,r,a,i,o,s]=e,c=t.x,u=t.y,d=n*c+a*u+o,f=r*c+i*u+s;return[d,f]}function m2e(t,e){let n=Number(t.x1)||0,r=Number(t.x2)||0,a=Number(t.y1)||0,i=Number(t.y2)||0;Array.isArray(e.matrix)&&([n,a]=M8({x:n,y:a},e.matrix),[r,i]=M8({x:r,y:i},e.matrix));const o=Math.min(n,r),s=Math.max(n,r),c=Math.min(a,i),u=Math.max(a,i),d=(o-ft.x+e.x)/ft.width,f=(c-ft.y+e.y)/ft.height,h=(s-o)/ft.width,v=(u-c)/ft.height;return{...e,name:"line",lineName:"line",type:0,x:d,y:f,width:h,height:v,anchors:[{x:n<r?0:1,y:a<i?0:1,hidden:!0,id:it()},{x:n<r?1:0,y:a<i?1:0,hidden:!0,id:it()}]}}function y2e(t,e){const n=R8(t,e);return Object.assign(n,{close:!1,type:1,anchors:n.anchors.map(r=>(r.hidden=!0,r))})}function b2e(t,e,n){var c;const r=(c=e[0])==null?void 0:c[L8],a=x2e(r,n),i=0;let{offsetX:o,offsetY:s}=N8(t.transform);return{...n,name:"text",textAlign:"left",text:r,x:(parseFloat(t.x)+(o||0)-ft.x+n.x)/ft.width,y:(parseFloat(t.y)+(s||0)-ft.y+n.y-i)/ft.height,width:a/ft.width,height:i/ft.height}}function w2e(t,e){const{x:n,y:r,width:a,height:i}=t;return{...e,name:"image",x:(n-ft.x+e.x)/ft.width,y:(r-ft.y+e.y)/ft.height,width:a/ft.width,height:i/ft.height,image:t["xlink:href"]}}function x2e(t,e){return(e.fontSize||16)/_s*String(t).length}function q1(t){if(!t)return{};const e=t.split(";"),n={};return e.forEach(r=>{const[a,i]=r.split(":");a&&(n[a]=i)}),n}const L8="#text";let Sg;function F8(t){t.forEach(e=>{e.style&&e.style[0]&&(Sg=_2e(e.style[0][L8]))})}let G1=[];function C2e(t){t.forEach(e=>{if(e.linearGradient){const n={id:e[$i].id,from:e[$i]["xlink:href"],color:void 0};e.linearGradient.length>0&&(n.color=e.linearGradient[0][$i]["stop-color"]),G1.push(n)}})}function _2e(t){const e={};return t.split("}").forEach(r=>{const[a,i]=r.split("{");a&&(e[a.trim()]=q1(i))}),e}function B8(t){const e={};for(const n in Sg)if(Object.prototype.hasOwnProperty.call(Sg,n)){const r=Sg[n];(n==="."+t||n.includes("."+t+",")||n.includes(",."+t))&&Object.assign(e,r)}return e}function S2e(t){var r;if((r=String(t.width))!=null&&r.endsWith("in")){const a=parseFloat(t.width)*96,i=parseFloat(t.height)*96;return[a,i]}const e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;return[e,n]}function j8(t,e,n=!0){if(!t)return[];const r=P8(t);return r.forEach(a=>{var i;a.x||(a.x=0),a.y||(a.y=0),a.name=="combine"&&!a.parentId&&(a.description=e==null?void 0:e.name,(i=e==null?void 0:e.data)!=null&&i.anchors&&n&&e.data.anchors.forEach(o=>{//! 报错
if(a.anchors){const s=a.anchors.length;o.id=s,a.anchors.push(o)}else a.anchors=[o]}))}),n&&(meta2d.canvas.addCaches=Te(r)),r}function T2e(t,e,n=!0){if(!t)return[];const r=P8(t);console.log("传入的SVG===== ",r,"以前的图元数据=====",e);const a=r.find(i=>i.name=="combine"&&!i.parentId);return Object.assign(a,{id:e==null?void 0:e.id,x:e==null?void 0:e.x,y:e==null?void 0:e.y,description:e==null?void 0:e.description,text:e==null?void 0:e.text,withh:e==null?void 0:e.width,height:e==null?void 0:e.height,showChild:e==null?void 0:e.showChild,tags:e==null?void 0:e.tags}),r.forEach(i=>{i.name!=="combine"&&(i.parentId=e==null?void 0:e.id)}),console.log("重新组装的图元数据=====",r,"以前的图元数据=====",e),n&&(meta2d.canvas.addCaches=Te(r)),r}const $8=(t,e,n=!0)=>fetch(t).then(r=>r.text().then(i=>j8(i,e,n))),Ui={x:2015,y:-2404,scale:2.2962853358150284,pens:[{id:"251c6ba9",name:"combine",x:-1917.2818412992815,y:2786.8430321398773,ex:-1881.4505065758517,ey:2878.6944455724783,width:35.83133472342976,height:91.85141343260094,center:{x:-1899.3661739375666,y:2832.7687388561776},children:["179d2635","8f6b874"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"251c6ba9"},{x:1,y:.5,id:"1",penId:"251c6ba9"},{x:.5,y:1,id:"2",penId:"251c6ba9"},{x:0,y:.5,id:"3",penId:"251c6ba9"}],rotate:0,globalAlpha:1,tags:["Switch"],description:"开关-通用开关"},{id:"179d2635",name:"combine",x:0,y:0,locked:0,width:1,height:1,children:["efe2dc1","0336d6d","fd8c6a3","2e93e1de","48940cd4","7614682"],anchors:[{id:"0",penId:"179d2635",x:.9069451980466631,y:0},{id:"1",penId:"179d2635",x:.9069451980466631,y:1}],description:"开关-通用开关-断开",parentId:"251c6ba9",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1,ey:1},{id:"efe2dc1",locked:10,parentId:"179d2635",x:.9069451980466631,y:0,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.2964563526361279,anchors:[{x:1,y:0,hidden:!0,id:"7d368225",penId:"efe2dc1"},{x:0,y:1,hidden:!0,id:"5757269e",penId:"efe2dc1"}],children:[],lineHeight:1.5},{id:"0336d6d",locked:10,parentId:"179d2635",x:.9069451980466631,y:.6666607870460198,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.33333921295398017,anchors:[{x:1,y:0,hidden:!0,id:"8156d51",penId:"0336d6d"},{x:0,y:1,hidden:!0,id:"5d1bd0bb",penId:"0336d6d"}],children:[],lineHeight:1.5},{id:"fd8c6a3",locked:10,parentId:"179d2635",x:.8093687827816965,y:.2952745488861059,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"818f759",width:.19515283052993293,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"fd8c6a3"},{x:1,y:.5,id:"1",penId:"fd8c6a3"},{x:.5,y:1,id:"2",penId:"fd8c6a3"},{x:0,y:.5,id:"3",penId:"fd8c6a3"}]},{id:"2e93e1de",locked:10,parentId:"179d2635",x:.43868692349430277,y:.30132467853174116,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.46825827455236035,height:.36533610851427867,anchors:[{x:1,y:1,hidden:!0,id:"653d183",penId:"2e93e1de"},{x:0,y:0,hidden:!0,id:"59cb558",penId:"2e93e1de"}],children:[],lineHeight:1.5},{id:"48940cd4",locked:10,parentId:"179d2635",x:.1861096039066739,y:.4722981673222444,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.46780611322119736,height:0,anchors:[{x:0,y:1,hidden:!0,id:"6f687ae0",penId:"48940cd4"},{x:1,y:0,hidden:!0,id:"2b7d21de",penId:"48940cd4"}],children:[],lineHeight:1.5},{id:"7614682",locked:10,parentId:"179d2635",x:-.004521613311629589,y:.4363854444111267,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"64c23b2",width:.19515283052993307,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"7614682"},{x:1,y:.5,id:"1",penId:"7614682"},{x:.5,y:1,id:"2",penId:"7614682"},{x:0,y:.5,id:"3",penId:"7614682"}]},{id:"8f6b874",name:"combine",x:0,y:0,locked:0,width:1,height:1,children:["5fb70c43","50b9d5d1","d85f845","a70f7f1","a0fac3b","448edcea"],anchors:[{id:"0",penId:"8f6b874",x:.9069451980466631,y:0},{id:"1",penId:"8f6b874",x:.9069451980466631,y:1}],description:"开关-通用开关-闭合",parentId:"251c6ba9",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1,ey:1},{id:"5fb70c43",locked:10,parentId:"8f6b874",x:.9069451980466631,y:0,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.2964563526361279,anchors:[{x:1,y:0,hidden:!0,id:"a594399",penId:"5fb70c43"},{x:0,y:1,hidden:!0,id:"1e80702",penId:"5fb70c43"}],children:[],lineHeight:1.5},{id:"50b9d5d1",locked:10,parentId:"8f6b874",x:.9069451980466631,y:.6666607870460198,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.33333921295398017,anchors:[{x:1,y:0,hidden:!0,id:"0fac3c5",penId:"50b9d5d1"},{x:0,y:1,hidden:!0,id:"d17d7fd",penId:"50b9d5d1"}],children:[],lineHeight:1.5},{id:"d85f845",locked:10,parentId:"8f6b874",x:.8093687827816965,y:.2952745488861059,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"fb0b262",width:.19515283052993293,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d85f845"},{x:1,y:.5,id:"1",penId:"d85f845"},{x:.5,y:1,id:"2",penId:"d85f845"},{x:0,y:.5,id:"3",penId:"d85f845"}]},{id:"a70f7f1",locked:10,parentId:"8f6b874",x:.7954422137818773,y:.2607552960682977,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.11150298426478579,height:.4061347961829503,anchors:[{x:1,y:1,hidden:!0,id:"c1a1ac",penId:"a70f7f1"},{x:0,y:0,hidden:!0,id:"b22a5c5",penId:"a70f7f1"}],children:[],lineHeight:1.5},{id:"a0fac3b",locked:10,parentId:"8f6b874",x:.3850605896183758,y:.4722981673222444,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.46780611322119736,height:0,anchors:[{x:0,y:1,hidden:!0,id:"3718d05",penId:"a0fac3b"},{x:1,y:0,hidden:!0,id:"16ac617f",penId:"a0fac3b"}],children:[],lineHeight:1.5},{id:"448edcea",locked:10,parentId:"8f6b874",x:.19442937240007235,y:.4363854444111267,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"607a597",width:.19515283052993307,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"448edcea"},{x:1,y:.5,id:"1",penId:"448edcea"},{x:.5,y:1,id:"2",penId:"448edcea"},{x:0,y:.5,id:"3",penId:"448edcea"}]},{id:"1f12a7e",name:"combine",x:-1775.3416239933122,y:2786.8430321398773,ex:-1737.226639660149,ey:2878.6944455724783,width:38.114984333163285,height:91.8514134326011,center:{x:-1756.2841318267306,y:2832.768738856178},children:["3f995752","74bec5df"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"1f12a7e"},{x:1,y:.5,id:"1",penId:"1f12a7e"},{x:.5,y:1,id:"2",penId:"1f12a7e"},{x:0,y:.5,id:"3",penId:"1f12a7e"}],rotate:0,globalAlpha:1,tags:["Switch","Knob_SelfLock"],description:"开关-自锁旋转开关"},{id:"3f995752",name:"combine",x:0,y:0,locked:0,width:.9999999999999998,height:.9999999999999997,children:["6616a45f","e73feb9","18daee8","b584622","3e24993a","646c5b85","fc72299","f64fd90","e218fe2","19e77bf0"],anchors:[{id:"0",penId:"3f995752",x:.008795074758135445,y:.3354014598540146},{id:"1",penId:"3f995752",x:.9912049252418645,y:.6653284671532848},{id:"2",penId:"3f995752",x:.9912049252418645,y:.9963503649635037},{id:"3",penId:"3f995752",x:.9912049252418645,y:.6653284671532846},{id:"4",penId:"3f995752",x:.9912049252418645,y:.0036496350364963507},{id:"5",penId:"3f995752",x:.9912049252418645,y:.33467153284671536}],description:"开关-自锁旋转开关-断开",parentId:"1f12a7e",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9999999999999998,ey:.9999999999999997},{id:"6616a45f",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["54a5ea1b"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"6616a45f"},{x:1,y:.5,id:"1",penId:"6616a45f"},{x:.5,y:1,id:"2",penId:"6616a45f"},{x:0,y:.5,id:"3",penId:"6616a45f"}],rotate:0},{id:"54a5ea1b",locked:10,parentId:"6616a45f",x:.33157431838170626,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.08883025505716802,height:.0967153284671533,anchors:[{x:0,y:0,hidden:!0,id:"0dba702",penId:"54a5ea1b"},{x:1,y:1,hidden:!0,id:"10ec58a",penId:"54a5ea1b"}],children:[],lineHeight:1.5},{id:"e73feb9",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["bb9a15d"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"e73feb9"},{x:1,y:.5,id:"1",penId:"e73feb9"},{x:.5,y:1,id:"2",penId:"e73feb9"},{x:0,y:.5,id:"3",penId:"e73feb9"}],rotate:0},{id:"bb9a15d",locked:10,parentId:"e73feb9",x:.4204045734388743,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.0897097625329815,height:.0967153284671533,anchors:[{x:0,y:1,hidden:!0,id:"844743",penId:"bb9a15d"},{x:1,y:0,hidden:!0,id:"700e943f",penId:"bb9a15d"}],children:[],lineHeight:1.5},{id:"18daee8",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["a34c0e0"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"18daee8"},{x:1,y:.5,id:"1",penId:"18daee8"},{x:.5,y:1,id:"2",penId:"18daee8"},{x:0,y:.5,id:"3",penId:"18daee8"}],rotate:0},{id:"a34c0e0",locked:10,parentId:"18daee8",x:.008795074758135445,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1996481970096746,height:0,anchors:[{x:0,y:1,hidden:!0,id:"e50983d",penId:"a34c0e0"},{x:1,y:0,hidden:!0,id:"61365582",penId:"a34c0e0"}],children:[],lineHeight:1.5},{id:"b584622",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["6494b91"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"b584622"},{x:1,y:.5,id:"1",penId:"b584622"},{x:.5,y:1,id:"2",penId:"b584622"},{x:0,y:.5,id:"3",penId:"b584622"}],rotate:0},{id:"6494b91",locked:10,parentId:"b584622",x:.20844327176781005,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.19964819700967457,height:0,anchors:[{x:0,y:1,hidden:!0,id:"202f7e2",penId:"6494b91"},{x:1,y:0,hidden:!0,id:"53f53a",penId:"6494b91"}],children:[],lineHeight:1.5},{id:"3e24993a",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7ebd9e0"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3e24993a"},{x:1,y:.5,id:"1",penId:"3e24993a"},{x:.5,y:1,id:"2",penId:"3e24993a"},{x:0,y:.5,id:"3",penId:"3e24993a"}],rotate:0},{id:"7ebd9e0",locked:10,parentId:"3e24993a",x:.20844327176781005,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"e13f914",penId:"7ebd9e0"},{x:0,y:1,hidden:!0,id:"58acebce",penId:"7ebd9e0"}],children:[],lineHeight:1.5},{id:"646c5b85",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["279e9fb8"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"646c5b85"},{x:1,y:.5,id:"1",penId:"646c5b85"},{x:.5,y:1,id:"2",penId:"646c5b85"},{x:0,y:.5,id:"3",penId:"646c5b85"}],rotate:0},{id:"279e9fb8",locked:10,parentId:"646c5b85",x:.9912049252418645,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"2acf0ff3",penId:"279e9fb8"},{x:0,y:1,hidden:!0,id:"1bbfe463",penId:"279e9fb8"}],children:[],lineHeight:1.5},{id:"fc72299",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["769661e"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"fc72299"},{x:1,y:.5,id:"1",penId:"fc72299"},{x:.5,y:1,id:"2",penId:"fc72299"},{x:0,y:.5,id:"3",penId:"fc72299"}],rotate:0},{id:"769661e",locked:10,parentId:"fc72299",x:.4335971855760774,y:.26423357664233577,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5576077396657871,height:.40109489051094893,anchors:[{x:1,y:1,hidden:!0,id:"a11431",penId:"769661e"},{x:0,y:0,hidden:!0,id:"2a0d06b",penId:"769661e"}],children:[],lineHeight:1.5},{id:"f64fd90",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["f83e670"],parentId:"3f995752",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"f64fd90"},{x:1,y:.5,id:"1",penId:"f64fd90"},{x:.5,y:1,id:"2",penId:"f64fd90"},{x:0,y:.5,id:"3",penId:"f64fd90"}],rotate:0},{id:"f83e670",locked:10,parentId:"f64fd90",x:.9912049252418645,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"6aa4fb5",penId:"f83e670"},{x:0,y:1,hidden:!0,id:"34646ed3",penId:"f83e670"}],children:[],lineHeight:1.5},{id:"e218fe2",locked:10,parentId:"3f995752",x:.20844327176781005,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.12313104661389622,height:0,anchors:[{x:1,y:1,hidden:!0,id:"5c87262",penId:"e218fe2"},{x:0,y:0,hidden:!0,id:"ddfbe32",penId:"e218fe2"}],children:[],lineHeight:1.5},{id:"19e77bf0",locked:10,parentId:"3f995752",x:.5101143359718557,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2022867194371152,height:0,anchors:[{x:1,y:1,hidden:!0,id:"e2dee6e",penId:"19e77bf0"},{x:0,y:0,hidden:!0,id:"76eb44b9",penId:"19e77bf0"}],children:[],lineHeight:1.5},{id:"74bec5df",name:"combine",x:.09630606860157255,y:0,locked:0,width:.8073878627968337,height:.9999999999999997,children:["ff6d8d9","d3109f","66206ce0","3620bd9","7bf1eeef","8e44f5e","ef5ee9f","20d45f8e","57453965","b1cfbb3","6689d1"],anchors:[{id:"0",penId:"74bec5df",x:.9891067538126362,y:.9963503649635037},{id:"1",penId:"74bec5df",x:.9891067538126362,y:.0036496350364963507}],description:"开关-自锁旋转开关-闭合",parentId:"1f12a7e",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9036939313984063,ey:.9999999999999997},{id:"ff6d8d9",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["b9a2f9e"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ff6d8d9"},{x:1,y:.5,id:"1",penId:"ff6d8d9"},{x:.5,y:1,id:"2",penId:"ff6d8d9"},{x:0,y:.5,id:"3",penId:"ff6d8d9"}],rotate:0},{id:"b9a2f9e",locked:10,parentId:"ff6d8d9",x:.7233115468409586,y:.33467153284671536,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.26579520697167763,height:0,anchors:[{x:0,y:1,hidden:!0,id:"3f55fdc9",penId:"b9a2f9e"},{x:1,y:0,hidden:!0,id:"d5d9a7d",penId:"b9a2f9e"}],children:[],lineHeight:1.5},{id:"d3109f",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["373e24"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d3109f"},{x:1,y:.5,id:"1",penId:"d3109f"},{x:.5,y:1,id:"2",penId:"d3109f"},{x:0,y:.5,id:"3",penId:"d3109f"}],rotate:0},{id:"373e24",locked:10,parentId:"d3109f",x:.9891067538126362,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"7410e17d",penId:"373e24"},{x:0,y:1,hidden:!0,id:"14f8abf",penId:"373e24"}],children:[],lineHeight:1.5},{id:"66206ce0",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["659d77b"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"66206ce0"},{x:1,y:.5,id:"1",penId:"66206ce0"},{x:.5,y:1,id:"2",penId:"66206ce0"},{x:0,y:.5,id:"3",penId:"66206ce0"}],rotate:0},{id:"659d77b",locked:10,parentId:"66206ce0",x:.7494553376906318,y:.2091240875912409,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.23965141612200438,height:.4562043795620438,anchors:[{x:1,y:1,hidden:!0,id:"7158caa",penId:"659d77b"},{x:0,y:0,hidden:!0,id:"dde7ee7",penId:"659d77b"}],children:[],lineHeight:1.5},{id:"3620bd9",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["f888a55"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3620bd9"},{x:1,y:.5,id:"1",penId:"3620bd9"},{x:.5,y:1,id:"2",penId:"3620bd9"},{x:0,y:.5,id:"3",penId:"3620bd9"}],rotate:0},{id:"f888a55",locked:10,parentId:"3620bd9",x:.9891067538126362,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"668291e0",penId:"f888a55"},{x:0,y:1,hidden:!0,id:"643a6891",penId:"f888a55"}],children:[],lineHeight:1.5},{id:"7bf1eeef",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["8527b0"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"7bf1eeef"},{x:1,y:.5,id:"1",penId:"7bf1eeef"},{x:.5,y:1,id:"2",penId:"7bf1eeef"},{x:0,y:.5,id:"3",penId:"7bf1eeef"}],rotate:0},{id:"8527b0",locked:10,parentId:"7bf1eeef",x:.4106753812636166,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.11002178649237476,height:.0967153284671533,anchors:[{x:0,y:0,hidden:!0,id:"56a6bcd6",penId:"8527b0"},{x:1,y:1,hidden:!0,id:"3d4da39c",penId:"8527b0"}],children:[],lineHeight:1.5},{id:"8e44f5e",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["9238a84"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"8e44f5e"},{x:1,y:.5,id:"1",penId:"8e44f5e"},{x:.5,y:1,id:"2",penId:"8e44f5e"},{x:0,y:.5,id:"3",penId:"8e44f5e"}],rotate:0},{id:"9238a84",locked:10,parentId:"8e44f5e",x:.010893246187363835,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24727668845315906,height:0,anchors:[{x:0,y:1,hidden:!0,id:"5c879633",penId:"9238a84"},{x:1,y:0,hidden:!0,id:"312e0e53",penId:"9238a84"}],children:[],lineHeight:1.5},{id:"ef5ee9f",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["757a51e"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ef5ee9f"},{x:1,y:.5,id:"1",penId:"ef5ee9f"},{x:.5,y:1,id:"2",penId:"ef5ee9f"},{x:0,y:.5,id:"3",penId:"ef5ee9f"}],rotate:0},{id:"757a51e",locked:10,parentId:"ef5ee9f",x:.2581699346405229,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.247276688453159,height:0,anchors:[{x:0,y:1,hidden:!0,id:"17802cc",penId:"757a51e"},{x:1,y:0,hidden:!0,id:"79c02ddc",penId:"757a51e"}],children:[],lineHeight:1.5},{id:"20d45f8e",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["a1299e4"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"20d45f8e"},{x:1,y:.5,id:"1",penId:"20d45f8e"},{x:.5,y:1,id:"2",penId:"20d45f8e"},{x:0,y:.5,id:"3",penId:"20d45f8e"}],rotate:0},{id:"a1299e4",locked:10,parentId:"20d45f8e",x:.2581699346405229,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"4b138df6",penId:"a1299e4"},{x:0,y:1,hidden:!0,id:"aaf1e91",penId:"a1299e4"}],children:[],lineHeight:1.5},{id:"57453965",locked:10,parentId:"74bec5df",x:.2581699346405229,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.15250544662309368,height:0,anchors:[{x:1,y:1,hidden:!0,id:"a3bc53",penId:"57453965"},{x:0,y:0,hidden:!0,id:"2c12c23",penId:"57453965"}],children:[],lineHeight:1.5},{id:"b1cfbb3",locked:10,parentId:"74bec5df",x:.6318082788671024,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.25054466230936817,height:0,anchors:[{x:1,y:1,hidden:!0,id:"f3775bd",penId:"b1cfbb3"},{x:0,y:0,hidden:!0,id:"17bf39a",penId:"b1cfbb3"}],children:[],lineHeight:1.5},{id:"6689d1",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["5b9fcab"],parentId:"74bec5df",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"6689d1"},{x:1,y:.5,id:"1",penId:"6689d1"},{x:.5,y:1,id:"2",penId:"6689d1"},{x:0,y:.5,id:"3",penId:"6689d1"}],rotate:0},{id:"5b9fcab",locked:10,parentId:"6689d1",x:.5206971677559913,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.11111111111111106,height:.0967153284671533,anchors:[{x:0,y:1,hidden:!0,id:"3d5ddb1",penId:"5b9fcab"},{x:1,y:0,hidden:!0,id:"47d03e5b",penId:"5b9fcab"}],children:[],lineHeight:1.5},{id:"6dfb",name:"combine",x:-1638.8912643068752,y:2785.3727420213418,ex:-1600.6086679054042,ey:2877.224155453943,width:38.28259640147095,height:91.85141343260112,center:{x:-1619.7499661061397,y:2831.2984487376425},children:["56ff30a0","223f54a"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"6dfb"},{x:1,y:.5,id:"1",penId:"6dfb"},{x:.5,y:1,id:"2",penId:"6dfb"},{x:0,y:.5,id:"3",penId:"6dfb"}],rotate:0,globalAlpha:1,tags:["Switch","Btn_SelfLock"],description:"开关-自锁按钮"},{id:"56ff30a0",name:"combine",x:0,y:0,locked:0,width:1.0000000000000009,height:.9999999999999997,children:["4c15a83","264dc41","49aad136","3ee358cf","20b8c6","f8e1dc1","4cba84b","13fe1d82","5a73b375"],anchors:[{id:"0",penId:"56ff30a0",x:.008756567425569177,y:.3354014598540146},{id:"1",penId:"56ff30a0",x:.008756567425569177,y:.594160583941606},{id:"2",penId:"56ff30a0",x:.9912434325744308,y:.6653284671532848},{id:"3",penId:"56ff30a0",x:.9912434325744308,y:.9963503649635037},{id:"4",penId:"56ff30a0",x:.9912434325744308,y:.6653284671532846},{id:"5",penId:"56ff30a0",x:.9912434325744308,y:.0036496350364963507},{id:"6",penId:"56ff30a0",x:.9912434325744308,y:.33467153284671536},{id:"7",penId:"56ff30a0",x:.008756567425569177,y:.46459854014598545}],description:"开关-自锁按钮-断开",parentId:"6dfb",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000009,ey:.9999999999999997},{id:"4c15a83",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["63b23b7"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4c15a83"},{x:1,y:.5,id:"1",penId:"4c15a83"},{x:.5,y:1,id:"2",penId:"4c15a83"},{x:0,y:.5,id:"3",penId:"4c15a83"}],rotate:0},{id:"63b23b7",locked:10,parentId:"4c15a83",x:.24693520140105077,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.0884413309982487,height:.0967153284671533,anchors:[{x:0,y:0,hidden:!0,id:"a0126ab",penId:"63b23b7"},{x:1,y:1,hidden:!0,id:"504f5d74",penId:"63b23b7"}],children:[],lineHeight:1.5},{id:"264dc41",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7ee38676"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"264dc41"},{x:1,y:.5,id:"1",penId:"264dc41"},{x:.5,y:1,id:"2",penId:"264dc41"},{x:0,y:.5,id:"3",penId:"264dc41"}],rotate:0},{id:"7ee38676",locked:10,parentId:"264dc41",x:.3353765323992995,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.08931698774080557,height:.0967153284671533,anchors:[{x:0,y:1,hidden:!0,id:"68b73050",penId:"7ee38676"},{x:1,y:0,hidden:!0,id:"96aad71",penId:"7ee38676"}],children:[],lineHeight:1.5},{id:"49aad136",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["106ce24f"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"49aad136"},{x:1,y:.5,id:"1",penId:"49aad136"},{x:.5,y:1,id:"2",penId:"49aad136"},{x:0,y:.5,id:"3",penId:"49aad136"}],rotate:0},{id:"106ce24f",locked:10,parentId:"49aad136",x:.013134851138353765,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1987740805604203,height:0,anchors:[{x:0,y:1,hidden:!0,id:"3a86dd35",penId:"106ce24f"},{x:1,y:0,hidden:!0,id:"b719e5d",penId:"106ce24f"}],children:[],lineHeight:1.5},{id:"3ee358cf",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["5ed612e1"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3ee358cf"},{x:1,y:.5,id:"1",penId:"3ee358cf"},{x:.5,y:1,id:"2",penId:"3ee358cf"},{x:0,y:.5,id:"3",penId:"3ee358cf"}],rotate:0},{id:"5ed612e1",locked:10,parentId:"3ee358cf",x:.013134851138353765,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1987740805604203,height:0,anchors:[{x:0,y:1,hidden:!0,id:"9830253",penId:"5ed612e1"},{x:1,y:0,hidden:!0,id:"ccc420",penId:"5ed612e1"}],children:[],lineHeight:1.5},{id:"20b8c6",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["3d69944"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"20b8c6"},{x:1,y:.5,id:"1",penId:"20b8c6"},{x:.5,y:1,id:"2",penId:"20b8c6"},{x:0,y:.5,id:"3",penId:"20b8c6"}],rotate:0},{id:"3d69944",locked:10,parentId:"20b8c6",x:.008756567425569177,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"17cb562",penId:"3d69944"},{x:0,y:1,hidden:!0,id:"b26beb3",penId:"3d69944"}],children:[],lineHeight:1.5},{id:"f8e1dc1",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["ee73d3a"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"f8e1dc1"},{x:1,y:.5,id:"1",penId:"f8e1dc1"},{x:.5,y:1,id:"2",penId:"f8e1dc1"},{x:0,y:.5,id:"3",penId:"f8e1dc1"}],rotate:0},{id:"ee73d3a",locked:10,parentId:"f8e1dc1",x:.9912434325744308,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"2202e7b",penId:"ee73d3a"},{x:0,y:1,hidden:!0,id:"ea39150",penId:"ee73d3a"}],children:[],lineHeight:1.5},{id:"4cba84b",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["686e50a5"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4cba84b"},{x:1,y:.5,id:"1",penId:"4cba84b"},{x:.5,y:1,id:"2",penId:"4cba84b"},{x:0,y:.5,id:"3",penId:"4cba84b"}],rotate:0},{id:"686e50a5",locked:10,parentId:"4cba84b",x:.43607705779334505,y:.26423357664233577,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5551663747810858,height:.40109489051094893,anchors:[{x:1,y:1,hidden:!0,id:"5259c8d8",penId:"686e50a5"},{x:0,y:0,hidden:!0,id:"4680f719",penId:"686e50a5"}],children:[],lineHeight:1.5},{id:"13fe1d82",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["6052ef"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"13fe1d82"},{x:1,y:.5,id:"1",penId:"13fe1d82"},{x:.5,y:1,id:"2",penId:"13fe1d82"},{x:0,y:.5,id:"3",penId:"13fe1d82"}],rotate:0},{id:"6052ef",locked:10,parentId:"13fe1d82",x:.9912434325744308,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"10986749",penId:"6052ef"},{x:0,y:1,hidden:!0,id:"4d11663a",penId:"6052ef"}],children:[],lineHeight:1.5},{id:"5a73b375",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["b7d83e5","4b44534"],parentId:"56ff30a0",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"5a73b375"},{x:1,y:.5,id:"1",penId:"5a73b375"},{x:.5,y:1,id:"2",penId:"5a73b375"},{x:0,y:.5,id:"3",penId:"5a73b375"}],rotate:0},{id:"b7d83e5",locked:10,parentId:"5a73b375",x:.008756567425569177,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.23817863397548159,height:0,anchors:[{x:1,y:1,hidden:!0,id:"4cd5fce",penId:"b7d83e5"},{x:0,y:0,hidden:!0,id:"a1f10a0",penId:"b7d83e5"}],children:[],lineHeight:1.5},{id:"4b44534",locked:10,parentId:"5a73b375",x:.42469352014010503,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2889667250437829,height:0,anchors:[{x:1,y:1,hidden:!0,id:"6afac61b",penId:"4b44534"},{x:0,y:0,hidden:!0,id:"73b1c357",penId:"4b44534"}],children:[],lineHeight:1.5},{id:"223f54a",name:"combine",x:.09063047285464522,y:0,locked:0,width:.8187390542907186,height:.9999999999999997,children:["27a60f5e","0c5fa7b","61afb2af","4336ce21","27bb48fc","4dcffcc7","9c724dd","dafe703","81abedc","b5937fa"],anchors:[{id:"0",penId:"223f54a",x:.9893048128342247,y:.9963503649635037},{id:"1",penId:"223f54a",x:.9893048128342247,y:.0036496350364963507}],description:"开关-自锁按钮-闭合",parentId:"6dfb",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9093695271453638,ey:.9999999999999997},{id:"27a60f5e",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["4af889a2"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"27a60f5e"},{x:1,y:.5,id:"1",penId:"27a60f5e"},{x:.5,y:1,id:"2",penId:"27a60f5e"},{x:0,y:.5,id:"3",penId:"27a60f5e"}],rotate:0},{id:"4af889a2",locked:10,parentId:"27a60f5e",x:.3016042780748663,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.10802139037433157,height:.0967153284671533,anchors:[{x:0,y:0,hidden:!0,id:"734716f6",penId:"4af889a2"},{x:1,y:1,hidden:!0,id:"cd36907",penId:"4af889a2"}],children:[],lineHeight:1.5},{id:"0c5fa7b",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["64a8107"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"0c5fa7b"},{x:1,y:.5,id:"1",penId:"0c5fa7b"},{x:.5,y:1,id:"2",penId:"0c5fa7b"},{x:0,y:.5,id:"3",penId:"0c5fa7b"}],rotate:0},{id:"64a8107",locked:10,parentId:"0c5fa7b",x:.4096256684491979,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.10909090909090904,height:.0967153284671533,anchors:[{x:0,y:1,hidden:!0,id:"58693a",penId:"64a8107"},{x:1,y:0,hidden:!0,id:"27554959",penId:"64a8107"}],children:[],lineHeight:1.5},{id:"61afb2af",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["328a8b96"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"61afb2af"},{x:1,y:.5,id:"1",penId:"61afb2af"},{x:.5,y:1,id:"2",penId:"61afb2af"},{x:0,y:.5,id:"3",penId:"61afb2af"}],rotate:0},{id:"328a8b96",locked:10,parentId:"61afb2af",x:.7283422459893047,y:.33467153284671536,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.26096256684491986,height:0,anchors:[{x:0,y:1,hidden:!0,id:"e873dd9",penId:"328a8b96"},{x:1,y:0,hidden:!0,id:"1611cf",penId:"328a8b96"}],children:[],lineHeight:1.5},{id:"4336ce21",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["1937d0d2"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4336ce21"},{x:1,y:.5,id:"1",penId:"4336ce21"},{x:.5,y:1,id:"2",penId:"4336ce21"},{x:0,y:.5,id:"3",penId:"4336ce21"}],rotate:0},{id:"1937d0d2",locked:10,parentId:"4336ce21",x:.010695187165775402,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"68945e83",penId:"1937d0d2"},{x:0,y:1,hidden:!0,id:"564f8ff",penId:"1937d0d2"}],children:[],lineHeight:1.5},{id:"27bb48fc",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["93f2e70"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"27bb48fc"},{x:1,y:.5,id:"1",penId:"27bb48fc"},{x:.5,y:1,id:"2",penId:"27bb48fc"},{x:0,y:.5,id:"3",penId:"27bb48fc"}],rotate:0},{id:"93f2e70",locked:10,parentId:"27bb48fc",x:.9893048128342247,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"4910df9f",penId:"93f2e70"},{x:0,y:1,hidden:!0,id:"4bc33ae",penId:"93f2e70"}],children:[],lineHeight:1.5},{id:"4dcffcc7",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["5ab0543d"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4dcffcc7"},{x:1,y:.5,id:"1",penId:"4dcffcc7"},{x:.5,y:1,id:"2",penId:"4dcffcc7"},{x:0,y:.5,id:"3",penId:"4dcffcc7"}],rotate:0},{id:"5ab0543d",locked:10,parentId:"4dcffcc7",x:.7540106951871658,y:.2091240875912409,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.23529411764705885,height:.4562043795620438,anchors:[{x:1,y:1,hidden:!0,id:"32b8f28b",penId:"5ab0543d"},{x:0,y:0,hidden:!0,id:"7d6f792a",penId:"5ab0543d"}],children:[],lineHeight:1.5},{id:"9c724dd",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["ab2f7ad"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"9c724dd"},{x:1,y:.5,id:"1",penId:"9c724dd"},{x:.5,y:1,id:"2",penId:"9c724dd"},{x:0,y:.5,id:"3",penId:"9c724dd"}],rotate:0},{id:"ab2f7ad",locked:10,parentId:"9c724dd",x:.9893048128342247,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"e058e22",penId:"ab2f7ad"},{x:0,y:1,hidden:!0,id:"753f8a9d",penId:"ab2f7ad"}],children:[],lineHeight:1.5},{id:"dafe703",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["d64c17","af3e5a8"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"dafe703"},{x:1,y:.5,id:"1",penId:"dafe703"},{x:.5,y:1,id:"2",penId:"dafe703"},{x:0,y:.5,id:"3",penId:"dafe703"}],rotate:0},{id:"d64c17",locked:10,parentId:"dafe703",x:.010695187165775402,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2909090909090909,height:0,anchors:[{x:1,y:1,hidden:!0,id:"b9d7405",penId:"d64c17"},{x:0,y:0,hidden:!0,id:"8eb45ab",penId:"d64c17"}],children:[],lineHeight:1.5},{id:"af3e5a8",locked:10,parentId:"dafe703",x:.5187165775401069,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.3529411764705883,height:0,anchors:[{x:1,y:1,hidden:!0,id:"096160e",penId:"af3e5a8"},{x:0,y:0,hidden:!0,id:"738a652",penId:"af3e5a8"}],children:[],lineHeight:1.5},{id:"81abedc",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["1c18cc7"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"81abedc"},{x:1,y:.5,id:"1",penId:"81abedc"},{x:.5,y:1,id:"2",penId:"81abedc"},{x:0,y:.5,id:"3",penId:"81abedc"}],rotate:0},{id:"1c18cc7",locked:10,parentId:"81abedc",x:.010695187165775402,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24278074866310162,height:0,anchors:[{x:0,y:1,hidden:!0,id:"11716587",penId:"1c18cc7"},{x:1,y:0,hidden:!0,id:"890f4b3",penId:"1c18cc7"}],children:[],lineHeight:1.5},{id:"b5937fa",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["490327f9"],parentId:"223f54a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"b5937fa"},{x:1,y:.5,id:"1",penId:"b5937fa"},{x:.5,y:1,id:"2",penId:"b5937fa"},{x:0,y:.5,id:"3",penId:"b5937fa"}],rotate:0},{id:"490327f9",locked:10,parentId:"b5937fa",x:.010695187165775402,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24278074866310162,height:0,anchors:[{x:0,y:1,hidden:!0,id:"c667fd8",penId:"490327f9"},{x:1,y:0,hidden:!0,id:"34913b61",penId:"490327f9"}],children:[],lineHeight:1.5},{id:"707640bd",name:"combine",x:-1496.0187372814241,y:2788.3277558237087,ex:-1457.903752948261,ey:2880.1791692563097,width:38.11498433316316,height:91.85141343260112,center:{x:-1476.9612451148425,y:2834.2534625400094},children:["734b6268","77f99e2b"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"707640bd"},{x:1,y:.5,id:"1",penId:"707640bd"},{x:.5,y:1,id:"2",penId:"707640bd"},{x:0,y:.5,id:"3",penId:"707640bd"}],rotate:0,globalAlpha:1,tags:["Switch","Knob_SelfReset"],description:"开关-自复旋转开关"},{id:"734b6268",name:"combine",x:0,y:0,locked:0,width:1.000000000000003,height:.9999999999999997,children:["adee920","cf3c833","1059b4a7","418a0ea2","9210dc6","f2ec300","3c81a07d"],anchors:[{id:"0",penId:"734b6268",x:.008795074758135445,y:.3354014598540146},{id:"1",penId:"734b6268",x:.9912049252418645,y:.6653284671532848},{id:"2",penId:"734b6268",x:.9912049252418645,y:.9963503649635037},{id:"3",penId:"734b6268",x:.9912049252418645,y:.6653284671532846},{id:"4",penId:"734b6268",x:.9912049252418645,y:.0036496350364963507},{id:"5",penId:"734b6268",x:.9912049252418645,y:.33467153284671536}],description:"开关-自复旋转开关-断开",parentId:"707640bd",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.000000000000003,ey:.9999999999999997},{id:"adee920",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["fb90df3"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"adee920"},{x:1,y:.5,id:"1",penId:"adee920"},{x:.5,y:1,id:"2",penId:"adee920"},{x:0,y:.5,id:"3",penId:"adee920"}],rotate:0},{id:"fb90df3",locked:10,parentId:"adee920",x:.008795074758135445,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1996481970096746,height:0,anchors:[{x:0,y:1,hidden:!0,id:"7c5644c3",penId:"fb90df3"},{x:1,y:0,hidden:!0,id:"da0a2eb",penId:"fb90df3"}],children:[],lineHeight:1.5},{id:"cf3c833",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["ff046f9"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"cf3c833"},{x:1,y:.5,id:"1",penId:"cf3c833"},{x:.5,y:1,id:"2",penId:"cf3c833"},{x:0,y:.5,id:"3",penId:"cf3c833"}],rotate:0},{id:"ff046f9",locked:10,parentId:"cf3c833",x:.20844327176781005,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.19964819700967457,height:0,anchors:[{x:0,y:1,hidden:!0,id:"46b60693",penId:"ff046f9"},{x:1,y:0,hidden:!0,id:"46725267",penId:"ff046f9"}],children:[],lineHeight:1.5},{id:"1059b4a7",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["1317983"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"1059b4a7"},{x:1,y:.5,id:"1",penId:"1059b4a7"},{x:.5,y:1,id:"2",penId:"1059b4a7"},{x:0,y:.5,id:"3",penId:"1059b4a7"}],rotate:0},{id:"1317983",locked:10,parentId:"1059b4a7",x:.20844327176781005,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"5ba7ed9c",penId:"1317983"},{x:0,y:1,hidden:!0,id:"10580a05",penId:"1317983"}],children:[],lineHeight:1.5},{id:"418a0ea2",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["44ba209"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"418a0ea2"},{x:1,y:.5,id:"1",penId:"418a0ea2"},{x:.5,y:1,id:"2",penId:"418a0ea2"},{x:0,y:.5,id:"3",penId:"418a0ea2"}],rotate:0},{id:"44ba209",locked:10,parentId:"418a0ea2",x:.9912049252418645,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"71a95b10",penId:"44ba209"},{x:0,y:1,hidden:!0,id:"0da5101",penId:"44ba209"}],children:[],lineHeight:1.5},{id:"9210dc6",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["39e956ca"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"9210dc6"},{x:1,y:.5,id:"1",penId:"9210dc6"},{x:.5,y:1,id:"2",penId:"9210dc6"},{x:0,y:.5,id:"3",penId:"9210dc6"}],rotate:0},{id:"39e956ca",locked:10,parentId:"9210dc6",x:.4335971855760774,y:.26423357664233577,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5576077396657871,height:.40109489051094893,anchors:[{x:1,y:1,hidden:!0,id:"92c92ad",penId:"39e956ca"},{x:0,y:0,hidden:!0,id:"7fb8c6b",penId:"39e956ca"}],children:[],lineHeight:1.5},{id:"f2ec300",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["dba3189"],parentId:"734b6268",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"f2ec300"},{x:1,y:.5,id:"1",penId:"f2ec300"},{x:.5,y:1,id:"2",penId:"f2ec300"},{x:0,y:.5,id:"3",penId:"f2ec300"}],rotate:0},{id:"dba3189",locked:10,parentId:"f2ec300",x:.9912049252418645,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"42d60d96",penId:"dba3189"},{x:0,y:1,hidden:!0,id:"225e8799",penId:"dba3189"}],children:[],lineHeight:1.5},{id:"3c81a07d",locked:10,parentId:"734b6268",x:.20844327176781005,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.503957783641161,height:0,anchors:[{x:1,y:1,hidden:!0,id:"6ab4484",penId:"3c81a07d"},{x:0,y:0,hidden:!0,id:"625af93",penId:"3c81a07d"}],children:[],lineHeight:1.5},{id:"77f99e2b",name:"combine",x:.09630606860158658,y:0,locked:0,width:.8073878627968365,height:.9999999999999997,children:["bbff594","52d89af3","620a535a","ab740cd","ca9fcbe","6dc1ea","e8cd234","b872601"],anchors:[{id:"0",penId:"77f99e2b",x:.9891067538126362,y:.9963503649635037},{id:"1",penId:"77f99e2b",x:.9891067538126362,y:.0036496350364963507}],description:"开关-自复旋转开关-闭合",parentId:"707640bd",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9036939313984231,ey:.9999999999999997},{id:"bbff594",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["06beb47"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"bbff594"},{x:1,y:.5,id:"1",penId:"bbff594"},{x:.5,y:1,id:"2",penId:"bbff594"},{x:0,y:.5,id:"3",penId:"bbff594"}],rotate:0},{id:"06beb47",locked:10,parentId:"bbff594",x:.7233115468409586,y:.33467153284671536,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.26579520697167763,height:0,anchors:[{x:0,y:1,hidden:!0,id:"6ddf9a66",penId:"06beb47"},{x:1,y:0,hidden:!0,id:"cbb1b0b",penId:"06beb47"}],children:[],lineHeight:1.5},{id:"52d89af3",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["3f3055d"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"52d89af3"},{x:1,y:.5,id:"1",penId:"52d89af3"},{x:.5,y:1,id:"2",penId:"52d89af3"},{x:0,y:.5,id:"3",penId:"52d89af3"}],rotate:0},{id:"3f3055d",locked:10,parentId:"52d89af3",x:.9891067538126362,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"68afaca9",penId:"3f3055d"},{x:0,y:1,hidden:!0,id:"74532d0c",penId:"3f3055d"}],children:[],lineHeight:1.5},{id:"620a535a",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["4e4bad61"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"620a535a"},{x:1,y:.5,id:"1",penId:"620a535a"},{x:.5,y:1,id:"2",penId:"620a535a"},{x:0,y:.5,id:"3",penId:"620a535a"}],rotate:0},{id:"4e4bad61",locked:10,parentId:"620a535a",x:.7494553376906318,y:.2091240875912409,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.23965141612200438,height:.4562043795620438,anchors:[{x:1,y:1,hidden:!0,id:"15104d7",penId:"4e4bad61"},{x:0,y:0,hidden:!0,id:"28abb1e",penId:"4e4bad61"}],children:[],lineHeight:1.5},{id:"ab740cd",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["9575b04"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ab740cd"},{x:1,y:.5,id:"1",penId:"ab740cd"},{x:.5,y:1,id:"2",penId:"ab740cd"},{x:0,y:.5,id:"3",penId:"ab740cd"}],rotate:0},{id:"9575b04",locked:10,parentId:"ab740cd",x:.9891067538126362,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"b36217e",penId:"9575b04"},{x:0,y:1,hidden:!0,id:"ab49ff1",penId:"9575b04"}],children:[],lineHeight:1.5},{id:"ca9fcbe",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["687f70fc"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ca9fcbe"},{x:1,y:.5,id:"1",penId:"ca9fcbe"},{x:.5,y:1,id:"2",penId:"ca9fcbe"},{x:0,y:.5,id:"3",penId:"ca9fcbe"}],rotate:0},{id:"687f70fc",locked:10,parentId:"ca9fcbe",x:.010893246187363835,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24727668845315906,height:0,anchors:[{x:0,y:1,hidden:!0,id:"bd0b8a4",penId:"687f70fc"},{x:1,y:0,hidden:!0,id:"9d08cce",penId:"687f70fc"}],children:[],lineHeight:1.5},{id:"6dc1ea",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["a9b9146"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"6dc1ea"},{x:1,y:.5,id:"1",penId:"6dc1ea"},{x:.5,y:1,id:"2",penId:"6dc1ea"},{x:0,y:.5,id:"3",penId:"6dc1ea"}],rotate:0},{id:"a9b9146",locked:10,parentId:"6dc1ea",x:.2581699346405229,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.247276688453159,height:0,anchors:[{x:0,y:1,hidden:!0,id:"40bd01fe",penId:"a9b9146"},{x:1,y:0,hidden:!0,id:"17d63f8d",penId:"a9b9146"}],children:[],lineHeight:1.5},{id:"e8cd234",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["5ecc403"],parentId:"77f99e2b",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"e8cd234"},{x:1,y:.5,id:"1",penId:"e8cd234"},{x:.5,y:1,id:"2",penId:"e8cd234"},{x:0,y:.5,id:"3",penId:"e8cd234"}],rotate:0},{id:"5ecc403",locked:10,parentId:"e8cd234",x:.2581699346405229,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"acde0ef",penId:"5ecc403"},{x:0,y:1,hidden:!0,id:"d0ca477",penId:"5ecc403"}],children:[],lineHeight:1.5},{id:"b872601",locked:10,parentId:"77f99e2b",x:.2581699346405229,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.6241830065359477,height:0,anchors:[{x:1,y:1,hidden:!0,id:"b5d8797",penId:"b872601"},{x:0,y:0,hidden:!0,id:"98d15e",penId:"b872601"}],children:[],lineHeight:1.5},{id:"504f755",name:"combine",x:-1354.11184218387,y:2788.662979960327,ex:-1332.6140134424525,ey:2880.514393392928,width:21.49782874141763,height:91.85141343260112,center:{x:-1343.3629278131611,y:2834.5886866766277},children:["9e0dfb","3457cb50"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"504f755"},{x:1,y:.5,id:"1",penId:"504f755"},{x:.5,y:1,id:"2",penId:"504f755"},{x:0,y:.5,id:"3",penId:"504f755"}],rotate:0,globalAlpha:1,tags:["duanluqi_wx"],description:"开关-断路器"},{id:"9e0dfb",name:"combine",x:0,y:0,locked:0,width:.9999999999999964,height:.9999999999999997,children:["df01e5d","59bf8d4f","43c3c40","2b0e0ff3","f59771f"],anchors:[{id:"0",penId:"9e0dfb",x:.8375913784007838,y:.0015698587127158557},{id:"1",penId:"9e0dfb",x:.8375913784007838,y:1.001569858712716}],description:"开关-断路器-断开",parentId:"504f755",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9999999999999964,ey:.9999999999999997},{id:"df01e5d",locked:10,parentId:"9e0dfb",x:.8375913784007838,y:.0015698587127158557,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.29645635263612796,anchors:[{x:1,y:0,hidden:!0,id:"c02ac53",penId:"df01e5d"},{x:0,y:1,hidden:!0,id:"cf211b7",penId:"df01e5d"}],children:[],lineHeight:1.5},{id:"59bf8d4f",locked:10,parentId:"9e0dfb",x:.8375913784007838,y:.6682306457587357,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3333392129539804,anchors:[{x:1,y:0,hidden:!0,id:"5c6982bf",penId:"59bf8d4f"},{x:0,y:1,hidden:!0,id:"a4f9d2c",penId:"59bf8d4f"}],children:[],lineHeight:1.5},{id:"43c3c40",locked:10,parentId:"9e0dfb",x:.6749566659130304,y:.2968267687368812,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"4c10c83b",width:.3252694249755068,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"43c3c40"},{x:1,y:.5,id:"1",penId:"43c3c40"},{x:.5,y:1,id:"2",penId:"43c3c40"},{x:0,y:.5,id:"3",penId:"43c3c40"}]},{id:"2b0e0ff3",locked:10,parentId:"9e0dfb",x:.057125631170397165,y:.30289453724445703,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.7804657472303866,height:.36533610851427867,anchors:[{x:1,y:1,hidden:!0,id:"16ed797d",penId:"2b0e0ff3"},{x:0,y:0,hidden:!0,id:"2197e1a8",penId:"2b0e0ff3"}],children:[],lineHeight:1.5},{id:"f59771f",locked:10,parentId:"9e0dfb",x:.06556635767578566,y:.42514948935494684,rotate:-27.52,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"rectangle",width:.31253297158791166,height:.07314836046778263,borderRadius:0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"f59771f"},{x:1,y:.5,id:"1",penId:"f59771f"},{x:.5,y:1,id:"2",penId:"f59771f"},{x:0,y:.5,id:"3",penId:"f59771f"}]},{id:"3457cb50",name:"combine",x:0,y:0,locked:0,width:.9999999999999964,height:.9999999999999997,children:["6b7d5b","6332554e","f5b393c","df444e3","7d9ae722"],anchors:[{id:"0",penId:"3457cb50",x:.8375913784007838,y:.0015698587127158557},{id:"1",penId:"3457cb50",x:.8375913784007838,y:1.001569858712716}],description:"开关-断路器-闭合",parentId:"504f755",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9999999999999964,ey:.9999999999999997},{id:"6b7d5b",locked:10,parentId:"3457cb50",x:.8375913784007838,y:.0015698587127158557,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.29645635263612796,anchors:[{x:1,y:0,hidden:!0,id:"885dfcc",penId:"6b7d5b"},{x:0,y:1,hidden:!0,id:"1ade8799",penId:"6b7d5b"}],children:[],lineHeight:1.5},{id:"6332554e",locked:10,parentId:"3457cb50",x:.8375913784007838,y:.6682306457587357,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3333392129539804,anchors:[{x:1,y:0,hidden:!0,id:"71e1ba",penId:"6332554e"},{x:0,y:1,hidden:!0,id:"1908ce43",penId:"6332554e"}],children:[],lineHeight:1.5},{id:"f5b393c",locked:10,parentId:"3457cb50",x:.6749566659130304,y:.2968267687368812,rotate:0,color:"#231815",lineWidth:.08466653731501243,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"6b0139a9",width:.3252694249755068,height:.07612932813574863,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"f5b393c"},{x:1,y:.5,id:"1",penId:"f5b393c"},{x:.5,y:1,id:"2",penId:"f5b393c"},{x:0,y:.5,id:"3",penId:"f5b393c"}]},{id:"df444e3",locked:10,parentId:"3457cb50",x:.6413444871505012,y:.2623604325048948,rotate:0,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.19624689125028266,height:.4058702132538408,anchors:[{x:1,y:1,hidden:!0,id:"3e3d1df",penId:"df444e3"},{x:0,y:0,hidden:!0,id:"44bf6ff",penId:"df444e3"}],children:[],lineHeight:1.5},{id:"7d9ae722",locked:10,parentId:"3457cb50",x:.40643605396035876,y:.3881784347273914,rotate:-7.41,color:"#231815",lineWidth:.014111089552502074,globalAlpha:null,fontSize:16,matrix:null,name:"rectangle",width:.31253297158791166,height:.07314836046778263,borderRadius:0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"7d9ae722"},{x:1,y:.5,id:"1",penId:"7d9ae722"},{x:.5,y:1,id:"2",penId:"7d9ae722"},{x:0,y:.5,id:"3",penId:"7d9ae722"}]},{id:"d5c2232",name:"combine",x:-1216.8859793252482,y:2787.336883583446,ex:-1178.6033829237772,ey:2879.188297016047,width:38.28259640147095,height:91.85141343260112,center:{x:-1197.7446811245127,y:2833.2625902997465},children:["1851cab6","348aed8"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d5c2232"},{x:1,y:.5,id:"1",penId:"d5c2232"},{x:.5,y:1,id:"2",penId:"d5c2232"},{x:0,y:.5,id:"3",penId:"d5c2232"}],rotate:0,globalAlpha:1,tags:["Switch","Btn_SelfReset"],description:"开关-按钮"},{id:"1851cab6",name:"combine",x:0,y:0,locked:0,width:1.0000000000000009,height:.9999999999999997,children:["5415ea3","8235341","3b9f6e93","7caade40","2545ae","6289c32","da14c63"],anchors:[{id:"0",penId:"1851cab6",x:.008756567425569177,y:.3354014598540146},{id:"1",penId:"1851cab6",x:.008756567425569177,y:.594160583941606},{id:"2",penId:"1851cab6",x:.9912434325744308,y:.6653284671532848},{id:"3",penId:"1851cab6",x:.9912434325744308,y:.9963503649635037},{id:"4",penId:"1851cab6",x:.9912434325744308,y:.6653284671532846},{id:"5",penId:"1851cab6",x:.9912434325744308,y:.0036496350364963507},{id:"6",penId:"1851cab6",x:.9912434325744308,y:.33467153284671536},{id:"7",penId:"1851cab6",x:.008756567425569177,y:.46459854014598545}],description:"开关-按钮-断开",parentId:"d5c2232",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000009,ey:.9999999999999997},{id:"5415ea3",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["52368382"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"5415ea3"},{x:1,y:.5,id:"1",penId:"5415ea3"},{x:.5,y:1,id:"2",penId:"5415ea3"},{x:0,y:.5,id:"3",penId:"5415ea3"}],rotate:0},{id:"52368382",locked:10,parentId:"5415ea3",x:.013134851138353765,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1987740805604203,height:0,anchors:[{x:0,y:1,hidden:!0,id:"3ee233b",penId:"52368382"},{x:1,y:0,hidden:!0,id:"db5796d",penId:"52368382"}],children:[],lineHeight:1.5},{id:"8235341",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["9a59be"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"8235341"},{x:1,y:.5,id:"1",penId:"8235341"},{x:.5,y:1,id:"2",penId:"8235341"},{x:0,y:.5,id:"3",penId:"8235341"}],rotate:0},{id:"9a59be",locked:10,parentId:"8235341",x:.013134851138353765,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.1987740805604203,height:0,anchors:[{x:0,y:1,hidden:!0,id:"2ed99f6d",penId:"9a59be"},{x:1,y:0,hidden:!0,id:"38603fe",penId:"9a59be"}],children:[],lineHeight:1.5},{id:"3b9f6e93",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["58b79b2d"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3b9f6e93"},{x:1,y:.5,id:"1",penId:"3b9f6e93"},{x:.5,y:1,id:"2",penId:"3b9f6e93"},{x:0,y:.5,id:"3",penId:"3b9f6e93"}],rotate:0},{id:"58b79b2d",locked:10,parentId:"3b9f6e93",x:.008756567425569177,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"578a5708",penId:"58b79b2d"},{x:0,y:1,hidden:!0,id:"2dd6465f",penId:"58b79b2d"}],children:[],lineHeight:1.5},{id:"7caade40",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["d01d2f2"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"7caade40"},{x:1,y:.5,id:"1",penId:"7caade40"},{x:.5,y:1,id:"2",penId:"7caade40"},{x:0,y:.5,id:"3",penId:"7caade40"}],rotate:0},{id:"d01d2f2",locked:10,parentId:"7caade40",x:.9912434325744308,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"5407908d",penId:"d01d2f2"},{x:0,y:1,hidden:!0,id:"25fcf84",penId:"d01d2f2"}],children:[],lineHeight:1.5},{id:"2545ae",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7e9aa4"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"2545ae"},{x:1,y:.5,id:"1",penId:"2545ae"},{x:.5,y:1,id:"2",penId:"2545ae"},{x:0,y:.5,id:"3",penId:"2545ae"}],rotate:0},{id:"7e9aa4",locked:10,parentId:"2545ae",x:.43607705779334505,y:.26423357664233577,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5551663747810858,height:.40109489051094893,anchors:[{x:1,y:1,hidden:!0,id:"63f47920",penId:"7e9aa4"},{x:0,y:0,hidden:!0,id:"2d761783",penId:"7e9aa4"}],children:[],lineHeight:1.5},{id:"6289c32",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["abdd075"],parentId:"1851cab6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"6289c32"},{x:1,y:.5,id:"1",penId:"6289c32"},{x:.5,y:1,id:"2",penId:"6289c32"},{x:0,y:.5,id:"3",penId:"6289c32"}],rotate:0},{id:"abdd075",locked:10,parentId:"6289c32",x:.9912434325744308,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"4cd41f",penId:"abdd075"},{x:0,y:1,hidden:!0,id:"ae23a9d",penId:"abdd075"}],children:[],lineHeight:1.5},{id:"da14c63",locked:10,parentId:"1851cab6",x:.008756567425569177,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.7049036777583189,height:0,anchors:[{x:1,y:1,hidden:!0,id:"7e2187bc",penId:"da14c63"},{x:0,y:0,hidden:!0,id:"3c848649",penId:"da14c63"}],children:[],lineHeight:1.5},{id:"348aed8",name:"combine",x:.09063047285464522,y:0,locked:0,width:.8187390542907186,height:.9999999999999997,children:["5709b5cb","bb6f8a2","c6a04a4","23ae3733","72f3febc","1ed8fdd","c02a701","2748deb"],anchors:[{id:"0",penId:"348aed8",x:.9893048128342247,y:.9963503649635037},{id:"1",penId:"348aed8",x:.9893048128342247,y:.0036496350364963507}],description:"开关-按钮-闭合",parentId:"d5c2232",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9093695271453638,ey:.9999999999999997},{id:"5709b5cb",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7da3394d"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"5709b5cb"},{x:1,y:.5,id:"1",penId:"5709b5cb"},{x:.5,y:1,id:"2",penId:"5709b5cb"},{x:0,y:.5,id:"3",penId:"5709b5cb"}],rotate:0},{id:"7da3394d",locked:10,parentId:"5709b5cb",x:.7283422459893047,y:.33467153284671536,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.26096256684491986,height:0,anchors:[{x:0,y:1,hidden:!0,id:"47978557",penId:"7da3394d"},{x:1,y:0,hidden:!0,id:"184dd9a",penId:"7da3394d"}],children:[],lineHeight:1.5},{id:"bb6f8a2",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["5918d98"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"bb6f8a2"},{x:1,y:.5,id:"1",penId:"bb6f8a2"},{x:.5,y:1,id:"2",penId:"bb6f8a2"},{x:0,y:.5,id:"3",penId:"bb6f8a2"}],rotate:0},{id:"5918d98",locked:10,parentId:"bb6f8a2",x:.010695187165775402,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.25875912408759133,anchors:[{x:1,y:0,hidden:!0,id:"2238e17",penId:"5918d98"},{x:0,y:1,hidden:!0,id:"85108ed",penId:"5918d98"}],children:[],lineHeight:1.5},{id:"c6a04a4",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["59148ae2"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"c6a04a4"},{x:1,y:.5,id:"1",penId:"c6a04a4"},{x:.5,y:1,id:"2",penId:"c6a04a4"},{x:0,y:.5,id:"3",penId:"c6a04a4"}],rotate:0},{id:"59148ae2",locked:10,parentId:"c6a04a4",x:.9893048128342247,y:.6653284671532848,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"34caf87",penId:"59148ae2"},{x:0,y:1,hidden:!0,id:"20782110",penId:"59148ae2"}],children:[],lineHeight:1.5},{id:"23ae3733",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["ca4e4ed"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"23ae3733"},{x:1,y:.5,id:"1",penId:"23ae3733"},{x:.5,y:1,id:"2",penId:"23ae3733"},{x:0,y:.5,id:"3",penId:"23ae3733"}],rotate:0},{id:"ca4e4ed",locked:10,parentId:"23ae3733",x:.7540106951871658,y:.2091240875912409,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.23529411764705885,height:.4562043795620438,anchors:[{x:1,y:1,hidden:!0,id:"64667d",penId:"ca4e4ed"},{x:0,y:0,hidden:!0,id:"dc379db",penId:"ca4e4ed"}],children:[],lineHeight:1.5},{id:"72f3febc",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["29c6c39"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"72f3febc"},{x:1,y:.5,id:"1",penId:"72f3febc"},{x:.5,y:1,id:"2",penId:"72f3febc"},{x:0,y:.5,id:"3",penId:"72f3febc"}],rotate:0},{id:"29c6c39",locked:10,parentId:"72f3febc",x:.9893048128342247,y:.0036496350364963507,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.331021897810219,anchors:[{x:1,y:0,hidden:!0,id:"642da3a",penId:"29c6c39"},{x:0,y:1,hidden:!0,id:"e8c9ba3",penId:"29c6c39"}],children:[],lineHeight:1.5},{id:"1ed8fdd",locked:10,parentId:"348aed8",x:.010695187165775402,y:.46459854014598545,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.8545454545454546,height:0,anchors:[{x:1,y:1,hidden:!0,id:"2b297c",penId:"1ed8fdd"},{x:0,y:0,hidden:!0,id:"e921f1c",penId:"1ed8fdd"}],children:[],lineHeight:1.5},{id:"c02a701",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["2400598d"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"c02a701"},{x:1,y:.5,id:"1",penId:"c02a701"},{x:.5,y:1,id:"2",penId:"c02a701"},{x:0,y:.5,id:"3",penId:"c02a701"}],rotate:0},{id:"2400598d",locked:10,parentId:"c02a701",x:.010695187165775402,y:.5941605839416059,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24278074866310162,height:0,anchors:[{x:0,y:1,hidden:!0,id:"d2b80bc",penId:"2400598d"},{x:1,y:0,hidden:!0,id:"ce72d63",penId:"2400598d"}],children:[],lineHeight:1.5},{id:"2748deb",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7aa759c"],parentId:"348aed8",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"2748deb"},{x:1,y:.5,id:"1",penId:"2748deb"},{x:.5,y:1,id:"2",penId:"2748deb"},{x:0,y:.5,id:"3",penId:"2748deb"}],rotate:0},{id:"7aa759c",locked:10,parentId:"2748deb",x:.010695187165775402,y:.3354014598540146,rotate:0,color:"#231815",lineWidth:.29197080291970806,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.24278074866310162,height:0,anchors:[{x:0,y:1,hidden:!0,id:"21e1e38b",penId:"7aa759c"},{x:1,y:0,hidden:!0,id:"3eb788df",penId:"7aa759c"}],children:[],lineHeight:1.5},{id:"d0677b7",name:"combine",x:-1086.0292836927256,y:2787.67210772006,ex:-1059.3897937013883,ey:2879.523521152661,width:26.639489991337413,height:91.85141343260112,center:{x:-1072.7095386970568,y:2833.5978144363607},children:["172592a","cc7f3b6"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d0677b7"},{x:1,y:.5,id:"1",penId:"d0677b7"},{x:.5,y:1,id:"2",penId:"d0677b7"},{x:0,y:.5,id:"3",penId:"d0677b7"}],rotate:0,globalAlpha:1,tags:["Switch"],description:"开关-惯性开关"},{id:"172592a",name:"combine",x:0,y:0,locked:0,width:.9999999999999954,height:.9999999999999997,children:["fa76b81","bcaf08b","2f7165df","ca46ae8","dac4035","4a1b17bd"],anchors:[{id:"0",penId:"172592a",x:.9887005649717514,y:.9976591760299625},{id:"1",penId:"172592a",x:.9887005649717514,y:.0023408239700374533}],description:"开关-惯性开关-断开",parentId:"d0677b7",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.9999999999999954,ey:.9999999999999997},{id:"fa76b81",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["1ec9c5e"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"fa76b81"},{x:1,y:.5,id:"1",penId:"fa76b81"},{x:.5,y:1,id:"2",penId:"fa76b81"},{x:0,y:.5,id:"3",penId:"fa76b81"}],rotate:0},{id:"1ec9c5e",locked:10,parentId:"fa76b81",x:.011299435028248588,y:.5063202247191011,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2857142857142857,height:.14372659176029964,anchors:[{x:0,y:0,hidden:!0,id:"ab43420",penId:"1ec9c5e"},{x:1,y:1,hidden:!0,id:"398143e1",penId:"1ec9c5e"}],children:[],lineHeight:1.5},{id:"bcaf08b",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["1455e2fd"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"bcaf08b"},{x:1,y:.5,id:"1",penId:"bcaf08b"},{x:.5,y:1,id:"2",penId:"bcaf08b"},{x:0,y:.5,id:"3",penId:"bcaf08b"}],rotate:0},{id:"1455e2fd",locked:10,parentId:"bcaf08b",x:.011299435028248588,y:.4234550561797753,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.49475383373688453,height:.08286516853932582,anchors:[{x:1,y:0,hidden:!0,id:"832da14",penId:"1455e2fd"},{x:0,y:1,hidden:!0,id:"cbe28eb",penId:"1455e2fd"}],children:[],lineHeight:1.5},{id:"2f7165df",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["7b5447a"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"2f7165df"},{x:1,y:.5,id:"1",penId:"2f7165df"},{x:.5,y:1,id:"2",penId:"2f7165df"},{x:0,y:.5,id:"3",penId:"2f7165df"}],rotate:0},{id:"7b5447a",locked:10,parentId:"2f7165df",x:.9887005649717514,y:.6659644194756554,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3316947565543071,anchors:[{x:1,y:0,hidden:!0,id:"1fed1dd5",penId:"7b5447a"},{x:0,y:1,hidden:!0,id:"62e1ccba",penId:"7b5447a"}],children:[],lineHeight:1.5},{id:"ca46ae8",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["b0bf3df"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ca46ae8"},{x:1,y:.5,id:"1",penId:"ca46ae8"},{x:.5,y:1,id:"2",penId:"ca46ae8"},{x:0,y:.5,id:"3",penId:"ca46ae8"}],rotate:0},{id:"b0bf3df",locked:10,parentId:"ca46ae8",x:.9887005649717514,y:.0023408239700374533,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.33169475655430714,anchors:[{x:1,y:0,hidden:!0,id:"142820bb",penId:"b0bf3df"},{x:0,y:1,hidden:!0,id:"37fc1daa",penId:"b0bf3df"}],children:[],lineHeight:1.5},{id:"dac4035",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["651dbbe"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"dac4035"},{x:1,y:.5,id:"1",penId:"dac4035"},{x:.5,y:1,id:"2",penId:"dac4035"},{x:0,y:.5,id:"3",penId:"dac4035"}],rotate:0},{id:"651dbbe",locked:10,parentId:"dac4035",x:.1880548829701372,y:.26357677902621723,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.8006456820016141,height:.40238764044943814,anchors:[{x:1,y:1,hidden:!0,id:"f13b315",penId:"651dbbe"},{x:0,y:0,hidden:!0,id:"2188a6f",penId:"651dbbe"}],children:[],lineHeight:1.5},{id:"4a1b17bd",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["d7cf5da"],parentId:"172592a",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4a1b17bd"},{x:1,y:.5,id:"1",penId:"4a1b17bd"},{x:.5,y:1,id:"2",penId:"4a1b17bd"},{x:0,y:.5,id:"3",penId:"4a1b17bd"}],rotate:0},{id:"d7cf5da",locked:10,parentId:"4a1b17bd",x:.2397094430992736,y:.6334269662921348,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"circle",width:.11460855528652138,height:.03323970037453183,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d7cf5da"},{x:1,y:.5,id:"1",penId:"d7cf5da"},{x:.5,y:1,id:"2",penId:"d7cf5da"},{x:0,y:.5,id:"3",penId:"d7cf5da"}]},{id:"cc7f3b6",name:"combine",x:.16101694915254353,y:0,locked:0,width:.6779661016949121,height:.9999999999999997,children:["9c5994f","85f3ee","a69020c","76e6bcb","cdf33e","63b03a4","3e70cd"],anchors:[{id:"0",penId:"cc7f3b6",x:.9857142857142855,y:.9976591760299625},{id:"1",penId:"cc7f3b6",x:.9857142857142855,y:.0023408239700374533}],description:"开关-惯性开关-闭合",parentId:"d0677b7",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:.8389830508474556,ey:.9999999999999997},{id:"9c5994f",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["12829e70"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"9c5994f"},{x:1,y:.5,id:"1",penId:"9c5994f"},{x:.5,y:1,id:"2",penId:"9c5994f"},{x:0,y:.5,id:"3",penId:"9c5994f"}],rotate:0},{id:"12829e70",locked:10,parentId:"9c5994f",x:.02261904761904762,y:.4014513108614232,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.07380952380952382,height:.16526217228464427,anchors:[{x:0,y:0,hidden:!0,id:"5df6aefc",penId:"12829e70"},{x:1,y:1,hidden:!0,id:"5eae3db5",penId:"12829e70"}],children:[],lineHeight:1.5},{id:"85f3ee",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["f957342"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"85f3ee"},{x:1,y:.5,id:"1",penId:"85f3ee"},{x:.5,y:1,id:"2",penId:"85f3ee"},{x:0,y:.5,id:"3",penId:"85f3ee"}],rotate:0},{id:"f957342",locked:10,parentId:"85f3ee",x:.02261904761904762,y:.38693820224719105,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.8404761904761904,height:.01451310861423215,anchors:[{x:1,y:0,hidden:!0,id:"6678d636",penId:"f957342"},{x:0,y:1,hidden:!0,id:"7cfd80c",penId:"f957342"}],children:[],lineHeight:1.5},{id:"a69020c",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["2763b646"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"a69020c"},{x:1,y:.5,id:"1",penId:"a69020c"},{x:.5,y:1,id:"2",penId:"a69020c"},{x:0,y:.5,id:"3",penId:"a69020c"}],rotate:0},{id:"2763b646",locked:10,parentId:"a69020c",x:.9857142857142855,y:.6659644194756554,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3316947565543071,anchors:[{x:1,y:0,hidden:!0,id:"6970420",penId:"2763b646"},{x:0,y:1,hidden:!0,id:"70a7ada5",penId:"2763b646"}],children:[],lineHeight:1.5},{id:"76e6bcb",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["103ff180"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"76e6bcb"},{x:1,y:.5,id:"1",penId:"76e6bcb"},{x:.5,y:1,id:"2",penId:"76e6bcb"},{x:0,y:.5,id:"3",penId:"76e6bcb"}],rotate:0},{id:"103ff180",locked:10,parentId:"76e6bcb",x:.9857142857142855,y:.0023408239700374533,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.33169475655430714,anchors:[{x:1,y:0,hidden:!0,id:"8d4d71f",penId:"103ff180"},{x:0,y:1,hidden:!0,id:"53cda15",penId:"103ff180"}],children:[],lineHeight:1.5},{id:"cdf33e",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["4c490749"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"cdf33e"},{x:1,y:.5,id:"1",penId:"cdf33e"},{x:.5,y:1,id:"2",penId:"cdf33e"},{x:0,y:.5,id:"3",penId:"cdf33e"}],rotate:0},{id:"4c490749",locked:10,parentId:"cdf33e",x:.7809523809523808,y:.20318352059925093,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2059523809523809,height:.4627808988764045,anchors:[{x:1,y:1,hidden:!0,id:"3f497cd2",penId:"4c490749"},{x:0,y:0,hidden:!0,id:"4e390436",penId:"4c490749"}],children:[],lineHeight:1.5},{id:"63b03a4",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["dae1a6"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"63b03a4"},{x:1,y:.5,id:"1",penId:"63b03a4"},{x:.5,y:1,id:"2",penId:"63b03a4"},{x:0,y:.5,id:"3",penId:"63b03a4"}],rotate:0},{id:"dae1a6",locked:10,parentId:"63b03a4",x:.011904761904761915,y:.5500936329588015,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"circle",width:.16904761904761903,height:.03323970037453183,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"dae1a6"},{x:1,y:.5,id:"1",penId:"dae1a6"},{x:.5,y:1,id:"2",penId:"dae1a6"},{x:0,y:.5,id:"3",penId:"dae1a6"}]},{id:"3e70cd",name:"combine",x:0,y:0,locked:10,width:1,height:1,children:["f157420"],parentId:"cc7f3b6",lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3e70cd"},{x:1,y:.5,id:"1",penId:"3e70cd"},{x:.5,y:1,id:"2",penId:"3e70cd"},{x:0,y:.5,id:"3",penId:"3e70cd"}],rotate:0},{id:"f157420",locked:10,parentId:"3e70cd",x:.6952380952380952,y:.33403558052434457,rotate:0,color:"#231815",lineWidth:.18726591760299627,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.2904761904761904,height:0,anchors:[{x:0,y:1,hidden:!0,id:"538c0f5",penId:"f157420"},{x:1,y:0,hidden:!0,id:"7d70609a",penId:"f157420"}],children:[],lineHeight:1.5},{id:"ab399f5",name:"combine",x:-948.9944812432741,y:2783.591358014707,ex:-890.9724616253116,ey:2875.442771447308,width:58.02201961796249,height:91.85141343260112,center:{x:-919.9834714342928,y:2829.517064731008},children:["57971e6","85cc95b","43468a30"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"ab399f5"},{x:1,y:.5,id:"1",penId:"ab399f5"},{x:.5,y:1,id:"2",penId:"ab399f5"},{x:0,y:.5,id:"3",penId:"ab399f5"}],rotate:0,globalAlpha:1,tags:["Switch","MultipleContact","MultipleContact-2"],description:"开关-单刀双掷"},{id:"57971e6",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["4307c73","98d918e","949a86a","ccfd4d","7ad5a4c"],anchors:[{id:"0",penId:"57971e6",x:.5,y:1},{id:"1",penId:"57971e6",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"57971e6",x:.14267022696929238,y:.0012650754828371425}],description:"开关-单刀双掷-中间位",parentId:"ab399f5",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"4307c73",locked:10,parentId:"57971e6",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"7c4f510",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4307c73"},{x:1,y:.5,id:"1",penId:"4307c73"},{x:.5,y:1,id:"2",penId:"4307c73"},{x:0,y:.5,id:"3",penId:"4307c73"}]},{id:"98d918e",locked:10,parentId:"57971e6",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"6e6fa01",penId:"98d918e"},{x:0,y:0,hidden:!0,id:"3c8e069",penId:"98d918e"}],children:[],lineHeight:1.5},{id:"949a86a",locked:10,parentId:"57971e6",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"7d46f63f",penId:"949a86a"},{x:0,y:1,hidden:!0,id:"500c5ac",penId:"949a86a"}],children:[],lineHeight:1.5},{id:"ccfd4d",locked:10,parentId:"57971e6",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"3fb8d837",penId:"ccfd4d"},{x:0,y:1,hidden:!0,id:"ec176e",penId:"ccfd4d"}],children:[],lineHeight:1.5},{id:"7ad5a4c",locked:10,parentId:"57971e6",x:.5,y:.19261195918023108,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.4063085097410812,anchors:[{x:1,y:0,hidden:!0,id:"0930080",penId:"7ad5a4c"},{x:0,y:1,hidden:!0,id:"589a943d",penId:"7ad5a4c"}],children:[],lineHeight:1.5},{id:"85cc95b",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["4b53bbd","fa52a46","02e1616","d7e2c46","955cd37"],anchors:[{id:"0",penId:"85cc95b",x:.5,y:1},{id:"1",penId:"85cc95b",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"85cc95b",x:.14267022696929238,y:.0012650754828371425}],description:"开关-单刀双掷-右位",parentId:"ab399f5",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"4b53bbd",locked:10,parentId:"85cc95b",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"86524f3",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4b53bbd"},{x:1,y:.5,id:"1",penId:"4b53bbd"},{x:.5,y:1,id:"2",penId:"4b53bbd"},{x:0,y:.5,id:"3",penId:"4b53bbd"}]},{id:"fa52a46",locked:10,parentId:"85cc95b",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"fe24266",penId:"fa52a46"},{x:0,y:0,hidden:!0,id:"862ece6",penId:"fa52a46"}],children:[],lineHeight:1.5},{id:"02e1616",locked:10,parentId:"85cc95b",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"18932e09",penId:"02e1616"},{x:0,y:1,hidden:!0,id:"3be85b31",penId:"02e1616"}],children:[],lineHeight:1.5},{id:"d7e2c46",locked:10,parentId:"85cc95b",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"bdb07a5",penId:"d7e2c46"},{x:0,y:1,hidden:!0,id:"60b42e",penId:"d7e2c46"}],children:[],lineHeight:1.5},{id:"955cd37",locked:10,parentId:"85cc95b",x:.5,y:.27870456270557475,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.4018958611481976,height:.3172303280762419,anchors:[{x:1,y:0,hidden:!0,id:"7a11b2b",penId:"955cd37"},{x:0,y:1,hidden:!0,id:"1d8894f0",penId:"955cd37"}],children:[],lineHeight:1.5},{id:"43468a30",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["916f56a","439ca78d","23b4ff4e","2af47a96","2f6018"],anchors:[{id:"0",penId:"43468a30",x:.5,y:1},{id:"1",penId:"43468a30",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"43468a30",x:.14267022696929238,y:.0012650754828371425}],description:"开关-单刀双掷-左位",parentId:"ab399f5",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"916f56a",locked:10,parentId:"43468a30",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"3580bcf4",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"916f56a"},{x:1,y:.5,id:"1",penId:"916f56a"},{x:.5,y:1,id:"2",penId:"916f56a"},{x:0,y:.5,id:"3",penId:"916f56a"}]},{id:"439ca78d",locked:10,parentId:"43468a30",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"13990b7",penId:"439ca78d"},{x:0,y:0,hidden:!0,id:"0fadb82",penId:"439ca78d"}],children:[],lineHeight:1.5},{id:"23b4ff4e",locked:10,parentId:"43468a30",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"dbcbf67",penId:"23b4ff4e"},{x:0,y:1,hidden:!0,id:"5d684b3",penId:"23b4ff4e"}],children:[],lineHeight:1.5},{id:"2af47a96",locked:10,parentId:"43468a30",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"1f2fe4b0",penId:"2af47a96"},{x:0,y:1,hidden:!0,id:"41b4553",penId:"2af47a96"}],children:[],lineHeight:1.5},{id:"2f6018",locked:10,parentId:"43468a30",x:.09810413885180241,y:.27870456270557475,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.4018958611481976,height:.3172303280762419,anchors:[{x:0,y:0,hidden:!0,id:"43b054a",penId:"2f6018"},{x:1,y:1,hidden:!0,id:"0b73ba3",penId:"2f6018"}],children:[],lineHeight:1.5},{id:"0eca90c",name:"combine",x:-811.1132453099428,y:2785.70796615796,ex:-753.0912256919803,ey:2877.559379590561,width:58.02201961796249,height:91.85141343260112,center:{x:-782.1022355009616,y:2831.633672874261},children:["a50a9d","107ef2a","9aadb9a"],showChild:0,lineWidth:1,fontSize:12,lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"0eca90c"},{x:1,y:.5,id:"1",penId:"0eca90c"},{x:.5,y:1,id:"2",penId:"0eca90c"},{x:0,y:.5,id:"3",penId:"0eca90c"}],rotate:0,globalAlpha:1,tags:["Switch","MultipleContact","MultipleContact-3"],description:"开关-三位置"},{id:"a50a9d",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["d6af092","3467a0e2","4ad10d99","f741643","5d94b170","2a8895f","5a704f56","115c7ac","20d57ad"],anchors:[{id:"0",penId:"a50a9d",x:.5,y:1},{id:"1",penId:"a50a9d",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"a50a9d",x:.5,y:.0012650754828371425},{id:"3",penId:"a50a9d",x:.14267022696929238,y:.0012650754828371425},{id:"4",penId:"a50a9d",x:0,y:.343324618368896}],description:"开关-三位置-1位",parentId:"0eca90c",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"d6af092",locked:10,parentId:"a50a9d",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"65bdccc",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"d6af092"},{x:1,y:.5,id:"1",penId:"d6af092"},{x:.5,y:1,id:"2",penId:"d6af092"},{x:0,y:.5,id:"3",penId:"d6af092"}]},{id:"3467a0e2",locked:10,parentId:"a50a9d",x:.06453938584779706,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"c781765",width:.15626168224299064,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3467a0e2"},{x:1,y:.5,id:"1",penId:"3467a0e2"},{x:.5,y:1,id:"2",penId:"3467a0e2"},{x:0,y:.5,id:"3",penId:"3467a0e2"}]},{id:"4ad10d99",locked:10,parentId:"a50a9d",x:.7791989319092123,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"fb19b70",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4ad10d99"},{x:1,y:.5,id:"1",penId:"4ad10d99"},{x:.5,y:1,id:"2",penId:"4ad10d99"},{x:0,y:.5,id:"3",penId:"4ad10d99"}]},{id:"f741643",locked:10,parentId:"a50a9d",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"8e35710",penId:"f741643"},{x:0,y:0,hidden:!0,id:"2e21b8a",penId:"f741643"}],children:[],lineHeight:1.5},{id:"5d94b170",locked:10,parentId:"a50a9d",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"8122d9",penId:"5d94b170"},{x:0,y:1,hidden:!0,id:"7c17ab3",penId:"5d94b170"}],children:[],lineHeight:1.5},{id:"2a8895f",locked:10,parentId:"a50a9d",x:.4218691588785047,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"f51068",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"2a8895f"},{x:1,y:.5,id:"1",penId:"2a8895f"},{x:.5,y:1,id:"2",penId:"2a8895f"},{x:0,y:.5,id:"3",penId:"2a8895f"}]},{id:"5a704f56",locked:10,parentId:"a50a9d",x:.5,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"33773e33",penId:"5a704f56"},{x:0,y:1,hidden:!0,id:"59c0fe1",penId:"5a704f56"}],children:[],lineHeight:1.5},{id:"115c7ac",locked:10,parentId:"a50a9d",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"1f84dc0f",penId:"115c7ac"},{x:0,y:1,hidden:!0,id:"4db08d42",penId:"115c7ac"}],children:[],lineHeight:1.5},{id:"20d57ad",locked:10,parentId:"a50a9d",x:0,y:.343324618368896,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5,height:.2555958505524163,anchors:[{x:0,y:0,hidden:!0,id:"ae696ae",penId:"20d57ad"},{x:1,y:1,hidden:!0,id:"8e1bd1",penId:"20d57ad"}],children:[],lineHeight:1.5},{id:"107ef2a",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["a25934b","3b89ef1","fa3bc2c","f7642c6","645786d","1051430","54cf7428","6d80bb9","db08d80"],anchors:[{id:"0",penId:"107ef2a",x:.5,y:1},{id:"1",penId:"107ef2a",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"107ef2a",x:.5,y:.0012650754828371425},{id:"3",penId:"107ef2a",x:.14267022696929238,y:.0012650754828371425}],description:"开关-三位置-2位",parentId:"0eca90c",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"a25934b",locked:10,parentId:"107ef2a",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"a0ecd01",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"a25934b"},{x:1,y:.5,id:"1",penId:"a25934b"},{x:.5,y:1,id:"2",penId:"a25934b"},{x:0,y:.5,id:"3",penId:"a25934b"}]},{id:"3b89ef1",locked:10,parentId:"107ef2a",x:.06453938584779706,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"f5f5e77",width:.15626168224299064,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"3b89ef1"},{x:1,y:.5,id:"1",penId:"3b89ef1"},{x:.5,y:1,id:"2",penId:"3b89ef1"},{x:0,y:.5,id:"3",penId:"3b89ef1"}]},{id:"fa3bc2c",locked:10,parentId:"107ef2a",x:.7791989319092123,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"5f71e1f6",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"fa3bc2c"},{x:1,y:.5,id:"1",penId:"fa3bc2c"},{x:.5,y:1,id:"2",penId:"fa3bc2c"},{x:0,y:.5,id:"3",penId:"fa3bc2c"}]},{id:"f7642c6",locked:10,parentId:"107ef2a",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"67a13704",penId:"f7642c6"},{x:0,y:0,hidden:!0,id:"47d950be",penId:"f7642c6"}],children:[],lineHeight:1.5},{id:"645786d",locked:10,parentId:"107ef2a",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"e6fea73",penId:"645786d"},{x:0,y:1,hidden:!0,id:"8f3f0e",penId:"645786d"}],children:[],lineHeight:1.5},{id:"1051430",locked:10,parentId:"107ef2a",x:.4218691588785047,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"3ae6546f",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"1051430"},{x:1,y:.5,id:"1",penId:"1051430"},{x:.5,y:1,id:"2",penId:"1051430"},{x:0,y:.5,id:"3",penId:"1051430"}]},{id:"54cf7428",locked:10,parentId:"107ef2a",x:.5,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"40d8499d",penId:"54cf7428"},{x:0,y:1,hidden:!0,id:"76314f06",penId:"54cf7428"}],children:[],lineHeight:1.5},{id:"6d80bb9",locked:10,parentId:"107ef2a",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"41f5bfb1",penId:"6d80bb9"},{x:0,y:1,hidden:!0,id:"463311d1",penId:"6d80bb9"}],children:[],lineHeight:1.5},{id:"db08d80",locked:10,parentId:"107ef2a",x:.36443257676902535,y:.19919035169098423,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.13556742323097465,height:.39718309859154927,anchors:[{x:0,y:0,hidden:!0,id:"af5e575",penId:"db08d80"},{x:1,y:1,hidden:!0,id:"612cb4c5",penId:"db08d80"}],children:[],lineHeight:1.5},{id:"9aadb9a",name:"combine",x:0,y:0,locked:0,width:1.0000000000000018,height:.9999999999999997,children:["74570835","1275566","4a0de302","49f9637b","5eb9b2bb","122626c","2595364","68978eb","ffe92b7"],anchors:[{id:"0",penId:"9aadb9a",x:.5,y:1},{id:"1",penId:"9aadb9a",x:.8573297730307076,y:.0012650754828371425},{id:"2",penId:"9aadb9a",x:.5,y:.0012650754828371425},{id:"3",penId:"9aadb9a",x:.14267022696929238,y:.0012650754828371425},{id:"4",penId:"9aadb9a",x:1,y:.343324618368896}],description:"开关-三位置-3位",parentId:"0eca90c",lineWidth:1,fontSize:12,lineHeight:1.5,rotate:0,globalAlpha:1,tags:[],ex:1.0000000000000018,ey:.9999999999999997},{id:"74570835",locked:10,parentId:"9aadb9a",x:.4218691588785047,y:.5947035506451884,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"3fd48a86",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"74570835"},{x:1,y:.5,id:"1",penId:"74570835"},{x:.5,y:1,id:"2",penId:"74570835"},{x:0,y:.5,id:"3",penId:"74570835"}]},{id:"1275566",locked:10,parentId:"9aadb9a",x:.06453938584779706,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"9efe400",width:.15626168224299064,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"1275566"},{x:1,y:.5,id:"1",penId:"1275566"},{x:.5,y:1,id:"2",penId:"1275566"},{x:0,y:.5,id:"3",penId:"1275566"}]},{id:"4a0de302",locked:10,parentId:"9aadb9a",x:.7791989319092123,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"2208226c",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"4a0de302"},{x:1,y:.5,id:"1",penId:"4a0de302"},{x:.5,y:1,id:"2",penId:"4a0de302"},{x:0,y:.5,id:"3",penId:"4a0de302"}]},{id:"49f9637b",locked:10,parentId:"9aadb9a",x:.5,y:.6892131230496753,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:1,hidden:!0,id:"0fc9b23",penId:"49f9637b"},{x:0,y:0,hidden:!0,id:"44b1230",penId:"49f9637b"}],children:[],lineHeight:1.5},{id:"5eb9b2bb",locked:10,parentId:"9aadb9a",x:.8573297730307076,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"093fb83",penId:"5eb9b2bb"},{x:0,y:1,hidden:!0,id:"177adc9",penId:"5eb9b2bb"}],children:[],lineHeight:1.5},{id:"122626c",locked:10,parentId:"9aadb9a",x:.4218691588785047,y:.307835034157038,rotate:0,background:"#231815",lineWidth:0,globalAlpha:null,fontSize:16,matrix:null,name:"svgPath",pathId:"387b959b",width:.1562616822429906,height:.09870962300750608,disableAnchor:!0,children:[],lineHeight:1.5,anchors:[{x:.5,y:0,id:"0",penId:"122626c"},{x:1,y:.5,id:"1",penId:"122626c"},{x:.5,y:1,id:"2",penId:"122626c"},{x:0,y:.5,id:"3",penId:"122626c"}]},{id:"2595364",locked:10,parentId:"9aadb9a",x:.5,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"db4123e",penId:"2595364"},{x:0,y:1,hidden:!0,id:"778193f",penId:"2595364"}],children:[],lineHeight:1.5},{id:"68978eb",locked:10,parentId:"9aadb9a",x:.14267022696929238,y:.0012650754828371425,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:0,height:.3107868769503247,anchors:[{x:1,y:0,hidden:!0,id:"66888a0",penId:"68978eb"},{x:0,y:1,hidden:!0,id:"e4d3552",penId:"68978eb"}],children:[],lineHeight:1.5},{id:"ffe92b7",locked:10,parentId:"9aadb9a",x:.5,y:.343324618368896,rotate:0,color:"#231815",lineWidth:.013494138483596188,globalAlpha:null,fontSize:16,matrix:null,name:"line",lineName:"line",type:0,width:.5,height:.2555958505524163,anchors:[{x:1,y:0,hidden:!0,id:"5cf32734",penId:"ffe92b7"},{x:0,y:1,hidden:!0,id:"7e3545f",penId:"ffe92b7"}],children:[],lineHeight:1.5}],origin:{x:-1913.574579695493,y:2785.717495189335},center:{x:-933,y:3085},paths:{"818f759":"M180,188.98c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58-20.58-9.21-20.58-20.58h0Z","64c23b2":"M0,268.98c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58S0,280.34,0,268.98h0Z",fb0b262:"M180,188.98c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58-20.58-9.21-20.58-20.58h0Z","607a597":"M44,268.98c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58-20.58-9.21-20.58-20.58h0Z","4c10c83b":"M90.56,189.86c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58-20.58-9.21-20.58-20.58h0Z","6b0139a9":"M90.56,189.86c0-11.37,9.21-20.58,20.58-20.58s20.58,9.21,20.58,20.58-9.21,20.58-20.58,20.58-20.58-9.21-20.58-20.58h0Z","7c4f510":"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","86524f3":"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","3580bcf4":"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","65bdccc":"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z",c781765:"M53.43,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M53.43,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z",fb19b70:"M321.07,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M321.07,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z",f51068:"M187.25,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z",a0ecd01:"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z",f5f5e77:"M53.43,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M53.43,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","5f71e1f6":"M321.07,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M321.07,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","3ae6546f":"M187.25,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","3fd48a86":"M187.25,355.07c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,353.57c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","9efe400":"M53.43,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M53.43,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","2208226c":"M321.07,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M321.07,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z","387b959b":"M187.25,185c14.78,0,26.76,11.98,26.76,26.76s-11.98,26.76-26.76,26.76-26.76-11.98-26.76-26.76,11.98-26.76,26.76-26.76M187.25,183.5c-15.59,0-28.26,12.68-28.26,28.26s12.68,28.26,28.26,28.26,28.26-12.68,28.26-28.26-12.68-28.26-28.26-28.26h0Z"},template:"dc171b5",theme:"light",rule:!0,version:"1.0.42",dataPoints:[],locked:0,name:"",msgTypes:[],grid:!0,wsMsgFields:[],wsMsgHandlers:[]},U8={0:0,1:90,2:180,3:270},k2e=["Vdc","MultipleContact","Coil","Lamp","Diode","TerminalsXT","CoilOnDelay","R","VProbe","IProbe","CoilOffDelay","CoilOnDelay","DoubleCoil","TransformerNew"],O2e=["Btn_SelfReset","Btn_SelfLock","Knob_SelfReset","Knob_SelfLock"];function Y1(t,e,n){let r=U8[n.rotateAngel]||0;if(["Switch","MultipleContact"].includes(n.type)){if(t.width>t.height){const i=t.height;t.height=t.width,t.width=i}r-=90}r&&setTimeout(()=>{meta2d.setValue({id:t.id,rotate:-r})},100);const a=(e==null?void 0:e.元件类型)||n.type;if(k2e.includes(a)){t.y-=t.height/2,t.x-=t.width/2;return}else if(O2e.includes(a)){r?n.rotateAngel=="1"?(t.y-=t.height/2-10,t.x-=t.width/2):n.rotateAngel=="2"?(t.y-=t.height/2,t.x-=t.width/2-10):n.rotateAngel=="3"&&(t.x-=t.width/2,t.y-=t.height/2+10):(t.x-=t.width/1.5,t.y-=t.height/2);return}switch(a){case"Input":r?r===90?(t.x-=t.width/2,t.y+=5):r===180?t.y-=t.height/2:r===270&&(t.y-=t.height+5,t.x-=t.width/2):(t.x-=t.width,t.y-=t.height/2);break;case"Output":r?r===90?(t.x-=t.width/2,t.y+=5):r===180?t.y-=t.height/2:r===270&&(t.y-=t.height+5,t.x-=t.width/2):(t.y-=t.height/2,t.x-=t.width);break;case"GND":r?r===90?t.y-=t.height/2:r===180?(t.x-=t.width/2,t.y-=t.height):r===270&&(t.y-=t.height/2,t.x-=t.width):t.x-=t.width/2;break;case"ElectromagneticValve":r?(n.rotateAngel=="1"||n.rotateAngel=="2"||n.rotateAngel=="3")&&(t.x-=t.width/2,t.y-=t.height/2):(t.y-=t.height/2,t.x-=t.width/2);break;case"duanluqi_wx":r?n.rotateAngel=="1"?(t.y-=t.height/2+10,t.x-=t.width/2):n.rotateAngel=="2"?(t.x-=t.width/2+10,t.y-=t.height/2):n.rotateAngel=="3"&&(t.y-=t.width-6,t.x-=t.width/2):(t.x-=t.width/4,t.y-=t.height/2);break;case"Switch":n.rotateAngel=="0"?(t.x-=t.width/2,t.y-=t.height/1.5):n.rotateAngel=="1"?(t.x-=t.width,t.y-=t.height/2):n.rotateAngel=="2"?(t.x-=t.width/2,t.y-=t.height/3):n.rotateAngel=="3"&&(t.y-=t.height/2);break;case"Contact":n.rotateAngel=="0"?(t.x-=t.width-3,t.y-=t.height/2):n.rotateAngel=="1"?(t.x-=t.width/2,t.y-=t.height/4+2):n.rotateAngel=="2"?(t.y-=t.height/2,t.x-=2):n.rotateAngel=="3"&&(t.y-=t.height/1.5+2,t.x-=t.width/2);break;case"Contactk":n.rotateAngel=="0"?(t.x-=t.width-3,t.y-=t.height/2):n.rotateAngel=="1"?(t.x-=t.width/2,t.y-=t.height/4+2):n.rotateAngel=="2"?(t.y-=t.height/2,t.x-=2):n.rotateAngel=="3"&&(t.y-=t.height/1.5+2,t.x-=t.width/2);break}}const E2e=["Btn_SelfLock","Knob_SelfReset","Switch","Knob_SelfLock","duanluqi_wx","MultipleContact","Btn_SelfReset"];function P2e(t){if(t.type=="MultipleContact"){if(t.v10>"3")return 0;if(t.v10=="2")return t.v16=="0"?1:2;if(t.v10=="3")return Number(t.v18)}else{if(t.v10=="off")return 0;if(t.v10=="on")return 1}}function I2e(t,e){if(!t||!e)return;const n=[],r=[t];for(;r.length;){const a=r.shift();n.push(a);for(const i of e)i.parentId==a.id&&r.push(i)}return n}function A2e(t){const e="-"+it(),n=Te(t);return n.forEach(r=>{r.id=r.id+e,r.children&&(r.children=r.children.map(a=>a+e)),r.parentId&&(r.parentId=r.parentId+e),r.anchors&&r.anchors.forEach(a=>{a.penId=a.penId+e})}),n}const N2e=t=>{M2e(e=>{if(console.log("readJSONFile: ",e,Ui),e!=null&&e.data){if(meta2d.clear(),Ui.paths){const o=meta2d.data().paths||{};Object.assign(o,Ui.paths),Object.assign(meta2d.store.data,{paths:o})}const{Components:n,Paintings:r,Wires:a}=e.data,i=[];n&&n.forEach(o=>{var d;const s=p8.find(f=>{var h,v;return((h=f.元件类型)==null?void 0:h.toLocaleLowerCase())==((v=o.type)==null?void 0:v.toLocaleLowerCase())});if(meta2d.findOne(o.uuid))return;if(E2e.includes(o.type)){let f=Te(Ui.pens.find(p=>{var g,m;if(o.type=="MultipleContact"&&o.v10>="3")return((g=p.tags)==null?void 0:g.includes("MultipleContact-3"))&&!p.parentId;if((m=p.tags)!=null&&m.includes(o.type)&&!p.parentId)return!0}));const h=Object.keys(o).filter(p=>p.startsWith("v"));h.length>0&&(f.Ecomponents=h.map(p=>o[p])),console.log("Ecomponents=====: ",f.Ecomponents);const v=A2e(I2e(f,Ui.pens));if(v){f=v[0];const p=meta2d.getPenRect(f),g=p.width/Ui.scale,m=p.height/Ui.scale,y=Number((s==null?void 0:s["宽度(X向)"])||g),b=Number((s==null?void 0:s["高度(Y向)"])||m);Object.assign(f,{text:o.name,x:Number(o.posX),y:Number(o.posY),width:y,height:b,fault:0,titleFnJs:"return `${pen.text}  ${pen.description}`;",color:"rgba(0, 0, 128, 1)"}),f.tags&&!((d=f.tags)!=null&&d.includes(o.name))&&f.tags.push(o.name),Y1(f,s,o),f.showChild=P2e(o),meta2d.addPens(v);return}}const u=g8.find(f=>{var h;return f.data.electricTypeCode==o.type||((h=f.data.tags)==null?void 0:h.includes(o.type))});if(u){const f=Number(s==null?void 0:s["宽度(X向)"]),h=Number(s==null?void 0:s["高度(Y向)"]);$8(u.data.image,u,!1).then(v=>{const p=v.find(g=>g.name=="combine"&&!g.parentId);Object.assign(p,{text:o.name,x:Number(o.posX),y:Number(o.posY),tags:[o.type,o.name],width:f||p.width,height:h||p.height,color:"rgba(0, 0, 128, 1)",fault:0,titleFnJs:"return `${pen.text}  ${pen.description}`;"}),console.log("单一 svg: ",u.name,u,p,f,h),Y1(p,s,o),u.data.anchors&&(p.anchors=u.data.anchors),meta2d.addPens(v)})}else{const f={id:o.uuid,name:"rectangle",text:o.name,x:Number(o.posX),y:Number(o.posY),width:Number((s==null?void 0:s["宽度(X向)"])||100),height:Number((s==null?void 0:s["高度(Y向)"])||100),rotate:U8[o.rotateAngel]||0,tags:[o.type,o.name],color:"rgba(0, 0, 128, 1)"};Y1(f,s,o),i.push(f)}}),a&&a.forEach(o=>{if(meta2d.findOne(o.uuid))return;const{length:c=0,anchors:u=[]}=R2e(o);let d;o.name.includes("CenterLineName")?d=D2e(o.name):d=o.name;const f={type:1,id:o.uuid,name:"line",lineName:"curve",text:d,x:Number(o.startX),y:Number(o.startY),width:c,height:c,anchors:u,tags:[o.name],fontSize:14,color:"rgb(0, 0, 128)",textColor:"#000",lineAnimateType:1,animateColor:"rgb(255, 0, 0)",textBaseline:"bottom"};console.log("连线: ",f),i.push(f)}),r&&r.forEach(o=>{if(meta2d.findOne(o.uuid))return;const c={id:o.uuid,name:"rectangle",text:o.text,x:Number(o.posX),y:Number(o.posY),width:100,height:50,color:o.color,textAutoAdjust:!0,borderWidth:0};i.push(c)}),meta2d.addPens(i)}})};function D2e(t){return t.includes("CenterLineName")?t.split("_")[0]:""}function R2e(t){const{startX:e,startY:n,endX:r,endY:a}=t,i=Math.sqrt(Math.pow(r-e,2)+Math.pow(a-n,2)),o=[{x:0,y:0},{x:1,y:1}];return e===r?o[1].x=0:o[1].y=0,{length:i,anchors:o}}const M2e=(t=null)=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async()=>{if(!e.files||!e.files.length)return;const n=e.files[0],{name:r,size:a,type:i}=n,o=new FileReader;o.onload=()=>{try{const s=JSON.parse(o.result);t&&t({fileName:r,data:s})}catch(s){console.error(s)}},o.readAsText(n)},e.click()},z8=(t=null)=>{const e=document.createElement("input");e.type="file",e.accept=".svg",e.onchange=async()=>{if(!e.files||!e.files.length)return;const n=e.files[0],{name:r}=n,a=new FileReader;a.onload=()=>{try{const i=a.result;t&&t({fileName:r,data:i})}catch(i){console.error(i)}},a.readAsText(n)},e.click()};function L2e(t){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(t).then(()=>!0).catch(e=>{console.error("复制失败：",e)});{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select();const n=document.execCommand("copy");return document.body.removeChild(e),new Promise((r,a)=>{n?r(!0):a(!1)})}}const F2e=()=>{!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement?document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},Tg=()=>{const t=l.ref([]),e={limit:1024*1,unit:"KB"},n=l.useAttrs(),r={Authorization:n.token};return{uploadValue:t,sizeLimit:e,headers:r,handleFail:o=>{console.log("upload fail: ",o)},uploadFileFn:o=>{if(!n.uploadUrl)return Promise.reject("文件上传地址不存在！");const s=new FormData;return s.append("object",o),fetch(n.uploadUrl,{method:"POST",headers:r,body:s}).then(c=>c.json()).then(c=>c).catch(c=>{console.log(c)})}}};let X1=null;function B2e(t,e){var s;let n=t.split(","),r=((s=n[0].match(/:(.*\/*?);/))==null?void 0:s[1])||"image/png",a=atob(n[1]),i=a.length,o=new Uint8Array(i);for(;i--;)o[i]=a.charCodeAt(i);return new File([o],e,{type:r})}function j2e(t,e){const n=e?meta2d.toPng():meta2d.activeToPng();if(t!=null&&t.endsWith(".png")||(t+=".png"),n)return B2e(n,t)}function $2e(t){var r;if(console.log("getJsonString: ",t),!t)return;let e;if(t.mode==1)t.pen.name=="combine"?e=[...t.pen.children.map(i=>meta2d.findOne(i)),t.pen]:e=t.pen;else if(t.mode==2){const a=t.pens;meta2d.combine(a);const i=(r=meta2d.store.active)==null?void 0:r[0];e=[...a,i]}let n="";try{const a=Te(e);Array.isArray(a)?a.forEach(i=>{i.calculative=void 0}):a.calculative=void 0,n=JSON.stringify(a)}catch(a){console.log("error: ",a)}return n}const J1=t=>{const e=l.ref([]),n=l.ref([]),r=l.ref(!1),a=l.ref(""),i=l.ref(!1),o=l.ref(""),s=q1e(),c=l.ref("");let u=null,d="";const f=C=>{i.value=!1,r.value=!0,d=C},{uploadFileFn:h}=Tg(),v=()=>{if(console.log("confirm: ",a.value,u),r.value=!1,!!a.value)if(i.value){let C;d!="paper"?C=$2e(u):C=JSON.stringify(u);const S=j2e(c.value||"image.png",d=="paper"),_=O=>s.saveComponent({nodeId:a.value,data:C,type:d,name:c.value,label:d=="paper"?"paper":"component",cover:O}).then(N=>{(N==null?void 0:N.code)==200&&x(d)});if(console.log("png file: ",S),S){h(S).then(O=>{if(console.log("upload file: ",O),(O==null?void 0:O.code)==200){const N=O.data.fileurl;_(N)}});return}_()}else s.createFolder({dictName:a.value,type:d}).then(C=>{(C==null?void 0:C.code)==200&&x(d)})},p=(C,S)=>{s.saveComponent({nodeId:C.id,data:JSON.stringify(S),type:"component",name:S.fileName,cover:S.image,label:"iamge"}).then(_=>{(_==null?void 0:_.code)==200&&x("component")})},g=()=>{a.value="",c.value=""},m=(C,S)=>{s.deleteComponent(C.id).then(_=>{(_==null?void 0:_.code)==200&&x(S)})},y=C=>{i.value=!0,r.value=!0,u=C,d="component",o.value=d},b=()=>{i.value=!0,r.value=!0,u=meta2d.data(),d="paper",o.value=d},w=(C,S)=>{s.deleteFolder(C.id).then(_=>{(_==null?void 0:_.code)==200&&x(S)})},x=C=>s.getTree(C).then(S=>{Array.isArray(S.data)&&(C=="paper"?e.value=S.data:n.value=S.data)});return t&&X1?X1:X1={blueprintList:e,componentList:n,saveComponentShow:y,showAddFolder:f,deleteMyPen:m,visible:r,folderName:a,confirm:v,close:g,selectMode:i,selectType:o,deleteFolder:w,getTree:x,fileName:c,saveImageComponent:p,saveBlueprintShow:b}},U2e={class:"app-header header__top"},z2e={class:"logo"},H2e={class:"logo"},W2e={class:"logo"},K2e=["href"],q2e={class:"app-header header__bottom"},G2e={class:"l-icon","aria-hidden":"true"},Y2e=["xlink:href"],X2e=["onClick"],J2e={class:"l-icon","aria-hidden":"true"},Q2e=["xlink:href"],Z2e={class:"l-icon","aria-hidden":"true"},V2e=["xlink:href"],eTe=["onClick"],tTe={class:"l-icon","aria-hidden":"true"},nTe=["xlink:href"],rTe={class:"l-icon","aria-hidden":"true"},aTe=["xlink:href"],iTe=["onClick"],oTe={class:"l-icon","aria-hidden":"true"},lTe=["xlink:href"],sTe=l.defineComponent({__name:"Header",emits:["view"],setup(t,{emit:e}){var D,q;const n=e;lxe();const r=l.reactive({home:"https://le5le.com",helps:[{name:"产品介绍",url:"https://doc.le5le.com/document/118756411"},{name:"快速上手",url:"https://doc.le5le.com/document/119363000"},{name:"使用手册",url:"https://doc.le5le.com/document/118764244"},{name:"快捷键",url:"https://doc.le5le.com/document/119620214",divider:!0}]}),a=l.ref(!1),i=(z,K={})=>{K&&K.trigger==="confirm"?(o(),a.value=!1):a.value=z},o=z=>{N2e()},s=l.ref(!1),c=l.ref(0);l.onMounted(()=>{const z=setInterval(()=>{meta2d&&(clearInterval(z),u(meta2d.store.data.scale),meta2d.on("scale",u))},200)});const u=z=>{c.value=Math.round(z*100)},d=()=>{s.value?(s.value=!1,meta2d.finishDrawLine(),meta2d.drawLine(),meta2d.store.options.disableAnchor=!0):(s.value=!0,meta2d.drawLine(meta2d.store.options.drawingLineName),meta2d.store.options.disableAnchor=!1)},f=l.reactive([{name:"曲线",icon:"#l-curve2",value:"curve"},{name:"线段",icon:"#l-polyline",value:"polyline"},{name:"直线",icon:"#l-line",value:"line"},{name:"脑图曲线",icon:"#l-mind",value:"mind"}]),h=l.ref("line"),v=z=>{var K;h.value=z,meta2d&&(meta2d.store.options.drawingLineName=z,meta2d.canvas.drawingLineName&&(meta2d.canvas.drawingLineName=z),(K=meta2d.store.active)==null||K.forEach(P=>{meta2d.updateLineType(P,z)}))},p=l.ref(""),g=[{icon:"#l-line",value:""},{icon:"#l-from-triangle",value:"triangle"},{icon:"#l-from-diamond",value:"diamond"},{icon:"#l-from-circle",value:"circle"},{icon:"#l-from-lineDown",value:"lineDown"},{icon:"#l-from-lineUp",value:"lineUp"},{icon:"#l-from-triangleSolid",value:"triangleSolid"},{icon:"#l-from-diamondSolid",value:"diamondSolid"},{icon:"#l-from-circleSolid",value:"circleSolid"},{icon:"#l-from-line",value:"line"}],m=l.ref(""),y=[{icon:"#l-line",value:""},{icon:"#l-to-triangle",value:"triangle"},{icon:"#l-to-diamond",value:"diamond"},{icon:"#l-to-circle",value:"circle"},{icon:"#l-to-lineDown",value:"lineDown"},{icon:"#l-to-lineUp",value:"lineUp"},{icon:"#l-to-triangleSolid",value:"triangleSolid"},{icon:"#l-to-diamondSolid",value:"diamondSolid"},{icon:"#l-to-circleSolid",value:"circleSolid"},{icon:"#l-to-line",value:"line"}],b=z=>{p.value=z,meta2d.store.data.fromArrow=z,meta2d.store.active&&(meta2d.store.active.forEach(K=>{K.type===Gt.Line&&(K.fromArrow=z,meta2d.setValue({id:K.id,fromArrow:K.fromArrow},{render:!1}))}),meta2d.render())},w=z=>{m.value=z,meta2d.store.data.toArrow=z,meta2d.store.active&&(meta2d.store.active.forEach(K=>{K.type===Gt.Line&&(K.toArrow=z,meta2d.setValue({id:K.id,toArrow:K.toArrow},{render:!1}))}),meta2d.render())},x=l.ref(((q=(D=meta2d==null?void 0:meta2d.store)==null?void 0:D.options)==null?void 0:q.autoAnchor)||!0),C=z=>{meta2d.store.options.autoAnchor=z},S=()=>{meta2d.open({name:"新建项目",pens:[]})};function _(z){return new Promise((K,P)=>{const R=new FileReader;R.onload=()=>{K(R.result)},R.onerror=P,R.readAsText(z)})}const O=()=>{const z=document.createElement("input");z.type="file",z.onchange=async K=>{const P=K.target;if(P.files&&P.files[0]){const R=await _(P.files[0]);try{meta2d.open(JSON.parse(R)),meta2d.fitView()}catch(X){console.log(X)}}},z.click()},N=()=>{const z=meta2d.data();X_e.saveAs(new Blob([JSON.stringify(z)],{type:"text/plain;charset=utf-8"}),`${z.name||"le5le.meta2d"}.json`)},B=()=>{let z=meta2d.store.data.name;z&&(z+=".png"),meta2d.downloadPng(z)},T=()=>{meta2d.undo()},k=()=>{meta2d.redo()},E=()=>{meta2d.cut()},I=()=>{meta2d.copy()},A=()=>{meta2d.paste()},M=()=>{meta2d.activeAll()},$=()=>{meta2d.delete()},{saveBlueprintShow:U}=J1(!0),F=z=>{if(z=="svg"){z8(K=>{j8(K.data)});return}if(z=="save"){U();return}meta2d.toggleAnchorMode()},j=(z,K)=>{var R;z.stopPropagation();let P;K==="text"?P={text:"text",width:100,height:20,name:"text"}:K==="line"&&(P={anchors:[{id:"0",x:1,y:0},{id:"1",x:0,y:1}],width:100,height:100,name:"line",lineName:"line",type:1}),z.dataTransfer?(R=z.dataTransfer)==null||R.setData("Meta2d",JSON.stringify(P)):meta2d.canvas.addCaches=Te([P])},W=()=>{meta2d.scale(1),meta2d.centerView()},H=()=>{meta2d.fitView()},J=()=>{meta2d.stopAnimate();const z=meta2d.data();localStorage.setItem("meta2d",JSON.stringify(z)),n("view",z),globalThis.$_meta2d_singleton&&(location.hash?window.open(`#/preview?r=${Date.now()}&id=${z._id||""}`,"_blank"):window.open(`/preview?r=${Date.now()}&id=${z._id||""}`,"_blank"))},Y=z=>{if(z=="none"){meta2d.inactive();return}const P=meta2d.data().pens.filter(X=>z?X.type===z:X.type!=1),R=[];P.forEach(X=>{meta2d.findOne(X.id)&&R.push(meta2d.findOne(X.id))}),meta2d.active(R)};return(z,K)=>{const P=l.resolveComponent("t-dropdown-item"),R=l.resolveComponent("t-dropdown-menu"),X=l.resolveComponent("t-dropdown"),ee=l.resolveComponent("t-tooltip"),re=l.resolveComponent("t-popconfirm"),ae=l.resolveComponent("t-icon"),oe=l.resolveComponent("t-switch");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createElementVNode("div",U2e,[K[28]||(K[28]=l.createElementVNode("a",{class:"logo",href:"",target:"_blank"},[l.createElementVNode("img",{src:axe,alt:"logo"}),l.createElementVNode("span",null,"图形编辑器")],-1)),l.createVNode(X,{minColumnWidth:200,maxHeight:560,overlayClassName:"header-dropdown"},{default:l.withCtx(()=>[K[13]||(K[13]=l.createElementVNode("a",null," 文件 ",-1)),l.createVNode(R,null,{default:l.withCtx(()=>[l.createVNode(P,{onClick:S},{default:l.withCtx(()=>K[11]||(K[11]=[l.createElementVNode("a",null,"新建文件",-1)])),_:1}),l.createVNode(P,{onClick:O,divider:"true"},{default:l.withCtx(()=>K[12]||(K[12]=[l.createElementVNode("a",null,"打开文件",-1)])),_:1}),l.createVNode(P,{divider:"true"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:N},"下载JSON文件")]),_:1}),l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:B},"下载为PNG")]),_:1})]),_:1})]),_:1}),l.createVNode(X,{minColumnWidth:180,maxHeight:500,overlayClassName:"header-dropdown"},{default:l.withCtx(()=>[K[21]||(K[21]=l.createElementVNode("a",null," 编辑 ",-1)),l.createVNode(R,null,{default:l.withCtx(()=>[l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:T},K[14]||(K[14]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 撤销 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + Z ")],-1)]))]),_:1}),l.createVNode(P,{divider:"true"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:k},K[15]||(K[15]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 恢复 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + Y ")],-1)]))]),_:1}),l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:E},K[16]||(K[16]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 剪切 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + X ")],-1)]))]),_:1}),l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:I},K[17]||(K[17]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 复制 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + C ")],-1)]))]),_:1}),l.createVNode(P,{divider:"true"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:A},K[18]||(K[18]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 粘贴 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + V ")],-1)]))]),_:1}),l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:M},K[19]||(K[19]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode(" 全选 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" Ctrl + A ")],-1)]))]),_:1}),l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:$},K[20]||(K[20]=[l.createElementVNode("div",{class:"flex"},[l.createTextVNode("删除 "),l.createElementVNode("span",{class:"flex-grow"}),l.createTextVNode(" DELETE")],-1)]))]),_:1})]),_:1})]),_:1}),l.createElementVNode("a",z2e,[l.createElementVNode("span",{onClick:K[0]||(K[0]=ce=>F())},"添加/删除锚点")]),l.createVNode(X,{minColumnWidth:200,maxHeight:560,overlayClassName:"header-dropdown"},{default:l.withCtx(()=>[K[25]||(K[25]=l.createElementVNode("a",null," 批量选择图元 ",-1)),l.createVNode(R,null,{default:l.withCtx(()=>[l.createVNode(P,{onClick:K[1]||(K[1]=ce=>Y())},{default:l.withCtx(()=>K[22]||(K[22]=[l.createElementVNode("a",null,"节点",-1)])),_:1}),l.createVNode(P,{onClick:K[2]||(K[2]=ce=>Y(1)),divider:"true"},{default:l.withCtx(()=>K[23]||(K[23]=[l.createElementVNode("a",null,"连线",-1)])),_:1}),l.createVNode(P,{onClick:K[3]||(K[3]=ce=>Y("none"))},{default:l.withCtx(()=>K[24]||(K[24]=[l.createElementVNode("a",null,"取消",-1)])),_:1})]),_:1})]),_:1}),l.createElementVNode("a",H2e,[l.createVNode(ee,{content:"选择 .svg 文件导入，单击画布摆放到鼠标指针位置"},{default:l.withCtx(()=>[l.createElementVNode("span",{onClick:K[4]||(K[4]=ce=>F("svg"))},"导入 SVG")]),_:1})]),l.createVNode(re,{visible:a.value,theme:"default",content:"是否导入 ElectricEditor 生成的 JSON 文件?",onVisibleChange:i},{default:l.withCtx(()=>K[26]||(K[26]=[l.createElementVNode("a",{class:"logo"},[l.createElementVNode("span",null,"导入")],-1)])),_:1},8,["visible"]),l.createElementVNode("a",W2e,[l.createElementVNode("span",{onClick:K[5]||(K[5]=ce=>F("save"))},"保存图纸")]),l.createVNode(X,{minColumnWidth:180,maxHeight:500,delay2:[10,150],overlayClassName:"header-dropdown"},{default:l.withCtx(()=>[K[27]||(K[27]=l.createElementVNode("a",null," 帮助 ",-1)),l.createVNode(R,null,{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(r.helps,ce=>(l.openBlock(),l.createBlock(P,{divider:ce.divider},{default:l.withCtx(()=>[ce.url?(l.openBlock(),l.createElementBlock("a",{key:0,href:ce.url,target:"_blank"},l.toDisplayString(ce.name),9,K2e)):l.createCommentVNode("",!0)]),_:2},1032,["divider"]))),256))]),_:1})]),_:1})]),l.createElementVNode("div",q2e,[l.createVNode(ee,{content:"撤销"},{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock("svg",{class:"l-icon","aria-hidden":"true",onClick:T},K[29]||(K[29]=[l.createElementVNode("use",{"xlink:href":"#l-undo"},null,-1)])))]),_:1}),l.createVNode(ee,{content:"重做"},{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock("svg",{class:"l-icon","aria-hidden":"true",onClick:k},K[30]||(K[30]=[l.createElementVNode("use",{"xlink:href":"#l-redo"},null,-1)])))]),_:1}),l.createVNode(ee,{content:"直线"},{default:l.withCtx(()=>[l.createElementVNode("span",{draggable:!0,onDragstart:K[6]||(K[6]=ce=>j(ce,"line")),onClick:K[7]||(K[7]=ce=>j(ce,"line"))},[K[31]||(K[31]=l.createElementVNode("span",{style:{"margin-right":"-8px"}},"直线",-1)),l.createVNode(ae,{name:"slash"})],32)]),_:1}),l.createVNode(ee,{content:"文字"},{default:l.withCtx(()=>[l.createElementVNode("span",{draggable:!0,onDragstart:K[8]||(K[8]=ce=>j(ce,"text")),onClick:K[9]||(K[9]=ce=>j(ce,"text"))},K[32]||(K[32]=[l.createElementVNode("svg",{class:"l-icon","aria-hidden":"true"},[l.createElementVNode("use",{"xlink:href":"#l-text"})],-1)]),32)]),_:1}),l.createVNode(ee,{content:"钢笔",placement:"bottom"},{default:l.withCtx(()=>[l.createElementVNode("a",{style:l.normalizeStyle({color:s.value?" #1677ff":""}),onClick:d},[K[33]||(K[33]=l.createTextVNode(" 钢笔 ")),l.createVNode(ae,{name:"pen"})],4)]),_:1}),l.createVNode(X,{minColumnWidth:160,maxHeight:560,overlayClassName:"header-dropdown"},{default:l.withCtx(()=>{var ce;return[l.createElementVNode("a",null,[K[34]||(K[34]=l.createElementVNode("span",{class:"button__text"}," 连线 ",-1)),(l.openBlock(),l.createElementBlock("svg",G2e,[l.createElementVNode("use",{"xlink:href":(ce=f.find(ge=>ge.value===h.value))==null?void 0:ce.icon},null,8,Y2e)]))]),l.createVNode(R,null,{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(f,ge=>(l.openBlock(),l.createBlock(P,null,{default:l.withCtx(()=>[l.createElementVNode("div",{class:"flex middle",onClick:pe=>v(ge.value)},[l.createTextVNode(l.toDisplayString(ge.name)+" ",1),K[35]||(K[35]=l.createElementVNode("span",{class:"flex-grow"},null,-1)),(l.openBlock(),l.createElementBlock("svg",J2e,[l.createElementVNode("use",{"xlink:href":ge.icon},null,8,Q2e)]))],8,X2e)]),_:2},1024))),256))]),_:1})]}),_:1}),l.createVNode(X,{minColumnWidth:160,maxHeight:560,delay2:[10,150],overlayClassName:"header-dropdown"},{default:l.withCtx(()=>{var ce;return[l.createElementVNode("a",null,[K[36]||(K[36]=l.createElementVNode("span",{class:"button__text"}," 起点 ",-1)),(l.openBlock(),l.createElementBlock("svg",Z2e,[l.createElementVNode("use",{"xlink:href":(ce=g.find(ge=>ge.value===p.value))==null?void 0:ce.icon},null,8,V2e)]))]),l.createVNode(R,null,{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock(l.Fragment,null,l.renderList(g,ge=>l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("div",{class:"flex middle",style:{height:"30px"},onClick:pe=>b(ge.value)},[(l.openBlock(),l.createElementBlock("svg",tTe,[l.createElementVNode("use",{"xlink:href":ge.icon},null,8,nTe)]))],8,eTe)]),_:2},1024)),64))]),_:1})]}),_:1}),l.createVNode(X,{minColumnWidth:160,maxHeight:560,delay2:[10,150],overlayClassName:"header-dropdown"},{default:l.withCtx(()=>{var ce;return[l.createElementVNode("a",null,[K[37]||(K[37]=l.createElementVNode("span",{class:"button__text"}," 终点 ",-1)),(l.openBlock(),l.createElementBlock("svg",rTe,[l.createElementVNode("use",{"xlink:href":(ce=y.find(ge=>ge.value===m.value))==null?void 0:ce.icon},null,8,aTe)]))]),l.createVNode(R,null,{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock(l.Fragment,null,l.renderList(y,ge=>l.createVNode(P,null,{default:l.withCtx(()=>[l.createElementVNode("div",{class:"flex middle",style:{height:"30px"},onClick:pe=>w(ge.value)},[(l.openBlock(),l.createElementBlock("svg",oTe,[l.createElementVNode("use",{"xlink:href":ge.icon},null,8,lTe)]))],8,iTe)]),_:2},1024)),64))]),_:1})]}),_:1}),l.createVNode(ee,{content:"自动锚点",placement:"bottom"},{default:l.withCtx(()=>[l.createElementVNode("a",null,[l.createVNode(oe,{modelValue:x.value,"onUpdate:modelValue":K[10]||(K[10]=ce=>x.value=ce),onChange:C,size:"small"},null,8,["modelValue"])])]),_:1}),K[40]||(K[40]=l.createElementVNode("div",{style:{width:"64px"}},null,-1)),l.withDirectives(l.createElementVNode("div",{style:{"line-height":"40px"}},l.toDisplayString(c.value)+"%",513),[[l.vShow,c.value>0]]),l.createVNode(ee,{content:"100%视图",placement:"bottom"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:W},[l.createVNode(ae,{name:"refresh"})])]),_:1}),l.createVNode(ee,{content:"窗口大小",placement:"bottom"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:H,style:{"margin-left":"-16px"}},[K[38]||(K[38]=l.createTextVNode(" 窗口大小 ")),l.createVNode(ae,{name:"fullscreen-exit"})])]),_:1}),K[41]||(K[41]=l.createElementVNode("div",{style:{width:"36px"}},null,-1)),l.createVNode(ee,{content:"运行"},{default:l.withCtx(()=>[l.createElementVNode("a",{onClick:J},[K[39]||(K[39]=l.createTextVNode(" 运行查看 ")),l.createVNode(ae,{name:"play-circle-stroke"})])]),_:1})])],64)}}}),Gn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n},cTe=Gn(sTe,[["__scopeId","data-v-ec8bff11"]]);function uTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ey:o}=t.calculative.worldRect,s=i/4;if(n.moveTo(r+s,a),n.lineTo(r,a),n.lineTo(r,o),n.lineTo(r+s,o),n instanceof Path2D)return n}function dTe(t){const e=[{x:.25,y:0},{x:.25,y:1},{x:0,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:a+"",x:n,y:r,penId:t.id}))}function fTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect,c=t.offsetX;let u=i/7;if(c>1?u=c:c>0&&(u=i*c),n.moveTo(r+u,a),n.lineTo(o,a),n.lineTo(r+i-u,s),n.lineTo(r,s),n.closePath(),n instanceof Path2D)return n}function hTe(t){const e=[{x:.5,y:0},{x:.9285714285714286,y:.5},{x:.5,y:1},{x:.07142857142857142,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function vTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s,ey:c}=t.calculative.worldRect,u=i/8;if(n.moveTo(r+u,a),n.lineTo(s-u,a),n.bezierCurveTo(s+u/3,a,s+u/3,c,s-u,c),n.lineTo(r+u,c),n.lineTo(r,a+o/2),n.closePath(),n instanceof Path2D)return n}function pTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s,center:c}=t.calculative.worldRect,u=c.x,d=a+o*6/7,f=o/6;if(n.moveTo(r,a),n.lineTo(s,a),n.lineTo(s,d),n.bezierCurveTo(s-20,d-f,u+i/5,d-f,u,d),n.bezierCurveTo(u-i/5,d+f,r,d+f,r,d),n.closePath(),n instanceof Path2D)return n}function gTe(t){const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:.8571428571428571},{x:0,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function mTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect,c=i/10;if(n.moveTo(r+c*2,a),n.bezierCurveTo(r-c*2/3,a,r-c*2/3,s,r+c*2,s),n.lineTo(o,s),n.bezierCurveTo(o-c,s,o-c,a,o,a),n.closePath(),n instanceof Path2D)return n}function yTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect;n.moveTo(r,a),n.lineTo(o,a),n.lineTo(o,s),n.lineTo(r,s),n.closePath();const c=i/7;if(n.moveTo(r,a+c),n.lineTo(o,a+c),n.moveTo(r+c,a),n.lineTo(r+c,s),n instanceof Path2D)return n}function bTe(t,e){const n=e||new Path2D,{x:r,y:a,height:i,ex:o,ey:s}=t.calculative.worldRect,c=i/4;if(n.moveTo(r,a+c),n.lineTo(o,a),n.lineTo(o,s),n.lineTo(r,s),n.closePath(),n instanceof Path2D)return n}function wTe(t){const e=[{x:.5,y:.125},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function xTe(t,e){const n=e||new Path2D,{x:r,y:a,ex:i,ey:o}=t.calculative.worldRect;if(n.moveTo(r,a),n.lineTo(i,a),n.moveTo(r,o),n.lineTo(i,o),n instanceof Path2D)return n}function CTe(t){const e=[{x:.5,y:0},{x:.5,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:a+"",x:n,y:r,penId:t.id}))}function _Te(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s,ey:c}=t.calculative.worldRect;if(n.ellipse(r+i/2,a+o/2,i/2,o/2,0,0,Math.PI*2),n.moveTo(r+i/2,c),n.lineTo(s,c),n.closePath(),n instanceof Path2D)return n}function STe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,ex:o,ey:s}=t.calculative.worldRect,c=i/7;if(n.moveTo(r,a),n.lineTo(o,a),n.lineTo(o,s),n.lineTo(r,s),n.closePath(),n.moveTo(r+c,a),n.lineTo(r+c,s),n.moveTo(o-c,a),n.lineTo(o-c,s),n instanceof Path2D)return n}function TTe(t,e){const n=e||new Path2D,{x:r,y:a,height:i,ex:o,ey:s}=t.calculative.worldRect,c=i/7;if(n.moveTo(r,a+c),n.bezierCurveTo(r,a-c/2|0,o,a-c/2|0,o,a+c),n.lineTo(o,s-c),n.bezierCurveTo(o,s+c/2|0,r,s+c/2|0,r,s-c),n.closePath(),n.moveTo(r,s-c),n.bezierCurveTo(r,s-c*2|0,o,s-c*2|0,o,s-c),n instanceof Path2D)return n}function H8(){return{flowComment:uTe,flowData:fTe,flowDb:TTe,flowDisplay:vTe,flowDocument:pTe,flowExternStorage:mTe,flowInternalStorage:yTe,flowManually:bTe,flowParallel:xTe,flowQueue:_Te,flowSubprocess:STe}}function W8(){return{flowDocument:gTe,flowManually:wTe,flowParallel:CTe,flowComment:dTe,flowData:hTe}}function kTe(t,e){const{x:n,y:r,width:a,height:i}=e.calculative.worldRect;t.beginPath(),t.ellipse(n+a/2,r+i/2,a/2,i/2,0,0,Math.PI*2),t.stroke(),t.beginPath(),t.fillStyle=t.strokeStyle,t.ellipse(n+a/2,r+i/2,a/4,i/4,0,0,Math.PI*2),t.fill()}function OTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ey:s}=t.calculative.worldRect,c=t.calculative.lineLeft||.08;let u=t.calculative.borderRadius||0,d=u;u<1&&(u=i*u,d=o*u);let f=u<d?u:d;if(i<2*f&&(f=i/2),o<2*f&&(f=o/2),n.moveTo(r+f,a),n.arcTo(r+i,a,r+i,a+o,f),n.arcTo(r+i,a+o,r,a+o,f),n.arcTo(r,a+o,r,a,f),n.arcTo(r,a,r+i,a,f),n.closePath(),n.moveTo(r+c*i,a),n.lineTo(r+c*i,s),n instanceof Path2D)return n}function ETe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s}=t.calculative.worldRect,c=t.calculative.lineTop||.08;let u=t.calculative.borderRadius||0,d=u;u<1&&(u=i*u,d=o*d);let f=u<d?u:d;if(i<2*f&&(f=i/2),o<2*f&&(f=o/2),n.moveTo(r+f,a),n.arcTo(r+i,a,r+i,a+o,f),n.arcTo(r+i,a+o,r,a+o,f),n.arcTo(r,a+o,r,a,f),n.arcTo(r,a,r+i,a,f),n.closePath(),n.moveTo(r,a+c*o),n.lineTo(s,a+c*o),n instanceof Path2D)return n}function K8(){return{forkV:hs,forkH:hs,swimlaneH:OTe,swimlaneV:ETe}}function q8(){return{activityFinal:kTe}}function PTe(t,e){t.onDestroy||(t.onDestroy=ATe,t.onAdd=ITe);const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s}=t.calculative.worldRect;let c=t.calculative.borderRadius||0,u=c;c<1&&(c*=i,u*=o);let d=c<u?c:u;i<2*d&&(d=i/2),o<2*d&&(d=o/2),n.moveTo(r+d,a),n.arcTo(r+i,a,r+i,a+o,d),n.arcTo(r+i,a+o,r,a+o,d),n.arcTo(r,a+o,r,a,d),n.arcTo(r,a,r+i,a,d);const f=.2*o;n.moveTo(r,a+f),n.lineTo(s,a+f);const h=a+f+(o-f)/2;if(n.moveTo(r,h),n.lineTo(s,h),n.closePath(),n instanceof Path2D)return n}function ITe(t){const{x:e,y:n,width:r,height:a}=t.calculative.worldRect,i=t.list,o={name:"text",x:e,y:n+.2*a,width:r,height:.4*a,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10},s={name:"text",x:e,y:n+.6*a,width:r,height:.4*a,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10};Object.assign(o,i[0]),Object.assign(s,i[1]),t.calculative.canvas.makePen(o),t.calculative.canvas.makePen(s),t.calculative.canvas.parent.pushChildren(t,[o]),t.calculative.canvas.parent.pushChildren(t,[s])}function ATe(t){const e=t.calculative.canvas.store;t.children.forEach(n=>{const r=e.data.pens.findIndex(a=>a.id===n);r>-1&&(e.data.pens.splice(r,1),e.pens[n]=void 0)}),t.children=void 0}function NTe(t,e){t.onDestroy||(t.onDestroy=RTe,t.onAdd=DTe);const n=e||new Path2D,{x:r,y:a,width:i,height:o,ex:s}=t.calculative.worldRect;let c=t.calculative.borderRadius||0,u=c;c<1&&(c=i*c,u=o*u);let d=c<u?c:u;i<2*d&&(d=i/2),o<2*d&&(d=o/2),n.moveTo(r+d,a),n.arcTo(r+i,a,r+i,a+o,d),n.lineTo(r+i,a+o-d),n.arcTo(r+i,a+o,r,a+o,d),n.arcTo(r,a+o,r,a,d),n.arcTo(r,a,r+i,a,d);const f=.2*o;if(n.moveTo(r,a+f),n.lineTo(s,a+f),n.closePath(),n instanceof Path2D)return n}function DTe(t){const{x:e,y:n,width:r,height:a}=t.calculative.worldRect,i=t.list;let o={name:"text",x:e,y:n+.2*a,width:r,height:.8*a,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10};Object.assign(o,i[0]),t.calculative.canvas.makePen(o),t.calculative.canvas.parent.pushChildren(t,[o])}function RTe(t){const e=t.calculative.canvas.store;t.children.forEach(n=>{const r=e.data.pens.findIndex(a=>a.id===n);r>-1&&(e.data.pens.splice(r,1),e.pens[n]=void 0)}),t.children=[]}function G8(){return{interfaceClass:PTe,simpleClass:NTe}}function MTe(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;if(n.rect(r,a,i,o),n.closePath(),n instanceof Path2D)return n}function LTe(t,e){const n=e.headHeight??50,{x:r,y:a,width:i,height:o,ey:s}=e.calculative.worldRect;let c=e.calculative.borderRadius||0,u=c;e.calculative.borderRadius<1&&(c*=i,u*=o);let d=c<u?c:u;i<2*d&&(d=i/2),n<2*d&&(d=n/2),t.beginPath(),t.moveTo(r+d,a),t.arcTo(r+i,a,r+i,a+n,d),t.arcTo(r+i,a+n,r,a+n,d),t.arcTo(r,a+n,r,a,d),t.arcTo(r,a,r+i,a,d),t.closePath(),t.stroke(),t.save(),t.beginPath(),t.lineWidth=1,t.setLineDash([7,7]);const f=r+i/2;t.moveTo(f,a+n+1),t.lineTo(f,s),t.stroke(),t.restore()}function Y8(){return{sequenceFocus:MTe}}function X8(){return{lifeline:LTe}}let Q1=["fontSize","nameGap","margin","width","symbolSize","itemWidth","itemHeight","fontWeight","top","left","right","bottom","zoom","edgeSymbolSize","nodeWidth","nodeGap","distance","length","length2","offsetCenter","size","symbolOffset","padding","barWidth","symbolOffset","shadowOffsetY","shadowOffsetX"];function FTe(t){var a,i;let e=globalThis.echarts;if(!t.echarts||!e)return;if(typeof t.echarts=="string")try{t.echarts=JSON.parse(t.echarts)}catch{}Q1=((a=t.calculative.canvas.store.options.diagramOptions.chart)==null?void 0:a.keyWords)||Q1,t.onDestroy||(t.onDestroy=jTe,t.onMove=Z1,t.onResize=$Te,t.onRotate=Z1,t.onValue=UTe,t.onBeforeValue=zTe,t.onBinds=HTe,t.onMouseEnter=Z1,t.onRenderPenRaw=V1),t.calculative.singleton||(t.calculative.singleton={});const n=new Path2D,r=t.calculative.worldRect;if(!t.calculative.singleton.div){const o=document.createElement("div");o.style.position="absolute",o.style.outline="none",o.style.left="-9999px",o.style.top="-9999px",o.style.width=r.width+"px",o.style.height=r.height+"px",document.body.appendChild(o),(i=t.calculative.canvas.externalElements)==null||i.parentElement.appendChild(o),dr(t,o),t.calculative.singleton.div=o,t.calculative.singleton.echart=e.init(o,t.echarts.theme),BTe(t),t.calculative.singleton.echartsReady=!0,t.echarts.geoName&&!e.getMap(t.echarts.geoName)&&(t.echarts.geoJson?e.registerMap(t.echarts.geoName,t.echarts.geoJson):t.echarts.geoUrl&&(t.calculative.singleton.echartsReady=!1,fetch(t.echarts.geoUrl).then(s=>{s.text().then(c=>{if(typeof c=="string")try{c=JSON.parse(c)}catch{}if(c.constructor!==Object&&c.constructor!==Array){console.warn("Invalid data:",c);return}e.registerMap(t.echarts.geoName,c),t.calculative.singleton.echartsReady=!0,t.calculative.singleton.echart.setOption(kg(t.echarts.option,t.calculative.canvas.store.data.scale),!0),t.calculative.singleton.echart.resize(),setTimeout(()=>{V1(t)},300)})}))),t.calculative.singleton.echartsReady&&setTimeout(()=>{t.calculative.singleton.echart.setOption(kg(t.echarts.option,t.calculative.canvas.store.data.scale),!0),setTimeout(()=>V1(t),300)})}return n}function BTe(t){var r;const e=t.calculative.singleton.echart,n=["click","dblclick","mousedown","mousemove","mouseup","mouseover","mouseout","globalout","contextmenu"];n.forEach(a=>{e.off(a)}),(r=t.events)==null||r.forEach(a=>{a.actions&&a.actions.length&&n.includes(a.name)&&e.on(a.name,i=>{let o=!1;a.conditions&&a.conditions.length?a.conditionType==="and"?o=a.conditions.every(s=>t.calculative.canvas.parent.judgeCondition(t,s.key,s)):a.conditionType==="or"&&(o=a.conditions.some(s=>t.calculative.canvas.parent.judgeCondition(t,s.key,s))):o=!0,o&&a.actions.forEach(s=>{if(s.timeout){let c=setTimeout(()=>{t.calculative.canvas.parent.events[s.action]&&(t.calculative.canvas.parent.events[s.action](t,s,i),clearTimeout(c),c=null)},s.timeout)}else t.calculative.canvas.parent.events[s.action]&&t.calculative.canvas.parent.events[s.action](t,s,i)})})})}function jTe(t){if(t.calculative.singleton&&t.calculative.singleton.div){t.calculative.singleton.div.remove();let e=globalThis.echarts;e&&e.dispose(t.calculative.singleton.echart),delete t.calculative.singleton.div,delete t.calculative.singleton.echart}}function Z1(t){t.calculative.singleton.div&&dr(t,t.calculative.singleton.div)}function $Te(t){if(!t.calculative.singleton.echart)return;let e=globalThis.echarts;dr(t,t.calculative.singleton.div),!(t.echarts.geoName&&!e.getMap(t.echarts.geoName))&&(t.calculative.singleton.echart.setOption(kg(t.echarts.option,t.calculative.canvas.store.data.scale),!0),t.calculative.singleton.echart.resize())}function UTe(t){if(t.calculative.singleton.echart&&(dr(t,t.calculative.singleton.div),t.calculative.singleton.echartsReady))if(t.calculative.partialOption){const e=t.calculative.partialOption.echarts.option;t.calculative.singleton.echart.setOption(Te(e))}else t.calculative.singleton.echart.setOption(kg(t.echarts.option,t.calculative.canvas.store.data.scale),!0)}function zTe(t,e){if(t.calculative.partialOption=null,e.echarts){let p=globalThis.echarts;return e.echarts.geoName&&!p.getMap(e.echarts.geoName)&&(e.echarts.geoJson?p.registerMap(e.echarts.geoName,e.echarts.geoJson):e.echarts.geoUrl&&(t.calculative.singleton.echartsReady=!1,fetch(e.echarts.geoUrl).then(g=>{g.text().then(m=>{if(typeof m=="string")try{m=JSON.parse(m)}catch{}if(m.constructor!==Object&&m.constructor!==Array){console.warn("Invalid data:",m);return}return p.registerMap(e.echarts.geoName,m),t.calculative.singleton.echartsReady=!0,t.onValue(t),!1})}))),e}if(t.realTimes&&t.realTimes.length){let p=Object.keys(e);const{xAxis:g,yAxis:m}=t.echarts.option,{max:y,replaceMode:b,timeFormat:w}=t.echarts;let x=[],C=!1;for(let S in e)if(S.includes("echarts.option")){C=!0;let _=cu(t,S);if(Array.isArray(_)&&b===0&&(_.push(e[S]),y&&_.splice(0,_.length-y),e[S]=_,!p.includes("echarts.option.xAxis.data"))){let O="echarts.option.xAxis.data";Array.isArray(g)&&g.length&&(O="echarts.option.xAxis.0.data");let N=cu(t,O),B=Axe(w||"`${hours}:${minutes}:${seconds}`");N.push(B),y&&N.splice(0,N.length-y),e[O]=N}if(S.includes(".data.")){let O=S.substring(0,S.indexOf(".data.")+5);x.includes(O)||x.push(O)}}if(C){const S=Te(e);t.calculative.partialOption=WTe(S),x.forEach(_=>{let O=cu(t,_);w1(t.calculative.partialOption,_,O)})}return e}if(!e.dataX&&!e.dataY)return e;const n=t.echarts,{max:r,replaceMode:a}=n;let i=e.dataX,o=e.dataY,s=[];o&&s.push("echarts.option.series");const c=n.option.series,u=c.length,{xAxis:d,yAxis:f}=n.option;Array.isArray(d)&&d.length>1&&console.warn("echarts 只支持单 x 轴，多 x 轴将被忽略");const h=Array.isArray(d)?d[0]:d,v=Array.isArray(f)?f[0]:f;if(a)if(a===1){if(!h&&!v)o&&(u===1?(!Array.isArray(o)&&(o=[o]),o.forEach((p,g)=>{const m=c[0].data.find(y=>y.name===p.name);m&&(m.value=p.value)})):c.forEach((p,g)=>{Array.isArray(o[g])||(o[g]=[o[g]]),o[g].forEach((m,y)=>{const b=p.data.find(w=>w.name===m.name);b&&(b.value=m.value)})}));else if((h.type==="category"||v.type==="category")&&i&&o){const p=h.type==="category"?h.data:v.data;!Array.isArray(i)&&(i=[i]),!Array.isArray(o)&&(o=[o]),h.type==="category"?s.push("echarts.option.xAxis"):s.push("echarts.option.yAxis"),u===1?o.forEach((g,m)=>{const y=p.indexOf(i[m]);c[0].data[y]=g}):c.forEach((g,m)=>{o[m].forEach((y,b)=>{const w=p.indexOf(i[b]);g.data[w]=y})})}}else a===2&&(i&&(h.data=i,h.data.splice(0,h.data.length-r),s.push("echarts.option.xAxis")),o&&(u===1?(c[0].data=o,c[0].data.splice(0,c[0].data.length-r)):c.forEach((p,g)=>{p.data=o[g],p.data.splice(0,p.data.length-r)})));else{if(i){!Array.isArray(i)&&(i=[i]);const p=h.data;p.push(...i),p.splice(0,p.length-r),s.push("echarts.option.xAxis")}if(o)if(u===1){!Array.isArray(o)&&(o=[o]);const p=c[0].data;p.push(...o),p.splice(0,p.length-r)}else c.forEach((p,g)=>{Array.isArray(o[g])||(o[g]=[o[g]]);const m=p.data;m.push(...o[g]),m.splice(0,m.length-r)})}return t.calculative.partialOption={},s.forEach(p=>{let g=cu(t,p);w1(t.calculative.partialOption,p,g)}),delete e.dataX,delete e.dataY,Object.assign(e,{echarts:n})}function HTe(t,e,n){if(n.key!=="dataY")return;const r=t.echarts,{xAxis:a,yAxis:i}=r.option;Array.isArray(a)&&a.length>1&&console.warn("echarts 只支持单 x 轴，多 x 轴将被忽略");const o=Array.isArray(a)?a[0]:a,s=Array.isArray(i)?i[0]:i,c=r.option.series;if(!o&&!s){const u=[];if(Array.isArray(c)&&c.length===1)return c[0].data.forEach(d=>{const{dataId:f}=n.dataIds.find(h=>h.name===d.name);if(f){const h=e.find(v=>v.dataId===f);h&&u.push({name:d.name,value:h.value})}}),{id:t.id,dataY:u}}else if(o.type==="category"||s.type==="category"){const u=[],d=[],f=o.type==="category"?o.data:s.data;return f==null||f.forEach(h=>{const{dataId:v}=n.dataIds.find(p=>p.name===h);if(v){const p=e.find(g=>g.dataId===v);p&&(d.push(h),u.push(p.value))}}),{id:t.id,dataY:u,dataX:d}}else if(o.type==="time"){const u=[],d=+new Date;let f=!1;if(c.forEach((h,v)=>{const p=[],{dataId:g}=n.dataIds.find(m=>m.name===h.name);if(g){const m=e.find(y=>y.dataId===g);m&&(p.push([d,m.value]),f=!0)}u[v]=p}),f)u.forEach((h,v)=>{if(!h||h.length===0){const p=c[v].data[c[v].data.length-1];u[v]=[[d,p[1]]]}});else return;return{id:t.id,dataY:u.length===1?u[0]:u}}}function V1(t){var n,r;const e=new Image;e.src=(r=(n=t.calculative.singleton)==null?void 0:n.echart)==null?void 0:r.getDataURL({pixelRatio:2}),t.calculative.img=e}function kg(t,e){const n=Te(t);if(n.dataZoom){let r=["right","top","width","height","left","bottom"];for(let a=0;a<r.length;a++)n.dataZoom.forEach(i=>{isNaN(i[r[a]])||(i[r[a]]*=e)})}return g1(n,Q1,e),n}function WTe(t){const e={};return Object.keys(t).forEach(n=>{const r=n.split(".");let a=e;r.forEach((i,o)=>{const s=!isNaN(parseInt(i));if(o===r.length-1)s?(Array.isArray(a)||(a=[]),a[parseInt(i)]=t[n]):a[i]=t[n];else if(s){const c=parseInt(i);if(Array.isArray(a)||a[r[o-1]],a[c]||(a[c]={}),Array.isArray(a))for(let u=0;u<parseInt(i);u++)a[u]||(a[u]={});a=a[c]}else a[i]||(i==="series"?a[i]=[]:a[i]={}),a=a[i]})}),e}function J8(t){ja({echarts:FTe})}var ew=(t=>(t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.ReplaceAll=2]="ReplaceAll",t))(ew||{});function Q8(t,e){const n=e.calculative.worldRect.height*14/16,a=(t.match(/[\u4e00-\u9fa5]/g)||"").length;return(t.length-a)*n*.6+a*n}function Z8(t){if(t.direction=="horizontal"){const e=[];let n=0;const r=t.height;t.checkboxHeight=r,t.options.forEach((i,o)=>{e.push(o*(40+r)+n),n+=Q8(i.text,t)}),t.optionPos=e;const a=e.length*(40+r)+n;t.checkboxWidth=a,t.width=a,t.calculative.width=a,t.calculative.worldRect={x:t.x,y:t.y,height:t.height,width:t.width,center:{x:t.x+t.width/2,y:t.y+t.height/2}},bn(t.calculative.worldRect)}else if(t.direction=="vertical"){t.optionInterval==null&&(t.optionInterval=20),t.optionHeight||(t.optionHeight=20);const e=[];t.options.forEach((r,a)=>{e.push(a*(t.optionInterval+t.optionHeight))}),t.optionPos=e;const n=e[e.length-1]+t.optionHeight;t.checkboxHeight=n,t.width||(t.height=n,t.calculative.height=n,t.calculative.worldRect={x:t.x,y:t.y,height:t.height,width:t.width,center:{x:t.x+t.width/2,y:t.y+t.height/2}},bn(t.calculative.worldRect))}}function V8(t,e){e.onAdd||(e.onAdd=e6,(!e.rowPos||!e.colPos||!e.calculative.maxOffsetY)&&e.onAdd(e),e.onMouseMove=QTe,e.onMouseLeave=ZTe,e.onMouseDown=VTe,e.onShowInput=XTe,e.onInput=JTe,e.onValue=nke,e.onBeforeValue=rke,e.onMouseEnter=ske,e.onWheel=ake,e.onDestroy=oke),e.data.length!==e.rowPos.length&&(e.initWorldRect=null,e.calculative.isUpdateData=!0,e.onValue(e)),e.data[0].length!==e.colPos.length&&(e.initWorldRect=null,e.calculative.isUpdateData=!0,e.onValue(e));const n=e.calculative.canvas.store.data,r=e.calculative.canvas.store.options;if(e.color=e.color||n.color||r.color,e.textColor=e.textColor||e.color||n.textColor||r.textColor,e.activeColor=e.activeColor||r.activeColor,e.hoverColor=e.hoverColor||r.hoverColor,e.activeBackground=e.activeBackground||r.activeBackground,e.hoverBackground=e.hoverBackground||r.hoverBackground,!e.hasHeader){t.save(),t.beginPath();const{x:a,y:i,width:o,height:s}=e.calculative.worldRect;t.fillStyle="#fff0",t.rect(a-1,i-1,o+2,s+2),t.fill(),t.clip()}GTe(t,e),YTe(t,e),KTe(t,e),t.restore(),e.isFirstTime=!1}function KTe(t,e){if(!e.calculative.hover||!e.calculative.hoverCell||e.calculative.isInput||!e.calculative.isHover)return;let n=e.calculative.worldRect,r=e.calculative.canvas.mousePos;if(!(r.x>n.x&&r.x<n.x+n.width&&r.y>n.y&&r.y<n.y+n.height)){e.calculative.hover=!1,e.calculative.isHover=!1,e.calculative.hoverCell=void 0;return}const{row:a,col:i}=e.calculative.hoverCell,{x:o,y:s}=e.calculative.canvas.mousePos;if(!e.data[a])return;let c=e.data[a][i];if(typeof c=="object"||!c)return;t.save(),t.beginPath(),t.textAlign="start",t.textBaseline="middle",t.font=t.font=(e.calculative.fontStyle||"")+" normal "+(e.calculative.fontWeight||"")+" "+(e.calculative.fontSize||12)+"px "+e.calculative.fontFamily;const u=t.measureText(c).width;t.beginPath(),t.fillStyle="#fff",t.strokeStyle="#000",t.moveTo(o,s),t.rect(o-10,s,u+20,20),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="#000",t.fillText(c,o,s+10),t.restore()}function qTe(t){const e=[],n=[],r={};t.rowHeight||(t.rowHeight=40),t.colWidth||(t.colWidth=150);let a=0;const i=t.styles&&t.styles.filter(v=>v.col!==void 0&&v.row===void 0&&v.width);let o={};i&&i.forEach(v=>{o[v.col]=v.width});for(let v=0;v<t.data[0].length;v++){a+=(o[v]||t.colWidth)*t.calculative.canvas.store.data.scale,e.push(a);let p=t.styles&&t.styles.filter(g=>g.col===v&&g.row===void 0);p&&(r[v]=p[0])}let s=0;const c=t.styles&&t.styles.filter(v=>v.col===void 0&&v.row!==void 0&&v.height);let u={};c&&c.forEach(v=>{u[v.row]=v.height});let d=s;for(let v=0;v<t.data.length;v++)s+=(u[v]||t.rowHeight)*t.calculative.canvas.store.data.scale,n.push(s),v<t.maxNum&&(d=s);if(t.calculative.maxOffsetY=(s-d)/t.calculative.canvas.store.data.scale,t.initWorldRect)return;t.colPos=e,t.rowPos=n,t.colStyle=r,t.initScale=t.calculative.canvas.store.data.scale,t.tableWidth=a,t.tableHeight=d||s,t.calculative.width=a,t.calculative.height=d||s,t.calculative.width=a,t.calculative.height=d||s,t.height||(t.height=t.calculative.height),t.width||(t.width=t.calculative.width);let f=t.x,h=t.y;if(t.parentId){let v=t.calculative.canvas.store.pens[t.parentId];f=v.calculative.worldRect.x+v.calculative.worldRect.width*t.x,h=v.calculative.worldRect.y+v.calculative.worldRect.height*t.y}t.calculative.worldRect={x:f,y:h,height:t.calculative.height,width:t.calculative.width,center:{x:t.x+t.calculative.width/2,y:t.y+t.calculative.height/2}},t.width=t.calculative.width,t.height=t.calculative.height,t.initWorldRect||(t.initWorldRect={width:t.calculative.worldRect.width,height:t.calculative.worldRect.height}),bn(t.calculative.worldRect)}function GTe(t,e){if(!e.colPos)return;const{x:n,y:r,width:a,height:i,ex:o,ey:s}=e.calculative.worldRect;t.save(),t.beginPath(),t.strokeStyle=e.color;let c=e.calculative.borderRadius||0,u=c;c<1&&(c=a*c,u=i*u);let d=c<u?c:u;if(a<2*d&&(d=a/2),i<2*d&&(d=i/2),t.moveTo(n+d,r),t.arcTo(o,r,o,s,d),t.arcTo(o,s,n,s,d),t.arcTo(n,s,n,r,d),t.arcTo(n,r,o,r,d),e.background&&(t.fillStyle=e.background,t.fill()),e.bordered!==!1&&(t.strokeStyle=e.borderColor||"#424B61",t.stroke()),e.hLine!==!1){let f=e.rowPos[e.rowPos.length-1];e.hasHeader&&(t.beginPath(),t.moveTo(e.calculative.worldRect.x,e.calculative.worldRect.y+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight),t.lineTo(e.calculative.worldRect.ex,e.calculative.worldRect.y+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight),t.strokeStyle=e.borderColor||"#424B61",t.stroke());for(const h of e.rowPos){if(h===f)continue;const v=h*e.calculative.worldRect.height/e.tableHeight-e.offsetY*e.calculative.canvas.store.data.scale;if(e.hasHeader){if(v<0+e.rowPos[0]||v>e.calculative.worldRect.height)continue}else if(v<0||v>e.calculative.worldRect.height)continue;t.beginPath(),t.moveTo(e.calculative.worldRect.x,e.calculative.worldRect.y+v),t.lineTo(e.calculative.worldRect.ex,e.calculative.worldRect.y+v),t.strokeStyle=e.borderColor||"#424B61",t.stroke()}}if(e.vLine!==!1){let f=e.colPos[e.colPos.length-1];e.colPos.forEach((h,v)=>{if(h===f)return;const p=h*e.calculative.worldRect.width/e.tableWidth;t.beginPath(),t.moveTo(e.calculative.worldRect.x+p,e.calculative.worldRect.y),t.lineTo(e.calculative.worldRect.x+p,e.calculative.worldRect.ey),t.strokeStyle=e.borderColor||"#424B61",t.stroke()})}t.restore()}function YTe(t,e){var r,a,i,o,s;if(!e.colPos)return;e.calculative.texts||(e.calculative.texts=[]);const n=1;for(let c=0;c<e.rowPos.length;c++){if(e.hasHeader&&c===1){t.save(),t.beginPath();const{x:d,y:f,width:h,height:v}=e.calculative.worldRect;t.fillStyle="#fff0",t.rect(d-1,f+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight-1,h+2,v-e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight+2),t.fill(),t.clip()}let{style:u}=eke(e,c);for(let d=0;d<e.colPos.length;d++){let{value:f,style:h}=n6(e,c,d),v=!0;if(Array.isArray(h)&&h.length>0){let O=0;h.forEach((N,B)=>{N.wheres&&N.wheres.every(k=>new Function("attr",`return attr ${k.comparison} ${k.value}`)(f))&&(O=B)}),h=h[O]}else h.wheres&&Array.isArray(h.wheres)&&(v=!1,v=h.wheres.every(function(O){return new Function("attr",`return attr ${O.comparison} ${O.value}`)(f)}));let p=e.color,g=e.textColor||e.color,m=null,y=null,b=null,w=null;v&&(p=h.color||u.color||e.color,g=h.textColor||u.textColor||e.textColor,m=h.background||u.background,y=(h.fontSize||u.fontSize||0)*e.calculative.canvas.store.data.scale,b=h.fontWeight||u.fontWeight,w=h.fontStyle||u.fontStyle);let x;e.stripe&&(e.hasHeader!==!1?c%2===1&&(m=m||e.stripeColor||"#407FFF1F"):c%2===0&&(m=m||e.stripeColor||"#407FFF1F")),e.calculative.active&&((r=e.calculative.activeCell)==null?void 0:r.row)===c&&((a=e.calculative.activeCell)==null?void 0:a.col)===d&&(p=e.activeColor,m=e.activeBackground,x=p,g=e.activeTextColor||e.activeColor),e.calculative.hover&&((i=e.calculative.hoverCell)==null?void 0:i.row)===c&&((o=e.calculative.hoverCell)==null?void 0:o.col)===d&&(p=e.hoverColor,m=e.hoverBackground,g=e.hoverTextColor||e.hoverColor,x=p);const C=a6(e,c,d);if(C.y+C.height<e.calculative.worldRect.y||C.y>e.calculative.worldRect.height+e.calculative.worldRect.y)continue;m&&(t.save(),t.beginPath(),t.fillStyle=m,t.fillRect(C.x,C.y,C.width+.25*e.calculative.canvas.store.data.scale,C.height),t.restore()),x&&(t.save(),t.beginPath(),t.strokeStyle=x,t.strokeRect(C.x,C.y,C.width,C.height),t.restore()),e.calculative.worldTextRect=C;let S=e.calculative.texts[c];if(e.calculative.texts[c]||(S=[],e.calculative.texts.push(S)),S[d]==null){if(typeof f=="object"){const O=e.styles&&e.styles.filter(N=>N.col===d&&N.row===void 0&&N.pens);if(O.length>0){if(S[d]="",e.isFirstTime){e.maxNum&&e.hasHeader&&c>=e.maxNum&&(f.visible=!1);let N=JSON.parse(JSON.stringify(O[0].pens));N.forEach(B=>{Object.assign(B,{row:c,col:d},f),B.activeBackground=B.background,B.hoverBackground=B.background,B.activeColor=B.color,B.hoverColor=B.color,B.activeTextColor=B.textColor,B.hoverTextColor=B.textColor,B.height*=e.calculative.canvas.store.data.scale,B.width*=e.calculative.canvas.store.data.scale}),tke(e,C,N),e.calculative.canvas.parent.pushChildren(e,N)}continue}}else f===void 0?S[d]="":S[d]=f.text||f+"";if(!S[d])continue;S[d]=_f(e,S[d])}if(!S[d])continue;t.save(),t.beginPath(),t.fillStyle=g,t.textAlign="center",t.textBaseline="middle",t.font=(w||e.calculative.fontStyle||"")+" normal "+(b||e.calculative.fontWeight||"")+" "+(y||e.calculative.fontSize||12)*n+"px "+e.calculative.fontFamily;let _=e.colStyle&&((s=e.colStyle[d])==null?void 0:s.textAlign);if(_&&(t.textAlign=_),S[d].length===1)_==="left"?t.fillText(S[d][0],C.x,C.y+C.height/2):_==="right"?t.fillText(S[d][0],C.x+C.width,C.y+C.height/2):t.fillText(S[d][0],C.x+C.width/2,C.y+C.height/2);else{const N=(y||e.calculative.fontSize)*e.calculative.lineHeight*n,B=S[d].length*N;let T=(C.height-B)/2;_==="left"?S[d].forEach((k,E)=>{t.fillText(k,C.x,C.y+T+(E+.55)*N)}):_==="right"?S[d].forEach((k,E)=>{t.fillText(k,C.x+C.width,C.y+T+(E+.55)*N)}):S[d].forEach((k,E)=>{t.fillText(k,C.x+C.width/2,C.y+T+(E+.55)*N)})}t.restore()}}}function e6(t){var e;rw(t),(e=t.children)!=null&&e.length||(t.isFirstTime=!0),t.offsetY||(t.offsetY=0),qTe(t)}function XTe(t,e){if(!t.calculative.hoverCell)return;const{value:n}=n6(t,t.calculative.hoverCell.row,t.calculative.hoverCell.col);if(typeof n=="object")return;t.calculative.isHover=!1,t.calculative.isInput=!0,t.calculative.canvas.render(),t.calculative.inputCell=t.calculative.hoverCell;const r=a6(t,t.calculative.hoverCell.row,t.calculative.hoverCell.col);t.calculative.tempText=n.text||n+"",t.calculative.canvas.showInput(t,r,"#ffffff")}function JTe(t,e){t.calculative.inputCell&&(r6(t,t.calculative.inputCell.row,t.calculative.inputCell.col,e),t.calculative.isInput=!1,t.calculative.isHover=!0,t.calculative.canvas.render())}function QTe(t,e){t.timer&&(t.calculative.isHover=!1,clearTimeout(t.timer)),t.timer=setTimeout(()=>{t.calculative.isHover=!0,t.calculative.canvas.render()},500),t.calculative.hoverCell=t6(t,e),t.calculative.canvas.render()}function ZTe(t,e){rw(t),t.calculative.hoverCell=void 0,t.calculative.canvas.render()}function VTe(t,e){t.calculative.activeCell=t6(t,e),t.calculative.canvas.render()}function t6(t,e){const n=t.calculative.worldRect.width/t.tableWidth,r=t.calculative.worldRect.height/t.tableHeight,a={row:0,col:0};for(let i=0;i<t.colPos.length;i++)e.x>t.calculative.worldRect.x+t.colPos[i]*n&&(a.col=i+1);for(let i=0;i<t.rowPos.length;i++)e.y>t.calculative.worldRect.y+t.rowPos[i]*r-t.offsetY*t.calculative.canvas.store.data.scale&&(a.row=i+1);return a}function n6(t,e,n){if(!t.data||!Array.isArray(t.data))return;const r=t.data[e],a=t.styles&&t.styles.filter(i=>i.row===e&&i.col===n);if(Array.isArray(r))return{value:r[n],style:(a==null?void 0:a.length)>0?a.length>1?a:a[0]:{}};if(!r.data||!Array.isArray(r.data))return}function eke(t,e){if(!t.data||!Array.isArray(t.data))return;const n=t.data[e],r=t.styles&&t.styles.filter(a=>a.row===e&&a.col===void 0);if(Array.isArray(n))return{value:n,style:(r==null?void 0:r.length)>0?r[0]:{}};if(!n.data||!Array.isArray(n.data))return}function r6(t,e,n,r){if(!t.data||!Array.isArray(t.data))return;t.isFirstTime=!1,t.calculative.texts=void 0;let a=t.data[e];a&&(a[n]instanceof Object||(a[n]=r),t.calculative.canvas.store.emitter.emit("valueUpdate",t))}function a6(t,e,n){const r=t.calculative.worldRect.width/t.tableWidth,a=t.calculative.worldRect.height/t.tableHeight;let i=0,o=t.colPos[n]*r;n>0&&(i=t.colPos[n-1]*r);let s=0,c=t.rowPos[e]*a;e>0&&(s=t.rowPos[e-1]*a);let u=t.offsetY*t.calculative.canvas.store.data.scale;return e===0&&t.hasHeader&&(u=0),{x:t.calculative.worldRect.x+i,y:t.calculative.worldRect.y+s-u,ex:t.calculative.worldRect.x+o,ey:t.calculative.worldRect.y+c-u,width:o-i,height:c-s}}function tke(t,e,n){if(!(n&&n.length))return;const r=t.calculative.worldRect.width/t.tableWidth,a=t.calculative.worldRect.height/t.tableHeight;let i=1,o=1;t.initWorldRect&&(t.calculative.worldRect.width!==t.initWorldRect.width&&(i=t.calculative.worldRect.width/t.initWorldRect.width),t.calculative.worldRect.height!==t.initWorldRect.height&&(o=t.calculative.worldRect.height/t.initWorldRect.height));let s=0,c=0,u=0;const d=t.calculative.canvas.store.data.scale;if(n.length>1){for(const f of n)c+f.width*r+20*d*r<e.width?(f.x=e.x+c+10*d*r,f.y=e.y+u+10*d*a,c+=(f.width+10*d)*r,s=Math.max(s,u+(f.height+10*d)*a)):(c=0,u=s,f.x=e.x+c+10*d*r,f.y=e.y+u+10*d*a,s+=(f.height+10*d)*a);if(s+20*d*a<e.height){const f=(e.height-s-10*d*a)/2;for(const h of n)h.y+=f}}else n[0].x=e.x+(e.width-n[0].width)/2,n[0].y=e.y+(e.height-n[0].height)/2;n.forEach(f=>{f.width=f.width*i,f.height=f.height*o})}function nke(t){if(t.calculative.isUpdateData){delete t.calculative.isUpdateData;let e=Te(t.children);t.children=[],e6(t),e&&e.forEach(n=>{t.calculative.canvas.delForce(t.calculative.canvas.findOne(n))}),t.calculative.texts=void 0}}function rke(t,e){if(t.calculative.isUpdateData=!1,t.swiper!==void 0&&(t.swiper?rw(t):nw(t)),e.styles&&(t.initWorldRect=void 0),e.table||e.col==null&&e.row==null){if(e.dataY){const r=t.replaceMode;let a=[];return r?r===ew.Replace?(a=t.data,e.dataX&&e.dataX.forEach((i,o)=>{a[i]=e.dataY[o]})):r===ew.ReplaceAll&&(e.dataX?a[0]=e.dataX:a[0]=t.data[0],a=a.concat(e.dataY)):a=t.data.concat(e.dataY),delete e.dataX,delete e.dataY,t.calculative.isUpdateData=!0,Object.assign(e,{data:a})}(e.data||e.styles||e.maxNum||e.rowHeight||e.colWidth)&&(t.calculative.isUpdateData=!0,t.initWorldRect=null);for(let r of Object.keys(e))r.includes("data.")&&(t.calculative.isUpdateData=!0);return e}let n=t.data[e.row];return n&&(n[e.col]instanceof Object||(n[e.col]=e.value),r6(t,e.row,e.col,e.value),t.calculative.canvas.render(),delete e.col,delete e.row),e}function ake(t,e){if(!t.locked&&!t.calculative.canvas.store.data.locked||!t.maxNum)return;let n=0;e.deltaY>0?n=4:n=-4,tw(t,n)}function tw(t,e){var n;t.offsetY||(t.offsetY=0),t.offsetY+=e,t.offsetY>t.calculative.maxOffsetY&&(t.offsetY=t.calculative.maxOffsetY),t.offsetY<0&&(t.offsetY=0),(n=t.children)==null||n.forEach(r=>{const a=t.calculative.canvas.store.pens[r];ike(t,a)}),t.calculative.canvas.render()}function ike(t,e){if(!e)return;e.oldY||(e.oldY=e.y);const{y:n,height:r}=e.calculative.worldRect,{y:a,height:i}=t.calculative.worldRect,o=t.calculative.canvas.store.data.scale;t.calculative.worldRect.height/t.tableHeight;const s=t.rowHeight;e.y=e.oldY-t.offsetY*o/t.calculative.worldRect.height;const c=s*(t.initScale||1)/t.tableHeight*t.maxNum;if(t.calculative.canvas.updatePenRect(e),t.hasHeader)if(e.y<t.rowPos[0]/t.tableHeight){if(e.calculative.visible=!1,e.visible=!1,e.y<t.rowPos[0]/t.tableHeight/2){e.oldY+=c;let u=e.row+t.maxNum;if(!t.data[u])return;let d=Te(t.data[u][e.col]);d.background&&(d.activeBackground=d.background,d.hoverBackground=d.background),d.color&&(d.hoverColor=d.color,d.activeColor=d.color),d.textColor&&(d.activeTextColor=d.textColor,d.hoverTextColor=d.textColor),Object.assign(e,d,{row:u}),Object.assign(e.calculative,d,{row:u})}}else if(e.y+e.height>1){if(e.calculative.visible=!1,e.visible=!1,e.y+e.height/2>1){e.oldY-=c;let u=e.row-t.maxNum;if(!t.data[u])return;let d=Te(t.data[u][e.col]);d.background&&(d.activeBackground=d.background,d.hoverBackground=d.background),d.color&&(d.hoverColor=d.color,d.activeColor=d.color),d.textColor&&(d.activeTextColor=d.textColor,d.hoverTextColor=d.textColor),Object.assign(e,d,{row:u}),Object.assign(e.calculative,d,{row:u})}}else e.visible=!0,e.calculative.visible=!0;else if(e.y<0){if(e.calculative.visible=!1,e.visible=!1,e.y<-s/t.tableHeight/2){e.oldY+=c;let u=e.row+t.maxNum;if(!t.data[u])return;let d=Te(t.data[u][e.col]);d.background&&(d.activeBackground=d.background,d.hoverBackground=d.background),d.color&&(d.hoverColor=d.color,d.activeColor=d.color),d.textColor&&(d.activeTextColor=d.textColor,d.hoverTextColor=d.textColor),Object.assign(e,d,{row:u}),Object.assign(e.calculative,d,{row:u})}}else if(e.y+e.height>1){if(e.calculative.visible=!1,e.visible=!1,e.y+e.height/2>1){e.oldY-=c;let u=e.row-t.maxNum;if(!t.data[u])return;let d=Te(t.data[u][e.col]);d.background&&(d.activeBackground=d.background,d.hoverBackground=d.background),d.color&&(d.hoverColor=d.color,d.activeColor=d.color),d.textColor&&(d.activeTextColor=d.textColor,d.hoverTextColor=d.textColor),Object.assign(e,d,{row:u}),Object.assign(e.calculative,d,{row:u})}}else e.calculative.visible=!0,e.visible=!0}function oke(t){nw(t)}function nw(t){t.interval&&(globalThis.clearInterval(t.interval),t.interval=null)}function rw(t){if(t.maxNum&&t.swiper){if(t.interval)return;t.interval=globalThis.setInterval(()=>{t.offsetY>=t.calculative.maxOffsetY?(t.offsetY=0,lke(t)):t.offsetY%t.rowHeight?tw(t,1):(t.calculative.stap||(t.calculative.stap=0),t.calculative.stap+=1,t.calculative.stap==12&&(t.calculative.stap=0,tw(t,1)))},50)}}function lke(t){var e;(e=t.children)==null||e.forEach(n=>{const r=t.rowHeight,a=t.calculative.canvas.store.pens[n];if(!a)return;const i=r*(t.initScale||1)/t.tableHeight*t.maxNum;a.oldY-=i;const o=a.row-t.maxNum;if(!t.data[o])return;let s=Te(t.data[o][a.col]);s.background&&(s.activeBackground=s.background,s.hoverBackground=s.background),s.color&&(s.hoverColor=s.color,s.activeColor=s.color),s.textColor&&(s.activeTextColor=s.textColor,s.hoverTextColor=s.textColor),a.calculative.visible=!0,a.visible=!0,Object.assign(a,s,{row:o}),Object.assign(a.calculative,s,{row:o})}),t.calculative.canvas.render()}function ske(t){nw(t)}function cke(t,e){e.onClick||(e.onClick=uke);let n=e.calculative.worldRect.x,r=e.calculative.worldRect.y,a=e.calculative.worldRect.width,i=e.calculative.worldRect.height;a<i*1.5&&(a=1.5*i),t.beginPath(),t.arc(n+i/2,r+i/2,i/2,Math.PI/2,Math.PI*3/2),t.lineTo(n+a-i/2,r),t.arc(n+a-i/2,r+i/2,i/2,-Math.PI/2,Math.PI/2),t.lineTo(n+i/2,r+i),e.checked?(t.fillStyle=e.onColor,(e.disabled||e.disable)&&(t.fillStyle=e.disableOnColor||ur(.6,e.onColor)),e.lineWidth&&(t.strokeStyle=e.onStrokeColor,t.stroke()),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ffffff",t.moveTo(n+i*2,r+i/2),t.arc(n+a-i/2,r+i/2,i/2>2?i/2-2:1,0,Math.PI*2),t.fill()):(t.fillStyle=e.offColor,(e.disabled||e.disable)&&(t.fillStyle=e.disableOffColor||ur(.6,e.offColor)),e.lineWidth&&(t.strokeStyle=e.offStrokeColor,t.stroke()),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ffffff",t.moveTo(n+i,r+i/2),t.arc(n+i/2,r+i/2,i/2>2?i/2-2:1,0,Math.PI*2),t.fill()),t.closePath()}function uke(t){t.disabled||t.disable||(t.checked=!t.checked,t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function dke(t,e){e.onAdd||(e.onAdd=Nf,e.onResize=Nf,e.onMove=Nf,e.onMouseMove=fke,e.onMouseDown=i6,e.onValue=hke,e.onBeforeValue=vke),e.calculative.barRect||Nf(e),e.calculative.canvas.store.data;const n=e.calculative.canvas.store.options;let r=e.background;e.disabled&&(r=e.disabledBackground||ur(.6,r)),t.fillStyle=r,t.beginPath();let a=e.calculative.worldRect.x+e.calculative.barRect.x,i=e.calculative.worldRect.y+e.calculative.barRect.y,o=e.calculative.barRect.width,s=e.calculative.barRect.height,c=s/2;t.moveTo(a+c,i),t.arcTo(a+o,i,a+o,i+s,c),t.arcTo(a+o,i+s,a,i+s,c),t.arcTo(a,i+s,e.x,e.y,c),t.arcTo(a,i,a+o,i,c),t.fill();let u=e.activeColor||n.activeColor;e.disabled&&(u=e.disabledColor||ur(.6,u)),t.fillStyle=u,t.beginPath(),o=e.calculative.ballRect.x,t.moveTo(a+c,i),t.arcTo(a+o,i,a+o,i+s,c),t.arcTo(a+o,i+s,a,i+s,c),t.arcTo(a,i+s,e.x,e.y,c),t.arcTo(a,i,a+o,i,c),t.fill(),t.fillStyle=e.btnBackground||"#fff",t.strokeStyle=u,t.lineWidth=2,t.beginPath(),a=e.calculative.worldRect.x+e.calculative.ballRect.x,i=e.calculative.worldRect.y+e.calculative.ballRect.y+e.calculative.ballRect.height/2,t.lineWidth=e.calculative.ballRect.width/10,t.arc(a,i,e.calculative.ballRect.width/2,0,Math.PI*2),t.fill(),t.stroke()}function Nf(t){if(t._textWidth||(t._textWidth=t.textWidth||50,t._fontSize=t.fontSize||12),t.textWidth=t.calculative.worldRect.width,t.calculative.textWidth=t.textWidth,t.unit||(t.unit="%"),t.sliderWidth||(t.sliderWidth=t.width),t.sliderHeight||(t.sliderHeight=t.height),!t.calculative.worldRect)return;const e=t.calculative.worldRect.width/t.sliderWidth,n=t.calculative.worldRect.height/t.sliderHeight,r=Math.min(e,n);t.fontSize=t._fontSize*r;const a=t.calculative.worldRect.width-t._textWidth*r;t.textLeft=a+10*r,t.calculative.textLeft=t.textLeft,t.calculative.barRect={x:0,y:(t.calculative.worldRect.height-t.barHeight*n)/2,width:a,height:t.barHeight*n},bn(t.calculative.barRect),aw(t)}function aw(t){const e=t.calculative.barRect.height*3.5,n=t.calculative.barRect.width*t.value/100;t.calculative.ballRect={x:n,y:(t.calculative.worldRect.height-e)/2,width:e,height:e},bn(t.calculative.ballRect),t.calculative.text=t.value+t.unit,Bi(t)}function i6(t,e){if(t.disabled)return;const n=e.x-t.calculative.worldRect.x;if(n>t.calculative.barRect.width)return;let r=Math.round(n/t.calculative.barRect.width*100);r<t.min||r>t.max||r<0||r>100||(t.value=r,aw(t),t.calculative.text=t.value+t.unit,Bi(t),t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function fke(t,e){t.calculative.canvas.mouseDown&&i6(t,e)}function hke(t){t.calculative.isUpdateData&&(delete t.calculative.isUpdateData,Nf(t)),aw(t)}function vke(t,e){return t.calculative.isUpdateData=!1,(e.textWidth||e.barHeight)&&(e.textWidth&&(t._textWidth=0),t.calculative.isUpdateData=!0),e}function pke(t,e){e.onMouseDown||(e.onMouseDown=gke),e.options||(e.options=e.data);let n=e.calculative.worldRect.x,r=e.calculative.worldRect.y,a=e.calculative.worldRect.height;e.calculative.worldRect.width;const{fontStyle:i,fontWeight:o,fontSize:s,fontFamily:c,lineHeight:u}=e.calculative;let d=2;t.beginPath(),t.moveTo(n,r),t.arcTo(n+a,r,n+a,r+a,d),t.arcTo(n+a,r+a,n,r+a,d),t.arcTo(n,r+a,n,r,d),t.arcTo(n,r,n+a,r,d),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.checked&&(t.fillStyle=e.background||"#1890ff",t.strokeStyle=e.background||"#1890ff"),(e.isForbidden||e.disabled)&&(t.fillStyle=e.disabledBackground||ur(.6,e.background)||"#ebebeb",t.strokeStyle=e.disabledColor||ur(.6,e.color)||"#d9d9d9"),t.closePath(),t.fill(),t.stroke(),t.save(),e.checked&&(t.beginPath(),t.lineWidth=a/10,t.strokeStyle="#ffffff",t.moveTo(n+102/506*a,r+a/2),t.lineTo(n+220/506*a,r+346/460*a),t.lineTo(n+404/506*a,r+142/460*a),t.stroke()),t.restore(),t.save(),t.fillStyle=e.disabled||e.isForbidden?e.disabledTextColor||ur(.6,e.textColor||e.color)||"#00000040":dl(e,e.calculative.canvas.parent.store)||"#000000d9",t.textAlign="start",t.textBaseline="middle",t.font=ya({fontStyle:i,fontWeight:o,fontFamily:c||e.calculative.canvas.parent.store.options.fontFamily,fontSize:s,lineHeight:u}),t.fillText(e.value+"",n+a+10,r+a/2),t.restore()}function gke(t,e){t.isForbidden||(t.checked=!t.checked,t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function mke(t,e){e.options||(e.options=e.data),e.onAdd||(e.onAdd=yke,e.optionPos||(e.onAdd(e),e.calculative.canvas.parent.active([e])),e.onMouseDown=bke,e.onValue=wke);let n=e.calculative.worldRect.x,r=e.calculative.worldRect.y,a=e.calculative.worldRect.height,i=e.calculative.worldRect.width;if(!e.optionPos)return;const{fontStyle:o,fontWeight:s,fontSize:c,fontFamily:u,lineHeight:d}=e.calculative;if(e.direction=="horizontal")for(let f=0;f<e.optionPos.length;f++){const h=e.optionPos[f]*i/e.checkboxWidth,v=e.options[f].isForbidden||e.disabled;t.beginPath(),t.arc(n+h+a/2,r+a/2,a/2,0,Math.PI*2),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.options[f].text===e.checked&&(t.strokeStyle=e.options[f].background||e.background||"#1890ff"),v&&(t.fillStyle=e.disabledBackground||ur(.6,e.background)||"#ebebeb",t.strokeStyle=e.disabledColor||ur(.6,e.color)||"#d9d9d9",e.options[f].text===e.checked&&(t.fillStyle="#ffffff00")),t.closePath(),t.fill(),t.stroke(),t.save(),e.options[f].text===e.checked&&(t.beginPath(),t.strokeStyle=e.options[f].background?e.options[f].background+"20":e.background||"#1890ff20",v&&(t.strokeStyle=e.disabledBackground||ur(.6,e.background)||"#ebebeb"),t.arc(n+a/2+h,r+a/2,a/2+1.5,0,Math.PI*2),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle=e.options[f].background||e.background||"#1890ff",v&&(t.fillStyle=e.disabledBackground||ur(.6,e.background)||"#ebebeb"),t.arc(n+a/2+h,r+a/2,a/4,0,Math.PI*2),t.fill(),t.closePath()),t.restore(),t.save(),t.fillStyle=v?e.disabledTextColor||"#00000040":dl(e,e.calculative.canvas.parent.store)||"#000000d9";const p=e.calculative.worldRect.height*14/16;t.textAlign="start",t.textBaseline="middle",t.font=ya({fontStyle:o,fontWeight:s,fontFamily:u||e.calculative.canvas.parent.store.options.fontFamily,fontSize:p,lineHeight:d}),t.fillText(e.options[f].text,n+a+h+10/e.checkboxWidth*i,r+a/2),t.restore()}else if(e.direction=="vertical"){const f=e.optionHeight*a/e.checkboxHeight;for(let h=0;h<e.optionPos.length;h++){const v=e.optionPos[h]*a/e.checkboxHeight,p=e.options[h].isForbidden;t.beginPath(),t.arc(n+f/2,r+f/2+v,f/2,0,Math.PI*2),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.options[h].text===e.checked&&(t.strokeStyle=e.options[h].background||"#1890ff"),p&&(t.fillStyle="#ebebeb",t.strokeStyle="#d9d9d9"),t.closePath(),t.fill(),t.stroke(),t.save(),!p&&e.options[h].text===e.checked&&(t.beginPath(),t.strokeStyle=e.options[h].background?e.options[h].background+"20":"#1890ff20",t.arc(n+f/2,r+f/2+v,f/2+1.5,0,Math.PI*2),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle=e.options[h].background||"#1890ff",t.arc(n+f/2,r+f/2+v,f/4,0,Math.PI*2),t.fill(),t.closePath()),t.restore(),t.save(),t.fillStyle=p?"#00000040":dl(e,e.calculative.canvas.parent.store)||"#000000d9";const g=14*e.calculative.worldRect.height/e.checkboxHeight;t.textAlign="start",t.textBaseline="middle",t.font=ya({fontStyle:o,fontWeight:s,fontFamily:u||e.calculative.canvas.parent.store.options.fontFamily,fontSize:g,lineHeight:d}),t.fillText(e.options[h].text,n+f+10,r+f/2+v),t.restore()}}}function yke(t){Z8(t)}function bke(t,e){if(t.direction=="horizontal")for(let n=0;n<t.optionPos.length;n++)!t.options[n].isForbidden&&e.x>t.calculative.worldRect.x+t.optionPos[n]*t.calculative.worldRect.width/t.checkboxWidth&&e.x<t.calculative.worldRect.x+(t.optionPos[n]+t.height)/t.checkboxWidth*t.calculative.worldRect.width+Q8(t.options[n].text,t)+10/t.checkboxWidth*t.calculative.worldRect.width&&(t.checked=t.options[n].text,t.calculative.canvas.store.emitter.emit("valueUpdate",t));else if(t.direction=="vertical"){const n=t.calculative.worldRect.height/t.checkboxHeight;for(let r=0;r<t.optionPos.length;r++)!t.options[r].isForbidden&&e.y>t.calculative.worldRect.y+t.optionPos[r]*n&&e.y<t.calculative.worldRect.y+(t.optionPos[r]+t.optionHeight)*n&&(t.checked=t.options[r].text,t.calculative.canvas.store.emitter.emit("valueUpdate",t))}t.calculative.canvas.render()}function wke(t){Z8(t)}function o6(){return{radio:mke,switch:cke,slider:dke,checkbox:pke,table:V8,table2:V8}}const xke=15;function Ss(t,e=xke){let n=""+t;return n.indexOf(".")>=0&&(n=Number.parseFloat(n).toFixed(e)),Number.parseFloat(n)}function iw(t){return typeof t=="number"&&Number.isFinite(t)}function Cke(t){t={max:null,min:null,splitNumber:4,symmetrical:!1,deviation:!1,preferZero:!1,...t};const e=[10,15,20,25,30,40,50,60,70,80,90,100,150];let{max:n,min:r,splitNumber:a,symmetrical:i,deviation:o,preferZero:s}=t;if(!iw(n)||!iw(r)||n<r)return{splitNumber:a};if(n===r&&n===0)return{max:Ss(e[0]*a),min:r,interval:e[0],splitNumber:a};n===r&&(s=!0),(!iw(a)||a<=0)&&(a=4),s&&n*r>0&&(n<0?n=0:r=0);const c=(n-r)/a;let u=Math.floor(Math.log10(c)-1);u=Math.pow(10,u);const d=c/u;let f=e[0]*u,h=-1,v;for(v=0;v<e.length;v++)if(e[v]>d){f=e[v]*u;break}let p=n,g=r;function m(b){if(p=parseInt(""+(n/b+1))*b,g=parseInt(""+(r/b-1))*b,n===0&&(p=0),r===0&&(g=0),i&&p*g<0){const w=Math.max(Math.abs(p),Math.abs(g));p=w,g=-w}}if(m(f),o)return{max:Ss(p),min:Ss(g),interval:Ss(f),splitNumber:Math.round((p-g)/f)};if(!i||p*g>0){let b;e:do{if(b=Math.round((p-g)/f),(v-h)*(b-a)<0){for(;b<a;)if(g-r<=p-n&&g!==0||p===0?g-=f:p+=f,b++,b===a)break e}if(v>=e.length-1||v<=0||b===a)break;h=v,b>a?f=e[++v]*u:f=e[--v]*u,m(f)}while(b!==a)}p=Ss(p),g=Ss(g);const y=Ss((p-g)/a);return{max:p,min:g,interval:y,splitNumber:a}}function l6(t,e){var m,y,b,w,x,C,S,_,O,N,B,T,k,E,I,A,M,$,U,F,j,W,H,J,Y,D,q,z;const n=e.calculative.worldRect.x,r=e.calculative.worldRect.y,a=e.calculative.worldRect.width,i=e.calculative.worldRect.height;let o=e.calculative.canvas.store.data.scale,s=[];if(e.echarts)for(let K=0;K<e.echarts.option.series.length;K++)s.push(e.echarts.option.series[K].data);else s=e.data;let c=[];for(let K=0;K<s.length;K++)c=c.concat(s[K]);let u={max:Math.max.apply(null,c),min:Math.min.apply(null,c),splitNumber:5},d=Cke(u),f=e.echarts?e.echarts.option.xAxis.data.length:e.xAxisData.length;t.beginPath(),t.strokeStyle="#BFBFBF",t.lineWidth=6*o,t.lineCap="butt";let h=(a-1*(f+1))/f;t.setLineDash([1,h]),t.moveTo(n,r+i+3*o),t.lineTo(n+a,r+i+3*o),t.stroke(),t.closePath(),t.beginPath(),t.lineWidth=1*o,t.setLineDash([]),t.moveTo(n,r+i),t.lineTo(n+a,r+i),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="#BFBFBF",t.strokeStyle="#E9E9E9",t.setLineDash([2,2]);let v={fontStyle:((y=(m=e.yAxis)==null?void 0:m.axisLabel)==null?void 0:y.fontStyle)||e.fontStyle,textDecoration:(w=(b=e.yAxis)==null?void 0:b.axisLabel)==null?void 0:w.textDecoration,fontWeight:((C=(x=e.yAxis)==null?void 0:x.axisLabel)==null?void 0:C.fontWeight)||e.fontWeight,fontFamily:((_=(S=e.yAxis)==null?void 0:S.axisLabel)==null?void 0:_.fontFamily)||e.fontFamily,fontSize:((N=(O=e.yAxis)==null?void 0:O.axisLabel)==null?void 0:N.fontSize)||e.fontSize,lineHeight:((T=(B=e.yAxis)==null?void 0:B.axisLabel)==null?void 0:T.lineHeight)||e.lineHeight};t.fillStyle=((E=(k=e.yAxis)==null?void 0:k.axisLabel)==null?void 0:E.fontColor)||e.color;for(let K=0;K<d.splitNumber+1;K++){let P=K*i/d.splitNumber;t.textAlign="right",t.textBaseline="middle",t.font=ya(v),t.fillText(d.max-K*d.interval+"",n-10*o,r+P),t.fill(),K<d.splitNumber&&(t.beginPath(),t.moveTo(n,r+P),t.lineTo(n+a,r+P),t.stroke())}t.closePath(),t.beginPath(),t.strokeStyle="#BFBFBF";let p=e.echarts?e.echarts.option.xAxis.data:e.xAxisData,g=0;for(let K=0;K<p.length;K++){g=n+(1+h/2)+(h+1)*K,t.textAlign="center",t.textBaseline="top";let P={fontStyle:((A=(I=e.xAxis)==null?void 0:I.axisLabel)==null?void 0:A.fontStyle)||e.calculative.fontStyle,textDecoration:($=(M=e.xAxis)==null?void 0:M.axisLabel)==null?void 0:$.textDecoration,fontWeight:((F=(U=e.xAxis)==null?void 0:U.axisLabel)==null?void 0:F.fontWeight)||e.calculative.fontWeight,fontFamily:((W=(j=e.xAxis)==null?void 0:j.axisLabel)==null?void 0:W.fontFamily)||e.calculative.fontFamily,fontSize:((J=(H=e.xAxis)==null?void 0:H.axisLabel)==null?void 0:J.fontSize)||e.calculative.fontSize,lineHeight:((D=(Y=e.xAxis)==null?void 0:Y.axisLabel)==null?void 0:D.lineHeight)||e.calculative.lineHeight};t.font=ya(P),t.fillStyle=((z=(q=e.xAxis)==null?void 0:q.axisLabel)==null?void 0:z.fontColor)||e.calculative.color,t.fillText(p[K],g,r+i+10*o),t.fill()}return t.closePath(),t.setLineDash([]),{dash:h,normalizedOption:d}}function _ke(t,e){if(!isNaN(t))return Math.round(Number(t)*1e3)/1e3}var Df=(t=>(t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.ReplaceAll=2]="ReplaceAll",t))(Df||{});function Ske(t,e){e.onBeforeValue||(e.onBeforeValue=s6);const n=e.calculative.worldRect.x,r=e.calculative.worldRect.y;e.calculative.worldRect.width;const a=e.calculative.worldRect.height;let i=e.calculative.canvas.store.data.scale,o=[];e.echarts&&!e.echarts.option.color&&(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]);let s=l6(t,e),c=s.dash,u=s.normalizedOption;const d=!!(e.echarts?e.echarts.option.series[0].smooth:e.smooth);let f=[];if(e.echarts)for(let h=0;h<e.echarts.option.series.length;h++)o.push(e.echarts.option.series[h].data);else o=e.data;for(let h=0;h<o.length;h++){t.beginPath();let v=o[h];t.strokeStyle=e.echarts?e.echarts.option.color[h]:e.chartsColor[h],t.fillStyle=e.echarts?e.echarts.option.color[h]:e.chartsColor[h];let p=n+(1+c/2),g=r+a-(v[0]-u.min)/(u.max-u.min)*a;if(t.moveTo(p,g),f.push({x:p,y:g}),d)if(v.length<=2)for(let m=1;m<v.length;m++)p=n+(1+c/2)+(c+1)*m,g=r+a-(v[m]-u.min)/(u.max-u.min)*a,t.lineTo(p,g),f.push({x:p,y:g});else{let m,y,b,w;v.forEach((x,C)=>{p=n+(1+c/2)+(c+1)*C,g=r+a-(v[C]-u.min)/(u.max-u.min)*a;let S=n+(1+c/2)+(c+1)*(C+1),_=r+a-(v[C+1]-u.min)/(u.max-u.min)*a,O=n+(1+c/2)+(c+1)*(C-1),N=r+a-(v[C-1]-u.min)/(u.max-u.min)*a,B=n+(1+c/2)+(c+1)*(C+2),T=r+a-(v[C+2]-u.min)/(u.max-u.min)*a;C===0?(O=n+(1+c/2)+(c+1)*C,N=r+a-(v[C]-u.min)/(u.max-u.min)*a):C===v.length-2&&(B=n+(1+c/2)+(c+1)*(C+1),T=r+a-(v[C+1]-u.min)/(u.max-u.min)*a),f.push({x:p,y:g}),m=p+(S-O)/4,y=g+(_-N)/4,b=S-(B-p)/4,w=_-(T-g)/4,t.bezierCurveTo(m,y,b,w,S,_)})}else for(let m=1;m<v.length;m++)p=n+(1+c/2)+(c+1)*m,g=r+a-(v[m]-u.min)/(u.max-u.min)*a,t.lineTo(p,g),f.push({x:p,y:g});t.stroke(),t.closePath(),t.save(),f.forEach((m,y)=>{t.beginPath(),t.strokeStyle="#fff",t.lineWidth=2*i,t.arc(m.x,m.y,4*i,0,Math.PI*2),t.stroke(),t.fill(),t.closePath()}),t.restore(),f=[]}}function s6(t,e){if(e.xAxisData||e.data||!e.dataX&&!e.dataY)return e;const n=t.xAxisData,r=t.data,a=t.replaceMode;let i=[],o=[];return a?a===Df.Replace?(e.dataX.forEach((s,c)=>{let u=n.indexOf(s);r.forEach((d,f)=>{d[u]=e.dataY[f][c]})}),i=n,o=r):a===Df.ReplaceAll&&(i=e.dataX,o=e.dataY):(i=[...n,...e.dataX],r.forEach((s,c)=>{let u=[...s,...e.dataY[c]];o.push(u)})),delete e.dataX,delete e.dataY,Object.assign(e,{xAxisData:i,data:o})}function Tke(t,e){var d,f;e.onBeforeValue||(e.onBeforeValue=kke);let n=e.calculative.canvas.store.data.scale;const r=e.calculative.worldRect.x,a=e.calculative.worldRect.y,i=e.calculative.worldRect.width,o=e.calculative.worldRect.height,s=!!e.echarts;e.echarts?(e.echarts.option.color||(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]),e.chartsColor=e.echarts.option.color):e.chartsColor||(e.chartsColor=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]);const c=s?e.echarts.option.series:e.data;let u=0;for(let h=0;h<c.length;h++){let v=c[h],p=i/2;o<i&&(p=o/2);const g=r+i/2,m=a+o/2;let y=0;s?y=v.data.reduce((_,O)=>_+O.value,0):y=v.reduce((_,O)=>_+O.value,0);const b=p*parseFloat(s?v.radius[0]:e.chartsRadius[h][0])/100,w=p*parseFloat(s?v.radius[1]:e.chartsRadius[h][1])/100;if(b>w)return;let x=0,C=0;t.strokeStyle=s&&((d=v.itemStyle)==null?void 0:d.borderColor)||"#fff",t.lineWidth=(s&&((f=v.itemStyle)==null?void 0:f.borderWidth)||2)*n;const S=s?v.data:v;S.forEach((_,O)=>{var A,M,$,U,F,j,W,H,J,Y;C+=Math.PI*2*_.value/y,t.beginPath();let N=u+O;N>=e.chartsColor.length&&(N=N%e.chartsColor.length),t.fillStyle=s?e.echarts.option.color[N]:e.chartsColor[N],t.moveTo(g+b*Math.sin(C),m-b*Math.cos(C)),t.arc(g,m,b,-Math.PI/2+C,-Math.PI/2+x,!0),t.lineTo(g+w*Math.sin(x),m-w*Math.cos(x)),t.arc(g,m,w,-Math.PI/2+x,-Math.PI/2+C),t.lineTo(g+b*Math.sin(C),m-b*Math.cos(C)),t.stroke(),t.fill(),t.closePath();let B=(x+C)/2,T=g+(w+10*n)*Math.sin(B),k=m-(w+10*n)*Math.cos(B),E=t.fillStyle;v.label||(v.label={position:"outside",show:!0}),s&&["inner","inside"].includes(v.label.position)?(t.fillStyle="#ffffff",T=g+(w-b)/2*Math.sin(B),k=m-(w-b)/2*Math.cos(B)):s&&v.label.position=="outside",v.labelLine||(v.labelLine={show:!0}),(s&&v.labelLine.show!==!1||!s)&&(t.beginPath(),t.strokeStyle=s?e.echarts.option.color[u+O]:e.chartsColor[u+O],t.moveTo(g+w*Math.sin(B),m-w*Math.cos(B)),t.lineTo(T,k));let I={fontStyle:((A=e.tickLabel)==null?void 0:A.fontStyle)||e.calculative.fontStyle,fontWeight:((M=e.tickLabel)==null?void 0:M.fontWeight)||e.calculative.fontWeight,fontFamily:(($=e.tickLabel)==null?void 0:$.fontFamily)||e.calculative.fontFamily,lineHeight:((U=e.tickLabel)==null?void 0:U.lineHeight)||e.calculative.lineHeight,fontSize:(((F=e.tickLabel)==null?void 0:F.fontSize)||e.calculative.fontSize)*n};t.font=ya(I),t.textBaseline="middle",t.textAlign="center",B>Math.PI?((s&&v.label.position==="outside"||!s)&&(t.textAlign="end"),(s&&v.labelLine.show!==!1||!s&&(((W=(j=e.tickLabel)==null?void 0:j.labelLine)==null?void 0:W.show)??!0))&&t.lineTo(T-5*n,k),(s&&v.label.show!==!1||!s&&(((H=e.tickLabel)==null?void 0:H.show)??!0))&&t.fillText(_.name,T-5*n,k)):((s&&v.label.position==="outside"||!s)&&(t.textAlign="start"),(s&&v.labelLine.show!==!1||!s)&&t.lineTo(T+5*n,k),(s&&v.label.show!==!1||!s&&(((J=e.tickLabel)==null?void 0:J.show)??!0))&&t.fillText(_.name,T+5*n,k)),t.stroke(),t.closePath(),t.fillStyle=E,t.strokeStyle=s&&((Y=v.itemStyle)==null?void 0:Y.borderColor)||"#fff",x=C}),u+=S.length}}function kke(t,e){if(e.data||!e.dataX&&!e.dataY)return e;const n=t.data,r=t.replaceMode;let a=[];return r?r===Df.Replace?(e.dataY.forEach((i,o)=>{i.forEach((s,c)=>{let u=n[o].filter(d=>d.name===s.name);u.length>0&&(u[0].value=s.value)})}),a=n):r===Df.ReplaceAll&&(a=e.dataY):n.forEach((i,o)=>{let s=[...i,...e.dataY[o]];a.push(s)}),delete e.dataX,delete e.dataY,Object.assign(e,{data:a})}function Oke(t,e){e.onBeforeValue||(e.onBeforeValue=s6);let n=e.calculative.canvas.store.data.scale;const r=e.calculative.worldRect.x,a=e.calculative.worldRect.y;e.calculative.worldRect.width;const i=e.calculative.worldRect.height;let o=[];if(e.echarts&&!e.echarts.option.color&&(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]),e.echarts)for(let f=0;f<e.echarts.option.series.length;f++)o.push(e.echarts.option.series[f].data);else o=e.data;let s=l6(t,e),c=s.dash,u=s.normalizedOption,d=c*4/5/o.length;for(let f=0;f<o.length;f++){t.beginPath();let h=o[f];t.fillStyle=e.echarts?e.echarts.option.color[f]:e.chartsColor[f],t.strokeStyle="#ffffff",t.lineWidth=1*n;let v=0,p=0,g=0;for(let m=0;m<h.length;m++)v=r+(1+.1*c)+(c+1)*m+d*f,g=(h[m]-u.min)/(u.max-u.min)*i,p=a+i-g,t.rect(v,p,d-1,g-1),t.stroke(),t.fill();t.closePath()}}function Eke(t,e){var U,F,j,W,H,J,Y,D,q,z,K,P,R,X;e.onAdd||(e.onAdd=Pke,e.onDestroy=Ike,e.onClick=Ake,e.clockInterval&&(e.onDestroy(e),e.onAdd(e)));const n=e.calculative.worldRect.x,r=e.calculative.worldRect.y,a=e.calculative.worldRect.width,i=e.calculative.worldRect.height;let o=e.calculative.canvas.store.data.scale,s={startAngle:225,endAngle:-45,min:0,max:100,splitNumber:10};if(e.echarts&&e.echarts.option){let ee=e.echarts.option.series[0];e.startAngle=ee.startAngle||s.startAngle,e.endAngle=ee.endAngle||s.endAngle,e.min=ee.min||s.min,e.max=ee.max||s.max,e.axisLine=ee.axisLine.lineStyle.color,e.unit=ee.detail.formatter.replace("{value}",""),e.value=ee.data[0].value,e.splitNumber=ee.splitNumber||s.splitNumber}e={...s,...e};let c=a>i?i/2*9/10:a/2*9/10,u=n+a/2,d=r+i/2,f=e.echarts?e.echarts.option.series[0].data[0].value:e.value,h,v=e.startAngle-e.endAngle,p=e.background||"#E6EBF8";t.strokeStyle=p;let g=c/10;t.lineWidth=g,t.beginPath(),t.lineCap="round",t.arc(u,d,c,-e.startAngle/180*Math.PI,-e.endAngle/180*Math.PI),t.stroke(),t.closePath();let m=0;if(e.axisLine&&!e.isClock)for(let ee=e.axisLine.length-1;ee>=0;ee--)e.axisLine[ee][0]*(e.max-e.min)<f?m=e.axisLine[ee][0]:(m=(f-e.min)/(e.max-e.min),h=e.axisLine[ee][1]),t.beginPath(),t.strokeStyle=e.axisLine[ee][1],t.arc(u,d,c,-e.startAngle/180*Math.PI,(-e.startAngle+m*v)/180*Math.PI),t.stroke(),t.closePath();t.lineCap="butt";let y=2*o,b=c-g;b<0&&(b=0);let w=v/180*Math.PI*b,x=(w-y*e.splitNumber)/e.splitNumber,C=v/180*Math.PI*y/2/w;t.beginPath(),t.strokeStyle=e.color||"#999999",t.lineWidth=c/20,t.setLineDash([y,x]),t.arc(u,d,b,-e.startAngle/180*Math.PI-C,-e.endAngle/180*Math.PI+C),t.stroke(),t.closePath();let S=1*o,_=c-g;_<0&&(_=0);let O=v/180*Math.PI*_,N=(O-S*5*e.splitNumber)/5/e.splitNumber,B=v/180*Math.PI*S/2/O;t.beginPath(),t.strokeStyle=e.color||"#999999",t.lineWidth=c/40,t.setLineDash([S,N]),t.arc(u,d,_,-e.startAngle/180*Math.PI-B,-e.endAngle/180*Math.PI+B),t.stroke(),t.closePath(),t.beginPath();let T=e.max-e.min,k=T/e.splitNumber,E={fontStyle:((U=e.tickLabel)==null?void 0:U.fontStyle)||e.calculative.fontStyle,textDecoration:((F=e.tickLabel)==null?void 0:F.textDecoration)||e.textDecoration,fontWeight:((j=e.tickLabel)==null?void 0:j.fontWeight)||e.calculative.fontWeight,fontFamily:((W=e.tickLabel)==null?void 0:W.fontFamily)||e.calculative.fontFamily,fontSize:(((H=e.tickLabel)==null?void 0:H.fontSize)||e.calculative.fontSize)*o,lineHeight:((J=e.tickLabel)==null?void 0:J.lineHeight)||e.calculative.lineHeight};t.font=ya(E);let I=c-g-c/20;for(let ee=0;ee<=e.splitNumber;ee++){if(Math.abs(e.startAngle)+Math.abs(e.endAngle)===360&&ee==0)continue;let re=e.startAngle-k*ee/T*v,ae=Math.cos(re/180*Math.PI),oe=Math.sin(re/180*Math.PI);t.fillStyle=((Y=e.tickLabel)==null?void 0:Y.color)||"#999999",ae>.02?t.textAlign="end":ae<-.02?t.textAlign="start":t.textAlign="center",oe>.02?t.textBaseline="top":oe<-.02?t.textBaseline="bottom":t.textBaseline="middle",t.fillText(_ke(k*ee+e.min),u+I*ae,d-I*oe),t.fill()}t.closePath();let A=1,M=["value"];if(e.isClock&&(A=3,M=["hourvalue","minutevalue","secondvalue"]),e.isClock)for(let ee=0;ee<A;ee++){let re=(e.startAngle-(e[M[ee]]-e.min)/(e.max-e.min)*v)/180*Math.PI;ee>0&&(re=(e.startAngle-(e[M[ee]]-e.min)/(e.max*5-e.min)*v)/180*Math.PI);let ae=4/5*c;M[ee]==="hourvalue"&&(ae=3/5*c),M[ee]==="minutevalue"&&(ae=3.5/5*c);let oe=c*1/40;t.beginPath(),t.setLineDash([]),t.lineWidth=c/(ee+1)/20,t.strokeStyle=e.color||"#999999",t.moveTo(u-oe*3*Math.cos(re),d+oe*3*Math.sin(re)),t.lineTo(u+ae*Math.cos(re),d-ae*Math.sin(re)),t.stroke()}else{let ee=(e.startAngle-(f-e.min)/(e.max-e.min)*v)/180*Math.PI,re=4/5*c,ae=c*1/40;t.beginPath(),t.setLineDash([]),t.lineWidth=2,t.fillStyle=h,t.moveTo(u-ae*3*Math.cos(ee),d+ae*3*Math.sin(ee)),t.lineTo(u+ae*Math.cos(ee-Math.PI/2),d-ae*Math.sin(ee-Math.PI/2)),t.lineTo(u+re*Math.cos(ee),d-re*Math.sin(ee)),t.lineTo(u+ae*Math.cos(ee+Math.PI/2),d-ae*Math.sin(ee+Math.PI/2)),t.lineTo(u-ae*3*Math.cos(ee),d+ae*3*Math.sin(ee)),t.fill()}t.beginPath(),t.textAlign="center",t.textBaseline="middle";let $={fontStyle:((D=e.titleLabel)==null?void 0:D.fontStyle)||e.calculative.fontStyle,textDecoration:((q=e.titleLabel)==null?void 0:q.textDecoration)||e.textDecoration,fontWeight:((z=e.titleLabel)==null?void 0:z.fontWeight)||e.calculative.fontWeight,fontFamily:((K=e.titleLabel)==null?void 0:K.fontFamily)||e.calculative.fontFamily,fontSize:(((P=e.titleLabel)==null?void 0:P.fontSize)||e.calculative.fontSize)*o,lineHeight:((R=e.titleLabel)==null?void 0:R.lineHeight)||e.calculative.lineHeight};t.font=ya($),t.fillStyle=((X=e.titleLabel)==null?void 0:X.color)||h,e.isClock?t.fillText(("0"+parseInt(e.hourvalue)).slice(-2)+":"+("0"+parseInt(e.minutevalue)).slice(-2)+":"+("0"+parseInt(e.secondvalue)).slice(-2),u,d+c/2):t.fillText(f+" "+(e.unit||""),u,d+c/2),t.fill(),e.isClock&&(t.beginPath(),t.fillStyle=e.color||"#999999",t.strokeStyle="#ffffff",t.arc(u,d,c/20,0,Math.PI*2),t.stroke(),t.fill(),t.closePath())}function Pke(t){if(t.isClock)t.clockInterval=setInterval(()=>{let e=new Date,n=e.getSeconds(),r=e.getMinutes()+n/60,a=e.getHours()%12+r/60;t.calculative.canvas.parent.setValue({id:t.id,hourvalue:a,minutevalue:r,secondvalue:n},{render:!0,doEvent:!1})},1e3);else{const e=t.value;t.value=0,t.frames=[{duration:2e3,value:e}],t.calculative.canvas.parent.startAnimate(t.id),setTimeout(()=>{t.value=e},1e3)}}function Ike(t){t.clockInterval&&(clearInterval(t.clockInterval),t.clockInterval=void 0)}function Ake(t){t.isClock&&(t.onDestroy(t),t.onAdd(t))}function c6(){return{lineChart:Ske,histogram:Oke,pieChart:Tke,gauge:Eke}}function Nke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/6,c=i/4;if(n.moveTo(r+c*2,a+0),n.lineTo(r+c*2,a+s),n.moveTo(r,a+s+c*2),n.arc(r+c*2,a+s+c*2,c*2,Math.PI*1,Math.PI*2,!1),n.lineTo(r+c*4,a+s*5),n.lineTo(r,a+s*5),n.lineTo(r,a+s+c*2),n.moveTo(r+c,a+s*5),n.lineTo(r+c,a+s*6),n.moveTo(r+c*2,a+s*5),n.lineTo(r+c*2,a+s*6),n.moveTo(r+c*3,a+s*5),n.lineTo(r+c*3,a+s*6),n.closePath(),n instanceof Path2D)return n}function u6(t){const e=[{x:.5,y:0},{x:.25,y:1},{x:.5,y:1},{x:.75,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function Dke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o-i,c=.5*i;if(n.moveTo(r+i/2,a),n.lineTo(r+i/2,a+s),n.moveTo(r+i,a+c+s),n.arc(r+i/2,a+c+s,c,0,Math.PI*2,!1),n.closePath(),n instanceof Path2D)return n}function d6(t){const e=[{x:.5,y:0},{x:.5,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function Rke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/2,c=i/5;if(n.moveTo(r,a+s),n.lineTo(r+c,a+s),n.moveTo(r+c*5,a+s),n.ellipse(r+c*3,a+s,2*c,s,0,0,Math.PI*2),n.closePath(),n instanceof Path2D)return n}function Mke(t){const e=[{x:.6,y:0},{x:1,y:.5},{x:.6,y:1},{x:0,y:.5}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function Lke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/4,c=.5*i;if(n.moveTo(r+c,a),n.lineTo(r+c,a+s),n.moveTo(r,a+s),n.rect(r,a+s,c*2,s*2),n.moveTo(r+c,a+3*s),n.lineTo(r+c,a+4*s),n.closePath(),n instanceof Path2D)return n}function Fke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/8,c=.25*i;if(n.moveTo(r+c*2,a),n.lineTo(r+c*2,a+s*2),n.lineTo(r+c*3,a+s*3),n.lineTo(r+c*3,a+s*5),n.lineTo(r+c*2,a+s*6),n.lineTo(r+c*1,a+s*5),n.lineTo(r+c*1,a+s*3),n.lineTo(r+c*2,a+s*2),n.moveTo(r+c*3,a+s*4),n.lineTo(r+c*4,a+s*4),n.moveTo(r+c*2,a+s*6),n.lineTo(r+c*2,a+s*8),n.closePath(),n instanceof Path2D)return n}function Bke(t){const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function jke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=i/2,c=o/10;if(n.moveTo(r+s,a),n.lineTo(r+s,a+c),n.moveTo(r+s,a+c),n.quadraticCurveTo(r+s*2,a+c,r+s*2,a+c*9),n.moveTo(r+s,a+c),n.quadraticCurveTo(r,a+c,r,a+c*9),n.quadraticCurveTo(r+s,a+c*6,r+s*2,a+c*9),n.moveTo(r+s,a+o*3/4),n.lineTo(r+s,a+o),n.moveTo(r+s*2/5,a+o*201/250),n.lineTo(r+s*2/5,a+o),n.moveTo(r+s*8/5,a+o*201/250),n.lineTo(r+s*8/5,a+o),n.closePath(),n instanceof Path2D)return n}function f6(t){const e=[{x:.5,y:0},{x:.2,y:1},{x:.5,y:1},{x:.8,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function $ke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/6,c=i/4;if(n.moveTo(r+c*2,a+0),n.lineTo(r+c*2,a+s),n.moveTo(r,a+s+c*2),n.arc(r+c*2,a+s+c*2,c*2,Math.PI*1,Math.PI*2,!1),n.lineTo(r+c*4,a+s*5),n.lineTo(r,a+s*5),n.lineTo(r,a+s+c*2),n.moveTo(r,a+s*5-s/3),n.lineTo(r+c*4,a+s*5-s/3),n.moveTo(r+c,a+s*5),n.lineTo(r+c,a+s*6),n.moveTo(r+c*2,a+s*5),n.lineTo(r+c*2,a+s*6),n.moveTo(r+c*3,a+s*5),n.lineTo(r+c*3,a+s*6),n.closePath(),n instanceof Path2D)return n}function Uke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/4,c=.5*i;if(n.moveTo(r+c,a),n.lineTo(r+c,a+s),n.lineTo(r+c*2,a+s*2),n.lineTo(r+c*2,a+s*4),n.lineTo(r,a+s*4),n.lineTo(r,a+s*2),n.lineTo(r+c,a+s),n.closePath(),n instanceof Path2D)return n}function zke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/4,c=i/2;if(n.moveTo(r+c,a),n.lineTo(r+c,a+s),n.lineTo(r+c*2,a+s*4),n.lineTo(r,a+s*4),n.lineTo(r+c,a+s),n.closePath(),n instanceof Path2D)return n}function Hke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect,s=o/3,c=.5*i;if(n.moveTo(r+c,a),n.lineTo(r+c,a+s),n.lineTo(r+i,a+2*s),n.lineTo(r+c,a+o),n.lineTo(r,a+2*s),n.lineTo(r+c,a+s),n.closePath(),n instanceof Path2D)return n}function Wke(t){const e=[{x:.5,y:0},{x:1,y:.6666666666666666},{x:.5,y:1},{x:0,y:.6666666666666666}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function Kke(t,e){const n=e||new Path2D,{x:r,y:a,width:i,height:o}=t.calculative.worldRect;let s=i/2,c=o/10;if(n.moveTo(r+s,a),n.lineTo(r+s,a+c),n.moveTo(r+s,a+c),n.quadraticCurveTo(r+s*2,a+c,r+s*2,a+c*9),n.moveTo(r+s,a+c),n.quadraticCurveTo(r,a+c,r,a+c*9),n.quadraticCurveTo(r+s,a+c*6,r+s*2,a+c*9),n.moveTo(r,a+c*10),n.quadraticCurveTo(r+s,a+c*7,r+s*2,a+c*10),n.moveTo(r+s*2/5,a+o*201/250+c),n.lineTo(r+s*2/5,a+o),n.moveTo(r+s*8/5,a+o*201/250+c),n.lineTo(r+s*8/5,a+o),n.closePath(),n instanceof Path2D)return n}function qke(t){const e=[{x:.5,y:0},{x:.2,y:1},{x:.8,y:1}];t.anchors=e.map(({x:n,y:r},a)=>({id:`${a}`,penId:t.id,x:n,y:r}))}function Gke(t,e){const{x:n,y:r,width:a,height:i}=e.calculative.worldRect,o=a/2,s=i/10;t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+o,r+s),t.moveTo(n+o,r+s),t.quadraticCurveTo(n+o*2,r+s,n+o*2,r+s*9),t.moveTo(n+o,r+s),t.quadraticCurveTo(n,r+s,n,r+s*9),t.quadraticCurveTo(n+o,r+s*6,n+o*2,r+s*9),t.moveTo(n+o,r+i*3/4),t.lineTo(n+o,r+i*9/10),t.moveTo(n+o*2/5,r+i*201/250),t.lineTo(n+o*2/5,r+i*9/10),t.moveTo(n+o*8/5,r+i*201/250),t.lineTo(n+o*8/5,r+i*9/10),t.stroke(),t.closePath(),t.beginPath();const c=o*2>s*10?s:o/5;t.fillStyle="#333333",t.font=c+"px Arial",t.textBaseline="bottom",t.textAlign="center",t.fillText("o",n+o,r+i),t.fillText("m",n+o*2/5,r+i),t.fillText("o",n+o*8/5,r+i),t.closePath()}function h6(){return{andGate:Nke,basicEvent:Dke,conditionalEvent:Rke,event:Lke,forbiddenGate:Fke,orGate:jke,priorityAndGate:$ke,switchEvent:Uke,transferSymbol:zke,unexpandedEvent:Hke,xorGate:Kke}}function v6(){return{votingGate:Gke}}function p6(){return{andGate:u6,orGate:f6,priorityAndGate:u6,votingGate:f6,xorGate:qke,forbiddenGate:Bke,basicEvent:d6,unexpandedEvent:Wke,conditionalEvent:Mke,transferSymbol:d6}}var Ts=(t=>(t[t.File=0]="File",t[t.Pen=1]="Pen",t[t.Pens=2]="Pens",t))(Ts||{});const ks=l.reactive({mode:0,pen:void 0}),bu=()=>({selections:ks,select:e=>{if(!e||e.length<1){ks.mode=0,ks.pen=void 0;return}if(console.log("select pens: ",e),e.length===1){ks.mode=1,ks.pen=e[0];return}ks.mode=2,ks.pens=[...e]}}),Yke=Gn(l.defineComponent({__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0},visible:{type:Boolean,default:!1},isPreview:{type:Boolean,default:!1}},emits:["hide","send"],setup(t,{emit:e}){const n=t,r=l.computed(()=>({left:n.x+"px",top:n.y+"px"})),a=e,{selections:i}=bu(),{saveComponentShow:o}=J1(!0),s=[{label:"锁定",icon:"lock",action:()=>{if(console.log("lock",i),i.pen){const h={id:i.pen.id,locked:2};meta2d.setValue(h,{render:!0})}else i.pens&&i.pens.forEach(h=>{const v={id:h.id,locked:2};meta2d.setValue(v,{render:!0})});a("hide",!1)},show:()=>{if(i.pen)return!i.pen.locked;if(i.pens)return!i.pens.some(h=>h.locked>0)}},{label:"解锁",icon:"lock",action:()=>{if(console.log("unlock",i),i.pen){const h={id:i.pen.id,locked:0};meta2d.setValue(h,{render:!0})}else i.pens&&i.pens.forEach(h=>{const v={id:h.id,locked:0};meta2d.setValue(v,{render:!0})});a("hide",!1)},show:()=>{if(i.pen)return i.pen.locked;if(i.pens)return i.pens.some(h=>h.locked>0)}},{label:"删除",icon:"delete",action:()=>{i.pen?meta2d.delete([i.pen]):i.pens&&meta2d.delete(i.pens),a("hide",!1)}},{label:"组合",icon:"group",action:()=>{i.pens&&meta2d.combine(i.pens),a("hide",!1)},show:()=>i.mode==2},{label:"组合为状态",icon:"group",action:()=>{console.log("group",i),i.pens&&meta2d.combine(i.pens,0),a("hide",!1)},show:()=>i.mode==2},{label:"取消组合",icon:"group",action:()=>{console.log("ungroup",i),meta2d.uncombine(i.pen),a("hide",!1)},show:()=>{var h;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"}},{label:"保存为组件",icon:"save",action:()=>{o(i),a("hide",!1)}},{label:"替换svg",icon:"save",action:()=>{d("svg"),a("hide",!1)},show:()=>{var h;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"}},{label:"标记",icon:"mark",action:()=>{u(!0),a("hide",!1)},show:()=>{var h,v,p,g;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&((v=i.pen)==null?void 0:v.showChild)!=null&&!((g=(p=i.pen)==null?void 0:p.tags)!=null&&g.includes("mark"))}},{label:"取消标记",icon:"mark",action:()=>{u(!1),a("hide",!1)},show:()=>{var h,v,p,g;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&((v=i.pen)==null?void 0:v.showChild)!=null&&((g=(p=i.pen)==null?void 0:p.tags)==null?void 0:g.includes("mark"))}},{label:"替换为标记的图元",icon:"save",action:()=>{d("svgs"),a("hide",!1)},show:()=>{var h,v,p,g;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&((v=i.pen)==null?void 0:v.showChild)!=null&&!((g=(p=i.pen)==null?void 0:p.tags)!=null&&g.includes("mark"))}}],c=[{label:"设置",icon:"group",action:()=>{i.pen&&(a("send",i.pen,"setting"),a("hide",!1))},show:()=>{var h;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&n.isPreview}},{label:"设置故障",icon:"group",action:()=>{if(i.pen){const h={id:i.pen.id,fault:1};meta2d.setValue(h,{render:!0}),a("send",i.pen,"fault"),a("hide",!1)}},show:()=>{var h,v;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&n.isPreview&&((v=i.pen)==null?void 0:v.fault)==0}},{label:"取消故障",icon:"group",action:()=>{if(i.pen){const h={id:i.pen.id,fault:0};meta2d.setValue(h,{render:!0}),a("send",i.pen,"fault"),a("hide",!1)}},show:()=>{var h,v;return i.mode==1&&((h=i.pen)==null?void 0:h.name)=="combine"&&n.isPreview&&((v=i.pen)==null?void 0:v.fault)==1}}],u=h=>{var v,p,g;if(console.log("meta2d",meta2d.data()),h){let m=!1;if(meta2d.data().pens.forEach(y=>{var b;(b=y.tags)!=null&&b.includes("mark")&&(fs.error({title:"只能标记一个组合，请先取消标记"}),m=!0)}),m)return;(p=(v=i.pen)==null?void 0:v.tags)==null||p.push("mark")}else{let m=((g=i.pen)==null?void 0:g.tags)||[];i.pen.tags=m.filter(y=>y!=="mark")}},d=h=>{if(h=="svg"){z8(v=>{let p=T2e(v.data,i.pen,!1);console.log("看看新的长啥样pens=====",p),meta2d.delete([i.pen]),meta2d.addPens(p)});return}if(h=="svgs"){let v=!1;if(meta2d.data().pens.forEach(w=>{var x;(x=w.tags)!=null&&x.includes("mark")&&(v=!0)}),!v){fs.error({title:"请先标记一个组合"});return}let p=i.pen;meta2d.delete([p]);let g=[];meta2d.data().pens.forEach(w=>{var x;if((x=w.tags)!=null&&x.includes("mark")){let C=w,S=f(C,meta2d.data().pens);S.forEach(_=>{C.children.includes(_.id)&&(_.parentId=p==null?void 0:p.id)}),g=[...S]}}),console.log("传入的SVG===== ",g,"以前的图元数据=====",p);const m=g.find(w=>w.name=="combine"&&!w.parentId);let y=fi(m,meta2d.store),b=meta2d.data().paths;meta2d.delete([...y,m]),Object.assign(m,{id:p==null?void 0:p.id,x:p==null?void 0:p.x,y:p==null?void 0:p.y,description:p==null?void 0:p.description,text:p==null?void 0:p.text,withh:p==null?void 0:p.width,height:p==null?void 0:p.height,showChild:p==null?void 0:p.showChild,tags:p==null?void 0:p.tags}),meta2d.store.data.paths=b,meta2d.addPens(g)}};function f(h,v){if(!h||!v)return;const p=[],g=[h];for(;g.length;){const m=g.shift();p.push(m);for(const y of v)y.parentId==m.id&&g.push(y)}return p}return(h,v)=>{const p=l.resolveComponent("t-button"),g=l.resolveComponent("t-list-item"),m=l.resolveComponent("t-list"),y=l.resolveComponent("t-card");return l.withDirectives((l.openBlock(),l.createBlock(y,{bordered:"",hoverShadow:"",class:"context-menu",style:l.normalizeStyle(r.value)},{default:l.withCtx(()=>[l.createVNode(m,null,{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.isPreview?c:s,b=>l.withDirectives((l.openBlock(),l.createBlock(g,null,{default:l.withCtx(()=>[l.createVNode(p,{theme:"default",block:"",variant:"outline",onClick:w=>b.action()},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(b.label),1)]),_:2},1032,["onClick"])]),_:2},1536)),[[l.vShow,b.show?b.show():!0]])),256))]),_:1})]),_:1},8,["style"])),[[l.vShow,t.visible]])}}}),[["__scopeId","data-v-4d2477c1"]]);var yl=(t=>(t[t.MSG_FAMILY_SUBSCRIBE=1]="MSG_FAMILY_SUBSCRIBE",t[t.MSG_FAMILY_UNSUBSCRIBE=2]="MSG_FAMILY_UNSUBSCRIBE",t[t.MSG_FAMILY_TRANSMIT=3]="MSG_FAMILY_TRANSMIT",t[t.MSG_FAMILY_HEARTBEAT=4]="MSG_FAMILY_HEARTBEAT",t[t.MSG_FAMILY_HEARTBEAT_FEEDBACK=5]="MSG_FAMILY_HEARTBEAT_FEEDBACK",t[t.MSG_FAMILY_REGISTER=6]="MSG_FAMILY_REGISTER",t))(yl||{});function g6(t,e,n){return{interMsgType:t,data:{busName:e,msgTypes:n}}}const zs=class zs{constructor(e,n={}){de(this,"ws",null);de(this,"url");de(this,"messageHandlers",new Map);de(this,"cache",new Map);de(this,"heartbeatInterval");de(this,"heartbeatTimer",null);de(this,"enableHeartbeat",!1);de(this,"reconnectTimer",null);de(this,"isConnected",!1);de(this,"maxReconnectTimes",30);de(this,"reconnectInterval",3e3);de(this,"wsOptions",null);de(this,"enableLog",!0);de(this,"_subscribeTasks",[]);de(this,"manualClosed",!1);const{heartbeatInterval:r=3e4}=n;this.url=e,this.heartbeatInterval=r,this.maxReconnectTimes=n.maxReconnectTimes||30,this.reconnectInterval=n.reconnectInterval||3e3,this.wsOptions=n,this.enableLog=n.enableLog,this.enableHeartbeat=n.enableHeartbeat}static getInstance(e,n){!e.startsWith("ws://")&&!e.startsWith("wss://")&&(e="ws://"+e),console.log("getInstance: ",e,n);let r=zs.InstanceMap.get(e);return r?console.log("Using existing WebSocketClient instance."):(r=new zs(e,n),zs.InstanceMap.set(e,r)),r.connect(),r}connect(){if(!this.url){console.error("ws url is required");return}if(this.isConnected){this.wsOptions.onReady&&this.wsOptions.onReady();return}this.ws?this.ws.readyState===WebSocket.OPEN?this.wsOptions.onReady&&this.wsOptions.onReady():[WebSocket.CLOSING,WebSocket.CLOSED].includes(this.ws.readyState)?(console.error("连接已断开：",this.url),this.ws=new WebSocket(this.url),this.ws.onopen=()=>{this.isConnected=!0,this.register(),this.startHeartbeat(),this.subscribe(this.wsOptions.busName,this.wsOptions.msgTypes),this._subscribeTasks.forEach(e=>{e()}),this._subscribeTasks=[],this.wsOptions.onReady&&this.wsOptions.onReady()},this.ws.onmessage=e=>{this.handleMessage(e.data)},this.ws.onclose=()=>{this.isConnected=!1,this.manualClosed||(this.stopHeartbeat(),this.reconnect()),console.log("WebSocket connection closed.")},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.isConnected=!1,this.stopHeartbeat(),this.reconnect()}):console.log("WebSocket connecting:",this.ws.readyState):(this.ws=new WebSocket(this.url),this.ws.onopen=()=>{this.isConnected=!0,this.register(),this.startHeartbeat(),this.subscribe(this.wsOptions.busName,this.wsOptions.msgTypes),this._subscribeTasks.forEach(e=>{e()}),this._subscribeTasks=[],this.wsOptions.onReady&&this.wsOptions.onReady()},this.ws.onmessage=e=>{this.handleMessage(e.data)},this.ws.onclose=()=>{this.isConnected=!1,this.manualClosed||(this.stopHeartbeat(),this.reconnect()),console.log("WebSocket connection closed.")},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.isConnected=!1,this.stopHeartbeat(),this.reconnect()})}register(e){const n={interMsgType:yl.MSG_FAMILY_REGISTER,data:{name:e||this.wsOptions.appName||"WebSocket Client"}};this.ws.send(JSON.stringify(n))}unRegister(e){}handleMessage(e){const n=JSON.parse(e);this.enableLog&&console.log("Received message:",n);const{interMsgType:r,data:a}=n;if(r===yl.MSG_FAMILY_HEARTBEAT){const s={interMsgType:yl.MSG_FAMILY_HEARTBEAT_FEEDBACK,data:a};this.ws.send(JSON.stringify(s));return}const i=a==null?void 0:a.busName;i&&this.cache.set(i,a),(this.messageHandlers.get(i)||[]).forEach(s=>s&&s(a))}subscribe(e,n,r){var s;const a=e||this.wsOptions.busName,i=n||this.wsOptions.msgTypes;a||console.error("订阅消息需要指定 [busName] 参数！");const o=g6(yl.MSG_FAMILY_SUBSCRIBE,a,i);if(((s=this.ws)==null?void 0:s.readyState)!==WebSocket.OPEN?(console.log("WebSocket 连接尚未建立，订阅任务加入队列"),this._subscribeTasks.push(()=>{this.ws.send(JSON.stringify(o))})):this.ws.send(JSON.stringify(o)),this.cache.has(a)&&r&&r(this.cache.get(a)),!r){console.error(`请使用 subscribe() 方法订阅消息： ${a} `);return}this.messageHandlers.has(a)||this.messageHandlers.set(a,[]),this.messageHandlers.get(a).push(r)}unSubscribe(e,n,r){const a=e||this.wsOptions.busName,i=n||this.wsOptions.msgTypes,o=g6(yl.MSG_FAMILY_UNSUBSCRIBE,a,i);this.ws.send(JSON.stringify(o));const s=this.messageHandlers.get(a);s&&this.messageHandlers.set(a,s.filter(c=>c!==r))}sendMessage(e,n,r){var o,s;const a=e||this.wsOptions.busName,i={interMsgType:yl.MSG_FAMILY_TRANSMIT,data:{busName:a,msgType:n,msg:r}};((o=this.ws)==null?void 0:o.readyState)!==WebSocket.OPEN?(console.warn("WebSocket 连接尚未建立，sendMessage 任务加入队列"),this._subscribeTasks.push(()=>{this.ws.send(JSON.stringify(i))})):(s=this.ws)==null||s.send(JSON.stringify(i))}startHeartbeat(){this.enableHeartbeat&&(this.heartbeatTimer||(this.heartbeatTimer=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({interMsgType:yl.MSG_FAMILY_HEARTBEAT,data:{version:"1.0",ackId:Date.now()}}))},this.heartbeatInterval)))}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}reconnect(){if(!this.reconnectTimer){if(this.maxReconnectTimes<=0){console.log("Max reconnect times reached.");return}this.reconnectTimer=setTimeout(()=>{console.log("Reconnecting...",this.maxReconnectTimes),this.maxReconnectTimes--,this.connect(),this.reconnectTimer=null},this.reconnectInterval)}}clearCache(e){e?this.cache.delete(e):this.cache.clear()}close(){var e;this.manualClosed=!0,this.stopHeartbeat(),(e=this.ws)==null||e.close(),this.ws=null,zs.InstanceMap.delete(this.url),this.isConnected=!1,console.log("WebSocketClient instance closed and cleared.")}};de(zs,"InstanceMap",new Map);let Os=zs;var Ct=(t=>(t[t.Link=0]="Link",t[t.SetProps=1]="SetProps",t[t.StartAnimate=2]="StartAnimate",t[t.PauseAnimate=3]="PauseAnimate",t[t.StopAnimate=4]="StopAnimate",t[t.JS=5]="JS",t[t.GlobalFn=6]="GlobalFn",t[t.Emit=7]="Emit",t[t.StartVideo=8]="StartVideo",t[t.PauseVideo=9]="PauseVideo",t[t.StopVideo=10]="StopVideo",t[t.SendPropData=11]="SendPropData",t[t.SendVarData=12]="SendVarData",t[t.Dialog=14]="Dialog",t))(Ct||{}),Nt=(t=>(t[t.DialogClose=-14]="DialogClose",t[t.AnimateReverse=-13]="AnimateReverse",t[t.Video=-12]="Video",t[t.ScriptEnd=-11]="ScriptEnd",t[t.ShowMeta2D=-10]="ShowMeta2D",t[t.GoToView=-9]="GoToView",t[t.ShowText=-8]="ShowText",t))(Nt||{});const m6="__extend_event__",Xke={[-14]:"",[-13]:"",[-11]:"",[-10]:"",[-9]:"",[-12]:`
const fn = globalThis.$_callExtendAction;
if (fn) {
  fn(0, {
pen,
params,
context,
})
}
`,[-8]:`
const fn = globalThis.$_callExtendAction;
if (fn) {
  fn(0, {
pen,
params,
context,
})
}
`};var wu=(t=>(t[t.ReservedEvents=0]="ReservedEvents",t[t.ExternalCall=1]="ExternalCall",t))(wu||{}),Vn=(t=>(t.Dialog="__extend_event_dialog__",t.CustomMessage="__extend_event_custom_message__",t))(Vn||{}),vi=(t=>(t[t.VideoEnded=0]="VideoEnded",t[t.ScriptEnded=1]="ScriptEnded",t))(vi||{});function Jke(t,e){if(!t)return!0;const{key:n,value:r,comparison:a}=t;if(!n||!a)return!0;const i=r;switch(a){case"==":return e[n]==r;case"!=":return e[n]!=r;case">":return e[n]>i;case"<":return e[n]<i;case">=":return e[n]>=i;case"<=":return e[n]<=i;default:return!0}}function ow(t,e,n){const r={0:"startAnimate",1:"pauseAnimate",2:"stopAnimate"},a=[];e!=null&&e.length?e.forEach(o=>{a.push(meta2d.findOne(o))}):n!=null&&n.length&&n.forEach(o=>{a.push(...meta2d.find(o))});const i=r[t];i&&meta2d[i](a)}const Rf=t=>({resolver:n=>{if(n!=null&&n.msg){const r=t.wsMsgHandlers||[],a=n.msg;r.forEach(i=>{const{action:o,params:s,value:c,where:u}=i;if(!Jke(u,a))return;const{tags:d,ids:f}=s;switch(o){case Ct.SetProps:f!=null&&f.length?(f.forEach(h=>{meta2d.setValue({id:h,...c},{render:!1})}),meta2d.render()):d!=null&&d.length&&(d.forEach(h=>{meta2d.setValue({tag:h,...c},{render:!1})}),meta2d.render());break;case Ct.StartAnimate:ow("0",f,d);break;case Ct.PauseAnimate:ow("1",f,d);break;case Ct.StopAnimate:ow("2",f,d);break;default:console.log("unknown action: ",o);break}})}}}),Og=(t,e)=>{if(console.log("callExtendAction  ------------> ",t,e),!e){console.error("自定义消息参数不存在！");return}const{params:n,...r}=e;switch(t==wu.ExternalCall?n&&typeof n=="object"&&(n.action=e.action):t==wu.ReservedEvents&&(e.action=n==null?void 0:n.action),e.action){case Nt.Video:meta2d.emit(Vn.Dialog,e);break;case Nt.DialogClose:meta2d.emit(Vn.Dialog,e);break;case Nt.ShowMeta2D:meta2d.emit(Vn.Dialog,e);break;case Nt.ShowText:meta2d.emit(Vn.Dialog,e);break;default:console.error("未知扩展能力调用: ",e.action);break}};globalThis.$_callExtendAction=Og;const y6=()=>({extendOn:()=>{meta2d?meta2d.on(m6,(...n)=>{console.log("--------------",n)}):console.error("meta2d is not ready")},extendOff:n=>{meta2d&&meta2d.off(m6,n)}}),b6=Gn(l.defineComponent({__name:"View",props:{preview:{type:Boolean,default:!1},data:{type:Object},customWsHandler:{type:Function},isOpener:{type:Boolean,default:!1}},emits:["ready"],setup(t,{expose:e,emit:n}){const r=t,{select:a,selections:i}=bu(),o={rule:!1,drawingLineName:"line",rotateCursor:"rotate.cur"},s=l.reactive({x:0,y:0,visible:!1,isPreview:!1}),c=l.ref(!1);let u=l.reactive({id:"",Name:"",fault:0,State:0});const d=S=>{i.mode!==0&&(s.x=S.e.clientX,s.y=S.e.clientY,s.visible=!0,s.isPreview=r.preview)},f=()=>{s.visible=!1},h=n;let v;l.onMounted(()=>{new h8("meta2d",o),ja(H8()),xf(W8()),ja(K8()),di(q8()),ja(G8()),ja(Y8()),di(X8()),J8(),di(o6()),di(c6()),ja(h6()),di(v6()),xf(p6()),h("ready",meta2d);let S=localStorage.getItem("meta2d");if(r.data||S){S=r.data||JSON.parse(S);const{resolver:_}=Rf(S);if(location.pathname==="/preview"||r.preview){S.locked=1,S.lockState&&(S.locked=S.lockState);const O=(S.msgTypes||[]).map(B=>Number(B)).filter(B=>!isNaN(B)),N=S.onMessageJsCode;S.wsUrl&&(v=Os.getInstance(S.wsUrl,{busName:S.busName,msgTypes:O,enableLog:!1,onReady:()=>{console.log("%c连接成功！","color: green; font-weight: bold;"),v.subscribe(S.busName,O,B=>{console.log("response: ",B);try{N?new Function("data",N)(B):r.customWsHandler?r.customWsHandler(B,meta2d):_(B)}catch(T){console.log("error: ",T)}})}}),v.connect())}else S.locked=0;meta2d.open(S)}meta2d.on("active",x),meta2d.on("inactive",C),meta2d.on("contextmenu",d),meta2d.on("click",f)});const p=S=>{console.log("reconnectWebSocket======== ",S);const{resolver:_}=Rf(S);if(S.wsUrl){S.locked=1;const O=(S.msgTypes||[]).map(B=>Number(B)).filter(B=>!isNaN(B)),N=S.onMessageJsCode;console.log("reconnectWebSocket======== ",N),v=Os.getInstance(S.wsUrl,{busName:S.busName,msgTypes:O,enableLog:!1,onReady:()=>{console.log("%c连接成功！","color: green; font-weight: bold;"),v.subscribe(S.busName,O,B=>{try{N?new Function("data",N)(B):r.customWsHandler?r.customWsHandler(B,meta2d):_(B)}catch(T){console.log("error: ",T)}})}}),v.connect()}},g=(S,_)=>{let O=localStorage.getItem("meta2d");if((r.data||O)&&(O=r.data||JSON.parse(O)),console.log("sendMessageSocket======== ",O),console.log("sendMessageSocketpen======== ",S),O.wsUrl&&_==="fault"){v.sendMessage(O.busName,7e3,{Name:S.Name,Type:28,Code:S.fault});let N=S.fault==0?"":"#FF0000";meta2d.setValue({id:S.id,color:N,fault:S.fault},{render:!1})}O.wsUrl&&_==="setting"&&(v.sendMessage(O.busName,3e3,{Name:S.Name,Type:28,State:S.State}),meta2d.setValue({id:S.id,showChild:S.State},{render:!1}))},m=()=>{let S=localStorage.getItem("meta2d");(r.data||S)&&(S=r.data||JSON.parse(S)),S.wsUrl&&v.sendMessage(S.busName,1002,{})},y=(S,_)=>{if(console.log("modelHandletype======== ",_),console.log("modelHandle======== ",S),u.id=S.id,u.Name=S.text,S.Ecomponents)if(S.tags.includes("Switch")){const[O,N]=S.Ecomponents;(O==="off"||O==="on")&&(O==="off"&&N==="1"||O==="on"&&N==="0"?u.State=+(S==null?void 0:S.showChild):u.State=+(S==null?void 0:S.showChild)==0?1:0)}else u.State=+((S==null?void 0:S.showChild)??-1);else u.State=+((S==null?void 0:S.showChild)??-1);u.fault=S.fault,_==="setting"?c.value=!0:_==="fault"&&g(u,_)},b=()=>{c.value=!1},w=S=>{c.value=!1,g(u,"setting")};e({reconnectWebSocket:p,Sendrequestsyn:m});const x=S=>{a(S)},C=()=>{a()};return l.onUnmounted(()=>{meta2d.destroy(),v&&v.close()}),(S,_)=>{const O=l.resolveComponent("t-input"),N=l.resolveComponent("t-form-item"),B=l.resolveComponent("t-form"),T=l.resolveComponent("t-dialog");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createElementVNode("div",{id:"meta2d",class:l.normalizeClass({"is--preview":t.preview,"is--opener":t.isOpener})},null,2),l.createVNode(Yke,l.mergeProps(s,{onHide:f,onSend:y}),null,16),l.createVNode(T,{visible:c.value,"close-btn":!0,"on-confirm":w,"cancel-btn":"取消","on-close":b},{header:l.withCtx(()=>_[3]||(_[3]=[l.createTextVNode("设置")])),body:l.withCtx(()=>[l.createVNode(B,{ref:"form",data:l.unref(u)},{default:l.withCtx(()=>[l.createVNode(N,{label:"ID",name:"id",disabled:""},{default:l.withCtx(()=>[l.createVNode(O,{placeholder:"请输入内容",modelValue:l.unref(u).id,"onUpdate:modelValue":_[0]||(_[0]=k=>l.unref(u).id=k),disabled:""},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"名称",name:"Name"},{default:l.withCtx(()=>[l.createVNode(O,{placeholder:"请输入内容",modelValue:l.unref(u).Name,"onUpdate:modelValue":_[1]||(_[1]=k=>l.unref(u).Name=k),disabled:""},null,8,["modelValue"])]),_:1}),l.unref(u).State!=-1?(l.openBlock(),l.createBlock(N,{key:0,label:"设置状态值",name:"State"},{default:l.withCtx(()=>[l.createVNode(O,{placeholder:"请输入",modelValue:l.unref(u).State,"onUpdate:modelValue":_[2]||(_[2]=k=>l.unref(u).State=k),disabled:l.unref(u).fault==1},null,8,["modelValue","disabled"])]),_:1})):l.createCommentVNode("",!0)]),_:1},8,["data"])]),_:1},8,["visible"])],64)}}}),[["__scopeId","data-v-8ce0a804"]]);let Es=1;const Qke=2,w6=1e-6;let Tn=[],Mf=!1,x6=!1;const lw=["line","polyline"];function Zke(t){window.meta2d.on("mouseup",cw),window.meta2d.on("mousedown",sw),window.meta2d.on("add",S6),window.meta2d.on("active",_6),x6=t,window.meta2d.on("opened",C6)}function Vke(t){sw(),cw(t)}function C6(){x6&&Vke(void 0)}function _6(){Mf=!0}function S6(){Mf=!0}function sw(){Mf=!0}function eOe(t){let e=[],n=[];const a=(t?window.meta2d.store.active:window.meta2d.store.data.pens).filter(i=>i);for(let i=0;i<a.length;i++){const o=a[i];if(o.type===1&&lw.indexOf(o.lineName)!==-1)n.push(o);else if(o.connectedLines&&o.connectedLines.length>0)for(let c=0;c<o.connectedLines.length;c++){const u=o.connectedLines[c];n.push(window.meta2d.find(u.lineId)[0])}const s=window.meta2d.store.data.pens.filter(c=>c.intersectLines&&c.intersectLines.findIndex(u=>u.id===o.id)!==-1);n.push(...s)}n=n.filter(i=>i);for(let i=0;i<n.length;i++){const o=n[i];if(o.intersectLines=[],n[i]&&n[i].calculative&&(e=n[i].calculative.worldAnchors,e.length>2)){for(let s=0;s<e.length;s++){const c=e[s];(c.next||c.prev)&&(e.splice(s,1),s--)}window.meta2d.canvas.initLineRect(o)}}}function cw(t){Mf&&(Mf=!1,setTimeout(()=>{const n=(t?window.meta2d.store.active:window.meta2d.store.data.pens).filter(o=>o).reverse();let r=[],a=[];for(let o=0;o<n.length;o++){const s=n[o];if(s.type===1&&lw.indexOf(s.lineName)!==-1){if(s.connectedLines)for(let c=0;c<s.connectedLines.length;c++){const u=s.connectedLines[c];let d=s.anchors.find(f=>f.id===u.anchor);if(d&&d.penId){let f=window.meta2d.findOne(u.lineId);if(!f)continue;if(f.connectedLines&&f.connectedLines.length>0){let h=f.connectedLines.findIndex(v=>v.anchor===u.lineAnchor);f.connectedLines.splice(h,1)}s.connectedLines.splice(c,1),c--}}r.push(s)}else if(s.type!==1&&s.connectedLines&&s.connectedLines.length>0)for(let c=0;c<s.connectedLines.length;c++){const u=s.connectedLines[c];r.push(window.meta2d.find(u.lineId)[0])}a=window.meta2d.store.data.pens.filter(c=>c.intersectLines&&c.intersectLines.findIndex(u=>u.id===s.id)!==-1),r.unshift(...a)}const i=window.meta2d.store.data.pens.filter(o=>o.type===1&&lw.indexOf(o.lineName)!==-1);eOe(t),r=r.filter(o=>o);for(let o=0;o<r.length;o++){const s=r[o].calculative.worldAnchors.filter(c=>!c.next&&!c.prev);Tn=[];for(let c=0;c<s.length;c++)if(c!==s.length-1){const u=s[c],d=s[c+1];for(let f=0;f<i.length;f++){Es=3,Es+=i[f].lineWidth/r[o].lineWidth*r[o].lineWidth,Es*=window.meta2d.store.data.scale;const h=i[f].calculative.worldAnchors.filter(v=>!v.next&&!v.prev);for(let v=0;v<h.length;v++)if(v!==h.length-1){const p=h[v],g=h[v+1],{onLine1:m,onLine2:y,x:b,y:w}=iOe(u.x,u.y,d.x,d.y,p.x,p.y,g.x,g.y);if(m&&y){if(i[f].intersectLines&&i[f].intersectLines.findIndex(O=>O.id===r[o].id&&O.fromAnchorIndex===v&&O.toAnchorIndex===c)!==-1)continue;r[o].intersectLines?r[o].intersectLines.findIndex(O=>O.id===i[f].id&&O.fromAnchorIndex===c&&O.toAnchorIndex===v)===-1&&r[o].intersectLines.push({fromAnchorIndex:c,toAnchorIndex:v,id:i[f].id}):(r[o].intersectLines=[],r[o].intersectLines.push({fromAnchorIndex:c,toAnchorIndex:v,id:i[f].id}));const{a:x,b:C}=aOe(u,d),S=rOe({radius:Es,x:b,y:w},{p1:u,p2:d});if(S.length===2){let _=1;x!==0?_=C/x:_=w;const O=Math.sqrt(Es*Es/(_*_+1)),N=_*O;let B={x:0,y:0},T={x:0,y:0};-_<0?(B.x=S[0].x-O,B.y=S[0].y-N,T.x=S[1].x-O,T.y=S[1].y-N):(B.x=S[0].x+O,B.y=S[0].y+N,T.x=S[1].x+O,T.y=S[1].y+N);let k={x:0,y:0,id:""};for(let A=0;A<s.length;A++)if(A!==s.length-1){const M=s[A],$=s[A+1];if(nOe(M,$,{x:b,y:w},Qke)){k.x=M.x,k.y=M.y,k.id=M.id;break}}const E={id:it(),penId:r[o].id,x:S[0].x,y:S[0].y,intersect:!0,hidden:!0,locked:2,lastAnchorIndex:k.id,brotherId:"",next:{penId:r[o].id,x:B.x,y:B.y},prev:{penId:r[o].id,x:S[0].x,y:S[0].y},prevNextType:1},I={id:it(),penId:r[o].id,x:S[1].x,y:S[1].y,intersect:!0,hidden:!0,locked:2,brotherId:"",lastAnchorIndex:k.id,next:{penId:r[o].id,x:S[1].x,y:S[1].y},prev:{penId:r[o].id,x:T.x,y:T.y},prevNextType:1};E.brotherId=I.id,I.brotherId=E.id,Tn.push(E,I)}}}}}if(Tn.length>0){Tn.sort((p,g)=>{if(p.lastAnchorIndex===g.lastAnchorIndex){const m=s.find(y=>y.id===p.lastAnchorIndex);return m?Lf(p.x,p.y,m.x,m.y)-Lf(g.x,g.y,m.x,m.y):-1}else return-1});let c=[],u=[],d=-1;for(let p=0,g=Tn.length;p<g;p++){const m=Tn[p];if(c.indexOf(m.id)!==-1)continue;const y=Tn.find(b=>b.id===m.brotherId);c.push(m.id,y.id);for(let b=p+1;b<g;b++){const w=Tn[b],x=Tn.find(C=>C.id===w.brotherId);if(c.push(w.id,x.id),m.brotherId!==w.id)if(Lf(m.x,m.y,w.x,w.y)<Es*2&&Lf(m.x,m.y,w.x,w.y)>w6){d=1,u.indexOf(m.id)===-1&&u.push(m.id,y.id);const C=Tn.find(S=>S.id===w.brotherId);u.indexOf(w.id)===-1&&u.push(w.id,C.id)}else{if(d===1){d=-1;const C=c.findIndex(_=>_===w.id);c.splice(C,1);const S=c.findIndex(_=>_===w.brotherId);c.splice(S,1);break}break}}}for(let p=0;p<Tn.length;p++){const g=Tn[p];u.indexOf(g.id)!==-1&&(Tn.splice(p,1),p--)}for(let p=0,g=Tn.length;p<g;p++){const m=Tn[p];for(let y=p+1;y<g;y++){const b=Tn[y];if(Lf(m.x,m.y,b.x,b.y)<=w6){Tn.splice(y,1);let w=Tn.findIndex(x=>x.id===b.brotherId);w!==-1&&Tn.splice(w,1),y--,g=Tn.length}}}let f=-1,h=-1,v=0;for(let p=0;p<Tn.length;p++){const g=Tn[p];f===-1||f!==-1&&f!==g.lastAnchorIndex?(h=r[o].calculative.worldAnchors.findIndex(y=>y.id===g.lastAnchorIndex),v=0):f===g.lastAnchorIndex&&v++,r[o].calculative.worldAnchors.findIndex(y=>y.x===g.x&&y.y===g.y&&y.penId===g.penId)===-1&&(r[o].calculative.worldAnchors.splice(h+v+1,0,g),f=g.lastAnchorIndex)}window.meta2d.canvas.updateLines(r[o]),window.meta2d.canvas.initLineRect(r[o])}}window.meta2d.render()},0))}function tOe(){window.meta2d.off("mouseup",cw),window.meta2d.off("mousedown",sw),window.meta2d.off("add",S6),window.meta2d.off("active",_6),window.meta2d.off("opened",C6),Tn=[]}function nOe(t,e,n,r){const a=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);if(a==0)return!1;const i=((n.x-t.x)*(e.x-t.x)+(n.y-t.y)*(e.y-t.y))/a;if(i<0)return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))<=r;if(0<=i&&i<=1){const o=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/a;return Math.abs(o)*Math.sqrt(a)<=r}else return Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))<=r}function rOe(t,e){let n,r,a,i,o,s,c,u,d,f;return d={},f={},d.x=e.p2.x-e.p1.x,d.y=e.p2.y-e.p1.y,f.x=e.p1.x-t.x,f.y=e.p1.y-t.y,n=d.x*f.x+d.y*f.y,r=2*(d.x*d.x+d.y*d.y),n*=-2,a=Math.sqrt(n*n-2*r*(f.x*f.x+f.y*f.y-t.radius*t.radius)),isNaN(a)?[]:(i=(n-a)/r,o=(n+a)/r,c={},u={},s=[],i<=1&&i>=0&&(c.x=e.p1.x+d.x*i,c.y=e.p1.y+d.y*i,s[0]=c),o<=1&&o>=0&&(u.x=e.p1.x+d.x*o,u.y=e.p1.y+d.y*o,s[s.length]=u),s)}function aOe(t,e){const n=e.y-t.y,r=t.x-e.x,a=n*t.x+r*t.y;return{a:n,b:r,c:a}}function Lf(t,e,n,r){let a=n-t,i=r-e;return Math.sqrt(i*i+a*a)}function iOe(t,e,n,r,a,i,o,s){let c,u,d,f,h,v={x:null,y:null,onLine1:!1,onLine2:!1};return c=(s-i)*(n-t)-(o-a)*(r-e),c==0||(u=e-i,d=t-a,f=(o-a)*u-(s-i)*d,h=(n-t)*u-(r-e)*d,u=f/c,d=h/c,v.x=t+u*(n-t),v.y=e+u*(r-e),u>0&&u<1&&(v.onLine1=!0),d>0&&d<1&&(v.onLine2=!0)),v}const Eg=l.defineComponent({__name:"PropsTab",props:{tabs:{type:Array,default:()=>[]},defaultValue:{type:Number,default:1}},emits:["change"],setup(t,{emit:e}){const n=t,r=l.ref(n.defaultValue);l.watch(()=>n.defaultValue,o=>{r.value=o});const a=e,i=o=>{a("change",o)};return(o,s)=>{const c=l.resolveComponent("t-tab-panel"),u=l.resolveComponent("t-tabs");return l.openBlock(),l.createBlock(u,{value:r.value,"onUpdate:value":s[0]||(s[0]=d=>r.value=d),onChange:i},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.tabs,(d,f)=>(l.openBlock(),l.createBlock(c,{key:f,value:d.value,label:d.label},{default:l.withCtx(()=>[l.renderSlot(o.$slots,d.slot)]),_:2},1032,["value","label"]))),128))]),_:3},8,["value"])}}}),oOe=Gn(l.defineComponent({__name:"CodeEditor",props:{},emits:["confirm"],setup(t,{expose:e,emit:n}){const r=n,a=l.ref(!1),i=v=>{a.value=!1,r("confirm",d.value)},o=v=>{console.log("关闭弹窗，点击关闭按钮、按下ESC、点击蒙层等触发",v)},s=v=>{console.log("点击了取消按钮",v)};e({open:v=>{a.value=!0,d.value=v}});const u={automaticLayout:!0,formatOnType:!0,formatOnPaste:!0},d=l.ref("// some code..."),f=l.shallowRef(),h=v=>f.value=v;return(v,p)=>{const g=l.resolveComponent("t-space"),m=l.resolveComponent("t-dialog");return l.openBlock(),l.createBlock(m,{visible:a.value,"onUpdate:visible":p[1]||(p[1]=y=>a.value=y),header:"JavaScript",width:"50%","on-cancel":s,"on-close":o,"on-confirm":i},{default:l.withCtx(()=>[l.createVNode(g,{direction:"vertical",style:{width:"100%"}},{default:l.withCtx(()=>[p[2]||(p[2]=l.createElementVNode("code",null,"function(data: any) { // data 为 MessageBus 消息里的 data 对象",-1)),l.createVNode(l.unref(qwe),{value:d.value,"onUpdate:value":p[0]||(p[0]=y=>d.value=y),theme:"vs-dark",options:u,style:{height:"50vh"},onMount:h},null,8,["value"]),p[3]||(p[3]=l.createElementVNode("code",null,"}",-1))]),_:1})]),_:1},8,["visible"])}}}),[["__scopeId","data-v-ff6d5876"]]),lOe=l.defineComponent({__name:"MessageHandlers",props:{wsMsgFields:{type:Array,default:()=>[]},wsMsgHandlers:{type:Array,default:()=>[]}},emits:["change"],setup(t,{emit:e}){const n=t,r=l.ref(n.wsMsgHandlers),a=()=>{r.value.push({id:og(),action:Ct.SetProps,params:{tags:[],ids:[]},value:{},where:{key:"",value:"",comparison:""}})},i=k=>{r.value.splice(r.value.indexOf(k),1),s()},o=e,s=()=>{o("change",r.value)},c=[{label:"更改属性",value:Ct.SetProps},{label:"执行动画",value:Ct.StartAnimate},{label:"暂停动画",value:Ct.PauseAnimate},{label:"停止动画",value:Ct.StopAnimate}],u=[{label:"背景颜色",value:"background"},{label:"颜色",value:"color"},{label:"文字",value:"text"},{label:"进度",value:"progress"},{label:"显示",value:"visible"},{label:"状态",value:"showChild"}],d=l.ref([]),f=()=>{if(d.value.length>=6){$r.warning("最多只能添加6个属性");return}d.value.push({prop:"",value:""})},h=(k,E)=>{const I=d.value.indexOf(k);d.value.splice(I,1),v(E)},v=k=>{const E={};d.value.forEach(I=>{E[I.prop]=I.value}),k.value=E,o("change",r.value)},p=k=>{const E=r.value[Number(k)];E.value&&typeof E.value=="object"&&(d.value=Object.keys(E.value).map(I=>({prop:I,value:E.value[I]})))},g=[{label:"大于",value:">"},{label:"大于等于",value:">="},{label:"小于",value:"<"},{label:"小于等于",value:"<="},{label:"等于",value:"="},{label:"不等于",value:"!="}],m=l.ref(!1),y=k=>{w([k]),m.value=!0},b=l.shallowReactive({tags:[],ids:[],id:""}),w=k=>{if(!k.length)return;const E=JSON.parse(JSON.stringify(r.value[k[0]]));E&&(b.tags=E.params.tags,b.ids=C(E.params.ids),b.id=E.id,p(k),N())},x=p8.map(k=>({label:k.释义,value:k.元件类型}));function C(k){return k.filter(E=>!!meta2d.findOne(E))}const S=()=>{m.value=!1;const k=r.value.find(E=>E.id===b.id);k&&(k.params.tags=b.tags,k.params.ids=C(b.ids),s())},_=l.shallowReactive({value:[]}),O=[{title:"ID",colKey:"id",type:"multiple"},{title:"图元名称",colKey:"name"},{title:"标签",colKey:"tags"},{title:"文字",colKey:"text"},{title:"描述",colKey:"description"}],N=()=>{const k=meta2d.data();if(b){if(b._tag){_.value=meta2d.find(b._tag);return}else if(b.tags.length){const E=[];b.tags.forEach(A=>{const M=meta2d.find(A);E.push(...M)});const I=[...new Set(E)];setTimeout(()=>{_.value=I},1e3);return}}setTimeout(()=>{_.value=k.pens},1e3)},B=(k,E)=>{b.ids=k},T=()=>{if(b.ids.length){const k=b.ids.map(E=>meta2d.findOne(E)).filter(E=>!!E);meta2d.active(k)}else meta2d.active(_.value)};return(k,E)=>{const I=l.resolveComponent("t-button"),A=l.resolveComponent("t-select"),M=l.resolveComponent("t-form-item"),$=l.resolveComponent("t-col"),U=l.resolveComponent("t-icon"),F=l.resolveComponent("t-row"),j=l.resolveComponent("t-input"),W=l.resolveComponent("t-form"),H=l.resolveComponent("t-collapse-panel"),J=l.resolveComponent("t-collapse"),Y=l.resolveComponent("t-tooltip"),D=l.resolveComponent("t-table"),q=l.resolveComponent("t-drawer");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createVNode(I,{block:"",theme:"primary",onClick:a},{default:l.withCtx(()=>E[3]||(E[3]=[l.createTextVNode("添加处理器")])),_:1}),l.createVNode(J,{class:"meta-collapse","expand-mutex":"",onChange:w},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(r.value,(z,K)=>(l.openBlock(),l.createBlock(H,{key:K,header:"处理器"},{headerRightContent:l.withCtx(()=>[l.createVNode(I,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:P=>i(z)},{default:l.withCtx(()=>[l.createVNode(U,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(W,{labelAlign:"left"},{default:l.withCtx(()=>[l.createVNode(M,{label:"行为"},{default:l.withCtx(()=>[l.createVNode(A,{modelValue:z.action,"onUpdate:modelValue":P=>z.action=P,options:c,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(M,{label:"目标"},{default:l.withCtx(()=>[l.createVNode(I,{variant:"text",theme:"primary",onClick:P=>y(K)},{default:l.withCtx(()=>E[4]||(E[4]=[l.createTextVNode("选择目标图元")])),_:2},1032,["onClick"])]),_:2},1024),z.action===l.unref(Ct).SetProps?(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[l.createVNode(F,{justify:"start"},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>E[5]||(E[5]=[l.createElementVNode("div",null,"属性",-1)])),_:1}),l.createVNode($,{span:5},{default:l.withCtx(()=>E[6]||(E[6]=[l.createElementVNode("div",null,"值",-1)])),_:1}),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(I,{variant:"text",onClick:f},{default:l.withCtx(()=>[l.createVNode(U,{name:"add"})]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(d.value,(P,R)=>(l.openBlock(),l.createBlock(F,{key:R,justify:"start",gutter:4,style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(A,{modelValue:P.prop,"onUpdate:modelValue":X=>P.prop=X,options:u,onChange:X=>v(z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:P.value,"onUpdate:modelValue":X=>P.value=X,onChange:X=>v(z)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(I,{variant:"text",onClick:X=>h(P,z)},{default:l.withCtx(()=>[l.createVNode(U,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))],64)):l.createCommentVNode("",!0),l.createVNode(M,{label:"字段名"},{default:l.withCtx(()=>[l.createVNode(A,{modelValue:z.where.key,"onUpdate:modelValue":P=>z.where.key=P,options:t.wsMsgFields,onChange:s},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024),l.createVNode(M,{label:"条件"},{default:l.withCtx(()=>[l.createVNode(A,{modelValue:z.where.comparison,"onUpdate:modelValue":P=>z.where.comparison=P,options:g,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(M,{label:"值"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:z.where.value,"onUpdate:modelValue":P=>z.where.value=P,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l.createVNode(q,{visible:m.value,"onUpdate:visible":E[2]||(E[2]=z=>m.value=z),header:"选择图元",size:"40%","on-confirm":S,"close-btn":!0},{default:l.withCtx(()=>[l.unref(b)?(l.openBlock(),l.createBlock(F,{key:0,gutter:10,style:{height:"100%"}},{default:l.withCtx(()=>[l.createVNode($,{span:4,style:{height:"100%"}},{default:l.withCtx(()=>[l.createVNode(W,{"label-align":"top"},{default:l.withCtx(()=>[l.createVNode(M,{label:"电路元件",name:"name"},{default:l.withCtx(()=>[l.createVNode(A,{modelValue:l.unref(b).tags,"onUpdate:modelValue":E[0]||(E[0]=z=>l.unref(b).tags=z),options:l.unref(x),placeholder:"按标签选择",multiple:"",minCollapsedNum:10,clearable:""},null,8,["modelValue","options"])]),_:1}),l.createVNode(M,{label:"图元标签",name:"tag"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:l.unref(b)._tag,"onUpdate:modelValue":E[1]||(E[1]=z=>l.unref(b)._tag=z),placeholder:"输入自定义的标签进行查询，不做保存",clearable:""},null,8,["modelValue"])]),_:1}),l.createVNode(M,null,{default:l.withCtx(()=>[l.createVNode(I,{block:"",onClick:N},{default:l.withCtx(()=>E[7]||(E[7]=[l.createTextVNode("查询")])),_:1})]),_:1}),l.createVNode(M,null,{default:l.withCtx(()=>[l.createVNode(Y,{content:"符合条件的图元数量大时，会出现卡顿"},{default:l.withCtx(()=>[l.createVNode(I,{block:"",theme:"warning",onClick:T},{default:l.withCtx(()=>E[8]||(E[8]=[l.createTextVNode("选中图元")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.createVNode($,{span:7,style:{height:"100%"}},{default:l.withCtx(()=>[l.unref(b)?(l.openBlock(),l.createBlock(D,{key:0,class:"meta-table","row-key":"id",columns:O,data:l.unref(_).value,"selected-row-keys":l.unref(b).ids,scroll:{type:"virtual",rowHeight:48,bufferSize:30},style:{height:"100%"},onSelectChange:B},null,8,["data","selected-row-keys"])):l.createCommentVNode("",!0)]),_:1})]),_:1})):l.createCommentVNode("",!0)]),_:1},8,["visible"])],64)}}}),sOe=l.defineComponent({__name:"ScriptHandlers",props:{fields:{type:Array,default:()=>[]},defaultScript:{type:Object,default:()=>({})},scripts:{type:Array}},emits:["change"],setup(t,{emit:e}){var N,B;const n=t,r=l.ref(((N=n.defaultScript)==null?void 0:N.handlers)||[]),a=()=>{r.value.push({id:og(),action:Ct.SetProps,value:{},target:[],params:{},where:{type:Vn.CustomMessage,value:null,key:null}})},i=T=>{r.value.splice(r.value.indexOf(T),1),s()},o=e,s=()=>{var T,k;o("change",{sid:((T=n.defaultScript)==null?void 0:T.sid)||og(),duration:((k=n.defaultScript)==null?void 0:k.duration)||3e3,rowPropList:C.value,handlers:r.value})},c=[{label:"更改属性",value:Ct.SetProps},{label:"执行动画",value:Ct.StartAnimate},{label:"暂停动画",value:Ct.PauseAnimate},{label:"停止动画",value:Ct.StopAnimate},{label:"弹窗",value:Ct.Dialog},{label:"关闭弹窗",value:Nt.DialogClose},{label:"连线动画反向",value:Nt.AnimateReverse},{label:"视频",value:Nt.Video},{label:"执行结束",value:Nt.ScriptEnd},{label:"打开图纸",value:Nt.ShowMeta2D},{label:"聚焦",value:Nt.GoToView}],u=[{label:"模态",value:"modal"},{label:"全屏",value:"full-screen"},{label:"非模态",value:"modeless"}],d=[{label:"扩展事件",value:Vn.CustomMessage}],f=[{label:"视频播放结束",value:vi.VideoEnded},{label:"脚本结束",value:vi.ScriptEnded}],h=l.ref([]),v=T=>{if(Array.isArray(n.scripts)){const k=[];n.scripts.forEach(E=>{Array.isArray(E.handlers)&&E.handlers.forEach(I=>{var A,M;I.action===Nt.Video&&k.push({label:((A=I.params)==null?void 0:A.title)||((M=I.params)==null?void 0:M.url),value:I.id})})}),h.value=k}s()},p=[{label:"背景颜色",value:"background"},{label:"颜色",value:"color"},{label:"文字",value:"text"},{label:"进度",value:"progress"},{label:"显示",value:"visible"},{label:"状态",value:"showChild"}],g=l.ref([]),m=()=>{if(g.value.length>=6){$r.warning("最多只能添加6个属性");return}g.value.push({prop:"",value:""})},y=(T,k)=>{const E=g.value.indexOf(T);g.value.splice(E,1),b(k)},b=T=>{const k={};g.value.forEach(E=>{k[E.prop]=E.value}),T.value=k,s()},w=T=>{T.value&&typeof T.value=="object"&&(g.value=Object.keys(T.value).map(k=>({prop:k,value:T.value[k]})))},x=T=>{var I;if(!T.length||!r.value.length)return;let k=T[0];if(n.fields.length&&(k-=1),!r.value[k])return;const E=JSON.parse(JSON.stringify(r.value[k]));E&&(w(E),((I=E.where)==null?void 0:I.type)==Vn.CustomMessage&&v())},C=l.ref(((B=n.defaultScript)==null?void 0:B.rowPropList)||[]),S=()=>{if(C.value.length>=n.fields.length){$r.warning(`最多只能添加${n.fields.length}个属性`);return}C.value.push({prop:"",value:""})},_=()=>{s()},O=T=>{const k=C.value.indexOf(T);C.value.splice(k,1),_()};return(T,k)=>{const E=l.resolveComponent("t-input-number"),I=l.resolveComponent("t-form-item"),A=l.resolveComponent("t-form"),M=l.resolveComponent("t-button"),$=l.resolveComponent("t-col"),U=l.resolveComponent("t-icon"),F=l.resolveComponent("t-row"),j=l.resolveComponent("t-select"),W=l.resolveComponent("t-input"),H=l.resolveComponent("t-collapse-panel"),J=l.resolveComponent("t-tag-input"),Y=l.resolveComponent("t-color-picker"),D=l.resolveComponent("t-collapse");return l.openBlock(),l.createElementBlock("div",null,[l.createVNode(A,{labelAlign:"left"},{default:l.withCtx(()=>[l.createVNode(I,{label:"时长",name:"name"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:t.defaultScript.duration,"onUpdate:modelValue":k[0]||(k[0]=q=>t.defaultScript.duration=q),placeholder:"单位: ms",onChange:s},null,8,["modelValue"])]),_:1})]),_:1}),l.createVNode(M,{block:"",theme:"primary",onClick:a},{default:l.withCtx(()=>k[1]||(k[1]=[l.createTextVNode("添加脚本")])),_:1}),l.createVNode(D,{class:"meta-collapse","expand-mutex":"",onChange:x},{default:l.withCtx(()=>[t.fields.length?(l.openBlock(),l.createBlock(H,{key:0,header:"数据"},{default:l.withCtx(()=>[l.createVNode(F,{justify:"start"},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>k[2]||(k[2]=[l.createElementVNode("div",null,"字段",-1)])),_:1}),l.createVNode($,{span:5},{default:l.withCtx(()=>k[3]||(k[3]=[l.createElementVNode("div",null,"值",-1)])),_:1}),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(M,{variant:"text",onClick:S},{default:l.withCtx(()=>[l.createVNode(U,{name:"add"})]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(C.value,(q,z)=>(l.openBlock(),l.createBlock(F,{key:z,justify:"start",gutter:4,style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.prop,"onUpdate:modelValue":K=>q.prop=K,options:t.fields,keys:{label:"title",value:"colKey"},onChange:_},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024),l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.value,"onUpdate:modelValue":K=>q.value=K,onChange:_},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(M,{variant:"text",onClick:K=>O(q)},{default:l.withCtx(()=>[l.createVNode(U,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):l.createCommentVNode("",!0),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(r.value,(q,z)=>(l.openBlock(),l.createBlock(H,{key:z,header:`脚本-${q.id}`},{headerRightContent:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:K=>i(q)},{default:l.withCtx(()=>[l.createVNode(U,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(A,{labelAlign:"left"},{default:l.withCtx(()=>[l.createVNode(I,{label:"行为"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.action,"onUpdate:modelValue":K=>q.action=K,options:c,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),[l.unref(Ct).SetProps,l.unref(Ct).StartAnimate,l.unref(Ct).StopAnimate,l.unref(Ct).PauseAnimate,l.unref(Nt).AnimateReverse].includes(q.action)?(l.openBlock(),l.createBlock(I,{key:0,label:"目标"},{default:l.withCtx(()=>[l.createVNode(J,{modelValue:q.target,"onUpdate:modelValue":K=>q.target=K,placeholder:"标签或ID",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.action===l.unref(Ct).SetProps?(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[l.createVNode(F,{justify:"start"},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>k[4]||(k[4]=[l.createElementVNode("div",null,"属性",-1)])),_:1}),l.createVNode($,{span:5},{default:l.withCtx(()=>k[5]||(k[5]=[l.createElementVNode("div",null,"值",-1)])),_:1}),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(M,{variant:"text",onClick:m},{default:l.withCtx(()=>[l.createVNode(U,{name:"add"})]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(g.value,(K,P)=>(l.openBlock(),l.createBlock(F,{key:P,justify:"start",gutter:4,style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:K.prop,"onUpdate:modelValue":R=>K.prop=R,options:p,onChange:R=>b(q)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode($,{span:5},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:K.value,"onUpdate:modelValue":R=>K.value=R,onChange:R=>b(q)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode($,{span:2},{default:l.withCtx(()=>[l.createVNode(M,{variant:"text",onClick:R=>y(K,q)},{default:l.withCtx(()=>[l.createVNode(U,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))],64)):q.action===l.unref(Ct).Dialog?(l.openBlock(),l.createElementBlock(l.Fragment,{key:2},[l.createVNode(I,{label:"窗口标题"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.value,"onUpdate:modelValue":K=>q.value=K,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"URL"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params,"onUpdate:modelValue":K=>q.params=K,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),q.extend?(l.openBlock(),l.createBlock(I,{key:0,label:"窗口宽度"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:q.extend.width,"onUpdate:modelValue":K=>q.extend.width=K,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.extend?(l.openBlock(),l.createBlock(I,{key:1,label:"窗口高度"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:q.extend.height,"onUpdate:modelValue":K=>q.extend.height=K,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.extend?(l.openBlock(),l.createBlock(I,{key:2,label:"X偏移"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:q.extend.x,"onUpdate:modelValue":K=>q.extend.x=K,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.extend?(l.openBlock(),l.createBlock(I,{key:3,label:"Y偏移"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:q.extend.y,"onUpdate:modelValue":K=>q.extend.y=K,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0)],64)):[l.unref(Nt).Video,l.unref(Nt).ShowMeta2D].includes(q.action)?(l.openBlock(),l.createElementBlock(l.Fragment,{key:3},[l.createVNode(I,{label:"窗口标题"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params.title,"onUpdate:modelValue":K=>q.params.title=K,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:q.action==l.unref(Nt).Video?"视频URL":"图纸URL"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params.url,"onUpdate:modelValue":K=>q.params.url=K,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),q.params?(l.openBlock(),l.createBlock(I,{key:0,label:"窗口宽度"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params.width,"onUpdate:modelValue":K=>q.params.width=K,placeholder:"示例：320, '500px', '80%'",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.params?(l.openBlock(),l.createBlock(I,{key:1,label:"对话框类型"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.params.mode,"onUpdate:modelValue":K=>q.params.mode=K,clearable:"",options:u,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.params?(l.openBlock(),l.createElementBlock(l.Fragment,{key:2},[l.createVNode(I,{label:"标题栏上间距"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params.headerMarginTop,"onUpdate:modelValue":K=>q.params.headerMarginTop=K,placeholder:"示例：'10px'",clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"背景颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.backgroundColor,"onUpdate:modelValue":K=>q.params.backgroundColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"背景图片"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.params.backgroundImageUrl,"onUpdate:modelValue":K=>q.params.backgroundImageUrl=K,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"标题颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.textColor,"onUpdate:modelValue":K=>q.params.textColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"控制栏背景颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.controlBarBackgroundColor,"onUpdate:modelValue":K=>q.params.controlBarBackgroundColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"控制栏按钮颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.controlColor,"onUpdate:modelValue":K=>q.params.controlColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"已播放进度颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.controlPlayProgressBarColor,"onUpdate:modelValue":K=>q.params.controlPlayProgressBarColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(I,{label:"已加载进度颜色"},{default:l.withCtx(()=>[l.createVNode(Y,{class:"w-full",modelValue:q.params.controlLoadProgressBarColor,"onUpdate:modelValue":K=>q.params.controlLoadProgressBarColor=K,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):l.createCommentVNode("",!0)],64)):q.action===l.unref(Nt).ScriptEnd?(l.openBlock(),l.createBlock(I,{key:4,label:"业务名称"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.name,"onUpdate:modelValue":K=>q.name=K,placeholder:"唯一标识，用于和其他业务联动",clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):q.action===l.unref(Nt).GoToView?(l.openBlock(),l.createBlock(I,{key:5,label:"聚焦图元"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.value,"onUpdate:modelValue":K=>q.value=K,placeholder:"要聚焦的目标图元标签或ID",clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.where?(l.openBlock(),l.createBlock(I,{key:6,label:"触发条件"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.where.type,"onUpdate:modelValue":K=>q.where.type=K,options:d,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),q.where&&q.where.type===l.unref(Vn).CustomMessage?(l.openBlock(),l.createElementBlock(l.Fragment,{key:7},[l.createVNode(I,{label:"事件"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.where.value,"onUpdate:modelValue":K=>q.where.value=K,options:f,clearable:"",onChange:v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),q.where.value===l.unref(vi).VideoEnded?(l.openBlock(),l.createBlock(I,{key:0,label:"事件来源"},{default:l.withCtx(()=>[l.createVNode(j,{modelValue:q.where.key,"onUpdate:modelValue":K=>q.where.key=K,options:h.value,clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):q.where.value===l.unref(vi).ScriptEnded?(l.openBlock(),l.createBlock(I,{key:1,label:"业务名称"},{default:l.withCtx(()=>[l.createVNode(W,{modelValue:q.where.key,"onUpdate:modelValue":K=>q.where.key=K,placeholder:"其他联动业务中定义的唯一标识",clearable:"",onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0)],64)):l.createCommentVNode("",!0)]),_:2},1024)]),_:2},1032,["header"]))),128))]),_:1})])}}}),cOe=l.defineComponent({__name:"ScriptsEditor",props:{},emits:["change"],setup(t,{emit:e}){const n=e,{presetScriptsConfig:r}=meta2d.data(),a=[{colKey:"serial-number",title:"序号",width:"100"},{title:"名称",colKey:"name",sid:it()},{title:"描述",colKey:"description",sid:it()}],i=l.reactive((r==null?void 0:r.columns)||a),o=()=>{i.push({title:"",colKey:"",sid:it()}),s()},s=m=>{n("change",{columns:i,scripts:d,...u})},c=m=>{i.splice(m,1),s()},u=l.reactive({show:!1,bordered:!1,height:null,hover:!1,showHeader:!0,stripe:!1,style:{evenRowBackgroundColor:"#f8f8f8",oddRowBackgroundColor:"#ffffff",textColor:"#000000",backgroundImageUrl:""}});r&&(u.bordered=r.bordered,u.height=r.height,u.hover=r.hover,u.showHeader=r.showHeader,u.stripe=r.stripe,u.style=r.style,u.show=r.show);const d=l.reactive((r==null?void 0:r.scripts)||[{sid:it()}]),f=l.computed(()=>i.filter(m=>m.colKey!="serial-number")),h=(m,y)=>{d[y]=m,s()},v=()=>{d.push({sid:it()})},p=m=>{d.splice(m,0,{sid:it()})},g=m=>{d.splice(m,1),s()};return meta2d.on("opened",()=>{const{presetScriptsConfig:m}=meta2d.data();m?(Array.isArray(m.columns)&&i.splice(0,i.length,...m.columns),Array.isArray(m.scripts)&&d.splice(0,d.length,...m.scripts),u.bordered=m.bordered,u.height=m.height,u.hover=m.hover,u.showHeader=m.showHeader,u.stripe=m.stripe,u.style=m.style):(i.splice(0,i.length,...a),d.splice(0,d.length,{sid:it()}),u.bordered=!1,u.height=null,u.hover=!1,u.showHeader=!0,u.stripe=!1,u.style={evenRowBackgroundColor:"",oddRowBackgroundColor:"",textColor:"",backgroundImageUrl:""})}),(m,y)=>{const b=l.resolveComponent("t-checkbox"),w=l.resolveComponent("t-space"),x=l.resolveComponent("t-col"),C=l.resolveComponent("t-icon"),S=l.resolveComponent("t-button"),_=l.resolveComponent("t-row"),O=l.resolveComponent("t-input"),N=l.resolveComponent("t-collapse-panel"),B=l.resolveComponent("t-switch"),T=l.resolveComponent("t-form-item"),k=l.resolveComponent("t-color-picker"),E=l.resolveComponent("t-form"),I=l.resolveComponent("t-collapse");return l.openBlock(),l.createBlock(I,{defaultExpandAll:"",class:"meta-collapse"},{default:l.withCtx(()=>[l.createVNode(N,{header:"表格列"},{headerRightContent:l.withCtx(()=>[l.createVNode(w,{size:"small"},{default:l.withCtx(()=>[l.createVNode(b,{modelValue:u.show,"onUpdate:modelValue":y[0]||(y[0]=A=>u.show=A),onChange:s},{default:l.withCtx(()=>y[9]||(y[9]=[l.createTextVNode("显示")])),_:1},8,["modelValue"])]),_:1})]),default:l.withCtx(()=>[l.createVNode(_,{justify:"start"},{default:l.withCtx(()=>[l.createVNode(x,{span:5},{default:l.withCtx(()=>y[10]||(y[10]=[l.createElementVNode("div",null,"名称",-1)])),_:1}),l.createVNode(x,{span:5},{default:l.withCtx(()=>y[11]||(y[11]=[l.createElementVNode("div",null,"字段",-1)])),_:1}),l.createVNode(x,{span:2},{default:l.withCtx(()=>[l.createVNode(S,{variant:"text",onClick:o},{default:l.withCtx(()=>[l.createVNode(C,{name:"add"})]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(i,(A,M)=>(l.openBlock(),l.createBlock(_,{key:M,justify:"start",gutter:4,style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode(x,{span:5},{default:l.withCtx(()=>[l.createVNode(O,{modelValue:A.title,"onUpdate:modelValue":$=>A.title=$,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(x,{span:5},{default:l.withCtx(()=>[l.createVNode(O,{modelValue:A.colKey,"onUpdate:modelValue":$=>A.colKey=$,onChange:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(x,{span:2},{default:l.withCtx(()=>[l.createVNode(S,{variant:"text",onClick:$=>c(M)},{default:l.withCtx(()=>[l.createVNode(C,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l.createVNode(N,{header:"样式"},{default:l.withCtx(()=>[l.createVNode(E,{labelAlign:"left"},{default:l.withCtx(()=>[l.createVNode(T,{label:"边框"},{default:l.withCtx(()=>[l.createVNode(B,{modelValue:u.bordered,"onUpdate:modelValue":y[1]||(y[1]=A=>u.bordered=A),onChange:s},null,8,["modelValue"])]),_:1}),l.createVNode(T,{label:"悬停"},{default:l.withCtx(()=>[l.createVNode(B,{modelValue:u.hover,"onUpdate:modelValue":y[2]||(y[2]=A=>u.hover=A),onChange:s},null,8,["modelValue"])]),_:1}),l.createVNode(T,{label:"显示表头"},{default:l.withCtx(()=>[l.createVNode(B,{modelValue:u.showHeader,"onUpdate:modelValue":y[3]||(y[3]=A=>u.showHeader=A),onChange:s},null,8,["modelValue"])]),_:1}),l.createVNode(T,{label:"斑马纹"},{default:l.withCtx(()=>[l.createVNode(B,{modelValue:u.stripe,"onUpdate:modelValue":y[4]||(y[4]=A=>u.stripe=A),onChange:s},null,8,["modelValue"])]),_:1}),l.createVNode(T,{label:"行默认背景"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:u.style.evenRowBackgroundColor,"onUpdate:modelValue":y[5]||(y[5]=A=>u.style.evenRowBackgroundColor=A),class:"w-full","show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue"])]),_:1}),u.stripe?(l.openBlock(),l.createBlock(T,{key:0,label:"奇数行背景"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:u.style.oddRowBackgroundColor,"onUpdate:modelValue":y[6]||(y[6]=A=>u.style.oddRowBackgroundColor=A),class:"w-full","show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue"])]),_:1})):l.createCommentVNode("",!0),l.createVNode(T,{label:"字体颜色"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:u.style.textColor,"onUpdate:modelValue":y[7]||(y[7]=A=>u.style.textColor=A),class:"w-full","show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:s},null,8,["modelValue"])]),_:1}),l.createVNode(T,{label:"背景图片"},{default:l.withCtx(()=>[l.createVNode(O,{modelValue:u.style.backgroundImageUrl,"onUpdate:modelValue":y[8]||(y[8]=A=>u.style.backgroundImageUrl=A),class:"w-full",clearable:"",onChange:s},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(d,(A,M)=>(l.openBlock(),l.createBlock(N,{key:A.sid,header:`指令-${M+1}-${A.sid}`},{headerRightContent:l.withCtx(()=>[l.createVNode(w,{size:"small"},{default:l.withCtx(()=>[M==d.length-1?(l.openBlock(),l.createBlock(S,{key:0,theme:"primary",size:"small",onClick:v},{default:l.withCtx(()=>y[12]||(y[12]=[l.createTextVNode("追加")])),_:1})):(l.openBlock(),l.createBlock(S,{key:1,theme:"warning",size:"small",onClick:$=>p(M)},{default:l.withCtx(()=>y[13]||(y[13]=[l.createTextVNode("插入")])),_:2},1032,["onClick"])),M>0?(l.openBlock(),l.createBlock(S,{key:2,theme:"danger",size:"small",onClick:$=>g(M)},{default:l.withCtx(()=>y[14]||(y[14]=[l.createTextVNode("删除")])),_:2},1032,["onClick"])):l.createCommentVNode("",!0)]),_:2},1024)]),default:l.withCtx(()=>[(l.openBlock(),l.createBlock(sOe,{key:A.sid,fields:f.value,defaultScript:A,scripts:d,onChange:$=>h($,M)},null,8,["fields","defaultScript","scripts","onChange"]))]),_:2},1032,["header"]))),128))]),_:1})}}}),uOe={class:"props-panel"},dOe={class:"props-panel"},fOe={class:"props-panel"},hOe=Gn(l.defineComponent({__name:"FileProps",setup(t){const e=l.reactive({name:"",background:void 0,color:void 0,lineCross:!1,wsUrl:"",busName:"",msgTypes:[],backgroundImage:"",grid:!1,gridSize:10,gridRotate:void 0,gridColor:void 0,rule:!0,ruleColor:void 0,wsMsgFields:[],wsMsgHandlers:[],lockState:0}),n=l.reactive({grid:!1,gridSize:10,gridRotate:void 0,gridColor:void 0,rule:!0}),r=[{label:"图纸",value:1,slot:"pen-props"},{label:"结构",value:2,slot:"struct-props"},{label:"通信",value:3,slot:"comm-props"},{label:"预设脚本",value:4,slot:"preset-script"}],a=[{label:"未锁定",value:0},{label:"禁止拖拽/编辑图元；图元可选中、高亮、触发事件等",value:1},{label:"禁止编辑图元、禁止左键移动画布；图元可选中、高亮、触发事件等",value:2},{label:"禁止缩放画布",value:3},{label:"禁止左键移动和缩放画布",value:4},{label:"画布不能移动和缩放，图元不能触发任何事件",value:10}];l.onMounted(()=>{const _=meta2d.data();e.name=_.name||"",e.background=_.background,e.color=_.color,e.lineCross=_.lineCross,e.backgroundImage=_.backgroundImage,e.grid=_.grid,e.gridSize=_.gridSize,e.gridRotate=_.gridRotate,e.gridColor=_.gridColor,e.rule=_.rule,e.ruleColor=_.ruleColor,e.bkImage=_.bkImage,e.wsUrl=_.wsUrl,e.busName=_.busName,e.msgTypes=_.msgTypes||[],e.onMessageJsCode=_.onMessageJsCode,e.wsMsgFields=_.wsMsgFields||[],e.wsMsgHandlers=_.wsMsgHandlers||[],e.lockState=_.lockState||0,Object.assign(n,meta2d.getOptions())});const i=_=>{e.lineCross?Zke(!0):tOe(),Object.assign(meta2d.store.data,e),meta2d.store.patchFlagsBackground=!0,meta2d.setGrid({grid:e.grid,gridSize:e.gridSize,gridRotate:e.gridRotate,gridColor:e.gridColor}),meta2d.setRule({rule:e.rule,ruleColor:e.ruleColor}),_=="bkImage"&&meta2d.setBackgroundImage(e.bkImage),meta2d.render()},o=l.ref(),{uploadValue:s,sizeLimit:c,headers:u}=Tg(),d=_=>{var O;console.log("upload success: ",_),_.response&&(e.bkImage=_.response.url||((O=_.response.data)==null?void 0:O.fileurl),i("bkImage"))},f=_=>{console.log("upload fail: ",_)},h=_=>{const O=e[_];if(_=="wsUrl"&&!(O!=null&&O.startsWith("ws://"))){e[_]="";return}Object.assign(meta2d.store.data,e)},{resolver:v}=Rf(e),p=()=>{const _=e.msgTypes.map(B=>Number(B)).filter(B=>!isNaN(B)),O=Os.getInstance(e.wsUrl,{busName:e.busName,msgTypes:_,enableLog:!1,onReady:()=>{console.log("%c连接成功！","color: green; font-weight: bold;"),fs.success({title:"连接成功！"})}});O.connect();const N=e.onMessageJsCode;O.subscribe(e.busName,_,B=>{try{N?new Function("data",N)(B):v(B)}catch(T){console.log("error: ",T)}})},g=l.ref(),m=()=>{g.value&&g.value.open(e.onMessageJsCode)},y=_=>{e.onMessageJsCode=_,h("onMessageJsCode")},b=()=>{e.wsMsgFields.push({label:"",value:""})},w=_=>{e.wsMsgFields.splice(_,1)},x=()=>{h("wsMsgFields")},C=_=>{console.log("handlers: ",_),e.wsMsgHandlers=_,h("wsMsgHandlers")},S=_=>{console.log("preset script config: ",_),e.presetScriptsConfig=_,Object.assign(meta2d.store.data,e)};return(_,O)=>{const N=l.resolveComponent("t-input"),B=l.resolveComponent("t-form-item"),T=l.resolveComponent("t-divider"),k=l.resolveComponent("t-switch"),E=l.resolveComponent("t-input-number"),I=l.resolveComponent("t-color-picker"),A=l.resolveComponent("t-upload"),M=l.resolveComponent("t-tooltip"),$=l.resolveComponent("t-select"),U=l.resolveComponent("t-form"),F=l.resolveComponent("t-tag-input"),j=l.resolveComponent("t-button"),W=l.resolveComponent("t-space"),H=l.resolveComponent("t-collapse-panel"),J=l.resolveComponent("t-icon"),Y=l.resolveComponent("t-col"),D=l.resolveComponent("t-row"),q=l.resolveComponent("t-collapse");return l.openBlock(),l.createElementBlock("div",null,[l.createVNode(Eg,{tabs:r},{"pen-props":l.withCtx(()=>[l.createElementVNode("div",uOe,[l.createVNode(U,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(B,{label:"名称",name:"name"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:e.name,"onUpdate:modelValue":O[0]||(O[0]=z=>e.name=z),onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(T),l.createVNode(B,{label:"网格",name:"grid"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:e.grid,"onUpdate:modelValue":O[1]||(O[1]=z=>e.grid=z),onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"网格大小",name:"gridSize"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:e.gridSize,"onUpdate:modelValue":O[2]||(O[2]=z=>e.gridSize=z),min:0,onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"网格角度",name:"gridRotate"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:e.gridRotate,"onUpdate:modelValue":O[3]||(O[3]=z=>e.gridRotate=z),modelModifiers:{number:!0},onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"网格颜色",name:"gridColor"},{default:l.withCtx(()=>[l.createVNode(I,{class:"w-full",modelValue:e.gridColor,"onUpdate:modelValue":O[4]||(O[4]=z=>e.gridColor=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(T),l.createVNode(B,{label:"标尺",name:"rule"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:e.rule,"onUpdate:modelValue":O[5]||(O[5]=z=>e.rule=z),onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"标尺颜色",name:"ruleColor"},{default:l.withCtx(()=>[l.createVNode(I,{class:"w-full",modelValue:e.ruleColor,"onUpdate:modelValue":O[6]||(O[6]=z=>e.ruleColor=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(T),l.createVNode(B,{label:"背景颜色",name:"background"},{default:l.withCtx(()=>[l.createVNode(I,{class:"w-full",modelValue:e.background,"onUpdate:modelValue":O[7]||(O[7]=z=>e.background=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"图元默认颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(I,{class:"w-full",modelValue:e.color,"onUpdate:modelValue":O[8]||(O[8]=z=>e.color=z),"show-primary-color-preview":!1,format:"CSS",clearable:"","color-modes":["monochrome"],onChange:i},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"背景图片"},{default:l.withCtx(()=>[l.createVNode(A,{ref_key:"uploadRef",ref:o,modelValue:l.unref(s),"onUpdate:modelValue":O[9]||(O[9]=z=>l.isRef(s)?s.value=z:null),action:_.$attrs.uploadUrl||"https://service-bv448zsw-1257786608.gz.apigw.tencentcs.com/api/upload-demo",headers:l.unref(u),name:"object",sizeLimit:l.unref(c),theme:"image",tips:"请选择单张小于1MB的图片上传",accept:"image/*",onFail:f,onSuccess:d},null,8,["modelValue","action","headers","sizeLimit"])]),_:1}),l.createVNode(B,{label:"背景图片地址",name:"bkImage"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:e.bkImage,"onUpdate:modelValue":O[10]||(O[10]=z=>e.bkImage=z),clearable:"",onChange:O[11]||(O[11]=z=>i("bkImage"))},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"连线相交弯曲",name:"lineCross"},{default:l.withCtx(()=>[l.createVNode(M,{content:"当直线或折线两两相交时，其中相交的交点会自动弯曲显示"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:e.lineCross,"onUpdate:modelValue":O[12]||(O[12]=z=>e.lineCross=z),onChange:i},null,8,["modelValue"])]),_:1})]),_:1}),l.createVNode(T),l.createVNode(B,{label:"预览时锁定",name:"lockState"},{default:l.withCtx(()=>[l.createVNode(M,{content:"仅预览时有效"},{default:l.withCtx(()=>[l.createVNode($,{modelValue:e.lockState,"onUpdate:modelValue":O[13]||(O[13]=z=>e.lockState=z),options:a,clearable:"",onChange:i},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),"struct-props":l.withCtx(()=>[l.renderSlot(_.$slots,"struct",{},void 0,!0)]),"comm-props":l.withCtx(()=>[l.createElementVNode("div",dOe,[l.createVNode(q,{defaultExpandAll:"",class:"meta-collapse"},{default:l.withCtx(()=>[l.createVNode(H,{value:"0",header:"WebSocket"},{default:l.withCtx(()=>[l.createVNode(U,{data:e,"label-align":"left",size:"small",labelWidth:"80px"},{default:l.withCtx(()=>[l.createVNode(B,{label:"地址",name:"wsUrl"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:e.wsUrl,"onUpdate:modelValue":O[14]||(O[14]=z=>e.wsUrl=z),clearable:"",placeholder:"ws:// 开头，不符合则不保存",onBlur:O[15]||(O[15]=z=>h("wsUrl"))},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"消息名称",name:"busName"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:e.busName,"onUpdate:modelValue":O[16]||(O[16]=z=>e.busName=z),clearable:"",onChange:O[17]||(O[17]=z=>h("busName"))},null,8,["modelValue"])]),_:1}),l.createVNode(B,{label:"消息类型",name:"msgTypes"},{default:l.withCtx(()=>[l.createVNode(F,{modelValue:e.msgTypes,"onUpdate:modelValue":O[18]||(O[18]=z=>e.msgTypes=z),clearable:"",placeholder:"消息类型, 数字, 回车添加",onChange:O[19]||(O[19]=z=>h("msgTypes"))},null,8,["modelValue"])]),_:1}),l.createVNode(T),l.createVNode(W,null,{default:l.withCtx(()=>[l.createVNode(j,{onClick:p},{default:l.withCtx(()=>O[20]||(O[20]=[l.createTextVNode("测试连接")])),_:1})]),_:1})]),_:1},8,["data"])]),_:1}),l.createVNode(H,{header:"消息处理代码"},{default:l.withCtx(()=>[l.createVNode(j,{block:"",onClick:m},{default:l.withCtx(()=>O[21]||(O[21]=[l.createTextVNode("编辑代码")])),_:1})]),_:1}),l.createVNode(H,{header:"消息状态字段"},{headerRightContent:l.withCtx(()=>[l.createVNode(M,{content:"用于消息处理器的触发条件",placement:"top-right"},{default:l.withCtx(()=>[l.createVNode(j,{variant:"text"},{default:l.withCtx(()=>[l.createVNode(J,{name:"help"})]),_:1})]),_:1})]),default:l.withCtx(()=>[l.createVNode(j,{block:"",onClick:b},{default:l.withCtx(()=>O[22]||(O[22]=[l.createTextVNode("新增")])),_:1}),O[23]||(O[23]=l.createElementVNode("br",null,null,-1)),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(e.wsMsgFields,(z,K)=>(l.openBlock(),l.createBlock(D,{key:K,justify:"start",style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode(Y,{span:10},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:z.value,"onUpdate:modelValue":P=>z.value=P,onChange:x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(Y,{span:2},{default:l.withCtx(()=>[l.createVNode(j,{variant:"text",onClick:P=>w(K)},{default:l.withCtx(()=>[l.createVNode(J,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l.createVNode(H,{header:"消息处理队列"},{headerRightContent:l.withCtx(()=>[l.createVNode(M,{content:"【消息处理代码】存在时，此处的设置无效",placement:"top-right"},{default:l.withCtx(()=>[l.createVNode(j,{variant:"text"},{default:l.withCtx(()=>[l.createVNode(J,{name:"help"})]),_:1})]),_:1})]),default:l.withCtx(()=>[l.createVNode(lOe,{wsMsgFields:e.wsMsgFields,wsMsgHandlers:e.wsMsgHandlers,onChange:C},null,8,["wsMsgFields","wsMsgHandlers"])]),_:1})]),_:1})])]),"preset-script":l.withCtx(()=>[l.createElementVNode("div",fOe,[l.createVNode(cOe,{onChange:S})])]),_:3}),l.createVNode(oOe,{ref_key:"codeEditor",ref:g,onConfirm:y},null,512)])}}}),[["__scopeId","data-v-2ee2a5a3"]]),vOe=[{x:-10,duration:100},{x:10,duration:80},{x:-10,duration:50},{x:10,duration:30},{x:0,duration:300}],pOe=[{y:-10,duration:100},{y:10,duration:80},{y:-10,duration:50},{y:10,duration:30},{y:0,duration:300}],gOe=[{duration:100,rotate:-10},{duration:100,rotate:10},{duration:100,rotate:0}],mOe=[{duration:100,scale:.8},{duration:400,scale:1},{duration:100,scale:1.2}],yOe=[{duration:1e3,rotate:360}],bOe=[{duration:1e3,rotate:-360}],wOe=[{duration:2e3,progress:1}],xOe=[{duration:1e3,color:"green"},{duration:2e3,color:"red"}],T6=[{label:"上下跳动",value:"moveYFrames"},{label:"左右跳动",value:"moveXFrames"},{label:"心跳",value:"scaleFrames"},{label:"摇摆",value:"rotateXFrames"},{label:"旋转",value:"rotateFrames"},{label:"反向旋转",value:"rotateFrames2"},{label:"进度",value:"processFrames"},{label:"自定义",value:"x-custom"}],k6=[{label:"水流",value:0},{label:"水珠滚动",value:1},{label:"圆点",value:2},{label:"箭头",value:3},{label:"水滴",value:4}],O6={moveXFrames:vOe,moveYFrames:pOe,rotateXFrames:gOe,scaleFrames:mOe,processFrames:wOe,colorFrames:xOe,rotateFrames:yOe,rotateFrames2:bOe},COe={class:"props-panel__editor"},_Oe={class:"ml-16",style:{width:"50px","line-height":"30px"}},E6=Gn(l.defineComponent({__name:"PropEditor",props:{data:{type:Object,default:()=>({})},statusList:{type:Array,default:()=>[]}},emits:["propChange"],setup(t,{emit:e}){const n=e,r=i=>{n("propChange",i)},a=i=>{n("propChange",i)};return(i,o)=>{const s=l.resolveComponent("t-input-number"),c=l.resolveComponent("t-form-item"),u=l.resolveComponent("t-color-picker"),d=l.resolveComponent("t-option"),f=l.resolveComponent("t-select"),h=l.resolveComponent("t-slider"),v=l.resolveComponent("t-divider"),p=l.resolveComponent("t-switch"),g=l.resolveComponent("t-input"),m=l.resolveComponent("t-form");return l.openBlock(),l.createElementBlock("div",COe,[l.createVNode(m,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(c,{label:"时长(ms)",name:"duration"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.duration,"onUpdate:modelValue":o[0]||(o[0]=y=>t.data.duration=y),min:0,onChange:o[1]||(o[1]=y=>r("duration"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"偏移X",name:"x"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.x,"onUpdate:modelValue":o[2]||(o[2]=y=>t.data.x=y),placeholder:"px",onChange:o[3]||(o[3]=y=>r("x"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"偏移Y",name:"y"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.y,"onUpdate:modelValue":o[4]||(o[4]=y=>t.data.y=y),placeholder:"px",onChange:o[5]||(o[5]=y=>r("y"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.color,"onUpdate:modelValue":o[6]||(o[6]=y=>t.data.color=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[7]||(o[7]=y=>r("color"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"浮动颜色",name:"hoverColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.hoverColor,"onUpdate:modelValue":o[8]||(o[8]=y=>t.data.hoverColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[9]||(o[9]=y=>r("hoverColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"选中颜色",name:"activeColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.activeColor,"onUpdate:modelValue":o[10]||(o[10]=y=>t.data.activeColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[11]||(o[11]=y=>r("activeColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"背景",name:"background"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.background,"onUpdate:modelValue":o[12]||(o[12]=y=>t.data.background=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[13]||(o[13]=y=>r("background"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"线条",name:"dash"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.dash,"onUpdate:modelValue":o[14]||(o[14]=y=>t.data.dash=y),onChange:o[15]||(o[15]=y=>r("dash"))},{default:l.withCtx(()=>[(l.openBlock(),l.createBlock(d,{key:0,value:0,label:"实线"})),(l.openBlock(),l.createBlock(d,{key:1,value:1,label:"虚线"}))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(c,{label:"线条宽度",name:"lineWidth"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.lineWidth,"onUpdate:modelValue":o[16]||(o[16]=y=>t.data.lineWidth=y),onChange:o[17]||(o[17]=y=>r("lineWidth"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"圆角",name:"borderRadius"},{default:l.withCtx(()=>[l.createVNode(s,{min:0,max:1,step:.01,modelValue:t.data.borderRadius,"onUpdate:modelValue":o[18]||(o[18]=y=>t.data.borderRadius=y),onChange:o[19]||(o[19]=y=>r("borderRadius"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"不透明度",name:"globalAlpha"},{default:l.withCtx(()=>[l.createVNode(h,{modelValue:t.data.globalAlpha,"onUpdate:modelValue":o[20]||(o[20]=y=>t.data.globalAlpha=y),min:0,max:1,step:.01,onChange:o[21]||(o[21]=y=>r("globalAlpha"))},null,8,["modelValue"]),l.createElementVNode("span",_Oe,l.toDisplayString(t.data.globalAlpha),1)]),_:1}),l.createVNode(c,{label:"阴影颜色",name:"shadowColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.shadowColor,"onUpdate:modelValue":o[22]||(o[22]=y=>t.data.shadowColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[23]||(o[23]=y=>r("shadowColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"阴影模糊",name:"shadowBlur"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.shadowBlur,"onUpdate:modelValue":o[24]||(o[24]=y=>t.data.shadowBlur=y),min:0,onChange:o[25]||(o[25]=y=>r("shadowBlur"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"阴影X偏移",name:"shadowOffsetX"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.shadowOffsetX,"onUpdate:modelValue":o[26]||(o[26]=y=>t.data.shadowOffsetX=y),onChange:o[27]||(o[27]=y=>r("shadowOffsetX"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"阴影Y偏移",name:"shadowOffsetY"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.shadowOffsetY,"onUpdate:modelValue":o[28]||(o[28]=y=>t.data.shadowOffsetY=y),onChange:o[29]||(o[29]=y=>r("shadowOffsetY"))},null,8,["modelValue"])]),_:1}),l.createVNode(v),l.createVNode(c,{label:"文字阴影",name:"textHasShadow"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.textHasShadow,"onUpdate:modelValue":o[30]||(o[30]=y=>t.data.textHasShadow=y),onChange:o[31]||(o[31]=y=>r("textHasShadow"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"文本",name:"text"},{default:l.withCtx(()=>[l.createVNode(g,{modelValue:t.data.text,"onUpdate:modelValue":o[32]||(o[32]=y=>t.data.text=y),clearable:"",onChange:o[33]||(o[33]=y=>r("text"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"字体",name:"fontSize"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.fontSize,"onUpdate:modelValue":o[34]||(o[34]=y=>t.data.fontSize=y),onChange:o[35]||(o[35]=y=>r("fontSize"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"文字颜色类型",name:"textType"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.textType,"onUpdate:modelValue":o[36]||(o[36]=y=>t.data.textType=y),onChange:o[37]||(o[37]=y=>r("textType"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"hex",value:0,label:"纯色"}),l.createVNode(d,{key:"rgb",value:1,label:"线性渐变"}),l.createVNode(d,{key:"rgba",value:2,label:"径向渐变"})]),_:1},8,["modelValue"])]),_:1}),[1,2].includes(t.data.textType)?(l.openBlock(),l.createBlock(c,{key:0,label:"文字渐变",name:"textGradientColors"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.textGradientColors,"onUpdate:modelValue":o[38]||(o[38]=y=>t.data.textGradientColors=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["linear-gradient"],clearable:"",onChange:o[39]||(o[39]=y=>r("textGradientColors"))},null,8,["modelValue"])]),_:1})):(l.openBlock(),l.createBlock(c,{key:1,label:"文字颜色",name:"textColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.textColor,"onUpdate:modelValue":o[40]||(o[40]=y=>t.data.textColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[41]||(o[41]=y=>r("textColor"))},null,8,["modelValue"])]),_:1})),l.createVNode(c,{label:"文本风格",name:"fontStyle"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.fontStyle,"onUpdate:modelValue":o[42]||(o[42]=y=>t.data.fontStyle=y),onChange:o[43]||(o[43]=y=>r("fontStyle"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"normal",value:"normal",label:"常规"}),l.createVNode(d,{key:"italic",value:"italic",label:"斜体"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(c,{label:"文本粗细",name:"fontWeight"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.fontWeight,"onUpdate:modelValue":o[44]||(o[44]=y=>t.data.fontWeight=y),onChange:o[45]||(o[45]=y=>r("fontWeight"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"normal",value:"normal",label:"常规"}),l.createVNode(d,{key:"bold",value:"bold",label:"加粗"}),l.createVNode(d,{key:"lighter",value:"lighter",label:"更细"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(c,{label:"换行",name:"whiteSpace"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.whiteSpace,"onUpdate:modelValue":o[46]||(o[46]=y=>t.data.whiteSpace=y),onChange:o[47]||(o[47]=y=>r("whiteSpace"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"normal",value:"normal",label:"常规"}),l.createVNode(d,{key:"nowrap",value:"nowrap",label:"不换行"}),l.createVNode(d,{key:"pre-line",value:"pre-line",label:"换行符换行"}),l.createVNode(d,{key:"break-all",value:"break-all",label:"永远换行"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(c,{label:"超出省略",name:"ellipsis"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.ellipsis,"onUpdate:modelValue":o[48]||(o[48]=y=>t.data.ellipsis=y),onChange:o[49]||(o[49]=y=>r("ellipsis"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"下划线",name:"textDecoration"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.textDecoration,"onUpdate:modelValue":o[50]||(o[50]=y=>t.data.textDecoration=y),onChange:o[51]||(o[51]=y=>r("textDecoration"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"下划线颜色",name:"textDecorationColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.textDecorationColor,"onUpdate:modelValue":o[52]||(o[52]=y=>t.data.textDecorationColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[53]||(o[53]=y=>r("textDecorationColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"删除线",name:"textStrickout"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.textStrickout,"onUpdate:modelValue":o[54]||(o[54]=y=>t.data.textStrickout=y),onChange:o[55]||(o[55]=y=>r("textStrickout"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"删除线颜色",name:"textStrickoutColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.textStrickoutColor,"onUpdate:modelValue":o[56]||(o[56]=y=>t.data.textStrickoutColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[57]||(o[57]=y=>r("textStrickoutColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"文字水平对齐",name:"textAlign"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.textAlign,"onUpdate:modelValue":o[58]||(o[58]=y=>t.data.textAlign=y),onChange:o[59]||(o[59]=y=>r("textAlign"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"left",value:"left",label:"左对齐"}),l.createVNode(d,{key:"center",value:"center",label:"居中"}),l.createVNode(d,{key:"right",value:"right",label:"右对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(c,{label:"文字垂直对齐",name:"textBaseline"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.textBaseline,"onUpdate:modelValue":o[60]||(o[60]=y=>t.data.textBaseline=y),onChange:o[61]||(o[61]=y=>r("textBaseline"))},{default:l.withCtx(()=>[l.createVNode(d,{key:"top",value:"top",label:"顶部对齐"}),l.createVNode(d,{key:"middle",value:"middle",label:"居中"}),l.createVNode(d,{key:"bottom",value:"bottom",label:"底部对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(v),l.createVNode(c,{label:"宽",name:"width"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.width,"onUpdate:modelValue":o[62]||(o[62]=y=>t.data.width=y),onChange:o[63]||(o[63]=y=>a("width"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"高",name:"height"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.height,"onUpdate:modelValue":o[64]||(o[64]=y=>t.data.height=y),onChange:o[65]||(o[65]=y=>a("height"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"旋转角度",name:"rotate"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.rotate,"onUpdate:modelValue":o[66]||(o[66]=y=>t.data.rotate=y),onChange:o[67]||(o[67]=y=>r("rotate"))},null,8,["modelValue"])]),_:1}),l.createVNode(v),l.createVNode(c,{label:"进度",name:"progress"},{default:l.withCtx(()=>[l.createVNode(s,{modelValue:t.data.progress,"onUpdate:modelValue":o[68]||(o[68]=y=>t.data.progress=y),step:.1,min:0,max:1,onChange:o[69]||(o[69]=y=>r("progress"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"进度颜色",name:"progressColor"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.progressColor,"onUpdate:modelValue":o[70]||(o[70]=y=>t.data.progressColor=y),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:o[71]||(o[71]=y=>r("progressColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"渐变颜色",name:"progressGradientColors"},{default:l.withCtx(()=>[l.createVNode(u,{class:"w-full",modelValue:t.data.progressGradientColors,"onUpdate:modelValue":o[72]||(o[72]=y=>t.data.progressGradientColors=y),"show-primary-color-preview":!1,clearable:"",format:"CSS","color-modes":["linear-gradient"],onChange:o[73]||(o[73]=y=>r("progressGradientColors"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"垂直进度",name:"verticalProgress"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.verticalProgress,"onUpdate:modelValue":o[74]||(o[74]=y=>t.data.verticalProgress=y),onChange:o[75]||(o[75]=y=>r("verticalProgress"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"反向进度",name:"reverseProgress"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.reverseProgress,"onUpdate:modelValue":o[76]||(o[76]=y=>t.data.reverseProgress=y),onChange:o[77]||(o[77]=y=>r("reverseProgress"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"水平翻转",name:"flipX"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.flipX,"onUpdate:modelValue":o[78]||(o[78]=y=>t.data.flipX=y),onChange:o[79]||(o[79]=y=>r("flipX"))},null,8,["modelValue"])]),_:1}),l.createVNode(c,{label:"垂直翻转",name:"flipY"},{default:l.withCtx(()=>[l.createVNode(p,{modelValue:t.data.flipY,"onUpdate:modelValue":o[80]||(o[80]=y=>t.data.flipY=y),onChange:o[81]||(o[81]=y=>r("flipY"))},null,8,["modelValue"])]),_:1}),l.createVNode(v),t.data.penName=="combine"?(l.openBlock(),l.createBlock(c,{key:2,label:"状态",name:"status"},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:t.data.showChild,"onUpdate:modelValue":o[82]||(o[82]=y=>t.data.showChild=y),onChange:o[83]||(o[83]=y=>r("showChild"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.statusList,(y,b)=>(l.openBlock(),l.createBlock(d,{key:y.value,value:b,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):l.createCommentVNode("",!0)]),_:1})])}}}),[["__scopeId","data-v-b82ab405"]]),SOe=Gn(l.defineComponent({__name:"EventEditor",props:{defaultEventsValue:{type:Array,default:()=>[]}},emits:["change"],setup(t,{emit:e}){const n=t,r=l.ref(n.defaultEventsValue);l.watch(()=>n.defaultEventsValue,x=>{x?r.value=x:r.value=[]});const a=[{label:"单击",value:"click"},{label:"双击",value:"dblclick"},{label:"鼠标按下",value:"mousedown"},{label:"鼠标抬起",value:"mouseup"},{label:"鼠标进入",value:"enter"},{label:"鼠标离开",value:"leave"}],i=[{label:"打开链接",value:Ct.Link},{label:"更改属性",value:Ct.SetProps},{label:"执行动画",value:Ct.StartAnimate},{label:"暂停动画",value:Ct.PauseAnimate},{label:"停止动画",value:Ct.StopAnimate},{label:"执行JS代码",value:Ct.JS},{label:"对话框",value:Ct.Dialog}],o=[{label:"视频",value:Nt.Video},{label:"弹窗文字",value:Nt.ShowText}],s=[{label:"模态",value:"modal"},{label:"全屏",value:"full-screen"}],c=()=>{r.value.push({name:"",action:0,value:"",params:"",where:{},extend:{}})},u=x=>{r.value=r.value.filter(C=>C!==x),f()},d=e,f=()=>{d("change",r.value)},h=x=>{console.log("action change: ",x),x.action==Ct.JS&&(x.params={url:"",action:""},x.value=""),f()},v=(x,C)=>{const S=Xke[x];S&&(C.value=S),f()},p=[{label:"背景颜色",value:"background"},{label:"颜色",value:"color"},{label:"文字",value:"text"},{label:"进度",value:"progress"},{label:"显示",value:"visible"},{label:"状态",value:"showChild"}],g=l.ref([]),m=()=>{if(g.value.length>=6){$r.warning("最多只能添加6个属性");return}g.value.push({prop:"",value:""})},y=x=>{const C=g.value.indexOf(x);g.value.splice(C,1)},b=x=>{const C={};g.value.forEach(S=>{C[S.prop]=S.value}),x.value=C,d("change",r.value)},w=x=>{const C=r.value[Number(x)];C&&C.value&&typeof C.value=="object"&&(g.value=Object.keys(C.value).map(S=>({prop:S,value:C.value[S]})))};return(x,C)=>{const S=l.resolveComponent("t-button"),_=l.resolveComponent("t-select"),O=l.resolveComponent("t-form-item"),N=l.resolveComponent("t-input"),B=l.resolveComponent("t-col"),T=l.resolveComponent("t-icon"),k=l.resolveComponent("t-row"),E=l.resolveComponent("t-input-number"),I=l.resolveComponent("t-textarea"),A=l.resolveComponent("t-color-picker"),M=l.resolveComponent("t-form"),$=l.resolveComponent("t-collapse-panel"),U=l.resolveComponent("t-collapse");return l.openBlock(),l.createElementBlock(l.Fragment,null,[C[3]||(C[3]=l.createElementVNode("br",null,null,-1)),l.createVNode(S,{block:"",theme:"primary",onClick:c},{default:l.withCtx(()=>C[0]||(C[0]=[l.createTextVNode("添加事件")])),_:1}),l.createVNode(U,{class:"meta-collapse","expand-mutex":"",onChange:w},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(r.value,F=>(l.openBlock(),l.createBlock($,{header:"事件"},{headerRightContent:l.withCtx(()=>[l.createVNode(S,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:j=>u(F)},{default:l.withCtx(()=>[l.createVNode(T,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(M,{labelAlign:"left"},{default:l.withCtx(()=>[l.createVNode(O,{label:"事件类型"},{default:l.withCtx(()=>[l.createVNode(_,{modelValue:F.name,"onUpdate:modelValue":j=>F.name=j,options:a,onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"事件行为"},{default:l.withCtx(()=>[l.createVNode(_,{modelValue:F.action,"onUpdate:modelValue":j=>F.action=j,options:i,onChange:j=>h(F)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),F.action===l.unref(Ct).Link?(l.openBlock(),l.createBlock(O,{key:0,label:"链接地址"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.value,"onUpdate:modelValue":j=>F.value=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.action===l.unref(Ct).SetProps?(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[l.createVNode(O,{label:"目标"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params,"onUpdate:modelValue":j=>F.params=j,placeholder:"可输入目标图元的ID/Tag",clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(k,{justify:"start"},{default:l.withCtx(()=>[l.createVNode(B,{span:5},{default:l.withCtx(()=>C[1]||(C[1]=[l.createElementVNode("div",null,"属性",-1)])),_:1}),l.createVNode(B,{span:5},{default:l.withCtx(()=>C[2]||(C[2]=[l.createElementVNode("div",null,"值",-1)])),_:1}),l.createVNode(B,{span:2},{default:l.withCtx(()=>[l.createVNode(S,{variant:"text",onClick:m},{default:l.withCtx(()=>[l.createVNode(T,{name:"add"})]),_:1})]),_:1})]),_:1}),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(g.value,(j,W)=>(l.openBlock(),l.createBlock(k,{key:W,justify:"start",gutter:4,style:{"margin-bottom":"4px"}},{default:l.withCtx(()=>[l.createVNode(B,{span:5},{default:l.withCtx(()=>[l.createVNode(_,{modelValue:j.prop,"onUpdate:modelValue":H=>j.prop=H,options:p,onChange:H=>b(F)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode(B,{span:5},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:j.value,"onUpdate:modelValue":H=>j.value=H,onChange:H=>b(F)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),l.createVNode(B,{span:2},{default:l.withCtx(()=>[l.createVNode(S,{variant:"text",onClick:H=>y(j)},{default:l.withCtx(()=>[l.createVNode(T,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))],64)):l.createCommentVNode("",!0),[l.unref(Ct).PauseAnimate,l.unref(Ct).StopAnimate,l.unref(Ct).StartAnimate].includes(F.action)?(l.openBlock(),l.createBlock(O,{key:2,label:"目标"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.value,"onUpdate:modelValue":j=>F.value=j,placeholder:"可输入目标图元的ID/Tag",clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.action===l.unref(Ct).Dialog?(l.openBlock(),l.createElementBlock(l.Fragment,{key:3},[l.createVNode(O,{label:"窗口标题"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.value,"onUpdate:modelValue":j=>F.value=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"URL"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params,"onUpdate:modelValue":j=>F.params=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),F.extend?(l.openBlock(),l.createBlock(O,{key:0,label:"窗口宽度"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:F.extend.width,"onUpdate:modelValue":j=>F.extend.width=j,onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.extend?(l.openBlock(),l.createBlock(O,{key:1,label:"窗口高度"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:F.extend.height,"onUpdate:modelValue":j=>F.extend.height=j,onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.extend?(l.openBlock(),l.createBlock(O,{key:2,label:"X偏移"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:F.extend.x,"onUpdate:modelValue":j=>F.extend.x=j,onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.extend?(l.openBlock(),l.createBlock(O,{key:3,label:"Y偏移"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:F.extend.y,"onUpdate:modelValue":j=>F.extend.y=j,onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0)],64)):F.action===l.unref(Ct).JS?(l.openBlock(),l.createElementBlock(l.Fragment,{key:4},[l.createVNode(O,{label:"扩展行为"},{default:l.withCtx(()=>[l.createVNode(_,{modelValue:F.params.action,"onUpdate:modelValue":j=>F.params.action=j,options:o,onChange:j=>v(j,F)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),[l.unref(Nt).Video,l.unref(Nt).ShowText].includes(F.params.action)?(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[l.createVNode(O,{label:"窗口标题"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.title,"onUpdate:modelValue":j=>F.params.title=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),F.params.action===l.unref(Nt).Video?(l.openBlock(),l.createBlock(O,{key:0,label:"视频URL"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.url,"onUpdate:modelValue":j=>F.params.url=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params.action===l.unref(Nt).ShowText?(l.openBlock(),l.createBlock(O,{key:1,label:"文本"},{default:l.withCtx(()=>[l.createVNode(I,{modelValue:F.params.text,"onUpdate:modelValue":j=>F.params.text=j},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params?(l.openBlock(),l.createBlock(O,{key:2,label:"窗口宽度"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.width,"onUpdate:modelValue":j=>F.params.width=j,placeholder:"示例：320, '500px', '80%'",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params&&F.params.action==l.unref(Nt).ShowText?(l.openBlock(),l.createBlock(O,{key:3,label:"文本高度"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.height,"onUpdate:modelValue":j=>F.params.height=j,placeholder:"示例：320, '500px', '80%'",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params?(l.openBlock(),l.createBlock(O,{key:4,label:"对话框类型"},{default:l.withCtx(()=>[l.createVNode(_,{modelValue:F.params.mode,"onUpdate:modelValue":j=>F.params.mode=j,clearable:"",options:s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params?(l.openBlock(),l.createBlock(O,{key:5,label:"标题栏上间距"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.headerMarginTop,"onUpdate:modelValue":j=>F.params.headerMarginTop=j,placeholder:"示例：'10px'",clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),F.params?(l.openBlock(),l.createBlock(O,{key:6,label:"内容下间距"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.contentPaddingBottom,"onUpdate:modelValue":j=>F.params.contentPaddingBottom=j,placeholder:"示例：'10px'",clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),l.createVNode(O,{label:"背景颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.backgroundColor,"onUpdate:modelValue":j=>F.params.backgroundColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"背景图片"},{default:l.withCtx(()=>[l.createVNode(N,{modelValue:F.params.backgroundImageUrl,"onUpdate:modelValue":j=>F.params.backgroundImageUrl=j,clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"标题颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.titleColor,"onUpdate:modelValue":j=>F.params.titleColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),F.params.action===l.unref(Nt).ShowText?(l.openBlock(),l.createBlock(O,{key:7,label:"文本颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.textColor,"onUpdate:modelValue":j=>F.params.textColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.createCommentVNode("",!0),l.createVNode(O,{label:"控制栏背景颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.controlBarBackgroundColor,"onUpdate:modelValue":j=>F.params.controlBarBackgroundColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"控制栏按钮颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.controlColor,"onUpdate:modelValue":j=>F.params.controlColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"已播放进度颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.controlPlayProgressBarColor,"onUpdate:modelValue":j=>F.params.controlPlayProgressBarColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(O,{label:"已加载进度颜色"},{default:l.withCtx(()=>[l.createVNode(A,{class:"w-full",modelValue:F.params.controlLoadProgressBarColor,"onUpdate:modelValue":j=>F.params.controlLoadProgressBarColor=j,"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):l.createCommentVNode("",!0)],64)):l.createCommentVNode("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})],64)}}}),[["__scopeId","data-v-94e1adb2"]]);function P6(t,e){const n=meta2d.getPenRect(t);let r=n.x,a=n.y,i=0,o=0,s=r,c=a,u=null,d=l.ref(!1),f=l.ref(!1),h=0;function v(b){if(f.value){cancelAnimationFrame(u);return}if(d.value){i=b-h,u=requestAnimationFrame(v);return}i||(i=b),h=b-i;const w=e[o],x=Math.min(h/w.duration,1),C=s+(w.x||0)*x,S=c+(w.y||0)*x;meta2d.setValue({id:t.id,x:C,y:S}),x<1?u=requestAnimationFrame(v):(o++,o<e.length?(s=C,c=S,i=null,u=requestAnimationFrame(v)):y())}function p(){d.value=!1,f.value=!1,i=null,o=0,u=requestAnimationFrame(v)}function g(){d.value=!0}function m(){d.value&&(d.value=!1,u&&cancelAnimationFrame(u),u=requestAnimationFrame(v))}function y(){f.value=!0,s=r,c=a}return{play:p,pause:g,resume:m,stop:y,isPaused:d,isStopped:f}}const TOe={class:""},kOe={class:"props-panel"},OOe={class:"ml-16",style:{width:"50px","line-height":"30px"}},EOe={class:"props-panel"},POe={class:"props-panel"},IOe={class:"button__wrapper"},AOe={class:"props-panel"},I6="meta2d_tmp_copy_string",NOe=Gn(l.defineComponent({__name:"PenProps",setup(t){const e=l.computed(()=>[{label:"图元",value:1,slot:"pen"},{label:"图片",value:2,slot:"image"},{label:"动效",value:3,slot:"animate"},{label:"结构",value:4,slot:"struct"},{label:"数据",value:5,slot:"data"},{label:"事件",value:6,slot:"event"}].filter(Y=>Y.slot=="image"?r.value.name==Y.slot:!0)),{selections:n}=bu(),r=l.ref(),a=l.ref(),i=l.ref(1),o=l.computed(()=>{var Y;return((Y=r.value)==null?void 0:Y.name)=="line"});l.onMounted(()=>{i.value=1,s()});const s=()=>{M.value="",r.value=n.pen||{},r.value.globalAlpha==null&&(r.value.globalAlpha=1),r.value.tags||(r.value.tags=[]),a.value=meta2d.getPenRect(r.value),i.value==2&&(["image"].includes(r.value.name)||(i.value=1))},c=l.computed(()=>{var Y;return((Y=r.value)==null?void 0:Y.name)!="combine"?[]:r.value.children.map((D,q)=>({label:`状态${q+1}`,value:D}))}),u=(Y=!1)=>{if(r.value.animateType=="x-custom"&&r.value.pathFrames){let D=r.value.pathAnimateControl;(!D||!D.play)&&(r.value.pathAnimateControl=P6(r.value,r.value.pathFrames),D=r.value.pathAnimateControl),Y?D.play():D.stop();return}Y?meta2d.startAnimate(r.value.id):meta2d.stopAnimate(r.value.id)},d=l.ref(!1),f=l.ref([]),h=()=>{f.value=Te(r.value.frames||[]),d.value=!0},v=()=>{console.log("custom frames: ",f.value),r.value.frames=Te(f.value),d.value=!1,l.nextTick(()=>{f.value=[]})},p=()=>{f.value.push({duration:100,globalAlpha:1,penName:r.value.name})},g=Y=>{const D=f.value.indexOf(Y);D>-1&&f.value.splice(D,1)},m=l.watch(()=>{var Y;return(Y=n.pen)==null?void 0:Y.id},s),y=[void 0,[5,5]],b=Y=>{const D={id:r.value.id};if(D[Y]=r.value[Y],Y==="dash"&&(D.lineDash=y[D[Y]]),Y=="animateType"){console.log("animate type: ",D);const q=D.animateType,z=O6[q];D.frames=z}console.log("change value: ",D),meta2d.setValue(D,{render:!0}),console.log("meta2d: ",meta2d)},w=Y=>{const D={id:r.value.id};D[Y]=a.value[Y],meta2d.setValue(D,{render:!0})},x=()=>{meta2d.top(),meta2d.render()},C=()=>{meta2d.bottom(),meta2d.render()},S=()=>{meta2d.up(),meta2d.render()},_=()=>{meta2d.down(),meta2d.render()};l.onUnmounted(()=>{m()});const O=l.ref(),{uploadValue:N,sizeLimit:B,headers:T}=Tg(),k=Y=>{var D;console.log("upload success: ",Y),Y.response&&(r.value.image=Y.response.url||((D=Y.response.data)==null?void 0:D.fileurl),b("image"))},E=Y=>{console.log("upload fail: ",Y)},I=()=>{L2e(r.value.id).then(Y=>{console.log("copy id: ",Y),$r.success({content:"复制成功"})})},A=Y=>{r.value.events=Y},M=l.ref(""),$=()=>{const Y=[],D=r.value.anchors,q=r.value.width,z=r.value.height;Array.isArray(D)&&D.forEach(K=>{Y.push({x:K.x*q,y:K.y*z})}),console.log("path: ",Y),M.value=JSON.stringify(Y,null,2)},U=()=>{console.log("on copy: ",M.value),localStorage.setItem(I6,M.value)},F=()=>{console.log("create path frames: ",r.value);function Y(D){try{const q=JSON.parse(D);if(console.log("剪切板数据: ",q),Array.isArray(q)){const z=q.map((K,P)=>{if(P>0){const R=q[P-1],X=K.x-R.x,ee=K.y-R.y;return{x:X,y:ee}}}).filter(K=>K);console.log("paths: ",z),r.value.pathFrames=z.map(K=>({x:K.x,y:K.y,duration:1e4}))}$r.success({content:"生成成功"})}catch(q){console.log("JSON 解析失败: ",q),$r.error({content:"生成失败, 请检查操作是否正确"})}}if(!navigator.clipboard){const D=localStorage.getItem(I6);if(D){Y(D);return}$r.error({content:"无法访问剪切板"});return}navigator.clipboard.readText().then(D=>{Y(D)}).catch(D=>{console.error("读取剪切板数据失败:",D),$r.error({content:"生成失败, 无法访问剪切板"})})},j=l.ref(!1),W=()=>{j.value=!0},H=()=>{j.value=!1},J=Y=>{r.value.pathFrames.splice(Y,1)};return(Y,D)=>{const q=l.resolveComponent("t-color-picker"),z=l.resolveComponent("t-form-item"),K=l.resolveComponent("t-option"),P=l.resolveComponent("t-select"),R=l.resolveComponent("t-input-number"),X=l.resolveComponent("t-slider"),ee=l.resolveComponent("t-divider"),re=l.resolveComponent("t-switch"),ae=l.resolveComponent("t-input"),oe=l.resolveComponent("t-upload"),ce=l.resolveComponent("t-button"),ge=l.resolveComponent("t-space"),pe=l.resolveComponent("t-form"),_e=l.resolveComponent("t-tag"),be=l.resolveComponent("t-tooltip"),Se=l.resolveComponent("t-collapse-panel"),Ne=l.resolveComponent("t-collapse"),Ae=l.resolveComponent("t-icon"),Pe=l.resolveComponent("t-tag-input"),Me=l.resolveComponent("t-typography-text"),me=l.resolveComponent("t-drawer");return l.openBlock(),l.createElementBlock("div",TOe,[r.value?(l.openBlock(),l.createBlock(Eg,{key:0,tabs:e.value,defaultValue:i.value,onChange:D[124]||(D[124]=ie=>i.value=ie)},l.createSlots({pen:l.withCtx(()=>[l.createElementVNode("div",kOe,[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(z,{label:"颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.color,"onUpdate:modelValue":D[0]||(D[0]=ie=>r.value.color=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[1]||(D[1]=ie=>b("color"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"浮动颜色",name:"hoverColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.hoverColor,"onUpdate:modelValue":D[2]||(D[2]=ie=>r.value.hoverColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[3]||(D[3]=ie=>b("hoverColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"选中颜色",name:"activeColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.activeColor,"onUpdate:modelValue":D[4]||(D[4]=ie=>r.value.activeColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[5]||(D[5]=ie=>b("activeColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"背景",name:"background"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.background,"onUpdate:modelValue":D[6]||(D[6]=ie=>r.value.background=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[7]||(D[7]=ie=>b("background"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"线条",name:"dash"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.dash,"onUpdate:modelValue":D[8]||(D[8]=ie=>r.value.dash=ie),onChange:D[9]||(D[9]=ie=>b("dash"))},{default:l.withCtx(()=>[(l.openBlock(),l.createBlock(K,{key:0,value:0,label:"实线"})),(l.openBlock(),l.createBlock(K,{key:1,value:1,label:"虚线"}))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"线条宽度",name:"lineWidth"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.lineWidth,"onUpdate:modelValue":D[10]||(D[10]=ie=>r.value.lineWidth=ie),onChange:D[11]||(D[11]=ie=>b("lineWidth"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"圆角",name:"borderRadius"},{default:l.withCtx(()=>[l.createVNode(R,{min:0,max:1,step:.01,modelValue:r.value.borderRadius,"onUpdate:modelValue":D[12]||(D[12]=ie=>r.value.borderRadius=ie),onChange:D[13]||(D[13]=ie=>b("borderRadius"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"不透明度",name:"globalAlpha"},{default:l.withCtx(()=>[l.createVNode(X,{modelValue:r.value.globalAlpha,"onUpdate:modelValue":D[14]||(D[14]=ie=>r.value.globalAlpha=ie),min:0,max:1,step:.01,onChange:D[15]||(D[15]=ie=>b("globalAlpha"))},null,8,["modelValue"]),l.createElementVNode("span",OOe,l.toDisplayString(r.value.globalAlpha),1)]),_:1}),l.createVNode(z,{label:"阴影颜色",name:"shadowColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.shadowColor,"onUpdate:modelValue":D[16]||(D[16]=ie=>r.value.shadowColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[17]||(D[17]=ie=>b("shadowColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"阴影模糊",name:"shadowBlur"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.shadowBlur,"onUpdate:modelValue":D[18]||(D[18]=ie=>r.value.shadowBlur=ie),min:0,onChange:D[19]||(D[19]=ie=>b("shadowBlur"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"阴影X偏移",name:"shadowOffsetX"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.shadowOffsetX,"onUpdate:modelValue":D[20]||(D[20]=ie=>r.value.shadowOffsetX=ie),onChange:D[21]||(D[21]=ie=>b("shadowOffsetX"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"阴影Y偏移",name:"shadowOffsetY"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.shadowOffsetY,"onUpdate:modelValue":D[22]||(D[22]=ie=>r.value.shadowOffsetY=ie),onChange:D[23]||(D[23]=ie=>b("shadowOffsetY"))},null,8,["modelValue"])]),_:1}),l.createVNode(ee),l.createVNode(z,{label:"文字阴影",name:"textHasShadow"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.textHasShadow,"onUpdate:modelValue":D[24]||(D[24]=ie=>r.value.textHasShadow=ie),onChange:D[25]||(D[25]=ie=>b("textHasShadow"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"文本",name:"text"},{default:l.withCtx(()=>[l.createVNode(ae,{modelValue:r.value.text,"onUpdate:modelValue":D[26]||(D[26]=ie=>r.value.text=ie),clearable:"",onChange:D[27]||(D[27]=ie=>b("text"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"字体",name:"fontSize"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.fontSize,"onUpdate:modelValue":D[28]||(D[28]=ie=>r.value.fontSize=ie),onChange:D[29]||(D[29]=ie=>b("fontSize"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"文字颜色类型",name:"textType"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.textType,"onUpdate:modelValue":D[30]||(D[30]=ie=>r.value.textType=ie),onChange:D[31]||(D[31]=ie=>b("textType"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"hex",value:0,label:"纯色"}),l.createVNode(K,{key:"rgb",value:1,label:"线性渐变"}),l.createVNode(K,{key:"rgba",value:2,label:"径向渐变"})]),_:1},8,["modelValue"])]),_:1}),[1,2].includes(r.value.textType)?(l.openBlock(),l.createBlock(z,{key:0,label:"文字渐变",name:"textGradientColors"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.textGradientColors,"onUpdate:modelValue":D[32]||(D[32]=ie=>r.value.textGradientColors=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["linear-gradient"],clearable:"",onChange:D[33]||(D[33]=ie=>b("textGradientColors"))},null,8,["modelValue"])]),_:1})):(l.openBlock(),l.createBlock(z,{key:1,label:"文字颜色",name:"textColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.textColor,"onUpdate:modelValue":D[34]||(D[34]=ie=>r.value.textColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[35]||(D[35]=ie=>b("textColor"))},null,8,["modelValue"])]),_:1})),l.createVNode(z,{label:"文本风格",name:"fontStyle"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.fontStyle,"onUpdate:modelValue":D[36]||(D[36]=ie=>r.value.fontStyle=ie),onChange:D[37]||(D[37]=ie=>b("fontStyle"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"normal",value:"normal",label:"常规"}),l.createVNode(K,{key:"italic",value:"italic",label:"斜体"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"文本粗细",name:"fontWeight"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.fontWeight,"onUpdate:modelValue":D[38]||(D[38]=ie=>r.value.fontWeight=ie),onChange:D[39]||(D[39]=ie=>b("fontWeight"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"normal",value:"normal",label:"常规"}),l.createVNode(K,{key:"bold",value:"bold",label:"加粗"}),l.createVNode(K,{key:"lighter",value:"lighter",label:"更细"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"换行",name:"whiteSpace"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.whiteSpace,"onUpdate:modelValue":D[40]||(D[40]=ie=>r.value.whiteSpace=ie),onChange:D[41]||(D[41]=ie=>b("whiteSpace"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"normal",value:"normal",label:"常规"}),l.createVNode(K,{key:"nowrap",value:"nowrap",label:"不换行"}),l.createVNode(K,{key:"pre-line",value:"pre-line",label:"换行符换行"}),l.createVNode(K,{key:"break-all",value:"break-all",label:"永远换行"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"超出省略",name:"ellipsis"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.ellipsis,"onUpdate:modelValue":D[42]||(D[42]=ie=>r.value.ellipsis=ie),onChange:D[43]||(D[43]=ie=>b("ellipsis"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"下划线",name:"textDecoration"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.textDecoration,"onUpdate:modelValue":D[44]||(D[44]=ie=>r.value.textDecoration=ie),onChange:D[45]||(D[45]=ie=>b("textDecoration"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"下划线颜色",name:"textDecorationColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.textDecorationColor,"onUpdate:modelValue":D[46]||(D[46]=ie=>r.value.textDecorationColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[47]||(D[47]=ie=>b("textDecorationColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"删除线",name:"textStrickout"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.textStrickout,"onUpdate:modelValue":D[48]||(D[48]=ie=>r.value.textStrickout=ie),onChange:D[49]||(D[49]=ie=>b("textStrickout"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"删除线颜色",name:"textStrickoutColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.textStrickoutColor,"onUpdate:modelValue":D[50]||(D[50]=ie=>r.value.textStrickoutColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[51]||(D[51]=ie=>b("textStrickoutColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"文字水平对齐",name:"textAlign"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.textAlign,"onUpdate:modelValue":D[52]||(D[52]=ie=>r.value.textAlign=ie),onChange:D[53]||(D[53]=ie=>b("textAlign"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"left",value:"left",label:"左对齐"}),l.createVNode(K,{key:"center",value:"center",label:"居中"}),l.createVNode(K,{key:"right",value:"right",label:"右对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"文字垂直对齐",name:"textBaseline"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.textBaseline,"onUpdate:modelValue":D[54]||(D[54]=ie=>r.value.textBaseline=ie),onChange:D[55]||(D[55]=ie=>b("textBaseline"))},{default:l.withCtx(()=>[l.createVNode(K,{key:"top",value:"top",label:"顶部对齐"}),l.createVNode(K,{key:"middle",value:"middle",label:"居中"}),l.createVNode(K,{key:"bottom",value:"bottom",label:"底部对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(ee),l.createVNode(z,{label:"X",name:"x"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:a.value.x,"onUpdate:modelValue":D[56]||(D[56]=ie=>a.value.x=ie),onChange:D[57]||(D[57]=ie=>w("x"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"Y",name:"y"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:a.value.y,"onUpdate:modelValue":D[58]||(D[58]=ie=>a.value.y=ie),onChange:D[59]||(D[59]=ie=>w("y"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"宽",name:"width"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:a.value.width,"onUpdate:modelValue":D[60]||(D[60]=ie=>a.value.width=ie),onChange:D[61]||(D[61]=ie=>w("width"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"高",name:"height"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:a.value.height,"onUpdate:modelValue":D[62]||(D[62]=ie=>a.value.height=ie),onChange:D[63]||(D[63]=ie=>w("height"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"锁定宽高比",name:"ratio"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.ratio,"onUpdate:modelValue":D[64]||(D[64]=ie=>r.value.ratio=ie),onChange:D[65]||(D[65]=ie=>b("ratio"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"旋转角度",name:"rotate"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.rotate,"onUpdate:modelValue":D[66]||(D[66]=ie=>r.value.rotate=ie),onChange:D[67]||(D[67]=ie=>b("rotate"))},null,8,["modelValue"])]),_:1}),l.createVNode(ee),l.createVNode(z,{label:"进度",name:"progress"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.progress,"onUpdate:modelValue":D[68]||(D[68]=ie=>r.value.progress=ie),step:.1,min:0,max:1,onChange:D[69]||(D[69]=ie=>b("progress"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"进度颜色",name:"progressColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.progressColor,"onUpdate:modelValue":D[70]||(D[70]=ie=>r.value.progressColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],clearable:"",onChange:D[71]||(D[71]=ie=>b("progressColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"渐变颜色",name:"progressGradientColors"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.progressGradientColors,"onUpdate:modelValue":D[72]||(D[72]=ie=>r.value.progressGradientColors=ie),"show-primary-color-preview":!1,clearable:"",format:"CSS","color-modes":["linear-gradient"],onChange:D[73]||(D[73]=ie=>b("progressGradientColors"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"垂直进度",name:"verticalProgress"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.verticalProgress,"onUpdate:modelValue":D[74]||(D[74]=ie=>r.value.verticalProgress=ie),onChange:D[75]||(D[75]=ie=>b("verticalProgress"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"反向进度",name:"reverseProgress"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.reverseProgress,"onUpdate:modelValue":D[76]||(D[76]=ie=>r.value.reverseProgress=ie),onChange:D[77]||(D[77]=ie=>b("reverseProgress"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"水平翻转",name:"flipX"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.flipX,"onUpdate:modelValue":D[78]||(D[78]=ie=>r.value.flipX=ie),onChange:D[79]||(D[79]=ie=>b("flipX"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"垂直翻转",name:"flipY"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.flipY,"onUpdate:modelValue":D[80]||(D[80]=ie=>r.value.flipY=ie),onChange:D[81]||(D[81]=ie=>b("flipY"))},null,8,["modelValue"])]),_:1}),l.createVNode(ee,null,{default:l.withCtx(()=>D[127]||(D[127]=[l.createTextVNode("图片")])),_:1}),l.createVNode(z,{label:"背景图片"},{default:l.withCtx(()=>[l.createVNode(oe,{ref_key:"uploadRef",ref:O,modelValue:l.unref(N),"onUpdate:modelValue":D[82]||(D[82]=ie=>l.isRef(N)?N.value=ie:null),action:Y.$attrs.uploadUrl||"https://service-bv448zsw-1257786608.gz.apigw.tencentcs.com/api/upload-demo",headers:l.unref(T),name:"object",sizeLimit:l.unref(B),theme:"image",tips:"请选择单张小于1MB的图片上传",accept:"image/*",onFail:E,onSuccess:k},null,8,["modelValue","action","headers","sizeLimit"])]),_:1}),l.createVNode(z,{label:"背景图片地址",name:"backgroundImage"},{default:l.withCtx(()=>[l.createVNode(ae,{modelValue:r.value.image,"onUpdate:modelValue":D[83]||(D[83]=ie=>r.value.image=ie),clearable:"",onChange:D[84]||(D[84]=ie=>b("image"))},null,8,["modelValue"])]),_:1}),l.createVNode(ee),r.value.name=="combine"&&r.value.showChild!=null?(l.openBlock(),l.createElementBlock(l.Fragment,{key:2},[l.createVNode(z,{label:"",name:"status"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.showChild,"onUpdate:modelValue":D[85]||(D[85]=ie=>r.value.showChild=ie),onChange:D[86]||(D[86]=ie=>b("showChild"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(c.value,(ie,ye)=>(l.openBlock(),l.createBlock(K,{key:ie.value,value:ye,label:ie.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(ee)],64)):l.createCommentVNode("",!0),l.createVNode(ge,{size:"4px"},{default:l.withCtx(()=>[l.createVNode(ce,{onClick:x},{default:l.withCtx(()=>D[128]||(D[128]=[l.createTextVNode("置顶")])),_:1}),l.createVNode(ce,{onClick:C},{default:l.withCtx(()=>D[129]||(D[129]=[l.createTextVNode("置底")])),_:1}),l.createVNode(ce,{onClick:S},{default:l.withCtx(()=>D[130]||(D[130]=[l.createTextVNode("上一层")])),_:1}),l.createVNode(ce,{onClick:_},{default:l.withCtx(()=>D[131]||(D[131]=[l.createTextVNode("下一层")])),_:1})]),_:1})]),_:1})])]),animate:l.withCtx(()=>[l.createElementVNode("div",POe,[l.createVNode(Ne,{"default-value":[0]},{default:l.withCtx(()=>[l.createVNode(Se,{header:"动画",name:"animate"},{default:l.withCtx(()=>[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[o.value?(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[l.createVNode(z,{label:"动画效果",name:"lineAnimateType"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.lineAnimateType,"onUpdate:modelValue":D[92]||(D[92]=ie=>r.value.lineAnimateType=ie),clearable:"",onChange:D[93]||(D[93]=ie=>b("lineAnimateType"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(k6),ie=>(l.openBlock(),l.createBlock(K,{key:ie.value,value:ie.value,label:ie.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(z,{label:"反向流动",name:"reverse"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.animateReverse,"onUpdate:modelValue":D[94]||(D[94]=ie=>r.value.animateReverse=ie),onChange:D[95]||(D[95]=ie=>b("animateReverse"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"线宽",name:"animateLineWidth"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.animateLineWidth,"onUpdate:modelValue":D[96]||(D[96]=ie=>r.value.animateLineWidth=ie),onChange:D[97]||(D[97]=ie=>b("animateLineWidth"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"速度",name:"animateSpan"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.animateSpan,"onUpdate:modelValue":D[98]||(D[98]=ie=>r.value.animateSpan=ie),min:1,max:5,onChange:D[99]||(D[99]=ie=>b("animateSpan"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.animateColor,"onUpdate:modelValue":D[100]||(D[100]=ie=>r.value.animateColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:D[101]||(D[101]=ie=>b("animateColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"动画发光",name:"animateShadow"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.animateShadow,"onUpdate:modelValue":D[102]||(D[102]=ie=>r.value.animateShadow=ie),onChange:D[103]||(D[103]=ie=>b("animateShadow"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"发光颜色",name:"animateShadowColor"},{default:l.withCtx(()=>[l.createVNode(q,{class:"w-full",modelValue:r.value.animateShadowColor,"onUpdate:modelValue":D[104]||(D[104]=ie=>r.value.animateShadowColor=ie),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:D[105]||(D[105]=ie=>b("animateShadowColor"))},null,8,["modelValue"])]),_:1})],64)):(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[l.createVNode(z,{label:"动画效果",name:"animateType"},{default:l.withCtx(()=>[l.createVNode(P,{modelValue:r.value.animateType,"onUpdate:modelValue":D[106]||(D[106]=ie=>r.value.animateType=ie),clearable:"",onChange:D[107]||(D[107]=ie=>b("animateType"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(T6),ie=>(l.openBlock(),l.createBlock(K,{key:ie.value,value:ie.value,label:ie.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r.value.animateType=="x-custom"?(l.openBlock(),l.createBlock(z,{key:0,label:"自定义动画帧"},{default:l.withCtx(()=>{var ie;return[l.createElementVNode("div",IOe,[l.createVNode(ce,{variant:"text",theme:"primary",onClick:h},{default:l.withCtx(()=>D[132]||(D[132]=[l.createTextVNode("编辑 ")])),_:1}),D[136]||(D[136]=l.createElementVNode("br",null,null,-1)),l.createVNode(_e,{theme:"danger",style:{"margin-left":"20px"}},{default:l.withCtx(()=>D[133]||(D[133]=[l.createTextVNode("或者")])),_:1}),l.createVNode(be,{content:"选中线条提取路径后复制，会覆盖已设置的动画"},{default:l.withCtx(()=>[l.createVNode(ce,{variant:"text",theme:"primary",onClick:F},{default:l.withCtx(()=>D[134]||(D[134]=[l.createTextVNode(" 从剪切板生成路径动画 ")])),_:1})]),_:1}),(ie=r.value.pathFrames)!=null&&ie.length?(l.openBlock(),l.createBlock(ce,{key:0,variant:"text",theme:"primary",onClick:W},{default:l.withCtx(()=>D[135]||(D[135]=[l.createTextVNode("编辑路径 ")])),_:1})):l.createCommentVNode("",!0)])]}),_:1})):l.createCommentVNode("",!0)],64)),l.createVNode(z,{label:"自动播放",name:"autoPlay"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.autoPlay,"onUpdate:modelValue":D[108]||(D[108]=ie=>r.value.autoPlay=ie),onChange:D[109]||(D[109]=ie=>b("autoPlay"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"循环次数",name:"animateCycle"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:r.value.animateCycle,"onUpdate:modelValue":D[110]||(D[110]=ie=>r.value.animateCycle=ie),min:0,onChange:D[111]||(D[111]=ie=>b("animateCycle"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"保持动画状态",name:"keepAnimateState"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.keepAnimateState,"onUpdate:modelValue":D[112]||(D[112]=ie=>r.value.keepAnimateState=ie),onChange:D[113]||(D[113]=ie=>b("keepAnimateState"))},null,8,["modelValue"])]),_:1}),l.createVNode(ee),l.createVNode(ge,null,{default:l.withCtx(()=>[l.createVNode(ce,{onClick:D[114]||(D[114]=ie=>u(!0))},{default:l.withCtx(()=>D[137]||(D[137]=[l.createTextVNode("播放")])),_:1}),l.createVNode(ce,{onClick:D[115]||(D[115]=ie=>u())},{default:l.withCtx(()=>D[138]||(D[138]=[l.createTextVNode("停止")])),_:1})]),_:1})]),_:1})]),_:1}),r.value.name=="video"?(l.openBlock(),l.createBlock(Se,{key:0,header:"视频"},{default:l.withCtx(()=>[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(z,{label:"视频地址",name:"video"},{default:l.withCtx(()=>[l.createVNode(ae,{modelValue:r.value.video,"onUpdate:modelValue":D[116]||(D[116]=ie=>r.value.video=ie),placeholder:"视频地址不能为空",clearable:"",onChange:D[117]||(D[117]=ie=>b("video"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"自动播放",name:"autoPlay"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.autoPlay,"onUpdate:modelValue":D[118]||(D[118]=ie=>r.value.autoPlay=ie),onChange:D[119]||(D[119]=ie=>b("autoPlay"))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):l.createCommentVNode("",!0)]),_:1})])]),struct:l.withCtx(()=>[l.renderSlot(Y.$slots,"struct",{pen:r.value},void 0,!0)]),data:l.withCtx(()=>[l.createElementVNode("div",AOe,[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(z,{label:"ID",name:"data"},{default:l.withCtx(()=>[l.createVNode(_e,{maxWidth:"100%",style:{flex:"1",width:"0"}},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(r.value.id),1)]),_:1}),l.createVNode(ce,{theme:"primary",variant:"text",style:{"margin-left":"10px"},onClick:I},{default:l.withCtx(()=>[l.createVNode(Ae,{name:"copy"})]),_:1})]),_:1}),l.createVNode(z,{label:"描述",name:"description"},{default:l.withCtx(()=>[l.createVNode(ae,{modelValue:r.value.description,"onUpdate:modelValue":D[120]||(D[120]=ie=>r.value.description=ie),maxlength:"50",clearable:"",onChange:D[121]||(D[121]=ie=>b("description"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"标签",name:"tags"},{default:l.withCtx(()=>[l.createVNode(Pe,{modelValue:r.value.tags,"onUpdate:modelValue":D[122]||(D[122]=ie=>r.value.tags=ie),clearable:"",placeholder:"按回车添加标签，最多10个",max:10,onChange:D[123]||(D[123]=ie=>b("tags"))},null,8,["modelValue"])]),_:1}),r.value.name=="line"?(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[l.createVNode(z,{label:"",name:"description"},{default:l.withCtx(()=>[l.createVNode(ce,{theme:"primary",onClick:$},{default:l.withCtx(()=>D[139]||(D[139]=[l.createTextVNode("提取轨迹")])),_:1})]),_:1}),M.value?(l.openBlock(),l.createBlock(z,{key:0},{default:l.withCtx(()=>[l.createVNode(Me,{code:"",copyable:{onCopy:U}},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(M.value),1)]),_:1},8,["copyable"])]),_:1})):l.createCommentVNode("",!0)],64)):l.createCommentVNode("",!0)]),_:1})])]),event:l.withCtx(()=>[l.createVNode(SOe,{defaultEventsValue:r.value.events,onChange:A},null,8,["defaultEventsValue"])]),_:2},[["image"].includes(r.value.name)?{name:"image",fn:l.withCtx(()=>[l.createElementVNode("div",EOe,[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(z,{label:"图片上传",name:"image"},{default:l.withCtx(()=>[l.createVNode(oe,{ref_key:"uploadRef",ref:O,modelValue:l.unref(N),"onUpdate:modelValue":D[87]||(D[87]=ie=>l.isRef(N)?N.value=ie:null),action:Y.$attrs.uploadUrl||"https://service-bv448zsw-1257786608.gz.apigw.tencentcs.com/api/upload-demo",headers:l.unref(T),name:"object",sizeLimit:l.unref(B),theme:"image",tips:"请选择单张小于1MB的图片上传",accept:"image/*",onFail:E,onSuccess:k},null,8,["modelValue","action","headers","sizeLimit"])]),_:1}),l.createVNode(z,{label:"图片地址",name:"image"},{default:l.withCtx(()=>[l.createVNode(ae,{modelValue:r.value.image,"onUpdate:modelValue":D[88]||(D[88]=ie=>r.value.image=ie),clearable:"",onChange:D[89]||(D[89]=ie=>b("image"))},null,8,["modelValue"])]),_:1}),l.createVNode(z,{label:"保持比例",name:"imageRatio"},{default:l.withCtx(()=>[l.createVNode(re,{modelValue:r.value.imageRatio,"onUpdate:modelValue":D[90]||(D[90]=ie=>r.value.imageRatio=ie),onChange:D[91]||(D[91]=ie=>b("imageRatio"))},null,8,["modelValue"])]),_:1})]),_:1})])]),key:"0"}:void 0]),1032,["tabs","defaultValue"])):l.createCommentVNode("",!0),l.createVNode(me,{visible:d.value,"onUpdate:visible":D[125]||(D[125]=ie=>d.value=ie),header:"自定义动画帧",size:"20%",onConfirm:v},{default:l.withCtx(()=>[l.createVNode(ce,{block:"",theme:"primary",onClick:p},{default:l.withCtx(()=>D[140]||(D[140]=[l.createTextVNode("新增动画帧")])),_:1}),l.createVNode(Ne,{class:"meta-collapse","expand-mutex":""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(f.value,ie=>(l.openBlock(),l.createBlock(Se,{header:"动画帧"},{headerRightContent:l.withCtx(()=>[l.createVNode(ce,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:ye=>g(ie)},{default:l.withCtx(()=>[l.createVNode(Ae,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(E6,{data:ie,statusList:c.value},null,8,["data","statusList"])]),_:2},1024))),256))]),_:1})]),_:1},8,["visible"]),l.createVNode(me,{visible:j.value,"onUpdate:visible":D[126]||(D[126]=ie=>j.value=ie),header:"自定义路径",size:"20%",onConfirm:H},{default:l.withCtx(()=>[r.value&&r.value.pathFrames?(l.openBlock(),l.createBlock(Ne,{key:0,class:"meta-collapse","expand-mutex":""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(r.value.pathFrames,(ie,ye)=>(l.openBlock(),l.createBlock(Se,{header:`路径-${ye+1}`},{headerRightContent:l.withCtx(()=>[l.createVNode(ce,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:Ce=>J(ye)},{default:l.withCtx(()=>[l.createVNode(Ae,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(pe,{"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(z,{label:"时长(ms)",name:"duration"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:ie.duration,"onUpdate:modelValue":Ce=>ie.duration=Ce,min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(z,{label:"偏移X",name:"x"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:ie.x,"onUpdate:modelValue":Ce=>ie.x=Ce,placeholder:"px"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l.createVNode(z,{label:"偏移Y",name:"y"},{default:l.withCtx(()=>[l.createVNode(R,{modelValue:ie.y,"onUpdate:modelValue":Ce=>ie.y=Ce,placeholder:"px"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["header"]))),256))]),_:1})):l.createCommentVNode("",!0)]),_:1},8,["visible"])])}}}),[["__scopeId","data-v-90fe218d"]]),DOe={class:"props-panel"},ROe={class:"ml-16",style:{width:"50px","line-height":"30px"}},MOe={class:"props-panel"},LOe=Gn(l.defineComponent({__name:"PensProps",setup(t){const e=[{label:"图元组",value:1,slot:"pen-props"},{label:"结构",value:2,slot:"struct-props"},{label:"动效",value:3,slot:"animation-props"}],{selections:n}=bu(),r=l.ref({globalAlpha:1}),a=l.ref();l.onMounted(()=>{i()});const i=()=>{a.value=meta2d.getPenRect(r.value)},o=l.computed(()=>{var S;return(S=n.pens)==null?void 0:S.every(_=>_.type===1)}),s=l.computed(()=>{var S;return(S=n.pens)==null?void 0:S.every(_=>!_.type)}),c=l.computed(()=>{var S;return((S=n.pens)==null?void 0:S.length)||0}),u=l.watch(()=>n.pens,i),d=[void 0,[5,5]],f=S=>{var _;if((_=n.pens)!=null&&_.length){const O=r.value[S];n.pens.forEach(N=>{const B={id:N.id};if(B[S]=O,S==="dash")B.lineDash=d[B[S]];else if(S=="animateType"){const T=B.animateType,k=O6[T];B.frames=k}meta2d.setValue(B,{render:!1})}),meta2d.render()}},h=(S=!1)=>{var _;(_=n.pens)==null||_.forEach(O=>{S?meta2d.startAnimate(O.id):meta2d.stopAnimate(O.id)})},v=[{label:"左对齐",value:"left",icon:"format-vertical-align-left"},{label:"右对齐",value:"right",icon:"format-vertical-align-right"},{label:"顶部对齐",value:"top",icon:"format-horizontal-align-top"},{label:"底部对齐",value:"bottom",icon:"format-horizontal-align-bottom"},{label:"垂直居中",value:"center",icon:"format-vertical-align-center"},{label:"水平居中",value:"middle",icon:"format-horizontal-align-center"}],p=S=>{const _=n.pens;_!=null&&_.length&&meta2d.alignNodes(S.value,_)};l.onUnmounted(()=>{u()});const g=l.ref(!1),m=l.ref([]),y=()=>{m.value=Te(r.value.frames||[]),g.value=!0},b=()=>{r.value.frames=Te(m.value),f("frames"),g.value=!1,l.nextTick(()=>{m.value=[]})},w=()=>{m.value.push({duration:100,globalAlpha:1})},x=S=>{const _=m.value.indexOf(S);_>-1&&m.value.splice(_,1)},C=()=>{meta2d.inactive()};return(S,_)=>{const O=l.resolveComponent("t-input"),N=l.resolveComponent("t-form-item"),B=l.resolveComponent("t-color-picker"),T=l.resolveComponent("t-option"),k=l.resolveComponent("t-select"),E=l.resolveComponent("t-input-number"),I=l.resolveComponent("t-slider"),A=l.resolveComponent("t-divider"),M=l.resolveComponent("t-icon"),$=l.resolveComponent("t-button"),U=l.resolveComponent("t-collapse-panel"),F=l.resolveComponent("t-collapse"),j=l.resolveComponent("t-tooltip"),W=l.resolveComponent("t-space"),H=l.resolveComponent("t-form"),J=l.resolveComponent("t-alert"),Y=l.resolveComponent("t-switch"),D=l.resolveComponent("t-statistic"),q=l.resolveComponent("t-drawer");return l.openBlock(),l.createBlock(Eg,{tabs:e},{"pen-props":l.withCtx(()=>[l.createElementVNode("div",DOe,[r.value?(l.openBlock(),l.createBlock(H,{key:0,"label-align":"left"},{default:l.withCtx(()=>[l.createVNode(N,{label:"文本",name:"text"},{default:l.withCtx(()=>[l.createVNode(O,{modelValue:r.value.text,"onUpdate:modelValue":_[0]||(_[0]=z=>r.value.text=z),onChange:_[1]||(_[1]=z=>f("text"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(B,{class:"w-full",modelValue:r.value.color,"onUpdate:modelValue":_[2]||(_[2]=z=>r.value.color=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:_[3]||(_[3]=z=>f("color"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"背景",name:"background"},{default:l.withCtx(()=>[l.createVNode(B,{class:"w-full",modelValue:r.value.background,"onUpdate:modelValue":_[4]||(_[4]=z=>r.value.background=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:_[5]||(_[5]=z=>f("background"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"线条",name:"dash"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:r.value.dash,"onUpdate:modelValue":_[6]||(_[6]=z=>r.value.dash=z),onChange:_[7]||(_[7]=z=>f("dash"))},{default:l.withCtx(()=>[(l.openBlock(),l.createBlock(T,{key:0,value:0,label:"实线"})),(l.openBlock(),l.createBlock(T,{key:1,value:1,label:"虚线"}))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(N,{label:"线条宽度",name:"lineWidth"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:r.value.lineWidth,"onUpdate:modelValue":_[8]||(_[8]=z=>r.value.lineWidth=z),onChange:_[9]||(_[9]=z=>f("lineWidth"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"圆角",name:"borderRadius"},{default:l.withCtx(()=>[l.createVNode(E,{min:0,max:1,step:.01,modelValue:r.value.borderRadius,"onUpdate:modelValue":_[10]||(_[10]=z=>r.value.borderRadius=z),onChange:_[11]||(_[11]=z=>f("borderRadius"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"不透明度",name:"globalAlpha"},{default:l.withCtx(()=>[l.createVNode(I,{modelValue:r.value.globalAlpha,"onUpdate:modelValue":_[12]||(_[12]=z=>r.value.globalAlpha=z),min:0,max:1,step:.01,onChange:_[13]||(_[13]=z=>f("globalAlpha"))},null,8,["modelValue"]),l.createElementVNode("span",ROe,l.toDisplayString(r.value.globalAlpha),1)]),_:1}),l.createVNode(A),l.createVNode(N,{label:"文字水平对齐",name:"textAlign"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:r.value.textAlign,"onUpdate:modelValue":_[14]||(_[14]=z=>r.value.textAlign=z),onChange:_[15]||(_[15]=z=>f("textAlign"))},{default:l.withCtx(()=>[l.createVNode(T,{key:"left",value:"left",label:"左对齐"}),l.createVNode(T,{key:"center",value:"center",label:"居中"}),l.createVNode(T,{key:"right",value:"right",label:"右对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(N,{label:"文字垂直对齐",name:"textBaseline"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:r.value.textBaseline,"onUpdate:modelValue":_[16]||(_[16]=z=>r.value.textBaseline=z),onChange:_[17]||(_[17]=z=>f("textBaseline"))},{default:l.withCtx(()=>[l.createVNode(T,{key:"top",value:"top",label:"顶部对齐"}),l.createVNode(T,{key:"middle",value:"middle",label:"居中"}),l.createVNode(T,{key:"bottom",value:"bottom",label:"底部对齐"})]),_:1},8,["modelValue"])]),_:1}),l.createVNode(A),l.createVNode(F,{"expand-icon":"",borderless:"",defaultExpandAll:""},{default:l.withCtx(()=>[l.createVNode(U,{value:"0",header:"对齐"},{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock(l.Fragment,null,l.renderList(v,(z,K)=>l.createVNode($,{key:K,shape:"square",variant:"outline",style:{"margin-right":"4px"},onClick:P=>p(z)},{default:l.withCtx(()=>[l.createVNode(M,{name:z.icon},null,8,["name"])]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),l.createVNode(A),l.createVNode(W,null,{default:l.withCtx(()=>[l.createVNode(j,{content:"清空高亮图元"},{default:l.withCtx(()=>[l.createVNode($,{onClick:C},{default:l.withCtx(()=>_[39]||(_[39]=[l.createTextVNode("取消选中")])),_:1})]),_:1})]),_:1})]),_:1})):l.createCommentVNode("",!0)])]),"struct-props":l.withCtx(()=>[l.renderSlot(S.$slots,"struct",{pen:r.value},void 0,!0)]),"animation-props":l.withCtx(()=>[l.createElementVNode("div",MOe,[o.value||s.value?(l.openBlock(),l.createBlock(H,{key:0,"label-width":"80px","label-align":"left"},{default:l.withCtx(()=>[l.createVNode(W,{style:{width:"100%"}},{default:l.withCtx(()=>[l.createVNode(J,{theme:"warning",title:"批量修改所有图元的动画",message:"执行了操作后才会修改"})]),_:1}),l.createVNode(A),s.value?(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[l.createVNode(N,{label:"动画效果",name:"animateType"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:r.value.animateType,"onUpdate:modelValue":_[18]||(_[18]=z=>r.value.animateType=z),clearable:"",onChange:_[19]||(_[19]=z=>f("animateType"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(T6),z=>(l.openBlock(),l.createBlock(T,{key:z.value,value:z.value,label:z.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r.value.animateType=="x-custom"?(l.openBlock(),l.createBlock(N,{key:0,label:"自定义动画帧"},{default:l.withCtx(()=>[l.createVNode($,{variant:"text",theme:"primary",onClick:y},{default:l.withCtx(()=>_[40]||(_[40]=[l.createTextVNode("编辑 ")])),_:1})]),_:1})):l.createCommentVNode("",!0)],64)):o.value?(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[l.createVNode(N,{label:"动画效果",name:"lineAnimateType"},{default:l.withCtx(()=>[l.createVNode(k,{modelValue:r.value.lineAnimateType,"onUpdate:modelValue":_[20]||(_[20]=z=>r.value.lineAnimateType=z),clearable:"",onChange:_[21]||(_[21]=z=>f("lineAnimateType"))},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(k6),z=>(l.openBlock(),l.createBlock(T,{key:z.value,value:z.value,label:z.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l.createVNode(N,{label:"反向流动",name:"reverse"},{default:l.withCtx(()=>[l.createVNode(Y,{modelValue:r.value.animateReverse,"onUpdate:modelValue":_[22]||(_[22]=z=>r.value.animateReverse=z),onChange:_[23]||(_[23]=z=>f("animateReverse"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"线宽",name:"animateLineWidth"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:r.value.animateLineWidth,"onUpdate:modelValue":_[24]||(_[24]=z=>r.value.animateLineWidth=z),onChange:_[25]||(_[25]=z=>f("animateLineWidth"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"速度",name:"animateSpan"},{default:l.withCtx(()=>[l.createVNode(E,{modelValue:r.value.animateSpan,"onUpdate:modelValue":_[26]||(_[26]=z=>r.value.animateSpan=z),min:1,max:5,onChange:_[27]||(_[27]=z=>f("animateSpan"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"颜色",name:"color"},{default:l.withCtx(()=>[l.createVNode(B,{class:"w-full",modelValue:r.value.animateColor,"onUpdate:modelValue":_[28]||(_[28]=z=>r.value.animateColor=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:_[29]||(_[29]=z=>f("animateColor"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"动画发光",name:"animateShadow"},{default:l.withCtx(()=>[l.createVNode(Y,{modelValue:r.value.animateShadow,"onUpdate:modelValue":_[30]||(_[30]=z=>r.value.animateShadow=z),onChange:_[31]||(_[31]=z=>f("animateShadow"))},null,8,["modelValue"])]),_:1}),l.createVNode(N,{label:"发光颜色",name:"animateShadowColor"},{default:l.withCtx(()=>[l.createVNode(B,{class:"w-full",modelValue:r.value.animateShadowColor,"onUpdate:modelValue":_[32]||(_[32]=z=>r.value.animateShadowColor=z),"show-primary-color-preview":!1,format:"CSS","color-modes":["monochrome"],onChange:_[33]||(_[33]=z=>f("animateShadowColor"))},null,8,["modelValue"])]),_:1})],64)):l.createCommentVNode("",!0),l.createVNode(N,{label:"自动播放",name:"autoPlay"},{default:l.withCtx(()=>[l.createVNode(Y,{modelValue:r.value.autoPlay,"onUpdate:modelValue":_[34]||(_[34]=z=>r.value.autoPlay=z),onChange:_[35]||(_[35]=z=>f("autoPlay"))},null,8,["modelValue"])]),_:1}),l.createVNode(A),l.createElementVNode("div",null,[l.createVNode(D,{title:"图元总数",value:c.value,trend:"increase",color:"orange"},null,8,["value"])]),l.createVNode(W,null,{default:l.withCtx(()=>[l.createVNode(j,{content:"对大量图元执行动画时存在性能问题，请谨慎操作"},{default:l.withCtx(()=>[l.createVNode($,{onClick:_[36]||(_[36]=z=>h(!0))},{default:l.withCtx(()=>_[41]||(_[41]=[l.createTextVNode("播放")])),_:1})]),_:1}),l.createVNode(j,{content:""},{default:l.withCtx(()=>[l.createVNode($,{onClick:_[37]||(_[37]=z=>h())},{default:l.withCtx(()=>_[42]||(_[42]=[l.createTextVNode("停止")])),_:1})]),_:1})]),_:1})]),_:1})):(l.openBlock(),l.createBlock(J,{key:1,theme:"error"},{default:l.withCtx(()=>_[43]||(_[43]=[l.createTextVNode(" 只能对同一类型的图元批量设置动画 ")])),_:1})),l.createVNode(q,{visible:g.value,"onUpdate:visible":_[38]||(_[38]=z=>g.value=z),header:"自定义动画帧",size:"20%",onConfirm:b},{default:l.withCtx(()=>[l.createVNode($,{block:"",theme:"primary",onClick:w},{default:l.withCtx(()=>_[44]||(_[44]=[l.createTextVNode("新增动画帧")])),_:1}),l.createVNode(F,{class:"meta-collapse","expand-mutex":""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(m.value,z=>(l.openBlock(),l.createBlock(U,{header:"动画帧"},{headerRightContent:l.withCtx(()=>[l.createVNode($,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"},onClick:K=>x(z)},{default:l.withCtx(()=>[l.createVNode(M,{name:"delete"})]),_:2},1032,["onClick"])]),default:l.withCtx(()=>[l.createVNode(E6,{data:z},null,8,["data"])]),_:2},1024))),256))]),_:1})]),_:1},8,["visible"])])]),_:3})}}}),[["__scopeId","data-v-86a3cc64"]]),FOe=["onClick"],BOe={class:"tdesign-demo-block-row"},uw=l.defineComponent({__name:"Structure",props:{},setup(t){let e=l.ref(meta2d.data());const n=l.computed(()=>{const u=e.value.pens;return u.filter(d=>{if(!d.parentId){if(d.children){const f=[];d.children.forEach(h=>{const v=u.find(p=>p.id===h);v&&f.push(v)}),d.list=f}return!0}})}),r=()=>{e.value=meta2d.data()},{selections:a}=bu(),i=l.ref([]);l.watch(a,u=>{const{mode:d}=u;d==1&&u.pen?i.value=[u.pen.id]:i.value=[]},{immediate:!0}),l.onMounted(()=>{meta2d.on("add",r),meta2d.on("delete",r),meta2d.on("clear",r)}),l.onUnmounted(()=>{meta2d.off("add",r),meta2d.off("delete",r)});const o=(u,d)=>{const f={1:"git-commit",combine:"folder",image:"image"},h=f[d.data.type]||f[d.data.name]||"rectangle";return u(Y0,{name:h})},s=u=>{u.data.visible=u.data.visible===!1,u.setData(u.data),meta2d.setValue({id:u.data.id,visible:u.data.visible})},c=u=>{const d=meta2d.findOne(u.data.id);d&&(meta2d.active([d]),meta2d.render(),meta2d.gotoView(d))};return(u,d)=>{const f=l.resolveComponent("t-icon"),h=l.resolveComponent("t-tree");return l.openBlock(),l.createBlock(h,{hover:"",line:"","expand-all":"",activable:"",actived:i.value,"onUpdate:actived":d[0]||(d[0]=v=>i.value=v),data:n.value,keys:{label:"name",value:"id",children:"list"},icon:o,scroll:{rowHeight:34,bufferSize:30,threshold:50,type:"virtual"},style:{padding:"10px",height:"100%"}},{label:l.withCtx(({node:v})=>[l.createElementVNode("span",{onClick:p=>c(v)},l.toDisplayString(v.label)+" - "+l.toDisplayString(v.data.text||v.data.description||v.value),9,FOe)]),operations:l.withCtx(({node:v})=>[l.createElementVNode("div",BOe,[l.createVNode(f,{name:v.data.visible!==!1?"browse":"browse-off",onClick:p=>s(v)},null,8,["name","onClick"])])]),_:1},8,["actived","data"])}}}),jOe={key:0,class:"app-props"},$Oe=Gn(l.defineComponent({__name:"Props",setup(t){const{selections:e}=bu(),n=l.computed(()=>[Ts.File,Ts.Pen,Ts.Pens].includes(e.mode));return(r,a)=>n.value?(l.openBlock(),l.createElementBlock("div",jOe,[l.withDirectives(l.createVNode(hOe,l.mergeProps({key:"file",class:"props__file"},r.$attrs),{struct:l.withCtx(()=>[l.createVNode(uw,l.normalizeProps(l.guardReactiveProps(r.$attrs)),null,16)]),_:1},16),[[l.vShow,l.unref(e).mode===l.unref(Ts).File]]),l.withDirectives(l.createVNode(NOe,l.mergeProps({key:"pen",class:"props__pen"},r.$attrs),{struct:l.withCtx(()=>[l.createVNode(uw,l.normalizeProps(l.guardReactiveProps(r.$attrs)),null,16)]),_:1},16),[[l.vShow,l.unref(e).mode===l.unref(Ts).Pen]]),l.withDirectives(l.createVNode(LOe,l.mergeProps({key:"pens",class:"props__pens"},r.$attrs),{struct:l.withCtx(()=>[l.createVNode(uw,l.normalizeProps(l.guardReactiveProps(r.$attrs)),null,16)]),_:1},16),[[l.vShow,l.unref(e).mode===l.unref(Ts).Pens]])])):l.createCommentVNode("",!0)}}),[["__scopeId","data-v-5839971c"]]),UOe=[{name:"基本形状",show:!0,list:[{name:"正方形",icon:"l-rect",id:1,data:{width:100,height:100,name:"square"}},{name:"矩形",icon:"l-rectangle",id:2,data:{width:200,height:50,borderRadius:.1,name:"rectangle"}},{name:"圆",icon:"l-circle",id:3,data:{width:100,height:100,name:"circle"}},{name:"三角形",icon:"l-triangle",id:4,data:{width:100,height:100,name:"triangle"}},{name:"菱形",icon:"l-diamond",id:5,data:{width:100,height:100,name:"diamond"}},{name:"五边形",icon:"l-pentagon",id:6,data:{width:100,height:100,name:"pentagon"}},{name:"六边形",icon:"l-hexagon",id:7,data:{width:100,height:100,name:"hexagon"}},{name:"五角星",icon:"l-pentagram",id:8,data:{width:100,height:100,name:"pentagram"}},{name:"左箭头",icon:"l-arrow-left",id:9,data:{width:120,height:60,name:"leftArrow"}},{name:"右箭头",icon:"l-arrow-right",id:10,data:{width:120,height:60,name:"rightArrow"}},{name:"双向箭头",icon:"l-twoway-arrow",id:11,data:{width:150,height:60,name:"twowayArrow"}},{name:"云",icon:"l-cloud",id:13,data:{width:100,height:100,name:"cloud"}},{name:"消息框",icon:"l-msg",id:14,data:{textTop:-.1,width:100,height:100,name:"message"}},{name:"文件",icon:"l-file",id:15,data:{width:80,height:100,name:"file"}},{name:"立方体",icon:"l-cube",id:18,data:{width:60,height:100,name:"cube",z:.25,props:{custom:[{key:"z",label:"Z",type:"number",min:0,placeholder:"<= 1 即宽度的比例"},{key:"backgroundFront",label:"前背景色",type:"color"},{key:"backgroundUp",label:"顶背景色",type:"color"},{key:"backgroundRight",label:"右背景色",type:"color"}]}}},{name:"人",icon:"l-people",id:19,data:{width:70,height:100,name:"people"}},{name:"图片",icon:"l-picture",id:20,data:{width:100,height:100,name:"image",image:"/favicon.ico"}},{name:"视频",icon:"l-shipin",id:"d-1-1",data:{name:"video",x:100,y:100,width:300,height:200,video:"https://video.699pic.com/videos/17/69/11/a_aa3jeKZ0D63g1556176911_10s.mp4",autoPlay:!0}}]},{name:"流程图",show:!1,list:[{name:"开始/结束",icon:"l-flow-start",id:21,data:{text:"开始/结束",width:120,height:40,borderRadius:.5,name:"rectangle"}},{name:"流程",icon:"l-rectangle",id:22,data:{text:"流程",width:120,height:40,name:"rectangle"}},{name:"判定",icon:"l-diamond",id:23,data:{text:"判定",width:120,height:60,name:"diamond"}},{name:"数据",icon:"l-flow-data",id:24,data:{text:"数据",width:120,height:50,name:"flowData",offsetX:.14}},{name:"准备",icon:"l-flow-ready",id:25,data:{text:"准备",width:120,height:50,name:"hexagon"}},{name:"子流程",icon:"l-flow-subprocess",id:26,data:{text:"子流程",width:120,height:50,name:"flowSubprocess"}},{name:"数据库",icon:"l-db",id:27,data:{text:"数据库",width:80,height:120,name:"flowDb"}},{name:"文档",icon:"l-flow-document",id:28,data:{text:"文档",width:120,height:100,name:"flowDocument"}},{name:"内部存储",icon:"l-internal-storage",id:29,data:{text:"内部存储",width:120,height:80,name:"flowInternalStorage"}},{name:"外部存储",icon:"l-extern-storage",id:30,data:{text:"外部存储",width:120,height:80,name:"flowExternStorage"}},{name:"队列",icon:"l-flow-queue",id:31,data:{text:"队列",width:100,height:100,name:"flowQueue"}},{name:"手动输入",icon:"l-flow-manually",id:32,data:{text:"手动输入",width:120,height:80,name:"flowManually"}},{name:"展示",icon:"l-flow-display",id:33,data:{text:"展示",width:120,height:80,name:"flowDisplay"}},{name:"并行模式",icon:"l-flow-parallel",id:34,data:{text:"并行模式",width:120,height:50,name:"flowParallel"}},{name:"注释",icon:"l-flow-comment",id:35,data:{text:"注释",width:100,height:100,name:"flowComment"}}]},{name:"活动图",show:!1,list:[{name:"开始",icon:"l-inital",id:36,data:{text:"",width:30,height:30,name:"circle",background:"#555",lineWidth:0}},{name:"结束",icon:"l-final",id:37,data:{width:30,height:30,name:"activityFinal"}},{name:"活动",icon:"l-action",id:38,data:{text:"活动",width:120,height:50,borderRadius:.25,name:"rectangle"}},{name:"决策/合并",icon:"l-diamond",id:39,data:{text:"决策/合并",width:120,height:50,name:"diamond"}},{name:"垂直泳道",icon:"l-swimlane-v",id:40,data:{text:"垂直泳道",width:200,height:500,name:"swimlaneV",textBaseline:"top",textTop:20,lineTop:.08}},{name:"水平泳道",icon:"l-swimlane-h",id:41,data:{text:"水平泳道",width:500,height:200,name:"swimlaneH",textWidth:.01,textLeft:.04,textAlign:"left",lineLeft:.08}},{name:"垂直分岔/汇合",icon:"l-fork-v",id:42,data:{text:"垂直分岔/汇合",width:10,height:150,name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"水平分岔/汇合",icon:"l-fork",id:43,data:{text:"水平分岔/汇合",width:150,height:10,name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{name:"时序图和类图",show:!1,list:[{name:"生命线",icon:"l-lifeline",id:44,data:{text:"生命线",width:150,height:400,textHeight:50,name:"lifeline"}},{name:"激活",icon:"l-focus",id:45,data:{text:"激活",width:12,height:200,name:"sequenceFocus"}},{name:"简单类",icon:"l-simple-class",id:46,data:{text:"Topolgoy",width:270,height:200,textHeight:200,name:"simpleClass",textAlign:"center",textBaseline:"top",textTop:10,list:[{text:`- name: string
+ setName(name: string): void`}]}},{name:"类",icon:"l-class",id:47,data:{text:"Topolgoy",width:270,height:200,textHeight:200,name:"interfaceClass",textAlign:"center",textBaseline:"top",textTop:10,list:[{text:"- name: string"},{text:"+ setName(name: string): void"}]}}]},{name:"故障树",show:!1,list:[{name:"与门",icon:"l-ANDmen",data:{name:"andGate",width:100,height:150}},{name:"基本事件",icon:"l-jibenshijian",data:{name:"basicEvent",width:100,height:150}},{name:"未展开事件",icon:"l-weizhankaishijian",data:{name:"unexpandedEvent",width:100,height:150}},{name:"优先AND门",icon:"l-youxianANDmen",data:{name:"priorityAndGate",width:100,height:150}},{name:"禁止门",icon:"l-jinzhimen",data:{name:"forbiddenGate",width:100,height:150}},{name:"事件",icon:"l-shijian",data:{name:"event",width:100,height:150}},{name:"开关事件",icon:"l-kaiguanshijian",data:{name:"switchEvent",width:100,height:150}},{name:"条件事件",icon:"l-tiaojianshijian",data:{name:"conditionalEvent",width:150,height:100}},{name:"转移符号",icon:"l-zhuanyifuhao",data:{name:"transferSymbol",width:100,height:150}},{name:"或门",icon:"l-ORmen",data:{name:"orGate",width:100,height:150}},{name:"异或门",icon:"l-yihuomen",data:{name:"xorGate",width:100,height:150}},{name:"表决门",icon:"l-biaojuemen",data:{name:"votingGate",width:100,height:150}}]},{name:"脑图",show:!0,list:[{name:"主题",icon:"l-zhuti",data:{text:"主题",width:200,height:50,name:"mindNode",borderRadius:.5}},{name:"子主题",icon:"l-zizhuti",data:{text:"子主题",width:160,height:40,name:"mindLine"}}]}],zOe={class:"graphics"},HOe=["onDragstart"],WOe=["src"],KOe={key:1,class:"l-icon","aria-hidden":"true"},qOe=["xlink:href"],GOe=["onDragstart"],YOe=["src"],XOe={key:1,class:"l-icon","aria-hidden":"true"},JOe=["xlink:href"],QOe=Gn(l.defineComponent({__name:"Graphics",setup(t){const e=l.computed(()=>{const i=[];return g8.forEach(o=>{const s=o.name.split("-");let c="其他";s.length>1&&(c=s[0]);const u=i.find(d=>d.name==c);u?u.children.push(o):i.push({name:c,children:[o]})}),i}),n=[...UOe,{name:"电路元件分组",show:!0,style:"group",list:e.value},{name:"电路元件组合(包含状态)",show:!0,style:"group",list:J_e}];function r(i,o){if(!i||!o)return;const s=[],c=[i];for(;c.length;){const u=c.shift();s.push(u);for(const d of o)d.parentId==u.id&&c.push(d)}return s}const a=(i,o)=>{var s;if(o){if(i.stopPropagation(),o.icon.endsWith("svg"))if(o.type=="combine-json"){console.log("load json: ",o,Ui);const c=Ui.pens.find(d=>{if(d.description==o.name&&!d.parentId)return!0}),u=r(c,Ui.pens);console.log("combine pens: ",c,u),u&&(o.data=Te(u))}else{$8(o.icon,o);return}console.log("elem: ",o),i instanceof DragEvent?(s=i.dataTransfer)==null||s.setData("Meta2d",JSON.stringify(o.data)):meta2d.canvas.addCaches=[o.data]}};return(i,o)=>{const s=l.resolveComponent("t-tag"),c=l.resolveComponent("t-tooltip"),u=l.resolveComponent("t-collapse-panel"),d=l.resolveComponent("t-collapse");return l.openBlock(),l.createElementBlock("div",zOe,[l.createVNode(d,{defaultValue:[0,6]},{default:l.withCtx(()=>[(l.openBlock(),l.createElementBlock(l.Fragment,null,l.renderList(n,f=>l.createVNode(u,{header:f.name,key:f.name,class:l.normalizeClass({"has--group":f.style=="group"})},{default:l.withCtx(()=>[f.style==="group"?(l.openBlock(),l.createBlock(d,{key:0,header:f.name},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(f.list,h=>(l.openBlock(),l.createBlock(u,{class:"is--subpanel",header:h.name},{headerRightContent:l.withCtx(()=>[l.createVNode(s,{theme:"success"},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(h.children.length),1)]),_:2},1024)]),default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(h.children,v=>(l.openBlock(),l.createElementBlock("div",{key:v.name,class:"graphic",draggable:!0,onDragstart:p=>a(p,v)},[l.createVNode(c,{content:v.name},{default:l.withCtx(()=>{var p;return[(p=v.icon)!=null&&p.endsWith("svg")?(l.openBlock(),l.createElementBlock("img",{key:0,src:v.icon,style:{width:"100%",height:"48px"}},null,8,WOe)):(l.openBlock(),l.createElementBlock("svg",KOe,[l.createElementVNode("use",{"xlink:href":"#"+v.icon},null,8,qOe)]))]}),_:2},1032,["content"])],40,HOe))),128))]),_:2},1032,["header"]))),256))]),_:2},1032,["header"])):(l.openBlock(!0),l.createElementBlock(l.Fragment,{key:1},l.renderList(f.list,h=>(l.openBlock(),l.createElementBlock("div",{key:h.name,class:"graphic",draggable:!0,onDragstart:v=>a(v,h)},[l.createVNode(c,{content:h.name},{default:l.withCtx(()=>{var v;return[(v=h.icon)!=null&&v.endsWith("svg")?(l.openBlock(),l.createElementBlock("img",{key:0,class:"icon__image",src:h.icon,alt:"",srcset:""},null,8,YOe)):(l.openBlock(),l.createElementBlock("svg",XOe,[l.createElementVNode("use",{"xlink:href":"#"+h.icon},null,8,JOe)])),l.createElementVNode("p",null,l.toDisplayString(h.name),1)]}),_:2},1032,["content"])],40,GOe))),128))]),_:2},1032,["header","class"])),64))]),_:1})])}}}),[["__scopeId","data-v-4ad49cf5"]]),ZOe={class:"panel__wrapper"},VOe={class:"panel__wrapper"},eEe=Gn(l.defineComponent({__name:"GraphicsManager",props:{},setup(t){const e=[{label:"图纸",value:1,slot:"diagrams",code:"paper"},{label:"内置组件",value:2,slot:"graphics"},{label:"我的组件",value:3,slot:"my-pens",code:"component"}],n=l.ref(2),{blueprintList:r,componentList:a,visible:i,folderName:o,showAddFolder:s,deleteMyPen:c,confirm:u,close:d,selectMode:f,selectType:h,deleteFolder:v,getTree:p,fileName:g,saveImageComponent:m}=J1(),y=E=>{const I=e.find(A=>A.value===E);if(I&&I.code){const A=I.code;p(A)}},b=l.computed(()=>{let E=[];return h.value=="paper"?E=r.value:E=a.value,E.map(I=>({label:I.dictName,value:I.id}))}),{uploadValue:w,headers:x,sizeLimit:C,handleFail:S}=Tg();let _=null;const O=E=>{console.log("set folder: ",E),_=E},N=E=>{var I,A,M;if(E.response){const U={name:"image",image:E.response.url||((I=E.response.data)==null?void 0:I.fileurl),relativePath:(A=E.response.data)==null?void 0:A.relativePath,fileName:(M=E.response.data)==null?void 0:M.fileName,width:100,height:100,x:100,y:100};m(_,U)}},B=async(E,I)=>{var M;if(!I||!I.data)return;E.stopPropagation();let A;try{typeof I.data=="string"?A=JSON.parse(I.data):typeof I.data=="object"&&(A=I.data)}catch($){console.log("dragStart error: ",$)}A&&(E instanceof DragEvent?(M=E.dataTransfer)==null||M.setData("Meta2d",JSON.stringify(A)):meta2d.canvas.addCaches=[A])},T=E=>{console.log("addDiagram: ",E),E.children||(E.children=[]),meta2d.clear(),meta2d.emit("clear")},k=E=>{const I=fs("warning",{content:"系统可能不会保存您所做的更改，是否继续？",title:"提示",placement:"top-right",duration:0,closeBtn:!0,footer(A){return A("div",{style:"text-align: right"},[A(zt,{onClick:()=>{let M;try{M=JSON.parse(E.data)}catch($){console.log("open diagram error: ",$)}meta2d.open(M),meta2d.emit("clear"),meta2d.fitView(),I.then($=>{$.close(),meta2d.render(!0)})}},"确定")])}})};return(E,I)=>{const A=l.resolveComponent("t-icon"),M=l.resolveComponent("t-button"),$=l.resolveComponent("t-tooltip"),U=l.resolveComponent("t-popconfirm"),F=l.resolveComponent("t-image"),j=l.resolveComponent("t-col"),W=l.resolveComponent("t-row"),H=l.resolveComponent("t-empty"),J=l.resolveComponent("t-collapse-panel"),Y=l.resolveComponent("t-collapse"),D=l.resolveComponent("t-upload"),q=l.resolveComponent("t-input"),z=l.resolveComponent("t-select"),K=l.resolveComponent("t-dialog");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createVNode(Eg,{modelValue:n.value,"onUpdate:modelValue":I[3]||(I[3]=P=>n.value=P),tabs:e,onChange:y},{graphics:l.withCtx(()=>[l.createVNode(QOe)]),diagrams:l.withCtx(()=>[l.createElementVNode("div",ZOe,[l.createVNode(M,{block:"",variant:"outline",onClick:I[0]||(I[0]=P=>l.unref(s)("paper"))},{default:l.withCtx(()=>[l.createVNode(A,{name:"add",slot:"icon"}),I[8]||(I[8]=l.createTextVNode(" 新建目录 "))]),_:1}),I[9]||(I[9]=l.createElementVNode("br",null,null,-1)),l.unref(r).length?(l.openBlock(),l.createBlock(Y,{key:0,defaultExpandAll:""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(r),P=>(l.openBlock(),l.createBlock(J,{value:P.id,header:P.dictName},{headerRightContent:l.withCtx(()=>[l.createVNode($,{content:"新建图纸，将清空画布"},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",style:{marginLeft:"8px"},onClick:R=>T(P)},{default:l.withCtx(()=>[l.createVNode(A,{name:"chart-add"})]),_:2},1032,["onClick"])]),_:2},1024),l.createVNode($,{content:"删除目录"},{default:l.withCtx(()=>[l.createVNode(U,{theme:"danger",content:"操作后无法恢复, 确定要删除吗?",onConfirm:R=>l.unref(v)(P,"paper")},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"}},{default:l.withCtx(()=>[l.createVNode(A,{name:"delete"})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),default:l.withCtx(()=>[P.data.length?(l.openBlock(),l.createBlock(W,{key:0,gutter:[10,10]},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(P.data,(R,X)=>(l.openBlock(),l.createBlock(j,{key:X,span:6,onClick:ee=>k(R)},{default:l.withCtx(()=>[l.createVNode($,{content:"单击打开图纸"},{default:l.withCtx(()=>[l.createVNode(F,{overlayTrigger:"hover",src:R.cover,fit:"contain",style:{width:"100px",height:"100px"}},{overlayContent:l.withCtx(()=>[l.createVNode(U,{theme:"danger",content:"操作后无法恢复, 确定要删除吗?",onConfirm:ee=>l.unref(c)(R,"paper")},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",theme:"danger",style:{float:"right"},onClick:l.withModifiers(()=>null,["stop"])},{default:l.withCtx(()=>[l.createVNode(A,{name:"delete"})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)):(l.openBlock(),l.createBlock(H,{key:1,description:""}))]),_:2},1032,["value","header"]))),256))]),_:1})):(l.openBlock(),l.createBlock(H,{key:1,description:""}))])]),"my-pens":l.withCtx(()=>[l.createElementVNode("div",VOe,[l.createVNode(M,{block:"",variant:"outline",onClick:I[1]||(I[1]=P=>l.unref(s)("component"))},{default:l.withCtx(()=>[l.createVNode(A,{name:"add",slot:"icon"}),I[10]||(I[10]=l.createTextVNode(" 新建目录 "))]),_:1}),I[11]||(I[11]=l.createElementVNode("br",null,null,-1)),l.unref(a).length?(l.openBlock(),l.createBlock(Y,{key:0,defaultExpandAll:""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(a),P=>(l.openBlock(),l.createBlock(J,{value:P.id,header:P.dictName},{headerRightContent:l.withCtx(()=>[l.createVNode(D,{ref_for:!0,ref:"uploadRef",modelValue:l.unref(w),"onUpdate:modelValue":I[2]||(I[2]=R=>l.isRef(w)?w.value=R:null),action:E.$attrs.uploadUrl||"https://service-bv448zsw-1257786608.gz.apigw.tencentcs.com/api/upload-demo",headers:l.unref(x),sizeLimit:l.unref(C),name:"object",theme:"custom",accept:"image/*",style:{display:"inline-flex"},onFail:l.unref(S),onSuccess:N},{default:l.withCtx(()=>[l.createVNode($,{content:"请选择单张小于1MB的图片上传"},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",style:{marginLeft:"8px"},onClick:R=>O(P)},{default:l.withCtx(()=>[l.createVNode(A,{name:"upload"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue","action","headers","sizeLimit","onFail"]),l.createVNode($,{content:"删除目录"},{default:l.withCtx(()=>[l.createVNode(U,{theme:"danger",content:"操作后无法恢复, 确定要删除吗?",onConfirm:R=>l.unref(v)(P,"component")},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",theme:"danger",style:{marginLeft:"8px"}},{default:l.withCtx(()=>[l.createVNode(A,{name:"delete"})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),default:l.withCtx(()=>[P.data.length?(l.openBlock(),l.createBlock(W,{key:0,gutter:[10,10]},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(P.data,(R,X)=>(l.openBlock(),l.createBlock(j,{key:X,span:6,draggable:!0,onDragstart:ee=>B(ee,R)},{default:l.withCtx(()=>[l.createVNode($,{content:R.name},{default:l.withCtx(()=>[l.createVNode(F,{src:R.cover,overlayTrigger:"hover",fit:"contain",style:{width:"100px",height:"100px"}},{overlayContent:l.withCtx(()=>[l.createVNode(U,{theme:"danger",content:"操作后无法恢复, 确定要删除吗?",onConfirm:ee=>l.unref(c)(R,"component")},{default:l.withCtx(()=>[l.createVNode(M,{size:"small",variant:"outline",theme:"danger",style:{float:"right"},onClick:l.withModifiers(()=>null,["stop"])},{default:l.withCtx(()=>[l.createVNode(A,{name:"delete"})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1032,["src"])]),_:2},1032,["content"])]),_:2},1032,["onDragstart"]))),128))]),_:2},1024)):(l.openBlock(),l.createBlock(H,{key:1}))]),_:2},1032,["value","header"]))),256))]),_:1})):(l.openBlock(),l.createBlock(H,{key:1,description:""}))])]),_:1},8,["modelValue"]),l.createVNode(K,{visible:l.unref(i),"onUpdate:visible":I[7]||(I[7]=P=>l.isRef(i)?i.value=P:null),header:l.unref(f)?"选择目录":"新建目录",onConfirm:l.unref(u),onClosed:l.unref(d)},{default:l.withCtx(()=>[l.unref(f)?(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[l.createVNode(z,{modelValue:l.unref(o),"onUpdate:modelValue":I[5]||(I[5]=P=>l.isRef(o)?o.value=P:null),options:b.value},null,8,["modelValue","options"]),I[12]||(I[12]=l.createElementVNode("br",null,null,-1)),l.createVNode(q,{modelValue:l.unref(g),"onUpdate:modelValue":I[6]||(I[6]=P=>l.isRef(g)?g.value=P:null),placeholder:"请输入图纸/组件名称"},null,8,["modelValue"])],64)):(l.openBlock(),l.createBlock(q,{key:0,modelValue:l.unref(o),"onUpdate:modelValue":I[4]||(I[4]=P=>l.isRef(o)?o.value=P:null),placeholder:"请输入目录名称",maxlength:"20",clearable:""},null,8,["modelValue"]))]),_:1},8,["visible","header","onConfirm","onClosed"])],64)}}}),[["__scopeId","data-v-46eee7b7"]]),tEe={class:"app-page"},nEe={class:"designer"},rEe=Object.freeze(Object.defineProperty({__proto__:null,default:Gn(l.defineComponent({__name:"Index",emits:["view","ready"],setup(t,{emit:e}){let n;function r(){n&&clearTimeout(n),n=setTimeout(()=>{const c=meta2d.data();localStorage.setItem("meta2d",JSON.stringify(c)),n=void 0},100)}const a=e,i=c=>{a("view",c)},o=l.ref(!1),s=c=>{a("ready",c),o.value=!0};return l.onMounted(()=>{meta2d.on("scale",r),meta2d.on("add",r),meta2d.on("opened",r),meta2d.on("undo",r),meta2d.on("redo",r),meta2d.on("add",r),meta2d.on("delete",r),meta2d.on("rotatePens",r),meta2d.on("translatePens",r)}),(c,u)=>(l.openBlock(),l.createElementBlock("div",tEe,[o.value?(l.openBlock(),l.createBlock(cTe,l.mergeProps({key:0},c.$attrs,{onView:i}),null,16)):l.createCommentVNode("",!0),l.createElementVNode("div",nEe,[l.createVNode(eEe,l.normalizeProps(l.guardReactiveProps(c.$attrs)),null,16),l.createVNode(b6,l.mergeProps(c.$attrs,{onReady:s}),null,16),o.value?(l.openBlock(),l.createBlock($Oe,l.normalizeProps(l.mergeProps({key:0},c.$attrs)),null,16)):l.createCommentVNode("",!0)])]))}}),[["__scopeId","data-v-7081acbb"]])},Symbol.toStringTag,{value:"Module"})),aEe=(t={})=>{const{presetScriptsConfig:e={}}=t||{},{columns:n=[],scripts:r=[],style:a,...i}=e||{},o=l.ref([]);let s={};if(a){const{evenRowBackgroundColor:c,oddRowBackgroundColor:u,textColor:d,backgroundImageUrl:f}=a;s={"--td-bg-color-secondarycontainer":u,"--td-bg-color-container":c,"--td-text-color-primary":d||"#FFFFFF","--td-text-color-placeholder":d||"#FFFFFF","--table-background-image-url":`url(${f||""})`},f&&!c&&(s["--td-bg-color-container"]="transparent"),f&&!u&&(s["--td-bg-color-secondarycontainer"]="transparent")}return{columns:n,tableLogData:o,tableProps:i,tableStyle:s}};function dw(t,e,n){n||(n=globalThis.meta2d);const r={0:"startAnimate",1:"pauseAnimate",2:"stopAnimate"},a=[];e!=null&&e.length&&e.forEach(o=>{const s=n.find(o);s&&a.push(...s)});const i=r[t];i&&(a.forEach(o=>{if(Array.isArray(o.pathFrames)){let s=o.pathAnimateControl;(!s||!s.play)&&(o.pathAnimateControl=P6(o,o.pathFrames),s=o.pathAnimateControl),t==0?s.isPaused.value?s.resume():s.play():t==1?s.pause():t==2&&s.stop()}}),n[i](a))}const A6=(t={},e)=>{let n=globalThis.meta2d;e&&(n=e);const{presetScriptsConfig:r={}}=t||{},{scripts:a=[]}=r||{},i=[];return Array.isArray(a)&&a.forEach((o,s)=>{const{handlers:c=[],duration:u=3e3,rowPropList:d=[]}=o;if(Array.isArray(c)&&c.length){let f=p=>{console.log("default custom message handler: ",p,o,f._cbs),f._cache=p,f._cbs.length&&(f._cbs.forEach(g=>{setTimeout(()=>{g(p)},u)}),f._cbs=[])};f._cbs=[],n||globalThis.meta2d?(n||globalThis.meta2d).on(Vn.CustomMessage,f):setTimeout(()=>{(n||globalThis.meta2d).on(Vn.CustomMessage,f)},1e3);const h=()=>{n||(n=globalThis.meta2d);const p=[],g=[];return c.forEach(m=>{const{target:y,action:b,value:w={},where:x}=m,C=()=>{if(Array.isArray(y))switch(b){case Ct.SetProps:y.forEach(S=>{n.setValue({tag:S,...w},{render:!1})}),n.render();break;case Ct.StartAnimate:dw("0",y,n);break;case Ct.PauseAnimate:dw("1",y,n);break;case Ct.StopAnimate:dw("2",y,n);break;case Ct.Dialog:n.canvas.dialog.show(w,m.params);break;case Nt.DialogClose:n.canvas.dialog.hide(),Og(wu.ExternalCall,m);break;case Nt.AnimateReverse:y.forEach(S=>{n.find(S).forEach(O=>{const{id:N,animateReverse:B}=O;n.setValue({id:N,animateReverse:!B},{render:!1})})});break;case Nt.Video:Og(wu.ExternalCall,m);break;case Nt.ScriptEnd:globalThis.meta2d.emit(Vn.CustomMessage,{type:vi.ScriptEnded,key:m.name||m.id});break;case Nt.ShowMeta2D:Og(wu.ExternalCall,m);break;case Nt.GoToView:if(typeof w=="string"){const S=n.findOne(w);S&&n.gotoView(S)}break;default:console.warn("unknown action:",b,m);break}};if(x&&x.type==Vn.CustomMessage&&![null,void 0,""].includes(x.value)&&x.key){const S=new Promise(_=>{if(x.value===vi.VideoEnded){const O=({type:N,key:B})=>{console.log("-------------- custom message: ",N,B,m),N==vi.VideoEnded&&B==x.key&&(_(C()),n.off(Vn.CustomMessage,f))};f._cbs.push(O)}else if(x.value===vi.ScriptEnded){const O=({type:N,key:B})=>{N==vi.ScriptEnded&&B==x.key&&(_(C()),n.off(Vn.CustomMessage,f))};f._cbs.push(O)}});g.push(S),console.log("asasas ----------------",m,f._cbs)}else p.push(Promise.resolve(C()))}),[p,g]},v=()=>{const[p,g]=h();return f._cache&&f._cbs.length&&f._cbs.forEach(m=>{setTimeout(()=>{m(f._cache)},u)}),new Promise(m=>{setTimeout(()=>{const y={sid:og()};Array.isArray(d)&&d.length&&d.forEach(b=>{const{prop:w,value:x}=b;w&&(y[w]=x)}),Promise.all([...p,...g]).then(b=>{m(y)})},u)})};i.push(v)}}),{tasks:i}},iEe=Gn(l.defineComponent({__name:"ExtendDialog",props:{},setup(t){const e=l.ref(!1),n=l.ref({}),r=l.computed(()=>{var h;return(h=n.value)==null?void 0:h.mode}),a=l.computed(()=>{var h;return(h=n.value)==null?void 0:h.width}),i=l.computed(()=>{var h;return(h=n.value)==null?void 0:h.title}),o=l.computed(()=>{var h;switch((h=n.value)==null?void 0:h.action){case Nt.Video:return l.defineAsyncComponent(()=>Promise.resolve().then(()=>g3e));case Nt.ShowMeta2D:return l.defineAsyncComponent(()=>Promise.resolve().then(()=>b3e));case Nt.ShowText:return l.defineAsyncComponent(()=>Promise.resolve().then(()=>w3e))}return null}),s=l.computed(()=>{var m;const{url:h,text:v,textColor:p,...g}=n.value||{};switch((m=n.value)==null?void 0:m.action){case Nt.Video:return h||console.error("video url is required"),{src:h};case Nt.ShowMeta2D:return{url:h};case Nt.ShowText:return{text:v,textColor:p,height:g.height}}}),c=h=>{console.log("dialog action params: ",h);const{params:v={},id:p}=h;v&&typeof v=="object"&&(v.id=p,n.value=v),e.value=((v==null?void 0:v.action)||(h==null?void 0:h.action))!=Nt.DialogClose};l.onMounted(()=>{meta2d.on(Vn.Dialog,c)}),l.onBeforeUnmount(()=>{meta2d.off(Vn.Dialog,c)});const u=(h,v)=>{var p;meta2d.emit(Vn.CustomMessage,{type:vi.VideoEnded,url:(v==null?void 0:v.src)||(v==null?void 0:v.url),key:(p=n.value)==null?void 0:p.id})},d=h=>{var v;((v=n.value)==null?void 0:v.action)==Nt.Video&&u(h,n.value)},f=l.computed(()=>{var h,v,p,g,m,y,b,w,x,C,S,_;return{"--td-bg-color-container":((h=n.value)==null?void 0:h.backgroundColor)||"white","--td-text-color-primary":((v=n.value)==null?void 0:v.titleColor)||((p=n.value)==null?void 0:p.textColor)||"black","--td-text-color-secondary":((g=n.value)==null?void 0:g.titleColor)||((m=n.value)==null?void 0:m.textColor)||"black","--extend-dialog-bg-image":`url(${((y=n.value)==null?void 0:y.backgroundImageUrl)||""})`,"--extend-dialog-header-margin-top":((b=n.value)==null?void 0:b.headerMarginTop)||"0px","--extend-dialog-content-padding-bottom":((w=n.value)==null?void 0:w.contentPaddingBottom)||"16px","--vjs-control-bar-background-color":((x=n.value)==null?void 0:x.controlBarBackgroundColor)||"black","--vjs-play-control-color":((C=n.value)==null?void 0:C.controlColor)||"white","--vjs-play-progress-bar-color":((S=n.value)==null?void 0:S.controlPlayProgressBarColor)||"white","--vjs-load-progress-bar-color":((_=n.value)==null?void 0:_.controlLoadProgressBarColor)||"#73859f80"}});return(h,v)=>{const p=l.resolveComponent("t-dialog");return l.openBlock(),l.createBlock(p,{visible:e.value,"onUpdate:visible":v[0]||(v[0]=g=>e.value=g),dialogClassName:"extend-action__dialog",header:i.value,closeOnEscKeydown:"",footer:!1,mode:r.value,width:a.value,destroyOnClose:"",style:l.normalizeStyle(f.value),onCloseBtnClick:d},{default:l.withCtx(()=>[(l.openBlock(),l.createBlock(l.resolveDynamicComponent(o.value),l.mergeProps(s.value,{onEnded:u}),null,16))]),_:1},8,["visible","header","mode","width","style"])}}}),[["__scopeId","data-v-fb69005a"]]),oEe=Gn(l.defineComponent({__name:"MultipleDataForm",props:{config:{type:Object}},emits:["submit","reset","change"],setup(t,{emit:e}){const n=t,r=l.computed(()=>{const{labelTextColor:u="white",selectBackgroundColor:d="",selectPopupBackgroundColor:f="",selectBorderColor:h="",selectHoverBackgroundColor:v="",buttonSubmitBackgroundColor:p="",buttonResetBackgroundColor:g=""}=n.config||{};return{backgroundColor:"transparent","--td-text-color-primary":u||"white","--td-text-color-placeholder":"white","--td-bg-color-specialcomponent":d||"#13345d","--td-border-level-2-color":h||"#709ec0","--td-brand-color-focus":h||"#709ec0","--td-bg-color-container":f||"#26588d","--td-bg-color-container-hover":v||"#528bce","--td-brand-color-light":v||"#528bce","--td-text-color-disabled":h||"#709ec0","--td-brand-color":g||"#204D87","--td-warning-color-active":p||"#5D5437","--td-warning-color":p||"#5D5437"}}),a=l.ref({data:""}),i=e,o=()=>{var d;if(!((d=n.config)!=null&&d.dataMap)){$r.warning("数据映射不存在"),console.error("数据映射不存在, 请在 multipleDataConfig 中配置 dataMap 参数");return}if(!a.value.data){s();return}const u=n.config.dataMap[a.value.data]||{};i("submit",a.value.data,u),u&&(meta2d.open(u),meta2d.emit("clear"),meta2d.fitView())},s=()=>{a.value.data="",i("reset"),meta2d.clear()},c=u=>{i("change",u)};return(u,d)=>{const f=l.resolveComponent("t-option"),h=l.resolveComponent("t-select"),v=l.resolveComponent("t-form-item"),p=l.resolveComponent("t-button"),g=l.resolveComponent("t-form");return l.withDirectives((l.openBlock(),l.createElementBlock("div",{class:"multiple-data__form",style:l.normalizeStyle(r.value)},[t.config&&t.config.options?(l.openBlock(),l.createBlock(g,{key:0,class:"demo-form-inline",layout:"inline"},{default:l.withCtx(()=>[l.createVNode(v,{label:t.config.label||"分系统选择"},{default:l.withCtx(()=>[l.createVNode(h,{modelValue:a.value.data,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value.data=m),clearable:"",popupProps:{attach:".multiple-data__form"},style:{width:"240px"},onChange:c},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.config.options,m=>(l.openBlock(),l.createBlock(f,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l.createVNode(v,{labelWidth:"0px"},{default:l.withCtx(()=>[l.createVNode(p,{theme:"warning",onClick:o,style:{"margin-right":"16px"}},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(t.config.submitButtonText||"搜索"),1)]),_:1}),l.createVNode(p,{theme:"primary",onClick:s},{default:l.withCtx(()=>[l.createTextVNode(l.toDisplayString(t.config.resetButtonText||"重置"),1)]),_:1})]),_:1})]),_:1})):l.createCommentVNode("",!0)],4)),[[l.vShow,!!t.config]])}}}),[["__scopeId","data-v-60642e98"]]),lEe={key:0,class:"left__panel"},sEe={key:0,class:"right__panel"},cEe=Object.freeze(Object.defineProperty({__proto__:null,default:Gn(l.defineComponent({__name:"Preview",props:{data:{type:Object},projectTreeData:{type:Array},showStickyTool:{type:Boolean,default:!0},showRightPanel:{type:Boolean,default:!1},rightPanelWidth:{type:Number,default:400},multipleDataConfig:{type:Object||void 0},enableBackgroundUpdate:{type:Boolean,default:!0}},emits:["ready"],setup(t,{emit:e}){var F;l.useCssVars(j=>({"55f05584":M.value}));const n=l.ref(null),r=e,a=t,i=l.ref(!0),o=l.reactive([{label:"fullscreen",icon:"fullscreen",popup:"全屏",show:()=>i.value},{label:"fit",icon:"rectangle",popup:"适应窗口",show:()=>i.value},{label:"expand",icon:"menu-fold",popup:"展开侧边栏",show:()=>i.value},{label:"collapse",icon:"menu-unfold",popup:"收起侧边栏",show:()=>!i.value}]),s=()=>globalThis.navigator.userAgent.includes("Electron"),c=l.ref([]),u=l.ref(null),d=sxe(),f=l.ref([]),h=l.ref([]),v=l.ref({}),p=l.ref({}),g=l.ref([]),m=j=>{const{columns:W,tableProps:H,tableStyle:J}=aEe(j),{tasks:Y}=A6(j,globalThis.meta2d);return f.value=W,v.value=H,p.value=J,setTimeout(async()=>{for(const D of Y){const q=await D();q&&Y.length&&h.value.push(q)}}),function(){}},y=(j,W)=>{if(W){b(),A();const H=m(W);g.value.push(H)}},b=()=>{if(g.value.length>0){for(const j of g.value)j();g.value.length=0}h.value=[]},{extendOn:w}=y6();l.onMounted(()=>{var j,W;if(s())(j=globalThis.versions)!=null&&j.projectListSync&&globalThis.versions.projectListSync("list.json").then(H=>{var J;if(console.log("projectListSync res: ",H),Array.isArray(H))if(c.value=H,H.length>0){if(((J=H[0].children)==null?void 0:J.length)>0){const Y=H[0].children[0];if(Y.json){const D=Te(Y.json);D.locked=1,D.lockState&&(D.locked=D.lockState),meta2d.open(D),meta2d.fitView(),A(),localStorage.setItem("meta2d",JSON.stringify(Y.json)),n.value&&(n.value.Sendrequestsyn(),n.value.reconnectWebSocket(D)),m(D)}}}else meta2d.clear()}).catch(H=>{console.log("projectListSync err: ",H),meta2d.clear()});else try{const H=(W=d==null?void 0:d.query)==null?void 0:W["open-file"];H&&fetch(H).then(J=>J.json()).then(J=>{J.locked=1,J.lockState&&(J.locked=J.lockState),meta2d.open(J),meta2d.emit("clear"),meta2d.fitView(),A(),m(J)})}catch(H){console.log("open file error: ",H)}meta2d==null||meta2d.resize(),w()});const x=l.computed(()=>{var W;if(s())return c.value;if(a.projectTreeData)return a.projectTreeData;if((W=globalThis.__meta2d_env__)!=null&&W.projectTreeData)return globalThis.__meta2d_env__.projectTreeData;let j=localStorage.getItem("meta2d");return j?[{label:"默认",value:"",children:[{label:`meta2d.${JSON.parse(j).template}`,value:""}]}]:[]}),C=j=>()=>l.h(Y0,{name:j}),S=j=>{j=="fit"?meta2d.fitView(!0,20):j=="fullscreen"?F2e():j=="refresh"&&(console.log("refresh同步一下数据"),n.value&&n.value.Sendrequestsyn())},_=({e:j,item:W})=>{W.label=="expand"?i.value=!1:W.label=="collapse"?i.value=!0:S(W.label)},O=({e:j,node:W})=>{if(console.log("change node=== ",W),s()){if(W.data.json){const H=Te(W.data.json);H.locked=1,meta2d.open(H),meta2d.emit("clear"),meta2d.fitView(),A(),n.value&&n.value.reconnectWebSocket(W.data.json)}return}W.value&&fetch(W.value).then(H=>H.json()).then(H=>{H&&(H.locked=1,meta2d.open(H),meta2d.emit("clear"),meta2d.fitView(),A())}).catch(H=>{console.log("err: ",H)})},N=()=>{meta2d==null||meta2d.resize()},B=()=>{meta2d==null||meta2d.resize()};let T,k=[];const E=j=>{const W=k.find(H=>H.Name===j.Name);if(W){const{id:H,tag:J,...Y}=j;Object.assign(W,Y);return}else k.push(j)},I=j=>{if(!j)return;const{id:W,tag:H,action:J,value:Y,...D}=j,q=Y||D,z=meta2d.find(W||H||D.Name);switch(J){case Ct.StartAnimate:meta2d.startAnimate(z);break;case Ct.PauseAnimate:meta2d.pauseAnimate(z);break;case Ct.StopAnimate:meta2d.stopAnimate(z);break;default:z.forEach(K=>{var P;if(q.id=K.id,"showChild"in K&&((P=K.Ecomponents)==null?void 0:P.length)>0){const[R,X]=K.Ecomponents;if(R==="off"||R==="on"){const ee=R==="off"&&X==="1"||R==="on"&&X==="0";let re;ee?re=[1,0]:re=[0,1],q.showChild=re.indexOf(j.State)}else{const ee=K.Ecomponents.slice(1);if(R>=3){const re=ee.indexOf(j.State.toString());q.showChild=re}}}j.Value==1?(q.color="rgb(255, 0, 0)",q.lineWidth=2,q.animateColor="rgb(255, 0, 0)",meta2d.startAnimate([K])):(meta2d.stopAnimate([K]),q.color="rgb(0, 0, 128)",q.lineWidth=2),console.log("_props: ",q),meta2d.setValue(q,{render:!1})});break}},A=()=>{meta2d&&k.forEach(j=>{console.log("state: ",j),I(j)})};a.enableBackgroundUpdate&&(T=j=>{const{busName:W,msg:H,msgType:J}=j||{};if(console.log("ws msg: ",j),H){const{id:Y,tag:D,action:q,value:z,...K}=H;if(!K){console.warn("无法识别目标图元：",j);return}E(H),meta2d.find(Y||D||K.Name).length&&(I(H),meta2d.render())}});const M=l.computed(()=>`${a.rightPanelWidth}px`);let $=localStorage.getItem("meta2d"),U;try{U=JSON.parse($),!s()&&!((F=d==null?void 0:d.query)!=null&&F["open-file"])&&m(a.data||U)}catch{}return(j,W)=>{const H=l.resolveComponent("t-icon"),J=l.resolveComponent("t-col"),Y=l.resolveComponent("t-row"),D=l.resolveComponent("t-divider"),q=l.resolveComponent("t-tree"),z=l.resolveComponent("t-table"),K=l.resolveComponent("t-sticky-item"),P=l.resolveComponent("t-sticky-tool");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createElementVNode("div",{class:"app-page is--preview",style:l.normalizeStyle({paddingTop:a.multipleDataConfig?"50px":"0px"})},[l.createVNode(oEe,{config:t.multipleDataConfig,onSubmit:y,onReset:b},null,8,["config"]),l.createVNode(l.Transition,{name:"sidebar-transition",onAfterLeave:B,onAfterEnter:N},{default:l.withCtx(()=>[i.value?l.createCommentVNode("",!0):(l.openBlock(),l.createElementBlock("div",lEe,[l.createVNode(Y,{justify:"end",style:{cursor:"pointer"}},{default:l.withCtx(()=>[l.createVNode(J,{span:2},{default:l.withCtx(()=>[l.createVNode(H,{name:"fullscreen",size:"large",onClick:W[0]||(W[0]=R=>S("fullscreen"))})]),_:1}),l.createVNode(J,{span:2},{default:l.withCtx(()=>[l.createVNode(H,{name:"rectangle",size:"large",onClick:W[1]||(W[1]=R=>S("fit"))})]),_:1}),l.createVNode(J,{span:2},{default:l.withCtx(()=>[l.createVNode(H,{name:"refresh",size:"large",onClick:W[2]||(W[2]=R=>S("refresh"))})]),_:1})]),_:1}),l.createVNode(D),l.createVNode(q,{data:x.value,expandAll:"",activable:"",onClick:O},null,8,["data"])]))]),_:1}),l.createVNode(b6,l.mergeProps(j.$attrs,{preview:"",data:t.data,customWsHandler:l.unref(T),onReady:W[3]||(W[3]=R=>r("ready",R)),ref_key:"childComponentRef",ref:n}),null,16,["data","customWsHandler"]),t.showRightPanel||v.value.show?(l.openBlock(),l.createElementBlock("div",sEe,[l.renderSlot(j.$slots,"right-panel",{},()=>[f.value.length?(l.openBlock(),l.createBlock(z,l.mergeProps({key:0,ref_key:"tableRef",ref:u,class:"table-flex-right","row-key":"sid",data:h.value,columns:f.value,"active-row-type":"single"},v.value,{style:p.value}),null,16,["data","columns","style"])):l.createCommentVNode("",!0)],!0)])):l.createCommentVNode("",!0),t.showStickyTool?(l.openBlock(),l.createBlock(P,{key:1,type:"compact",placement:"left-bottom",style:{"z-index":"999"},onClick:_},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(o,R=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:R.label},[R.show()?(l.openBlock(),l.createBlock(K,{key:0,label:R.label,icon:C(R.icon),popup:R.popup},null,8,["label","icon","popup"])):l.createCommentVNode("",!0)],64))),128))]),_:1})):l.createCommentVNode("",!0)],4),l.createVNode(iEe)],64)}}}),[["__scopeId","data-v-05f488aa"]])},Symbol.toStringTag,{value:"Module"}));var Ff;typeof window<"u"?Ff=window:typeof qn<"u"?Ff=qn:typeof self<"u"?Ff=self:Ff={};var Pg=Ff;const fe=yu(Pg),uEe=q_e(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var N6=typeof qn<"u"?qn:typeof window<"u"?window:{},dEe=uEe,Bf;typeof document<"u"?Bf=document:(Bf=N6["__GLOBAL_DOCUMENT_CACHE@4"],Bf||(Bf=N6["__GLOBAL_DOCUMENT_CACHE@4"]=dEe));var D6=Bf;const He=yu(D6);var fw={exports:{}},R6={exports:{}};(function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(R6);var fEe=R6.exports,hEe=pEe,vEe=Object.prototype.toString;function pEe(t){if(!t)return!1;var e=vEe.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}function gEe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=mEe(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mEe(t,e){if(t){if(typeof t=="string")return M6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M6(t,e)}}function M6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yEe=function(){function t(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(r,a){this.typeToInterceptorsMap_.has(r)||this.typeToInterceptorsMap_.set(r,new Set);var i=this.typeToInterceptorsMap_.get(r);return i.has(a)?!1:(i.add(a),!0)},e.removeInterceptor=function(r,a){var i=this.typeToInterceptorsMap_.get(r);return i&&i.has(a)?(i.delete(a),!0):!1},e.clearInterceptorsByType=function(r){var a=this.typeToInterceptorsMap_.get(r);return a?(this.typeToInterceptorsMap_.delete(r),this.typeToInterceptorsMap_.set(r,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(r){return this.typeToInterceptorsMap_.get(r)||new Set},e.execute=function(r,a){for(var i=this.getForType(r),o=gEe(i),s;!(s=o()).done;){var c=s.value;try{a=c(a)}catch{}}return a},t}(),bEe=yEe,wEe=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=t.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(r){this.maxAttempts_=r},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(r){this.delayFactor_=r},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(r){this.fuzzFactor_=r},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(r){this.initialDelay_=r},e.createRetry=function(r){var a=r===void 0?{}:r,i=a.maxAttempts,o=a.delayFactor,s=a.fuzzFactor,c=a.initialDelay;return new xEe({maxAttempts:i||this.maxAttempts_,delayFactor:o||this.delayFactor_,fuzzFactor:s||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t}(),xEe=function(){function t(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var e=t.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var r=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+r},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var r=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return r+Math.random()*(a-r)},t}(),CEe=wEe,_Ee=Pg,SEe=function(e,n){return n===void 0&&(n=!1),function(r,a,i){if(r){e(r);return}if(a.statusCode>=400&&a.statusCode<=599){var o=i;if(n)if(_Ee.TextDecoder){var s=TEe(a.headers&&a.headers["content-type"]);try{o=new TextDecoder(s).decode(i)}catch{}}else o=String.fromCharCode.apply(null,new Uint8Array(i));e({cause:o});return}e(null,i)}};function TEe(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,n){var r=n.split("="),a=r[0],i=r[1];return a.trim()==="charset"?i.trim():e},"utf-8")}var kEe=SEe,L6=Pg,OEe=fEe,EEe=hEe,F6=bEe,PEe=CEe;Rn.httpHandler=kEe,Rn.requestInterceptorsStorage=new F6,Rn.responseInterceptorsStorage=new F6,Rn.retryManager=new PEe;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var IEe=function(e){var n={};return e&&e.trim().split(`
`).forEach(function(r){var a=r.indexOf(":"),i=r.slice(0,a).trim().toLowerCase(),o=r.slice(a+1).trim();typeof n[i]>"u"?n[i]=o:Array.isArray(n[i])?n[i].push(o):n[i]=[n[i],o]}),n};fw.exports=Rn,fw.exports.default=Rn,Rn.XMLHttpRequest=L6.XMLHttpRequest||REe,Rn.XDomainRequest="withCredentials"in new Rn.XMLHttpRequest?Rn.XMLHttpRequest:L6.XDomainRequest,AEe(["get","put","post","patch","head","delete"],function(t){Rn[t==="delete"?"del":t]=function(e,n,r){return n=B6(e,n,r),n.method=t.toUpperCase(),hw(n)}});function AEe(t,e){for(var n=0;n<t.length;n++)e(t[n])}function NEe(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function B6(t,e,n){var r=t;return EEe(e)?(n=e,typeof t=="string"&&(r={uri:t})):r=OEe({},e,{uri:t}),r.callback=n,r}function Rn(t,e,n){return e=B6(t,e,n),hw(e)}function hw(t){if(typeof t.callback>"u")throw new Error("callback argument missing");if(t.requestType&&Rn.requestInterceptorsStorage.getIsEnabled()){var e={uri:t.uri||t.url,headers:t.headers||{},body:t.body,metadata:t.metadata||{},retry:t.retry,timeout:t.timeout},n=Rn.requestInterceptorsStorage.execute(t.requestType,e);t.uri=n.uri,t.headers=n.headers,t.body=n.body,t.metadata=n.metadata,t.retry=n.retry,t.timeout=n.timeout}var r=!1,a=function(C,S,_){r||(r=!0,t.callback(C,S,_))};function i(){u.readyState===4&&!Rn.responseInterceptorsStorage.getIsEnabled()&&setTimeout(c,0)}function o(){var x=void 0;if(u.response?x=u.response:x=u.responseText||DEe(u),y)try{x=JSON.parse(x)}catch{}return x}function s(x){if(clearTimeout(b),clearTimeout(t.retryTimeout),x instanceof Error||(x=new Error(""+(x||"Unknown XMLHttpRequest Error"))),x.statusCode=0,!f&&Rn.retryManager.getIsEnabled()&&t.retry&&t.retry.shouldRetry()){t.retryTimeout=setTimeout(function(){t.retry.moveToNextAttempt(),t.xhr=u,hw(t)},t.retry.getCurrentFuzzedDelay());return}if(t.requestType&&Rn.responseInterceptorsStorage.getIsEnabled()){var C={headers:w.headers||{},body:w.body,responseUrl:u.responseURL,responseType:u.responseType},S=Rn.responseInterceptorsStorage.execute(t.requestType,C);w.body=S.body,w.headers=S.headers}return a(x,w)}function c(){if(!f){var x;clearTimeout(b),clearTimeout(t.retryTimeout),t.useXDR&&u.status===void 0?x=200:x=u.status===1223?204:u.status;var C=w,S=null;if(x!==0?(C={body:o(),statusCode:x,method:v,headers:{},url:h,rawRequest:u},u.getAllResponseHeaders&&(C.headers=IEe(u.getAllResponseHeaders()))):S=new Error("Internal XMLHttpRequest Error"),t.requestType&&Rn.responseInterceptorsStorage.getIsEnabled()){var _={headers:C.headers||{},body:C.body,responseUrl:u.responseURL,responseType:u.responseType},O=Rn.responseInterceptorsStorage.execute(t.requestType,_);C.body=O.body,C.headers=O.headers}return a(S,C,C.body)}}var u=t.xhr||null;u||(t.cors||t.useXDR?u=new Rn.XDomainRequest:u=new Rn.XMLHttpRequest);var d,f,h=u.url=t.uri||t.url,v=u.method=t.method||"GET",p=t.body||t.data,g=u.headers=t.headers||{},m=!!t.sync,y=!1,b,w={body:void 0,headers:{},statusCode:0,method:v,url:h,rawRequest:u};if("json"in t&&t.json!==!1&&(y=!0,g.accept||g.Accept||(g.Accept="application/json"),v!=="GET"&&v!=="HEAD"&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),p=JSON.stringify(t.json===!0?p:t.json))),u.onreadystatechange=i,u.onload=c,u.onerror=s,u.onprogress=function(){},u.onabort=function(){f=!0,clearTimeout(t.retryTimeout)},u.ontimeout=s,u.open(v,h,!m,t.username,t.password),m||(u.withCredentials=!!t.withCredentials),!m&&t.timeout>0&&(b=setTimeout(function(){if(!f){f=!0,u.abort("timeout");var x=new Error("XMLHttpRequest timeout");x.code="ETIMEDOUT",s(x)}},t.timeout)),u.setRequestHeader)for(d in g)g.hasOwnProperty(d)&&u.setRequestHeader(d,g[d]);else if(t.headers&&!NEe(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(u.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(u),u.send(p||null),u}function DEe(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function REe(){}var MEe=fw.exports;const j6=yu(MEe);var $6={exports:{}},U6=D6,vw=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function wa(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}wa.prototype=vw(Error.prototype),wa.prototype.constructor=wa,wa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function pw(t){function e(r,a,i,o){return(r|0)*3600+(a|0)*60+(i|0)+(o|0)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function jf(){this.values=vw(null)}jf.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function $f(t,e,n,r){var a=r?t.split(r):[t];for(var i in a)if(typeof a[i]=="string"){var o=a[i].split(n);if(o.length===2){var s=o[0].trim(),c=o[1].trim();e(s,c)}}}function LEe(t,e,n){var r=t;function a(){var s=pw(t);if(s===null)throw new wa(wa.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),s}function i(s,c){var u=new jf;$f(s,function(d,f){switch(d){case"region":for(var h=n.length-1;h>=0;h--)if(n[h].id===f){u.set(d,n[h].region);break}break;case"vertical":u.alt(d,f,["rl","lr"]);break;case"line":var v=f.split(","),p=v[0];u.integer(d,p),u.percent(d,p)&&u.set("snapToLines",!1),u.alt(d,p,["auto"]),v.length===2&&u.alt("lineAlign",v[1],["start","center","end"]);break;case"position":v=f.split(","),u.percent(d,v[0]),v.length===2&&u.alt("positionAlign",v[1],["start","center","end"]);break;case"size":u.percent(d,f);break;case"align":u.alt(d,f,["start","center","end","left","right"]);break}},/:/,/\s/),c.region=u.get("region",null),c.vertical=u.get("vertical","");try{c.line=u.get("line","auto")}catch{}c.lineAlign=u.get("lineAlign","start"),c.snapToLines=u.get("snapToLines",!0),c.size=u.get("size",100);try{c.align=u.get("align","center")}catch{c.align=u.get("align","middle")}try{c.position=u.get("position","auto")}catch{c.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=a(),o(),t.substr(0,3)!=="-->")throw new wa(wa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.substr(3),o(),e.endTime=a(),o(),i(t,e)}var gw=U6.createElement&&U6.createElement("textarea"),FEe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},z6={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},BEe={v:"title",lang:"lang"},H6={rt:"ruby"};function W6(t,e){function n(){if(!e)return null;function p(m){return e=e.substr(m.length),m}var g=e.match(/^([^<]*)(<[^>]*>?)?/);return p(g[1]?g[1]:g[2])}function r(p){return gw.innerHTML=p,p=gw.textContent,gw.textContent="",p}function a(p,g){return!H6[g.localName]||H6[g.localName]===p.localName}function i(p,g){var m=FEe[p];if(!m)return null;var y=t.document.createElement(m),b=BEe[p];return b&&g&&(y[b]=g.trim()),y}for(var o=t.document.createElement("div"),s=o,c,u=[];(c=n())!==null;){if(c[0]==="<"){if(c[1]==="/"){u.length&&u[u.length-1]===c.substr(2).replace(">","")&&(u.pop(),s=s.parentNode);continue}var d=pw(c.substr(1,c.length-2)),f;if(d){f=t.document.createProcessingInstruction("timestamp",d),s.appendChild(f);continue}var h=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(f=i(h[1],h[3]),!f)||!a(s,f))continue;if(h[2]){var v=h[2].split(".");v.forEach(function(p){var g=/^bg_/.test(p),m=g?p.slice(3):p;if(z6.hasOwnProperty(m)){var y=g?"background-color":"color",b=z6[m];f.style[y]=b}}),f.className=v.join(" ")}u.push(h[1]),s.appendChild(f),s=f;continue}s.appendChild(t.document.createTextNode(r(c)))}return o}var K6=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function jEe(t){for(var e=0;e<K6.length;e++){var n=K6[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function $Ee(t){var e=[],n="",r;if(!t||!t.childNodes)return"ltr";function a(s,c){for(var u=c.childNodes.length-1;u>=0;u--)s.push(c.childNodes[u])}function i(s){if(!s||!s.length)return null;var c=s.pop(),u=c.textContent||c.innerText;if(u){var d=u.match(/^.*(\n|\r)/);return d?(s.length=0,d[0]):u}if(c.tagName==="ruby")return i(s);if(c.childNodes)return a(s,c),i(s)}for(a(e,t);n=i(e);)for(var o=0;o<n.length;o++)if(r=n.charCodeAt(o),jEe(r))return"rtl";return"ltr"}function UEe(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,r=0,a=0;a<n.length&&n[a]!==e;a++)n[a].mode==="showing"&&r++;return++r*-1}function Ig(){}Ig.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},Ig.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Ag(t,e,n){Ig.call(this),this.cue=e,this.cueDiv=W6(t,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=t.document.createElement("div"),r={direction:$Ee(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var a=0;switch(e.positionAlign){case"start":case"line-left":a=e.position;break;case"center":a=e.position-e.size/2;break;case"end":case"line-right":a=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}Ag.prototype=vw(Ig.prototype),Ag.prototype.constructor=Ag;function Pr(t){var e,n,r,a;if(t.div){n=t.div.offsetHeight,r=t.div.offsetWidth,a=t.div.offsetTop;var i=(i=t.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();t=t.div.getBoundingClientRect(),e=i?Math.max(i[0]&&i[0].height||0,t.height/i.length):0}this.left=t.left,this.right=t.right,this.top=t.top||a,this.height=t.height||n,this.bottom=t.bottom||a+(t.height||n),this.width=t.width||r,this.lineHeight=e!==void 0?e:t.lineHeight}Pr.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}},Pr.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Pr.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Pr.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Pr.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Pr.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),n=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),r=e*n;return r/(this.height*this.width)},Pr.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Pr.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var a={left:t.left,right:t.right,top:t.top||r,height:t.height||e,bottom:t.bottom||r+(t.height||e),width:t.width||n};return a};function zEe(t,e,n,r){function a(m,y){for(var b,w=new Pr(m),x=1,C=0;C<y.length;C++){for(;m.overlapsOppositeAxis(n,y[C])||m.within(n)&&m.overlapsAny(r);)m.move(y[C]);if(m.within(n))return m;var S=m.intersectPercentage(n);x>S&&(b=new Pr(m),x=S),m=new Pr(w)}return b||w}var i=new Pr(e),o=e.cue,s=UEe(o),c=[];if(o.snapToLines){var u;switch(o.vertical){case"":c=["+y","-y"],u="height";break;case"rl":c=["+x","-x"],u="width";break;case"lr":c=["-x","+x"],u="width";break}var d=i.lineHeight,f=d*Math.round(s),h=n[u]+d,v=c[0];Math.abs(f)>h&&(f=f<0?-1:1,f*=Math.ceil(h/d)*d),s<0&&(f+=o.vertical===""?n.height:n.width,c=c.reverse()),i.move(v,f)}else{var p=i.lineHeight/n.height*100;switch(o.lineAlign){case"center":s-=p/2;break;case"end":s-=p;break}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")});break}c=["+y","-x","+x","-y"],i=new Pr(e)}var g=a(i,c);e.move(g.toCSSCompatValues(n))}function xu(){}xu.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},xu.convertCueToDOMTree=function(t,e){return!t||!e?null:W6(t,e)};var HEe=.05,WEe="sans-serif",KEe="1.5%";xu.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=t.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=KEe,n.appendChild(r);function a(d){for(var f=0;f<d.length;f++)if(d[f].hasBeenReset||!d[f].displayState)return!0;return!1}if(!a(e)){for(var i=0;i<e.length;i++)r.appendChild(e[i].displayState);return}var o=[],s=Pr.getSimpleBoxPosition(r),c=Math.round(s.height*HEe*100)/100,u={font:c+"px "+WEe};(function(){for(var d,f,h=0;h<e.length;h++)f=e[h],d=new Ag(t,f,u),r.appendChild(d.div),zEe(t,d,s,o),f.displayState=d.div,o.push(Pr.getSimpleBoxPosition(d))})()},xu.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},xu.Parser.prototype={reportOrThrowError:function(t){if(t instanceof wa)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){for(var d=e.buffer,f=0;f<d.length&&d[f]!=="\r"&&d[f]!==`
`;)++f;var h=d.substr(0,f);return d[f]==="\r"&&++f,d[f]===`
`&&++f,e.buffer=d.substr(f),h}function r(d){var f=new jf;if($f(d,function(v,p){switch(v){case"id":f.set(v,p);break;case"width":f.percent(v,p);break;case"lines":f.integer(v,p);break;case"regionanchor":case"viewportanchor":var g=p.split(",");if(g.length!==2)break;var m=new jf;if(m.percent("x",g[0]),m.percent("y",g[1]),!m.has("x")||!m.has("y"))break;f.set(v+"X",m.get("x")),f.set(v+"Y",m.get("y"));break;case"scroll":f.alt(v,p,["up"]);break}},/=/,/\s/),f.has("id")){var h=new(e.vttjs.VTTRegion||e.window.VTTRegion);h.width=f.get("width",100),h.lines=f.get("lines",3),h.regionAnchorX=f.get("regionanchorX",0),h.regionAnchorY=f.get("regionanchorY",100),h.viewportAnchorX=f.get("viewportanchorX",0),h.viewportAnchorY=f.get("viewportanchorY",100),h.scroll=f.get("scroll",""),e.onregion&&e.onregion(h),e.regionList.push({id:f.get("id"),region:h})}}function a(d){var f=new jf;$f(d,function(h,v){switch(h){case"MPEGT":f.integer(h+"S",v);break;case"LOCA":f.set(h+"L",pw(v));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:f.get("MPEGTS"),LOCAL:f.get("LOCAL")})}function i(d){d.match(/X-TIMESTAMP-MAP/)?$f(d,function(f,h){switch(f){case"X-TIMESTAMP-MAP":a(h);break}},/=/):$f(d,function(f,h){switch(f){case"Region":r(h);break}},/:/)}try{var o;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;o=n();var s=o.match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new wa(wa.Errors.BadSignature);e.state="HEADER"}for(var c=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(c?c=!1:o=n(),e.state){case"HEADER":/:/.test(o)?i(o):o||(e.state="ID");continue;case"NOTE":o||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){e.state="NOTE";break}if(!o)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",o.indexOf("-->")===-1){e.cue.id=o;continue}case"CUE":try{LEe(o,e.cue,e.regionList)}catch(d){e.reportOrThrowError(d),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=o.indexOf("-->")!==-1;if(!o||u&&(c=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=o.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":o||(e.state="ID");continue}}}catch(d){e.reportOrThrowError(d),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new wa(wa.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var qEe=xu,GEe="auto",YEe={"":1,lr:1,rl:1},XEe={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function JEe(t){if(typeof t!="string")return!1;var e=YEe[t.toLowerCase()];return e?t.toLowerCase():!1}function mw(t){if(typeof t!="string")return!1;var e=XEe[t.toLowerCase()];return e?t.toLowerCase():!1}function q6(t,e,n){this.hasBeenReset=!1;var r="",a=!1,i=t,o=e,s=n,c=null,u="",d=!0,f="auto",h="start",v="auto",p="auto",g=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(y){r=""+y}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(y){a=!!y}},startTime:{enumerable:!0,get:function(){return i},set:function(y){if(typeof y!="number")throw new TypeError("Start time must be set to a number.");i=y,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(y){if(typeof y!="number")throw new TypeError("End time must be set to a number.");o=y,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(y){s=""+y,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(y){c=y,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(y){var b=JEe(y);if(b===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(y){d=!!y,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(y){if(typeof y!="number"&&y!==GEe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=y,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(y){var b=mw(y);b?(h=b,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return v},set:function(y){if(y<0||y>100)throw new Error("Position must be between 0 and 100.");v=y,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(y){var b=mw(y);b?(p=b,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(y){if(y<0||y>100)throw new Error("Size must be between 0 and 100.");g=y,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(y){var b=mw(y);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=b,this.hasBeenReset=!0}}}),this.displayState=void 0}q6.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var QEe=q6,ZEe={"":!0,up:!0};function VEe(t){if(typeof t!="string")return!1;var e=ZEe[t.toLowerCase()];return e?t.toLowerCase():!1}function Uf(t){return typeof t=="number"&&t>=0&&t<=100}function ePe(){var t=100,e=3,n=0,r=100,a=0,i=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(s){if(!Uf(s))throw new Error("Width must be between 0 and 100.");t=s}},lines:{enumerable:!0,get:function(){return e},set:function(s){if(typeof s!="number")throw new TypeError("Lines must be set to a number.");e=s}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(s){if(!Uf(s))throw new Error("RegionAnchorX must be between 0 and 100.");r=s}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(s){if(!Uf(s))throw new Error("RegionAnchorY must be between 0 and 100.");n=s}},viewportAnchorY:{enumerable:!0,get:function(){return i},set:function(s){if(!Uf(s))throw new Error("ViewportAnchorY must be between 0 and 100.");i=s}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(s){if(!Uf(s))throw new Error("ViewportAnchorX must be between 0 and 100.");a=s}},scroll:{enumerable:!0,get:function(){return o},set:function(s){var c=VEe(s);c===!1?console.warn("Scroll: an invalid or illegal string was specified."):o=c}}})}var tPe=ePe,Lo=Pg,Ps=$6.exports={WebVTT:qEe,VTTCue:QEe,VTTRegion:tPe};Lo.vttjs=Ps,Lo.WebVTT=Ps.WebVTT;var nPe=Ps.VTTCue,rPe=Ps.VTTRegion,aPe=Lo.VTTCue,iPe=Lo.VTTRegion;Ps.shim=function(){Lo.VTTCue=nPe,Lo.VTTRegion=rPe},Ps.restore=function(){Lo.VTTCue=aPe,Lo.VTTRegion=iPe},Lo.VTTCue||Ps.shim();var oPe=$6.exports;const G6=yu(oPe);function Mn(){return Mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mn.apply(null,arguments)}var Y6="https://example.com",Ng=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=fe.location&&fe.location.href||"");var r=/^\/\//.test(e),a=!fe.location&&!/\/\//i.test(e);e=new fe.URL(e,fe.location||Y6);var i=new URL(n,e);return a?i.href.slice(Y6.length):r?i.href.slice(i.protocol.length):i.href},yw=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(r,a){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(a)},e.off=function(r,a){if(!this.listeners[r])return!1;var i=this.listeners[r].indexOf(a);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(i,1),i>-1},e.trigger=function(r){var a=this.listeners[r];if(a)if(arguments.length===2)for(var i=a.length,o=0;o<i;++o)a[o].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),c=a.length,u=0;u<c;++u)a[u].apply(this,s)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(a){r.push(a)})},t}(),lPe=function(e){return fe.atob?fe.atob(e):Buffer.from(e,"base64").toString("binary")};function X6(t){for(var e=lPe(t),n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class sPe extends yw{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const cPe="	",bw=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},uPe=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},Ir=function(t){const e={};if(!t)return e;const n=t.split(uPe());let r=n.length,a;for(;r--;)n[r]!==""&&(a=/([^=]*)=(.*)/.exec(n[r]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),e[a[0]]=a[1]);return e},J6=t=>{const e=t.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class dPe extends yw{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,r;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((i,o)=>{const s=o(e);return s===e?i:i.concat([s])},[e]).forEach(i=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,i))return;if(i.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:i.slice(1)});return}if(i=i.replace("\r",""),n=/^#EXTM3U/.exec(i),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(i),n){r={type:"tag",tagType:"inf"},n[1]&&(r.duration=parseFloat(n[1])),n[2]&&(r.title=n[2]),this.trigger("data",r);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(i),n){r={type:"tag",tagType:"targetduration"},n[1]&&(r.duration=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(i),n){r={type:"tag",tagType:"version"},n[1]&&(r.version=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(i),n){r={type:"tag",tagType:"media-sequence"},n[1]&&(r.number=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(i),n){r={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(r.number=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(i),n){r={type:"tag",tagType:"playlist-type"},n[1]&&(r.playlistType=n[1]),this.trigger("data",r);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(i),n){r=Mn(bw(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(i),n){r={type:"tag",tagType:"allow-cache"},n[1]&&(r.allowed=!/NO/.test(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(i),n){if(r={type:"tag",tagType:"map"},n[1]){const o=Ir(n[1]);o.URI&&(r.uri=o.URI),o.BYTERANGE&&(r.byterange=bw(o.BYTERANGE))}this.trigger("data",r);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(i),n){r={type:"tag",tagType:"stream-inf"},n[1]&&(r.attributes=Ir(n[1]),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=J6(r.attributes.RESOLUTION)),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))),this.trigger("data",r);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(i),n){r={type:"tag",tagType:"media"},n[1]&&(r.attributes=Ir(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-ENDLIST/.exec(i),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(i),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(i),n){r={type:"tag",tagType:"program-date-time"},n[1]&&(r.dateTimeString=n[1],r.dateTimeObject=new Date(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(i),n){r={type:"tag",tagType:"key"},n[1]&&(r.attributes=Ir(n[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(n=/^#EXT-X-START:(.*)$/.exec(i),n){r={type:"tag",tagType:"start"},n[1]&&(r.attributes=Ir(n[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(i),n){r={type:"tag",tagType:"cue-out-cont"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(i),n){r={type:"tag",tagType:"cue-out"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(i),n){r={type:"tag",tagType:"cue-in"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"skip"},r.attributes=Ir(n[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(cPe)),this.trigger("data",r);return}if(n=/^#EXT-X-PART:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"part"},r.attributes=Ir(n[1]),["DURATION"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/.test(r.attributes[o]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=bw(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"server-control"},r.attributes=Ir(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=/YES/.test(r.attributes[o]))}),this.trigger("data",r);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"part-inf"},r.attributes=Ir(n[1]),["PART-TARGET"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseFloat(r.attributes[o]))}),this.trigger("data",r);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=Ir(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(r.attributes.hasOwnProperty(o)){r.attributes[o]=parseInt(r.attributes[o],10);const s=o==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[s]=r.attributes[o],delete r.attributes[o]}}),this.trigger("data",r);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=Ir(n[1]),["LAST-MSN","LAST-PART"].forEach(function(o){r.attributes.hasOwnProperty(o)&&(r.attributes[o]=parseInt(r.attributes[o],10))}),this.trigger("data",r);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(i),n&&n[1]){r={type:"tag",tagType:"daterange"},r.attributes=Ir(n[1]),["ID","CLASS"].forEach(function(s){r.attributes.hasOwnProperty(s)&&(r.attributes[s]=String(r.attributes[s]))}),["START-DATE","END-DATE"].forEach(function(s){r.attributes.hasOwnProperty(s)&&(r.attributes[s]=new Date(r.attributes[s]))}),["DURATION","PLANNED-DURATION"].forEach(function(s){r.attributes.hasOwnProperty(s)&&(r.attributes[s]=parseFloat(r.attributes[s]))}),["END-ON-NEXT"].forEach(function(s){r.attributes.hasOwnProperty(s)&&(r.attributes[s]=/YES/i.test(r.attributes[s]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(s){r.attributes.hasOwnProperty(s)&&(r.attributes[s]=r.attributes[s].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const s in r.attributes){if(!o.test(s))continue;const c=/[0-9A-Fa-f]{6}/g.test(r.attributes[s]),u=/^\d+(\.\d+)?$/.test(r.attributes[s]);r.attributes[s]=c?r.attributes[s].toString(16):u?parseFloat(r.attributes[s]):String(r.attributes[s])}this.trigger("data",r);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(i),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(i),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(i),n){r={type:"tag",tagType:"content-steering"},r.attributes=Ir(n[1]),this.trigger("data",r);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(i),n){r={type:"tag",tagType:"i-frame-playlist"},r.attributes=Ir(n[1]),r.attributes.URI&&(r.uri=r.attributes.URI),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=J6(r.attributes.RESOLUTION)),r.attributes["AVERAGE-BANDWIDTH"]&&(r.attributes["AVERAGE-BANDWIDTH"]=parseInt(r.attributes["AVERAGE-BANDWIDTH"],10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),this.trigger("data",r);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(i),n){r={type:"tag",tagType:"define"},r.attributes=Ir(n[1]),this.trigger("data",r);return}this.trigger("data",{type:"tag",data:i.slice(4)})})}addParser({expression:e,customType:n,dataParser:r,segment:a}){typeof r!="function"&&(r=i=>i),this.customParsers.push(i=>{if(e.exec(i))return this.trigger("data",{type:"custom",data:r(i),customType:n,segment:a}),!0})}addTagMapper({expression:e,map:n}){const r=a=>e.test(a)?n(a):a;this.tagMappers.push(r)}}const fPe=t=>t.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),bl=function(t){const e={};return Object.keys(t).forEach(function(n){e[fPe(n)]=t[n]}),e},ww=function(t){const{serverControl:e,targetDuration:n,partTargetDuration:r}=t;if(!e)return;const a="#EXT-X-SERVER-CONTROL",i="holdBack",o="partHoldBack",s=n&&n*3,c=r&&r*2;n&&!e.hasOwnProperty(i)&&(e[i]=s,this.trigger("info",{message:`${a} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&e[i]<s&&(this.trigger("warn",{message:`${a} clamping HOLD-BACK (${e[i]}) to targetDuration * 3 (${s})`}),e[i]=s),r&&!e.hasOwnProperty(o)&&(e[o]=r*3,this.trigger("info",{message:`${a} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),r&&e[o]<c&&(this.trigger("warn",{message:`${a} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${c}).`}),e[o]=c)};class hPe extends yw{constructor(e={}){super(),this.lineStream=new sPe,this.parseStream=new dPe,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,r=[];let a={},i,o,s=!1;const c=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let f=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let h=0,v=0;const p={};this.on("end",()=>{a.uri||!a.parts&&!a.preloadHints||(!a.map&&i&&(a.map=i),!a.key&&o&&(a.key=o),!a.timeline&&typeof f=="number"&&(a.timeline=f),this.manifest.preloadSegment=a)}),this.parseStream.on("data",function(g){let m,y;if(n.manifest.definitions){for(const b in n.manifest.definitions)if(g.uri&&(g.uri=g.uri.replace(`{$${b}}`,n.manifest.definitions[b])),g.attributes)for(const w in g.attributes)typeof g.attributes[w]=="string"&&(g.attributes[w]=g.attributes[w].replace(`{$${b}}`,n.manifest.definitions[b]))}({tag(){({version(){g.version&&(this.manifest.version=g.version)},"allow-cache"(){this.manifest.allowCache=g.allowed,"allowed"in g||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const b={};"length"in g&&(a.byterange=b,b.length=g.length,"offset"in g||(g.offset=h)),"offset"in g&&(a.byterange=b,b.offset=g.offset),h=b.offset+b.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),g.title&&(a.title=g.title),g.duration>0&&(a.duration=g.duration),g.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key(){if(!g.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(g.attributes.METHOD==="NONE"){o=null;return}if(!g.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(g.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:g.attributes};return}if(g.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:g.attributes.URI};return}if(g.attributes.KEYFORMAT===d){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(g.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(g.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),g.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(g.attributes.KEYID&&g.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:g.attributes.KEYFORMAT,keyId:g.attributes.KEYID.substring(2)},pssh:X6(g.attributes.URI.split(",")[1])};return}g.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:g.attributes.METHOD||"AES-128",uri:g.attributes.URI},typeof g.attributes.IV<"u"&&(o.iv=g.attributes.IV)},"media-sequence"(){if(!isFinite(g.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+g.number});return}this.manifest.mediaSequence=g.number},"discontinuity-sequence"(){if(!isFinite(g.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+g.number});return}this.manifest.discontinuitySequence=g.number,f=g.number},"playlist-type"(){if(!/VOD|EVENT/.test(g.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+g.playlist});return}this.manifest.playlistType=g.playlistType},map(){i={},g.uri&&(i.uri=g.uri),g.byterange&&(i.byterange=g.byterange),o&&(i.key=o)},"stream-inf"(){if(this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!g.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),Mn(a.attributes,g.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(g.attributes&&g.attributes.TYPE&&g.attributes["GROUP-ID"]&&g.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const b=this.manifest.mediaGroups[g.attributes.TYPE];b[g.attributes["GROUP-ID"]]=b[g.attributes["GROUP-ID"]]||{},m=b[g.attributes["GROUP-ID"]],y={default:/yes/i.test(g.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(g.attributes.AUTOSELECT),g.attributes.LANGUAGE&&(y.language=g.attributes.LANGUAGE),g.attributes.URI&&(y.uri=g.attributes.URI),g.attributes["INSTREAM-ID"]&&(y.instreamId=g.attributes["INSTREAM-ID"]),g.attributes.CHARACTERISTICS&&(y.characteristics=g.attributes.CHARACTERISTICS),g.attributes.FORCED&&(y.forced=/yes/i.test(g.attributes.FORCED)),m[g.attributes.NAME]=y},discontinuity(){f+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=g.dateTimeString,this.manifest.dateTimeObject=g.dateTimeObject),a.dateTimeString=g.dateTimeString,a.dateTimeObject=g.dateTimeObject;const{lastProgramDateTime:b}=this;this.lastProgramDateTime=new Date(g.dateTimeString).getTime(),b===null&&this.manifest.segments.reduceRight((w,x)=>(x.programDateTime=w-x.duration*1e3,x.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(g.duration)||g.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+g.duration});return}this.manifest.targetDuration=g.duration,ww.call(this,this.manifest)},start(){if(!g.attributes||isNaN(g.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:g.attributes["TIME-OFFSET"],precise:g.attributes.PRECISE}},"cue-out"(){a.cueOut=g.data},"cue-out-cont"(){a.cueOutCont=g.data},"cue-in"(){a.cueIn=g.data},skip(){this.manifest.skip=bl(g.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",g.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;const b=this.manifest.segments.length,w=bl(g.attributes);a.parts=a.parts||[],a.parts.push(w),w.byterange&&(w.byterange.hasOwnProperty("offset")||(w.byterange.offset=v),v=w.byterange.offset+w.byterange.length);const x=a.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${x} for segment #${b}`,g.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((C,S)=>{C.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${S} lacks required attribute(s): LAST-PART`})})},"server-control"(){const b=this.manifest.serverControl=bl(g.attributes);b.hasOwnProperty("canBlockReload")||(b.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ww.call(this,this.manifest),b.canSkipDateranges&&!b.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const b=this.manifest.segments.length,w=bl(g.attributes),x=w.type&&w.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(w),w.byterange&&(w.byterange.hasOwnProperty("offset")||(w.byterange.offset=x?v:0,x&&(v=w.byterange.offset+w.byterange.length)));const C=a.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${C} for segment #${b}`,g.attributes,["TYPE","URI"]),!!w.type)for(let S=0;S<a.preloadHints.length-1;S++){const _=a.preloadHints[S];_.type&&_.type===w.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${C} for segment #${b} has the same TYPE ${w.type} as preload hint #${S}`})}},"rendition-report"(){const b=bl(g.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(b);const w=this.manifest.renditionReports.length-1,x=["LAST-MSN","URI"];s&&x.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${w}`,g.attributes,x)},"part-inf"(){this.manifest.partInf=bl(g.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",g.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ww.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(bl(g.attributes));const b=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${b}`,g.attributes,["ID","START-DATE"]);const w=this.manifest.dateRanges[b];w.endDate&&w.startDate&&new Date(w.endDate)<new Date(w.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),w.duration&&w.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),w.plannedDuration&&w.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const x=!!w.endOnNext;if(x&&!w.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),x&&(w.duration||w.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),w.duration&&w.endDate){const S=w.startDate.getTime()+w.duration*1e3;this.manifest.dateRanges[b].endDate=new Date(S)}if(!p[w.id])p[w.id]=w;else{for(const S in p[w.id])if(w[S]&&JSON.stringify(p[w.id][S])!==JSON.stringify(w[S])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const C=this.manifest.dateRanges.findIndex(S=>S.id===w.id);this.manifest.dateRanges[C]=Mn(this.manifest.dateRanges[C],w),p[w.id]=Mn(p[w.id],w),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=bl(g.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",g.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const b=(w,x)=>{if(w in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${w}`});return}this.manifest.definitions[w]=x};if("QUERYPARAM"in g.attributes){if("NAME"in g.attributes||"IMPORT"in g.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const w=this.params.get(g.attributes.QUERYPARAM);if(!w){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${g.attributes.QUERYPARAM}`});return}b(g.attributes.QUERYPARAM,decodeURIComponent(w));return}if("NAME"in g.attributes){if("IMPORT"in g.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in g.attributes)||typeof g.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${g.attributes.NAME}`});return}b(g.attributes.NAME,g.attributes.VALUE);return}if("IMPORT"in g.attributes){if(!this.mainDefinitions[g.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${g.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}b(g.attributes.IMPORT,this.mainDefinitions[g.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:g.attributes,uri:g.uri,timeline:f}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",g.attributes,["BANDWIDTH","URI"])}}[g.tagType]||c).call(n)},uri(){a.uri=g.uri,r.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),o&&(a.key=o),a.timeline=f,i&&(a.map=i),v=0,this.lastProgramDateTime!==null&&(a.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=a.duration*1e3),a={}},comment(){},custom(){g.segment?(a.custom=a.custom||{},a.custom[g.customType]=g.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[g.customType]=g.data)}})[g.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,r){const a=[];r.forEach(function(i){n.hasOwnProperty(i)||a.push(i)}),a.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${a.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Is={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},vPe=["video","audio","text"],Q6=["Video","Audio","Text"],Z6=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,r,a){var i=("00"+Number(r).toString(16)).slice(-2),o=("00"+Number(a).toString(16)).slice(-2);return"avc1."+i+"00"+o})},zi=function(e){e===void 0&&(e="");var n=e.split(","),r=[];return n.forEach(function(a){a=a.trim();var i;vPe.forEach(function(o){var s=Is[o].exec(a.toLowerCase());if(!(!s||s.length<=1)){i=o;var c=a.substring(0,s[1].length),u=a.replace(c,"");r.push({type:c,details:u,mediaType:o})}}),i||r.push({type:a,details:"",mediaType:"unknown"})}),r},pPe=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var r=e.mediaGroups.AUDIO[n];if(!r)return null;for(var a in r){var i=r[a];if(i.default&&i.playlists)return zi(i.playlists[0].attributes.CODECS)}return null},V6=function(e){return e===void 0&&(e=""),Is.audio.test(e.trim().toLowerCase())},gPe=function(e){return e===void 0&&(e=""),Is.text.test(e.trim().toLowerCase())},Cu=function(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(i){return Z6(i.trim())}),r="video";n.length===1&&V6(n[0])?r="audio":n.length===1&&gPe(n[0])&&(r="application");var a="mp4";return n.every(function(i){return Is.mp4.test(i)})?a="mp4":n.every(function(i){return Is.webm.test(i)})?a="webm":n.every(function(i){return Is.ogg.test(i)})&&(a="ogg"),r+"/"+a+';codecs="'+e+'"'}},zf=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=!1),fe.MediaSource&&fe.MediaSource.isTypeSupported&&fe.MediaSource.isTypeSupported(Cu(e))||n&&fe.ManagedMediaSource&&fe.ManagedMediaSource.isTypeSupported&&fe.ManagedMediaSource.isTypeSupported(Cu(e))||!1},xw=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var r=0;r<Q6.length;r++){var a=Q6[r];if(Is["muxer"+a].test(n))return!0}return!1})},eR="mp4a.40.2",mPe="avc1.4d400d",yPe=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,bPe=/^application\/dash\+xml/i,tR=function(e){return yPe.test(e)?"hls":bPe.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},wPe=function(e){return e.toString(2).length},xPe=function(e){return Math.ceil(wPe(e)/8)},nR=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},CPe=function(e){return nR(e)},ht=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!CPe(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},fr=fe.BigInt||Number,Cw=[fr("0x1"),fr("0x100"),fr("0x10000"),fr("0x1000000"),fr("0x100000000"),fr("0x10000000000"),fr("0x1000000000000"),fr("0x100000000000000"),fr("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var _Pe=function(e,n){var r=n===void 0?{}:n,a=r.signed,i=a===void 0?!1:a,o=r.le,s=o===void 0?!1:o;e=ht(e);var c=s?"reduce":"reduceRight",u=e[c]?e[c]:Array.prototype[c],d=u.call(e,function(h,v,p){var g=s?p:Math.abs(p+1-e.length);return h+fr(v)*Cw[g]},fr(0));if(i){var f=Cw[e.length]/fr(2)-fr(1);d=fr(d),d>f&&(d-=f,d-=f,d-=fr(2))}return Number(d)},SPe=function(e,n){var r={},a=r.le,i=a===void 0?!1:a;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=fr(e);for(var o=xPe(e),s=new Uint8Array(new ArrayBuffer(o)),c=0;c<o;c++){var u=i?c:Math.abs(c+1-s.length);s[u]=Number(e/Cw[c]&fr(255)),e<0&&(s[u]=Math.abs(~s[u]),s[u]-=c===0?1:2)}return s},rR=function(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r},TPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n=n.filter(function(s){return s&&(s.byteLength||s.length)&&typeof s!="string"}),n.length<=1)return ht(n[0]);var a=n.reduce(function(s,c,u){return s+(c.byteLength||c.length)},0),i=new Uint8Array(a),o=0;return n.forEach(function(s){s=ht(s),i.set(s,o),o+=s.byteLength}),i},wn=function(e,n,r){var a=r===void 0?{}:r,i=a.offset,o=i===void 0?0:i,s=a.mask,c=s===void 0?[]:s;e=ht(e),n=ht(n);var u=n.every?n.every:Array.prototype.every;return n.length&&e.length-o>=n.length&&u.call(n,function(d,f){var h=c[f]?c[f]&e[o+f]:e[o+f];return d===h})},kPe=function(e,n,r){n.forEach(function(a){for(var i in e.mediaGroups[a])for(var o in e.mediaGroups[a][i]){var s=e.mediaGroups[a][i][o];r(s,a,i,o)}})},wl={},Fo={};function OPe(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var r=0;r<t.length;r++)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];if(e.call(void 0,a,r,t))return a}}function _w(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function EPe(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var aR=_w({HTML:"text/html",isHTML:function(t){return t===aR.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),iR=_w({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===iR.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Fo.assign=EPe,Fo.find=OPe,Fo.freeze=_w,Fo.MIME_TYPE=aR,Fo.NAMESPACE=iR;var oR=Fo,Hi=oR.find,Hf=oR.NAMESPACE;function PPe(t){return t!==""}function IPe(t){return t?t.split(/[\t\n\f\r ]+/).filter(PPe):[]}function APe(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function lR(t){if(!t)return[];var e=IPe(t);return Object.keys(e.reduce(APe,{}))}function NPe(t){return function(e){return t&&t.indexOf(e)!==-1}}function Wf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function Zr(t,e){var n=t.prototype;if(!(n instanceof e)){let r=function(){};r.prototype=e.prototype,r=new r,Wf(n,r),t.prototype=n=r}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var Vr={},pi=Vr.ELEMENT_NODE=1,_u=Vr.ATTRIBUTE_NODE=2,Dg=Vr.TEXT_NODE=3,sR=Vr.CDATA_SECTION_NODE=4,cR=Vr.ENTITY_REFERENCE_NODE=5,DPe=Vr.ENTITY_NODE=6,uR=Vr.PROCESSING_INSTRUCTION_NODE=7,dR=Vr.COMMENT_NODE=8,fR=Vr.DOCUMENT_NODE=9,hR=Vr.DOCUMENT_TYPE_NODE=10,Bo=Vr.DOCUMENT_FRAGMENT_NODE=11,RPe=Vr.NOTATION_NODE=12,br={},er={};br.INDEX_SIZE_ERR=(er[1]="Index size error",1),br.DOMSTRING_SIZE_ERR=(er[2]="DOMString size error",2);var ea=br.HIERARCHY_REQUEST_ERR=(er[3]="Hierarchy request error",3);br.WRONG_DOCUMENT_ERR=(er[4]="Wrong document",4),br.INVALID_CHARACTER_ERR=(er[5]="Invalid character",5),br.NO_DATA_ALLOWED_ERR=(er[6]="No data allowed",6),br.NO_MODIFICATION_ALLOWED_ERR=(er[7]="No modification allowed",7);var vR=br.NOT_FOUND_ERR=(er[8]="Not found",8);br.NOT_SUPPORTED_ERR=(er[9]="Not supported",9);var pR=br.INUSE_ATTRIBUTE_ERR=(er[10]="Attribute in use",10);br.INVALID_STATE_ERR=(er[11]="Invalid state",11),br.SYNTAX_ERR=(er[12]="Syntax error",12),br.INVALID_MODIFICATION_ERR=(er[13]="Invalid modification",13),br.NAMESPACE_ERR=(er[14]="Invalid namespace",14),br.INVALID_ACCESS_ERR=(er[15]="Invalid access",15);function Ln(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,er[t]),this.message=er[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ln);return n.code=t,e&&(this.message=this.message+": "+e),n}Ln.prototype=Error.prototype,Wf(br,Ln);function jo(){}jo.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)Tu(this[r],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Su(t,e){this._node=t,this._refresh=e,Sw(this)}function Sw(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(NR(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var r=n.length;r in t;r++)Object.prototype.hasOwnProperty.call(t,r)&&delete t[r];Wf(n,t),t._inc=e}}Su.prototype.item=function(t){return Sw(this),this[t]||null},Zr(Su,jo);function Rg(){}function gR(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function mR(t,e,n,r){if(r?e[gR(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var a=t.ownerDocument;a&&(r&&xR(a,t,r),MPe(a,t,n))}}function yR(t,e,n){var r=gR(e,n);if(r>=0){for(var a=e.length-1;r<a;)e[r]=e[++r];if(e.length=a,t){var i=t.ownerDocument;i&&(xR(i,t,n),n.ownerElement=null)}}else throw new Ln(vR,new Error(t.tagName+"@"+n))}Rg.prototype={length:0,item:jo.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ln(pR);var n=this.getNamedItem(t.nodeName);return mR(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Ln(pR);return n=this.getNamedItemNS(t.namespaceURI,t.localName),mR(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return yR(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return yR(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function bR(){}bR.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var r=new qf;if(r.implementation=this,r.childNodes=new jo,r.doctype=n||null,n&&r.appendChild(n),e){var a=r.createElementNS(t,e);r.appendChild(a)}return r},createDocumentType:function(t,e,n){var r=new Fg;return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=n||"",r}};function en(){}en.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Mg(this,t,e)},replaceChild:function(t,e){Mg(this,t,e,TR),e&&this.removeChild(e)},removeChild:function(t){return CR(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return Dw(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Dg&&t.nodeType==Dg?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===t)return r}e=e.nodeType==_u?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==_u?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function wR(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Wf(Vr,en),Wf(Vr,en.prototype);function Kf(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Kf(t,e))return!0;while(t=t.nextSibling)}function qf(){this.ownerDocument=this}function MPe(t,e,n){t&&t._inc++;var r=n.namespaceURI;r===Hf.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function xR(t,e,n,r){t&&t._inc++;var a=n.namespaceURI;a===Hf.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function Tw(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var a=e.firstChild,i=0;a;)r[i++]=a,a=a.nextSibling;r.length=i,delete r[r.length]}}}function CR(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Tw(t.ownerDocument,t),e}function LPe(t){return t&&(t.nodeType===en.DOCUMENT_NODE||t.nodeType===en.DOCUMENT_FRAGMENT_NODE||t.nodeType===en.ELEMENT_NODE)}function FPe(t){return t&&(Wi(t)||kw(t)||$o(t)||t.nodeType===en.DOCUMENT_FRAGMENT_NODE||t.nodeType===en.COMMENT_NODE||t.nodeType===en.PROCESSING_INSTRUCTION_NODE)}function $o(t){return t&&t.nodeType===en.DOCUMENT_TYPE_NODE}function Wi(t){return t&&t.nodeType===en.ELEMENT_NODE}function kw(t){return t&&t.nodeType===en.TEXT_NODE}function _R(t,e){var n=t.childNodes||[];if(Hi(n,Wi)||$o(e))return!1;var r=Hi(n,$o);return!(e&&r&&n.indexOf(r)>n.indexOf(e))}function SR(t,e){var n=t.childNodes||[];function r(i){return Wi(i)&&i!==e}if(Hi(n,r))return!1;var a=Hi(n,$o);return!(e&&a&&n.indexOf(a)>n.indexOf(e))}function BPe(t,e,n){if(!LPe(t))throw new Ln(ea,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new Ln(vR,"child not in parent");if(!FPe(e)||$o(e)&&t.nodeType!==en.DOCUMENT_NODE)throw new Ln(ea,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function jPe(t,e,n){var r=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===en.DOCUMENT_FRAGMENT_NODE){var i=a.filter(Wi);if(i.length>1||Hi(a,kw))throw new Ln(ea,"More than one element or text in fragment");if(i.length===1&&!_R(t,n))throw new Ln(ea,"Element in fragment can not be inserted before doctype")}if(Wi(e)&&!_R(t,n))throw new Ln(ea,"Only one element can be added and only after doctype");if($o(e)){if(Hi(r,$o))throw new Ln(ea,"Only one doctype is allowed");var o=Hi(r,Wi);if(n&&r.indexOf(o)<r.indexOf(n))throw new Ln(ea,"Doctype can only be inserted before an element");if(!n&&o)throw new Ln(ea,"Doctype can not be appended since element is present")}}function TR(t,e,n){var r=t.childNodes||[],a=e.childNodes||[];if(e.nodeType===en.DOCUMENT_FRAGMENT_NODE){var i=a.filter(Wi);if(i.length>1||Hi(a,kw))throw new Ln(ea,"More than one element or text in fragment");if(i.length===1&&!SR(t,n))throw new Ln(ea,"Element in fragment can not be inserted before doctype")}if(Wi(e)&&!SR(t,n))throw new Ln(ea,"Only one element can be added and only after doctype");if($o(e)){if(Hi(r,function(c){return $o(c)&&c!==n}))throw new Ln(ea,"Only one doctype is allowed");var o=Hi(r,Wi);if(n&&r.indexOf(o)<r.indexOf(n))throw new Ln(ea,"Doctype can only be inserted before an element")}}function Mg(t,e,n,r){BPe(t,e,n),t.nodeType===en.DOCUMENT_NODE&&(r||jPe)(t,e,n);var a=e.parentNode;if(a&&a.removeChild(e),e.nodeType===Bo){var i=e.firstChild;if(i==null)return e;var o=e.lastChild}else i=o=e;var s=n?n.previousSibling:t.lastChild;i.previousSibling=s,o.nextSibling=n,s?s.nextSibling=i:t.firstChild=i,n==null?t.lastChild=o:n.previousSibling=o;do i.parentNode=t;while(i!==o&&(i=i.nextSibling));return Tw(t.ownerDocument||t,t),e.nodeType==Bo&&(e.firstChild=e.lastChild=null),e}function $Pe(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Tw(t.ownerDocument,t,e),e}qf.prototype={nodeName:"#document",nodeType:fR,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Bo){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return Mg(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===pi&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),CR(this,t)},replaceChild:function(t,e){Mg(this,t,e,TR),t.ownerDocument=this,e&&this.removeChild(e),Wi(t)&&(this.documentElement=t)},importNode:function(t,e){return AR(this,t,e)},getElementById:function(t){var e=null;return Kf(this.documentElement,function(n){if(n.nodeType==pi&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=lR(t);return new Su(this,function(n){var r=[];return e.length>0&&Kf(n.documentElement,function(a){if(a!==n&&a.nodeType===pi){var i=a.getAttribute("class");if(i){var o=t===i;if(!o){var s=lR(i);o=e.every(NPe(s))}o&&r.push(a)}}}),r})},createElement:function(t){var e=new As;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new jo;var n=e.attributes=new Rg;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Bg;return t.ownerDocument=this,t.childNodes=new jo,t},createTextNode:function(t){var e=new Ow;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Ew;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Pw;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Aw;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new Lg;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Iw;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new As,r=e.split(":"),a=n.attributes=new Rg;return n.childNodes=new jo,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,a._ownerElement=n,n},createAttributeNS:function(t,e){var n=new Lg,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},Zr(qf,en);function As(){this._nsMap={}}As.prototype={nodeType:pi,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Bo?this.insertBefore(t,null):$Pe(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Su(this,function(e){var n=[];return Kf(e,function(r){r!==e&&r.nodeType==pi&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new Su(this,function(n){var r=[];return Kf(n,function(a){a!==n&&a.nodeType===pi&&(t==="*"||a.namespaceURI===t)&&(e==="*"||a.localName==e)&&r.push(a)}),r})}},qf.prototype.getElementsByTagName=As.prototype.getElementsByTagName,qf.prototype.getElementsByTagNameNS=As.prototype.getElementsByTagNameNS,Zr(As,en);function Lg(){}Lg.prototype.nodeType=_u,Zr(Lg,en);function Gf(){}Gf.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(er[ea])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),a=this.data.substring(t+e);n=r+n+a,this.nodeValue=this.data=n,this.length=n.length}},Zr(Gf,en);function Ow(){}Ow.prototype={nodeName:"#text",nodeType:Dg,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},Zr(Ow,Gf);function Ew(){}Ew.prototype={nodeName:"#comment",nodeType:dR},Zr(Ew,Gf);function Pw(){}Pw.prototype={nodeName:"#cdata-section",nodeType:sR},Zr(Pw,Gf);function Fg(){}Fg.prototype.nodeType=hR,Zr(Fg,en);function kR(){}kR.prototype.nodeType=RPe,Zr(kR,en);function OR(){}OR.prototype.nodeType=DPe,Zr(OR,en);function Iw(){}Iw.prototype.nodeType=cR,Zr(Iw,en);function Bg(){}Bg.prototype.nodeName="#document-fragment",Bg.prototype.nodeType=Bo,Zr(Bg,en);function Aw(){}Aw.prototype.nodeType=uR,Zr(Aw,en);function ER(){}ER.prototype.serializeToString=function(t,e,n){return PR.call(t,e,n)},en.prototype.toString=PR;function PR(t,e){var n=[],r=this.nodeType==9&&this.documentElement||this,a=r.prefix,i=r.namespaceURI;if(i&&a==null){var a=r.lookupPrefix(i);if(a==null)var o=[{namespace:i,prefix:null}]}return Tu(this,n,t,e,o),n.join("")}function IR(t,e,n){var r=t.prefix||"",a=t.namespaceURI;if(!a||r==="xml"&&a===Hf.XML||a===Hf.XMLNS)return!1;for(var i=n.length;i--;){var o=n[i];if(o.prefix===r)return o.namespace!==a}return!0}function Nw(t,e,n){t.push(" ",e,'="',n.replace(/[<>&"\t\n\r]/g,wR),'"')}function Tu(t,e,n,r,a){if(a||(a=[]),r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case pi:var i=t.attributes,o=i.length,y=t.firstChild,s=t.tagName;n=Hf.isHTML(t.namespaceURI)||n;var c=s;if(!n&&!t.prefix&&t.namespaceURI){for(var u,d=0;d<i.length;d++)if(i.item(d).name==="xmlns"){u=i.item(d).value;break}if(!u)for(var f=a.length-1;f>=0;f--){var h=a[f];if(h.prefix===""&&h.namespace===t.namespaceURI){u=h.namespace;break}}if(u!==t.namespaceURI)for(var f=a.length-1;f>=0;f--){var h=a[f];if(h.namespace===t.namespaceURI){h.prefix&&(c=h.prefix+":"+s);break}}}e.push("<",c);for(var v=0;v<o;v++){var p=i.item(v);p.prefix=="xmlns"?a.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&a.push({prefix:"",namespace:p.value})}for(var v=0;v<o;v++){var p=i.item(v);if(IR(p,n,a)){var g=p.prefix||"",m=p.namespaceURI;Nw(e,g?"xmlns:"+g:"xmlns",m),a.push({prefix:g,namespace:m})}Tu(p,e,n,r,a)}if(s===c&&IR(t,n,a)){var g=t.prefix||"",m=t.namespaceURI;Nw(e,g?"xmlns:"+g:"xmlns",m),a.push({prefix:g,namespace:m})}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(e.push(">"),n&&/^script$/i.test(s))for(;y;)y.data?e.push(y.data):Tu(y,e,n,r,a.slice()),y=y.nextSibling;else for(;y;)Tu(y,e,n,r,a.slice()),y=y.nextSibling;e.push("</",c,">")}else e.push("/>");return;case fR:case Bo:for(var y=t.firstChild;y;)Tu(y,e,n,r,a.slice()),y=y.nextSibling;return;case _u:return Nw(e,t.name,t.value);case Dg:return e.push(t.data.replace(/[<&>]/g,wR));case sR:return e.push("<![CDATA[",t.data,"]]>");case dR:return e.push("<!--",t.data,"-->");case hR:var b=t.publicId,w=t.systemId;if(e.push("<!DOCTYPE ",t.name),b)e.push(" PUBLIC ",b),w&&w!="."&&e.push(" ",w),e.push(">");else if(w&&w!=".")e.push(" SYSTEM ",w,">");else{var x=t.internalSubset;x&&e.push(" [",x,"]"),e.push(">")}return;case uR:return e.push("<?",t.target," ",t.data,"?>");case cR:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function AR(t,e,n){var r;switch(e.nodeType){case pi:r=e.cloneNode(!1),r.ownerDocument=t;case Bo:break;case _u:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var a=e.firstChild;a;)r.appendChild(AR(t,a,n)),a=a.nextSibling;return r}function Dw(t,e,n){var r=new e.constructor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=e[a];typeof i!="object"&&i!=r[a]&&(r[a]=i)}switch(e.childNodes&&(r.childNodes=new jo),r.ownerDocument=t,r.nodeType){case pi:var o=e.attributes,s=r.attributes=new Rg,c=o.length;s._ownerElement=r;for(var u=0;u<c;u++)r.setAttributeNode(Dw(t,o.item(u),!0));break;case _u:n=!0}if(n)for(var d=e.firstChild;d;)r.appendChild(Dw(t,d,n)),d=d.nextSibling;return r}function NR(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case pi:case Bo:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};Object.defineProperty(Su.prototype,"length",{get:function(){return Sw(this),this.$$length}}),Object.defineProperty(en.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case pi:case Bo:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),NR=function(e,n,r){e["$$"+n]=r}}}catch{}wl.DocumentType=Fg,wl.DOMException=Ln,wl.DOMImplementation=bR,wl.Element=As,wl.Node=en,wl.NodeList=jo,wl.XMLSerializer=ER;var jg={},DR={};(function(t){var e=Fo.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES})(DR);var Rw={},Yf=Fo.NAMESPACE,Mw=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,RR=new RegExp("[\\-\\.0-9"+Mw.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),MR=new RegExp("^"+Mw.source+RR.source+"*(?::"+Mw.source+RR.source+"*)?$"),Xf=0,xl=1,ku=2,Jf=3,Ou=4,Eu=5,Qf=6,$g=7;function Pu(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Pu)}Pu.prototype=new Error,Pu.prototype.name=Pu.name;function LR(){}LR.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),jR(e,e={}),UPe(t,e,n,r,this.errorHandler),r.endDocument()}};function UPe(t,e,n,r,a){function i(M){if(M>65535){M-=65536;var $=55296+(M>>10),U=56320+(M&1023);return String.fromCharCode($,U)}else return String.fromCharCode(M)}function o(M){var $=M.slice(1,-1);return Object.hasOwnProperty.call(n,$)?n[$]:$.charAt(0)==="#"?i(parseInt($.substr(1).replace("x","0x"))):(a.error("entity not found:"+M),M)}function s(M){if(M>g){var $=t.substring(g,M).replace(/&#?\w+;/g,o);h&&c(g),r.characters($,0,M-g),g=M}}function c(M,$){for(;M>=d&&($=f.exec(t));)u=$.index,d=u+$[0].length,h.lineNumber++;h.columnNumber=M-u+1}for(var u=0,d=0,f=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,v=[{currentNSMap:e}],p={},g=0;;){try{var m=t.indexOf("<",g);if(m<0){if(!t.substr(g).match(/^\s*$/)){var y=r.doc,b=y.createTextNode(t.substr(g));y.appendChild(b),r.currentElement=b}return}switch(m>g&&s(m),t.charAt(m+1)){case"/":var T=t.indexOf(">",m+3),w=t.substring(m+2,T).replace(/[ \t\n\r]+$/g,""),x=v.pop();T<0?(w=t.substring(m+2).replace(/[\s<].*/,""),a.error("end tag name: "+w+" is not complete:"+x.tagName),T=m+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),a.error("end tag name: "+w+" maybe not complete"),T=m+1+w.length);var C=x.localNSMap,S=x.tagName==w,_=S||x.tagName&&x.tagName.toLowerCase()==w.toLowerCase();if(_){if(r.endElement(x.uri,x.localName,w),C)for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&r.endPrefixMapping(O);S||a.fatalError("end tag name: "+w+" is not match the current start tagName:"+x.tagName)}else v.push(x);T++;break;case"?":h&&c(m),T=qPe(t,m,r);break;case"!":h&&c(m),T=KPe(t,m,r,a);break;default:h&&c(m);var N=new $R,B=v[v.length-1].currentNSMap,T=zPe(t,m,N,B,o,a),k=N.length;if(!N.closed&&WPe(t,T,N.tagName,p)&&(N.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),h&&k){for(var E=FR(h,{}),I=0;I<k;I++){var A=N[I];c(A.offset),A.locator=FR(h,{})}r.locator=E,BR(N,r,B)&&v.push(N),r.locator=h}else BR(N,r,B)&&v.push(N);Yf.isHTML(N.uri)&&!N.closed?T=HPe(t,T,N.tagName,o,r):T++}}catch(M){if(M instanceof Pu)throw M;a.error("element parse error: "+M),T=-1}T>g?g=T:s(Math.max(m,g)+1)}}function FR(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function zPe(t,e,n,r,a,i){function o(h,v,p){n.attributeNames.hasOwnProperty(h)&&i.fatalError("Attribute "+h+" redefined"),n.addValue(h,v.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,a),p)}for(var s,c,u=++e,d=Xf;;){var f=t.charAt(u);switch(f){case"=":if(d===xl)s=t.slice(e,u),d=Jf;else if(d===ku)d=Jf;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Jf||d===xl)if(d===xl&&(i.warning('attribute value must after "="'),s=t.slice(e,u)),e=u+1,u=t.indexOf(f,e),u>0)c=t.slice(e,u),o(s,c,e-1),d=Eu;else throw new Error("attribute value no end '"+f+"' match");else if(d==Ou)c=t.slice(e,u),o(s,c,e),i.warning('attribute "'+s+'" missed start quot('+f+")!!"),e=u+1,d=Eu;else throw new Error('attribute value must after "="');break;case"/":switch(d){case Xf:n.setTagName(t.slice(e,u));case Eu:case Qf:case $g:d=$g,n.closed=!0;case Ou:case xl:break;case ku:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),d==Xf&&n.setTagName(t.slice(e,u)),u;case">":switch(d){case Xf:n.setTagName(t.slice(e,u));case Eu:case Qf:case $g:break;case Ou:case xl:c=t.slice(e,u),c.slice(-1)==="/"&&(n.closed=!0,c=c.slice(0,-1));case ku:d===ku&&(c=s),d==Ou?(i.warning('attribute "'+c+'" missed quot(")!'),o(s,c,e)):((!Yf.isHTML(r[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,e));break;case Jf:throw new Error("attribute value missed!!")}return u;case"":f=" ";default:if(f<=" ")switch(d){case Xf:n.setTagName(t.slice(e,u)),d=Qf;break;case xl:s=t.slice(e,u),d=ku;break;case Ou:var c=t.slice(e,u);i.warning('attribute "'+c+'" missed quot(")!!'),o(s,c,e);case Eu:d=Qf;break}else switch(d){case ku:n.tagName,(!Yf.isHTML(r[""])||!s.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),o(s,s,e),e=u,d=xl;break;case Eu:i.warning('attribute space is required"'+s+'"!!');case Qf:d=xl,e=u;break;case Jf:d=Ou,e=u;break;case $g:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function BR(t,e,n){for(var r=t.tagName,a=null,f=t.length;f--;){var i=t[f],o=i.qName,s=i.value,h=o.indexOf(":");if(h>0)var c=i.prefix=o.slice(0,h),u=o.slice(h+1),d=c==="xmlns"&&u;else u=o,c=null,d=o==="xmlns"&&"";i.localName=u,d!==!1&&(a==null&&(a={},jR(n,n={})),n[d]=a[d]=s,i.uri=Yf.XMLNS,e.startPrefixMapping(d,s))}for(var f=t.length;f--;){i=t[f];var c=i.prefix;c&&(c==="xml"&&(i.uri=Yf.XML),c!=="xmlns"&&(i.uri=n[c||""]))}var h=r.indexOf(":");h>0?(c=t.prefix=r.slice(0,h),u=t.localName=r.slice(h+1)):(c=null,u=t.localName=r);var v=t.uri=n[c||""];if(e.startElement(v,u,r,t),t.closed){if(e.endElement(v,u,r),a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&e.endPrefixMapping(c)}else return t.currentNSMap=n,t.localNSMap=a,!0}function HPe(t,e,n,r,a){if(/^(?:script|textarea)$/i.test(n)){var i=t.indexOf("</"+n+">",e),o=t.substring(e+1,i);if(/[&<]/.test(o))return/^script$/i.test(n)?(a.characters(o,0,o.length),i):(o=o.replace(/&#?\w+;/g,r),a.characters(o,0,o.length),i)}return e+1}function WPe(t,e,n,r){var a=r[n];return a==null&&(a=t.lastIndexOf("</"+n+">"),a<e&&(a=t.lastIndexOf("</"+n)),r[n]=a),a<e}function jR(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function KPe(t,e,n,r){var a=t.charAt(e+2);switch(a){case"-":if(t.charAt(e+3)==="-"){var i=t.indexOf("-->",e+4);return i>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=GPe(t,e),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var c=o[1][0],u=!1,d=!1;s>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],d=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(d=o[3][0]));var f=o[s-1];return n.startDTD(c,u,d),n.endDTD(),f.index+f[0].length}}return-1}function qPe(t,e,n){var r=t.indexOf("?>",e);if(r){var a=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return a?(a[0].length,n.processingInstruction(a[1],a[2]),r+2):-1}return-1}function $R(){this.attributeNames={}}$R.prototype={setTagName:function(t){if(!MR.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!MR.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function GPe(t,e){var n,r=[],a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(a.lastIndex=e,a.exec(t);n=a.exec(t);)if(r.push(n),n[1])return r}Rw.XMLReader=LR,Rw.ParseError=Pu;var YPe=Fo,XPe=wl,UR=DR,zR=Rw,JPe=XPe.DOMImplementation,HR=YPe.NAMESPACE,QPe=zR.ParseError,ZPe=zR.XMLReader;function WR(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function KR(t){this.options=t||{locator:{}}}KR.prototype.parseFromString=function(t,e){var n=this.options,r=new ZPe,a=n.domBuilder||new Zf,i=n.errorHandler,o=n.locator,s=n.xmlns||{},c=/\/x?html?$/.test(e),u=c?UR.HTML_ENTITIES:UR.XML_ENTITIES;o&&a.setDocumentLocator(o),r.errorHandler=VPe(i,a,o),r.domBuilder=n.domBuilder||a,c&&(s[""]=HR.HTML),s.xml=s.xml||HR.XML;var d=n.normalizeLineEndings||WR;return t&&typeof t=="string"?r.parse(d(t),s,u):r.errorHandler.error("invalid doc source"),a.doc};function VPe(t,e,n){if(!t){if(e instanceof Zf)return e;t=e}var r={},a=t instanceof Function;n=n||{};function i(o){var s=t[o];!s&&a&&(s=t.length==2?function(c){t(o,c)}:t),r[o]=s&&function(c){s("[xmldom "+o+"]	"+c+Lw(n))}||function(){}}return i("warning"),i("error"),i("fatalError"),r}function Zf(){this.cdata=!1}function Iu(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Zf.prototype={startDocument:function(){this.doc=new JPe().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var a=this.doc,i=a.createElementNS(t,n||e),o=r.length;Ug(this,i),this.currentElement=i,this.locator&&Iu(this.locator,i);for(var s=0;s<o;s++){var t=r.getURI(s),c=r.getValue(s),n=r.getQName(s),u=a.createAttributeNS(t,n);this.locator&&Iu(r.getLocator(s),u),u.value=u.nodeValue=c,i.setAttributeNode(u)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&Iu(this.locator,n),Ug(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=qR.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&Iu(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=qR.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&Iu(this.locator,r),Ug(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var a=r.createDocumentType(t,e,n);this.locator&&Iu(this.locator,a),Ug(this,a),this.doc.doctype=a}},warning:function(t){console.warn("[xmldom warning]	"+t,Lw(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Lw(this.locator))},fatalError:function(t){throw new QPe(t,this.locator)}};function Lw(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function qR(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Zf.prototype[t]=function(){return null}});function Ug(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}jg.__DOMHandler=Zf,jg.normalizeLineEndings=WR,jg.DOMParser=KR;var eIe=jg.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const GR=t=>!!t&&typeof t=="object",tr=(...t)=>t.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(r=>{Array.isArray(e[r])&&Array.isArray(n[r])?e[r]=e[r].concat(n[r]):GR(e[r])&&GR(n[r])?e[r]=tr(e[r],n[r]):e[r]=n[r]}),e),{}),YR=t=>Object.keys(t).map(e=>t[e]),tIe=(t,e)=>{const n=[];for(let r=t;r<e;r++)n.push(r);return n},Au=t=>t.reduce((e,n)=>e.concat(n),[]),XR=t=>{if(!t.length)return[];const e=[];for(let n=0;n<t.length;n++)e.push(t[n]);return e},nIe=(t,e)=>t.reduce((n,r,a)=>(r[e]&&n.push(a),n),[]),rIe=(t,e)=>YR(t.reduce((n,r)=>(r.forEach(a=>{n[e(a)]=a}),n),{}));var Nu={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Vf=({baseUrl:t="",source:e="",range:n="",indexRange:r=""})=>{const a={uri:e,resolvedUri:Ng(t||"",e)};if(n||r){const o=(n||r).split("-");let s=fe.BigInt?fe.BigInt(o[0]):parseInt(o[0],10),c=fe.BigInt?fe.BigInt(o[1]):parseInt(o[1],10);s<Number.MAX_SAFE_INTEGER&&typeof s=="bigint"&&(s=Number(s)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let u;typeof c=="bigint"||typeof s=="bigint"?u=fe.BigInt(c)-fe.BigInt(s)+fe.BigInt(1):u=c-s+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),a.byterange={length:u,offset:s}}return a},aIe=t=>{let e;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=fe.BigInt(t.offset)+fe.BigInt(t.length)-fe.BigInt(1):e=t.offset+t.length-1,`${t.offset}-${e}`},JR=t=>(t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t),iIe={static(t){const{duration:e,timescale:n=1,sourceDuration:r,periodDuration:a}=t,i=JR(t.endNumber),o=e/n;return typeof i=="number"?{start:0,end:i}:typeof a=="number"?{start:0,end:a/o}:{start:0,end:r/o}},dynamic(t){const{NOW:e,clientOffset:n,availabilityStartTime:r,timescale:a=1,duration:i,periodStart:o=0,minimumUpdatePeriod:s=0,timeShiftBufferDepth:c=1/0}=t,u=JR(t.endNumber),d=(e+n)/1e3,f=r+o,v=d+s-f,p=Math.ceil(v*a/i),g=Math.floor((d-f-c)*a/i),m=Math.floor((d-f)*a/i);return{start:Math.max(0,g),end:typeof u=="number"?u:Math.min(p,m)}}},oIe=t=>e=>{const{duration:n,timescale:r=1,periodStart:a,startNumber:i=1}=t;return{number:i+e,duration:n/r,timeline:a,time:e*n}},Fw=t=>{const{type:e,duration:n,timescale:r=1,periodDuration:a,sourceDuration:i}=t,{start:o,end:s}=iIe[e](t),c=tIe(o,s).map(oIe(t));if(e==="static"){const u=c.length-1,d=typeof a=="number"?a:i;c[u].duration=d-n/r*u}return c},QR=t=>{const{baseUrl:e,initialization:n={},sourceDuration:r,indexRange:a="",periodStart:i,presentationTime:o,number:s=0,duration:c}=t;if(!e)throw new Error(Nu.NO_BASE_URL);const u=Vf({baseUrl:e,source:n.sourceURL,range:n.range}),d=Vf({baseUrl:e,source:e,indexRange:a});if(d.map=u,c){const f=Fw(t);f.length&&(d.duration=f[0].duration,d.timeline=f[0].timeline)}else r&&(d.duration=r,d.timeline=i);return d.presentationTime=o||i,d.number=s,[d]},Bw=(t,e,n)=>{const r=t.sidx.map?t.sidx.map:null,a=t.sidx.duration,i=t.timeline||0,o=t.sidx.byterange,s=o.offset+o.length,c=e.timescale,u=e.references.filter(m=>m.referenceType!==1),d=[],f=t.endList?"static":"dynamic",h=t.sidx.timeline;let v=h,p=t.mediaSequence||0,g;typeof e.firstOffset=="bigint"?g=fe.BigInt(s)+e.firstOffset:g=s+e.firstOffset;for(let m=0;m<u.length;m++){const y=e.references[m],b=y.referencedSize,w=y.subsegmentDuration;let x;typeof g=="bigint"?x=g+fe.BigInt(b)-fe.BigInt(1):x=g+b-1;const C=`${g}-${x}`,_=QR({baseUrl:n,timescale:c,timeline:i,periodStart:h,presentationTime:v,number:p,duration:w,sourceDuration:a,indexRange:C,type:f})[0];r&&(_.map=r),d.push(_),typeof g=="bigint"?g+=fe.BigInt(b):g+=b,v+=w/c,p++}return t.segments=d,t},lIe=["AUDIO","SUBTITLES"],sIe=1/60,ZR=t=>rIe(t,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),cIe=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n].attributes.NAME===e)return t[n];return null},VR=t=>{let e=[];return kPe(t,lIe,(n,r,a,i)=>{e=e.concat(n.playlists||[])}),e},eM=({playlist:t,mediaSequence:e})=>{t.mediaSequence=e,t.segments.forEach((n,r)=>{n.number=t.mediaSequence+r})},uIe=({oldPlaylists:t,newPlaylists:e,timelineStarts:n})=>{e.forEach(r=>{r.discontinuitySequence=n.findIndex(function({timeline:c}){return c===r.timeline});const a=cIe(t,r.attributes.NAME);if(!a||r.sidx)return;const i=r.segments[0],o=a.segments.findIndex(function(c){return Math.abs(c.presentationTime-i.presentationTime)<sIe});if(o===-1){eM({playlist:r,mediaSequence:a.mediaSequence+a.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!a.segments.length&&r.timeline>a.timeline||a.segments.length&&r.timeline>a.segments[a.segments.length-1].timeline)&&r.discontinuitySequence--;return}a.segments[o].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),eM({playlist:r,mediaSequence:a.segments[o].number})})},dIe=({oldManifest:t,newManifest:e})=>{const n=t.playlists.concat(VR(t)),r=e.playlists.concat(VR(e));return e.timelineStarts=ZR([t.timelineStarts,e.timelineStarts]),uIe({oldPlaylists:n,newPlaylists:r,timelineStarts:e.timelineStarts}),e},zg=t=>t&&t.uri+"-"+aIe(t.byterange),jw=t=>{const e=t.reduce(function(r,a){return r[a.attributes.baseUrl]||(r[a.attributes.baseUrl]=[]),r[a.attributes.baseUrl].push(a),r},{});let n=[];return Object.values(e).forEach(r=>{const a=YR(r.reduce((i,o)=>{const s=o.attributes.id+(o.attributes.lang||"");return i[s]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),i[s].segments.push(...o.segments)),o.attributes.contentProtection&&(i[s].attributes.contentProtection=o.attributes.contentProtection)):(i[s]=o,i[s].attributes.timelineStarts=[]),i[s].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),i},{}));n=n.concat(a)}),n.map(r=>(r.discontinuityStarts=nIe(r.segments||[],"discontinuity"),r))},$w=(t,e)=>{const n=zg(t.sidx),r=n&&e[n]&&e[n].sidx;return r&&Bw(t,r,t.sidx.resolvedUri),t},fIe=(t,e={})=>{if(!Object.keys(e).length)return t;for(const n in t)t[n]=$w(t[n],e);return t},hIe=({attributes:t,segments:e,sidx:n,mediaSequence:r,discontinuitySequence:a,discontinuityStarts:i},o)=>{const s={attributes:{NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuitySequence:a,discontinuityStarts:i,timelineStarts:t.timelineStarts,mediaSequence:r,segments:e};return t.contentProtection&&(s.contentProtection=t.contentProtection),t.serviceLocation&&(s.attributes.serviceLocation=t.serviceLocation),n&&(s.sidx=n),o&&(s.attributes.AUDIO="audio",s.attributes.SUBTITLES="subs"),s},vIe=({attributes:t,segments:e,mediaSequence:n,discontinuityStarts:r,discontinuitySequence:a})=>{typeof e>"u"&&(e=[{uri:t.baseUrl,timeline:t.periodStart,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);const i={NAME:t.id,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1};t.codecs&&(i.CODECS=t.codecs);const o={attributes:i,uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,timelineStarts:t.timelineStarts,discontinuityStarts:r,discontinuitySequence:a,mediaSequence:n,segments:e};return t.serviceLocation&&(o.attributes.serviceLocation=t.serviceLocation),o},pIe=(t,e={},n=!1)=>{let r;const a=t.reduce((i,o)=>{const s=o.attributes.role&&o.attributes.role.value||"",c=o.attributes.lang||"";let u=o.attributes.label||"main";if(c&&!o.attributes.label){const f=s?` (${s})`:"";u=`${o.attributes.lang}${f}`}i[u]||(i[u]={language:c,autoselect:!0,default:s==="main",playlists:[],uri:""});const d=$w(hIe(o,n),e);return i[u].playlists.push(d),typeof r>"u"&&s==="main"&&(r=o,r.default=!0),i},{});if(!r){const i=Object.keys(a)[0];a[i].default=!0}return a},gIe=(t,e={})=>t.reduce((n,r)=>{const a=r.attributes.label||r.attributes.lang||"text",i=r.attributes.lang||"und";return n[a]||(n[a]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push($w(vIe(r),e)),n},{}),mIe=t=>t.reduce((e,n)=>(n&&n.forEach(r=>{const{channel:a,language:i}=r;e[i]={autoselect:!1,default:!1,instreamId:a,language:i},r.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[i].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[i]["3D"]=r["3D"])}),e),{}),yIe=({attributes:t,segments:e,sidx:n,discontinuityStarts:r})=>{const a={attributes:{NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth,"PROGRAM-ID":1},uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segments:e};return t.frameRate&&(a.attributes["FRAME-RATE"]=t.frameRate),t.contentProtection&&(a.contentProtection=t.contentProtection),t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),n&&(a.sidx=n),a},bIe=({attributes:t})=>t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video",wIe=({attributes:t})=>t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio",xIe=({attributes:t})=>t.mimeType==="text/vtt"||t.contentType==="text",CIe=(t,e)=>{t.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:r}){return r===n.timeline}),n.segments&&n.segments.forEach((r,a)=>{r.number=a})})},tM=t=>t?Object.keys(t).reduce((e,n)=>{const r=t[n];return e.concat(r.playlists)},[]):[],_Ie=({dashPlaylists:t,locations:e,contentSteering:n,sidxMapping:r={},previousManifest:a,eventStream:i})=>{if(!t.length)return{};const{sourceDuration:o,type:s,suggestedPresentationDelay:c,minimumUpdatePeriod:u}=t[0].attributes,d=jw(t.filter(bIe)).map(yIe),f=jw(t.filter(wIe)),h=jw(t.filter(xIe)),v=t.map(x=>x.attributes.captionServices).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:fIe(d,r)};u>=0&&(p.minimumUpdatePeriod=u*1e3),e&&(p.locations=e),n&&(p.contentSteering=n),s==="dynamic"&&(p.suggestedPresentationDelay=c),i&&i.length>0&&(p.eventStream=i);const g=p.playlists.length===0,m=f.length?pIe(f,r,g):null,y=h.length?gIe(h,r):null,b=d.concat(tM(m),tM(y)),w=b.map(({timelineStarts:x})=>x);return p.timelineStarts=ZR(w),CIe(b,p.timelineStarts),m&&(p.mediaGroups.AUDIO.audio=m),y&&(p.mediaGroups.SUBTITLES.subs=y),v.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=mIe(v)),a?dIe({oldManifest:a,newManifest:p}):p},SIe=(t,e,n)=>{const{NOW:r,clientOffset:a,availabilityStartTime:i,timescale:o=1,periodStart:s=0,minimumUpdatePeriod:c=0}=t,u=(r+a)/1e3,d=i+s,h=u+c-d;return Math.ceil((h*o-e)/n)},nM=(t,e)=>{const{type:n,minimumUpdatePeriod:r=0,media:a="",sourceDuration:i,timescale:o=1,startNumber:s=1,periodStart:c}=t,u=[];let d=-1;for(let f=0;f<e.length;f++){const h=e[f],v=h.d,p=h.r||0,g=h.t||0;d<0&&(d=g),g&&g>d&&(d=g);let m;if(p<0){const w=f+1;w===e.length?n==="dynamic"&&r>0&&a.indexOf("$Number$")>0?m=SIe(t,d,v):m=(i*o-d)/v:m=(e[w].t-d)/v}else m=p+1;const y=s+u.length+m;let b=s+u.length;for(;b<y;)u.push({number:b,duration:v/o,time:d,timeline:c}),d+=v,b++}return u},TIe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,kIe=t=>(e,n,r,a)=>{if(e==="$$")return"$";if(typeof t[n]>"u")return e;const i=""+t[n];return n==="RepresentationID"||(r?a=parseInt(a,10):a=1,i.length>=a)?i:`${new Array(a-i.length+1).join("0")}${i}`},rM=(t,e)=>t.replace(TIe,kIe(e)),OIe=(t,e)=>!t.duration&&!e?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Fw(t):nM(t,e),EIe=(t,e)=>{const n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=t,a=Vf({baseUrl:t.baseUrl,source:rM(r.sourceURL,n),range:r.range});return OIe(t,e).map(o=>{n.Number=o.number,n.Time=o.time;const s=rM(t.media||"",n),c=t.timescale||1,u=t.presentationTimeOffset||0,d=t.periodStart+(o.time-u)/c;return{uri:s,timeline:o.timeline,duration:o.duration,resolvedUri:Ng(t.baseUrl||"",s),map:a,number:o.number,presentationTime:d}})},PIe=(t,e)=>{const{baseUrl:n,initialization:r={}}=t,a=Vf({baseUrl:n,source:r.sourceURL,range:r.range}),i=Vf({baseUrl:n,source:e.media,range:e.mediaRange});return i.map=a,i},IIe=(t,e)=>{const{duration:n,segmentUrls:r=[],periodStart:a}=t;if(!n&&!e||n&&e)throw new Error(Nu.SEGMENT_TIME_UNSPECIFIED);const i=r.map(c=>PIe(t,c));let o;return n&&(o=Fw(t)),e&&(o=nM(t,e)),o.map((c,u)=>{if(i[u]){const d=i[u],f=t.timescale||1,h=t.presentationTimeOffset||0;return d.timeline=c.timeline,d.duration=c.duration,d.number=c.number,d.presentationTime=a+(c.time-h)/f,d}}).filter(c=>c)},AIe=({attributes:t,segmentInfo:e})=>{let n,r;e.template?(r=EIe,n=tr(t,e.template)):e.base?(r=QR,n=tr(t,e.base)):e.list&&(r=IIe,n=tr(t,e.list));const a={attributes:t};if(!r)return a;const i=r(n,e.segmentTimeline);if(n.duration){const{duration:o,timescale:s=1}=n;n.duration=o/s}else i.length?n.duration=i.reduce((o,s)=>Math.max(o,Math.ceil(s.duration)),0):n.duration=0;return a.attributes=n,a.segments=i,e.base&&n.indexRange&&(a.sidx=i[0],a.segments=[]),a},NIe=t=>t.map(AIe),xn=(t,e)=>XR(t.childNodes).filter(({tagName:n})=>n===e),eh=t=>t.textContent.trim(),DIe=t=>parseFloat(t.split("/").reduce((e,n)=>e/n)),Du=t=>{const s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!s)return 0;const[c,u,d,f,h,v]=s.slice(1);return parseFloat(c||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(d||0)*86400+parseFloat(f||0)*3600+parseFloat(h||0)*60+parseFloat(v||0)},RIe=t=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)),aM={mediaPresentationDuration(t){return Du(t)},availabilityStartTime(t){return RIe(t)/1e3},minimumUpdatePeriod(t){return Du(t)},suggestedPresentationDelay(t){return Du(t)},type(t){return t},timeShiftBufferDepth(t){return Du(t)},start(t){return Du(t)},width(t){return parseInt(t,10)},height(t){return parseInt(t,10)},bandwidth(t){return parseInt(t,10)},frameRate(t){return DIe(t)},startNumber(t){return parseInt(t,10)},timescale(t){return parseInt(t,10)},presentationTimeOffset(t){return parseInt(t,10)},duration(t){const e=parseInt(t,10);return isNaN(e)?Du(t):e},d(t){return parseInt(t,10)},t(t){return parseInt(t,10)},r(t){return parseInt(t,10)},presentationTime(t){return parseInt(t,10)},DEFAULT(t){return t}},Wn=t=>t&&t.attributes?XR(t.attributes).reduce((e,n)=>{const r=aM[n.name]||aM.DEFAULT;return e[n.name]=r(n.value),e},{}):{},MIe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Hg=(t,e)=>e.length?Au(t.map(function(n){return e.map(function(r){const a=eh(r),i=Ng(n.baseUrl,a),o=tr(Wn(r),{baseUrl:i});return i!==a&&!o.serviceLocation&&n.serviceLocation&&(o.serviceLocation=n.serviceLocation),o})})):t,Uw=t=>{const e=xn(t,"SegmentTemplate")[0],n=xn(t,"SegmentList")[0],r=n&&xn(n,"SegmentURL").map(f=>tr({tag:"SegmentURL"},Wn(f))),a=xn(t,"SegmentBase")[0],i=n||e,o=i&&xn(i,"SegmentTimeline")[0],s=n||a||e,c=s&&xn(s,"Initialization")[0],u=e&&Wn(e);u&&c?u.initialization=c&&Wn(c):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const d={template:u,segmentTimeline:o&&xn(o,"S").map(f=>Wn(f)),list:n&&tr(Wn(n),{segmentUrls:r,initialization:Wn(c)}),base:a&&tr(Wn(a),{initialization:Wn(c)})};return Object.keys(d).forEach(f=>{d[f]||delete d[f]}),d},LIe=(t,e,n)=>r=>{const a=xn(r,"BaseURL"),i=Hg(e,a),o=tr(t,Wn(r)),s=Uw(r);return i.map(c=>({segmentInfo:tr(n,s),attributes:tr(o,c)}))},FIe=t=>t.reduce((e,n)=>{const r=Wn(n);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const a=MIe[r.schemeIdUri];if(a){e[a]={attributes:r};const i=xn(n,"cenc:pssh")[0];if(i){const o=eh(i);e[a].pssh=o&&X6(o)}}return e},{}),BIe=t=>{if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{let r,a;return a=n,/^CC\d=/.test(n)?[r,a]=n.split("="):/^CC\d$/.test(n)&&(r=n),{channel:r,language:a}});if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof t.value!="string"?[]:t.value.split(";")).map(n=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[a,i=""]=n.split("=");r.channel=a,r.language=n,i.split(",").forEach(o=>{const[s,c]=o.split(":");s==="lang"?r.language=c:s==="er"?r.easyReader=Number(c):s==="war"?r.aspectRatio=Number(c):s==="3D"&&(r["3D"]=Number(c))})}else r.language=n;return r.channel&&(r.channel="SERVICE"+r.channel),r})},jIe=t=>Au(xn(t.node,"EventStream").map(e=>{const n=Wn(e),r=n.schemeIdUri;return xn(e,"Event").map(a=>{const i=Wn(a),o=i.presentationTime||0,s=n.timescale||1,c=i.duration||0,u=o/s+t.attributes.start;return{schemeIdUri:r,value:n.value,id:i.id,start:u,end:u+c/s,messageData:eh(a)||i.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),$Ie=(t,e,n)=>r=>{const a=Wn(r),i=Hg(e,xn(r,"BaseURL")),o=xn(r,"Role")[0],s={role:Wn(o)};let c=tr(t,a,s);const u=xn(r,"Accessibility")[0],d=BIe(Wn(u));d&&(c=tr(c,{captionServices:d}));const f=xn(r,"Label")[0];if(f&&f.childNodes.length){const m=f.childNodes[0].nodeValue.trim();c=tr(c,{label:m})}const h=FIe(xn(r,"ContentProtection"));Object.keys(h).length&&(c=tr(c,{contentProtection:h}));const v=Uw(r),p=xn(r,"Representation"),g=tr(n,v);return Au(p.map(LIe(c,i,g)))},UIe=(t,e)=>(n,r)=>{const a=Hg(e,xn(n.node,"BaseURL")),i=tr(t,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(i.periodDuration=n.attributes.duration);const o=xn(n.node,"AdaptationSet"),s=Uw(n.node);return Au(o.map($Ie(i,a,s)))},zIe=(t,e)=>{if(t.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!t.length)return null;const n=tr({serverURL:eh(t[0])},Wn(t[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},HIe=({attributes:t,priorPeriodAttributes:e,mpdType:n})=>typeof t.start=="number"?t.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,WIe=(t,e={})=>{const{manifestUri:n="",NOW:r=Date.now(),clientOffset:a=0,eventHandler:i=function(){}}=e,o=xn(t,"Period");if(!o.length)throw new Error(Nu.INVALID_NUMBER_OF_PERIOD);const s=xn(t,"Location"),c=Wn(t),u=Hg([{baseUrl:n}],xn(t,"BaseURL")),d=xn(t,"ContentSteering");c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=r,c.clientOffset=a,s.length&&(c.locations=s.map(eh));const f=[];return o.forEach((h,v)=>{const p=Wn(h),g=f[v-1];p.start=HIe({attributes:p,priorPeriodAttributes:g?g.attributes:null,mpdType:c.type}),f.push({node:h,attributes:p})}),{locations:c.locations,contentSteeringInfo:zIe(d,i),representationInfo:Au(f.map(UIe(c,u))),eventStream:Au(f.map(jIe))}},iM=t=>{if(t==="")throw new Error(Nu.DASH_EMPTY_MANIFEST);const e=new eIe;let n,r;try{n=e.parseFromString(t,"application/xml"),r=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Nu.DASH_INVALID_XML);return r},KIe=t=>{const e=xn(t,"UTCTiming")[0];if(!e)return null;const n=Wn(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Nu.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},qIe=(t,e={})=>{const n=WIe(iM(t),e),r=NIe(n.representationInfo);return _Ie({dashPlaylists:r,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},GIe=t=>KIe(iM(t));var YIe=Math.pow(2,32),XIe=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return e.getBigUint64?(n=e.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):e.getUint32(0)*YIe+e.getUint32(4)},JIe={getUint64:XIe},oM=JIe.getUint64,QIe=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;n.version===0?(n.earliestPresentationTime=e.getUint32(r),n.firstOffset=e.getUint32(r+4),r+=8):(n.earliestPresentationTime=oM(t.subarray(r)),n.firstOffset=oM(t.subarray(r+8)),r+=16),r+=2;var a=e.getUint16(r);for(r+=2;a>0;r+=12,a--)n.references.push({referenceType:(t[r]&128)>>>7,referencedSize:e.getUint32(r)&2147483647,subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(t[r+8]&128),sapType:(t[r+8]&112)>>>4,sapDeltaTime:e.getUint32(r+8)&268435455});return n},ZIe=QIe;const VIe=yu(ZIe);var eAe=ht([73,68,51]),tAe=function(e,n){n===void 0&&(n=0),e=ht(e);var r=e[n+5],a=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],i=(r&16)>>4;return i?a+20:a+10},th=function t(e,n){return n===void 0&&(n=0),e=ht(e),e.length-n<10||!wn(e,eAe,{offset:n})?n:(n+=tAe(e,n),t(e,n))},lM=function(e){return typeof e=="string"?rR(e):e},nAe=function(e){return Array.isArray(e)?e.map(function(n){return lM(n)}):[lM(e)]},rAe=function t(e,n,r){r===void 0&&(r=!1),n=nAe(n),e=ht(e);var a=[];if(!n.length)return a;for(var i=0;i<e.length;){var o=(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])>>>0,s=e.subarray(i+4,i+8);if(o===0)break;var c=i+o;if(c>e.length){if(r)break;c=e.length}var u=e.subarray(i+8,c);wn(s,n[0])&&(n.length===1?a.push(u):a.push.apply(a,t(u,n.slice(1),r))),i=c}return a},Wg={EBML:ht([26,69,223,163]),DocType:ht([66,130]),Segment:ht([24,83,128,103]),SegmentInfo:ht([21,73,169,102]),Tracks:ht([22,84,174,107]),Track:ht([174]),TrackNumber:ht([215]),DefaultDuration:ht([35,227,131]),TrackEntry:ht([174]),TrackType:ht([131]),FlagDefault:ht([136]),CodecID:ht([134]),CodecPrivate:ht([99,162]),VideoTrack:ht([224]),AudioTrack:ht([225]),Cluster:ht([31,67,182,117]),Timestamp:ht([231]),TimestampScale:ht([42,215,177]),BlockGroup:ht([160]),BlockDuration:ht([155]),Block:ht([161]),SimpleBlock:ht([163])},zw=[128,64,32,16,8,4,2,1],aAe=function(e){for(var n=1,r=0;r<zw.length&&!(e&zw[r]);r++)n++;return n},Kg=function(e,n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!1);var i=aAe(e[n]),o=e.subarray(n,n+i);return r&&(o=Array.prototype.slice.call(e,n,n+i),o[0]^=zw[i-1]),{length:i,value:_Pe(o,{signed:a}),bytes:o}},sM=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?SPe(e):e},iAe=function(e){return Array.isArray(e)?e.map(function(n){return sM(n)}):[sM(e)]},oAe=function t(e,n,r){if(r>=n.length)return n.length;var a=Kg(n,r,!1);if(wn(e.bytes,a.bytes))return r;var i=Kg(n,r+a.length);return t(e,n,r+i.length+i.value+a.length)},cM=function t(e,n){n=iAe(n),e=ht(e);var r=[];if(!n.length)return r;for(var a=0;a<e.length;){var i=Kg(e,a,!1),o=Kg(e,a+i.length),s=a+i.length+o.length;o.value===127&&(o.value=oAe(i,e,s),o.value!==e.length&&(o.value-=s));var c=s+o.value>e.length?e.length:s+o.value,u=e.subarray(s,c);wn(n[0],i.bytes)&&(n.length===1?r.push(u):r=r.concat(t(u,n.slice(1))));var d=i.length+o.length+u.length;a+=d}return r},lAe=ht([0,0,0,1]),sAe=ht([0,0,1]),cAe=ht([0,0,3]),uAe=function(e){for(var n=[],r=1;r<e.length-2;)wn(e.subarray(r,r+3),cAe)&&(n.push(r+2),r++),r++;if(n.length===0)return e;var a=e.length-n.length,i=new Uint8Array(a),o=0;for(r=0;r<a;o++,r++)o===n[0]&&(o++,n.shift()),i[r]=e[o];return i},uM=function(e,n,r,a){e=ht(e),r=[].concat(r);for(var i=0,o,s=0;i<e.length&&(s<a||o);){var c=void 0;if(wn(e.subarray(i),lAe)?c=4:wn(e.subarray(i),sAe)&&(c=3),!c){i++;continue}if(s++,o)return uAe(e.subarray(o,i));var u=void 0;n==="h264"?u=e[i+c]&31:n==="h265"&&(u=e[i+c]>>1&63),r.indexOf(u)!==-1&&(o=i+c),i+=c+(n==="h264"?1:2)}return e.subarray(0,0)},dAe=function(e,n,r){return uM(e,"h264",n,r)},fAe=function(e,n,r){return uM(e,"h265",n,r)},Ar={webm:ht([119,101,98,109]),matroska:ht([109,97,116,114,111,115,107,97]),flac:ht([102,76,97,67]),ogg:ht([79,103,103,83]),ac3:ht([11,119]),riff:ht([82,73,70,70]),avi:ht([65,86,73]),wav:ht([87,65,86,69]),"3gp":ht([102,116,121,112,51,103]),mp4:ht([102,116,121,112]),fmp4:ht([115,116,121,112]),mov:ht([102,116,121,112,113,116]),moov:ht([109,111,111,118]),moof:ht([109,111,111,102])},Ru={aac:function(e){var n=th(e);return wn(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=th(e);return wn(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=cM(e,[Wg.EBML,Wg.DocType])[0];return wn(n,Ar.webm)},mkv:function(e){var n=cM(e,[Wg.EBML,Wg.DocType])[0];return wn(n,Ar.matroska)},mp4:function(e){if(Ru["3gp"](e)||Ru.mov(e))return!1;if(wn(e,Ar.mp4,{offset:4})||wn(e,Ar.fmp4,{offset:4})||wn(e,Ar.moof,{offset:4})||wn(e,Ar.moov,{offset:4}))return!0},mov:function(e){return wn(e,Ar.mov,{offset:4})},"3gp":function(e){return wn(e,Ar["3gp"],{offset:4})},ac3:function(e){var n=th(e);return wn(e,Ar.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function(e){var n=th(e);return wn(e,Ar.flac,{offset:n})},ogg:function(e){return wn(e,Ar.ogg)},avi:function(e){return wn(e,Ar.riff)&&wn(e,Ar.avi,{offset:8})},wav:function(e){return wn(e,Ar.riff)&&wn(e,Ar.wav,{offset:8})},h264:function(e){return dAe(e,7,3).length},h265:function(e){return fAe(e,[32,33],3).length}},Hw=Object.keys(Ru).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);Hw.forEach(function(t){var e=Ru[t];Ru[t]=function(n){return e(ht(n))}});var hAe=Ru,Ww=function(e){e=ht(e);for(var n=0;n<Hw.length;n++){var r=Hw[n];if(hAe[r](e))return r}return""},vAe=function(e){return rAe(e,["moof"]).length>0},Ns={};/**
 * @license
 * Video.js 8.21.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var Kw="8.21.0";const Uo={},Cl=function(t,e){return Uo[t]=Uo[t]||[],e&&(Uo[t]=Uo[t].concat(e)),Uo[t]},pAe=function(t,e){Cl(t,e)},dM=function(t,e){const n=Cl(t).indexOf(e);return n<=-1?!1:(Uo[t]=Uo[t].slice(),Uo[t].splice(n,1),!0)},gAe=function(t,e){Cl(t,[].concat(e).map(n=>{const r=(...a)=>(dM(t,r),n(...a));return r}))},qg={prefixed:!0},Gg=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],fM=Gg[0];let nh;for(let t=0;t<Gg.length;t++)if(Gg[t][1]in He){nh=Gg[t];break}if(nh){for(let t=0;t<nh.length;t++)qg[fM[t]]=nh[t];qg.prefixed=nh[0]!==fM[0]}let ta=[];const mAe=(t,e,n)=>(r,a,i)=>{const o=e.levels[a],s=new RegExp(`^(${o})$`);let c=t;if(r!=="log"&&i.unshift(r.toUpperCase()+":"),n&&(c=`%c${t}`,i.unshift(n)),i.unshift(c+":"),ta){ta.push([].concat(i));const d=ta.length-1e3;ta.splice(0,d>0?d:0)}if(!fe.console)return;let u=fe.console[r];!u&&r==="debug"&&(u=fe.console.info||fe.console.log),!(!u||!o||!s.test(r))&&u[Array.isArray(i)?"apply":"call"](fe.console,i)};function qw(t,e=":",n=""){let r="info",a;function i(...o){a("log",r,o)}return a=mAe(t,i,n),i.createLogger=(o,s,c)=>{const u=s!==void 0?s:e,d=c!==void 0?c:n,f=`${t} ${u} ${o}`;return qw(f,u,d)},i.createNewLogger=(o,s,c)=>qw(o,s,c),i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},i.level=o=>{if(typeof o=="string"){if(!i.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);r=o}return r},i.history=()=>ta?[].concat(ta):[],i.history.filter=o=>(ta||[]).filter(s=>new RegExp(`.*${o}.*`).test(s[0])),i.history.clear=()=>{ta&&(ta.length=0)},i.history.disable=()=>{ta!==null&&(ta.length=0,ta=null)},i.history.enable=()=>{ta===null&&(ta=[])},i.error=(...o)=>a("error",r,o),i.warn=(...o)=>a("warn",r,o),i.debug=(...o)=>a("debug",r,o),i}const Dt=qw("VIDEOJS"),hM=Dt.createLogger,yAe=Object.prototype.toString,vM=function(t){return Ki(t)?Object.keys(t):[]};function Mu(t,e){vM(t).forEach(n=>e(t[n],n))}function pM(t,e,n=0){return vM(t).reduce((r,a)=>e(r,t[a],a),n)}function Ki(t){return!!t&&typeof t=="object"}function Lu(t){return Ki(t)&&yAe.call(t)==="[object Object]"&&t.constructor===Object}function rn(...t){const e={};return t.forEach(n=>{n&&Mu(n,(r,a)=>{if(!Lu(r)){e[a]=r;return}Lu(e[a])||(e[a]={}),e[a]=rn(e[a],r)})}),e}function gM(t={}){const e=[];for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];e.push(r)}return e}function Yg(t,e,n,r=!0){const a=o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),i={configurable:!0,enumerable:!0,get(){const o=n();return a(o),o}};return r&&(i.set=a),Object.defineProperty(t,e,i)}var bAe=Object.freeze({__proto__:null,each:Mu,reduce:pM,isObject:Ki,isPlain:Lu,merge:rn,values:gM,defineLazyProperty:Yg});let Gw=!1,mM=null,gi=!1,yM,bM=!1,Fu=!1,Bu=!1,qi=!1,Yw=null,Xg=null;const wAe=!!(fe.cast&&fe.cast.framework&&fe.cast.framework.CastReceiverContext);let wM=null,Jg=!1,Qg=!1,Zg=!1,Vg=!1,em=!1,tm=!1,nm=!1;const rh=!!(ju()&&("ontouchstart"in fe||fe.navigator.maxTouchPoints||fe.DocumentTouch&&fe.document instanceof fe.DocumentTouch)),_l=fe.navigator&&fe.navigator.userAgentData;if(_l&&_l.platform&&_l.brands&&(gi=_l.platform==="Android",Fu=!!_l.brands.find(t=>t.brand==="Microsoft Edge"),Bu=!!_l.brands.find(t=>t.brand==="Chromium"),qi=!Fu&&Bu,Yw=Xg=(_l.brands.find(t=>t.brand==="Chromium")||{}).version||null,Qg=_l.platform==="Windows"),!Bu){const t=fe.navigator&&fe.navigator.userAgent||"";Gw=/iPod/i.test(t),mM=function(){const e=t.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),gi=/Android/i.test(t),yM=function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return n&&r?parseFloat(e[1]+"."+e[2]):n||null}(),bM=/Firefox/i.test(t),Fu=/Edg/i.test(t),Bu=/Chrome/i.test(t)||/CriOS/i.test(t),qi=!Fu&&Bu,Yw=Xg=function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),wM=function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(n=11),n}(),em=/Tizen/i.test(t),tm=/Web0S/i.test(t),nm=em||tm,Jg=/Safari/i.test(t)&&!qi&&!gi&&!Fu&&!nm,Qg=/Windows/i.test(t),Zg=/iPad/i.test(t)||Jg&&rh&&!/iPhone/i.test(t),Vg=/iPhone/i.test(t)&&!Zg}const wr=Vg||Zg||Gw,rm=(Jg||wr)&&!qi;var xM=Object.freeze({__proto__:null,get IS_IPOD(){return Gw},get IOS_VERSION(){return mM},get IS_ANDROID(){return gi},get ANDROID_VERSION(){return yM},get IS_FIREFOX(){return bM},get IS_EDGE(){return Fu},get IS_CHROMIUM(){return Bu},get IS_CHROME(){return qi},get CHROMIUM_VERSION(){return Yw},get CHROME_VERSION(){return Xg},IS_CHROMECAST_RECEIVER:wAe,get IE_VERSION(){return wM},get IS_SAFARI(){return Jg},get IS_WINDOWS(){return Qg},get IS_IPAD(){return Zg},get IS_IPHONE(){return Vg},get IS_TIZEN(){return em},get IS_WEBOS(){return tm},get IS_SMART_TV(){return nm},TOUCH_ENABLED:rh,IS_IOS:wr,IS_ANY_SAFARI:rm});function CM(t){return typeof t=="string"&&!!t.trim()}function xAe(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ju(){return He===fe.document}function $u(t){return Ki(t)&&t.nodeType===1}function _M(){try{return fe.parent!==fe.self}catch{return!0}}function SM(t){return function(e,n){if(!CM(e))return He[t](null);CM(n)&&(n=He.querySelector(n));const r=$u(n)?n:He;return r[t]&&r[t](e)}}function bt(t="div",e={},n={},r){const a=He.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(i){const o=e[i];i==="textContent"?Sl(a,o):(a[i]!==o||i==="tabIndex")&&(a[i]=o)}),Object.getOwnPropertyNames(n).forEach(function(i){a.setAttribute(i,n[i])}),r&&Jw(a,r),a}function Sl(t,e){return typeof t.textContent>"u"?t.innerText=e:t.textContent=e,t}function Xw(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ah(t,e){return xAe(e),t.classList.contains(e)}function Ds(t,...e){return t.classList.add(...e.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),t}function am(t,...e){return t?(t.classList.remove(...e.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),t):(Dt.warn("removeClass was called with an element that doesn't exist"),null)}function TM(t,e,n){return typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(r=>t.classList.toggle(r,n)),t}function kM(t,e){Object.getOwnPropertyNames(e).forEach(function(n){const r=e[n];r===null||typeof r>"u"||r===!1?t.removeAttribute(n):t.setAttribute(n,r===!0?"":r)})}function Tl(t){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(t&&t.attributes&&t.attributes.length>0){const r=t.attributes;for(let a=r.length-1;a>=0;a--){const i=r[a].name;let o=r[a].value;n.includes(i)&&(o=o!==null),e[i]=o}}return e}function OM(t,e){return t.getAttribute(e)}function Uu(t,e,n){t.setAttribute(e,n)}function im(t,e){t.removeAttribute(e)}function EM(){He.body.focus(),He.onselectstart=function(){return!1}}function PM(){He.onselectstart=function(){return!0}}function zu(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(r=>{e[r]!==void 0&&(n[r]=e[r])}),n.height||(n.height=parseFloat(Hu(t,"height"))),n.width||(n.width=parseFloat(Hu(t,"width"))),n}}function ih(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,n=t.offsetHeight;let r=0,a=0;for(;t.offsetParent&&t!==He[qg.fullscreenElement];)r+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent;return{left:r,top:a,width:e,height:n}}function om(t,e){const n={x:0,y:0};if(wr){let d=t;for(;d&&d.nodeName.toLowerCase()!=="html";){const f=Hu(d,"transform");if(/^matrix/.test(f)){const h=f.slice(7,-1).split(/,\s/).map(Number);n.x+=h[4],n.y+=h[5]}else if(/^matrix3d/.test(f)){const h=f.slice(9,-1).split(/,\s/).map(Number);n.x+=h[12],n.y+=h[13]}if(d.assignedSlot&&d.assignedSlot.parentElement&&fe.WebKitCSSMatrix){const h=fe.getComputedStyle(d.assignedSlot.parentElement).transform,v=new fe.WebKitCSSMatrix(h);n.x+=v.m41,n.y+=v.m42}d=d.parentNode||d.host}}const r={},a=ih(e.target),i=ih(t),o=i.width,s=i.height;let c=e.offsetY-(i.top-a.top),u=e.offsetX-(i.left-a.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-i.left,c=e.changedTouches[0].pageY+i.top,wr&&(u-=n.x,c-=n.y)),r.y=1-Math.max(0,Math.min(1,c/s)),r.x=Math.max(0,Math.min(1,u/o)),r}function IM(t){return Ki(t)&&t.nodeType===3}function lm(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function AM(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="function"&&(e=e()),$u(e)||IM(e))return e;if(typeof e=="string"&&/\S/.test(e))return He.createTextNode(e)}).filter(e=>e)}function Jw(t,e){return AM(e).forEach(n=>t.appendChild(n)),t}function NM(t,e){return Jw(lm(t),e)}function oh(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0||t.type==="mousedown"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}const kl=SM("querySelector"),DM=SM("querySelectorAll");function Hu(t,e){if(!t||!e)return"";if(typeof fe.getComputedStyle=="function"){let n;try{n=fe.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function RM(t){[...He.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(a=>a.cssText).join(""),r=He.createElement("style");r.textContent=n,t.document.head.appendChild(r)}catch{const r=He.createElement("link");r.rel="stylesheet",r.type=e.type,r.media=e.media.mediaText,r.href=e.href,t.document.head.appendChild(r)}})}var MM=Object.freeze({__proto__:null,isReal:ju,isEl:$u,isInFrame:_M,createEl:bt,textContent:Sl,prependTo:Xw,hasClass:ah,addClass:Ds,removeClass:am,toggleClass:TM,setAttributes:kM,getAttributes:Tl,getAttribute:OM,setAttribute:Uu,removeAttribute:im,blockTextSelection:EM,unblockTextSelection:PM,getBoundingClientRect:zu,findPosition:ih,getPointerPosition:om,isTextNode:IM,emptyEl:lm,normalizeContent:AM,appendContent:Jw,insertContent:NM,isSingleLeftClick:oh,$:kl,$$:DM,computedStyle:Hu,copyStyleSheetsToWindow:RM});let LM=!1,Qw;const CAe=function(){if(Qw.options.autoSetup===!1)return;const t=Array.prototype.slice.call(He.getElementsByTagName("video")),e=Array.prototype.slice.call(He.getElementsByTagName("audio")),n=Array.prototype.slice.call(He.getElementsByTagName("video-js")),r=t.concat(e,n);if(r&&r.length>0)for(let a=0,i=r.length;a<i;a++){const o=r[a];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&Qw(o);else{Zw(1);break}}else LM||Zw(1)};function Zw(t,e){ju()&&(e&&(Qw=e),fe.setTimeout(CAe,t))}function Vw(){LM=!0,fe.removeEventListener("load",Vw)}ju()&&(He.readyState==="complete"?Vw():fe.addEventListener("load",Vw));const FM=function(t){const e=He.createElement("style");return e.className=t,e},BM=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};var Nr=new WeakMap;let _Ae=3;function $a(){return _Ae++}function jM(t,e){if(!Nr.has(t))return;const n=Nr.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&Nr.delete(t)}function ex(t,e,n,r){n.forEach(function(a){t(e,a,r)})}function sm(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){const r=t||fe.event;t={};const a=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const i in r)a.includes(i)||i==="returnValue"&&r.preventDefault||(t[i]=r[i]);if(t.target||(t.target=t.srcElement||He),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){r.preventDefault&&r.preventDefault(),t.returnValue=!1,r.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),t.cancelBubble=!0,r.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){const i=He.documentElement,o=He.body;t.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}let cm;const SAe=function(){if(typeof cm!="boolean"){cm=!1;try{const t=Object.defineProperty({},"passive",{get(){cm=!0}});fe.addEventListener("test",null,t),fe.removeEventListener("test",null,t)}catch{}}return cm},TAe=["touchstart","touchmove"];function xa(t,e,n){if(Array.isArray(e))return ex(xa,t,e,n);Nr.has(t)||Nr.set(t,{});const r=Nr.get(t);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),n.guid||(n.guid=$a()),r.handlers[e].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(a,i){if(r.disabled)return;a=sm(a);const o=r.handlers[a.type];if(o){const s=o.slice(0);for(let c=0,u=s.length;c<u&&!a.isImmediatePropagationStopped();c++)try{s[c].call(t,a,i)}catch(d){Dt.error(d)}}}),r.handlers[e].length===1)if(t.addEventListener){let a=!1;SAe()&&TAe.indexOf(e)>-1&&(a={passive:!0}),t.addEventListener(e,r.dispatcher,a)}else t.attachEvent&&t.attachEvent("on"+e,r.dispatcher)}function xr(t,e,n){if(!Nr.has(t))return;const r=Nr.get(t);if(!r.handlers)return;if(Array.isArray(e))return ex(xr,t,e,n);const a=function(o,s){r.handlers[s]=[],jM(o,s)};if(e===void 0){for(const o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&a(t,o);return}const i=r.handlers[e];if(i){if(!n){a(t,e);return}if(n.guid)for(let o=0;o<i.length;o++)i[o].guid===n.guid&&i.splice(o--,1);jM(t,e)}}function Wu(t,e,n){const r=Nr.has(t)?Nr.get(t):{},a=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=sm(e),r.dispatcher&&r.dispatcher.call(t,e,n),a&&!e.isPropagationStopped()&&e.bubbles===!0)Wu.call(null,a,e,n);else if(!a&&!e.defaultPrevented&&e.target&&e.target[e.type]){Nr.has(e.target)||Nr.set(e.target,{});const i=Nr.get(e.target);e.target[e.type]&&(i.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),i.disabled=!1)}return!e.defaultPrevented}function um(t,e,n){if(Array.isArray(e))return ex(um,t,e,n);const r=function(){xr(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||$a(),xa(t,e,r)}function tx(t,e,n){const r=function(){xr(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||$a(),xa(t,e,r)}var kAe=Object.freeze({__proto__:null,fixEvent:sm,on:xa,off:xr,trigger:Wu,one:um,any:tx});const Ua=30,un=function(t,e,n){e.guid||(e.guid=$a());const r=e.bind(t);return r.guid=n?n+"_"+e.guid:e.guid,r},Gi=function(t,e){let n=fe.performance.now();return function(...a){const i=fe.performance.now();i-n>=e&&(t(...a),n=i)}},$M=function(t,e,n,r=fe){let a;const i=()=>{r.clearTimeout(a),a=null},o=function(){const s=this,c=arguments;let u=function(){a=null,u=null,n||t.apply(s,c)};!a&&n&&t.apply(s,c),r.clearTimeout(a),a=r.setTimeout(u,e)};return o.cancel=i,o};var OAe=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Ua,bind_:un,throttle:Gi,debounce:$M});let lh;class Ca{on(e,n){const r=this.addEventListener;this.addEventListener=()=>{},xa(this,e,n),this.addEventListener=r}off(e,n){xr(this,e,n)}one(e,n){const r=this.addEventListener;this.addEventListener=()=>{},um(this,e,n),this.addEventListener=r}any(e,n){const r=this.addEventListener;this.addEventListener=()=>{},tx(this,e,n),this.addEventListener=r}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=sm(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),Wu(this,e)}queueTrigger(e){lh||(lh=new Map);const n=e.type||e;let r=lh.get(this);r||(r=new Map,lh.set(this,r));const a=r.get(n);r.delete(n),fe.clearTimeout(a);const i=fe.setTimeout(()=>{r.delete(n),r.size===0&&(r=null,lh.delete(this)),this.trigger(e)},0);r.set(n,i)}}Ca.prototype.allowedEvents_={},Ca.prototype.addEventListener=Ca.prototype.on,Ca.prototype.removeEventListener=Ca.prototype.off,Ca.prototype.dispatchEvent=Ca.prototype.trigger;const dm=t=>typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t,zo=t=>t instanceof Ca||!!t.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof t[e]=="function"),EAe=(t,e)=>{zo(t)?e():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(e))},nx=t=>typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length,fm=(t,e,n)=>{if(!t||!t.nodeName&&!zo(t))throw new Error(`Invalid target for ${dm(e)}#${n}; must be a DOM node or evented object.`)},UM=(t,e,n)=>{if(!nx(t))throw new Error(`Invalid event type for ${dm(e)}#${n}; must be a non-empty string or array.`)},zM=(t,e,n)=>{if(typeof t!="function")throw new Error(`Invalid listener for ${dm(e)}#${n}; must be a function.`)},rx=(t,e,n)=>{const r=e.length<3||e[0]===t||e[0]===t.eventBusEl_;let a,i,o;return r?(a=t.eventBusEl_,e.length>=3&&e.shift(),[i,o]=e):(a=e[0],i=e[1],o=e[2]),fm(a,t,n),UM(i,t,n),zM(o,t,n),o=un(t,o),{isTargetingSelf:r,target:a,type:i,listener:o}},Rs=(t,e,n,r)=>{fm(t,t,e),t.nodeName?kAe[e](t,n,r):t[e](n,r)},PAe={on(...t){const{isTargetingSelf:e,target:n,type:r,listener:a}=rx(this,t,"on");if(Rs(n,"on",r,a),!e){const i=()=>this.off(n,r,a);i.guid=a.guid;const o=()=>this.off("dispose",i);o.guid=a.guid,Rs(this,"on","dispose",i),Rs(n,"on","dispose",o)}},one(...t){const{isTargetingSelf:e,target:n,type:r,listener:a}=rx(this,t,"one");if(e)Rs(n,"one",r,a);else{const i=(...o)=>{this.off(n,r,i),a.apply(null,o)};i.guid=a.guid,Rs(n,"one",r,i)}},any(...t){const{isTargetingSelf:e,target:n,type:r,listener:a}=rx(this,t,"any");if(e)Rs(n,"any",r,a);else{const i=(...o)=>{this.off(n,r,i),a.apply(null,o)};i.guid=a.guid,Rs(n,"any",r,i)}},off(t,e,n){if(!t||nx(t))xr(this.eventBusEl_,t,e);else{const r=t,a=e;fm(r,this,"off"),UM(a,this,"off"),zM(n,this,"off"),n=un(this,n),this.off("dispose",n),r.nodeName?(xr(r,a,n),xr(r,"dispose",n)):zo(r)&&(r.off(a,n),r.off("dispose",n))}},trigger(t,e){fm(this.eventBusEl_,this,"trigger");const n=t&&typeof t!="string"?t.type:t;if(!nx(n))throw new Error(`Invalid event type for ${dm(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Wu(this.eventBusEl_,t,e)}};function ax(t,e={}){const{eventBusKey:n}=e;if(n){if(!t[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);t.eventBusEl_=t[n]}else t.eventBusEl_=bt("span",{className:"vjs-event-bus"});return Object.assign(t,PAe),t.eventedCallbacks&&t.eventedCallbacks.forEach(r=>{r()}),t.on("dispose",()=>{t.off(),[t,t.el_,t.eventBusEl_].forEach(function(r){r&&Nr.has(r)&&Nr.delete(r)}),fe.setTimeout(()=>{t.eventBusEl_=null},0)}),t}const IAe={state:{},setState(t){typeof t=="function"&&(t=t());let e;return Mu(t,(n,r)=>{this.state[r]!==n&&(e=e||{},e[r]={from:this.state[r],to:n}),this.state[r]=n}),e&&zo(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function HM(t,e){return Object.assign(t,IAe),t.state=Object.assign({},t.state,e),typeof t.handleStateChanged=="function"&&zo(t)&&t.on("statechanged",t.handleStateChanged),t}const sh=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toLowerCase())},An=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},WM=function(t,e){return An(t)===An(e)};var AAe=Object.freeze({__proto__:null,toLowerCase:sh,toTitleCase:An,titleCaseEquals:WM});class Ie{constructor(e,n,r){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=rn({},this.options_),n=this.options_=rn(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const a=e&&e.id&&e.id()||"no_player";this.id_=`${a}_component_${$a()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(a=>this.addClass(a)),["on","off","one","any","trigger"].forEach(a=>{this[a]=void 0}),n.evented!==!1&&(ax(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),HM(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(r),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=rn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,r){return bt(e,n,r)}localize(e,n,r=e){const a=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[a],s=a&&a.split("-")[0],c=i&&i[s];let u=r;return o&&o[e]?u=o[e]:c&&c[e]&&(u=c[e]),n&&(u=u.replace(/\{(\d+)\}/g,function(d,f){const h=n[f-1];let v=h;return typeof h>"u"&&(v=d),v})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,a)=>r.concat(a),[]);let n=this;for(let r=0;r<e.length;r++)if(n=n.getChild(e[r]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const r="http://www.w3.org/2000/svg",a=bt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),i=He.createElementNS(r,"svg");i.setAttributeNS(null,"viewBox","0 0 512 512");const o=He.createElementNS(r,"use");return i.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),a.appendChild(i),this.iconIsSet_?n.replaceChild(a,n.querySelector(".vjs-icon-placeholder")):n.appendChild(a),this.iconIsSet_=!0,a}addChild(e,n={},r=this.children_.length){let a,i;if(typeof e=="string"){i=An(e);const o=n.componentClass||i;n.name=i;const s=Ie.getComponent(o);if(!s)throw new Error(`Component ${o} does not exist`);if(typeof s!="function")return null;a=new s(this.player_||this,n)}else a=e;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(r,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),i=i||a.name&&An(a.name()),i&&(this.childNameIndex_[i]=a,this.childNameIndex_[sh(i)]=a),typeof a.el=="function"&&a.el()){let o=null;this.children_[r+1]&&(this.children_[r+1].el_?o=this.children_[r+1].el_:$u(this.children_[r+1])&&(o=this.children_[r+1])),this.contentEl().insertBefore(a.el(),o)}return a}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let a=this.children_.length-1;a>=0;a--)if(this.children_[a]===e){n=!0,this.children_.splice(a,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[An(e.name())]=null,this.childNameIndex_[sh(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,r=o=>{const s=o.name;let c=o.opts;if(n[s]!==void 0&&(c=n[s]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;const u=this.addChild(s,c);u&&(this[s]=u)};let a;const i=Ie.getComponent("Tech");Array.isArray(e)?a=e:a=Object.keys(e),a.concat(Object.keys(this.options_).filter(function(o){return!a.some(function(s){return typeof s=="string"?o===s:o===s.name})})).map(o=>{let s,c;return typeof o=="string"?(s=o,c=e[s]||this.options_[s]||{}):(s=o.name,c=o),{name:s,opts:c}}).filter(o=>{const s=Ie.getComponent(o.opts.componentClass||An(o.name));return s&&!i.isTech(s)}).forEach(r)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return kl(e,n||this.contentEl())}$$(e,n){return DM(e,n||this.contentEl())}hasClass(e){return ah(this.el_,e)}addClass(...e){Ds(this.el_,...e)}removeClass(...e){am(this.el_,...e)}toggleClass(e,n){TM(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return OM(this.el_,e)}setAttribute(e,n){Uu(this.el_,e,n)}removeAttribute(e){im(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,r){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;const a=this.el_.style[e],i=a.indexOf("px");return parseInt(i!==-1?a.slice(0,i):this.el_["offset"+An(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=Hu(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const r=`offset${An(e)}`;n=this.el_[r]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},r={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:r}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const r=10,a=200;let i;this.on("touchstart",function(s){s.touches.length===1&&(n={pageX:s.touches[0].pageX,pageY:s.touches[0].pageY},e=fe.performance.now(),i=!0)}),this.on("touchmove",function(s){if(s.touches.length>1)i=!1;else if(n){const c=s.touches[0].pageX-n.pageX,u=s.touches[0].pageY-n.pageY;Math.sqrt(c*c+u*u)>r&&(i=!1)}});const o=function(){i=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(s){n=null,i===!0&&fe.performance.now()-e<a&&(s.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=un(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const r=function(a){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,n){var r;return e=un(this,e),this.clearTimersOnDispose_(),r=fe.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},n),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),fe.clearTimeout(e)),e}setInterval(e,n){e=un(this,e),this.clearTimersOnDispose_();const r=fe.setInterval(e,n);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),fe.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=un(this,e),n=fe.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),n=un(this,n);const r=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),fe.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((r,a)=>this[n](a))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(i){const o=fe.getComputedStyle(i,null),s=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(s)}function r(i){return!(!n(i.parentElement)||!n(i)||i.style.opacity==="0"||fe.getComputedStyle(i).height==="0px"||fe.getComputedStyle(i).width==="0px")}function a(i){if(i.offsetWidth+i.offsetHeight+i.getBoundingClientRect().height+i.getBoundingClientRect().width===0)return!1;const o={x:i.getBoundingClientRect().left+i.offsetWidth/2,y:i.getBoundingClientRect().top+i.offsetHeight/2};if(o.x<0||o.x>(He.documentElement.clientWidth||fe.innerWidth)||o.y<0||o.y>(He.documentElement.clientHeight||fe.innerHeight))return!1;let s=He.elementFromPoint(o.x,o.y);for(;s;){if(s===i)return!0;if(s.parentNode)s=s.parentNode;else return!1}}return e||(e=this.el()),!!(a(e)&&r(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=Ie.getComponent("Tech"),a=r&&r.isTech(n),i=Ie===n||Ie.prototype.isPrototypeOf(n.prototype);if(a||!i){let s;throw a?s="techs must be registered using Tech.registerTech()":s="must be a Component subclass",new Error(`Illegal component, "${e}"; ${s}.`)}e=An(e),Ie.components_||(Ie.components_={});const o=Ie.getComponent("Player");if(e==="Player"&&o&&o.players){const s=o.players,c=Object.keys(s);if(s&&c.length>0&&c.map(u=>s[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Ie.components_[e]=n,Ie.components_[sh(e)]=n,n}static getComponent(e){if(!(!e||!Ie.components_))return Ie.components_[e]}}Ie.registerComponent("Component",Ie);function NAe(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${t}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function KM(t,e,n,r){return NAe(t,r,n.length-1),n[r][e]}function ix(t){let e;return t===void 0||t.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:KM.bind(null,"start",0,t),end:KM.bind(null,"end",1,t)},fe.Symbol&&fe.Symbol.iterator&&(e[fe.Symbol.iterator]=()=>(t||[]).values()),e}function mi(t,e){return Array.isArray(t)?ix(t):t===void 0||e===void 0?ix():ix([[t,e]])}const qM=function(t,e){t=t<0?0:t;let n=Math.floor(t%60),r=Math.floor(t/60%60),a=Math.floor(t/3600);const i=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(a=r=n="-"),a=a>0||o>0?a+":":"",r=((a||i>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,a+r+n};let ox=qM;function GM(t){ox=t}function YM(){ox=qM}function Ms(t,e=t){return ox(t,e)}var DAe=Object.freeze({__proto__:null,createTimeRanges:mi,createTimeRange:mi,setFormatTime:GM,resetFormatTime:YM,formatTime:Ms});function XM(t,e){let n=0,r,a;if(!e)return 0;(!t||!t.length)&&(t=mi(0,0));for(let i=0;i<t.length;i++)r=t.start(i),a=t.end(i),a>e&&(a=e),n+=a-r;return n/e}function kn(t){if(t instanceof kn)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:Ki(t)&&(typeof t.code=="number"&&(this.code=t.code),Object.assign(this,t)),this.message||(this.message=kn.defaultMessages[this.code]||"")}kn.prototype.code=0,kn.prototype.message="",kn.prototype.status=null,kn.prototype.metadata=null,kn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],kn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},kn.MEDIA_ERR_CUSTOM=0,kn.prototype.MEDIA_ERR_CUSTOM=0,kn.MEDIA_ERR_ABORTED=1,kn.prototype.MEDIA_ERR_ABORTED=1,kn.MEDIA_ERR_NETWORK=2,kn.prototype.MEDIA_ERR_NETWORK=2,kn.MEDIA_ERR_DECODE=3,kn.prototype.MEDIA_ERR_DECODE=3,kn.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kn.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kn.MEDIA_ERR_ENCRYPTED=5,kn.prototype.MEDIA_ERR_ENCRYPTED=5;function ch(t){return t!=null&&typeof t.then=="function"}function Yi(t){ch(t)&&t.then(null,e=>{})}const lx=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,r,a)=>(t[r]&&(n[r]=t[r]),n),{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})};var JM={textTracksToJson:function(t){const e=t.$$("track"),n=Array.prototype.map.call(e,a=>a.track);return Array.prototype.map.call(e,function(a){const i=lx(a.track);return a.src&&(i.src=a.src),i}).concat(Array.prototype.filter.call(t.textTracks(),function(a){return n.indexOf(a)===-1}).map(lx))},jsonToTextTracks:function(t,e){return t.forEach(function(n){const r=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(a=>r.addCue(a))}),e.textTracks()},trackToJson_:lx};const sx="vjs-modal-dialog";class Ku extends Ie{constructor(e,n){super(e,n),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=bt("div",{className:`${sx}-content`},{role:"document"}),this.descEl_=bt("p",{className:`${sx}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Sl(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${sx} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let r=this.getChild("closeButton");if(n&&!r){const a=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(r,"close",this.close_)}!n&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),r=n.parentNode,a=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(n),this.empty(),NM(n,e),this.trigger("modalfill"),a?r.insertBefore(n,a):r.appendChild(n);const i=this.getChild("closeButton");i&&r.appendChild(i.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),lm(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=He.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),r=this.el_.querySelector(":focus");let a;for(let i=0;i<n.length;i++)if(r===n[i]){a=i;break}He.activeElement===this.el_&&(a=0),e.shiftKey&&a===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&a===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof fe.HTMLAnchorElement||n instanceof fe.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof fe.HTMLInputElement||n instanceof fe.HTMLSelectElement||n instanceof fe.HTMLTextAreaElement||n instanceof fe.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof fe.HTMLIFrameElement||n instanceof fe.HTMLObjectElement||n instanceof fe.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}Ku.prototype.options_={pauseOnOpen:!0,temporary:!0},Ie.registerComponent("ModalDialog",Ku);class qu extends Ca{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},zo(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let r=0,a=this.length;r<a;r++)if(this[r]===e){n=this[r],n.off&&n.off(),this.tracks_.splice(r,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let r=0,a=this.length;r<a;r++){const i=this[r];if(i.id===e){n=i;break}}return n}}qu.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const t in qu.prototype.allowedEvents_)qu.prototype["on"+t]=null;const cx=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].enabled=!1)};class RAe extends qu{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){cx(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&cx(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,cx(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const ux=function(t,e){for(let n=0;n<t.length;n++)!Object.keys(t[n]).length||e.id===t[n].id||(t[n].selected=!1)};class MAe extends qu{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){ux(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&ux(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,ux(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class QM extends qu{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class LAe{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,r=e.length;n<r;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let r=0,a=this.trackElements_.length;r<a;r++)if(e===this.trackElements_[r].track){n=this.trackElements_[r];break}return n}removeTrackElement_(e){for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class hm{constructor(e){hm.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let r=0;const a=e.length;this.cues_=e,this.length_=e.length;const i=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(n<a)for(r=n;r<a;r++)i.call(this,r)}getCueById(e){let n=null;for(let r=0,a=this.length;r<a;r++){const i=this[r];if(i.id===e){n=i;break}}return n}}const FAe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},BAe={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jAe={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ZM={disabled:"disabled",hidden:"hidden",showing:"showing"};class dx extends Ca{constructor(e={}){super();const n={id:e.id||"vjs_track_"+$a(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const a in n)Object.defineProperty(this,a,{get(){return n[a]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(a){a!==r&&(r=a,this.trigger("labelchange"))}})}}const fx=function(t){return new URL(t,He.baseURI)},VM=function(t){return new URL(t,He.baseURI).href},hx=function(t){if(typeof t=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},vm=function(t,e=fe.location){return fx(t).origin!==e.origin};var $Ae=Object.freeze({__proto__:null,parseUrl:fx,getAbsoluteURL:VM,getFileExtension:hx,isCrossOrigin:vm});const e9=function(t,e){const n=new fe.WebVTT.Parser(fe,fe.vttjs,fe.WebVTT.StringDecoder()),r=[];n.oncue=function(a){e.addCue(a)},n.onparsingerror=function(a){r.push(a)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),r.length>0&&(fe.console&&fe.console.groupCollapsed&&fe.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(a=>Dt.error(a)),fe.console&&fe.console.groupEnd&&fe.console.groupEnd()),n.flush()},t9=function(t,e){const n={uri:t},r=vm(t);r&&(n.cors=r);const a=e.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),j6(n,un(this,function(i,o,s){if(i)return Dt.error(i,o);e.loaded_=!0,typeof fe.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){Dt.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return e9(s,e)}):e9(s,e)}))};class uh extends dx{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=rn(e,{kind:jAe[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=ZM[n.mode]||"disabled";const a=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(r="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const i=new hm(this.cues_),o=new hm(this.activeCues_);let s=!1;this.timeupdateHandler=un(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const c=()=>{this.stopTracking()};this.tech_.one("dispose",c),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return a},set(){}},mode:{get(){return r},set(u){ZM[u]&&r!==u&&(r=u,!this.preload_&&r!=="disabled"&&this.cues.length===0&&t9(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?i:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const u=this.tech_.currentTime(),d=[];for(let f=0,h=this.cues.length;f<h;f++){const v=this.cues[f];v.startTime<=u&&v.endTime>=u&&d.push(v)}if(s=!1,d.length!==this.activeCues_.length)s=!0;else for(let f=0;f<d.length;f++)this.activeCues_.indexOf(d[f])===-1&&(s=!0);return this.activeCues_=d,o.setCues_(this.activeCues_),o},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&t9(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new fe.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const a in e)a in n||(n[a]=e[a]);n.id=e.id,n.originalCue_=e}const r=this.tech_.textTracks();for(let a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const r=this.cues_[n];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}uh.prototype.allowedEvents_={cuechange:"cuechange"};class n9 extends dx{constructor(e={}){const n=rn(e,{kind:BAe[e.kind]||""});super(n);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(a){typeof a!="boolean"||a===r||(r=a,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class r9 extends dx{constructor(e={}){const n=rn(e,{kind:FAe[e.kind]||""});super(n);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(a){typeof a!="boolean"||a===r||(r=a,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class Ho extends Ca{constructor(e={}){super();let n;const r=new uh(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return r}}}),n=Ho.NONE,r.addEventListener("loadeddata",()=>{n=Ho.LOADED,this.trigger({type:"load",target:this})})}}Ho.prototype.allowedEvents_={load:"load"},Ho.NONE=0,Ho.LOADING=1,Ho.LOADED=2,Ho.ERROR=3;const za={audio:{ListClass:RAe,TrackClass:n9,capitalName:"Audio"},video:{ListClass:MAe,TrackClass:r9,capitalName:"Video"},text:{ListClass:QM,TrackClass:uh,capitalName:"Text"}};Object.keys(za).forEach(function(t){za[t].getterName=`${t}Tracks`,za[t].privateName=`${t}Tracks_`});const Gu={remoteText:{ListClass:QM,TrackClass:uh,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:LAe,TrackClass:Ho,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Dr=Object.assign({},za,Gu);Gu.names=Object.keys(Gu),za.names=Object.keys(za),Dr.names=[].concat(Gu.names).concat(za.names);function UAe(t,e,n,r,a={}){const i=t.textTracks();a.kind=e,n&&(a.label=n),r&&(a.language=r),a.tech=t;const o=new Dr.text.TrackClass(a);return i.addTrack(o),o}class kt extends Ie{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Dr.names.forEach(r=>{const a=Dr[r];e&&e[a.getterName]&&(this[a.privateName]=e[a.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{e[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Dr.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(un(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return mi(0,0)}bufferedPercent(){return XM(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(za.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const r=this[`${n}Tracks`]()||[];let a=r.length;for(;a--;){const i=r[a];n==="text"&&this.removeRemoteTextTrack(i),r.removeTrack(i)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const r=e[n];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new kn(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?mi(0,0):mi()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){za.names.forEach(e=>{const n=za[e],r=()=>{this.trigger(`${e}trackchange`)},a=this[n.getterName]();a.addEventListener("removetrack",r),a.addEventListener("addtrack",r),this.on("dispose",()=>{a.removeEventListener("removetrack",r),a.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!fe.WebVTT)if(He.body.contains(this.el())){if(!this.options_["vtt.js"]&&Lu(G6)&&Object.keys(G6).length>0){this.trigger("vttjsloaded");return}const e=He.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),fe.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),r=s=>e.addTrack(s.track),a=s=>e.removeTrack(s.track);n.on("addtrack",r),n.on("removetrack",a),this.addWebVttScript_();const i=()=>this.trigger("texttrackchange"),o=()=>{i();for(let s=0;s<e.length;s++){const c=e[s];c.removeEventListener("cuechange",i),c.mode==="showing"&&c.addEventListener("cuechange",i)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",a),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let s=0;s<e.length;s++)e[s].removeEventListener("cuechange",i)})}addTextTrack(e,n,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return UAe(this,e,n,r)}createRemoteTextTrack(e){const n=rn(e,{tech:this});return new Gu.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const r=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=$a();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return kt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof kt||e instanceof kt||e===kt}static registerTech(e,n){if(kt.techs_||(kt.techs_={}),!kt.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!kt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!kt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=An(e),kt.techs_[e]=n,kt.techs_[sh(e)]=n,e!=="Tech"&&kt.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(kt.techs_&&kt.techs_[e])return kt.techs_[e];if(e=An(e),fe&&fe.videojs&&fe.videojs[e])return Dt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),fe.videojs[e]}}}Dr.names.forEach(function(t){const e=Dr[t];kt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),kt.prototype.featuresVolumeControl=!0,kt.prototype.featuresMuteControl=!0,kt.prototype.featuresFullscreenResize=!1,kt.prototype.featuresPlaybackRate=!1,kt.prototype.featuresProgressEvents=!1,kt.prototype.featuresSourceset=!1,kt.prototype.featuresTimeupdateEvents=!1,kt.prototype.featuresNativeTextTracks=!1,kt.prototype.featuresVideoFrameCallback=!1,kt.withSourceHandlers=function(t){t.registerSourceHandler=function(n,r){let a=t.sourceHandlers;a||(a=t.sourceHandlers=[]),r===void 0&&(r=a.length),a.splice(r,0,n)},t.canPlayType=function(n){const r=t.sourceHandlers||[];let a;for(let i=0;i<r.length;i++)if(a=r[i].canPlayType(n),a)return a;return""},t.selectSourceHandler=function(n,r){const a=t.sourceHandlers||[];let i;for(let o=0;o<a.length;o++)if(i=a[o].canHandleSource(n,r),i)return a[o];return null},t.canPlaySource=function(n,r){const a=t.selectSourceHandler(n,r);return a?a.canHandleSource(n,r):""},["seekable","seeking","duration"].forEach(function(n){const r=this[n];typeof r=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){let r=t.selectSourceHandler(n,this.options_);r||(t.nativeSourceHandler?r=t.nativeSourceHandler:Dt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ie.registerComponent("Tech",kt),kt.registerTech("Tech",kt),kt.defaultTechOrder_=[];const Ls={},pm={},gm={};function zAe(t,e){Ls[t]=Ls[t]||[],Ls[t].push(e)}function HAe(t,e,n){t.setTimeout(()=>Fs(e,Ls[e.type],n,t),1)}function WAe(t,e){t.forEach(n=>n.setTech&&n.setTech(e))}function KAe(t,e,n){return t.reduceRight(vx(n),e[n]())}function qAe(t,e,n,r){return e[n](t.reduce(vx(n),r))}function a9(t,e,n,r=null){const a="call"+An(n),i=t.reduce(vx(a),r),o=i===gm,s=o?null:e[n](i);return XAe(t,n,s,o),s}const GAe={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},YAe={setCurrentTime:1,setMuted:1,setVolume:1},i9={play:1,pause:1};function vx(t){return(e,n)=>e===gm?gm:n[t]?n[t](e):e}function XAe(t,e,n,r){for(let a=t.length-1;a>=0;a--){const i=t[a];i[e]&&i[e](r,n)}}function JAe(t){pm.hasOwnProperty(t.id())&&delete pm[t.id()]}function QAe(t,e){const n=pm[t.id()];let r=null;if(n==null)return r=e(t),pm[t.id()]=[[e,r]],r;for(let a=0;a<n.length;a++){const[i,o]=n[a];i===e&&(r=o)}return r===null&&(r=e(t),n.push([e,r])),r}function Fs(t={},e=[],n,r,a=[],i=!1){const[o,...s]=e;if(typeof o=="string")Fs(t,Ls[o],n,r,a,i);else if(o){const c=QAe(r,o);if(!c.setSource)return a.push(c),Fs(t,s,n,r,a,i);c.setSource(Object.assign({},t),function(u,d){if(u)return Fs(t,s,n,r,a,i);a.push(c),Fs(d,t.type===d.type?s:Ls[d.type],n,r,a,i)})}else s.length?Fs(t,s,n,r,a,i):i?n(t,a):Fs(t,Ls["*"],n,r,a,!0)}const ZAe={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},mm=function(t=""){const e=hx(t);return ZAe[e.toLowerCase()]||""},VAe=(t,e)=>{if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;const n=t.cache_.sources.filter(a=>a.src===e);if(n.length)return n[0].type;const r=t.$$("source");for(let a=0;a<r.length;a++){const i=r[a];if(i.type&&i.src&&i.src===e)return i.type}return mm(e)},o9=function(t){if(Array.isArray(t)){let e=[];t.forEach(function(n){n=o9(n),Array.isArray(n)?e=e.concat(n):Ki(n)&&e.push(n)}),t=e}else typeof t=="string"&&t.trim()?t=[l9({src:t})]:Ki(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[l9(t)]:t=[];return t};function l9(t){if(!t.type){const e=mm(t.src);e&&(t.type=e)}return t}var eNe=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const s9=em?10009:tm?461:8,Yu={codes:{play:415,pause:19,ff:417,rw:412,back:s9},names:{415:"play",19:"pause",417:"ff",412:"rw",[s9]:"back"},isEventKey(t,e){return e=e.toLowerCase(),!!(this.names[t.keyCode]&&this.names[t.keyCode]===e)},getEventName(t){if(this.names[t.keyCode])return this.names[t.keyCode];if(this.codes[t.code]){const e=this.codes[t.code];return this.names[e]}return null}},c9=5;class tNe extends Ca{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const r=n.key.substring(5).toLowerCase();this.move(r)}else if(Yu.isEventKey(n,"play")||Yu.isEventKey(n,"pause")||Yu.isEventKey(n,"ff")||Yu.isEventKey(n,"rw")){n.preventDefault();const r=Yu.getEventName(n);this.performMediaAction_(r)}else Yu.isEventKey(n,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+c9);break;case"rw":this.userSeek_(this.player_.currentTime()-c9);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let r=null;const a=this.getCurrentComponent(e.target);n&&(r=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!r||!n)&&(a&&a.name()==="CloseButton"?this.refocusComponent():(this.pause(),a&&a.el()&&(this.lastFocusedComponent_=a)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function r(a){for(const i of a)i.hasOwnProperty("el_")&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())&&n.push(i),i.hasOwnProperty("children_")&&i.children_.length>0&&r(i.children_)}return e.children_.forEach(a=>{if(a.hasOwnProperty("el_"))if(a.getIsFocusable&&a.getIsAvailableToBeFocused&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())){n.push(a);return}else a.hasOwnProperty("children_")&&a.children_.length>0?r(a.children_):a.hasOwnProperty("items")&&a.items.length>0?r(a.items):this.findSuitableDOMChild(a)&&n.push(a);if(a.name_==="ErrorDisplay"&&a.opened_){const i=a.el_.querySelector(".vjs-errors-ok-button-container");i&&i.querySelectorAll("button").forEach((s,c)=>{n.push({name:()=>"ModalButton"+(c+1),el:()=>s,getPositions:()=>{const u=s.getBoundingClientRect(),d={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},f={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:d,center:f}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>s.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(r){if(e.getIsFocusable(r)&&e.getIsAvailableToBeFocused(r))return r;for(let a=0;a<r.children.length;a++){const i=r.children[a],o=n(i);if(o)return o}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const r of this.focusableComponents)if(r.el()===n)return r}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const r=n.getPositions(),a=this.focusableComponents.filter(o=>o!==n&&this.isInDirection_(r.boundingClientRect,o.getPositions().boundingClientRect,e)),i=this.findBestCandidate_(r.center,a,e);i?this.focus(i):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,r){let a=1/0,i=null;for(const o of n){const s=o.getPositions().center,c=this.calculateDistance_(e,s,r);c<a&&(a=c,i=o)}return i}isInDirection_(e,n,r){switch(r){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,r){const a=Math.abs(e.x-n.x),i=Math.abs(e.y-n.y);let o;switch(r){case"right":case"left":o=a+i*100;break;case"up":o=i*2+a*.5;break;case"down":o=i*5+a;break;default:o=a+i}return o}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class nNe extends Ie{constructor(e,n,r){const a=rn({createEl:!1},n);if(super(e,a,r),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let i=0,o=n.playerOptions.techOrder;i<o.length;i++){const s=An(o[i]);let c=kt.getTech(s);if(s||(c=Ie.getComponent(s)),c&&c.isSupported()){e.loadTech_(s);break}}else e.src(n.playerOptions.sources)}}Ie.registerComponent("MediaLoader",nNe);class ym extends Ie{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",n={},r={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&Dt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=n.tabIndex;const a=bt(e,n,r);return this.player_.options_.experimentalSvgIcons||a.appendChild(bt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(a),a}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=bt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,Sl(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Ie.registerComponent("ClickableComponent",ym);class px extends ym{constructor(e,n){super(e,n),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return bt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(bt("picture",{className:"vjs-poster",tabIndex:-1},{},bt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Yi(this.player_.play()):this.player_.pause())}}px.prototype.crossorigin=px.prototype.crossOrigin,Ie.registerComponent("PosterImage",px);const Ha="#222",u9="#ccc",rNe={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function gx(t,e){let n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function Xi(t,e,n){try{t.style[e]=n}catch{return}}function d9(t){return t?`${t}px`:""}class aNe extends Ie{constructor(e,n,r){super(e,n,r);const a=o=>this.updateDisplay(o),i=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("texttrackchange",a),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(un(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",i),e.on("playerresize",i);const o=fe.screen.orientation||fe,s=fe.screen.orientation?"change":"orientationchange";o.addEventListener(s,i),e.on("dispose",()=>o.removeEventListener(s,i));const c=this.options_.playerOptions.tracks||[];for(let u=0;u<c.length;u++)this.player_.addRemoteTextTrack(c[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let a,i,o;for(let s=0;s<n.length;s++){const c=n[s];r&&r.enabled&&r.language&&r.language===c.language&&c.kind in e?c.kind===r.kind?o=c:o||(o=c):r&&!r.enabled?(o=null,a=null,i=null):c.default&&(c.kind==="descriptions"&&!a?a=c:c.kind in e&&!i&&(i=c))}o?o.mode="showing":i?i.mode="showing":a&&(a.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof fe.WebVTT=="function"&&fe.WebVTT.processCues(fe,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const o=[];for(let s=0;s<e.length;++s){const c=e[s];c.mode==="showing"&&o.push(c)}this.updateForTrack(o);return}let r=null,a=null,i=e.length;for(;i--;){const o=e[i];o.mode==="showing"&&(o.kind==="descriptions"?r=o:a=o)}if(a?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r)),!fe.CSS.supports("inset","10px")){const o=this.el_,s=o.querySelectorAll(".vjs-text-track-cue"),c=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;o.style="",Xi(o,"position","relative"),Xi(o,"height",u-c+"px"),Xi(o,"top","unset"),nm?Xi(o,"bottom",u+"px"):Xi(o,"bottom","0px"),s.length>0&&s.forEach(d=>{if(d.style.inset){const f=d.style.inset.split(" ");f.length===3&&Object.assign(d.style,{top:f[0],right:f[1],bottom:f[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!fe.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),r=e/n,a=this.player_.videoWidth()/this.player_.videoHeight();let i=0,o=0;Math.abs(r-a)>.1&&(r>a?i=Math.round((e-n*a)/2):o=Math.round((n-e/a)/2)),Xi(this.el_,"insetInline",d9(i)),Xi(this.el_,"insetBlock",d9(o))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),r=e.activeCues;let a=r.length;for(;a--;){const i=r[a];if(!i)continue;const o=i.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&Xi(o.firstChild,"color",gx(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Xi(o.firstChild,"backgroundColor",gx(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Xi(o,"backgroundColor",gx(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${Ha}, 2px 2px 4px ${Ha}, 2px 2px 5px ${Ha}`:n.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${Ha}, 2px 2px ${Ha}, 3px 3px ${Ha}`:n.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${u9}, 0 1px ${u9}, -1px -1px ${Ha}, 0 -1px ${Ha}`:n.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${Ha}, 0 0 4px ${Ha}, 0 0 4px ${Ha}, 0 0 4px ${Ha}`)),n.fontPercent&&n.fontPercent!==1){const s=fe.parseFloat(o.style.fontSize);o.style.fontSize=s*n.fontPercent+"px",o.style.height="auto",o.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=rNe[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof fe.WebVTT!="function"||e.every(r=>!r.activeCues))return;const n=[];for(let r=0;r<e.length;++r){const a=e[r];for(let i=0;i<a.activeCues.length;++i)n.push(a.activeCues[i])}fe.WebVTT.processCues(fe,n,this.el_);for(let r=0;r<e.length;++r){const a=e[r];for(let i=0;i<a.activeCues.length;++i){const o=a.activeCues[i].displayState;Ds(o,"vjs-text-track-cue","vjs-text-track-cue-"+(a.language?a.language:r)),a.language&&Uu(o,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}}Ie.registerComponent("TextTrackDisplay",aNe);class iNe extends Ie{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),r=bt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),a=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return a.appendChild(r),a}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Ie.registerComponent("LoadingSpinner",iNe);class Cr extends ym{createEl(e,n={},r={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),r=Object.assign({type:"button"},r);const a=bt(e,n,r);return this.player_.options_.experimentalSvgIcons||a.appendChild(bt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(a),a}addChild(e,n={}){const r=this.constructor.name;return Dt.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),Ie.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}Ie.registerComponent("Button",Cr);class f9 extends Cr{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){Yi(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const r=this.player_.getChild("controlBar"),a=r&&r.getChild("playToggle");if(!a){this.player_.tech(!0).focus();return}const i=()=>a.focus();ch(n)?n.then(i,()=>{}):this.setTimeout(i,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}f9.prototype.controlText_="Play Video",Ie.registerComponent("BigPlayButton",f9);class oNe extends Cr{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Ie.registerComponent("CloseButton",oNe);class h9 extends Cr{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),n.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Yi(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}h9.prototype.controlText_="Play",Ie.registerComponent("PlayToggle",h9);class Xu extends Ie{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],r=>this.update(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=bt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return n.appendChild(r),this.contentEl_=bt("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Ms(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,Dt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=He.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Xu.prototype.labelText_="Time",Xu.prototype.controlText_="Time",Ie.registerComponent("TimeDisplay",Xu);class mx extends Xu{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}mx.prototype.labelText_="Current Time",mx.prototype.controlText_="Current Time",Ie.registerComponent("CurrentTimeDisplay",mx);class yx extends Xu{constructor(e,n){super(e,n);const r=a=>this.updateContent(a);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}yx.prototype.labelText_="Duration",yx.prototype.controlText_="Duration",Ie.registerComponent("DurationDisplay",yx);class lNe extends Ie{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return n.appendChild(r),e.appendChild(n),e}}Ie.registerComponent("TimeDivider",lNe);class bx extends Xu{constructor(e,n){super(e,n),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(bt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}bx.prototype.labelText_="Remaining Time",bx.prototype.controlText_="Remaining Time",Ie.registerComponent("RemainingTimeDisplay",bx);class sNe extends Ie{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=bt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(bt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(He.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Ie.registerComponent("LiveDisplay",sNe);class v9 extends Cr{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=bt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}v9.prototype.controlText_="Seek to live, currently playing live",Ie.registerComponent("SeekToLive",v9);function dh(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))}var cNe=Object.freeze({__proto__:null,clamp:dh});class xx extends Ie{constructor(e,n){super(e,n),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},r={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,n,r)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!qi&&e.preventDefault(),EM(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;PM(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(dh(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=om(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,r=n&&n.enabled,a=n&&n.horizontalSeek;r?a&&e.key==="ArrowLeft"||!a&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):a&&e.key==="ArrowRight"||!a&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Ie.registerComponent("Slider",xx);const Cx=(t,e)=>dh(t/e*100,0,100).toFixed(2)+"%";class uNe extends Ie{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=bt("span",{className:"vjs-control-text"}),r=bt("span",{textContent:this.localize("Loaded")}),a=He.createTextNode(": ");return this.percentageEl_=bt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(r),n.appendChild(a),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,r=this.player_.buffered(),a=n&&n.isLive()?n.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),o=this.partEls_,s=Cx(i,a);this.percent_!==s&&(this.el_.style.width=s,Sl(this.percentageEl_,s),this.percent_=s);for(let c=0;c<r.length;c++){const u=r.start(c),d=r.end(c);let f=o[c];f||(f=this.el_.appendChild(bt()),o[c]=f),!(f.dataset.start===u&&f.dataset.end===d)&&(f.dataset.start=u,f.dataset.end=d,f.style.left=Cx(u,i),f.style.width=Cx(d-u,i))}for(let c=o.length;c>r.length;c--)this.el_.removeChild(o[c-1]);o.length=r.length})}}Ie.registerComponent("LoadProgressBar",uNe);class dNe extends Ie{constructor(e,n){super(e,n),this.update=Gi(un(this,this.update),Ua)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,r){const a=ih(this.el_),i=zu(this.player_.el()),o=e.width*n;if(!i||!a)return;let s=e.left-i.left+o,c=e.width-o+(i.right-e.right);c||(c=e.width-o,s=o);let u=a.width/2;s<u?u+=u-s:c<u&&(u=c),u<0?u=0:u>a.width&&(u=a.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(r)}write(e){Sl(this.el_,e)}updateTime(e,n,r,a){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let i;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const s=this.player_.liveTracker.liveWindow(),c=s-n*s;i=(c<1?"":"-")+Ms(c,s)}else i=Ms(r,o);this.update(e,n,i),a&&a()})}}Ie.registerComponent("TimeTooltip",dNe);class _x extends Ie{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=Gi(un(this,this.update),Ua)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const r=this.getChild("timeTooltip");if(!r)return;const a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,n,a)}}_x.prototype.options_={children:[]},!wr&&!gi&&_x.prototype.options_.children.push("timeTooltip"),Ie.registerComponent("PlayProgressBar",_x);class p9 extends Ie{constructor(e,n){super(e,n),this.update=Gi(un(this,this.update),Ua)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const r=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,r,()=>{this.el_.style.left=`${e.width*n}px`})}}p9.prototype.options_={children:["timeTooltip"]},Ie.registerComponent("MouseTimeDisplay",p9);const bm=5,g9=12;class wm extends xx{constructor(e,n){n=rn(wm.prototype.options_,n),n.children=[...n.children];const r=e.options_.disableSeekWhileScrubbingOnMobile&&(wr||gi);(!wr&&!gi||r)&&n.children.splice(1,0,"mouseTimeDisplay"),super(e,n),this.shouldDisableSeekWhileScrubbingOnMobile_=r,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=un(this,this.update),this.update=Gi(this.update_,Ua),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in He&&"visibilityState"in He&&this.on(He,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){He.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ua))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(He.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),a=this.player_.liveTracker;let i=this.player_.duration();a&&a.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==r||this.duration_!==i)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ms(r,i),Ms(i,i)],"{1} of {2}")),this.currentTime_=r,this.duration_=i),this.bar&&this.bar.update(zu(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let n;const r=this.player_.liveTracker;return r&&r.isLive()?(n=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){oh(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!oh(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r;const a=this.calculateDistance(e),i=this.player_.liveTracker;if(!i||!i.isLive())r=a*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(a>=.99){i.seekToLiveEdge();return}const o=i.seekableStart(),s=i.liveCurrentTime();if(r=o+a*i.liveWindow(),r>=s&&(r=s),r<=o&&(r=o+.1),r===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=r:this.userSeek_(r),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Yi(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+bm)}stepBack(){this.userSeek_(this.player_.currentTime()-bm)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const r=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-bm*g9)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+bm*g9)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in He&&"visibilityState"in He&&this.off(He,"visibilitychange",this.toggleVisibility_),super.dispose()}}wm.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ie.registerComponent("SeekBar",wm);class m9 extends Ie{constructor(e,n){super(e,n),this.handleMouseMove=Gi(un(this,this.handleMouseMove),Ua),this.throttledHandleMouseSeek=Gi(un(this,this.handleMouseSeek),Ua),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const r=n.getChild("playProgressBar"),a=n.getChild("mouseTimeDisplay");if(!r&&!a)return;const i=n.el(),o=ih(i);let s=om(i,e).x;s=dh(s,0,1),a&&a.update(o,s),r&&r.update(o,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Yi(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}m9.prototype.options_={children:["seekBar"]},Ie.registerComponent("ProgressControl",m9);class y9 extends Cr{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){He.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in fe?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof He.exitPictureInPicture=="function"&&super.show()}}y9.prototype.controlText_="Picture-in-Picture",Ie.registerComponent("PictureInPictureToggle",y9);class b9 extends Cr{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),He[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}b9.prototype.controlText_="Fullscreen",Ie.registerComponent("FullscreenToggle",b9);const fNe=function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class hNe extends Ie{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Ie.registerComponent("VolumeLevel",hNe);class vNe extends Ie{constructor(e,n){super(e,n),this.update=Gi(un(this,this.update),Ua)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,r,a){if(!r){const i=zu(this.el_),o=zu(this.player_.el()),s=e.width*n;if(!o||!i)return;const c=e.left-o.left+s,u=e.width-s+(o.right-e.right);let d=i.width/2;c<d?d+=d-c:u<d&&(d=u),d<0?d=0:d>i.width&&(d=i.width),this.el_.style.right=`-${d}px`}this.write(`${a}%`)}write(e){Sl(this.el_,e)}updateVolume(e,n,r,a,i){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,r,a.toFixed(0)),i&&i()})}}Ie.registerComponent("VolumeLevelTooltip",vNe);class w9 extends Ie{constructor(e,n){super(e,n),this.update=Gi(un(this,this.update),Ua)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,r){const a=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,r,a,()=>{r?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}w9.prototype.options_={children:["volumeLevelTooltip"]},Ie.registerComponent("MouseVolumeLevelDisplay",w9);class xm extends xx{constructor(e,n){super(e,n),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){oh(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const r=this.el(),a=zu(r),i=this.vertical();let o=om(r,e);o=i?o.y:o.x,o=dh(o,0,1),n.update(a,o,i)}oh(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}xm.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!wr&&!gi&&xm.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),xm.prototype.playerEvent="volumechange",Ie.registerComponent("VolumeBar",xm);class x9 extends Ie{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Lu(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),fNe(this,e),this.throttledHandleMouseMove=Gi(un(this,this.handleMouseMove),Ua),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}x9.prototype.options_={children:["volumeBar"]},Ie.registerComponent("VolumeControl",x9);const pNe=function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})};class C9 extends Cr{constructor(e,n){super(e,n),pNe(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),r=this.player_.lastVolume_();if(n===0){const a=r<.1?.1:r;this.player_.volume(a),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),wr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),am(this.el_,[0,1,2,3].reduce((r,a)=>r+`${a?" ":""}vjs-vol-${a}`,"")),Ds(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}C9.prototype.controlText_="Mute",Ie.registerComponent("MuteToggle",C9);class _9 extends Ie{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||Lu(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),xa(He,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),xr(He,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}_9.prototype.options_={children:["muteToggle","volumeControl"]},Ie.registerComponent("VolumePanel",_9);class S9 extends Cr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),r=this.player_.liveTracker,a=r&&r.isLive()?r.seekableEnd():this.player_.duration();let i;n+this.skipTime<=a?i=n+this.skipTime:i=a,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}S9.prototype.controlText_="Skip Forward",Ie.registerComponent("SkipForward",S9);class T9 extends Cr{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),r=this.player_.liveTracker,a=r&&r.isLive()&&r.seekableStart();let i;a&&n-this.skipTime<=a?i=a:n>=this.skipTime?i=n-this.skipTime:i=0,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}T9.prototype.controlText_="Skip Backward",Ie.registerComponent("SkipBackward",T9);class k9 extends Ie{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof Ie&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Ie&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=bt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),xa(n,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||He.activeElement;if(!this.children().some(r=>r.el()===n)){const r=this.menuButton_;r&&r.buttonPressed_&&n!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const r=n.filter(a=>a.el()===e.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}Ie.registerComponent("Menu",k9);class Sx extends Ie{constructor(e,n={}){super(e,n),this.menuButton_=new Cr(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=Cr.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const a=i=>this.handleClick(i);this.handleMenuKeyUp_=i=>this.handleMenuKeyUp(i),this.on(this.menuButton_,"tap",a),this.on(this.menuButton_,"click",a),this.on(this.menuButton_,"keydown",i=>this.handleKeyDown(i)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),xa(He,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",i=>this.handleMouseLeave(i)),this.on("keydown",i=>this.handleSubmenuKeyDown(i))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new k9(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=bt("li",{className:"vjs-menu-title",textContent:An(this.options_.title),tabIndex:-1}),r=new Ie(this.player_,{el:n});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Cr.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),xr(He,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),wr&&_M())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Ie.registerComponent("MenuButton",Sx);class Tx extends Sx{constructor(e,n){const r=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!r)return;const a=un(this,this.update);r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),this.player_.on("ready",a),this.player_.on("dispose",function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)})}}Ie.registerComponent("TrackButton",Tx);class fh extends ym{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,r){this.nonIconControl=!0;const a=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),r),i=bt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?a.appendChild(i):a.replaceChild(i,a.querySelector(".vjs-icon-placeholder")),a}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Ie.registerComponent("MenuItem",fh);class hh extends fh{constructor(e,n){const r=n.track,a=e.textTracks();n.label=r.label||r.language||"Unknown",n.selected=r.mode==="showing",super(e,n),this.track=r,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const i=(...s)=>{this.handleTracksChange.apply(this,s)},o=(...s)=>{this.handleSelectedLanguageChange.apply(this,s)};if(e.on(["loadstart","texttrackchange"],i),a.addEventListener("change",i),a.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],i),a.removeEventListener("change",i),a.removeEventListener("selectedlanguagechange",o)}),a.onchange===void 0){let s;this.on(["tap","click"],function(){if(typeof fe.Event!="object")try{s=new fe.Event("change")}catch{}s||(s=He.createEvent("Event"),s.initEvent("change",!0,!0)),a.dispatchEvent(s)})}this.handleTracksChange()}handleClick(e){const n=this.track,r=this.player_.textTracks();if(super.handleClick(e),!!r)for(let a=0;a<r.length;a++){const i=r[a];this.kinds.indexOf(i.kind)!==-1&&(i===n?i.mode!=="showing"&&(i.mode="showing"):i.mode!=="disabled"&&(i.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Ie.registerComponent("TextTrackMenuItem",hh);class O9 extends hh{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let r=!0;for(let a=0,i=n.length;a<i;a++){const o=n[a];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let r=!0;for(let a=0,i=n.length;a<i;a++){const o=n[a];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Ie.registerComponent("OffTextTrackMenuItem",O9);class Ju extends Tx{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=hh){let r;this.label_&&(r=`${this.label_} off`),e.push(new O9(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const a=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let i=0;i<a.length;i++){const o=a[i];if(this.kinds_.indexOf(o.kind)>-1){const s=new n(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass(`vjs-${o.kind}-menu-item`),e.push(s)}}return e}}Ie.registerComponent("TextTrackButton",Ju);class E9 extends fh{constructor(e,n){const r=n.track,a=n.cue,i=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=i&&i<a.endTime,super(e,n),this.track=r,this.cue=a}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Ie.registerComponent("ChaptersTrackMenuItem",E9);class kx extends Ju{constructor(e,n,r){super(e,n,r),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(a=>{a.selected(this.track_.activeCues[0]===a.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(An(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let r=0,a=n.length;r<a;r++){const i=n[r],o=new E9(this.player_,{track:this.track_,cue:i});e.push(o)}return e}}kx.prototype.kind_="chapters",kx.prototype.controlText_="Chapters",Ie.registerComponent("ChaptersButton",kx);class Ox extends Ju{constructor(e,n,r){super(e,n,r),this.setIcon("audio-description");const a=e.textTracks(),i=un(this,this.handleTracksChange);a.addEventListener("change",i),this.on("dispose",function(){a.removeEventListener("change",i)})}handleTracksChange(e){const n=this.player().textTracks();let r=!1;for(let a=0,i=n.length;a<i;a++){const o=n[a];if(o.kind!==this.kind_&&o.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Ox.prototype.kind_="descriptions",Ox.prototype.controlText_="Descriptions",Ie.registerComponent("DescriptionsButton",Ox);class Ex extends Ju{constructor(e,n,r){super(e,n,r),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Ex.prototype.kind_="subtitles",Ex.prototype.controlText_="Subtitles",Ie.registerComponent("SubtitlesButton",Ex);class Px extends hh{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Ie.registerComponent("CaptionSettingsMenuItem",Px);class Ix extends Ju{constructor(e,n,r){super(e,n,r),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Px(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}Ix.prototype.kind_="captions",Ix.prototype.controlText_="Captions",Ie.registerComponent("CaptionsButton",Ix);class P9 extends hh{createEl(e,n,r){const a=super.createEl(e,n,r),i=a.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",a):i.appendChild(bt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(bt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),a}}Ie.registerComponent("SubsCapsMenuItem",P9);class Ax extends Ju{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(An(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Px(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,P9),e}}Ax.prototype.kinds_=["captions","subtitles"],Ax.prototype.controlText_="Subtitles",Ie.registerComponent("SubsCapsButton",Ax);class I9 extends fh{constructor(e,n){const r=n.track,a=e.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,super(e,n),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const i=(...o)=>{this.handleTracksChange.apply(this,o)};a.addEventListener("change",i),this.on("dispose",()=>{a.removeEventListener("change",i)})}createEl(e,n,r){const a=super.createEl(e,n,r),i=a.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(i.appendChild(bt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(bt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),a}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let r=0;r<n.length;r++){const a=n[r];a!==this.track&&(a.enabled=a===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Ie.registerComponent("AudioTrackMenuItem",I9);class A9 extends Tx{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let r=0;r<n.length;r++){const a=n[r];e.push(new I9(this.player_,{track:a,selectable:!0,multiSelectable:!1}))}return e}}A9.prototype.controlText_="Audio Track",Ie.registerComponent("AudioTrackButton",A9);class Nx extends fh{constructor(e,n){const r=n.rate,a=parseFloat(r,10);n.label=r,n.selected=a===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=r,this.rate=a,this.on(e,"ratechange",i=>this.update(i))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}Nx.prototype.contentElType="button",Ie.registerComponent("PlaybackRateMenuItem",Nx);class N9 extends Sx{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=bt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let r=e.length-1;r>=0;r--)n.push(new Nx(this.player(),{rate:e[r]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}N9.prototype.controlText_="Playback Rate",Ie.registerComponent("PlaybackRateMenuButton",N9);class D9 extends Ie{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},r={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,r)}}Ie.registerComponent("Spacer",D9);class gNe extends D9{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Ie.registerComponent("CustomControlSpacer",gNe);class R9 extends Ie{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}R9.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},Ie.registerComponent("ControlBar",R9);class M9 extends Ku{constructor(e,n){super(e,n),this.on(e,"error",r=>{this.open(r)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}M9.prototype.options_=Object.assign({},Ku.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ie.registerComponent("ErrorDisplay",M9);class L9 extends Ie{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),bt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const r=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${$a()}`)+"-"+n[1].replace(/\W+/g,""),a=bt("option",{id:r,value:this.localize(n[0]),textContent:this.localize(n[1])});return a.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${r}`),a}))}}Ie.registerComponent("TextTrackSelect",L9);class Bs extends Ie{constructor(e,n={}){super(e,n);const r=bt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(r);const a=this.options_.selects;for(const i of a){const o=this.options_.selectConfigs[i],s=o.className,c=o.id.replace("%s",this.options_.id_);let u=null;const d=`vjs_select_${$a()}`;if(this.options_.type==="colors"){u=bt("span",{className:s});const h=bt("label",{id:c,className:"vjs-label",textContent:this.localize(o.label)});h.setAttribute("for",d),u.appendChild(h)}const f=new L9(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:d,labelId:c});this.addChild(f),this.options_.type==="colors"&&(u.appendChild(f.el()),this.el().appendChild(u))}}createEl(){return bt("fieldset",{className:this.options_.className})}}Ie.registerComponent("TextTrackFieldset",Bs);class F9 extends Ie{constructor(e,n={}){super(e,n);const r=this.options_.textTrackComponentid,a=new Bs(e,{id_:r,legendId:`captions-text-legend-${r}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a);const i=new Bs(e,{id_:r,legendId:`captions-background-${r}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const o=new Bs(e,{id_:r,legendId:`captions-window-${r}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return bt("div",{className:"vjs-track-settings-colors"})}}Ie.registerComponent("TextTrackSettingsColors",F9);class B9 extends Ie{constructor(e,n={}){super(e,n);const r=this.options_.textTrackComponentid,a=new Bs(e,{id_:r,legendId:`captions-font-size-${r}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a);const i=new Bs(e,{id_:r,legendId:`captions-edge-style-${r}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const o=new Bs(e,{id_:r,legendId:`captions-font-family-${r}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return bt("div",{className:"vjs-track-settings-font"})}}Ie.registerComponent("TextTrackSettingsFont",B9);class j9 extends Ie{constructor(e,n={}){super(e,n);const r=this.localize("restore all settings to the default values"),a=new Cr(e,{controlText:r,className:"vjs-default-button"});a.el().classList.remove("vjs-control","vjs-button"),a.el().textContent=this.localize("Reset"),this.addChild(a);const i=new Cr(e,{controlText:r,className:"vjs-done-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Done"),this.addChild(i)}createEl(){return bt("div",{className:"vjs-track-settings-controls"})}}Ie.registerComponent("TrackSettingsControls",j9);const Dx="vjs-text-track-settings",$9=["#000","Black"],U9=["#00F","Blue"],z9=["#0FF","Cyan"],H9=["#0F0","Green"],W9=["#F0F","Magenta"],K9=["#F00","Red"],q9=["#FFF","White"],G9=["#FF0","Yellow"],Rx=["1","Opaque"],Mx=["0.5","Semi-Transparent"],Y9=["0","Transparent"],Ol={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[$9,q9,K9,H9,U9,G9,W9,z9],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Rx,Mx,Y9],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[q9,$9,K9,H9,U9,G9,W9,z9],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:t=>t==="1.00"?null:Number(t)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Rx,Mx],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Y9,Mx,Rx],className:"vjs-window-opacity vjs-opacity"}};Ol.windowColor.options=Ol.backgroundColor.options;function X9(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function mNe(t,e){const n=t.options[t.options.selectedIndex].value;return X9(n,e)}function yNe(t,e,n){if(e){for(let r=0;r<t.options.length;r++)if(X9(t.options[r].value,n)===e){t.selectedIndex=r;break}}}class bNe extends Ku{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=bt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new F9(e,{textTrackComponentid:this.id_,selectConfigs:Ol,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const r=new B9(e,{textTrackComponentid:this.id_,selectConfigs:Ol,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(r);const a=new j9(e);this.addChild(a)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Mu(Ol,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return pM(Ol,(e,n,r)=>{const a=mNe(this.$(n.selector),n.parser);return a!==void 0&&(e[r]=a),e},{})}setValues(e){Mu(Ol,(n,r)=>{yNe(this.$(n.selector),e[r],n.parser)})}setDefaults(){Mu(Ol,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(fe.localStorage.getItem(Dx))}catch(n){Dt.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?fe.localStorage.setItem(Dx,JSON.stringify(e)):fe.localStorage.removeItem(Dx)}catch(n){Dt.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Ie.registerComponent("TextTrackSettings",bNe);class wNe extends Ie{constructor(e,n){let r=n.ResizeObserver||fe.ResizeObserver;n.ResizeObserver===null&&(r=!1);const a=rn({createEl:!r,reportTouchActivity:!1},n);super(e,a),this.ResizeObserver=n.ResizeObserver||fe.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=$M(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const i=this.debouncedHandler_;let o=this.unloadListener_=function(){xr(this,"resize",i),xr(this,"unload",o),o=null};xa(this.el_.contentWindow,"unload",o),xa(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Ie.registerComponent("ResizeManager",wNe);const xNe={trackingThreshold:20,liveTolerance:15};class CNe extends Ie{constructor(e,n){const r=rn(xNe,n,{createEl:!1});super(e,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=a=>this.handlePlay(a),this.handleFirstTimeupdate_=a=>this.handleFirstTimeupdate(a),this.handleSeeked_=a=>this.handleSeeked(a),this.seekToLiveEdge_=a=>this.seekToLiveEdge(a),this.reset_(),this.on(this.player_,"durationchange",a=>this.handleDurationchange(a)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(fe.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+r;const a=this.liveCurrentTime(),i=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-i)>this.options_.liveTolerance;(!this.timeupdateSeen_||a===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ua),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let r=e?e.length:0;for(;r--;)n.push(e.end(r));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let r=e?e.length:0;for(;r--;)n.push(e.start(r));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Ie.registerComponent("LiveTracker",CNe);class _Ne extends Ie{constructor(e,n){super(e,n),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:bt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${$a()}`}),description:bt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${$a()}`})},bt("div",{className:"vjs-title-bar"},{},gM(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(a=>{const i=this.state[a],o=this.els[a],s=r[a];lm(o),i&&Sl(o,i),n&&(n.removeAttribute(s),i&&n.setAttribute(s,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Ie.registerComponent("TitleBar",_Ne);const SNe={initialDisplay:4e3,position:[],takeFocus:!1};class TNe extends Cr{constructor(e,n){n=rn(SNe,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],r=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=bt("button",{},{type:"button",class:this.buildCSSClass()},bt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Ie.registerComponent("TransientButton",TNe);const Lx=t=>{const e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;const n=t.$$("source"),r=[];let a="";if(!n.length)return!1;for(let i=0;i<n.length;i++){const o=n[i].src;o&&r.indexOf(o)===-1&&r.push(o)}return r.length?(r.length===1&&(a=r[0]),t.triggerSourceset(a),!0):!1},kNe=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(t){const e=He.createElement(this.nodeName.toLowerCase());e.innerHTML=t;const n=He.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",fe.Element.prototype.appendChild.call(this,n),this.innerHTML}}),J9=(t,e)=>{let n={};for(let r=0;r<t.length&&(n=Object.getOwnPropertyDescriptor(t[r],e),!(n&&n.set&&n.get));r++);return n.enumerable=!0,n.configurable=!0,n},ONe=t=>J9([t.el(),fe.HTMLMediaElement.prototype,fe.Element.prototype,kNe],"innerHTML"),Q9=function(t){const e=t.el();if(e.resetSourceWatch_)return;const n={},r=ONe(t),a=i=>(...o)=>{const s=i.apply(e,o);return Lx(t),s};["append","appendChild","insertAdjacentHTML"].forEach(i=>{e[i]&&(n[i]=e[i],e[i]=a(n[i]))}),Object.defineProperty(e,"innerHTML",rn(r,{set:a(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(i=>{e[i]=n[i]}),Object.defineProperty(e,"innerHTML",r)},t.one("sourceset",e.resetSourceWatch_)},ENe=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?VM(fe.Element.prototype.getAttribute.call(this,"src")):""},set(t){return fe.Element.prototype.setAttribute.call(this,"src",t),t}}),PNe=t=>J9([t.el(),fe.HTMLMediaElement.prototype,ENe],"src"),INe=function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const n=PNe(t),r=e.setAttribute,a=e.load;Object.defineProperty(e,"src",rn(n,{set:i=>{const o=n.set.call(e,i);return t.triggerSourceset(e.src),o}})),e.setAttribute=(i,o)=>{const s=r.call(e,i,o);return/src/i.test(i)&&t.triggerSourceset(e.src),s},e.load=()=>{const i=a.call(e);return Lx(t)||(t.triggerSourceset(""),Q9(t)),i},e.currentSrc?t.triggerSourceset(e.currentSrc):Lx(t)||Q9(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=a,e.setAttribute=r,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Ze extends kt{constructor(e,n){super(e,n);const r=e.source;let a=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const i=this.el_.childNodes;let o=i.length;const s=[];for(;o--;){const c=i[o];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!a&&!this.el_.hasAttribute("crossorigin")&&vm(c.src)&&(a=!0)):s.push(c))}for(let c=0;c<s.length;c++)this.el_.removeChild(s[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&a&&Dt.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(rh||Vg)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ze.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){INe(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const r=()=>{n=[];for(let i=0;i<e.length;i++){const o=e[i];o.kind==="metadata"&&n.push({track:o,storedMode:o.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const a=()=>{for(let i=0;i<n.length;i++){const o=n[i];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",a)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",a),e.addEventListener("change",a)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",a)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(a=>{this.el()[`${r}Tracks`].removeEventListener(a,this[`${r}TracksListeners_`][a])}),this[`featuresNative${e}Tracks`]=!n,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=za[e],r=this.el()[n.getterName],a=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!r||!r.addEventListener)return;const i={change:s=>{const c={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(c),e==="text"&&this[Gu.remoteText.getterName]().trigger(c)},addtrack(s){a.addTrack(s.track)},removetrack(s){a.removeTrack(s.track)}},o=function(){const s=[];for(let c=0;c<a.length;c++){let u=!1;for(let d=0;d<r.length;d++)if(r[d]===a[c]){u=!0;break}u||s.push(a[c])}for(;s.length;)a.removeTrack(s.shift())};this[n.getterName+"Listeners_"]=i,Object.keys(i).forEach(s=>{const c=i[s];r.addEventListener(s,c),this.on("dispose",u=>r.removeEventListener(s,c))}),this.on("loadstart",o),this.on("dispose",s=>this.off("loadstart",o))}proxyNativeTracks_(){za.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),Ze.disposeMediaElement(e),e=r}else{e=He.createElement("video");const r=this.options_.tag&&Tl(this.options_.tag),a=rn({},r);(!rh||this.options_.nativeControlsForTouch!==!0)&&delete a.controls,kM(e,Object.assign(a,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Uu(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let r=0;r<n.length;r++){const a=n[r],i=this.options_[a];typeof i<"u"&&(i?Uu(e,a,a):im(e,a),e[a]=i)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let r=!1;const a=function(){r=!0};this.on("loadstart",a);const i=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",i),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",i),r||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&rm?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){Dt(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&gi&&qi&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Yi(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,n){if(!e)return Dt.error("Invalid source URL."),!1;const r={src:e};n&&(r.type=n);const a=bt("source",{},r);return this.el_.appendChild(a),!0}removeSourceElement(e){if(!e)return Dt.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const r of n)if(r.src===e)return this.el_.removeChild(r),!0;return Dt.warn(`No matching source element found with src: ${e}`),!1}reset(){Ze.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,r):super.addTextTrack(e,n,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=He.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const r=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let r=n.length;for(;r--;)(e===n[r]||e===n[r].track)&&this.el().removeChild(n[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),fe.performance&&(e.creationTime=fe.performance.now()),e}}Yg(Ze,"TEST_VID",function(){if(!ju())return;const t=He.createElement("video"),e=He.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}),Ze.isSupported=function(){try{Ze.TEST_VID.volume=.5}catch{return!1}return!!(Ze.TEST_VID&&Ze.TEST_VID.canPlayType)},Ze.canPlayType=function(t){return Ze.TEST_VID.canPlayType(t)},Ze.canPlaySource=function(t,e){return Ze.canPlayType(t.type)},Ze.canControlVolume=function(){try{const t=Ze.TEST_VID.volume;Ze.TEST_VID.volume=t/2+.1;const e=t!==Ze.TEST_VID.volume;return e&&wr?(fe.setTimeout(()=>{Ze&&Ze.prototype&&(Ze.prototype.featuresVolumeControl=t!==Ze.TEST_VID.volume)}),!1):e}catch{return!1}},Ze.canMuteVolume=function(){try{const t=Ze.TEST_VID.muted;return Ze.TEST_VID.muted=!t,Ze.TEST_VID.muted?Uu(Ze.TEST_VID,"muted","muted"):im(Ze.TEST_VID,"muted","muted"),t!==Ze.TEST_VID.muted}catch{return!1}},Ze.canControlPlaybackRate=function(){if(gi&&qi&&Xg<58)return!1;try{const t=Ze.TEST_VID.playbackRate;return Ze.TEST_VID.playbackRate=t/2+.1,t!==Ze.TEST_VID.playbackRate}catch{return!1}},Ze.canOverrideAttributes=function(){try{const t=()=>{};Object.defineProperty(He.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(He.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(He.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(He.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0},Ze.supportsNativeTextTracks=function(){return rm||wr&&qi},Ze.supportsNativeVideoTracks=function(){return!!(Ze.TEST_VID&&Ze.TEST_VID.videoTracks)},Ze.supportsNativeAudioTracks=function(){return!!(Ze.TEST_VID&&Ze.TEST_VID.audioTracks)},Ze.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([t,e]){Yg(Ze.prototype,t,()=>Ze[e](),!0)}),Ze.prototype.featuresVolumeControl=Ze.canControlVolume(),Ze.prototype.movingMediaElementInDOM=!wr,Ze.prototype.featuresFullscreenResize=!0,Ze.prototype.featuresProgressEvents=!0,Ze.prototype.featuresTimeupdateEvents=!0,Ze.prototype.featuresVideoFrameCallback=!!(Ze.TEST_VID&&Ze.TEST_VID.requestVideoFrameCallback),Ze.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}},Ze.resetMediaElement=function(t){if(!t)return;const e=t.querySelectorAll("source");let n=e.length;for(;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ze.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ze.prototype["set"+An(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Ze.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Ze.prototype["set"+An(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Ze.prototype[t]=function(){return this.el_[t]()}}),kt.withSourceHandlers(Ze),Ze.nativeSourceHandler={},Ze.nativeSourceHandler.canPlayType=function(t){try{return Ze.TEST_VID.canPlayType(t)}catch{return""}},Ze.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ze.nativeSourceHandler.canPlayType(t.type);if(t.src){const n=hx(t.src);return Ze.nativeSourceHandler.canPlayType(`video/${n}`)}return""},Ze.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Ze.nativeSourceHandler.dispose=function(){},Ze.registerSourceHandler(Ze.nativeSourceHandler),kt.registerTech("Html5",Ze);const Z9=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Fx={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Bx=["tiny","xsmall","small","medium","large","xlarge","huge"],Cm={};Bx.forEach(t=>{const e=t.charAt(0)==="x"?`x-${t.substring(1)}`:t;Cm[t]=`vjs-layout-${e}`});const ANe={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class vn extends Ie{constructor(e,n,r){if(e.id=e.id||n.id||`vjs_video_${$a()}`,n=Object.assign(vn.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const o=e.closest("[lang]");o&&(n.language=o.getAttribute("lang"))}if(super(null,n,r),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=hM(this.id_),this.fsApi_=qg,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Tl(e),this.language(this.options_.language),n.languages){const o={};Object.getOwnPropertyNames(n.languages).forEach(function(s){o[s.toLowerCase()]=n.languages[s]}),this.languages_=o}else this.languages_=vn.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),ax(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(xa(He,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const a=rn(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(o=>{this[o](n.plugins[o])}),n.debug&&this.debug(!0),this.options_.playerOptions=a,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const s=new fe.DOMParser().parseFromString(eNe,"image/svg+xml");if(s.querySelector("parsererror"))Dt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=s.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new tNe(this),this.addClass("vjs-spatial-navigation-enabled")),rh&&this.addClass("vjs-touch-enabled"),wr||this.addClass("vjs-workinghover"),vn.players[this.id_]=this;const i=Kw.split(".")[0];this.addClass(`vjs-v${i}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),xr(He,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),xr(He,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),vn.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),JAe(this),Dr.names.forEach(e=>{const n=Dr[e],r=this[n.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const a=this.tag.tagName.toLowerCase()==="video-js";r?n=this.el_=e.parentNode:a||(n=this.el_=super.createEl("div"));const i=Tl(e);if(a){for(n=this.el_=e,e=this.tag=He.createElement("video");n.children.length;)e.appendChild(n.firstChild);ah(n,"video-js")||Ds(n,"video-js"),n.appendChild(e),r=this.playerElIngest_=n,Object.keys(n).forEach(c=>{try{e[c]=n[c]}catch{}})}e.setAttribute("tabindex","-1"),i.tabindex="-1",qi&&Qg&&(e.setAttribute("role","application"),i.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach(function(c){a&&c==="class"||n.setAttribute(c,i[c]),a&&e.setAttribute(c,i[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(c=>xM[c]).map(c=>"vjs-device-"+c.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),fe.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=FM("vjs-styles-dimensions");const c=kl(".vjs-styles-defaults"),u=kl("head");u.insertBefore(this.styleEl_,c?c.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const s=e.getElementsByTagName("a");for(let c=0;c<s.length;c++){const u=s.item(c);Ds(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(n,e),Xw(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Dt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const r=e+"_";if(n===void 0)return this[r]||0;if(n===""||n==="auto"){this[r]=void 0,this.updateStyleEl_();return}const a=parseFloat(n);if(isNaN(a)){Dt.error(`Improper value "${n}" supplied for for ${e}`);return}this[r]=a,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,zo(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),EAe(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(fe.VIDEOJS_NO_DYNAMIC_STYLE===!0){const s=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(s>=0&&(u.width=s),c>=0&&(u.height=c));return}let e,n,r,a;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";const i=r.split(":"),o=i[1]/i[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*o,/^[^a-zA-Z]/.test(this.id())?a="dimensions-"+this.id():a=this.id()+"-dimensions",this.addClass(a),BM(this.styleEl_,`
      .${a} {
        width: ${e}px;
        height: ${n}px;
      }

      .${a}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const r=An(e),a=e.charAt(0).toLowerCase()+e.slice(1);r!=="Html5"&&this.tag&&(kt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let i=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(i=!1);const o={source:n,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${a}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Dr.names.forEach(c=>{const u=Dr[c];o[u.getterName]=this[u.privateName]}),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[a]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const s=kt.getTech(e);if(!s)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new s(o),this.tech_.ready(un(this,this.handleTechReady_),!0),JM.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Z9.forEach(c=>{this.on(this.tech_,c,u=>this[`handleTech${An(c)}_`](u))}),Object.keys(Fx).forEach(c=>{this.on(this.tech_,c,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Fx[c]}_`].bind(this),event:u});return}this[`handleTech${Fx[c]}_`](u)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,u)=>this.handleTechFullscreenChange_(c,u)),this.on(this.tech_,"fullscreenerror",(c,u)=>this.handleTechFullscreenError_(c,u)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&Xw(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Dr.names.forEach(e=>{const n=Dr[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=JM.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Dt.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Kw}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const a=this.muted();this.muted(!0);const i=()=>{this.muted(a)};this.playTerminatedQueue_.push(i);const o=this.play();if(ch(o))return o.catch(s=>{throw i(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${s||""}`)})};let r;if(e==="any"&&!this.muted()?(r=this.play(),ch(r)&&(r=r.catch(n))):e==="muted"&&!this.muted()?r=n():r=this.play(),!!ch(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,r="";typeof n!="string"&&(n=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!r&&(r=VAe(this,n)),this.cache_.source=rn({},e,{src:n,type:r});const a=this.cache_.sources.filter(c=>c.src&&c.src===n),i=[],o=this.$$("source"),s=[];for(let c=0;c<o.length;c++){const u=Tl(o[c]);i.push(u),u.src&&u.src===n&&s.push(u.src)}s.length&&!a.length?this.cache_.sources=i:a.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=i=>this.updateSourceCaches_(i);const r=this.currentSource().src,a=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(a)&&(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==r)&&(n=()=>{}),n(a),e.src||this.tech_.any(["sourceset","loadstart"],i=>{if(i.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Yi(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!He.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const r=this.el();let a=He[this.fsApi_.fullscreenElement]===r;!a&&r.matches&&(a=r.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(a)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in YAe)return qAe(this.middleware_,this.tech_,e,n);if(e in i9)return a9(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(r){throw Dt(r),r}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in GAe)return KAe(this.middleware_,this.tech_,e);if(e in i9)return a9(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(Dt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(Dt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(Dt(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Yi){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!(rm||wr);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&r&&this.load();return}const a=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),a===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||mi(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=mi(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=mi(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return XM(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let r=e.end(e.length-1);return r>n&&(r=n),r}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((r,a)=>{function i(){n.off("fullscreenerror",s),n.off("fullscreenchange",o)}function o(){i(),r()}function s(u,d){i(),a(d)}n.one("fullscreenchange",o),n.one("fullscreenerror",s);const c=n.requestFullscreenHelper_(e);c&&(c.then(i,i),c.then(r,a))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](n);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,r)=>{function a(){e.off("fullscreenerror",o),e.off("fullscreenchange",i)}function i(){a(),n()}function o(c,u){a(),r(u)}e.one("fullscreenchange",i),e.one("fullscreenerror",o);const s=e.exitFullscreenHelper_();s&&(s.then(a,a),s.then(n,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=He[this.fsApi_.exitFullscreen]();return e&&Yi(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=He.documentElement.style.overflow,xa(He,"keydown",this.boundFullWindowOnEscKey_),He.documentElement.style.overflow="hidden",Ds(He.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,xr(He,"keydown",this.boundFullWindowOnEscKey_),He.documentElement.style.overflow=this.docOrigOverflow,am(He.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&fe.documentPictureInPicture){const e=He.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(bt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),fe.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(RM(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",r=>{const a=r.target.querySelector(".video-js");e.parentNode.replaceChild(a,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in He&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(fe.documentPictureInPicture&&fe.documentPictureInPicture.window)return fe.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in He)return He.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(a=>{const i=a.tagName.toLowerCase();if(a.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return i==="input"?o.indexOf(a.type)===-1:["textarea"].indexOf(i)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=o=>e.key.toLowerCase()==="f",muteKey:a=o=>e.key.toLowerCase()==="m",playPauseKey:i=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const o=Ie.getComponent("FullscreenToggle");He[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ie.getComponent("MuteToggle").prototype.handleClick.call(this,e)):i.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ie.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let r=0,a=this.options_.techOrder;r<a.length;r++){const i=a[r];let o=kt.getTech(i);if(o||(o=Ie.getComponent(i)),!o){Dt.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(n=o.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(s=>[s,kt.getTech(s)]).filter(([s,c])=>c?c.isSupported():(Dt.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(s,c,u){let d;return s.some(f=>c.some(h=>{if(d=u(f,h),d)return!0})),d};let a;const i=s=>(c,u)=>s(u,c),o=([s,c],u)=>{if(c.canPlaySource(u,this.options_[s.toLowerCase()]))return{source:u,tech:s}};return this.options_.sourceOrder?a=r(e,n,i(o)):a=r(n,e,o),a||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=o9(e);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),HAe(this,r[0],(a,i)=>{if(this.middleware_=i,n||(this.cache_.sources=r),this.updateSourceCaches_(a),this.src_(a)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}WAe(i,this.tech_)}),r.length>1){const a=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},i=()=>{this.off("error",a)};this.one("error",a),this.one("playing",i),this.resetRetryOnError_=()=>{this.off("error",a),this.off("playing",i)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?WM(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,n){return this.tech_?this.tech_.addSourceElement(e,n):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Yi(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),zo(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:r,remainingTimeDisplay:a}=this.controlBar||{},{seekBar:i}=r||{};e&&e.updateContent(),n&&n.updateContent(),a&&a.updateContent(),i&&(i.update(),i.loadProgressBar&&i.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(Cl("beforeerror").forEach(n=>{const r=n(this,e);if(!(Ki(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=r}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new kn(e),this.addClass("vjs-error"),Dt.error(`(CODE:${this.error_.code} ${kn.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Cl("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,r;const a=un(this,this.reportUserActivity),i=function(f){(f.screenX!==n||f.screenY!==r)&&(n=f.screenX,r=f.screenY,a())},o=function(){a(),this.clearInterval(e),e=this.setInterval(a,250)},s=function(f){a(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",s),this.on("mouseleave",s);const c=this.getChild("controlBar");c&&!wr&&!gi&&(c.on("mouseenter",function(f){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(f){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",a),this.on("keyup",a);let u;const d=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const f=this.options_.inactivityTimeout;f<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},f))};this.setInterval(d,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();e.forEach(a=>{a!==n&&a.el_&&!a.hasClass("vjs-hidden")&&(a.hide(),this.audioOnlyCache_.hiddenChildren.push(a))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=r,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,r){if(this.tech_)return this.tech_.addTextTrack(e,n,r)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),zo(this)&&this.trigger("languagechange"))}languages(){return rn(vn.prototype.options_.languages,this.languages_)}toJSON(){const e=rn(this.options_),n=e.tracks;e.tracks=[];for(let r=0;r<n.length;r++){let a=n[r];a=rn(a),a.player=void 0,e.tracks[r]=a}return e}createModal(e,n){n=n||{},n.content=e||"";const r=new Ku(this,n);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let r=0;r<Bx.length;r++){const a=Bx[r],i=this.breakpoints_[a];if(n<=i){if(e===a)return;e&&this.removeClass(Cm[e]),this.addClass(Cm[a]),this.breakpoint_=a;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},ANe,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Cm[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const r=this.crossOrigin();this.reset(),this.cache_.media=rn(e);const{artist:a,artwork:i,description:o,poster:s,src:c,textTracks:u,title:d}=this.cache_.media;!i&&s&&(this.cache_.media.artwork=[{src:s,type:mm(s)}]),r&&this.crossOrigin(r),c&&this.src(c),s&&this.poster(s),Array.isArray(u)&&u.forEach(f=>this.addRemoteTextTrack(f,!1)),this.titleBar&&this.titleBar.update({title:d,description:o||a||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src})),a={src:n,textTracks:r};return e&&(a.poster=e,a.artwork=[{src:a.poster,type:mm(a.poster)}]),a}return rn(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},r=Tl(e),a=r["data-setup"];if(ah(e,"vjs-fill")&&(r.fill=!0),ah(e,"vjs-fluid")&&(r.fluid=!0),a!==null)try{Object.assign(r,JSON.parse(a||"{}"))}catch(i){Dt.error("data-setup",i)}if(Object.assign(n,r),e.hasChildNodes()){const i=e.childNodes;for(let o=0,s=i.length;o<s;o++){const c=i[o],u=c.nodeName.toLowerCase();u==="source"?n.sources.push(Tl(c)):u==="track"&&n.tracks.push(Tl(c))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Dr.names.forEach(function(t){const e=Dr[t];vn.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),vn.prototype.crossorigin=vn.prototype.crossOrigin,vn.players={};const vh=fe.navigator;vn.prototype.options_={techOrder:kt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:vh&&(vh.languages&&vh.languages[0]||vh.userLanguage||vh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1},Z9.forEach(function(t){vn.prototype[`handleTech${An(t)}_`]=function(){return this.trigger(t)}}),Ie.registerComponent("Player",vn);const _m="plugin",Qu="activePlugins_",Zu={},Sm=t=>Zu.hasOwnProperty(t),Tm=t=>Sm(t)?Zu[t]:void 0,V9=(t,e)=>{t[Qu]=t[Qu]||{},t[Qu][e]=!0},km=(t,e,n)=>{const r=(n?"before":"")+"pluginsetup";t.trigger(r,e),t.trigger(r+":"+e.name,e)},NNe=function(t,e){const n=function(){km(this,{name:t,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return V9(this,t),km(this,{name:t,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){n[r]=e[r]}),n},eL=(t,e)=>(e.prototype.name=t,function(...n){km(this,{name:t,plugin:e,instance:null},!0);const r=new e(this,...n);return this[t]=()=>r,km(this,r.getEventHash()),r});class na{constructor(e){if(this.constructor===na)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),ax(this),delete this.trigger,HM(this,this.constructor.defaultState),V9(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return Wu(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[Qu][e]=!1,this.player=this.state=null,n[e]=eL(e,Zu[e])}static isBasic(e){const n=typeof e=="string"?Tm(e):e;return typeof n=="function"&&!na.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Sm(e))Dt.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(vn.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return Zu[e]=n,e!==_m&&(na.isBasic(n)?vn.prototype[e]=NNe(e,n):vn.prototype[e]=eL(e,n)),n}static deregisterPlugin(e){if(e===_m)throw new Error("Cannot de-register base plugin.");Sm(e)&&(delete Zu[e],delete vn.prototype[e])}static getPlugins(e=Object.keys(Zu)){let n;return e.forEach(r=>{const a=Tm(r);a&&(n=n||{},n[r]=a)}),n}static getPluginVersion(e){const n=Tm(e);return n&&n.VERSION||""}}na.getPlugin=Tm,na.BASE_PLUGIN_NAME=_m,na.registerPlugin(_m,na),vn.prototype.usingPlugin=function(t){return!!this[Qu]&&this[Qu][t]===!0},vn.prototype.hasPlugin=function(t){return!!Sm(t)};function DNe(t,e){let n=!1;return function(...r){return n||Dt.warn(t),n=!0,e.apply(this,r)}}function yi(t,e,n,r){return DNe(`${e} is deprecated and will be removed in ${t}.0; please use ${n} instead.`,r)}var RNe={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const tL=t=>t.indexOf("#")===0?t.slice(1):t;function xe(t,e,n){let r=xe.getPlayer(t);if(r)return e&&Dt.warn(`Player "${t}" is already initialised. Options will not be applied.`),n&&r.ready(n),r;const a=typeof t=="string"?kl("#"+tL(t)):t;if(!$u(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in a?a.getRootNode()instanceof fe.ShadowRoot:!1)?a.getRootNode():a.ownerDocument.body;(!a.ownerDocument.defaultView||!o.contains(a))&&Dt.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player")?a.parentNode:a).cloneNode(!0)),Cl("beforesetup").forEach(c=>{const u=c(a,rn(e));if(!Ki(u)||Array.isArray(u)){Dt.error("please return an object in beforesetup hooks");return}e=rn(e,u)});const s=Ie.getComponent("Player");return r=new s(a,e,n),Cl("setup").forEach(c=>c(r)),r}if(xe.hooks_=Uo,xe.hooks=Cl,xe.hook=pAe,xe.hookOnce=gAe,xe.removeHook=dM,fe.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&ju()){let t=kl(".vjs-styles-defaults");if(!t){t=FM("vjs-styles-defaults");const e=kl("head");e&&e.insertBefore(t,e.firstChild),BM(t,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Zw(1,xe),xe.VERSION=Kw,xe.options=vn.prototype.options_,xe.getPlayers=()=>vn.players,xe.getPlayer=t=>{const e=vn.players;let n;if(typeof t=="string"){const r=tL(t),a=e[r];if(a)return a;n=kl("#"+r)}else n=t;if($u(n)){const{player:r,playerId:a}=n;if(r||e[a])return r||e[a]}},xe.getAllPlayers=()=>Object.keys(vn.players).map(t=>vn.players[t]).filter(Boolean),xe.players=vn.players,xe.getComponent=Ie.getComponent,xe.registerComponent=(t,e)=>(kt.isTech(e)&&Dt.warn(`The ${t} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Ie.registerComponent.call(Ie,t,e)),xe.getTech=kt.getTech,xe.registerTech=kt.registerTech,xe.use=zAe,Object.defineProperty(xe,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(xe.middleware,"TERMINATOR",{value:gm,writeable:!1,enumerable:!0}),xe.browser=xM,xe.obj=bAe,xe.mergeOptions=yi(9,"videojs.mergeOptions","videojs.obj.merge",rn),xe.defineLazyProperty=yi(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Yg),xe.bind=yi(9,"videojs.bind","native Function.prototype.bind",un),xe.registerPlugin=na.registerPlugin,xe.deregisterPlugin=na.deregisterPlugin,xe.plugin=(t,e)=>(Dt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),na.registerPlugin(t,e)),xe.getPlugins=na.getPlugins,xe.getPlugin=na.getPlugin,xe.getPluginVersion=na.getPluginVersion,xe.addLanguage=function(t,e){return t=(""+t).toLowerCase(),xe.options.languages=rn(xe.options.languages,{[t]:e}),xe.options.languages[t]},xe.log=Dt,xe.createLogger=hM,xe.time=DAe,xe.createTimeRange=yi(9,"videojs.createTimeRange","videojs.time.createTimeRanges",mi),xe.createTimeRanges=yi(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",mi),xe.formatTime=yi(9,"videojs.formatTime","videojs.time.formatTime",Ms),xe.setFormatTime=yi(9,"videojs.setFormatTime","videojs.time.setFormatTime",GM),xe.resetFormatTime=yi(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",YM),xe.parseUrl=yi(9,"videojs.parseUrl","videojs.url.parseUrl",fx),xe.isCrossOrigin=yi(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",vm),xe.EventTarget=Ca,xe.any=tx,xe.on=xa,xe.one=um,xe.off=xr,xe.trigger=Wu,xe.xhr=j6,xe.TextTrack=uh,xe.AudioTrack=n9,xe.VideoTrack=r9,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(t=>{xe[t]=function(){return Dt.warn(`videojs.${t}() is deprecated; use videojs.dom.${t}() instead`),MM[t].apply(null,arguments)}}),xe.computedStyle=yi(9,"videojs.computedStyle","videojs.dom.computedStyle",Hu),xe.dom=MM,xe.fn=OAe,xe.num=cNe,xe.str=AAe,xe.url=$Ae,xe.Error=RNe;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class MNe{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(r){n.enabled_(r)}}),n}}class Om extends xe.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const r=this.levels_.length;return n=new MNe(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let r=0,a=this.length;r<a;r++)if(this[r]===e){n=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,r=this.length;n<r;n++){const a=this[n];if(a.id===e)return a}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Om.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const t in Om.prototype.allowedEvents_)Om.prototype["on"+t]=null;var nL="4.1.0";const LNe=function(t,e){const n=t.qualityLevels,r=new Om,a=function(){r.dispose(),t.qualityLevels=n,t.off("dispose",a)};return t.on("dispose",a),t.qualityLevels=()=>r,t.qualityLevels.VERSION=nL,r},rL=function(t){return LNe(this,xe.obj.merge({},t))};xe.registerPlugin("qualityLevels",rL),rL.VERSION=nL;/*! @name @videojs/http-streaming @version 3.16.2 @license Apache-2.0 */const ra=Ng,Em=(t,e)=>e&&e.responseURL&&t!==e.responseURL?e.responseURL:t,Wa=t=>xe.log.debug?xe.log.debug.bind(xe,"VHS:",`${t} >`):function(){};function Zt(...t){const e=xe.obj||xe;return(e.merge||e.mergeOptions).apply(e,t)}function nr(...t){const e=xe.time||xe;return(e.createTimeRanges||e.createTimeRanges).apply(e,t)}function FNe(t){if(t.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<t.length;n++){const r=t.start(n),a=t.end(n);e+=`${r} --> ${a}. Duration (${a-r})
`}return e}const Ji=1/30,Qi=Ji*3,aL=function(t,e){const n=[];let r;if(t&&t.length)for(r=0;r<t.length;r++)e(t.start(r),t.end(r))&&n.push([t.start(r),t.end(r)]);return nr(n)},Vu=function(t,e){return aL(t,function(n,r){return n-Qi<=e&&r+Qi>=e})},Pm=function(t,e){return aL(t,function(n){return n-Ji>=e})},BNe=function(t){if(t.length<2)return nr();const e=[];for(let n=1;n<t.length;n++){const r=t.end(n-1),a=t.start(n);e.push([r,a])}return nr(e)},jNe=function(t,e){let n=null,r=null,a=0;const i=[],o=[];if(!t||!t.length||!e||!e.length)return nr();let s=t.length;for(;s--;)i.push({time:t.start(s),type:"start"}),i.push({time:t.end(s),type:"end"});for(s=e.length;s--;)i.push({time:e.start(s),type:"start"}),i.push({time:e.end(s),type:"end"});for(i.sort(function(c,u){return c.time-u.time}),s=0;s<i.length;s++)i[s].type==="start"?(a++,a===2&&(n=i[s].time)):i[s].type==="end"&&(a--,a===1&&(r=i[s].time)),n!==null&&r!==null&&(o.push([n,r]),n=null,r=null);return nr(o)},iL=t=>{const e=[];if(!t||!t.length)return"";for(let n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},$Ne=function(t,e,n=1){return((t.length?t.end(t.length-1):0)-e)/n},js=t=>{const e=[];for(let n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},UNe=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1},jx=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},$x=function(t,e){let n=0;if(!t||!t.length)return n;for(let r=0;r<t.length;r++){const a=t.start(r),i=t.end(r);if(!(e>i)){if(e>a&&e<=i){n+=i-e;continue}n+=i-a}}return n},Ux=(t,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(r){n+=r.duration}),(e.preloadHints||[]).forEach(function(r){r.type==="PART"&&(n+=t.partTargetDuration)}),n},zx=t=>(t.segments||[]).reduce((e,n,r)=>(n.parts?n.parts.forEach(function(a,i){e.push({duration:a.duration,segmentIndex:r,partIndex:i,part:a,segment:n})}):e.push({duration:n.duration,segmentIndex:r,partIndex:null,segment:n,part:null}),e),[]),oL=t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},lL=({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:n}=t;let r=(n||[]).reduce((a,i)=>a+(i.type==="PART"?1:0),0);return r+=e&&e.length?e.length:0,r},sL=(t,e)=>{if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;const n=oL(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},zNe=function(t,e){let n=0,r=e-t.mediaSequence,a=t.segments[r];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;r--;){if(a=t.segments[r],typeof a.end<"u")return{result:n+a.end,precise:!0};if(n+=Ux(t,a),typeof a.start<"u")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},HNe=function(t,e){let n=0,r,a=e-t.mediaSequence;for(;a<t.segments.length;a++){if(r=t.segments[a],typeof r.start<"u")return{result:r.start-n,precise:!0};if(n+=Ux(t,r),typeof r.end<"u")return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},cL=function(t,e,n){if(typeof e>"u"&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;const r=zNe(t,e);if(r.precise)return r.result;const a=HNe(t,e);return a.precise?a.result:r.result+n},uL=function(t,e,n){if(!t)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return fe.Infinity}return cL(t,e,n)},ph=function({defaultDuration:t,durationList:e,startIndex:n,endIndex:r}){let a=0;if(n>r&&([n,r]=[r,n]),n<0){for(let i=n;i<Math.min(0,r);i++)a+=t;n=0}for(let i=n;i<r;i++)a+=e[i].duration;return a},dL=function(t,e,n,r){if(!t||!t.segments)return null;if(t.endList)return uL(t);if(e===null)return null;e=e||0;let a=cL(t,t.mediaSequence+t.segments.length,e);return n&&(r=typeof r=="number"?r:sL(null,t),a-=r),Math.max(0,a)},WNe=function(t,e,n){const a=e||0;let i=dL(t,e,!0,n);return i===null?nr():(i<a&&(i=a),nr(a,i))},KNe=function({playlist:t,currentTime:e,startingSegmentIndex:n,startingPartIndex:r,startTime:a,exactManifestTimings:i}){let o=e-a;const s=zx(t);let c=0;for(let u=0;u<s.length;u++){const d=s[u];if(n===d.segmentIndex&&!(typeof r=="number"&&typeof d.partIndex=="number"&&r!==d.partIndex)){c=u;break}}if(o<0){if(c>0)for(let u=c-1;u>=0;u--){const d=s[u];if(o+=d.duration,i){if(o<0)continue}else if(o+Ji<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:a-ph({defaultDuration:t.targetDuration,durationList:s,startIndex:c,endIndex:u})}}return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:e}}if(c<0){for(let u=c;u<0;u++)if(o-=t.targetDuration,o<0)return{partIndex:s[0]&&s[0].partIndex||null,segmentIndex:s[0]&&s[0].segmentIndex||0,startTime:e};c=0}for(let u=c;u<s.length;u++){const d=s[u];o-=d.duration;const f=d.duration>Ji,h=o===0,v=f&&o+Ji>=0;if(!((h||v)&&u!==s.length-1)){if(i){if(o>0)continue}else if(o-Ji>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:a+ph({defaultDuration:t.targetDuration,durationList:s,startIndex:c,endIndex:u})}}}return{segmentIndex:s[s.length-1].segmentIndex,partIndex:s[s.length-1].partIndex,startTime:e}},fL=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Hx=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Im=function(t){const e=fL(t);return!t.disabled&&!e},qNe=function(t){return t.disabled},GNe=function(t){for(let e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hL=function(t,e){return e.attributes&&e.attributes[t]},YNe=function(t,e,n,r=0){return hL("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-r*8)/e:NaN},Wx=(t,e)=>{if(t.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(r=>Im(r)?(r.attributes.BANDWIDTH||0)<n:!1).length===0},Kx=(t,e)=>!t&&!e||!t&&e||t&&!e?!1:!!(t===e||t.id&&e.id&&t.id===e.id||t.resolvedUri&&e.resolvedUri&&t.resolvedUri===e.resolvedUri||t.uri&&e.uri&&t.uri===e.uri),vL=function(t,e){const n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let r=!1;for(const a in n){for(const i in n[a])if(r=e(n[a][i]),r)break;if(r)break}return!!r},gh=t=>{if(!t||!t.playlists||!t.playlists.length)return vL(t,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<t.playlists.length;e++){const n=t.playlists[e],r=n.attributes&&n.attributes.CODECS;if(!(r&&r.split(",").every(i=>V6(i))||vL(t,i=>Kx(n,i))))return!1}return!0};var aa={liveEdgeDelay:sL,duration:uL,seekable:WNe,getMediaInfoForTime:KNe,isEnabled:Im,isDisabled:qNe,isExcluded:fL,isIncompatible:Hx,playlistEnd:dL,isAes:GNe,hasAttribute:hL,estimateSegmentRequestTime:YNe,isLowestEnabledRendition:Wx,isAudioOnly:gh,playlistMatch:Kx,segmentDurationWithParts:Ux};const{log:pL}=xe,ed=(t,e)=>`${t}-${e}`,gL=(t,e,n)=>`placeholder-uri-${t}-${e}-${n}`,XNe=({onwarn:t,oninfo:e,manifestString:n,customTagParsers:r=[],customTagMappers:a=[],llhls:i})=>{const o=new hPe;t&&o.on("warn",t),e&&o.on("info",e),r.forEach(u=>o.addParser(u)),a.forEach(u=>o.addTagMapper(u)),o.push(n),o.end();const s=o.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){s.hasOwnProperty(u)&&delete s[u]}),s.segments&&s.segments.forEach(function(u){["parts","preloadHints"].forEach(function(d){u.hasOwnProperty(d)&&delete u[d]})})),!s.targetDuration){let u=10;s.segments&&s.segments.length&&(u=s.segments.reduce((d,f)=>Math.max(d,f.duration),0)),t&&t({message:`manifest has no targetDuration defaulting to ${u}`}),s.targetDuration=u}const c=oL(s);if(c.length&&!s.partTargetDuration){const u=c.reduce((d,f)=>Math.max(d,f.duration),0);t&&(t({message:`manifest has no partTargetDuration defaulting to ${u}`}),pL.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),s.partTargetDuration=u}return s},td=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(t.mediaGroups[n])for(const r in t.mediaGroups[n])for(const a in t.mediaGroups[n][r]){const i=t.mediaGroups[n][r][a];e(i,n,r,a)}})},mL=({playlist:t,uri:e,id:n})=>{t.id=n,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},JNe=t=>{let e=t.playlists.length;for(;e--;){const n=t.playlists[e];mL({playlist:n,id:ed(e,n.uri)}),n.resolvedUri=ra(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||pL.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},QNe=t=>{td(t,e=>{e.uri&&(e.resolvedUri=ra(t.uri,e.uri))})},ZNe=(t,e)=>{const n=ed(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:fe.location.href,resolvedUri:fe.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[e]=r.playlists[0],r},yL=(t,e,n=gL)=>{t.uri=e;for(let a=0;a<t.playlists.length;a++)if(!t.playlists[a].uri){const i=`placeholder-uri-${a}`;t.playlists[a].uri=i}const r=gh(t);td(t,(a,i,o,s)=>{if(!a.playlists||!a.playlists.length){if(r&&i==="AUDIO"&&!a.uri)for(let c=0;c<t.playlists.length;c++){const u=t.playlists[c];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===o)return}a.playlists=[Mn({},a)]}a.playlists.forEach(function(c,u){const d=n(i,o,s,c),f=ed(u,d);c.uri?c.resolvedUri=c.resolvedUri||ra(t.uri,c.uri):(c.uri=u===0?d:f,c.resolvedUri=c.uri),c.id=c.id||f,c.attributes=c.attributes||{},t.playlists[c.id]=c,t.playlists[c.uri]=c})}),JNe(t),QNe(t)};class bL{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,r=n.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=e.reduce((a,i)=>(a.set(i.id,i),a),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((r,a)=>{if(!this.processedDateRanges_.has(a)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),n.push(r),!!r.class))if(e[r.class]){const i=e[r.class].push(r);r.classListIndex=i-1}else e[r.class]=[r],r.classListIndex=0});for(const r of n){const a=e[r.class]||[];r.endDate?r.endTime=r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&a[r.classListIndex+1]?r.endTime=a[r.classListIndex+1].startTime:r.duration?r.endTime=r.startTime+r.duration:r.plannedDuration?r.endTime=r.startTime+r.plannedDuration:r.endTime=r.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((r,a)=>{r.startDate.getTime()<e&&this.processedDateRanges_.delete(a)})}}const wL=22,$s=({requestType:t,request:e,error:n,parseFailure:r})=>{const a=e.status<200||e.status>299,i=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:t},s=a&&!i||r;if(n&&i)o.error=Mn({},n),o.errorType=xe.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=xe.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=xe.Error.NetworkRequestTimeout;else if(s){const c=r?xe.Error.NetworkBodyParserFailed:xe.Error.NetworkBadStatus;o.errorType=c,o.status=e.status,o.headers=e.headers}return o},{EventTarget:VNe}=xe,e5e=(t,e)=>{if(e.endList||!e.serverControl)return t;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let a=e.mediaSequence+e.segments.length;if(r){const i=r.parts||[],o=lL(e)-1;o>-1&&o!==i.length-1&&(n._HLS_part=o),(o>-1||i.length)&&a--}n._HLS_msn=a}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const r=new fe.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(a){n.hasOwnProperty(a)&&r.searchParams.set(a,n[a])}),t=r.toString()}return t},t5e=(t,e)=>{if(!t)return e;const n=Zt(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(let r=0;r<e.parts.length;r++)t.parts&&t.parts[r]&&(n.parts[r]=Zt(t.parts[r],e.parts[r]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},n5e=(t,e,n)=>{const r=t.slice(),a=e.slice();n=n||0;const i=[];let o;for(let s=0;s<a.length;s++){const c=r[s+n],u=a[s];c?(o=c.map||o,i.push(t5e(c,u))):(o&&!u.map&&(u.map=o),i.push(u))}return i},xL=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=ra(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=ra(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=ra(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=ra(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=ra(e,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=ra(e,n.uri))})},CL=function(t){const e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let r=0;r<n.preloadHints.length;r++)if(n.preloadHints[r].type==="MAP")return e}n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},_L=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,qx=(t,e,n=_L)=>{const r=Zt(t,{}),a=r.playlists[e.id];if(!a||n(a,e))return null;e.segments=CL(e);const i=Zt(a,e);if(i.preloadSegment&&!e.preloadSegment&&delete i.preloadSegment,a.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}i.segments=n5e(a.segments,e.segments,e.mediaSequence-a.mediaSequence)}i.segments.forEach(o=>{xL(o,i.resolvedUri)});for(let o=0;o<r.playlists.length;o++)r.playlists[o].id===e.id&&(r.playlists[o]=i);return r.playlists[e.id]=i,r.playlists[e.uri]=i,td(t,(o,s,c,u)=>{if(o.playlists)for(let d=0;d<o.playlists.length;d++)e.id===o.playlists[d].id&&(o.playlists[d]=i)}),r},Gx=(t,e)=>{const n=t.segments||[],r=n[n.length-1],a=r&&r.parts&&r.parts[r.parts.length-1],i=a&&a.duration||r&&r.duration;return e&&i?i*1e3:(t.partTargetDuration||t.targetDuration||10)*500},SL=(t,e,n)=>{if(!t)return;const r=[];return t.forEach(a=>{if(!a.attributes)return;const{BANDWIDTH:i,RESOLUTION:o,CODECS:s}=a.attributes;r.push({id:a.id,bandwidth:i,resolution:o,codecs:s})}),{type:e,isLive:n,renditions:r}};class nd extends VNe{constructor(e,n,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Wa("PlaylistLoader");const{withCredentials:a=!1}=r;this.src=e,this.vhs_=n,this.withCredentials=a,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const i=n.options_;this.customTagParsers=i&&i.customTagParsers||[],this.customTagMappers=i&&i.customTagMappers||[],this.llhls=i&&i.llhls,this.dateRangesStorage_=new bL,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=ra(this.main.uri,e.uri);this.llhls&&(n=e5e(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(r,a)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,r){const{uri:a,id:i}=n;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[i],status:e.status,message:`HLS playlist request error at URL: ${a}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:$s({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{return XNe({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(r){this.error=r,this.error.metadata={errorType:xe.Error.StreamingHlsPlaylistParserError,error:r}}}haveMetadata({playlistString:e,playlistObject:n,url:r,id:a}){this.request=null,this.state="HAVE_METADATA";const i={playlistInfo:{type:"media",uri:r}};this.trigger({type:"playlistparsestart",metadata:i});const o=n||this.parseManifest_({url:r,manifestString:e});o.lastRequest=Date.now(),mL({playlist:o,uri:r,id:a});const s=qx(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[a]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Gx(this.media(),!!s)),i.parsedPlaylist=SL(this.main.playlists,i.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:i}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),fe.clearTimeout(this.mediaUpdateTimeout),fe.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new bL,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(fe.clearTimeout(this.finalRenditionTimeout),n){const s=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=fe.setTimeout(this.media.bind(this,e,!1),s);return}const r=this.state,a=!this.media_||e.id!==this.media_.id,i=this.main.playlists[e.id];if(i&&i.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,a&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Gx(e,!0)),!a)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Em(e.resolvedUri,c),s)return this.playlistRequestError(this.request,e,r);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=fe.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=fe.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=fe.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,r)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:r.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:r.responseText,code:2,metadata:$s({requestType:r.requestType,request:r,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Em(this.src,r),this.trigger({type:"playlistparsestart",metadata:e});const a=this.parseManifest_({manifestString:r.responseText,url:this.src});e.parsedPlaylist=SL(a.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(a)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,yL(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=CL(r),r.segments.forEach(a=>{xL(a,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||fe.location.href;this.main=ZNe(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const r=this.main,a=e.ID;let i=r.playlists.length;for(;i--;){const o=r.playlists[i];if(o.attributes["PATHWAY-ID"]===a){const s=o.resolvedUri,c=o.id;if(n){const u=this.createCloneURI_(o.resolvedUri,e),d=ed(a,u),f=this.createCloneAttributes_(a,o.attributes),h=this.createClonePlaylist_(o,d,e,f);r.playlists[i]=h,r.playlists[d]=h,r.playlists[u]=h}else r.playlists.splice(i,1);delete r.playlists[c],delete r.playlists[s]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const r=this.main,a=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{if(!(!r.mediaGroups[i]||!r.mediaGroups[i][a])){for(const o in r.mediaGroups[i])if(o===a){for(const s in r.mediaGroups[i][o])r.mediaGroups[i][o][s].playlists.forEach((u,d)=>{const f=r.playlists[u.id],h=f.id,v=f.resolvedUri;delete r.playlists[h],delete r.playlists[v]});delete r.mediaGroups[i][o]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const r=this.main,a=r.playlists.length,i=this.createCloneURI_(n.resolvedUri,e),o=ed(e.ID,i),s=this.createCloneAttributes_(e.ID,n.attributes),c=this.createClonePlaylist_(n,o,e,s);r.playlists[a]=c,r.playlists[o]=c,r.playlists[i]=c,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,r=e["BASE-ID"],a=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{if(!(!a.mediaGroups[i]||a.mediaGroups[i][n]))for(const o in a.mediaGroups[i]){if(o===r)a.mediaGroups[i][n]={};else continue;for(const s in a.mediaGroups[i][o]){const c=a.mediaGroups[i][o][s];a.mediaGroups[i][n][s]=Mn({},c);const u=a.mediaGroups[i][n][s],d=this.createCloneURI_(c.resolvedUri,e);u.resolvedUri=d,u.uri=d,u.playlists=[],c.playlists.forEach((f,h)=>{const v=a.playlists[f.id],p=gL(i,n,s),g=ed(n,p);if(v&&!a.playlists[g]){const m=this.createClonePlaylist_(v,g,e),y=m.resolvedUri;a.playlists[g]=m,a.playlists[y]=m}u.playlists[h]=this.createClonePlaylist_(f,g,e)})}}})}createClonePlaylist_(e,n,r,a){const i=this.createCloneURI_(e.resolvedUri,r),o={resolvedUri:i,uri:i,id:n};return e.segments&&(o.segments=[]),a&&(o.attributes=a),Zt(e,o)}createCloneURI_(e,n){const r=new URL(e);r.hostname=n["URI-REPLACEMENT"].HOST;const a=n["URI-REPLACEMENT"].PARAMS;for(const i of Object.keys(a))r.searchParams.set(i,a[i]);return r.href}createCloneAttributes_(e,n){const r={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{n[a]&&(r[a]=e)}),r}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const r in e.contentProtection){const a=e.contentProtection[r].attributes.keyId;a&&n.add(a.toLowerCase())}return n}}}const Yx=function(t,e,n,r){const a=t.responseType==="arraybuffer"?t.response:t.responseText;!e&&a&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=a.byteLength||a.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(t.timedout=!0),!e&&!t.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(t&&(a||t.responseText)))),r(e,t)},r5e=(t,e)=>{if(!t||!t.size)return;let n=e;return t.forEach(r=>{n=r(n)}),n},a5e=(t,e,n,r)=>{!t||!t.size||t.forEach(a=>{a(e,n,r)})},TL=function(){const t=function e(n,r){n=Zt({timeout:45e3},n);const a=e.beforeRequest||xe.Vhs.xhr.beforeRequest,i=e._requestCallbackSet||xe.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||xe.Vhs.xhr._responseCallbackSet;a&&typeof a=="function"&&(xe.log.warn("beforeRequest is deprecated, use onRequest instead."),i.add(a));const s=xe.Vhs.xhr.original===!0?xe.xhr:xe.Vhs.xhr,c=r5e(i,n);i.delete(a);const u=s(c||n,function(f,h){return a5e(o,u,f,h),Yx(u,f,h,r)}),d=u.abort;return u.abort=function(){return u.aborted=!0,d.apply(u,arguments)},u.uri=n.uri,u.requestType=n.requestType,u.requestTime=Date.now(),u};return t.original=!0,t},i5e=function(t){let e;const n=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?e=fe.BigInt(t.offset)+fe.BigInt(t.length)-fe.BigInt(1):e=t.offset+t.length-1,"bytes="+n+"-"+e},Xx=function(t){const e={};return t.byterange&&(e.Range=i5e(t.byterange)),e},o5e=function(t,e){return t.start(e)+"-"+t.end(e)},l5e=function(t,e){const n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},s5e=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},kL=function(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];nR(r)?e[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:e[n]=r}),e},Am=function(t){const e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},OL=function(t){return t.resolvedUri},EL=t=>{const e=Array.prototype.slice.call(t),n=16;let r="",a,i;for(let o=0;o<e.length/n;o++)a=e.slice(o*n,o*n+n).map(l5e).join(""),i=e.slice(o*n,o*n+n).map(s5e).join(""),r+=a+" "+i+`
`;return r};var c5e=Object.freeze({__proto__:null,createTransferableMessage:kL,initSegmentId:Am,segmentKeyId:OL,hexDump:EL,tagDump:({bytes:t})=>EL(t),textRanges:t=>{let e="",n;for(n=0;n<t.length;n++)e+=o5e(t,n)+" ";return e}});const PL=.25,u5e=(t,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,a=e.videoTimingInfo.transmuxedPresentationStart+n,i=t-a;return new Date(e.dateTimeObject.getTime()+i*1e3)},d5e=t=>t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds,f5e=(t,e)=>{let n;try{n=new Date(t)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let r=e.segments[0];if(n<new Date(r.dateTimeObject))return null;for(let c=0;c<e.segments.length-1;c++){r=e.segments[c];const u=new Date(e.segments[c+1].dateTimeObject);if(n<u)break}const a=e.segments[e.segments.length-1],i=a.dateTimeObject,o=a.videoTimingInfo?d5e(a.videoTimingInfo):a.duration+a.duration*PL,s=new Date(i.getTime()+o*1e3);return n>s?null:(n>new Date(i)&&(r=a),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:aa.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},h5e=(t,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,r;for(let i=0;i<e.segments.length&&(r=e.segments[i],n=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration,!(t<=n));i++);const a=e.segments[e.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+a.duration*PL)return null;r=a}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},v5e=(t,e)=>{let n,r;try{n=new Date(t),r=new Date(e)}catch{}const a=n.getTime();return(r.getTime()-a)/1e3},p5e=t=>{if(!t.segments||t.segments.length===0)return!1;for(let e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0},g5e=({playlist:t,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const r=h5e(e,t);if(!r)return n({message:"valid programTime was not found"});if(r.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const a={mediaSeconds:e},i=u5e(e,r.segment);return i&&(a.programDateTime=i.toISOString()),n(null,a)},IL=({programTime:t,playlist:e,retryCount:n=2,seekTo:r,pauseAfterSeek:a=!0,tech:i,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!e||!r)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!i.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!p5e(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const s=f5e(t,e);if(!s)return o({message:`${t} was not found in the stream`});const c=s.segment,u=v5e(c.dateTimeObject,t);if(s.type==="estimate"){if(n===0)return o({message:`${t} is not buffered yet. Try again`});r(s.estimatedStart+u),i.one("seeked",()=>{IL({programTime:t,playlist:e,retryCount:n-1,seekTo:r,pauseAfterSeek:a,tech:i,callback:o})});return}const d=c.start+u,f=()=>o(null,i.currentTime());i.one("seeked",f),a&&i.pause(),r(d)},Jx=(t,e)=>{if(t.readyState===4)return e()},m5e=(t,e,n,r)=>{let a=[],i,o=!1;const s=function(f,h,v,p){return h.abort(),o=!0,n(f,h,v,p)},c=function(f,h){if(o)return;if(f)return f.metadata=$s({requestType:r,request:h,error:f}),s(f,h,"",a);const v=h.responseText.substring(a&&a.byteLength||0,h.responseText.length);if(a=TPe(a,rR(v,!0)),i=i||th(a),a.length<10||i&&a.length<i+2)return Jx(h,()=>s(f,h,"",a));const p=Ww(a);return p==="ts"&&a.length<188?Jx(h,()=>s(f,h,"",a)):!p&&a.length<376?Jx(h,()=>s(f,h,"",a)):s(null,h,p,a)},d=e({uri:t,beforeSend(f){f.overrideMimeType("text/plain; charset=x-user-defined"),f.addEventListener("progress",function({total:h,loaded:v}){return Yx(f,null,{statusCode:f.status},c)})}},function(f,h){return Yx(d,f,h,c)});return d},{EventTarget:y5e}=xe,AL=function(t,e){if(!_L(t,e)||t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx||t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(let n=0;n<t.segments.length;n++){const r=t.segments[n],a=e.segments[n];if(r.uri!==a.uri)return!1;if(!r.byterange&&!a.byterange)continue;const i=r.byterange,o=a.byterange;if(i&&!o||!i&&o||i.offset!==o.offset||i.length!==o.length)return!1}return!0},b5e=(t,e,n,r)=>{const a=r.attributes.NAME||n;return`placeholder-uri-${t}-${e}-${a}`},w5e=({mainXml:t,srcUrl:e,clientOffset:n,sidxMapping:r,previousManifest:a})=>{const i=qIe(t,{manifestUri:e,clientOffset:n,sidxMapping:r,previousManifest:a});return yL(i,e,b5e),i},x5e=(t,e)=>{td(t,(n,r,a,i)=>{(!e.mediaGroups[r][a]||!(i in e.mediaGroups[r][a]))&&delete t.mediaGroups[r][a][i]})},C5e=(t,e,n)=>{let r=!0,a=Zt(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let i=0;i<e.playlists.length;i++){const o=e.playlists[i];if(o.sidx){const c=zg(o.sidx);n&&n[c]&&n[c].sidx&&Bw(o,n[c].sidx,o.sidx.resolvedUri)}const s=qx(a,o,AL);s&&(a=s,r=!1)}return td(e,(i,o,s,c)=>{if(i.playlists&&i.playlists.length){const u=i.playlists[0].id,d=qx(a,i.playlists[0],AL);d&&(a=d,c in a.mediaGroups[o][s]||(a.mediaGroups[o][s][c]=i),a.mediaGroups[o][s][c].playlists[0]=a.playlists[u],r=!1)}}),x5e(a,e),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(r=!1),r?null:a},_5e=(t,e)=>(!t.map&&!e.map||!!(t.map&&e.map&&t.map.byterange.offset===e.map.byterange.offset&&t.map.byterange.length===e.map.byterange.length))&&t.uri===e.uri&&t.byterange.offset===e.byterange.offset&&t.byterange.length===e.byterange.length,NL=(t,e)=>{const n={};for(const r in t){const i=t[r].sidx;if(i){const o=zg(i);if(!e[o])break;const s=e[o].sidxInfo;_5e(s,i)&&(n[o]=e[o])}}return n},S5e=(t,e)=>{let r=NL(t.playlists,e);return td(t,(a,i,o,s)=>{if(a.playlists&&a.playlists.length){const c=a.playlists;r=Zt(r,NL(c,e))}}),r};class Qx extends y5e{constructor(e,n,r={},a){super(),this.isPaused_=!0,this.mainPlaylistLoader_=a||this,a||(this.isMain_=!0);const{withCredentials:i=!1}=r;if(this.vhs_=n,this.withCredentials=i,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Wa("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,n,r){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(e,n,r){const a=e.sidx&&zg(e.sidx);if(!e.sidx||!a||this.mainPlaylistLoader_.sidxMapping_[a]){fe.clearTimeout(this.mediaRequest_),this.mediaRequest_=fe.setTimeout(()=>r(!1),0);return}const i=Em(e.sidx.resolvedUri),o=(c,u)=>{if(this.requestErrored_(c,u,n))return;const d=this.mainPlaylistLoader_.sidxMapping_,{requestType:f}=u;let h;try{h=VIe(ht(u.response).subarray(8))}catch(v){v.metadata=$s({requestType:f,request:u,parseFailure:!0}),this.requestErrored_(v,u,n);return}return d[a]={sidxInfo:e.sidx,sidx:h},Bw(e,h,e.sidx.resolvedUri),r(!0)},s="dash-sidx";this.request=m5e(i,this.vhs_.xhr,(c,u,d,f)=>{if(c)return o(c,u);if(!d||d!=="mp4"){const p=d||"unknown";return o({status:u.status,message:`Unsupported ${p} container type for sidx segment at URL: ${i}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:h,length:v}=e.sidx.byterange;if(f.length>=v+h)return o(c,{response:f.subarray(h,h+v),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:i,responseType:"arraybuffer",requestType:"dash-sidx",headers:Xx({byterange:e.sidx.byterange})},o)},s)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},fe.clearTimeout(this.minimumUpdatePeriodTimeout_),fe.clearTimeout(this.mediaRequest_),fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,a=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,fe.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(fe.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,fe.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=fe.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){fe.clearTimeout(this.mediaRequest_),this.mediaRequest_=fe.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(r,a)=>{if(r){const{requestType:o}=a;r.metadata=$s({requestType:o,request:a,error:r})}if(this.requestErrored_(r,a)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const i=a.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=a.responseText,a.responseHeaders&&a.responseHeaders.date?this.mainLoaded_=Date.parse(a.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Em(this.mainPlaylistLoader_.srcUrl,a),i){this.handleMain_(),this.syncClientServerClock_(()=>e(a,i));return}return e(a,i)})}syncClientServerClock_(e){const n=GIe(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:ra(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(r,a)=>{if(!this.request)return;if(r){const{requestType:o}=a;return this.error.metadata=$s({requestType:o,request:a,error:r}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let i;n.method==="HEAD"?!a.responseHeaders||!a.responseHeaders.date?i=this.mainLoaded_:i=Date.parse(a.responseHeaders.date):i=Date.parse(a.responseText),this.mainPlaylistLoader_.clientOffset_=i-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){fe.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let r;try{r=w5e({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(i){this.error=i,this.error.metadata={errorType:xe.Error.StreamingDashManifestParserError,error:i},this.trigger("error")}e&&(r=C5e(e,r,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=r||e;const a=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(a&&a!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=a),(!e||r&&r.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(r),r){const{duration:i,endList:o}=r,s=[];r.playlists.forEach(u=>{s.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const c={duration:i,isLive:!o,renditions:s};n.parsedManifest=c,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!r}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(fe.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=fe.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=S5e(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==n[e];if(r?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const a=()=>{this.media().endList||(this.mediaUpdateTimeout=fe.setTimeout(()=>{this.trigger("mediaupdatetimeout"),a()},Gx(this.media(),!!r)))};a()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const r in e.contentProtection){const a=e.contentProtection[r].attributes["cenc:default_KID"];a&&n.add(a.replace(/-/g,"").toLowerCase())}return n}}}var rr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const T5e=t=>{const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer},DL=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},k5e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(t),URL.createObjectURL(n.getBlob())}},RL=function(t){return function(){const e=k5e(t),n=DL(new Worker(e));n.objURL=e;const r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},n}},ML=function(t){return`var browserWorkerPolyFill = ${DL.toString()};
browserWorkerPolyFill(self);
`+t},LL=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},O5e=ML(LL(function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var L={};this.on=function(G,Z){L[G]||(L[G]=[]),L[G]=L[G].concat(Z)},this.off=function(G,Z){var Q;return L[G]?(Q=L[G].indexOf(Z),L[G]=L[G].slice(),L[G].splice(Q,1),Q>-1):!1},this.trigger=function(G){var Z,Q,te,ne;if(Z=L[G],!!Z)if(arguments.length===2)for(te=Z.length,Q=0;Q<te;++Q)Z[Q].call(this,arguments[1]);else{for(ne=[],Q=arguments.length,Q=1;Q<arguments.length;++Q)ne.push(arguments[Q]);for(te=Z.length,Q=0;Q<te;++Q)Z[Q].apply(this,ne)}},this.dispose=function(){L={}}}};e.prototype.pipe=function(L){return this.on("data",function(G){L.push(G)}),this.on("done",function(G){L.flush(G)}),this.on("partialdone",function(G){L.partialFlush(G)}),this.on("endedtimeline",function(G){L.endTimeline(G)}),this.on("reset",function(G){L.reset(G)}),L},e.prototype.push=function(L){this.trigger("data",L)},e.prototype.flush=function(L){this.trigger("done",L)},e.prototype.partialFlush=function(L){this.trigger("partialdone",L)},e.prototype.endTimeline=function(L){this.trigger("endedtimeline",L)},e.prototype.reset=function(L){this.trigger("reset",L)};var n=e,r=Math.pow(2,32),a=function(L){var G=new DataView(L.buffer,L.byteOffset,L.byteLength),Z;return G.getBigUint64?(Z=G.getBigUint64(0),Z<Number.MAX_SAFE_INTEGER?Number(Z):Z):G.getUint32(0)*r+G.getUint32(4)},i={getUint64:a,MAX_UINT32:r},o=i.MAX_UINT32,s,c,u,d,f,h,v,p,g,m,y,b,w,x,C,S,_,O,N,B,T,k,E,I,A,M,$,U,F,j,W,H,J,Y,D,q;(function(){var L;if(E={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(L in E)E.hasOwnProperty(L)&&(E[L]=[L.charCodeAt(0),L.charCodeAt(1),L.charCodeAt(2),L.charCodeAt(3)]);I=new Uint8Array([105,115,111,109]),M=new Uint8Array([97,118,99,49]),A=new Uint8Array([0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),U=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),F={video:$,audio:U},H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),W=new Uint8Array([0,0,0,0,0,0,0,0]),J=new Uint8Array([0,0,0,0,0,0,0,0]),Y=J,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),q=J,j=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(L){var G=[],Z=0,Q,te,ne;for(Q=1;Q<arguments.length;Q++)G.push(arguments[Q]);for(Q=G.length;Q--;)Z+=G[Q].byteLength;for(te=new Uint8Array(Z+8),ne=new DataView(te.buffer,te.byteOffset,te.byteLength),ne.setUint32(0,te.byteLength),te.set(L,4),Q=0,Z=8;Q<G.length;Q++)te.set(G[Q],Z),Z+=G[Q].byteLength;return te},c=function(){return s(E.dinf,s(E.dref,H))},u=function(L){return s(E.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,L.audioobjecttype<<3|L.samplingfrequencyindex>>>1,L.samplingfrequencyindex<<7|L.channelcount<<3,6,1,2]))},d=function(){return s(E.ftyp,I,A,I,M)},S=function(L){return s(E.hdlr,F[L])},f=function(L){return s(E.mdat,L)},C=function(L){var G=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,L.duration>>>24&255,L.duration>>>16&255,L.duration>>>8&255,L.duration&255,85,196,0,0]);return L.samplerate&&(G[12]=L.samplerate>>>24&255,G[13]=L.samplerate>>>16&255,G[14]=L.samplerate>>>8&255,G[15]=L.samplerate&255),s(E.mdhd,G)},x=function(L){return s(E.mdia,C(L),S(L.type),v(L))},h=function(L){return s(E.mfhd,new Uint8Array([0,0,0,0,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255]))},v=function(L){return s(E.minf,L.type==="video"?s(E.vmhd,j):s(E.smhd,W),c(),O(L))},p=function(L,G){for(var Z=[],Q=G.length;Q--;)Z[Q]=B(G[Q]);return s.apply(null,[E.moof,h(L)].concat(Z))},g=function(L){for(var G=L.length,Z=[];G--;)Z[G]=b(L[G]);return s.apply(null,[E.moov,y(4294967295)].concat(Z).concat(m(L)))},m=function(L){for(var G=L.length,Z=[];G--;)Z[G]=T(L[G]);return s.apply(null,[E.mvex].concat(Z))},y=function(L){var G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(E.mvhd,G)},_=function(L){var G=L.samples||[],Z=new Uint8Array(4+G.length),Q,te;for(te=0;te<G.length;te++)Q=G[te].flags,Z[te+4]=Q.dependsOn<<4|Q.isDependedOn<<2|Q.hasRedundancy;return s(E.sdtp,Z)},O=function(L){return s(E.stbl,N(L),s(E.stts,q),s(E.stsc,Y),s(E.stsz,D),s(E.stco,J))},function(){var L,G;N=function(Z){return s(E.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),Z.type==="video"?L(Z):G(Z))},L=function(Z){var Q=Z.sps||[],te=Z.pps||[],ne=[],le=[],se,ue;for(se=0;se<Q.length;se++)ne.push((Q[se].byteLength&65280)>>>8),ne.push(Q[se].byteLength&255),ne=ne.concat(Array.prototype.slice.call(Q[se]));for(se=0;se<te.length;se++)le.push((te[se].byteLength&65280)>>>8),le.push(te[se].byteLength&255),le=le.concat(Array.prototype.slice.call(te[se]));if(ue=[E.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(Z.width&65280)>>8,Z.width&255,(Z.height&65280)>>8,Z.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(E.avcC,new Uint8Array([1,Z.profileIdc,Z.profileCompatibility,Z.levelIdc,255].concat([Q.length],ne,[te.length],le))),s(E.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],Z.sarRatio){var he=Z.sarRatio[0],we=Z.sarRatio[1];ue.push(s(E.pasp,new Uint8Array([(he&4278190080)>>24,(he&16711680)>>16,(he&65280)>>8,he&255,(we&4278190080)>>24,(we&16711680)>>16,(we&65280)>>8,we&255])))}return s.apply(null,ue)},G=function(Z){return s(E.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(Z.channelcount&65280)>>8,Z.channelcount&255,(Z.samplesize&65280)>>8,Z.samplesize&255,0,0,0,0,(Z.samplerate&65280)>>8,Z.samplerate&255,0,0]),u(Z))}}(),w=function(L){var G=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(L.id&4278190080)>>24,(L.id&16711680)>>16,(L.id&65280)>>8,L.id&255,0,0,0,0,(L.duration&4278190080)>>24,(L.duration&16711680)>>16,(L.duration&65280)>>8,L.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(L.width&65280)>>8,L.width&255,0,0,(L.height&65280)>>8,L.height&255,0,0]);return s(E.tkhd,G)},B=function(L){var G,Z,Q,te,ne,le,se;return G=s(E.tfhd,new Uint8Array([0,0,0,58,(L.id&4278190080)>>24,(L.id&16711680)>>16,(L.id&65280)>>8,L.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),le=Math.floor(L.baseMediaDecodeTime/o),se=Math.floor(L.baseMediaDecodeTime%o),Z=s(E.tfdt,new Uint8Array([1,0,0,0,le>>>24&255,le>>>16&255,le>>>8&255,le&255,se>>>24&255,se>>>16&255,se>>>8&255,se&255])),ne=92,L.type==="audio"?(Q=k(L,ne),s(E.traf,G,Z,Q)):(te=_(L),Q=k(L,te.length+ne),s(E.traf,G,Z,Q,te))},b=function(L){return L.duration=L.duration||4294967295,s(E.trak,w(L),x(L))},T=function(L){var G=new Uint8Array([0,0,0,0,(L.id&4278190080)>>24,(L.id&16711680)>>16,(L.id&65280)>>8,L.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return L.type!=="video"&&(G[G.length-1]=0),s(E.trex,G)},function(){var L,G,Z;Z=function(Q,te){var ne=0,le=0,se=0,ue=0;return Q.length&&(Q[0].duration!==void 0&&(ne=1),Q[0].size!==void 0&&(le=2),Q[0].flags!==void 0&&(se=4),Q[0].compositionTimeOffset!==void 0&&(ue=8)),[0,0,ne|le|se|ue,1,(Q.length&4278190080)>>>24,(Q.length&16711680)>>>16,(Q.length&65280)>>>8,Q.length&255,(te&4278190080)>>>24,(te&16711680)>>>16,(te&65280)>>>8,te&255]},G=function(Q,te){var ne,le,se,ue,he,we;for(ue=Q.samples||[],te+=20+16*ue.length,se=Z(ue,te),le=new Uint8Array(se.length+ue.length*16),le.set(se),ne=se.length,we=0;we<ue.length;we++)he=ue[we],le[ne++]=(he.duration&4278190080)>>>24,le[ne++]=(he.duration&16711680)>>>16,le[ne++]=(he.duration&65280)>>>8,le[ne++]=he.duration&255,le[ne++]=(he.size&4278190080)>>>24,le[ne++]=(he.size&16711680)>>>16,le[ne++]=(he.size&65280)>>>8,le[ne++]=he.size&255,le[ne++]=he.flags.isLeading<<2|he.flags.dependsOn,le[ne++]=he.flags.isDependedOn<<6|he.flags.hasRedundancy<<4|he.flags.paddingValue<<1|he.flags.isNonSyncSample,le[ne++]=he.flags.degradationPriority&61440,le[ne++]=he.flags.degradationPriority&15,le[ne++]=(he.compositionTimeOffset&4278190080)>>>24,le[ne++]=(he.compositionTimeOffset&16711680)>>>16,le[ne++]=(he.compositionTimeOffset&65280)>>>8,le[ne++]=he.compositionTimeOffset&255;return s(E.trun,le)},L=function(Q,te){var ne,le,se,ue,he,we;for(ue=Q.samples||[],te+=20+8*ue.length,se=Z(ue,te),ne=new Uint8Array(se.length+ue.length*8),ne.set(se),le=se.length,we=0;we<ue.length;we++)he=ue[we],ne[le++]=(he.duration&4278190080)>>>24,ne[le++]=(he.duration&16711680)>>>16,ne[le++]=(he.duration&65280)>>>8,ne[le++]=he.duration&255,ne[le++]=(he.size&4278190080)>>>24,ne[le++]=(he.size&16711680)>>>16,ne[le++]=(he.size&65280)>>>8,ne[le++]=he.size&255;return s(E.trun,ne)},k=function(Q,te){return Q.type==="audio"?L(Q,te):G(Q,te)}}();var z={ftyp:d,mdat:f,moof:p,moov:g,initSegment:function(L){var G=d(),Z=g(L),Q;return Q=new Uint8Array(G.byteLength+Z.byteLength),Q.set(G),Q.set(Z,G.byteLength),Q}},K=function(L){var G,Z,Q=[],te=[];for(te.byteLength=0,te.nalCount=0,te.duration=0,Q.byteLength=0,G=0;G<L.length;G++)Z=L[G],Z.nalUnitType==="access_unit_delimiter_rbsp"?(Q.length&&(Q.duration=Z.dts-Q.dts,te.byteLength+=Q.byteLength,te.nalCount+=Q.length,te.duration+=Q.duration,te.push(Q)),Q=[Z],Q.byteLength=Z.data.byteLength,Q.pts=Z.pts,Q.dts=Z.dts):(Z.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(Q.keyFrame=!0),Q.duration=Z.dts-Q.dts,Q.byteLength+=Z.data.byteLength,Q.push(Z));return te.length&&(!Q.duration||Q.duration<=0)&&(Q.duration=te[te.length-1].duration),te.byteLength+=Q.byteLength,te.nalCount+=Q.length,te.duration+=Q.duration,te.push(Q),te},P=function(L){var G,Z,Q=[],te=[];for(Q.byteLength=0,Q.nalCount=0,Q.duration=0,Q.pts=L[0].pts,Q.dts=L[0].dts,te.byteLength=0,te.nalCount=0,te.duration=0,te.pts=L[0].pts,te.dts=L[0].dts,G=0;G<L.length;G++)Z=L[G],Z.keyFrame?(Q.length&&(te.push(Q),te.byteLength+=Q.byteLength,te.nalCount+=Q.nalCount,te.duration+=Q.duration),Q=[Z],Q.nalCount=Z.length,Q.byteLength=Z.byteLength,Q.pts=Z.pts,Q.dts=Z.dts,Q.duration=Z.duration):(Q.duration+=Z.duration,Q.nalCount+=Z.length,Q.byteLength+=Z.byteLength,Q.push(Z));return te.length&&Q.duration<=0&&(Q.duration=te[te.length-1].duration),te.byteLength+=Q.byteLength,te.nalCount+=Q.nalCount,te.duration+=Q.duration,te.push(Q),te},R=function(L){var G;return!L[0][0].keyFrame&&L.length>1&&(G=L.shift(),L.byteLength-=G.byteLength,L.nalCount-=G.nalCount,L[0][0].dts=G.dts,L[0][0].pts=G.pts,L[0][0].duration+=G.duration),L},X=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ee=function(L,G){var Z=X();return Z.dataOffset=G,Z.compositionTimeOffset=L.pts-L.dts,Z.duration=L.duration,Z.size=4*L.length,Z.size+=L.byteLength,L.keyFrame&&(Z.flags.dependsOn=2,Z.flags.isNonSyncSample=0),Z},re=function(L,G){var Z,Q,te,ne,le,se=G||0,ue=[];for(Z=0;Z<L.length;Z++)for(ne=L[Z],Q=0;Q<ne.length;Q++)le=ne[Q],te=ee(le,se),se+=te.size,ue.push(te);return ue},ae=function(L){var G,Z,Q,te,ne,le,se=0,ue=L.byteLength,he=L.nalCount,we=ue+4*he,Oe=new Uint8Array(we),Ye=new DataView(Oe.buffer);for(G=0;G<L.length;G++)for(te=L[G],Z=0;Z<te.length;Z++)for(ne=te[Z],Q=0;Q<ne.length;Q++)le=ne[Q],Ye.setUint32(se,le.data.byteLength),se+=4,Oe.set(le.data,se),se+=le.data.byteLength;return Oe},oe=function(L,G){var Z,Q=G||0,te=[];return Z=ee(L,Q),te.push(Z),te},ce=function(L){var G,Z,Q=0,te=L.byteLength,ne=L.length,le=te+4*ne,se=new Uint8Array(le),ue=new DataView(se.buffer);for(G=0;G<L.length;G++)Z=L[G],ue.setUint32(Q,Z.data.byteLength),Q+=4,se.set(Z.data,Q),Q+=Z.data.byteLength;return se},ge={groupNalsIntoFrames:K,groupFramesIntoGops:P,extendFirstKeyFrame:R,generateSampleTable:re,concatenateNalData:ae,generateSampleTableForFrame:oe,concatenateNalDataForFrame:ce},pe=[33,16,5,32,164,27],_e=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],be=function(L){for(var G=[];L--;)G.push(0);return G},Se=function(L){return Object.keys(L).reduce(function(G,Z){return G[Z]=new Uint8Array(L[Z].reduce(function(Q,te){return Q.concat(te)},[])),G},{})},Ne,Ae=function(){if(!Ne){var L={96e3:[pe,[227,64],be(154),[56]],88200:[pe,[231],be(170),[56]],64e3:[pe,[248,192],be(240),[56]],48e3:[pe,[255,192],be(268),[55,148,128],be(54),[112]],44100:[pe,[255,192],be(268),[55,163,128],be(84),[112]],32e3:[pe,[255,192],be(268),[55,234],be(226),[112]],24e3:[pe,[255,192],be(268),[55,255,128],be(268),[111,112],be(126),[224]],16e3:[pe,[255,192],be(268),[55,255,128],be(268),[111,255],be(269),[223,108],be(195),[1,192]],12e3:[_e,be(268),[3,127,248],be(268),[6,255,240],be(268),[13,255,224],be(268),[27,253,128],be(259),[56]],11025:[_e,be(268),[3,127,248],be(268),[6,255,240],be(268),[13,255,224],be(268),[27,255,192],be(268),[55,175,128],be(108),[112]],8e3:[_e,be(268),[3,121,16],be(47),[7]]};Ne=Se(L)}return Ne},Pe=9e4,Me,me,ie,ye,Ce,Ge,Le;Me=function(L){return L*Pe},me=function(L,G){return L*G},ie=function(L){return L/Pe},ye=function(L,G){return L/G},Ce=function(L,G){return Me(ye(L,G))},Ge=function(L,G){return me(ie(L),G)},Le=function(L,G,Z){return ie(Z?L:L-G)};var De={ONE_SECOND_IN_TS:Pe,secondsToVideoTs:Me,secondsToAudioTs:me,videoTsToSeconds:ie,audioTsToSeconds:ye,audioTsToVideoTs:Ce,videoTsToAudioTs:Ge,metadataTsToSeconds:Le},Ue=Ae,ze=De,Ve=function(L){var G,Z,Q=0;for(G=0;G<L.length;G++)Z=L[G],Q+=Z.data.byteLength;return Q},et=function(L,G,Z,Q){var te,ne=0,le=0,se=0,ue=0,he,we,Oe;if(G.length&&(te=ze.audioTsToVideoTs(L.baseMediaDecodeTime,L.samplerate),ne=Math.ceil(ze.ONE_SECOND_IN_TS/(L.samplerate/1024)),Z&&Q&&(le=te-Math.max(Z,Q),se=Math.floor(le/ne),ue=se*ne),!(se<1||ue>ze.ONE_SECOND_IN_TS/2))){for(he=Ue()[L.samplerate],he||(he=G[0].data),we=0;we<se;we++)Oe=G[0],G.splice(0,0,{data:he,dts:Oe.dts-ne,pts:Oe.pts-ne});return L.baseMediaDecodeTime-=Math.floor(ze.videoTsToAudioTs(ue,L.samplerate)),ue}},vt=function(L,G,Z){return G.minSegmentDts>=Z?L:(G.minSegmentDts=1/0,L.filter(function(Q){return Q.dts>=Z?(G.minSegmentDts=Math.min(G.minSegmentDts,Q.dts),G.minSegmentPts=G.minSegmentDts,!0):!1}))},_t=function(L){var G,Z,Q=[];for(G=0;G<L.length;G++)Z=L[G],Q.push({size:Z.data.byteLength,duration:1024});return Q},Yn=function(L){var G,Z,Q=0,te=new Uint8Array(Ve(L));for(G=0;G<L.length;G++)Z=L[G],te.set(Z.data,Q),Q+=Z.data.byteLength;return te},Rr={prefixWithSilence:et,trimAdtsFramesByEarliestDts:vt,generateSampleTable:_t,concatenateFrameData:Yn},_r=De.ONE_SECOND_IN_TS,Ko=function(L,G){typeof G.pts=="number"&&(L.timelineStartInfo.pts===void 0&&(L.timelineStartInfo.pts=G.pts),L.minSegmentPts===void 0?L.minSegmentPts=G.pts:L.minSegmentPts=Math.min(L.minSegmentPts,G.pts),L.maxSegmentPts===void 0?L.maxSegmentPts=G.pts:L.maxSegmentPts=Math.max(L.maxSegmentPts,G.pts)),typeof G.dts=="number"&&(L.timelineStartInfo.dts===void 0&&(L.timelineStartInfo.dts=G.dts),L.minSegmentDts===void 0?L.minSegmentDts=G.dts:L.minSegmentDts=Math.min(L.minSegmentDts,G.dts),L.maxSegmentDts===void 0?L.maxSegmentDts=G.dts:L.maxSegmentDts=Math.max(L.maxSegmentDts,G.dts))},qo=function(L){delete L.minSegmentDts,delete L.maxSegmentDts,delete L.minSegmentPts,delete L.maxSegmentPts},Ka=function(L,G){var Z,Q,te=L.minSegmentDts;return G||(te-=L.timelineStartInfo.dts),Z=L.timelineStartInfo.baseMediaDecodeTime,Z+=te,Z=Math.max(0,Z),L.type==="audio"&&(Q=L.samplerate/_r,Z*=Q,Z=Math.floor(Z)),Z},qa={clearDtsInfo:qo,calculateTrackBaseMediaDecodeTime:Ka,collectDtsInfo:Ko},Ta=4,Il=128,$t=function(L){for(var G=0,Z={payloadType:-1,payloadSize:0},Q=0,te=0;G<L.byteLength&&L[G]!==Il;){for(;L[G]===255;)Q+=255,G++;for(Q+=L[G++];L[G]===255;)te+=255,G++;if(te+=L[G++],!Z.payload&&Q===Ta){var ne=String.fromCharCode(L[G+3],L[G+4],L[G+5],L[G+6]);if(ne==="GA94"){Z.payloadType=Q,Z.payloadSize=te,Z.payload=L.subarray(G,G+te);break}else Z.payload=void 0}G+=te,Q=0,te=0}return Z},Ot=function(L){return L.payload[0]!==181||(L.payload[1]<<8|L.payload[2])!==49||String.fromCharCode(L.payload[3],L.payload[4],L.payload[5],L.payload[6])!=="GA94"||L.payload[7]!==3?null:L.payload.subarray(8,L.payload.length-1)},an=function(L,G){var Z=[],Q,te,ne,le;if(!(G[0]&64))return Z;for(te=G[0]&31,Q=0;Q<te;Q++)ne=Q*3,le={type:G[ne+2]&3,pts:L},G[ne+2]&4&&(le.ccData=G[ne+3]<<8|G[ne+4],Z.push(le));return Z},Cn=function(L){for(var G=L.byteLength,Z=[],Q=1,te,ne;Q<G-2;)L[Q]===0&&L[Q+1]===0&&L[Q+2]===3?(Z.push(Q+2),Q+=2):Q++;if(Z.length===0)return L;te=G-Z.length,ne=new Uint8Array(te);var le=0;for(Q=0;Q<te;le++,Q++)le===Z[0]&&(le++,Z.shift()),ne[Q]=L[le];return ne},Mr={parseSei:$t,parseUserData:Ot,parseCaptionPackets:an,discardEmulationPreventionBytes:Cn,USER_DATA_REGISTERED_ITU_T_T35:Ta},hr=n,eo=Mr,Xn=function(L){L=L||{},Xn.prototype.init.call(this),this.parse708captions_=typeof L.parse708captions=="boolean"?L.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Kt(0,0),new Kt(0,1),new Kt(1,0),new Kt(1,1)],this.parse708captions_&&(this.cc708Stream_=new tt({captionServices:L.captionServices})),this.reset(),this.ccStreams_.forEach(function(G){G.on("data",this.trigger.bind(this,"data")),G.on("partialdone",this.trigger.bind(this,"partialdone")),G.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Xn.prototype=new hr,Xn.prototype.push=function(L){var G,Z,Q;if(L.nalUnitType==="sei_rbsp"&&(G=eo.parseSei(L.escapedRBSP),!!G.payload&&G.payloadType===eo.USER_DATA_REGISTERED_ITU_T_T35&&(Z=eo.parseUserData(G),!!Z))){if(L.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(L.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}Q=eo.parseCaptionPackets(L.pts,Z),this.captionPackets_=this.captionPackets_.concat(Q),this.latestDts_!==L.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=L.dts}},Xn.prototype.flushCCStreams=function(L){this.ccStreams_.forEach(function(G){return L==="flush"?G.flush():G.partialFlush()},this)},Xn.prototype.flushStream=function(L){if(!this.captionPackets_.length){this.flushCCStreams(L);return}this.captionPackets_.forEach(function(G,Z){G.presortIndex=Z}),this.captionPackets_.sort(function(G,Z){return G.pts===Z.pts?G.presortIndex-Z.presortIndex:G.pts-Z.pts}),this.captionPackets_.forEach(function(G){G.type<2?this.dispatchCea608Packet(G):this.dispatchCea708Packet(G)},this),this.captionPackets_.length=0,this.flushCCStreams(L)},Xn.prototype.flush=function(){return this.flushStream("flush")},Xn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Xn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(L){L.reset()})},Xn.prototype.dispatchCea608Packet=function(L){this.setsTextOrXDSActive(L)?this.activeCea608Channel_[L.type]=null:this.setsChannel1Active(L)?this.activeCea608Channel_[L.type]=0:this.setsChannel2Active(L)&&(this.activeCea608Channel_[L.type]=1),this.activeCea608Channel_[L.type]!==null&&this.ccStreams_[(L.type<<1)+this.activeCea608Channel_[L.type]].push(L)},Xn.prototype.setsChannel1Active=function(L){return(L.ccData&30720)===4096},Xn.prototype.setsChannel2Active=function(L){return(L.ccData&30720)===6144},Xn.prototype.setsTextOrXDSActive=function(L){return(L.ccData&28928)===256||(L.ccData&30974)===4138||(L.ccData&30974)===6186},Xn.prototype.dispatchCea708Packet=function(L){this.parse708captions_&&this.cc708Stream_.push(L)};var Go={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Yo=function(L){var G=Go[L]||L;return L&4096&&L===G?"":String.fromCharCode(G)},Ga=function(L){return 32<=L&&L<=127||160<=L&&L<=255},ar=function(L){this.windowNum=L,this.reset()};ar.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ar.prototype.getText=function(){return this.rows.join(`
`)},ar.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ar.prototype.newLine=function(L){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(L),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ar.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},ar.prototype.addText=function(L){this.rows[this.rowIdx]+=L},ar.prototype.backspace=function(){if(!this.isEmpty()){var L=this.rows[this.rowIdx];this.rows[this.rowIdx]=L.substr(0,L.length-1)}};var ka=function(L,G,Z){this.serviceNum=L,this.text="",this.currentWindow=new ar(-1),this.windows=[],this.stream=Z,typeof G=="string"&&this.createTextDecoder(G)};ka.prototype.init=function(L,G){this.startPts=L;for(var Z=0;Z<8;Z++)this.windows[Z]=new ar(Z),typeof G=="function"&&(this.windows[Z].beforeRowOverflow=G)},ka.prototype.setCurrentWindow=function(L){this.currentWindow=this.windows[L]},ka.prototype.createTextDecoder=function(L){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(L)}catch(G){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+L+" encoding. "+G})}};var tt=function(L){L=L||{},tt.prototype.init.call(this);var G=this,Z=L.captionServices||{},Q={},te;Object.keys(Z).forEach(ne=>{te=Z[ne],/^SERVICE/.test(ne)&&(Q[ne]=te.encoding)}),this.serviceEncodings=Q,this.current708Packet=null,this.services={},this.push=function(ne){ne.type===3?(G.new708Packet(),G.add708Bytes(ne)):(G.current708Packet===null&&G.new708Packet(),G.add708Bytes(ne))}};tt.prototype=new hr,tt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},tt.prototype.add708Bytes=function(L){var G=L.ccData,Z=G>>>8,Q=G&255;this.current708Packet.ptsVals.push(L.pts),this.current708Packet.data.push(Z),this.current708Packet.data.push(Q)},tt.prototype.push708Packet=function(){var L=this.current708Packet,G=L.data,Z=null,Q=null,te=0,ne=G[te++];for(L.seq=ne>>6,L.sizeCode=ne&63;te<G.length;te++)ne=G[te++],Z=ne>>5,Q=ne&31,Z===7&&Q>0&&(ne=G[te++],Z=ne),this.pushServiceBlock(Z,te,Q),Q>0&&(te+=Q-1)},tt.prototype.pushServiceBlock=function(L,G,Z){var Q,te=G,ne=this.current708Packet.data,le=this.services[L];for(le||(le=this.initService(L,te));te<G+Z&&te<ne.length;te++)Q=ne[te],Ga(Q)?te=this.handleText(te,le):Q===24?te=this.multiByteCharacter(te,le):Q===16?te=this.extendedCommands(te,le):128<=Q&&Q<=135?te=this.setCurrentWindow(te,le):152<=Q&&Q<=159?te=this.defineWindow(te,le):Q===136?te=this.clearWindows(te,le):Q===140?te=this.deleteWindows(te,le):Q===137?te=this.displayWindows(te,le):Q===138?te=this.hideWindows(te,le):Q===139?te=this.toggleWindows(te,le):Q===151?te=this.setWindowAttributes(te,le):Q===144?te=this.setPenAttributes(te,le):Q===145?te=this.setPenColor(te,le):Q===146?te=this.setPenLocation(te,le):Q===143?le=this.reset(te,le):Q===8?le.currentWindow.backspace():Q===12?le.currentWindow.clearText():Q===13?le.currentWindow.pendingNewLine=!0:Q===14?le.currentWindow.clearText():Q===141&&te++},tt.prototype.extendedCommands=function(L,G){var Z=this.current708Packet.data,Q=Z[++L];return Ga(Q)&&(L=this.handleText(L,G,{isExtended:!0})),L},tt.prototype.getPts=function(L){return this.current708Packet.ptsVals[Math.floor(L/2)]},tt.prototype.initService=function(L,G){var Q="SERVICE"+L,Z=this,Q,te;return Q in this.serviceEncodings&&(te=this.serviceEncodings[Q]),this.services[L]=new ka(L,te,Z),this.services[L].init(this.getPts(G),function(ne){Z.flushDisplayed(ne,Z.services[L])}),this.services[L]},tt.prototype.handleText=function(L,G,Z){var Q=Z&&Z.isExtended,te=Z&&Z.isMultiByte,ne=this.current708Packet.data,le=Q?4096:0,se=ne[L],ue=ne[L+1],he=G.currentWindow,we,Oe;function Ye(Fe){return Fe.map(dt=>("0"+(dt&255).toString(16)).slice(-2)).join("")}if(te?(Oe=[se,ue],L++):Oe=[se],G.textDecoder_&&!Q)we=G.textDecoder_.decode(new Uint8Array(Oe));else if(te){const Fe=Ye(Oe);we=String.fromCharCode(parseInt(Fe,16))}else we=Yo(le|se);return he.pendingNewLine&&!he.isEmpty()&&he.newLine(this.getPts(L)),he.pendingNewLine=!1,he.addText(we),L},tt.prototype.multiByteCharacter=function(L,G){var Z=this.current708Packet.data,Q=Z[L+1],te=Z[L+2];return Ga(Q)&&Ga(te)&&(L=this.handleText(++L,G,{isMultiByte:!0})),L},tt.prototype.setCurrentWindow=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=Q&7;return G.setCurrentWindow(te),L},tt.prototype.defineWindow=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=Q&7;G.setCurrentWindow(te);var ne=G.currentWindow;return Q=Z[++L],ne.visible=(Q&32)>>5,ne.rowLock=(Q&16)>>4,ne.columnLock=(Q&8)>>3,ne.priority=Q&7,Q=Z[++L],ne.relativePositioning=(Q&128)>>7,ne.anchorVertical=Q&127,Q=Z[++L],ne.anchorHorizontal=Q,Q=Z[++L],ne.anchorPoint=(Q&240)>>4,ne.rowCount=Q&15,Q=Z[++L],ne.columnCount=Q&63,Q=Z[++L],ne.windowStyle=(Q&56)>>3,ne.penStyle=Q&7,ne.virtualRowCount=ne.rowCount+1,L},tt.prototype.setWindowAttributes=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=G.currentWindow.winAttr;return Q=Z[++L],te.fillOpacity=(Q&192)>>6,te.fillRed=(Q&48)>>4,te.fillGreen=(Q&12)>>2,te.fillBlue=Q&3,Q=Z[++L],te.borderType=(Q&192)>>6,te.borderRed=(Q&48)>>4,te.borderGreen=(Q&12)>>2,te.borderBlue=Q&3,Q=Z[++L],te.borderType+=(Q&128)>>5,te.wordWrap=(Q&64)>>6,te.printDirection=(Q&48)>>4,te.scrollDirection=(Q&12)>>2,te.justify=Q&3,Q=Z[++L],te.effectSpeed=(Q&240)>>4,te.effectDirection=(Q&12)>>2,te.displayEffect=Q&3,L},tt.prototype.flushDisplayed=function(L,G){for(var Z=[],Q=0;Q<8;Q++)G.windows[Q].visible&&!G.windows[Q].isEmpty()&&Z.push(G.windows[Q].getText());G.endPts=L,G.text=Z.join(`

`),this.pushCaption(G),G.startPts=L},tt.prototype.pushCaption=function(L){L.text!==""&&(this.trigger("data",{startPts:L.startPts,endPts:L.endPts,text:L.text,stream:"cc708_"+L.serviceNum}),L.text="",L.startPts=L.endPts)},tt.prototype.displayWindows=function(L,G){var Z=this.current708Packet.data,Q=Z[++L],te=this.getPts(L);this.flushDisplayed(te,G);for(var ne=0;ne<8;ne++)Q&1<<ne&&(G.windows[ne].visible=1);return L},tt.prototype.hideWindows=function(L,G){var Z=this.current708Packet.data,Q=Z[++L],te=this.getPts(L);this.flushDisplayed(te,G);for(var ne=0;ne<8;ne++)Q&1<<ne&&(G.windows[ne].visible=0);return L},tt.prototype.toggleWindows=function(L,G){var Z=this.current708Packet.data,Q=Z[++L],te=this.getPts(L);this.flushDisplayed(te,G);for(var ne=0;ne<8;ne++)Q&1<<ne&&(G.windows[ne].visible^=1);return L},tt.prototype.clearWindows=function(L,G){var Z=this.current708Packet.data,Q=Z[++L],te=this.getPts(L);this.flushDisplayed(te,G);for(var ne=0;ne<8;ne++)Q&1<<ne&&G.windows[ne].clearText();return L},tt.prototype.deleteWindows=function(L,G){var Z=this.current708Packet.data,Q=Z[++L],te=this.getPts(L);this.flushDisplayed(te,G);for(var ne=0;ne<8;ne++)Q&1<<ne&&G.windows[ne].reset();return L},tt.prototype.setPenAttributes=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=G.currentWindow.penAttr;return Q=Z[++L],te.textTag=(Q&240)>>4,te.offset=(Q&12)>>2,te.penSize=Q&3,Q=Z[++L],te.italics=(Q&128)>>7,te.underline=(Q&64)>>6,te.edgeType=(Q&56)>>3,te.fontStyle=Q&7,L},tt.prototype.setPenColor=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=G.currentWindow.penColor;return Q=Z[++L],te.fgOpacity=(Q&192)>>6,te.fgRed=(Q&48)>>4,te.fgGreen=(Q&12)>>2,te.fgBlue=Q&3,Q=Z[++L],te.bgOpacity=(Q&192)>>6,te.bgRed=(Q&48)>>4,te.bgGreen=(Q&12)>>2,te.bgBlue=Q&3,Q=Z[++L],te.edgeRed=(Q&48)>>4,te.edgeGreen=(Q&12)>>2,te.edgeBlue=Q&3,L},tt.prototype.setPenLocation=function(L,G){var Z=this.current708Packet.data,Q=Z[L],te=G.currentWindow.penLoc;return G.currentWindow.pendingNewLine=!0,Q=Z[++L],te.row=Q&15,Q=Z[++L],te.column=Q&63,L},tt.prototype.reset=function(L,G){var Z=this.getPts(L);return this.flushDisplayed(Z,G),this.initService(G.serviceNum,L)};var to={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ya=function(L){return L===null?"":(L=to[L]||L,String.fromCharCode(L))},bi=14,Xo=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ir=function(){for(var L=[],G=bi+1;G--;)L.push({text:"",indent:0,offset:0});return L},Kt=function(L,G){Kt.prototype.init.call(this),this.field_=L||0,this.dataChannel_=G||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(Z){var Q,te,ne,le,se;if(Q=Z.ccData&32639,Q===this.lastControlCode_){this.lastControlCode_=null;return}if((Q&61440)===4096?this.lastControlCode_=Q:Q!==this.PADDING_&&(this.lastControlCode_=null),ne=Q>>>8,le=Q&255,Q!==this.PADDING_)if(Q===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(Q===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(Z.pts),this.flushDisplayed(Z.pts),te=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=te,this.startPts_=Z.pts;else if(Q===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(Z.pts);else if(Q===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(Z.pts);else if(Q===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(Z.pts);else if(Q===this.CARRIAGE_RETURN_)this.clearFormatting(Z.pts),this.flushDisplayed(Z.pts),this.shiftRowsUp_(),this.startPts_=Z.pts;else if(Q===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(Q===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(Z.pts),this.displayed_=ir();else if(Q===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ir();else if(Q===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(Z.pts),this.displayed_=ir()),this.mode_="paintOn",this.startPts_=Z.pts;else if(this.isSpecialCharacter(ne,le))ne=(ne&3)<<8,se=Ya(ne|le),this[this.mode_](Z.pts,se),this.column_++;else if(this.isExtCharacter(ne,le))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),ne=(ne&3)<<8,se=Ya(ne|le),this[this.mode_](Z.pts,se),this.column_++;else if(this.isMidRowCode(ne,le))this.clearFormatting(Z.pts),this[this.mode_](Z.pts," "),this.column_++,(le&14)===14&&this.addFormatting(Z.pts,["i"]),(le&1)===1&&this.addFormatting(Z.pts,["u"]);else if(this.isOffsetControlCode(ne,le)){const he=le&3;this.nonDisplayed_[this.row_].offset=he,this.column_+=he}else if(this.isPAC(ne,le)){var ue=Xo.indexOf(Q&7968);if(this.mode_==="rollUp"&&(ue-this.rollUpRows_+1<0&&(ue=this.rollUpRows_-1),this.setRollUp(Z.pts,ue)),ue!==this.row_&&ue>=0&&ue<=14&&(this.clearFormatting(Z.pts),this.row_=ue),le&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(Z.pts,["u"]),(Q&16)===16){const he=(Q&14)>>1;this.column_=he*4,this.nonDisplayed_[this.row_].indent+=he}this.isColorPAC(le)&&(le&14)===14&&this.addFormatting(Z.pts,["i"])}else this.isNormalChar(ne)&&(le===0&&(le=null),se=Ya(ne),se+=Ya(le),this[this.mode_](Z.pts,se),this.column_+=se.length)}};Kt.prototype=new hr,Kt.prototype.flushDisplayed=function(L){const G=Q=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+Q+"."})},Z=[];this.displayed_.forEach((Q,te)=>{if(Q&&Q.text&&Q.text.length){try{Q.text=Q.text.trim()}catch{G(te)}Q.text.length&&Z.push({text:Q.text,line:te+1,position:10+Math.min(70,Q.indent*10)+Q.offset*2.5})}else Q==null&&G(te)}),Z.length&&this.trigger("data",{startPts:this.startPts_,endPts:L,content:Z,stream:this.name_})},Kt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ir(),this.nonDisplayed_=ir(),this.lastControlCode_=null,this.column_=0,this.row_=bi,this.rollUpRows_=2,this.formatting_=[]},Kt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Kt.prototype.isSpecialCharacter=function(L,G){return L===this.EXT_&&G>=48&&G<=63},Kt.prototype.isExtCharacter=function(L,G){return(L===this.EXT_+1||L===this.EXT_+2)&&G>=32&&G<=63},Kt.prototype.isMidRowCode=function(L,G){return L===this.EXT_&&G>=32&&G<=47},Kt.prototype.isOffsetControlCode=function(L,G){return L===this.OFFSET_&&G>=33&&G<=35},Kt.prototype.isPAC=function(L,G){return L>=this.BASE_&&L<this.BASE_+8&&G>=64&&G<=127},Kt.prototype.isColorPAC=function(L){return L>=64&&L<=79||L>=96&&L<=127},Kt.prototype.isNormalChar=function(L){return L>=32&&L<=127},Kt.prototype.setRollUp=function(L,G){if(this.mode_!=="rollUp"&&(this.row_=bi,this.mode_="rollUp",this.flushDisplayed(L),this.nonDisplayed_=ir(),this.displayed_=ir()),G!==void 0&&G!==this.row_)for(var Z=0;Z<this.rollUpRows_;Z++)this.displayed_[G-Z]=this.displayed_[this.row_-Z],this.displayed_[this.row_-Z]={text:"",indent:0,offset:0};G===void 0&&(G=this.row_),this.topRow_=G-this.rollUpRows_+1},Kt.prototype.addFormatting=function(L,G){this.formatting_=this.formatting_.concat(G);var Z=G.reduce(function(Q,te){return Q+"<"+te+">"},"");this[this.mode_](L,Z)},Kt.prototype.clearFormatting=function(L){if(this.formatting_.length){var G=this.formatting_.reverse().reduce(function(Z,Q){return Z+"</"+Q+">"},"");this.formatting_=[],this[this.mode_](L,G)}},Kt.prototype.popOn=function(L,G){var Z=this.nonDisplayed_[this.row_].text;Z+=G,this.nonDisplayed_[this.row_].text=Z},Kt.prototype.rollUp=function(L,G){var Z=this.displayed_[this.row_].text;Z+=G,this.displayed_[this.row_].text=Z},Kt.prototype.shiftRowsUp_=function(){var L;for(L=0;L<this.topRow_;L++)this.displayed_[L]={text:"",indent:0,offset:0};for(L=this.row_+1;L<bi+1;L++)this.displayed_[L]={text:"",indent:0,offset:0};for(L=this.topRow_;L<this.row_;L++)this.displayed_[L]=this.displayed_[L+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Kt.prototype.paintOn=function(L,G){var Z=this.displayed_[this.row_].text;Z+=G,this.displayed_[this.row_].text=Z};var ld={CaptionStream:Xn,Cea608Stream:Kt,Cea708Stream:tt},Al={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Hs=n,Bt=8589934592,Rt=4294967296,Yt="shared",En=function(L,G){var Z=1;for(L>G&&(Z=-1);Math.abs(G-L)>Rt;)L+=Z*Bt;return L},Lr=function(L){var G,Z;Lr.prototype.init.call(this),this.type_=L||Yt,this.push=function(Q){if(Q.type==="metadata"){this.trigger("data",Q);return}this.type_!==Yt&&Q.type!==this.type_||(Z===void 0&&(Z=Q.dts),Q.dts=En(Q.dts,Z),Q.pts=En(Q.pts,Z),G=Q.dts,this.trigger("data",Q))},this.flush=function(){Z=G,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){Z=void 0,G=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Lr.prototype=new Hs;var ia={TimestampRolloverStream:Lr,handleRollover:En},no=(L,G,Z)=>{if(!L)return-1;for(var Q=Z;Q<L.length;Q++)if(L[Q]===G)return Q;return-1},sd={typedArrayIndexOf:no},ro=sd.typedArrayIndexOf,ao={Utf8:3},Bm=function(L,G,Z){var Q,te="";for(Q=G;Q<Z;Q++)te+="%"+("00"+L[Q].toString(16)).slice(-2);return te},Ws=function(L,G,Z){return decodeURIComponent(Bm(L,G,Z))},Ks=function(L,G,Z){return unescape(Bm(L,G,Z))},qs=function(L){return L[0]<<21|L[1]<<14|L[2]<<7|L[3]},wh={APIC:function(L){var G=1,Z,Q,te="-->";L.data[0]===ao.Utf8&&(Z=ro(L.data,0,G),!(Z<0)&&(L.mimeType=Ks(L.data,G,Z),G=Z+1,L.pictureType=L.data[G],G++,Q=ro(L.data,0,G),!(Q<0)&&(L.description=Ws(L.data,G,Q),G=Q+1,L.mimeType===te?L.url=Ks(L.data,G,L.data.length):L.pictureData=L.data.subarray(G,L.data.length))))},"T*":function(L){L.data[0]===ao.Utf8&&(L.value=Ws(L.data,1,L.data.length).replace(/\0*$/,""),L.values=L.value.split("\0"))},TXXX:function(L){var G;L.data[0]===ao.Utf8&&(G=ro(L.data,0,1),G!==-1&&(L.description=Ws(L.data,1,G),L.value=Ws(L.data,G+1,L.data.length).replace(/\0*$/,""),L.data=L.value))},"W*":function(L){L.url=Ks(L.data,0,L.data.length).replace(/\0.*$/,"")},WXXX:function(L){var G;L.data[0]===ao.Utf8&&(G=ro(L.data,0,1),G!==-1&&(L.description=Ws(L.data,1,G),L.url=Ks(L.data,G+1,L.data.length).replace(/\0.*$/,"")))},PRIV:function(L){var G;for(G=0;G<L.data.length;G++)if(L.data[G]===0){L.owner=Ks(L.data,0,G);break}L.privateData=L.data.subarray(G+1),L.data=L.privateData}},x3e=function(L){var G,Z,Q=10,te=0,ne=[];if(!(L.length<10||L[0]!==73||L[1]!==68||L[2]!==51)){te=qs(L.subarray(6,10)),te+=10;var le=L[5]&64;le&&(Q+=4,Q+=qs(L.subarray(10,14)),te-=qs(L.subarray(16,20)));do{if(G=qs(L.subarray(Q+4,Q+8)),G<1)break;Z=String.fromCharCode(L[Q],L[Q+1],L[Q+2],L[Q+3]);var se={id:Z,data:L.subarray(Q+10,Q+G+10)};se.key=se.id,wh[se.id]?wh[se.id](se):se.id[0]==="T"?wh["T*"](se):se.id[0]==="W"&&wh["W*"](se),ne.push(se),Q+=10,Q+=G}while(Q<te);return ne}},OF={parseId3Frames:x3e,parseSyncSafeInteger:qs,frameParsers:wh},C3e=n,_3e=Al,Nl=OF,jm;jm=function(L){var G={descriptor:L&&L.descriptor},Z=0,Q=[],te=0,ne;if(jm.prototype.init.call(this),this.dispatchType=_3e.METADATA_STREAM_TYPE.toString(16),G.descriptor)for(ne=0;ne<G.descriptor.length;ne++)this.dispatchType+=("00"+G.descriptor[ne].toString(16)).slice(-2);this.push=function(le){var se,ue,he,we,Oe,Ye;if(le.type==="timed-metadata"){if(le.dataAlignmentIndicator&&(te=0,Q.length=0),Q.length===0&&(le.data.length<10||le.data[0]!==73||le.data[1]!==68||le.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(Q.push(le),te+=le.data.byteLength,Q.length===1&&(Z=Nl.parseSyncSafeInteger(le.data.subarray(6,10)),Z+=10),!(te<Z)){for(se={data:new Uint8Array(Z),frames:[],pts:Q[0].pts,dts:Q[0].dts},Oe=0;Oe<Z;)se.data.set(Q[0].data.subarray(0,Z-Oe),Oe),Oe+=Q[0].data.byteLength,te-=Q[0].data.byteLength,Q.shift();ue=10,se.data[5]&64&&(ue+=4,ue+=Nl.parseSyncSafeInteger(se.data.subarray(10,14)),Z-=Nl.parseSyncSafeInteger(se.data.subarray(16,20)));do{if(he=Nl.parseSyncSafeInteger(se.data.subarray(ue+4,ue+8)),he<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ye=String.fromCharCode(se.data[ue],se.data[ue+1],se.data[ue+2],se.data[ue+3]),we={id:Ye,data:se.data.subarray(ue+10,ue+he+10)},we.key=we.id,Nl.frameParsers[we.id]?Nl.frameParsers[we.id](we):we.id[0]==="T"?Nl.frameParsers["T*"](we):we.id[0]==="W"&&Nl.frameParsers["W*"](we),we.owner==="com.apple.streaming.transportStreamTimestamp"){var Fe=we.data,dt=(Fe[3]&1)<<30|Fe[4]<<22|Fe[5]<<14|Fe[6]<<6|Fe[7]>>>2;dt*=4,dt+=Fe[7]&3,we.timeStamp=dt,se.pts===void 0&&se.dts===void 0&&(se.pts=we.timeStamp,se.dts=we.timeStamp),this.trigger("timestamp",we)}se.frames.push(we),ue+=10,ue+=he}while(ue<Z);this.trigger("data",se)}}}},jm.prototype=new C3e;var S3e=jm,lC=n,sC=ld,wi=Al,T3e=ia.TimestampRolloverStream,$m,xh,Um,cd=188,cC=71;$m=function(){var L=new Uint8Array(cd),G=0;$m.prototype.init.call(this),this.push=function(Z){var Q=0,te=cd,ne;for(G?(ne=new Uint8Array(Z.byteLength+G),ne.set(L.subarray(0,G)),ne.set(Z,G),G=0):ne=Z;te<ne.byteLength;){if(ne[Q]===cC&&ne[te]===cC){this.trigger("data",ne.subarray(Q,te)),Q+=cd,te+=cd;continue}Q++,te++}Q<ne.byteLength&&(L.set(ne.subarray(Q),0),G=ne.byteLength-Q)},this.flush=function(){G===cd&&L[0]===cC&&(this.trigger("data",L),G=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){G=0,this.trigger("reset")}},$m.prototype=new lC,xh=function(){var L,G,Z,Q;xh.prototype.init.call(this),Q=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,L=function(te,ne){var le=0;ne.payloadUnitStartIndicator&&(le+=te[le]+1),ne.type==="pat"?G(te.subarray(le),ne):Z(te.subarray(le),ne)},G=function(te,ne){ne.section_number=te[7],ne.last_section_number=te[8],Q.pmtPid=(te[10]&31)<<8|te[11],ne.pmtPid=Q.pmtPid},Z=function(te,ne){var le,se,ue,he;if(te[5]&1){for(Q.programMapTable={video:null,audio:null,"timed-metadata":{}},le=(te[1]&15)<<8|te[2],se=3+le-4,ue=(te[10]&15)<<8|te[11],he=12+ue;he<se;){var we=te[he],Oe=(te[he+1]&31)<<8|te[he+2];we===wi.H264_STREAM_TYPE&&Q.programMapTable.video===null?Q.programMapTable.video=Oe:we===wi.ADTS_STREAM_TYPE&&Q.programMapTable.audio===null?Q.programMapTable.audio=Oe:we===wi.METADATA_STREAM_TYPE&&(Q.programMapTable["timed-metadata"][Oe]=we),he+=((te[he+3]&15)<<8|te[he+4])+5}ne.programMapTable=Q.programMapTable}},this.push=function(te){var ne={},le=4;if(ne.payloadUnitStartIndicator=!!(te[1]&64),ne.pid=te[1]&31,ne.pid<<=8,ne.pid|=te[2],(te[3]&48)>>>4>1&&(le+=te[le]+1),ne.pid===0)ne.type="pat",L(te.subarray(le),ne),this.trigger("data",ne);else if(ne.pid===this.pmtPid)for(ne.type="pmt",L(te.subarray(le),ne),this.trigger("data",ne);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([te,le,ne]):this.processPes_(te,le,ne)},this.processPes_=function(te,ne,le){le.pid===this.programMapTable.video?le.streamType=wi.H264_STREAM_TYPE:le.pid===this.programMapTable.audio?le.streamType=wi.ADTS_STREAM_TYPE:le.streamType=this.programMapTable["timed-metadata"][le.pid],le.type="pes",le.data=te.subarray(ne),this.trigger("data",le)}},xh.prototype=new lC,xh.STREAM_TYPES={h264:27,adts:15},Um=function(){var L=this,G=!1,Z={data:[],size:0},Q={data:[],size:0},te={data:[],size:0},ne,le=function(ue,he){var we;const Oe=ue[0]<<16|ue[1]<<8|ue[2];he.data=new Uint8Array,Oe===1&&(he.packetLength=6+(ue[4]<<8|ue[5]),he.dataAlignmentIndicator=(ue[6]&4)!==0,we=ue[7],we&192&&(he.pts=(ue[9]&14)<<27|(ue[10]&255)<<20|(ue[11]&254)<<12|(ue[12]&255)<<5|(ue[13]&254)>>>3,he.pts*=4,he.pts+=(ue[13]&6)>>>1,he.dts=he.pts,we&64&&(he.dts=(ue[14]&14)<<27|(ue[15]&255)<<20|(ue[16]&254)<<12|(ue[17]&255)<<5|(ue[18]&254)>>>3,he.dts*=4,he.dts+=(ue[18]&6)>>>1)),he.data=ue.subarray(9+ue[8]))},se=function(ue,he,we){var Oe=new Uint8Array(ue.size),Ye={type:he},Fe=0,dt=0,It=!1,or;if(!(!ue.data.length||ue.size<9)){for(Ye.trackId=ue.data[0].pid,Fe=0;Fe<ue.data.length;Fe++)or=ue.data[Fe],Oe.set(or.data,dt),dt+=or.data.byteLength;le(Oe,Ye),It=he==="video"||Ye.packetLength<=ue.size,(we||It)&&(ue.size=0,ue.data.length=0),It&&L.trigger("data",Ye)}};Um.prototype.init.call(this),this.push=function(ue){({pat:function(){},pes:function(){var he,we;switch(ue.streamType){case wi.H264_STREAM_TYPE:he=Z,we="video";break;case wi.ADTS_STREAM_TYPE:he=Q,we="audio";break;case wi.METADATA_STREAM_TYPE:he=te,we="timed-metadata";break;default:return}ue.payloadUnitStartIndicator&&se(he,we,!0),he.data.push(ue),he.size+=ue.data.byteLength},pmt:function(){var he={type:"metadata",tracks:[]};ne=ue.programMapTable,ne.video!==null&&he.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ne.video,codec:"avc",type:"video"}),ne.audio!==null&&he.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ne.audio,codec:"adts",type:"audio"}),G=!0,L.trigger("data",he)}})[ue.type]()},this.reset=function(){Z.size=0,Z.data.length=0,Q.size=0,Q.data.length=0,this.trigger("reset")},this.flushStreams_=function(){se(Z,"video"),se(Q,"audio"),se(te,"timed-metadata")},this.flush=function(){if(!G&&ne){var ue={type:"metadata",tracks:[]};ne.video!==null&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ne.video,codec:"avc",type:"video"}),ne.audio!==null&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ne.audio,codec:"adts",type:"audio"}),L.trigger("data",ue)}G=!1,this.flushStreams_(),this.trigger("done")}},Um.prototype=new lC;var EF={PAT_PID:0,MP2T_PACKET_LENGTH:cd,TransportPacketStream:$m,TransportParseStream:xh,ElementaryStream:Um,TimestampRolloverStream:T3e,CaptionStream:sC.CaptionStream,Cea608Stream:sC.Cea608Stream,Cea708Stream:sC.Cea708Stream,MetadataStream:S3e};for(var uC in wi)wi.hasOwnProperty(uC)&&(EF[uC]=wi[uC]);var k3e=EF,O3e=n,E3e=De.ONE_SECOND_IN_TS,zm,PF=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];zm=function(L){var G,Z=0;zm.prototype.init.call(this),this.skipWarn_=function(Q,te){this.trigger("log",{level:"warn",message:`adts skiping bytes ${Q} to ${te} in frame ${Z} outside syncword`})},this.push=function(Q){var te=0,ne,le,se,ue,he;if(L||(Z=0),Q.type==="audio"){G&&G.length?(se=G,G=new Uint8Array(se.byteLength+Q.data.byteLength),G.set(se),G.set(Q.data,se.byteLength)):G=Q.data;for(var we;te+7<G.length;){if(G[te]!==255||(G[te+1]&246)!==240){typeof we!="number"&&(we=te),te++;continue}if(typeof we=="number"&&(this.skipWarn_(we,te),we=null),le=(~G[te+1]&1)*2,ne=(G[te+3]&3)<<11|G[te+4]<<3|(G[te+5]&224)>>5,ue=((G[te+6]&3)+1)*1024,he=ue*E3e/PF[(G[te+2]&60)>>>2],G.byteLength-te<ne)break;this.trigger("data",{pts:Q.pts+Z*he,dts:Q.dts+Z*he,sampleCount:ue,audioobjecttype:(G[te+2]>>>6&3)+1,channelcount:(G[te+2]&1)<<2|(G[te+3]&192)>>>6,samplerate:PF[(G[te+2]&60)>>>2],samplingfrequencyindex:(G[te+2]&60)>>>2,samplesize:16,data:G.subarray(te+7+le,te+ne)}),Z++,te+=ne}typeof we=="number"&&(this.skipWarn_(we,te),we=null),G=G.subarray(te)}},this.flush=function(){Z=0,this.trigger("done")},this.reset=function(){G=void 0,this.trigger("reset")},this.endTimeline=function(){G=void 0,this.trigger("endedtimeline")}},zm.prototype=new O3e;var P3e=zm,IF;IF=function(L){var G=L.byteLength,Z=0,Q=0;this.length=function(){return 8*G},this.bitsAvailable=function(){return 8*G+Q},this.loadWord=function(){var te=L.byteLength-G,ne=new Uint8Array(4),le=Math.min(4,G);if(le===0)throw new Error("no bytes available");ne.set(L.subarray(te,te+le)),Z=new DataView(ne.buffer).getUint32(0),Q=le*8,G-=le},this.skipBits=function(te){var ne;Q>te?(Z<<=te,Q-=te):(te-=Q,ne=Math.floor(te/8),te-=ne*8,G-=ne,this.loadWord(),Z<<=te,Q-=te)},this.readBits=function(te){var ne=Math.min(Q,te),le=Z>>>32-ne;return Q-=ne,Q>0?Z<<=ne:G>0&&this.loadWord(),ne=te-ne,ne>0?le<<ne|this.readBits(ne):le},this.skipLeadingZeros=function(){var te;for(te=0;te<Q;++te)if(Z&2147483648>>>te)return Z<<=te,Q-=te,te;return this.loadWord(),te+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var te=this.skipLeadingZeros();return this.readBits(te+1)-1},this.readExpGolomb=function(){var te=this.readUnsignedExpGolomb();return 1&te?1+te>>>1:-1*(te>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var I3e=IF,AF=n,A3e=I3e,Hm,Wm,NF;Wm=function(){var L=0,G,Z;Wm.prototype.init.call(this),this.push=function(Q){var te;Z?(te=new Uint8Array(Z.byteLength+Q.data.byteLength),te.set(Z),te.set(Q.data,Z.byteLength),Z=te):Z=Q.data;for(var ne=Z.byteLength;L<ne-3;L++)if(Z[L+2]===1){G=L+5;break}for(;G<ne;)switch(Z[G]){case 0:if(Z[G-1]!==0){G+=2;break}else if(Z[G-2]!==0){G++;break}L+3!==G-2&&this.trigger("data",Z.subarray(L+3,G-2));do G++;while(Z[G]!==1&&G<ne);L=G-2,G+=3;break;case 1:if(Z[G-1]!==0||Z[G-2]!==0){G+=3;break}this.trigger("data",Z.subarray(L+3,G-2)),L=G-2,G+=3;break;default:G+=3;break}Z=Z.subarray(L),G-=L,L=0},this.reset=function(){Z=null,L=0,this.trigger("reset")},this.flush=function(){Z&&Z.byteLength>3&&this.trigger("data",Z.subarray(L+3)),Z=null,L=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Wm.prototype=new AF,NF={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Hm=function(){var L=new Wm,G,Z,Q,te,ne,le,se;Hm.prototype.init.call(this),G=this,this.push=function(ue){ue.type==="video"&&(Z=ue.trackId,Q=ue.pts,te=ue.dts,L.push(ue))},L.on("data",function(ue){var he={trackId:Z,pts:Q,dts:te,data:ue,nalUnitTypeCode:ue[0]&31};switch(he.nalUnitTypeCode){case 5:he.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:he.nalUnitType="sei_rbsp",he.escapedRBSP=ne(ue.subarray(1));break;case 7:he.nalUnitType="seq_parameter_set_rbsp",he.escapedRBSP=ne(ue.subarray(1)),he.config=le(he.escapedRBSP);break;case 8:he.nalUnitType="pic_parameter_set_rbsp";break;case 9:he.nalUnitType="access_unit_delimiter_rbsp";break}G.trigger("data",he)}),L.on("done",function(){G.trigger("done")}),L.on("partialdone",function(){G.trigger("partialdone")}),L.on("reset",function(){G.trigger("reset")}),L.on("endedtimeline",function(){G.trigger("endedtimeline")}),this.flush=function(){L.flush()},this.partialFlush=function(){L.partialFlush()},this.reset=function(){L.reset()},this.endTimeline=function(){L.endTimeline()},se=function(ue,he){var we=8,Oe=8,Ye,Fe;for(Ye=0;Ye<ue;Ye++)Oe!==0&&(Fe=he.readExpGolomb(),Oe=(we+Fe+256)%256),we=Oe===0?we:Oe},ne=function(ue){for(var he=ue.byteLength,we=[],Oe=1,Ye,Fe;Oe<he-2;)ue[Oe]===0&&ue[Oe+1]===0&&ue[Oe+2]===3?(we.push(Oe+2),Oe+=2):Oe++;if(we.length===0)return ue;Ye=he-we.length,Fe=new Uint8Array(Ye);var dt=0;for(Oe=0;Oe<Ye;dt++,Oe++)dt===we[0]&&(dt++,we.shift()),Fe[Oe]=ue[dt];return Fe},le=function(ue){var he=0,we=0,Oe=0,Ye=0,Fe,dt,It,or,Oa,Rl,Eh,Ph,Ih,Ah,n0,pn=[1,1],Nh,Ci;if(Fe=new A3e(ue),dt=Fe.readUnsignedByte(),or=Fe.readUnsignedByte(),It=Fe.readUnsignedByte(),Fe.skipUnsignedExpGolomb(),NF[dt]&&(Oa=Fe.readUnsignedExpGolomb(),Oa===3&&Fe.skipBits(1),Fe.skipUnsignedExpGolomb(),Fe.skipUnsignedExpGolomb(),Fe.skipBits(1),Fe.readBoolean()))for(n0=Oa!==3?8:12,Ci=0;Ci<n0;Ci++)Fe.readBoolean()&&(Ci<6?se(16,Fe):se(64,Fe));if(Fe.skipUnsignedExpGolomb(),Rl=Fe.readUnsignedExpGolomb(),Rl===0)Fe.readUnsignedExpGolomb();else if(Rl===1)for(Fe.skipBits(1),Fe.skipExpGolomb(),Fe.skipExpGolomb(),Eh=Fe.readUnsignedExpGolomb(),Ci=0;Ci<Eh;Ci++)Fe.skipExpGolomb();if(Fe.skipUnsignedExpGolomb(),Fe.skipBits(1),Ph=Fe.readUnsignedExpGolomb(),Ih=Fe.readUnsignedExpGolomb(),Ah=Fe.readBits(1),Ah===0&&Fe.skipBits(1),Fe.skipBits(1),Fe.readBoolean()&&(he=Fe.readUnsignedExpGolomb(),we=Fe.readUnsignedExpGolomb(),Oe=Fe.readUnsignedExpGolomb(),Ye=Fe.readUnsignedExpGolomb()),Fe.readBoolean()&&Fe.readBoolean()){switch(Nh=Fe.readUnsignedByte(),Nh){case 1:pn=[1,1];break;case 2:pn=[12,11];break;case 3:pn=[10,11];break;case 4:pn=[16,11];break;case 5:pn=[40,33];break;case 6:pn=[24,11];break;case 7:pn=[20,11];break;case 8:pn=[32,11];break;case 9:pn=[80,33];break;case 10:pn=[18,11];break;case 11:pn=[15,11];break;case 12:pn=[64,33];break;case 13:pn=[160,99];break;case 14:pn=[4,3];break;case 15:pn=[3,2];break;case 16:pn=[2,1];break;case 255:{pn=[Fe.readUnsignedByte()<<8|Fe.readUnsignedByte(),Fe.readUnsignedByte()<<8|Fe.readUnsignedByte()];break}}pn&&pn[0]/pn[1]}return{profileIdc:dt,levelIdc:It,profileCompatibility:or,width:(Ph+1)*16-he*2-we*2,height:(2-Ah)*(Ih+1)*16-Oe*2-Ye*2,sarRatio:pn}}},Hm.prototype=new AF;var N3e={H264Stream:Hm},D3e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],DF=function(L,G){var Z=L[G+6]<<21|L[G+7]<<14|L[G+8]<<7|L[G+9],Q=L[G+5],te=(Q&16)>>4;return Z=Z>=0?Z:0,te?Z+20:Z+10},RF=function(L,G){return L.length-G<10||L[G]!==73||L[G+1]!==68||L[G+2]!==51?G:(G+=DF(L,G),RF(L,G))},R3e=function(L){var G=RF(L,0);return L.length>=G+2&&(L[G]&255)===255&&(L[G+1]&240)===240&&(L[G+1]&22)===16},MF=function(L){return L[0]<<21|L[1]<<14|L[2]<<7|L[3]},M3e=function(L,G,Z){var Q,te="";for(Q=G;Q<Z;Q++)te+="%"+("00"+L[Q].toString(16)).slice(-2);return te},L3e=function(L,G,Z){return unescape(M3e(L,G,Z))},F3e=function(L,G){var Z=(L[G+5]&224)>>5,Q=L[G+4]<<3,te=L[G+3]&6144;return te|Q|Z},B3e=function(L,G){return L[G]===73&&L[G+1]===68&&L[G+2]===51?"timed-metadata":L[G]&!0&&(L[G+1]&240)===240?"audio":null},j3e=function(L){for(var G=0;G+5<L.length;){if(L[G]!==255||(L[G+1]&246)!==240){G++;continue}return D3e[(L[G+2]&60)>>>2]}return null},$3e=function(L){var G,Z,Q,te;G=10,L[5]&64&&(G+=4,G+=MF(L.subarray(10,14)));do{if(Z=MF(L.subarray(G+4,G+8)),Z<1)return null;if(te=String.fromCharCode(L[G],L[G+1],L[G+2],L[G+3]),te==="PRIV"){Q=L.subarray(G+10,G+Z+10);for(var ne=0;ne<Q.byteLength;ne++)if(Q[ne]===0){var le=L3e(Q,0,ne);if(le==="com.apple.streaming.transportStreamTimestamp"){var se=Q.subarray(ne+1),ue=(se[3]&1)<<30|se[4]<<22|se[5]<<14|se[6]<<6|se[7]>>>2;return ue*=4,ue+=se[7]&3,ue}break}}G+=10,G+=Z}while(G<L.byteLength);return null},dC={isLikelyAacData:R3e,parseId3TagSize:DF,parseAdtsSize:F3e,parseType:B3e,parseSampleRate:j3e,parseAacTimestamp:$3e},U3e=n,LF=dC,Km;Km=function(){var L=new Uint8Array,G=0;Km.prototype.init.call(this),this.setTimestamp=function(Z){G=Z},this.push=function(Z){var Q=0,te=0,ne,le,se,ue;for(L.length?(ue=L.length,L=new Uint8Array(Z.byteLength+ue),L.set(L.subarray(0,ue)),L.set(Z,ue)):L=Z;L.length-te>=3;){if(L[te]===73&&L[te+1]===68&&L[te+2]===51){if(L.length-te<10||(Q=LF.parseId3TagSize(L,te),te+Q>L.length))break;le={type:"timed-metadata",data:L.subarray(te,te+Q)},this.trigger("data",le),te+=Q;continue}else if((L[te]&255)===255&&(L[te+1]&240)===240){if(L.length-te<7||(Q=LF.parseAdtsSize(L,te),te+Q>L.length))break;se={type:"audio",data:L.subarray(te,te+Q),pts:G,dts:G},this.trigger("data",se),te+=Q;continue}te++}ne=L.length-te,ne>0?L=L.subarray(te):L=new Uint8Array},this.reset=function(){L=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){L=new Uint8Array,this.trigger("endedtimeline")}},Km.prototype=new U3e;var z3e=Km,H3e=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],W3e=H3e,K3e=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],q3e=K3e,qm=n,Ch=z,_h=ge,Gm=Rr,xi=qa,Jo=k3e,Ym=De,FF=P3e,G3e=N3e.H264Stream,Y3e=z3e,X3e=dC.isLikelyAacData,J3e=De.ONE_SECOND_IN_TS,BF=W3e,jF=q3e,Xm,Sh,Jm,Gs,Q3e=function(L,G){G.stream=L,this.trigger("log",G)},$F=function(L,G){for(var Z=Object.keys(G),Q=0;Q<Z.length;Q++){var te=Z[Q];te==="headOfPipeline"||!G[te].on||G[te].on("log",Q3e.bind(L,te))}},UF=function(L,G){var Z;if(L.length!==G.length)return!1;for(Z=0;Z<L.length;Z++)if(L[Z]!==G[Z])return!1;return!0},zF=function(L,G,Z,Q,te,ne){var le=Z-G,se=Q-G,ue=te-Z;return{start:{dts:L,pts:L+le},end:{dts:L+se,pts:L+ue},prependedContentDuration:ne,baseMediaDecodeTime:L}};Sh=function(L,G){var Z=[],Q,te=0,ne=0,le=1/0;G=G||{},Q=G.firstSequenceNumber||0,Sh.prototype.init.call(this),this.push=function(se){xi.collectDtsInfo(L,se),L&&BF.forEach(function(ue){L[ue]=se[ue]}),Z.push(se)},this.setEarliestDts=function(se){te=se},this.setVideoBaseMediaDecodeTime=function(se){le=se},this.setAudioAppendStart=function(se){ne=se},this.flush=function(){var se,ue,he,we,Oe,Ye,Fe;if(Z.length===0){this.trigger("done","AudioSegmentStream");return}se=Gm.trimAdtsFramesByEarliestDts(Z,L,te),L.baseMediaDecodeTime=xi.calculateTrackBaseMediaDecodeTime(L,G.keepOriginalTimestamps),Fe=Gm.prefixWithSilence(L,se,ne,le),L.samples=Gm.generateSampleTable(se),he=Ch.mdat(Gm.concatenateFrameData(se)),Z=[],ue=Ch.moof(Q,[L]),we=new Uint8Array(ue.byteLength+he.byteLength),Q++,we.set(ue),we.set(he,ue.byteLength),xi.clearDtsInfo(L),Oe=Math.ceil(J3e*1024/L.samplerate),se.length&&(Ye=se.length*Oe,this.trigger("segmentTimingInfo",zF(Ym.audioTsToVideoTs(L.baseMediaDecodeTime,L.samplerate),se[0].dts,se[0].pts,se[0].dts+Ye,se[0].pts+Ye,Fe||0)),this.trigger("timingInfo",{start:se[0].pts,end:se[0].pts+Ye})),this.trigger("data",{track:L,boxes:we}),this.trigger("done","AudioSegmentStream")},this.reset=function(){xi.clearDtsInfo(L),Z=[],this.trigger("reset")}},Sh.prototype=new qm,Xm=function(L,G){var Z,Q=[],te=[],ne,le;G=G||{},Z=G.firstSequenceNumber||0,Xm.prototype.init.call(this),delete L.minPTS,this.gopCache_=[],this.push=function(se){xi.collectDtsInfo(L,se),se.nalUnitType==="seq_parameter_set_rbsp"&&!ne&&(ne=se.config,L.sps=[se.data],jF.forEach(function(ue){L[ue]=ne[ue]},this)),se.nalUnitType==="pic_parameter_set_rbsp"&&!le&&(le=se.data,L.pps=[se.data]),Q.push(se)},this.flush=function(){for(var se,ue,he,we,Oe,Ye,Fe=0,dt,It;Q.length&&Q[0].nalUnitType!=="access_unit_delimiter_rbsp";)Q.shift();if(Q.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(se=_h.groupNalsIntoFrames(Q),he=_h.groupFramesIntoGops(se),he[0][0].keyFrame||(ue=this.getGopForFusion_(Q[0],L),ue?(Fe=ue.duration,he.unshift(ue),he.byteLength+=ue.byteLength,he.nalCount+=ue.nalCount,he.pts=ue.pts,he.dts=ue.dts,he.duration+=ue.duration):he=_h.extendFirstKeyFrame(he)),te.length){var or;if(G.alignGopsAtEnd?or=this.alignGopsAtEnd_(he):or=this.alignGopsAtStart_(he),!or){this.gopCache_.unshift({gop:he.pop(),pps:L.pps,sps:L.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Q=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}xi.clearDtsInfo(L),he=or}xi.collectDtsInfo(L,he),L.samples=_h.generateSampleTable(he),Oe=Ch.mdat(_h.concatenateNalData(he)),L.baseMediaDecodeTime=xi.calculateTrackBaseMediaDecodeTime(L,G.keepOriginalTimestamps),this.trigger("processedGopsInfo",he.map(function(Oa){return{pts:Oa.pts,dts:Oa.dts,byteLength:Oa.byteLength}})),dt=he[0],It=he[he.length-1],this.trigger("segmentTimingInfo",zF(L.baseMediaDecodeTime,dt.dts,dt.pts,It.dts+It.duration,It.pts+It.duration,Fe)),this.trigger("timingInfo",{start:he[0].pts,end:he[he.length-1].pts+he[he.length-1].duration}),this.gopCache_.unshift({gop:he.pop(),pps:L.pps,sps:L.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Q=[],this.trigger("baseMediaDecodeTime",L.baseMediaDecodeTime),this.trigger("timelineStartInfo",L.timelineStartInfo),we=Ch.moof(Z,[L]),Ye=new Uint8Array(we.byteLength+Oe.byteLength),Z++,Ye.set(we),Ye.set(Oe,we.byteLength),this.trigger("data",{track:L,boxes:Ye}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),Q=[],this.gopCache_.length=0,te.length=0,this.trigger("reset")},this.resetStream_=function(){xi.clearDtsInfo(L),ne=void 0,le=void 0},this.getGopForFusion_=function(se){var ue=45e3,he=1/0,we,Oe,Ye,Fe,dt;for(dt=0;dt<this.gopCache_.length;dt++)Fe=this.gopCache_[dt],Ye=Fe.gop,!(!(L.pps&&UF(L.pps[0],Fe.pps[0]))||!(L.sps&&UF(L.sps[0],Fe.sps[0])))&&(Ye.dts<L.timelineStartInfo.dts||(we=se.dts-Ye.dts-Ye.duration,we>=-1e4&&we<=ue&&(!Oe||he>we)&&(Oe=Fe,he=we)));return Oe?Oe.gop:null},this.alignGopsAtStart_=function(se){var ue,he,we,Oe,Ye,Fe,dt,It;for(Ye=se.byteLength,Fe=se.nalCount,dt=se.duration,ue=he=0;ue<te.length&&he<se.length&&(we=te[ue],Oe=se[he],we.pts!==Oe.pts);){if(Oe.pts>we.pts){ue++;continue}he++,Ye-=Oe.byteLength,Fe-=Oe.nalCount,dt-=Oe.duration}return he===0?se:he===se.length?null:(It=se.slice(he),It.byteLength=Ye,It.duration=dt,It.nalCount=Fe,It.pts=It[0].pts,It.dts=It[0].dts,It)},this.alignGopsAtEnd_=function(se){var ue,he,we,Oe,Ye,Fe;for(ue=te.length-1,he=se.length-1,Ye=null,Fe=!1;ue>=0&&he>=0;){if(we=te[ue],Oe=se[he],we.pts===Oe.pts){Fe=!0;break}if(we.pts>Oe.pts){ue--;continue}ue===te.length-1&&(Ye=he),he--}if(!Fe&&Ye===null)return null;var dt;if(Fe?dt=he:dt=Ye,dt===0)return se;var It=se.slice(dt),or=It.reduce(function(Oa,Rl){return Oa.byteLength+=Rl.byteLength,Oa.duration+=Rl.duration,Oa.nalCount+=Rl.nalCount,Oa},{byteLength:0,duration:0,nalCount:0});return It.byteLength=or.byteLength,It.duration=or.duration,It.nalCount=or.nalCount,It.pts=It[0].pts,It.dts=It[0].dts,It},this.alignGopsWith=function(se){te=se}},Xm.prototype=new qm,Gs=function(L,G){this.numberOfTracks=0,this.metadataStream=G,L=L||{},typeof L.remux<"u"?this.remuxTracks=!!L.remux:this.remuxTracks=!0,typeof L.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=L.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Gs.prototype.init.call(this),this.push=function(Z){if(Z.content||Z.text)return this.pendingCaptions.push(Z);if(Z.frames)return this.pendingMetadata.push(Z);this.pendingTracks.push(Z.track),this.pendingBytes+=Z.boxes.byteLength,Z.track.type==="video"&&(this.videoTrack=Z.track,this.pendingBoxes.push(Z.boxes)),Z.track.type==="audio"&&(this.audioTrack=Z.track,this.pendingBoxes.unshift(Z.boxes))}},Gs.prototype=new qm,Gs.prototype.flush=function(L){var G=0,Z={captions:[],captionStreams:{},metadata:[],info:{}},Q,te,ne,le=0,se;if(this.pendingTracks.length<this.numberOfTracks){if(L!=="VideoSegmentStream"&&L!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(le=this.videoTrack.timelineStartInfo.pts,jF.forEach(function(ue){Z.info[ue]=this.videoTrack[ue]},this)):this.audioTrack&&(le=this.audioTrack.timelineStartInfo.pts,BF.forEach(function(ue){Z.info[ue]=this.audioTrack[ue]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?Z.type=this.pendingTracks[0].type:Z.type="combined",this.emittedTracks+=this.pendingTracks.length,ne=Ch.initSegment(this.pendingTracks),Z.initSegment=new Uint8Array(ne.byteLength),Z.initSegment.set(ne),Z.data=new Uint8Array(this.pendingBytes),se=0;se<this.pendingBoxes.length;se++)Z.data.set(this.pendingBoxes[se],G),G+=this.pendingBoxes[se].byteLength;for(se=0;se<this.pendingCaptions.length;se++)Q=this.pendingCaptions[se],Q.startTime=Ym.metadataTsToSeconds(Q.startPts,le,this.keepOriginalTimestamps),Q.endTime=Ym.metadataTsToSeconds(Q.endPts,le,this.keepOriginalTimestamps),Z.captionStreams[Q.stream]=!0,Z.captions.push(Q);for(se=0;se<this.pendingMetadata.length;se++)te=this.pendingMetadata[se],te.cueTime=Ym.metadataTsToSeconds(te.pts,le,this.keepOriginalTimestamps),Z.metadata.push(te);for(Z.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",Z),se=0;se<Z.captions.length;se++)Q=Z.captions[se],this.trigger("caption",Q);for(se=0;se<Z.metadata.length;se++)te=Z.metadata[se],this.trigger("id3Frame",te)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Gs.prototype.setRemux=function(L){this.remuxTracks=L},Jm=function(L){var G=this,Z=!0,Q,te;Jm.prototype.init.call(this),L=L||{},this.baseMediaDecodeTime=L.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var ne={};this.transmuxPipeline_=ne,ne.type="aac",ne.metadataStream=new Jo.MetadataStream,ne.aacStream=new Y3e,ne.audioTimestampRolloverStream=new Jo.TimestampRolloverStream("audio"),ne.timedMetadataTimestampRolloverStream=new Jo.TimestampRolloverStream("timed-metadata"),ne.adtsStream=new FF,ne.coalesceStream=new Gs(L,ne.metadataStream),ne.headOfPipeline=ne.aacStream,ne.aacStream.pipe(ne.audioTimestampRolloverStream).pipe(ne.adtsStream),ne.aacStream.pipe(ne.timedMetadataTimestampRolloverStream).pipe(ne.metadataStream).pipe(ne.coalesceStream),ne.metadataStream.on("timestamp",function(le){ne.aacStream.setTimestamp(le.timeStamp)}),ne.aacStream.on("data",function(le){le.type!=="timed-metadata"&&le.type!=="audio"||ne.audioSegmentStream||(te=te||{timelineStartInfo:{baseMediaDecodeTime:G.baseMediaDecodeTime},codec:"adts",type:"audio"},ne.coalesceStream.numberOfTracks++,ne.audioSegmentStream=new Sh(te,L),ne.audioSegmentStream.on("log",G.getLogTrigger_("audioSegmentStream")),ne.audioSegmentStream.on("timingInfo",G.trigger.bind(G,"audioTimingInfo")),ne.adtsStream.pipe(ne.audioSegmentStream).pipe(ne.coalesceStream),G.trigger("trackinfo",{hasAudio:!!te,hasVideo:!!Q}))}),ne.coalesceStream.on("data",this.trigger.bind(this,"data")),ne.coalesceStream.on("done",this.trigger.bind(this,"done")),$F(this,ne)},this.setupTsPipeline=function(){var ne={};this.transmuxPipeline_=ne,ne.type="ts",ne.metadataStream=new Jo.MetadataStream,ne.packetStream=new Jo.TransportPacketStream,ne.parseStream=new Jo.TransportParseStream,ne.elementaryStream=new Jo.ElementaryStream,ne.timestampRolloverStream=new Jo.TimestampRolloverStream,ne.adtsStream=new FF,ne.h264Stream=new G3e,ne.captionStream=new Jo.CaptionStream(L),ne.coalesceStream=new Gs(L,ne.metadataStream),ne.headOfPipeline=ne.packetStream,ne.packetStream.pipe(ne.parseStream).pipe(ne.elementaryStream).pipe(ne.timestampRolloverStream),ne.timestampRolloverStream.pipe(ne.h264Stream),ne.timestampRolloverStream.pipe(ne.adtsStream),ne.timestampRolloverStream.pipe(ne.metadataStream).pipe(ne.coalesceStream),ne.h264Stream.pipe(ne.captionStream).pipe(ne.coalesceStream),ne.elementaryStream.on("data",function(le){var se;if(le.type==="metadata"){for(se=le.tracks.length;se--;)!Q&&le.tracks[se].type==="video"?(Q=le.tracks[se],Q.timelineStartInfo.baseMediaDecodeTime=G.baseMediaDecodeTime):!te&&le.tracks[se].type==="audio"&&(te=le.tracks[se],te.timelineStartInfo.baseMediaDecodeTime=G.baseMediaDecodeTime);Q&&!ne.videoSegmentStream&&(ne.coalesceStream.numberOfTracks++,ne.videoSegmentStream=new Xm(Q,L),ne.videoSegmentStream.on("log",G.getLogTrigger_("videoSegmentStream")),ne.videoSegmentStream.on("timelineStartInfo",function(ue){te&&!L.keepOriginalTimestamps&&(te.timelineStartInfo=ue,ne.audioSegmentStream.setEarliestDts(ue.dts-G.baseMediaDecodeTime))}),ne.videoSegmentStream.on("processedGopsInfo",G.trigger.bind(G,"gopInfo")),ne.videoSegmentStream.on("segmentTimingInfo",G.trigger.bind(G,"videoSegmentTimingInfo")),ne.videoSegmentStream.on("baseMediaDecodeTime",function(ue){te&&ne.audioSegmentStream.setVideoBaseMediaDecodeTime(ue)}),ne.videoSegmentStream.on("timingInfo",G.trigger.bind(G,"videoTimingInfo")),ne.h264Stream.pipe(ne.videoSegmentStream).pipe(ne.coalesceStream)),te&&!ne.audioSegmentStream&&(ne.coalesceStream.numberOfTracks++,ne.audioSegmentStream=new Sh(te,L),ne.audioSegmentStream.on("log",G.getLogTrigger_("audioSegmentStream")),ne.audioSegmentStream.on("timingInfo",G.trigger.bind(G,"audioTimingInfo")),ne.audioSegmentStream.on("segmentTimingInfo",G.trigger.bind(G,"audioSegmentTimingInfo")),ne.adtsStream.pipe(ne.audioSegmentStream).pipe(ne.coalesceStream)),G.trigger("trackinfo",{hasAudio:!!te,hasVideo:!!Q})}}),ne.coalesceStream.on("data",this.trigger.bind(this,"data")),ne.coalesceStream.on("id3Frame",function(le){le.dispatchType=ne.metadataStream.dispatchType,G.trigger("id3Frame",le)}),ne.coalesceStream.on("caption",this.trigger.bind(this,"caption")),ne.coalesceStream.on("done",this.trigger.bind(this,"done")),$F(this,ne)},this.setBaseMediaDecodeTime=function(ne){var le=this.transmuxPipeline_;L.keepOriginalTimestamps||(this.baseMediaDecodeTime=ne),te&&(te.timelineStartInfo.dts=void 0,te.timelineStartInfo.pts=void 0,xi.clearDtsInfo(te),le.audioTimestampRolloverStream&&le.audioTimestampRolloverStream.discontinuity()),Q&&(le.videoSegmentStream&&(le.videoSegmentStream.gopCache_=[]),Q.timelineStartInfo.dts=void 0,Q.timelineStartInfo.pts=void 0,xi.clearDtsInfo(Q),le.captionStream.reset()),le.timestampRolloverStream&&le.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(ne){te&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(ne)},this.setRemux=function(ne){var le=this.transmuxPipeline_;L.remux=ne,le&&le.coalesceStream&&le.coalesceStream.setRemux(ne)},this.alignGopsWith=function(ne){Q&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(ne)},this.getLogTrigger_=function(ne){var le=this;return function(se){se.stream=ne,le.trigger("log",se)}},this.push=function(ne){if(Z){var le=X3e(ne);le&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!le&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),Z=!1}this.transmuxPipeline_.headOfPipeline.push(ne)},this.flush=function(){Z=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Jm.prototype=new qm;var Z3e={Transmuxer:Jm},V3e=function(L){return L>>>0},e4e=function(L){return("00"+L.toString(16)).slice(-2)},Qm={toUnsigned:V3e,toHexString:e4e},t4e=function(L){var G="";return G+=String.fromCharCode(L[0]),G+=String.fromCharCode(L[1]),G+=String.fromCharCode(L[2]),G+=String.fromCharCode(L[3]),G},HF=t4e,n4e=Qm.toUnsigned,r4e=HF,WF=function(L,G){var Z=[],Q,te,ne,le,se;if(!G.length)return null;for(Q=0;Q<L.byteLength;)te=n4e(L[Q]<<24|L[Q+1]<<16|L[Q+2]<<8|L[Q+3]),ne=r4e(L.subarray(Q+4,Q+8)),le=te>1?Q+te:L.byteLength,ne===G[0]&&(G.length===1?Z.push(L.subarray(Q+8,le)):(se=WF(L.subarray(Q+8,le),G.slice(1)),se.length&&(Z=Z.concat(se)))),Q=le;return Z},fC=WF,a4e=Qm.toUnsigned,i4e=i.getUint64,o4e=function(L){var G={version:L[0],flags:new Uint8Array(L.subarray(1,4))};return G.version===1?G.baseMediaDecodeTime=i4e(L.subarray(4)):G.baseMediaDecodeTime=a4e(L[4]<<24|L[5]<<16|L[6]<<8|L[7]),G},hC=o4e,l4e=function(L){var G=new DataView(L.buffer,L.byteOffset,L.byteLength),Z={version:L[0],flags:new Uint8Array(L.subarray(1,4)),trackId:G.getUint32(4)},Q=Z.flags[2]&1,te=Z.flags[2]&2,ne=Z.flags[2]&8,le=Z.flags[2]&16,se=Z.flags[2]&32,ue=Z.flags[0]&65536,he=Z.flags[0]&131072,we;return we=8,Q&&(we+=4,Z.baseDataOffset=G.getUint32(12),we+=4),te&&(Z.sampleDescriptionIndex=G.getUint32(we),we+=4),ne&&(Z.defaultSampleDuration=G.getUint32(we),we+=4),le&&(Z.defaultSampleSize=G.getUint32(we),we+=4),se&&(Z.defaultSampleFlags=G.getUint32(we)),ue&&(Z.durationIsEmpty=!0),!Q&&he&&(Z.baseDataOffsetIsMoof=!0),Z},KF=l4e,s4e=function(L){return{isLeading:(L[0]&12)>>>2,dependsOn:L[0]&3,isDependedOn:(L[1]&192)>>>6,hasRedundancy:(L[1]&48)>>>4,paddingValue:(L[1]&14)>>>1,isNonSyncSample:L[1]&1,degradationPriority:L[2]<<8|L[3]}},c4e=s4e,qF=c4e,u4e=function(L){var G={version:L[0],flags:new Uint8Array(L.subarray(1,4)),samples:[]},Z=new DataView(L.buffer,L.byteOffset,L.byteLength),Q=G.flags[2]&1,te=G.flags[2]&4,ne=G.flags[1]&1,le=G.flags[1]&2,se=G.flags[1]&4,ue=G.flags[1]&8,he=Z.getUint32(4),we=8,Oe;for(Q&&(G.dataOffset=Z.getInt32(we),we+=4),te&&he&&(Oe={flags:qF(L.subarray(we,we+4))},we+=4,ne&&(Oe.duration=Z.getUint32(we),we+=4),le&&(Oe.size=Z.getUint32(we),we+=4),ue&&(G.version===1?Oe.compositionTimeOffset=Z.getInt32(we):Oe.compositionTimeOffset=Z.getUint32(we),we+=4),G.samples.push(Oe),he--);he--;)Oe={},ne&&(Oe.duration=Z.getUint32(we),we+=4),le&&(Oe.size=Z.getUint32(we),we+=4),se&&(Oe.flags=qF(L.subarray(we,we+4)),we+=4),ue&&(G.version===1?Oe.compositionTimeOffset=Z.getInt32(we):Oe.compositionTimeOffset=Z.getUint32(we),we+=4),G.samples.push(Oe);return G},GF=u4e,YF={tfdt:hC,trun:GF},XF={parseTfdt:YF.tfdt,parseTrun:YF.trun},d4e=function(L){for(var G=0,Z=String.fromCharCode(L[G]),Q="";Z!=="\0";)Q+=Z,G++,Z=String.fromCharCode(L[G]);return Q+=Z,Q},f4e={uint8ToCString:d4e},Zm=f4e.uint8ToCString,h4e=i.getUint64,v4e=function(L){var G=4,Z=L[0],Q,te,ne,le,se,ue,he,we;if(Z===0){Q=Zm(L.subarray(G)),G+=Q.length,te=Zm(L.subarray(G)),G+=te.length;var Oe=new DataView(L.buffer);ne=Oe.getUint32(G),G+=4,se=Oe.getUint32(G),G+=4,ue=Oe.getUint32(G),G+=4,he=Oe.getUint32(G),G+=4}else if(Z===1){var Oe=new DataView(L.buffer);ne=Oe.getUint32(G),G+=4,le=h4e(L.subarray(G)),G+=8,ue=Oe.getUint32(G),G+=4,he=Oe.getUint32(G),G+=4,Q=Zm(L.subarray(G)),G+=Q.length,te=Zm(L.subarray(G)),G+=te.length}we=new Uint8Array(L.subarray(G,L.byteLength));var Ye={scheme_id_uri:Q,value:te,timescale:ne||1,presentation_time:le,presentation_time_delta:se,event_duration:ue,id:he,message_data:we};return g4e(Z,Ye)?Ye:void 0},p4e=function(L,G,Z,Q){return L||L===0?L/G:Q+Z/G},g4e=function(L,G){var Z=G.scheme_id_uri!=="\0",Q=L===0&&JF(G.presentation_time_delta)&&Z,te=L===1&&JF(G.presentation_time)&&Z;return!(L>1)&&Q||te},JF=function(L){return L!==void 0||L!==null},m4e={parseEmsgBox:v4e,scaleTime:p4e},Th;typeof window<"u"?Th=window:typeof t<"u"?Th=t:typeof self<"u"?Th=self:Th={};var QF=Th,Vm=Qm.toUnsigned,kh=Qm.toHexString,Fn=fC,ud=HF,vC=m4e,y4e=KF,b4e=GF,w4e=hC,x4e=i.getUint64,ZF,VF,eB,tB,nB,pC,rB,gC=QF,C4e=OF.parseId3Frames;ZF=function(L){var G={},Z=Fn(L,["moov","trak"]);return Z.reduce(function(Q,te){var ne,le,se,ue,he;return ne=Fn(te,["tkhd"])[0],!ne||(le=ne[0],se=le===0?12:20,ue=Vm(ne[se]<<24|ne[se+1]<<16|ne[se+2]<<8|ne[se+3]),he=Fn(te,["mdia","mdhd"])[0],!he)?null:(le=he[0],se=le===0?12:20,Q[ue]=Vm(he[se]<<24|he[se+1]<<16|he[se+2]<<8|he[se+3]),Q)},G)},VF=function(L,G){var Z;Z=Fn(G,["moof","traf"]);var Q=Z.reduce(function(te,ne){var le=Fn(ne,["tfhd"])[0],se=Vm(le[4]<<24|le[5]<<16|le[6]<<8|le[7]),ue=L[se]||9e4,he=Fn(ne,["tfdt"])[0],we=new DataView(he.buffer,he.byteOffset,he.byteLength),Oe;he[0]===1?Oe=x4e(he.subarray(4,12)):Oe=we.getUint32(4);let Ye;return typeof Oe=="bigint"?Ye=Oe/gC.BigInt(ue):typeof Oe=="number"&&!isNaN(Oe)&&(Ye=Oe/ue),Ye<Number.MAX_SAFE_INTEGER&&(Ye=Number(Ye)),Ye<te&&(te=Ye),te},1/0);return typeof Q=="bigint"||isFinite(Q)?Q:0},eB=function(L,G){var Z=Fn(G,["moof","traf"]),Q=0,te=0,ne;if(Z&&Z.length){var le=Fn(Z[0],["tfhd"])[0],se=Fn(Z[0],["trun"])[0],ue=Fn(Z[0],["tfdt"])[0];if(le){var he=y4e(le);ne=he.trackId}if(ue){var we=w4e(ue);Q=we.baseMediaDecodeTime}if(se){var Oe=b4e(se);Oe.samples&&Oe.samples.length&&(te=Oe.samples[0].compositionTimeOffset||0)}}var Ye=L[ne]||9e4;typeof Q=="bigint"&&(te=gC.BigInt(te),Ye=gC.BigInt(Ye));var Fe=(Q+te)/Ye;return typeof Fe=="bigint"&&Fe<Number.MAX_SAFE_INTEGER&&(Fe=Number(Fe)),Fe},tB=function(L){var G=Fn(L,["moov","trak"]),Z=[];return G.forEach(function(Q){var te=Fn(Q,["mdia","hdlr"]),ne=Fn(Q,["tkhd"]);te.forEach(function(le,se){var ue=ud(le.subarray(8,12)),he=ne[se],we,Oe,Ye;ue==="vide"&&(we=new DataView(he.buffer,he.byteOffset,he.byteLength),Oe=we.getUint8(0),Ye=Oe===0?we.getUint32(12):we.getUint32(20),Z.push(Ye))})}),Z},pC=function(L){var G=L[0],Z=G===0?12:20;return Vm(L[Z]<<24|L[Z+1]<<16|L[Z+2]<<8|L[Z+3])},nB=function(L){var G=Fn(L,["moov","trak"]),Z=[];return G.forEach(function(Q){var te={},ne=Fn(Q,["tkhd"])[0],le,se;ne&&(le=new DataView(ne.buffer,ne.byteOffset,ne.byteLength),se=le.getUint8(0),te.id=se===0?le.getUint32(12):le.getUint32(20));var ue=Fn(Q,["mdia","hdlr"])[0];if(ue){var he=ud(ue.subarray(8,12));he==="vide"?te.type="video":he==="soun"?te.type="audio":te.type=he}var we=Fn(Q,["mdia","minf","stbl","stsd"])[0];if(we){var Oe=we.subarray(8);te.codec=ud(Oe.subarray(4,8));var Ye=Fn(Oe,[te.codec])[0],Fe,dt;Ye&&(/^[asm]vc[1-9]$/i.test(te.codec)?(Fe=Ye.subarray(78),dt=ud(Fe.subarray(4,8)),dt==="avcC"&&Fe.length>11?(te.codec+=".",te.codec+=kh(Fe[9]),te.codec+=kh(Fe[10]),te.codec+=kh(Fe[11])):te.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(te.codec)?(Fe=Ye.subarray(28),dt=ud(Fe.subarray(4,8)),dt==="esds"&&Fe.length>20&&Fe[19]!==0?(te.codec+="."+kh(Fe[19]),te.codec+="."+kh(Fe[20]>>>2&63).replace(/^0/,"")):te.codec="mp4a.40.2"):te.codec=te.codec.toLowerCase())}var It=Fn(Q,["mdia","mdhd"])[0];It&&(te.timescale=pC(It)),Z.push(te)}),Z},rB=function(L,G=0){var Z=Fn(L,["emsg"]);return Z.map(Q=>{var te=vC.parseEmsgBox(new Uint8Array(Q)),ne=C4e(te.message_data);return{cueTime:vC.scaleTime(te.presentation_time,te.timescale,te.presentation_time_delta,G),duration:vC.scaleTime(te.event_duration,te.timescale),frames:ne}})};var Oh={findBox:Fn,parseType:ud,timescale:ZF,startTime:VF,compositionStartTime:eB,videoTrackIds:tB,tracks:nB,getTimescaleFromMediaHeader:pC,getEmsgID3:rB};const{parseTrun:_4e}=XF,{findBox:aB}=Oh;var iB=QF,S4e=function(L){var G=aB(L,["moof","traf"]),Z=aB(L,["mdat"]),Q=[];return Z.forEach(function(te,ne){var le=G[ne];Q.push({mdat:te,traf:le})}),Q},T4e=function(L,G,Z){var Q=G,te=Z.defaultSampleDuration||0,ne=Z.defaultSampleSize||0,le=Z.trackId,se=[];return L.forEach(function(ue){var he=_4e(ue),we=he.samples;we.forEach(function(Oe){Oe.duration===void 0&&(Oe.duration=te),Oe.size===void 0&&(Oe.size=ne),Oe.trackId=le,Oe.dts=Q,Oe.compositionTimeOffset===void 0&&(Oe.compositionTimeOffset=0),typeof Q=="bigint"?(Oe.pts=Q+iB.BigInt(Oe.compositionTimeOffset),Q+=iB.BigInt(Oe.duration)):(Oe.pts=Q+Oe.compositionTimeOffset,Q+=Oe.duration)}),se=se.concat(we)}),se},oB={getMdatTrafPairs:S4e,parseSamples:T4e},k4e=Mr.discardEmulationPreventionBytes,O4e=ld.CaptionStream,mC=fC,E4e=hC,P4e=KF,{getMdatTrafPairs:I4e,parseSamples:A4e}=oB,N4e=function(L,G){for(var Z=L,Q=0;Q<G.length;Q++){var te=G[Q];if(Z<te.size)return te;Z-=te.size}return null},D4e=function(L,G,Z){var Q=new DataView(L.buffer,L.byteOffset,L.byteLength),te={logs:[],seiNals:[]},ne,le,se,ue;for(le=0;le+4<L.length;le+=se)if(se=Q.getUint32(le),le+=4,!(se<=0))switch(L[le]&31){case 6:var he=L.subarray(le+1,le+1+se),we=N4e(le,G);if(ne={nalUnitType:"sei_rbsp",size:se,data:he,escapedRBSP:k4e(he),trackId:Z},we)ne.pts=we.pts,ne.dts=we.dts,ue=we;else if(ue)ne.pts=ue.pts,ne.dts=ue.dts;else{te.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+le+" for trackId "+Z+". See mux.js#223."});break}te.seiNals.push(ne);break}return te},R4e=function(L,G){var Z={},Q=I4e(L);return Q.forEach(function(te){var ne=te.mdat,le=te.traf,se=mC(le,["tfhd"]),ue=P4e(se[0]),he=ue.trackId,we=mC(le,["tfdt"]),Oe=we.length>0?E4e(we[0]).baseMediaDecodeTime:0,Ye=mC(le,["trun"]),Fe,dt;G===he&&Ye.length>0&&(Fe=A4e(Ye,Oe,ue),dt=D4e(ne,Fe,he),Z[he]||(Z[he]={seiNals:[],logs:[]}),Z[he].seiNals=Z[he].seiNals.concat(dt.seiNals),Z[he].logs=Z[he].logs.concat(dt.logs))}),Z},M4e=function(L,G,Z){var Q;if(G===null)return null;Q=R4e(L,G);var te=Q[G]||{};return{seiNals:te.seiNals,logs:te.logs,timescale:Z}},L4e=function(){var L=!1,G,Z,Q,te,ne,le;this.isInitialized=function(){return L},this.init=function(se){G=new O4e,L=!0,le=se?se.isPartial:!1,G.on("data",function(ue){ue.startTime=ue.startPts/te,ue.endTime=ue.endPts/te,ne.captions.push(ue),ne.captionStreams[ue.stream]=!0}),G.on("log",function(ue){ne.logs.push(ue)})},this.isNewInit=function(se,ue){return se&&se.length===0||ue&&typeof ue=="object"&&Object.keys(ue).length===0?!1:Q!==se[0]||te!==ue[Q]},this.parse=function(se,ue,he){var we;if(this.isInitialized()){if(!ue||!he)return null;if(this.isNewInit(ue,he))Q=ue[0],te=he[Q];else if(Q===null||!te)return Z.push(se),null}else return null;for(;Z.length>0;){var Oe=Z.shift();this.parse(Oe,ue,he)}return we=M4e(se,Q,te),we&&we.logs&&(ne.logs=ne.logs.concat(we.logs)),we===null||!we.seiNals?ne.logs.length?{logs:ne.logs,captions:[],captionStreams:[]}:null:(this.pushNals(we.seiNals),this.flushStream(),ne)},this.pushNals=function(se){if(!this.isInitialized()||!se||se.length===0)return null;se.forEach(function(ue){G.push(ue)})},this.flushStream=function(){if(!this.isInitialized())return null;le?G.partialFlush():G.flush()},this.clearParsedCaptions=function(){ne.captions=[],ne.captionStreams={},ne.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;G.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){Z=[],Q=null,te=null,ne?this.clearParsedCaptions():ne={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},F4e=L4e;const{parseTfdt:B4e}=XF,Dl=fC,{getTimescaleFromMediaHeader:j4e}=Oh,{parseSamples:$4e,getMdatTrafPairs:U4e}=oB;var lB=function(){let L=9e4;this.init=function(G){const Z=Dl(G,["moov","trak","mdia","mdhd"])[0];Z&&(L=j4e(Z))},this.parseSegment=function(G){const Z=[],Q=U4e(G);let te=0;return Q.forEach(function(ne){const le=ne.mdat,se=ne.traf,ue=Dl(se,["tfdt"])[0],he=Dl(se,["tfhd"])[0],we=Dl(se,["trun"]);if(ue&&(te=B4e(ue).baseMediaDecodeTime),we.length&&he){const Oe=$4e(we,te,he);let Ye=0;Oe.forEach(function(Fe){const dt="utf-8",It=new TextDecoder(dt),or=le.slice(Ye,Ye+Fe.size);if(Dl(or,["vtte"])[0]){Ye+=Fe.size;return}Dl(or,["vttc"]).forEach(function(Eh){const Ph=Dl(Eh,["payl"])[0],Ih=Dl(Eh,["sttg"])[0],Ah=Fe.pts/L,n0=(Fe.pts+Fe.duration)/L;let pn,Nh;if(Ph)try{pn=It.decode(Ph)}catch(Ci){console.error(Ci)}if(Ih)try{Nh=It.decode(Ih)}catch(Ci){console.error(Ci)}Fe.duration&&pn&&Z.push({cueText:pn,start:Ah,end:n0,settings:Nh})}),Ye+=Fe.size})}}),Z}},yC=Al,sB=function(L){var G=L[1]&31;return G<<=8,G|=L[2],G},e0=function(L){return!!(L[1]&64)},t0=function(L){var G=0;return(L[3]&48)>>>4>1&&(G+=L[4]+1),G},z4e=function(L,G){var Z=sB(L);return Z===0?"pat":Z===G?"pmt":G?"pes":null},H4e=function(L){var G=e0(L),Z=4+t0(L);return G&&(Z+=L[Z]+1),(L[Z+10]&31)<<8|L[Z+11]},W4e=function(L){var G={},Z=e0(L),Q=4+t0(L);if(Z&&(Q+=L[Q]+1),!!(L[Q+5]&1)){var te,ne,le;te=(L[Q+1]&15)<<8|L[Q+2],ne=3+te-4,le=(L[Q+10]&15)<<8|L[Q+11];for(var se=12+le;se<ne;){var ue=Q+se;G[(L[ue+1]&31)<<8|L[ue+2]]=L[ue],se+=((L[ue+3]&15)<<8|L[ue+4])+5}return G}},K4e=function(L,G){var Z=sB(L),Q=G[Z];switch(Q){case yC.H264_STREAM_TYPE:return"video";case yC.ADTS_STREAM_TYPE:return"audio";case yC.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},q4e=function(L){var G=e0(L);if(!G)return null;var Z=4+t0(L);if(Z>=L.byteLength)return null;var Q=null,te;return te=L[Z+7],te&192&&(Q={},Q.pts=(L[Z+9]&14)<<27|(L[Z+10]&255)<<20|(L[Z+11]&254)<<12|(L[Z+12]&255)<<5|(L[Z+13]&254)>>>3,Q.pts*=4,Q.pts+=(L[Z+13]&6)>>>1,Q.dts=Q.pts,te&64&&(Q.dts=(L[Z+14]&14)<<27|(L[Z+15]&255)<<20|(L[Z+16]&254)<<12|(L[Z+17]&255)<<5|(L[Z+18]&254)>>>3,Q.dts*=4,Q.dts+=(L[Z+18]&6)>>>1)),Q},bC=function(L){switch(L){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},G4e=function(L){for(var G=4+t0(L),Z=L.subarray(G),Q=0,te=0,ne=!1,le;te<Z.byteLength-3;te++)if(Z[te+2]===1){Q=te+5;break}for(;Q<Z.byteLength;)switch(Z[Q]){case 0:if(Z[Q-1]!==0){Q+=2;break}else if(Z[Q-2]!==0){Q++;break}te+3!==Q-2&&(le=bC(Z[te+3]&31),le==="slice_layer_without_partitioning_rbsp_idr"&&(ne=!0));do Q++;while(Z[Q]!==1&&Q<Z.length);te=Q-2,Q+=3;break;case 1:if(Z[Q-1]!==0||Z[Q-2]!==0){Q+=3;break}le=bC(Z[te+3]&31),le==="slice_layer_without_partitioning_rbsp_idr"&&(ne=!0),te=Q-2,Q+=3;break;default:Q+=3;break}return Z=Z.subarray(te),Q-=te,te=0,Z&&Z.byteLength>3&&(le=bC(Z[te+3]&31),le==="slice_layer_without_partitioning_rbsp_idr"&&(ne=!0)),ne},Y4e={parseType:z4e,parsePat:H4e,parsePmt:W4e,parsePayloadUnitStartIndicator:e0,parsePesType:K4e,parsePesTime:q4e,videoPacketContainsKeyFrame:G4e},cB=Al,dd=ia.handleRollover,tn={};tn.ts=Y4e,tn.aac=dC;var Ys=De.ONE_SECOND_IN_TS,Fr=188,io=71,X4e=function(L,G){for(var Z=0,Q=Fr,te,ne;Q<L.byteLength;){if(L[Z]===io&&L[Q]===io){switch(te=L.subarray(Z,Q),ne=tn.ts.parseType(te,G.pid),ne){case"pat":G.pid=tn.ts.parsePat(te);break;case"pmt":var le=tn.ts.parsePmt(te);G.table=G.table||{},Object.keys(le).forEach(function(se){G.table[se]=le[se]});break}Z+=Fr,Q+=Fr;continue}Z++,Q++}},uB=function(L,G,Z){for(var Q=0,te=Fr,ne,le,se,ue,he,we=!1;te<=L.byteLength;){if(L[Q]===io&&(L[te]===io||te===L.byteLength)){switch(ne=L.subarray(Q,te),le=tn.ts.parseType(ne,G.pid),le){case"pes":se=tn.ts.parsePesType(ne,G.table),ue=tn.ts.parsePayloadUnitStartIndicator(ne),se==="audio"&&ue&&(he=tn.ts.parsePesTime(ne),he&&(he.type="audio",Z.audio.push(he),we=!0));break}if(we)break;Q+=Fr,te+=Fr;continue}Q++,te++}for(te=L.byteLength,Q=te-Fr,we=!1;Q>=0;){if(L[Q]===io&&(L[te]===io||te===L.byteLength)){switch(ne=L.subarray(Q,te),le=tn.ts.parseType(ne,G.pid),le){case"pes":se=tn.ts.parsePesType(ne,G.table),ue=tn.ts.parsePayloadUnitStartIndicator(ne),se==="audio"&&ue&&(he=tn.ts.parsePesTime(ne),he&&(he.type="audio",Z.audio.push(he),we=!0));break}if(we)break;Q-=Fr,te-=Fr;continue}Q--,te--}},J4e=function(L,G,Z){for(var Q=0,te=Fr,ne,le,se,ue,he,we,Oe,Ye,Fe=!1,dt={data:[],size:0};te<L.byteLength;){if(L[Q]===io&&L[te]===io){switch(ne=L.subarray(Q,te),le=tn.ts.parseType(ne,G.pid),le){case"pes":if(se=tn.ts.parsePesType(ne,G.table),ue=tn.ts.parsePayloadUnitStartIndicator(ne),se==="video"&&(ue&&!Fe&&(he=tn.ts.parsePesTime(ne),he&&(he.type="video",Z.video.push(he),Fe=!0)),!Z.firstKeyFrame)){if(ue&&dt.size!==0){for(we=new Uint8Array(dt.size),Oe=0;dt.data.length;)Ye=dt.data.shift(),we.set(Ye,Oe),Oe+=Ye.byteLength;if(tn.ts.videoPacketContainsKeyFrame(we)){var It=tn.ts.parsePesTime(we);It?(Z.firstKeyFrame=It,Z.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}dt.size=0}dt.data.push(ne),dt.size+=ne.byteLength}break}if(Fe&&Z.firstKeyFrame)break;Q+=Fr,te+=Fr;continue}Q++,te++}for(te=L.byteLength,Q=te-Fr,Fe=!1;Q>=0;){if(L[Q]===io&&L[te]===io){switch(ne=L.subarray(Q,te),le=tn.ts.parseType(ne,G.pid),le){case"pes":se=tn.ts.parsePesType(ne,G.table),ue=tn.ts.parsePayloadUnitStartIndicator(ne),se==="video"&&ue&&(he=tn.ts.parsePesTime(ne),he&&(he.type="video",Z.video.push(he),Fe=!0));break}if(Fe)break;Q-=Fr,te-=Fr;continue}Q--,te--}},Q4e=function(L,G){if(L.audio&&L.audio.length){var Z=G;(typeof Z>"u"||isNaN(Z))&&(Z=L.audio[0].dts),L.audio.forEach(function(ne){ne.dts=dd(ne.dts,Z),ne.pts=dd(ne.pts,Z),ne.dtsTime=ne.dts/Ys,ne.ptsTime=ne.pts/Ys})}if(L.video&&L.video.length){var Q=G;if((typeof Q>"u"||isNaN(Q))&&(Q=L.video[0].dts),L.video.forEach(function(ne){ne.dts=dd(ne.dts,Q),ne.pts=dd(ne.pts,Q),ne.dtsTime=ne.dts/Ys,ne.ptsTime=ne.pts/Ys}),L.firstKeyFrame){var te=L.firstKeyFrame;te.dts=dd(te.dts,Q),te.pts=dd(te.pts,Q),te.dtsTime=te.dts/Ys,te.ptsTime=te.pts/Ys}}},Z4e=function(L){for(var G=!1,Z=0,Q=null,te=null,ne=0,le=0,se;L.length-le>=3;){var ue=tn.aac.parseType(L,le);switch(ue){case"timed-metadata":if(L.length-le<10){G=!0;break}if(ne=tn.aac.parseId3TagSize(L,le),ne>L.length){G=!0;break}te===null&&(se=L.subarray(le,le+ne),te=tn.aac.parseAacTimestamp(se)),le+=ne;break;case"audio":if(L.length-le<7){G=!0;break}if(ne=tn.aac.parseAdtsSize(L,le),ne>L.length){G=!0;break}Q===null&&(se=L.subarray(le,le+ne),Q=tn.aac.parseSampleRate(se)),Z++,le+=ne;break;default:le++;break}if(G)return null}if(Q===null||te===null)return null;var he=Ys/Q,we={audio:[{type:"audio",dts:te,pts:te},{type:"audio",dts:te+Z*1024*he,pts:te+Z*1024*he}]};return we},V4e=function(L){var G={pid:null,table:null},Z={};X4e(L,G);for(var Q in G.table)if(G.table.hasOwnProperty(Q)){var te=G.table[Q];switch(te){case cB.H264_STREAM_TYPE:Z.video=[],J4e(L,G,Z),Z.video.length===0&&delete Z.video;break;case cB.ADTS_STREAM_TYPE:Z.audio=[],uB(L,G,Z),Z.audio.length===0&&delete Z.audio;break}}return Z},e8e=function(L,G){var Z=tn.aac.isLikelyAacData(L),Q;return Z?Q=Z4e(L):Q=V4e(L),!Q||!Q.audio&&!Q.video?null:(Q4e(Q,G),Q)},t8e={inspect:e8e,parseAudioPes_:uB};const n8e=function(L,G){G.on("data",function(Z){const Q=Z.initSegment;Z.initSegment={data:Q.buffer,byteOffset:Q.byteOffset,byteLength:Q.byteLength};const te=Z.data;Z.data=te.buffer,L.postMessage({action:"data",segment:Z,byteOffset:te.byteOffset,byteLength:te.byteLength},[Z.data])}),G.on("done",function(Z){L.postMessage({action:"done"})}),G.on("gopInfo",function(Z){L.postMessage({action:"gopInfo",gopInfo:Z})}),G.on("videoSegmentTimingInfo",function(Z){const Q={start:{decode:De.videoTsToSeconds(Z.start.dts),presentation:De.videoTsToSeconds(Z.start.pts)},end:{decode:De.videoTsToSeconds(Z.end.dts),presentation:De.videoTsToSeconds(Z.end.pts)},baseMediaDecodeTime:De.videoTsToSeconds(Z.baseMediaDecodeTime)};Z.prependedContentDuration&&(Q.prependedContentDuration=De.videoTsToSeconds(Z.prependedContentDuration)),L.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:Q})}),G.on("audioSegmentTimingInfo",function(Z){const Q={start:{decode:De.videoTsToSeconds(Z.start.dts),presentation:De.videoTsToSeconds(Z.start.pts)},end:{decode:De.videoTsToSeconds(Z.end.dts),presentation:De.videoTsToSeconds(Z.end.pts)},baseMediaDecodeTime:De.videoTsToSeconds(Z.baseMediaDecodeTime)};Z.prependedContentDuration&&(Q.prependedContentDuration=De.videoTsToSeconds(Z.prependedContentDuration)),L.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:Q})}),G.on("id3Frame",function(Z){L.postMessage({action:"id3Frame",id3Frame:Z})}),G.on("caption",function(Z){L.postMessage({action:"caption",caption:Z})}),G.on("trackinfo",function(Z){L.postMessage({action:"trackinfo",trackInfo:Z})}),G.on("audioTimingInfo",function(Z){L.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:De.videoTsToSeconds(Z.start),end:De.videoTsToSeconds(Z.end)}})}),G.on("videoTimingInfo",function(Z){L.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:De.videoTsToSeconds(Z.start),end:De.videoTsToSeconds(Z.end)}})}),G.on("log",function(Z){L.postMessage({action:"log",log:Z})})};class dB{constructor(G,Z){this.options=Z||{},this.self=G,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Z3e.Transmuxer(this.options),n8e(this.self,this.transmuxer)}pushMp4Captions(G){this.captionParser||(this.captionParser=new F4e,this.captionParser.init());const Z=new Uint8Array(G.data,G.byteOffset,G.byteLength),Q=this.captionParser.parse(Z,G.trackIds,G.timescales);this.self.postMessage({action:"mp4Captions",captions:Q&&Q.captions||[],logs:Q&&Q.logs||[],data:Z.buffer},[Z.buffer])}initMp4WebVttParser(G){this.webVttParser||(this.webVttParser=new lB);const Z=new Uint8Array(G.data,G.byteOffset,G.byteLength);this.webVttParser.init(Z)}getMp4WebVttText(G){this.webVttParser||(this.webVttParser=new lB);const Z=new Uint8Array(G.data,G.byteOffset,G.byteLength),Q=this.webVttParser.parseSegment(Z);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:Q||[],data:Z.buffer},[Z.buffer])}probeMp4StartTime({timescales:G,data:Z}){const Q=Oh.startTime(G,Z);this.self.postMessage({action:"probeMp4StartTime",startTime:Q,data:Z},[Z.buffer])}probeMp4Tracks({data:G}){const Z=Oh.tracks(G);this.self.postMessage({action:"probeMp4Tracks",tracks:Z,data:G},[G.buffer])}probeEmsgID3({data:G,offset:Z}){const Q=Oh.getEmsgID3(G,Z);this.self.postMessage({action:"probeEmsgID3",id3Frames:Q,emsgData:G},[G.buffer])}probeTs({data:G,baseStartTime:Z}){const Q=typeof Z=="number"&&!isNaN(Z)?Z*De.ONE_SECOND_IN_TS:void 0,te=t8e.inspect(G,Q);let ne=null;te&&(ne={hasVideo:te.video&&te.video.length===2||!1,hasAudio:te.audio&&te.audio.length===2||!1},ne.hasVideo&&(ne.videoStart=te.video[0].ptsTime),ne.hasAudio&&(ne.audioStart=te.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:ne,data:G},[G.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(G){const Z=new Uint8Array(G.data,G.byteOffset,G.byteLength);this.transmuxer.push(Z)}reset(){this.transmuxer.reset()}setTimestampOffset(G){const Z=G.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(De.secondsToVideoTs(Z)))}setAudioAppendStart(G){this.transmuxer.setAudioAppendStart(Math.ceil(De.secondsToVideoTs(G.appendStart)))}setRemux(G){this.transmuxer.setRemux(G.remux)}flush(G){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(G){this.transmuxer.alignGopsWith(G.gopsToAlignWith.slice())}}self.onmessage=function(L){if(L.data.action==="init"&&L.data.options){this.messageHandlers=new dB(self,L.data.options);return}this.messageHandlers||(this.messageHandlers=new dB(self)),L.data&&L.data.action&&L.data.action!=="init"&&this.messageHandlers[L.data.action]&&this.messageHandlers[L.data.action](L.data)}}));var E5e=RL(O5e);const P5e=(t,e,n)=>{const{type:r,initSegment:a,captions:i,captionStreams:o,metadata:s,videoFrameDtsTime:c,videoFramePtsTime:u}=t.data.segment;e.buffer.push({captions:i,captionStreams:o,metadata:s});const d=t.data.segment.boxes||{data:t.data.segment.data},f={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(f.videoFrameDtsTime=c),typeof u<"u"&&(f.videoFramePtsTime=u),n(f)},I5e=({transmuxedData:t,callback:e})=>{t.buffer=[],e(t)},A5e=(t,e)=>{e.gopInfo=t.data.gopInfo},FL=t=>{const{transmuxer:e,bytes:n,audioAppendStart:r,gopsToAlignWith:a,remux:i,onData:o,onTrackInfo:s,onAudioTimingInfo:c,onVideoTimingInfo:u,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:f,onId3:h,onCaptions:v,onDone:p,onEndedTimeline:g,onTransmuxerLog:m,isEndOfTimeline:y,segment:b,triggerSegmentEventFn:w}=t,x={buffer:[]};let C=y;const S=O=>{e.currentTransmux===t&&(O.data.action==="data"&&P5e(O,x,o),O.data.action==="trackinfo"&&s(O.data.trackInfo),O.data.action==="gopInfo"&&A5e(O,x),O.data.action==="audioTimingInfo"&&c(O.data.audioTimingInfo),O.data.action==="videoTimingInfo"&&u(O.data.videoTimingInfo),O.data.action==="videoSegmentTimingInfo"&&d(O.data.videoSegmentTimingInfo),O.data.action==="audioSegmentTimingInfo"&&f(O.data.audioSegmentTimingInfo),O.data.action==="id3Frame"&&h([O.data.id3Frame],O.data.id3Frame.dispatchType),O.data.action==="caption"&&v(O.data.caption),O.data.action==="endedtimeline"&&(C=!1,g()),O.data.action==="log"&&m(O.data.log),O.data.type==="transmuxed"&&(C||(e.onmessage=null,I5e({transmuxedData:x,callback:p}),BL(e))))},_=()=>{const O={message:"Received an error message from the transmuxer worker",metadata:{errorType:xe.Error.StreamingFailedToTransmuxSegment,segmentInfo:Us({segment:b})}};p(null,O)};if(e.onmessage=S,e.onerror=_,r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(a)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof i<"u"&&e.postMessage({action:"setRemux",remux:i}),n.byteLength){const O=n instanceof ArrayBuffer?n:n.buffer,N=n instanceof ArrayBuffer?0:n.byteOffset;w({type:"segmenttransmuxingstart",segment:b}),e.postMessage({action:"push",data:O,byteOffset:N,byteLength:n.byteLength},[O])}y&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},BL=t=>{t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():FL(t.currentTransmux))},jL=(t,e)=>{t.postMessage({action:e}),BL(t)},$L=(t,e)=>{if(!e.currentTransmux){e.currentTransmux=t,jL(e,t);return}e.transmuxQueue.push(jL.bind(null,e,t))},N5e=t=>{$L("reset",t)},D5e=t=>{$L("endTimeline",t)},UL=t=>{if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,FL(t);return}t.transmuxer.transmuxQueue.push(t)};var Zx={reset:N5e,endTimeline:D5e,transmux:UL,createTransmuxer:t=>{const e=new E5e;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:t}),e}};const rd=function(t){const e=t.transmuxer,n=t.endAction||t.action,r=t.callback,a=Mn({},t,{endAction:null,transmuxer:null,callback:null}),i=o=>{o.data.action===n&&(e.removeEventListener("message",i),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),r(o.data))};if(e.addEventListener("message",i),t.data){const o=t.data instanceof ArrayBuffer;a.byteOffset=o?0:t.data.byteOffset,a.byteLength=t.data.byteLength;const s=[o?t.data:t.data.buffer];e.postMessage(a,s)}else e.postMessage(a)},Zi={FAILURE:2,TIMEOUT:-101,ABORTED:-102},zL="wvtt",Vx=t=>{t.forEach(e=>{e.abort()})},R5e=t=>({bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}),M5e=t=>{const e=t.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=t.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},eC=(t,e)=>{const{requestType:n}=e,r=$s({requestType:n,request:e,error:t});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Zi.TIMEOUT,xhr:e,metadata:r}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Zi.ABORTED,xhr:e,metadata:r}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Zi.FAILURE,xhr:e,metadata:r}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Zi.FAILURE,xhr:e,metadata:r}:null},HL=(t,e,n,r)=>(a,i)=>{const o=i.response,s=eC(a,i);if(s)return n(s,t);if(o.byteLength!==16)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:Zi.FAILURE,xhr:i},t);const c=new DataView(o),u=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let f=0;f<e.length;f++)e[f].bytes=u;const d={uri:i.uri};return r({type:"segmentkeyloadcomplete",segment:t,keyInfo:d}),n(null,t)},L5e=(t,e)=>{e===zL&&t.transmuxer.postMessage({action:"initMp4WebVttParser",data:t.map.bytes})},F5e=(t,e,n)=>{e===zL&&rd({action:"getMp4WebVttText",data:t.bytes,transmuxer:t.transmuxer,callback:({data:r,mp4VttCues:a})=>{t.bytes=r,n(null,t,{mp4VttCues:a})}})},WL=(t,e)=>{const n=Ww(t.map.bytes);if(n!=="mp4"){const r=t.map.resolvedUri||t.map.uri,a=n||"unknown";return e({internal:!0,message:`Found unsupported ${a} container for initialization segment at URL: ${r}`,code:Zi.FAILURE,metadata:{mediaType:a}})}rd({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:({tracks:r,data:a})=>(t.map.bytes=a,r.forEach(function(i){t.map.tracks=t.map.tracks||{},!t.map.tracks[i.type]&&(t.map.tracks[i.type]=i,typeof i.id=="number"&&i.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[i.id]=i.timescale),i.type==="text"&&L5e(t,i.codec))}),e(null))})},B5e=({segment:t,finishProcessingFn:e,triggerSegmentEventFn:n})=>(r,a)=>{const i=eC(r,a);if(i)return e(i,t);const o=new Uint8Array(a.response);if(n({type:"segmentloaded",segment:t}),t.map.key)return t.map.encryptedBytes=o,e(null,t);t.map.bytes=o,WL(t,function(s){if(s)return s.xhr=a,s.status=a.status,e(s,t);e(null,t)})},j5e=({segment:t,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:r})=>(a,i)=>{const o=eC(a,i);if(o)return e(o,t);r({type:"segmentloaded",segment:t});const s=n==="arraybuffer"||!i.responseText?i.response:T5e(i.responseText.substring(t.lastReachedChar||0));return t.stats=R5e(i),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),e(null,t)},$5e=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})=>{const p=t.map&&t.map.tracks||{},g=!!(p.audio&&p.video);let m=r.bind(null,t,"audio","start");const y=r.bind(null,t,"audio","end");let b=r.bind(null,t,"video","start");const w=r.bind(null,t,"video","end"),x=()=>UL({bytes:e,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:C=>{C.type=C.type==="combined"?"video":C.type,d(t,C)},onTrackInfo:C=>{n&&(g&&(C.isMuxed=!0),n(t,C))},onAudioTimingInfo:C=>{m&&typeof C.start<"u"&&(m(C.start),m=null),y&&typeof C.end<"u"&&y(C.end)},onVideoTimingInfo:C=>{b&&typeof C.start<"u"&&(b(C.start),b=null),w&&typeof C.end<"u"&&w(C.end)},onVideoSegmentTimingInfo:C=>{const S={pts:{start:C.start.presentation,end:C.end.presentation},dts:{start:C.start.decode,end:C.end.decode}};v({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:S}),a(C)},onAudioSegmentTimingInfo:C=>{const S={pts:{start:C.start.pts,end:C.end.pts},dts:{start:C.start.dts,end:C.end.dts}};v({type:"segmenttransmuxingtiminginfoavailable",segment:t,timingInfo:S}),i(C)},onId3:(C,S)=>{o(t,C,S)},onCaptions:C=>{s(t,[C])},isEndOfTimeline:c,onEndedTimeline:()=>{u()},onTransmuxerLog:h,onDone:(C,S)=>{f&&(C.type=C.type==="combined"?"video":C.type,v({type:"segmenttransmuxingcomplete",segment:t}),f(S,t,C))},segment:t,triggerSegmentEventFn:v});rd({action:"probeTs",transmuxer:t.transmuxer,data:e,baseStartTime:t.baseStartTime,callback:C=>{t.bytes=e=C.data;const S=C.result;S&&(n(t,{hasAudio:S.hasAudio,hasVideo:S.hasVideo,isMuxed:g}),n=null),x()}})},KL=({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})=>{let p=new Uint8Array(e);if(vAe(p)){t.isFmp4=!0;const{tracks:g}=t.map;if(g.text&&(!g.audio||!g.video)){d(t,{data:p,type:"text"}),F5e(t,g.text.codec,f);return}const y={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&g.audio.codec!=="enca"&&(y.audioCodec=g.audio.codec),g.video&&g.video.codec&&g.video.codec!=="encv"&&(y.videoCodec=g.video.codec),g.video&&g.audio&&(y.isMuxed=!0),n(t,y);const b=(w,x)=>{d(t,{data:p,type:y.hasAudio&&!y.isMuxed?"audio":"video"}),x&&x.length&&o(t,x),w&&w.length&&s(t,w),f(null,t,{})};rd({action:"probeMp4StartTime",timescales:t.map.timescales,data:p,transmuxer:t.transmuxer,callback:({data:w,startTime:x})=>{e=w.buffer,t.bytes=p=w,y.hasAudio&&!y.isMuxed&&r(t,"audio","start",x),y.hasVideo&&r(t,"video","start",x),rd({action:"probeEmsgID3",data:p,transmuxer:t.transmuxer,offset:x,callback:({emsgData:C,id3Frames:S})=>{if(e=C.buffer,t.bytes=p=C,!g.video||!C.byteLength||!t.transmuxer){b(void 0,S);return}rd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[g.video.id],callback:_=>{e=_.data.buffer,t.bytes=p=_.data,_.logs.forEach(function(O){h(Zt(O,{stream:"mp4CaptionParser"}))}),b(_.captions,S)}})}})}});return}if(!t.transmuxer){f(null,t,{});return}if(typeof t.container>"u"&&(t.container=Ww(p)),t.container!=="ts"&&t.container!=="aac"){n(t,{hasAudio:!1,hasVideo:!1}),f(null,t,{});return}$5e({segment:t,bytes:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})},qL=function({id:t,key:e,encryptedBytes:n,decryptionWorker:r,segment:a,doneFn:i},o){const s=u=>{if(u.data.source===t){r.removeEventListener("message",s);const d=u.data.decrypted;o(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};r.onerror=()=>{const u="An error occurred in the decryption worker",d=Us({segment:a}),f={message:u,metadata:{error:new Error(u),errorType:xe.Error.StreamingFailedToDecryptSegment,segmentInfo:d,keyInfo:{uri:a.key.resolvedUri||a.map.key.resolvedUri}}};i(f,a)},r.addEventListener("message",s);let c;e.bytes.slice?c=e.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(kL({source:t,encrypted:n,key:c,iv:e.iv}),[n.buffer,c.buffer])},U5e=({decryptionWorker:t,segment:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})=>{v({type:"segmentdecryptionstart"}),qL({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:t,segment:e,doneFn:f},p=>{e.bytes=p,v({type:"segmentdecryptioncomplete",segment:e}),KL({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})})},z5e=({activeXhrs:t,decryptionWorker:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})=>{let p=0,g=!1;return(m,y)=>{if(!g){if(m)return g=!0,Vx(t),f(m,y);if(p+=1,p===t.length){const b=function(){if(y.encryptedBytes)return U5e({decryptionWorker:e,segment:y,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v});KL({segment:y,bytes:y.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d,doneFn:f,onTransmuxerLog:h,triggerSegmentEventFn:v})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return v({type:"segmentdecryptionstart",segment:y}),qL({decryptionWorker:e,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key,segment:y,doneFn:f},w=>{y.map.bytes=w,v({type:"segmentdecryptioncomplete",segment:y}),WL(y,x=>{if(x)return Vx(t),f(x,y);b()})});b()}}}},H5e=({loadendState:t,abortFn:e})=>n=>{n.target.aborted&&e&&!t.calledAbortFn&&(e(),t.calledAbortFn=!0)},W5e=({segment:t,progressFn:e,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:i,id3Fn:o,captionsFn:s,isEndOfTimeline:c,endedTimelineFn:u,dataFn:d})=>f=>{if(!f.target.aborted)return t.stats=Zt(t.stats,M5e(f)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(f,t)},K5e=({xhr:t,xhrOptions:e,decryptionWorker:n,segment:r,abortFn:a,progressFn:i,trackInfoFn:o,timingInfoFn:s,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:f,isEndOfTimeline:h,endedTimelineFn:v,dataFn:p,doneFn:g,onTransmuxerLog:m,triggerSegmentEventFn:y})=>{const b=[],w=z5e({activeXhrs:b,decryptionWorker:n,trackInfoFn:o,timingInfoFn:s,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:f,isEndOfTimeline:h,endedTimelineFn:v,dataFn:p,doneFn:g,onTransmuxerLog:m,triggerSegmentEventFn:y});if(r.key&&!r.key.bytes){const O=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&O.push(r.map.key);const N=Zt(e,{uri:r.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),B=HL(r,O,w,y),T={uri:r.key.resolvedUri};y({type:"segmentkeyloadstart",segment:r,keyInfo:T});const k=t(N,B);b.push(k)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const k=Zt(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),E=HL(r,[r.map.key],w,y),I={uri:r.map.key.resolvedUri};y({type:"segmentkeyloadstart",segment:r,keyInfo:I});const A=t(k,E);b.push(A)}const N=Zt(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Xx(r.map),requestType:"segment-media-initialization"}),B=B5e({segment:r,finishProcessingFn:w,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:r});const T=t(N,B);b.push(T)}const x=Zt(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Xx(r),requestType:"segment"}),C=j5e({segment:r,finishProcessingFn:w,responseType:x.responseType,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:r});const S=t(x,C);S.addEventListener("progress",W5e({segment:r,progressFn:i,trackInfoFn:o,timingInfoFn:s,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:u,id3Fn:d,captionsFn:f,isEndOfTimeline:h,endedTimelineFn:v,dataFn:p})),b.push(S);const _={};return b.forEach(O=>{O.addEventListener("loadend",H5e({loadendState:_,abortFn:a}))}),()=>Vx(b)},q5e=Wa("CodecUtils"),G5e=function(t){const e=t.attributes||{};if(e.CODECS)return zi(e.CODECS)},GL=(t,e)=>{const n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},Y5e=(t,e)=>{if(!GL(t,e))return!0;const n=e.attributes||{},r=t.mediaGroups.AUDIO[n.AUDIO];for(const a in r)if(!r[a].uri&&!r[a].playlists)return!0;return!1},Nm=function(t){const e={};return t.forEach(({mediaType:n,type:r,details:a})=>{e[n]=e[n]||[],e[n].push(Z6(`${r}${a}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){q5e(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},YL=function(t){let e=0;return t.audio&&e++,t.video&&e++,e},mh=function(t,e){const n=e.attributes||{},r=Nm(G5e(e)||[]);if(GL(t,e)&&!r.audio&&!Y5e(t,e)){const a=Nm(pPe(t,n.AUDIO)||[]);a.audio&&(r.audio=a.audio)}return r},Dm=Wa("PlaylistSelector"),XL=function(t){if(!t||!t.playlist)return;const e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})},Rm=function(t,e){if(!t)return"";const n=fe.getComputedStyle(t);return n?n[e]:""},ad=function(t,e){const n=t.slice();t.sort(function(r,a){const i=e(r,a);return i===0?n.indexOf(r)-n.indexOf(a):i})},tC=function(t,e){let n,r;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||fe.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||fe.Number.MAX_VALUE,n-r},X5e=function(t,e){let n,r;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||fe.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||fe.Number.MAX_VALUE,n===r&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-r};let JL=function(t,e,n,r,a,i){if(!t)return;const o={bandwidth:e,width:n,height:r,limitRenditionByPlayerDimensions:a};let s=t.playlists;aa.isAudioOnly(t)&&(s=i.getAudioTrackPlaylists_(),o.audioOnly=!0);let c=s.map(C=>{let S;const _=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.width,O=C.attributes&&C.attributes.RESOLUTION&&C.attributes.RESOLUTION.height;return S=C.attributes&&C.attributes.BANDWIDTH,S=S||fe.Number.MAX_VALUE,{bandwidth:S,width:_,height:O,playlist:C}});ad(c,(C,S)=>C.bandwidth-S.bandwidth),c=c.filter(C=>!aa.isIncompatible(C.playlist));let u=c.filter(C=>aa.isEnabled(C.playlist));u.length||(u=c.filter(C=>!aa.isDisabled(C.playlist)));const d=u.filter(C=>C.bandwidth*rr.BANDWIDTH_VARIANCE<e);let f=d[d.length-1];const h=d.filter(C=>C.bandwidth===f.bandwidth)[0];if(a===!1){const C=h||u[0]||c[0];if(C&&C.playlist){let S="sortedPlaylistReps";return h&&(S="bandwidthBestRep"),u[0]&&(S="enabledPlaylistReps"),Dm(`choosing ${XL(C)} using ${S} with options`,o),C.playlist}return Dm("could not choose a playlist with options",o),null}const v=d.filter(C=>C.width&&C.height);ad(v,(C,S)=>C.width-S.width);const p=v.filter(C=>C.width===n&&C.height===r);f=p[p.length-1];const g=p.filter(C=>C.bandwidth===f.bandwidth)[0];let m,y,b;g||(m=v.filter(C=>C.width>n||C.height>r),y=m.filter(C=>C.width===m[0].width&&C.height===m[0].height),f=y[y.length-1],b=y.filter(C=>C.bandwidth===f.bandwidth)[0]);let w;if(i.leastPixelDiffSelector){const C=v.map(S=>(S.pixelDiff=Math.abs(S.width-n)+Math.abs(S.height-r),S));ad(C,(S,_)=>S.pixelDiff===_.pixelDiff?_.bandwidth-S.bandwidth:S.pixelDiff-_.pixelDiff),w=C[0]}const x=w||b||g||h||u[0]||c[0];if(x&&x.playlist){let C="sortedPlaylistReps";return w?C="leastPixelDiffRep":b?C="resolutionPlusOneRep":g?C="resolutionBestRep":h?C="bandwidthBestRep":u[0]&&(C="enabledPlaylistReps"),Dm(`choosing ${XL(x)} using ${C} with options`,o),x.playlist}return Dm("could not choose a playlist with options",o),null};const QL=function(){let t=this.useDevicePixelRatio&&fe.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(t=this.customPixelRatio),JL(this.playlists.main,this.systemBandwidth,parseInt(Rm(this.tech_.el(),"width"),10)*t,parseInt(Rm(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.playlistController_)},J5e=function(t){let e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&fe.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),JL(this.playlists.main,e,parseInt(Rm(this.tech_.el(),"width"),10)*r,parseInt(Rm(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Q5e=function(t){const{main:e,currentTime:n,bandwidth:r,duration:a,segmentDuration:i,timeUntilRebuffer:o,currentTimeline:s,syncController:c}=t,u=e.playlists.filter(p=>!aa.isIncompatible(p));let d=u.filter(aa.isEnabled);d.length||(d=u.filter(p=>!aa.isDisabled(p)));const h=d.filter(aa.hasAttribute.bind(null,"BANDWIDTH")).map(p=>{const m=c.getSyncPoint(p,a,s,n)?1:2,b=aa.estimateSegmentRequestTime(i,r,p)*m-o;return{playlist:p,rebufferingImpact:b}}),v=h.filter(p=>p.rebufferingImpact<=0);return ad(v,(p,g)=>tC(g.playlist,p.playlist)),v.length?v[0]:(ad(h,(p,g)=>p.rebufferingImpact-g.rebufferingImpact),h[0]||null)},Z5e=function(){const t=this.playlists.main.playlists.filter(aa.isEnabled);return ad(t,(n,r)=>tC(n,r)),t.filter(n=>!!mh(this.playlists.main,n).video)[0]||null},V5e=t=>{let e=0,n;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(r=>{n.set(r,e),e+=r.byteLength})),n};function ZL(t){try{return new URL(t).pathname.split("/").slice(-2).join("/")}catch{return""}}const eDe=function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"});let r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);const a=e.textTracks().getTrackById(r);if(a)t[n]=a;else{const i=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=n,s=n,c=!1;const u=i[r];u&&(o=u.label,s=u.language,c=u.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:r,default:c,label:o,language:s},!1).track}}},tDe=function({inbandTextTracks:t,captionArray:e,timestampOffset:n}){if(!e)return;const r=fe.WebKitDataCue||fe.VTTCue;e.forEach(a=>{const i=a.stream;a.content?a.content.forEach(o=>{const s=new r(a.startTime+n,a.endTime+n,o.text);s.line=o.line,s.align="left",s.position=o.position,s.positionAlign="line-left",t[i].addCue(s)}):t[i].addCue(new r(a.startTime+n,a.endTime+n,a.text))})},nDe=function(t){Object.defineProperties(t.frame,{id:{get(){return xe.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get(){return xe.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get(){return xe.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},rDe=({inbandTextTracks:t,metadataArray:e,timestampOffset:n,videoDuration:r})=>{if(!e)return;const a=fe.WebKitDataCue||fe.VTTCue,i=t.metadataTrack_;if(!i||(e.forEach(d=>{const f=d.cueTime+n;typeof f!="number"||fe.isNaN(f)||f<0||!(f<1/0)||!d.frames||!d.frames.length||d.frames.forEach(h=>{const v=new a(f,f,h.value||h.url||h.data||"");v.frame=h,v.value=h,nDe(v),i.addCue(v)})}),!i.cues||!i.cues.length))return;const o=i.cues,s=[];for(let d=0;d<o.length;d++)o[d]&&s.push(o[d]);const c=s.reduce((d,f)=>{const h=d[f.startTime]||[];return h.push(f),d[f.startTime]=h,d},{}),u=Object.keys(c).sort((d,f)=>Number(d)-Number(f));u.forEach((d,f)=>{const h=c[d],v=isFinite(r)?r:d,p=Number(u[f+1])||v;h.forEach(g=>{g.endTime=p})})},aDe={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},iDe=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),oDe=({inbandTextTracks:t,dateRanges:e})=>{const n=t.metadataTrack_;if(!n)return;const r=fe.WebKitDataCue||fe.VTTCue;e.forEach(a=>{for(const i of Object.keys(a)){if(iDe.has(i))continue;const o=new r(a.startTime,a.endTime,"");o.id=a.id,o.type="com.apple.quicktime.HLS",o.value={key:aDe[i],data:a[i]},(i==="scte35Out"||i==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(o)}a.processDateRange()})},VL=(t,e,n)=>{t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,xe.browser.IS_ANY_SAFARI||(t.metadataTrack_.inBandMetadataTrackDispatchType=e))},yh=function(t,e,n){let r,a;if(n&&n.cues)for(r=n.cues.length;r--;)a=n.cues[r],a.startTime>=t&&a.endTime<=e&&n.removeCue(a)},lDe=function(t){const e=t.cues;if(!e)return;const n={};for(let r=e.length-1;r>=0;r--){const a=e[r],i=`${a.startTime}-${a.endTime}-${a.text}`;n[i]?t.removeCue(a):n[i]=a}},sDe=(t,e,n)=>{if(typeof e>"u"||e===null||!t.length)return[];const r=Math.ceil((e-n+3)*Ns.ONE_SECOND_IN_TS);let a;for(a=0;a<t.length&&!(t[a].pts>r);a++);return t.slice(a)},cDe=(t,e,n)=>{if(!e.length)return t;if(n)return e.slice();const r=e[0].pts;let a=0;for(a;a<t.length&&!(t[a].pts>=r);a++);return t.slice(0,a).concat(e)},uDe=(t,e,n,r)=>{const a=Math.ceil((e-r)*Ns.ONE_SECOND_IN_TS),i=Math.ceil((n-r)*Ns.ONE_SECOND_IN_TS),o=t.slice();let s=t.length;for(;s--&&!(t[s].pts<=i););if(s===-1)return o;let c=s+1;for(;c--&&!(t[c].pts<=a););return c=Math.max(c,0),o.splice(c,s-c+1),o},dDe=function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;const n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){const i=n[a];if(i!==r[a]||t[i]!==e[i])return!1}return!0},fDe=function(t,e,n){e=e||[];const r=[];let a=0;for(let i=0;i<e.length;i++){const o=e[i];if(t===o.timeline&&(r.push(i),a+=o.duration,a>n))return i}return r.length===0?0:r[r.length-1]},bh=1,hDe=500,eF=t=>typeof t=="number"&&isFinite(t),Mm=1/60,vDe=(t,e,n)=>t!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,pDe=(t,e,n)=>{let r=e-rr.BACK_BUFFER_LENGTH;t.length&&(r=Math.max(r,t.start(0)));const a=e-n;return Math.min(a,r)},id=t=>{const{startOfSegment:e,duration:n,segment:r,part:a,playlist:{mediaSequence:i,id:o,segments:s=[]},mediaIndex:c,partIndex:u,timeline:d}=t,f=s.length-1;let h="mediaIndex/partIndex increment";t.getMediaInfoForTime?h=`getMediaInfoForTime (${t.getMediaInfoForTime})`:t.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(h+=` with independent ${t.independent}`);const v=typeof u=="number",p=t.segment.uri?"segment":"pre-segment",g=v?lL({preloadSegment:r})-1:0;return`${p} [${i+c}/${i+f}]`+(v?` part [${u}/${g}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(v?` part start/end [${a.start} => ${a.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${d}] selected by [${h}] playlist [${o}]`},tF=t=>`${t}TimingInfo`,gDe=({segmentTimeline:t,currentTimeline:e,startOfSegment:n,buffered:r,overrideCheck:a})=>!a&&t===e?null:t<e?n:r.length?r.end(r.length-1):n,nC=({timelineChangeController:t,currentTimeline:e,segmentTimeline:n,loaderType:r,audioDisabled:a})=>{if(e===n)return!1;if(r==="audio"){const i=t.lastTimelineChange({type:"main"});return!i||i.to!==n}if(r==="main"&&a){const i=t.pendingTimelineChange({type:"audio"});return!(i&&i.to===n)}return!1},mDe=t=>{if(!t)return!1;const e=t.pendingTimelineChange({type:"audio"}),n=t.pendingTimelineChange({type:"main"}),r=e&&n,a=r&&e.to!==n.to;return!!(r&&e.from!==-1&&n.from!==-1&&a)},yDe=t=>{const e=t.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=t.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&n&&e.to<n.to},El=t=>{const e=t.pendingSegment_;if(!e)return;if(nC({timelineChangeController:t.timelineChangeController_,currentTimeline:t.currentTimeline_,segmentTimeline:e.timeline,loaderType:t.loaderType_,audioDisabled:t.audioDisabled_})&&mDe(t.timelineChangeController_)){if(yDe(t)){t.timelineChangeController_.trigger("audioTimelineBehind");return}t.timelineChangeController_.trigger("fixBadTimelineChange")}},bDe=t=>{let e=0;return["video","audio"].forEach(function(n){const r=t[`${n}TimingInfo`];if(!r)return;const{start:a,end:i}=r;let o;typeof a=="bigint"||typeof i=="bigint"?o=fe.BigInt(i)-fe.BigInt(a):typeof a=="number"&&typeof i=="number"&&(o=i-a),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},nF=({segmentDuration:t,maxDuration:e})=>t?Math.round(t)>e+Ji:!1,wDe=(t,e)=>{if(e!=="hls")return null;const n=bDe({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;const r=t.playlist.targetDuration,a=nF({segmentDuration:n,maxDuration:r*2}),i=nF({segmentDuration:n,maxDuration:r}),o=`Segment with index ${t.mediaIndex} from playlist ${t.playlist.id} has a duration of ${n} when the reported duration is ${t.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return a||i?{severity:a?"warn":"info",message:o}:null},Us=({type:t,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),r=!!(e.map&&!e.map.bytes),a=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:t||e.type,uri:e.resolvedUri||e.uri,start:a,duration:e.duration,isEncrypted:n,isMediaInitialization:r}};class rC extends xe.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Wa(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():El(this)}),this.sourceUpdater_.on("codecschange",r=>{this.trigger(Mn({type:"codecschange"},r))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():El(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",r=>{this.trigger(Mn({type:"timelinechange"},r)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():El(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():El(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Zx.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&fe.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,fe.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Zx.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return nr();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:r,isMuxed:a}=e;if(r&&n&&!this.audioDisabled_&&!a)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const r=Am(e);let a=this.initSegments_[r];return n&&!a&&e.bytes&&(this.initSegments_[r]=a={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),a||e}segmentKey(e,n=!1){if(!e)return null;const r=OL(e);let a=this.keyCache_[r];this.cacheEncryptionKeys_&&n&&!a&&e.bytes&&(this.keyCache_[r]=a={resolvedUri:e.resolvedUri,bytes:e.bytes});const i={resolvedUri:(a||e).resolvedUri};return a&&(i.bytes=a.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const r=this.playlist_,a=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let i=null;if(r&&(r.id?i=r.id:r.uri&&(i=r.uri)),this.logger_(`playlist update [${i} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${jx(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){const c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}a&&(a.mediaIndex-=o,a.mediaIndex<0?(a.mediaIndex=null,a.partIndex=null):(a.mediaIndex>=0&&(a.segment=e.segments[a.mediaIndex]),a.partIndex>=0&&a.segment.parts&&(a.part=a.segment.parts[a.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(fe.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Zx.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,r=()=>{},a=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let i=1;const o=()=>{i--,i===0&&r()};(a||!this.audioDisabled_)&&(i++,this.sourceUpdater_.removeAudio(e,n,o)),(a||this.loaderType_==="main")&&(this.gopBuffer_=uDe(this.gopBuffer_,e,n,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,n,o));for(const s in this.inbandTextTracks_)yh(e,n,this.inbandTextTracks_[s]);yh(e,n,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&fe.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=fe.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&fe.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=fe.setTimeout(this.monitorBufferTick_.bind(this),hDe)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:Us({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,r=this.partIndex){if(!n||!this.mediaSource_)return!1;const a=typeof e=="number"&&n.segments[e],i=e+1===n.segments.length,o=!a||!a.parts||r+1===a.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&i&&o}chooseNextRequest_(){const e=this.buffered_(),n=jx(e)||0,r=$x(e,this.currentTime_()),a=!this.hasPlayed_()&&r>=1,i=r>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||a||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(s.isSyncRequest)s.mediaIndex=fDe(this.currentTimeline_,o,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${s.mediaIndex}`);else if(this.mediaIndex!==null){const h=o[this.mediaIndex],v=typeof this.partIndex=="number"?this.partIndex:-1;s.startOfSegment=h.end?h.end:n,h.parts&&h.parts[v+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=v+1):s.mediaIndex=this.mediaIndex+1}else{let h,v,p;const g=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${g}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const m=this.getSyncInfoFromMediaSequenceSync_(g);if(!m){const y="No sync info found while using media sequence sync";return this.error({message:y,metadata:{errorType:xe.Error.StreamingFailedToSelectNextSegment,error:new Error(y)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${m.start} --> ${m.end})`),h=m.segmentIndex,v=m.partIndex,p=m.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const m=aa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:g,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});h=m.segmentIndex,v=m.partIndex,p=m.startTime}s.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${g}`:`currentTime ${g}`,s.mediaIndex=h,s.startOfSegment=p,s.partIndex=v,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${s.mediaIndex} `)}const c=o[s.mediaIndex];let u=c&&typeof s.partIndex=="number"&&c.parts&&c.parts[s.partIndex];if(!c||typeof s.partIndex=="number"&&!u)return null;typeof s.partIndex!="number"&&c.parts&&(s.partIndex=0,u=c.parts[0]);const d=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!r&&u&&!d&&!u.independent)if(s.partIndex===0){const h=o[s.mediaIndex-1],v=h.parts&&h.parts.length&&h.parts[h.parts.length-1];v&&v.independent&&(s.mediaIndex-=1,s.partIndex=h.parts.length-1,s.independent="previous segment")}else c.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");const f=this.mediaSource_&&this.mediaSource_.readyState==="ended";return s.mediaIndex>=o.length-1&&f&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,s.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(s))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const r=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!r)return null;if(!r.isAppended)return r;const a=this.mediaSequenceSync_.getSyncInfoForTime(r.end);return a?(a.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),a):null}generateSegmentInfo_(e){const{independent:n,playlist:r,mediaIndex:a,startOfSegment:i,isSyncRequest:o,partIndex:s,forceTimestampOffset:c,getMediaInfoForTime:u}=e,d=r.segments[a],f=typeof s=="number"&&d.parts[s],h={requestId:"segment-loader-"+Math.random(),uri:f&&f.resolvedUri||d.resolvedUri,mediaIndex:a,partIndex:f?s:null,isSyncRequest:o,startOfSegment:i,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:f&&f.duration||d.duration,segment:d,part:f,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:n},v=typeof c<"u"?c:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:v});const p=jx(this.sourceUpdater_.audioBuffered());return typeof p=="number"&&(h.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=sDe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(e){return gDe(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),r=e.bandwidth,a=this.pendingSegment_.duration,i=aa.estimateSegmentRequestTime(a,r,this.playlist_,e.bytesReceived),o=$Ne(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(i<=o)return;const s=Q5e({main:this.vhs_.playlists.main,currentTime:n,bandwidth:r,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!s)return;const u=i-o-s.rebufferingImpact;let d=.5;o<=Ji&&(d=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||u<d)&&(this.bandwidth=s.playlist.attributes.BANDWIDTH*rr.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${id(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:r,hasVideo:a}=n,i={segmentInfo:Us({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:r,hasVideo:a}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:i}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},dDe(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():El(this))))}handleTimingInfo_(e,n,r,a){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const i=this.pendingSegment_,o=tF(n);i[o]=i[o]||{},i[o][r]=a,this.logger_(`timinginfo: ${n} - ${r} - ${a}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():El(this)}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};n.forEach(o=>{i[o.stream]=i[o.stream]||{startTime:1/0,captions:[],endTime:0};const s=i[o.stream];s.startTime=Math.min(s.startTime,o.startTime+a),s.endTime=Math.max(s.endTime,o.endTime+a),s.captions.push(o)}),Object.keys(i).forEach(o=>{const{startTime:s,endTime:c,captions:u}=i[o],d=this.inbandTextTracks_;this.logger_(`adding cues from ${s} -> ${c} for ${o}`),eDe(d,this.vhs_.tech_,o),yh(s,c,d[o]),tDe({captionArray:u,inbandTextTracks:d,timestampOffset:a})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,r));return}this.addMetadataToTextTrack(r,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!nC({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:r,hasVideo:a,isMuxed:i}=n;return!(a&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||nC({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){El(this),this.callQueue_.push(this.handleData_.bind(this,e,n));return}const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[tF(n.type)].start;else{const a=this.getCurrentMediaInfo_(),i=this.loaderType_==="main"&&a&&a.hasVideo;let o;i&&(o=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:o,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,n.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const a=this.chooseNextRequest_();if(a.mediaIndex!==r.mediaIndex||a.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:r,playlist:a}){if(r){const i=Am(r);if(this.activeInitSegmentId_===i)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=i}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=a,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:r},a){const i=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();i.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+js(i).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+js(o).join(", "));const s=i.length?i.start(0):0,c=i.length?i.end(i.length-1):0,u=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(c-s<=bh&&d-u<=bh){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${js(i).join(", ")}, video buffer: ${js(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:r}));const h=this.currentTime_()-bh;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${h}`),this.remove(0,h,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${bh}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=fe.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},bh*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:r},a){if(a){if(a.code===wL){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error({message:`${n} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:xe.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:a,bytes:i}){if(!i){const s=[a];let c=a.byteLength;r&&(s.unshift(r),c+=r.byteLength),i=V5e({bytes:c,segments:s})}const o={segmentInfo:Us({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:i}))}handleSegmentTimingInfo_(e,n,r){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const a=this.pendingSegment_.segment,i=`${e}TimingInfo`;a[i]||(a[i]={}),a[i].transmuxerPrependedSeconds=r.prependedContentDuration||0,a[i].transmuxedPresentationStart=r.start.presentation,a[i].transmuxedDecodeStart=r.start.decode,a[i].transmuxedPresentationEnd=r.end.presentation,a[i].transmuxedDecodeEnd=r.end.decode,a[i].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,n){const{type:r,data:a}=n;if(!a||!a.byteLength||r==="audio"&&this.audioDisabled_)return;const i=this.getInitSegmentAndUpdateState_({type:r,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:i,data:a})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){El(this),this.loadQueue_.push(()=>{const n=Mn({},e,{forceTimestampOffset:!0});Mn(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),a=this.mediaIndex!==null,i=e.timeline!==this.currentTimeline_&&e.timeline>0,o=r||a&&i;this.logger_(`Requesting
${ZL(e.uri)}
${id(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=K5e({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:s,level:c,stream:u})=>{this.logger_(`${id(e)} logged from transmuxer stream ${u} as a ${c}: ${s}`)},triggerSegmentEventFn:({type:s,segment:c,keyInfo:u,trackInfo:d,timingInfo:f})=>{const v={segmentInfo:Us({segment:c})};u&&(v.keyInfo=u),d&&(v.trackInfo=d),f&&(v.timingInfo=f),this.trigger({type:s,metadata:v})}})}trimBackBuffer_(e){const n=pDe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,r=e.part,a=e.segment.key||e.segment.map&&e.segment.map.key,i=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:r?r.resolvedUri:n.resolvedUri,byterange:r?r.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:a,isMediaInitialization:i},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===n.timeline&&(s.videoTimingInfo?o.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(o.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),n.key){const c=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=c}return n.map&&(o.map=this.initSegmentForMap(n.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<Mm){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Mm}`);return}const r={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:r}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,r));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Zi.ABORTED)return;if(this.pause(),e.code===Zi.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,n.stats),a.endOfAllRequests=n.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=cDe(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(a)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:r,firstVideoFrameTimeForData:a,currentVideoTimestampOffset:i,useVideoTimingInfo:o,videoTimingInfo:s,audioTimingInfo:c}){if(typeof e<"u")return e;if(!o)return c.start;const u=n.segments[r-1];return r===0||!u||typeof u.start>"u"||u.end!==a+i?a:s.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:r,hasVideo:a,isMuxed:i}=n,o=this.loaderType_==="main"&&a,s=!this.audioDisabled_&&r&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,s&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=vDe(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),a=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;a&&(e.timingInfo.end=typeof a.end=="number"?a.end:a.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const c={segmentInfo:Us({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:c})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=wDe(e,this.sourceType_);if(n&&(n.severity==="warn"?xe.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${id(e)}`);return}this.logger_(`Appended ${id(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,a=e.part,i=r.end&&this.currentTime_()-r.end>e.playlist.targetDuration*3,o=a&&a.end&&this.currentTime_()-a.end>e.playlist.partTargetDuration*3;if(i||o){this.logger_(`bad ${i?"segment":"part"} ${id(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Mm){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Mm}`);return}const n=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,a=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(a-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,r=n.start,a=n.end;if(!eF(r)||!eF(a))return;yh(r,a,this.segmentMetadataTrack_);const i=fe.WebKitDataCue||fe.VTTCue,o={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:a},s=JSON.stringify(o),c=new i(r,a,s);c.value=o,this.segmentMetadataTrack_.addCue(c)}}function Wo(){}const rF=function(t){return typeof t!="string"?t:t.replace(/./,e=>e.toUpperCase())},xDe=["video","audio"],aC=(t,e)=>{const n=e[`${t}Buffer`];return n&&n.updating||e.queuePending[t]},CDe=(t,e)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.type==="mediaSource")return null;if(r.type===t)return n}return null},od=(t,e)=>{if(e.queue.length===0)return;let n=0,r=e.queue[n];if(r.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),od("audio",e),od("video",e));return}if(t!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||aC(t,e))){if(r.type!==t){if(n=CDe(t,e.queue),n===null)return;r=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[t]=r,r.action(t,e),!r.doneFn){e.queuePending[t]=null,od(t,e);return}}},aF=(t,e)=>{const n=e[`${t}Buffer`],r=rF(t);n&&(n.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),n.removeEventListener("error",e[`on${r}Error_`]),e.codecs[t]=null,e[`${t}Buffer`]=null)},Vi=(t,e)=>t&&e&&Array.prototype.indexOf.call(t.sourceBuffers,e)!==-1,_a={appendBuffer:(t,e,n)=>(r,a)=>{const i=a[`${r}Buffer`];if(Vi(a.mediaSource,i)){a.logger_(`Appending segment ${e.mediaIndex}'s ${t.length} bytes to ${r}Buffer`);try{i.appendBuffer(t)}catch(o){a.logger_(`Error with code ${o.code} `+(o.code===wL?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),a.queuePending[r]=null,n(o)}}},remove:(t,e)=>(n,r)=>{const a=r[`${n}Buffer`];if(Vi(r.mediaSource,a)){r.logger_(`Removing ${t} to ${e} from ${n}Buffer`);try{a.remove(t,e)}catch{r.logger_(`Remove ${t} to ${e} from ${n}Buffer failed`)}}},timestampOffset:t=>(e,n)=>{const r=n[`${e}Buffer`];Vi(n.mediaSource,r)&&(n.logger_(`Setting ${e}timestampOffset to ${t}`),r.timestampOffset=t)},callback:t=>(e,n)=>{t()},endOfStream:t=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${t||""})`);try{e.mediaSource.endOfStream(t)}catch(n){xe.log.warn("Failed to call media source endOfStream",n)}}},duration:t=>e=>{e.logger_(`Setting mediaSource duration to ${t}`);try{e.mediaSource.duration=t}catch(n){xe.log.warn("Failed to set media source duration",n)}},abort:()=>(t,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${t}Buffer`];if(Vi(e.mediaSource,n)){e.logger_(`calling abort on ${t}Buffer`);try{n.abort()}catch(r){xe.log.warn(`Failed to abort on ${t}Buffer`,r)}}},addSourceBuffer:(t,e)=>n=>{const r=rF(t),a=Cu(e);n.logger_(`Adding ${t}Buffer with codec ${e} to mediaSource`);const i=n.mediaSource.addSourceBuffer(a);i.addEventListener("updateend",n[`on${r}UpdateEnd_`]),i.addEventListener("error",n[`on${r}Error_`]),n.codecs[t]=e,n[`${t}Buffer`]=i},removeSourceBuffer:t=>e=>{const n=e[`${t}Buffer`];if(aF(t,e),!!Vi(e.mediaSource,n)){e.logger_(`Removing ${t}Buffer with codec ${e.codecs[t]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(r){xe.log.warn(`Failed to removeSourceBuffer ${t}Buffer`,r)}}},changeType:t=>(e,n)=>{const r=n[`${e}Buffer`],a=Cu(t);if(!Vi(n.mediaSource,r))return;const i=t.substring(0,t.indexOf(".")),o=n.codecs[e];if(o.substring(0,o.indexOf("."))===i)return;const c={codecsChangeInfo:{from:o,to:t}};n.trigger({type:"codecschange",metadata:c}),n.logger_(`changing ${e}Buffer codec from ${o} to ${t}`);try{r.changeType(a),n.codecs[e]=t}catch(u){c.errorType=xe.Error.StreamingCodecsChangeError,c.error=u,u.metadata=c,n.error_=u,n.trigger("error"),xe.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Sa=({type:t,sourceUpdater:e,action:n,doneFn:r,name:a})=>{e.queue.push({type:t,action:n,doneFn:r,name:a}),od(t,e)},iF=(t,e)=>n=>{const r=e[`${t}Buffered`](),a=FNe(r);if(e.logger_(`received "updateend" event for ${t} Source Buffer: `,a),e.queuePending[t]){const i=e.queuePending[t].doneFn;e.queuePending[t]=null,i&&i(e[`${t}Error_`])}od(t,e)};class oF extends xe.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>od("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Wa("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=iF("video",this),this.onAudioUpdateEnd_=iF("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){Sa({type:"mediaSource",sourceUpdater:this,action:_a.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){Sa({type:e,sourceUpdater:this,action:_a.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){xe.log.error("removeSourceBuffer is not supported!");return}Sa({type:"mediaSource",sourceUpdater:this,action:_a.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!xe.browser.IS_FIREFOX&&fe.MediaSource&&fe.MediaSource.prototype&&typeof fe.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return fe.SourceBuffer&&fe.SourceBuffer.prototype&&typeof fe.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){xe.log.error("changeType is not supported!");return}Sa({type:e,sourceUpdater:this,action:_a.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const r=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,r);this.canChangeType()&&this.changeType(n,r)})}appendBuffer(e,n){const{segmentInfo:r,type:a,bytes:i}=e;if(this.processedAppend_=!0,a==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${i.length} until video append`);return}const o=n;if(Sa({type:a,sourceUpdater:this,action:_a.appendBuffer(i,r||{mediaIndex:-1},o),doneFn:n,name:"appendBuffer"}),a==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const s=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${s.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,s.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return Vi(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:nr()}videoBuffered(){return Vi(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:nr()}buffered(){const e=Vi(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Vi(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():jNe(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=Wo){Sa({type:"mediaSource",sourceUpdater:this,action:_a.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=Wo){typeof e!="string"&&(e=void 0),Sa({type:"mediaSource",sourceUpdater:this,action:_a.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,r=Wo){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}Sa({type:"audio",sourceUpdater:this,action:_a.remove(e,n),doneFn:r,name:"remove"})}removeVideo(e,n,r=Wo){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}Sa({type:"video",sourceUpdater:this,action:_a.remove(e,n),doneFn:r,name:"remove"})}updating(){return!!(aC("audio",this)||aC("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Sa({type:"audio",sourceUpdater:this,action:_a.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Sa({type:"video",sourceUpdater:this,action:_a.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Sa({type:"audio",sourceUpdater:this,action:_a.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Sa({type:"video",sourceUpdater:this,action:_a.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),xDe.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>aF(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const lF=t=>decodeURIComponent(escape(String.fromCharCode.apply(null,t))),_De=t=>{const e=new Uint8Array(t);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},sF=new Uint8Array(`

`.split("").map(t=>t.charCodeAt(0)));class SDe extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class TDe extends rC{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return nr();const e=this.subtitlesTrack_.cues,n=e[0].startTime,r=e[e.length-1].startTime;return nr([[n,r]])}initSegmentForMap(e,n=!1){if(!e)return null;const r=Am(e);let a=this.initSegments_[r];if(n&&!a&&e.bytes){const i=sF.byteLength+e.bytes.byteLength,o=new Uint8Array(i);o.set(e.bytes),o.set(sF,e.bytes.byteLength),this.initSegments_[r]=a={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return a||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){yh(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Zi.TIMEOUT&&this.handleTimeout_(),e.code===Zi.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const a=this.pendingSegment_,i=r.mp4VttCues&&r.mp4VttCues.length;i&&(a.mp4VttCues=r.mp4VttCues),this.saveBandwidthRelatedStats_(a.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const o=a.segment;if(o.map&&(o.map.bytes=n.map.bytes),a.bytes=n.bytes,typeof fe.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}o.requested=!0;try{this.parseVTTCues_(a)}catch(s){this.stopForError({message:s.message,metadata:{errorType:xe.Error.StreamingVttParserError,error:s}});return}if(i||this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,a.cues.forEach(s=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new fe.VTTCue(s.startTime,s.endTime,s.text):s)}),lDe(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,n){const r=e&&e.type==="vtt",a=n&&n.type==="text";r&&a&&super.handleData_(e,n)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(r=>{const a=r.start+n,i=r.end+n,o=new fe.VTTCue(a,i,r.cueText);r.settings&&r.settings.split(" ").forEach(s=>{const c=s.split(":"),u=c[0],d=c[1];o[u]=isNaN(d)?d:Number(d)}),e.cues.push(o)})}parseVTTCues_(e){let n,r=!1;if(typeof fe.WebVTT!="function")throw new SDe;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof fe.TextDecoder=="function"?n=new fe.TextDecoder("utf8"):(n=fe.WebVTT.StringDecoder(),r=!0);const a=new fe.WebVTT.Parser(fe,fe.vttjs,n);if(a.oncue=e.cues.push.bind(e.cues),a.ontimestampmap=o=>{e.timestampmap=o},a.onparsingerror=o=>{xe.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;r&&(o=lF(o)),a.parse(o)}let i=e.bytes;r&&(i=lF(i)),a.parse(i),a.flush()}updateTimeMapping_(e,n,r){const a=e.segment;if(!n)return;if(!e.cues.length){a.empty=!0;return}const{MPEGTS:i,LOCAL:o}=e.timestampmap,c=i/Ns.ONE_SECOND_IN_TS-o+n.mapping;if(e.cues.forEach(u=>{const d=u.endTime-u.startTime,f=this.handleRollover_(u.startTime+c,n.time);u.startTime=Math.max(f,0),u.endTime=Math.max(f+d,0)}),!r.syncInfo){const u=e.cues[0].startTime,d=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(u,d-a.duration)}}}handleRollover_(e,n){if(n===null)return e;let r=e*Ns.ONE_SECOND_IN_TS;const a=n*Ns.ONE_SECOND_IN_TS;let i;for(a<r?i=-8589934592:i=8589934592;Math.abs(r-a)>4294967296;)r+=i;return r/Ns.ONE_SECOND_IN_TS}}const kDe=function(t,e){const n=t.cues;for(let r=0;r<n.length;r++){const a=n[r];if(e>=a.adStartTime&&e<=a.adEndTime)return a}return null},ODe=function(t,e,n=0){if(!t.segments)return;let r=n,a;for(let i=0;i<t.segments.length;i++){const o=t.segments[i];if(a||(a=kDe(e,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new fe.VTTCue(r,r+o.duration,o.cueOut),a.adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),e.addCue(a)),"cueOutCont"in o){const[s,c]=o.cueOutCont.split("/").map(parseFloat);a=new fe.VTTCue(r,r+o.duration,""),a.adStartTime=r-s,a.adEndTime=a.adStartTime+c,e.addCue(a)}r+=o.duration}};class cF{constructor({start:e,end:n,segmentIndex:r,partIndex:a=null,appended:i=!1}){this.start_=e,this.end_=n,this.segmentIndex_=r,this.partIndex_=a,this.appended_=i}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class EDe{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class uF{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:r,segments:a}=e;if(this.isReliable_=this.isReliablePlaylist_(r,a),!!this.isReliable_)return this.updateStorage_(a,r,this.calculateBaseTime_(r,a,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:r}of this.storage_.values())if(r.length){for(const a of r)if(a.isInRange(e))return a}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,r){const a=new Map;let i=`
`,o=r,s=n;this.start_=o,e.forEach((c,u)=>{const d=this.storage_.get(s),f=o,h=f+c.duration,v=!!(d&&d.segmentSyncInfo&&d.segmentSyncInfo.isAppended),p=new cF({start:f,end:h,appended:v,segmentIndex:u});c.syncInfo=p;let g=o;const m=(c.parts||[]).map((y,b)=>{const w=g,x=g+y.duration,C=!!(d&&d.partsSyncInfo&&d.partsSyncInfo[b]&&d.partsSyncInfo[b].isAppended),S=new cF({start:w,end:x,appended:C,segmentIndex:u,partIndex:b});return g=x,i+=`Media Sequence: ${s}.${b} | Range: ${w} --> ${x} | Appended: ${C}
`,y.syncInfo=S,S});a.set(s,new EDe(p,m)),i+=`${ZL(c.resolvedUri)} | Media Sequence: ${s} | Range: ${f} --> ${h} | Appended: ${v}
`,s++,o=h}),this.end_=o,this.storage_=a,this.diagnostics_=i}calculateBaseTime_(e,n,r){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const a=Math.min(...this.storage_.keys());if(e<a){const i=a-e;let o=this.storage_.get(a).segmentSyncInfo.start;for(let s=0;s<i;s++){const c=n[s];o-=c.duration}return o}return r}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class dF extends uF{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n,r){if(!this.storage_.size){const a=this.parent_.getSyncInfoForMediaSequence(e);return a?a.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n,r)}}const PDe=86400,iC=[{name:"VOD",run:(t,e,n,r,a)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(t,e,n,r,a,i)=>{const o=t.getMediaSequenceSync(i);if(!o||!o.isReliable)return null;const s=o.getSyncInfoForTime(a);return s?{time:s.start,partIndex:s.partIndex,segmentIndex:s.segmentIndex}:null}},{name:"ProgramDateTime",run:(t,e,n,r,a)=>{if(!Object.keys(t.timelineToDatetimeMappings).length)return null;let i=null,o=null;const s=zx(e);a=a||0;for(let c=0;c<s.length;c++){const u=e.endList||a===0?c:s.length-(c+1),d=s[u],f=d.segment,h=t.timelineToDatetimeMappings[f.timeline];if(!h||!f.dateTimeObject)continue;let p=f.dateTimeObject.getTime()/1e3+h;if(f.parts&&typeof d.partIndex=="number")for(let m=0;m<d.partIndex;m++)p+=f.parts[m].duration;const g=Math.abs(a-p);if(o!==null&&(g===0||o<g))break;o=g,i={time:p,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return i}},{name:"Segment",run:(t,e,n,r,a)=>{let i=null,o=null;a=a||0;const s=zx(e);for(let c=0;c<s.length;c++){const u=e.endList||a===0?c:s.length-(c+1),d=s[u],f=d.segment,h=d.part&&d.part.start||f&&f.start;if(f.timeline===r&&typeof h<"u"){const v=Math.abs(a-h);if(o!==null&&o<v)break;(!i||o===null||o>=v)&&(o=v,i={time:h,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return i}},{name:"Discontinuity",run:(t,e,n,r,a)=>{let i=null;if(a=a||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let s=0;s<e.discontinuityStarts.length;s++){const c=e.discontinuityStarts[s],u=e.discontinuitySequence+s+1,d=t.discontinuities[u];if(d){const f=Math.abs(a-d.time);if(o!==null&&o<f)break;(!i||o===null||o>=f)&&(o=f,i={time:d.time,segmentIndex:c,partIndex:null})}}}return i}},{name:"Playlist",run:(t,e,n,r,a)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class IDe extends xe.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new uF,r=new dF(n),a=new dF(n);this.mediaSequenceStorage_={main:n,audio:r,vtt:a},this.logger_=Wa("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,r,a,i){if(n!==1/0)return iC.find(({name:c})=>c==="VOD").run(this,e,n);const o=this.runStrategies_(e,n,r,a,i);if(!o.length)return null;for(const s of o){const{syncPoint:c,strategy:u}=s,{segmentIndex:d,time:f}=c;if(d<0)continue;const h=e.segments[d],v=f,p=v+h.duration;if(this.logger_(`Strategy: ${u}. Current time: ${a}. selected segment: ${d}. Time: [${v} -> ${p}]}`),a>=v&&a<p)return this.logger_("Found sync point with exact match: ",c),c}return this.selectSyncPoint_(o,{key:"time",value:a})}getExpiredTime(e,n){if(!e||!e.segments)return null;const r=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!r.length)return null;const a=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return a.segmentIndex>0&&(a.time*=-1),Math.abs(a.time+ph({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:a.segmentIndex,endIndex:0}))}runStrategies_(e,n,r,a,i){const o=[];for(let s=0;s<iC.length;s++){const c=iC[s],u=c.run(this,e,n,r,a,i);u&&(u.strategy=c.name,o.push({strategy:c.name,syncPoint:u}))}return o}selectSyncPoint_(e,n){let r=e[0].syncPoint,a=Math.abs(e[0].syncPoint[n.key]-n.value),i=e[0].strategy;for(let o=1;o<e.length;o++){const s=Math.abs(e[o].syncPoint[n.key]-n.value);s<a&&(a=s,r=e[o].syncPoint,i=e[o].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${i}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,n){const r=n.mediaSequence-e.mediaSequence;if(r>PDe){xe.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let a=r-1;a>=0;a--){const i=e.segments[a];if(i&&typeof i.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+a,time:i.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],r=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),a=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:a.start}));const i=a.dateTimeObject;a.discontinuity&&n&&i&&(this.timelineToDatetimeMappings[a.timeline]=-(i.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,r){const a=e.segment,i=e.part;let o=this.timelines[e.timeline],s,c;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-n.start},r&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),s=e.startOfSegment,c=n.end+o.mapping;else if(o)s=n.start+o.mapping,c=n.end+o.mapping;else return!1;return i&&(i.start=s,i.end=c),(!a.start||s<a.start)&&(a.start=s),a.end=c,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let a=0;a<n.discontinuityStarts.length;a++){const i=n.discontinuityStarts[a],o=n.discontinuitySequence+a+1,s=i-e.mediaIndex,c=Math.abs(s);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>c){let u;s<0?u=r.start-ph({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:i}):u=r.end+ph({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[o]={time:u,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}}class ADe extends xe.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:r}){return typeof n=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:r}){if(typeof n=="number"&&typeof r=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:r},delete this.pendingTimelineChanges_[e];const a={timelineChangeInfo:{from:n,to:r}};this.trigger({type:"timelinechange",metadata:a})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const NDe=ML(LL(function(){var t=function(){function g(){this.listeners={}}var m=g.prototype;return m.on=function(b,w){this.listeners[b]||(this.listeners[b]=[]),this.listeners[b].push(w)},m.off=function(b,w){if(!this.listeners[b])return!1;var x=this.listeners[b].indexOf(w);return this.listeners[b]=this.listeners[b].slice(0),this.listeners[b].splice(x,1),x>-1},m.trigger=function(b){var w=this.listeners[b];if(w)if(arguments.length===2)for(var x=w.length,C=0;C<x;++C)w[C].call(this,arguments[1]);else for(var S=Array.prototype.slice.call(arguments,1),_=w.length,O=0;O<_;++O)w[O].apply(this,S)},m.dispose=function(){this.listeners={}},m.pipe=function(b){this.on("data",function(w){b.push(w)})},g}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(g){return g.subarray(0,g.byteLength-g[g.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const g=[[[],[],[],[],[]],[[],[],[],[],[]]],m=g[0],y=g[1],b=m[4],w=y[4];let x,C,S;const _=[],O=[];let N,B,T,k,E,I;for(x=0;x<256;x++)O[(_[x]=x<<1^(x>>7)*283)^x]=x;for(C=S=0;!b[C];C^=N||1,S=O[S]||1)for(k=S^S<<1^S<<2^S<<3^S<<4,k=k>>8^k&255^99,b[C]=k,w[k]=C,T=_[B=_[N=_[C]]],I=T*16843009^B*65537^N*257^C*16843008,E=_[k]*257^k*16843008,x=0;x<4;x++)m[x][C]=E=E<<24^E>>>8,y[x][k]=I=I<<24^I>>>8;for(x=0;x<5;x++)m[x]=m[x].slice(0),y[x]=y[x].slice(0);return g};let r=null;class a{constructor(m){r||(r=n()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let y,b,w;const x=this._tables[0][4],C=this._tables[1],S=m.length;let _=1;if(S!==4&&S!==6&&S!==8)throw new Error("Invalid aes key size");const O=m.slice(0),N=[];for(this._key=[O,N],y=S;y<4*S+28;y++)w=O[y-1],(y%S===0||S===8&&y%S===4)&&(w=x[w>>>24]<<24^x[w>>16&255]<<16^x[w>>8&255]<<8^x[w&255],y%S===0&&(w=w<<8^w>>>24^_<<24,_=_<<1^(_>>7)*283)),O[y]=O[y-S]^w;for(b=0;y;b++,y--)w=O[b&3?y:y-4],y<=4||b<4?N[b]=w:N[b]=C[0][x[w>>>24]]^C[1][x[w>>16&255]]^C[2][x[w>>8&255]]^C[3][x[w&255]]}decrypt(m,y,b,w,x,C){const S=this._key[1];let _=m^S[0],O=w^S[1],N=b^S[2],B=y^S[3],T,k,E;const I=S.length/4-2;let A,M=4;const $=this._tables[1],U=$[0],F=$[1],j=$[2],W=$[3],H=$[4];for(A=0;A<I;A++)T=U[_>>>24]^F[O>>16&255]^j[N>>8&255]^W[B&255]^S[M],k=U[O>>>24]^F[N>>16&255]^j[B>>8&255]^W[_&255]^S[M+1],E=U[N>>>24]^F[B>>16&255]^j[_>>8&255]^W[O&255]^S[M+2],B=U[B>>>24]^F[_>>16&255]^j[O>>8&255]^W[N&255]^S[M+3],M+=4,_=T,O=k,N=E;for(A=0;A<4;A++)x[(3&-A)+C]=H[_>>>24]<<24^H[O>>16&255]<<16^H[N>>8&255]<<8^H[B&255]^S[M++],T=_,_=O,O=N,N=B,B=T}}class i extends t{constructor(){super(t),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(m){this.jobs.push(m),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(g){return g<<24|(g&65280)<<8|(g&16711680)>>8|g>>>24},s=function(g,m,y){const b=new Int32Array(g.buffer,g.byteOffset,g.byteLength>>2),w=new a(Array.prototype.slice.call(m)),x=new Uint8Array(g.byteLength),C=new Int32Array(x.buffer);let S,_,O,N,B,T,k,E,I;for(S=y[0],_=y[1],O=y[2],N=y[3],I=0;I<b.length;I+=4)B=o(b[I]),T=o(b[I+1]),k=o(b[I+2]),E=o(b[I+3]),w.decrypt(B,T,k,E,C,I),C[I]=o(C[I]^S),C[I+1]=o(C[I+1]^_),C[I+2]=o(C[I+2]^O),C[I+3]=o(C[I+3]^N),S=B,_=T,O=k,N=E;return x};class c{constructor(m,y,b,w){const x=c.STEP,C=new Int32Array(m.buffer),S=new Uint8Array(m.byteLength);let _=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(C.subarray(_,_+x),y,b,S)),_=x;_<C.length;_+=x)b=new Uint32Array([o(C[_-4]),o(C[_-3]),o(C[_-2]),o(C[_-1])]),this.asyncStream_.push(this.decryptChunk_(C.subarray(_,_+x),y,b,S));this.asyncStream_.push(function(){w(null,e(S))})}static get STEP(){return 32e3}decryptChunk_(m,y,b,w){return function(){const x=s(m,y,b);w.set(x,m.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof u<"u"?d=u:typeof self<"u"?d=self:d={};var f=d,h=function(m){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(m):m&&m.buffer instanceof ArrayBuffer},v=f.BigInt||Number;v("0x1"),v("0x100"),v("0x10000"),v("0x1000000"),v("0x100000000"),v("0x10000000000"),v("0x1000000000000"),v("0x100000000000000"),v("0x10000000000000000"),function(){var g=new Uint16Array([65484]),m=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);return m[0]===255?"big":m[0]===204?"little":"unknown"}();const p=function(g){const m={};return Object.keys(g).forEach(y=>{const b=g[y];h(b)?m[y]={bytes:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength}:m[y]=b}),m};self.onmessage=function(g){const m=g.data,y=new Uint8Array(m.encrypted.bytes,m.encrypted.byteOffset,m.encrypted.byteLength),b=new Uint32Array(m.key.bytes,m.key.byteOffset,m.key.byteLength/4),w=new Uint32Array(m.iv.bytes,m.iv.byteOffset,m.iv.byteLength/4);new c(y,b,w,function(x,C){self.postMessage(p({source:m.source,decrypted:C}),[C.buffer])})}}));var DDe=RL(NDe);const RDe=t=>{let e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},fF=(t,e)=>{t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},oC=(t,e)=>{e.activePlaylistLoader=t,t.load()},MDe=(t,e)=>()=>{const{segmentLoaders:{[t]:n,main:r},mediaTypes:{[t]:a}}=e,i=a.activeTrack(),o=a.getActiveGroup(),s=a.activePlaylistLoader,c=a.lastGroup_;if(!(o&&c&&o.id===c.id)&&(a.lastGroup_=o,a.lastTrack_=i,fF(n,a),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){s&&r.resetEverything();return}n.resyncLoader(),oC(o.playlistLoader,a)}},LDe=(t,e)=>()=>{const{segmentLoaders:{[t]:n},mediaTypes:{[t]:r}}=e;r.lastGroup_=null,n.abort(),n.pause()},FDe=(t,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[t]:r,main:a},mediaTypes:{[t]:i}}=e,o=i.activeTrack(),s=i.getActiveGroup(),c=i.activePlaylistLoader,u=i.lastTrack_;if(!(u&&o&&u.id===o.id)&&(i.lastGroup_=s,i.lastTrack_=o,fF(r,i),!!s)){if(s.isMainPlaylist){if(!o||!u||o.id===u.id)return;const d=e.vhs.playlistController_,f=d.selectPlaylist();if(d.media()===f)return;i.logger_(`track change. Switching main audio from ${u.id} to ${o.id}`),n.pause(),a.resetEverything(),d.fastQualityChange_(f);return}if(t==="AUDIO"){if(!s.playlistLoader){a.setAudio(!0),a.resetEverything();return}r.setAudio(!0),a.setAudio(!1)}if(c===s.playlistLoader){oC(s.playlistLoader,i);return}r.track&&r.track(o),r.resetEverything(),oC(s.playlistLoader,i)}},Lm={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:n},excludePlaylist:r}=e,a=n.activeTrack(),i=n.activeGroup(),o=(i.filter(c=>c.default)[0]||i[0]).id,s=n.tracks[o];if(a===s){r({error:{message:"Problem encountered loading the default audio track."}});return}xe.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const c in n.tracks)n.tracks[c].enabled=n.tracks[c]===s;n.onTrackChanged()},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:n}}=e;xe.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},hF={AUDIO:(t,e,n)=>{if(!e)return;const{tech:r,requestOptions:a,segmentLoaders:{[t]:i}}=n;e.on("loadedmetadata",()=>{const o=e.media();i.playlist(o,a),(!r.paused()||o.endList&&r.preload()!=="none")&&i.load()}),e.on("loadedplaylist",()=>{i.playlist(e.media(),a),r.paused()||i.load()}),e.on("error",Lm[t](t,n))},SUBTITLES:(t,e,n)=>{const{tech:r,requestOptions:a,segmentLoaders:{[t]:i},mediaTypes:{[t]:o}}=n;e.on("loadedmetadata",()=>{const s=e.media();i.playlist(s,a),i.track(o.activeTrack()),(!r.paused()||s.endList&&r.preload()!=="none")&&i.load()}),e.on("loadedplaylist",()=>{i.playlist(e.media(),a),r.paused()||i.load()}),e.on("error",Lm[t](t,n))}},BDe={AUDIO:(t,e)=>{const{vhs:n,sourceType:r,segmentLoaders:{[t]:a},requestOptions:i,main:{mediaGroups:o},mediaTypes:{[t]:{groups:s,tracks:c,logger_:u}},mainPlaylistLoader:d}=e,f=gh(d.main);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},f&&(o[t].main.default.playlists=d.main.playlists));for(const h in o[t]){s[h]||(s[h]=[]);for(const v in o[t][h]){let p=o[t][h][v],g;if(f?(u(`AUDIO group '${h}' label '${v}' is a main playlist`),p.isMainPlaylist=!0,g=null):r==="vhs-json"&&p.playlists?g=new nd(p.playlists[0],n,i):p.resolvedUri?g=new nd(p.resolvedUri,n,i):p.playlists&&r==="dash"?g=new Qx(p.playlists[0],n,i,d):g=null,p=Zt({id:v,playlistLoader:g},p),hF[t](t,p.playlistLoader,e),s[h].push(p),typeof c[v]>"u"){const m=new xe.AudioTrack({id:v,kind:RDe(p),enabled:!1,language:p.language,default:p.default,label:v});c[v]=m}}}a.on("error",Lm[t](t,e))},SUBTITLES:(t,e)=>{const{tech:n,vhs:r,sourceType:a,segmentLoaders:{[t]:i},requestOptions:o,main:{mediaGroups:s},mediaTypes:{[t]:{groups:c,tracks:u}},mainPlaylistLoader:d}=e;for(const f in s[t]){c[f]||(c[f]=[]);for(const h in s[t][f]){if(!r.options_.useForcedSubtitles&&s[t][f][h].forced)continue;let v=s[t][f][h],p;if(a==="hls")p=new nd(v.resolvedUri,r,o);else if(a==="dash"){if(!v.playlists.filter(m=>m.excludeUntil!==1/0).length)return;p=new Qx(v.playlists[0],r,o,d)}else a==="vhs-json"&&(p=new nd(v.playlists?v.playlists[0]:v.resolvedUri,r,o));if(v=Zt({id:h,playlistLoader:p},v),hF[t](t,v.playlistLoader,e),c[f].push(v),typeof u[h]>"u"){const g=n.addRemoteTextTrack({id:h,kind:"subtitles",default:v.default&&v.autoselect,language:v.language,label:h},!1).track;u[h]=g}}}i.on("error",Lm[t](t,e))},"CLOSED-CAPTIONS":(t,e)=>{const{tech:n,main:{mediaGroups:r},mediaTypes:{[t]:{groups:a,tracks:i}}}=e;for(const o in r[t]){a[o]||(a[o]=[]);for(const s in r[t][o]){const c=r[t][o][s];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;const u=n.options_.vhs&&n.options_.vhs.captionServices||{};let d={label:s,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(u[d.instreamId]&&(d=Zt(d,u[d.instreamId])),d.default===void 0&&delete d.default,a[o].push(Zt({id:s},c)),typeof i[s]>"u"){const f=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;i[s]=f}}}}},vF=(t,e)=>{for(let n=0;n<t.length;n++)if(Kx(e,t[n])||t[n].playlists&&vF(t[n].playlists,e))return!0;return!1},jDe=(t,e)=>n=>{const{mainPlaylistLoader:r,mediaTypes:{[t]:{groups:a}}}=e,i=r.media();if(!i)return null;let o=null;i.attributes[t]&&(o=a[i.attributes[t]]);const s=Object.keys(a);if(!o)if(t==="AUDIO"&&s.length>1&&gh(e.main))for(let c=0;c<s.length;c++){const u=a[s[c]];if(vF(u,i)){o=u;break}}else a.main?o=a.main:s.length===1&&(o=a[s[0]]);return typeof n>"u"?o:n===null||!o?null:o.filter(c=>c.id===n.id)[0]||null},$De={AUDIO:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const r in n)if(n[r].enabled)return n[r];return null},SUBTITLES:(t,e)=>()=>{const{mediaTypes:{[t]:{tracks:n}}}=e;for(const r in n)if(n[r].mode==="showing"||n[r].mode==="hidden")return n[r];return null}},UDe=(t,{mediaTypes:e})=>()=>{const n=e[t].activeTrack();return n?e[t].activeGroup(n):null},zDe=t=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{BDe[u](u,t)});const{mediaTypes:e,mainPlaylistLoader:n,tech:r,vhs:a,segmentLoaders:{["AUDIO"]:i,main:o}}=t;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=jDe(u,t),e[u].activeTrack=$De[u](u,t),e[u].onGroupChanged=MDe(u,t),e[u].onGroupChanging=LDe(u,t),e[u].onTrackChanged=FDe(u,t),e[u].getActiveGroup=UDe(u,t)});const s=e.AUDIO.activeGroup();if(s){const u=(s.filter(f=>f.default)[0]||s[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),i.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const c=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",c),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),a.on("dispose",()=>{r.audioTracks().removeEventListener("change",c),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const u in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[u])},HDe=()=>{const t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Wo,activeTrack:Wo,getActiveGroup:Wo,onGroupChanged:Wo,onTrackChanged:Wo,lastTrack_:null,logger_:Wa(`MediaGroups[${e}]`)}}),t};class pF{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=ra(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class WDe extends xe.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new pF,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Wa("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const r=n.serverUri||n.serverURL;if(!r){this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),this.trigger("error");return}if(r.startsWith("data:")){this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1));return}this.steeringManifest.reloadUri=ra(e,r),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const r=e?n:this.getRequestURI(n);if(!r){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const a={contentSteeringInfo:{uri:r}};this.trigger({type:"contentsteeringloadstart",metadata:a}),this.request_=this.xhr_({uri:r,requestType:"content-steering-manifest"},(i,o)=>{if(i){if(o.status===410){this.logger_(`manifest request 410 ${i}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),this.excludedSteeringManifestURLs.add(r);return}if(o.status===429){const u=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${i}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${i}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:a});let s;try{s=JSON.parse(this.request_.responseText)}catch(u){const d={errorType:xe.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:d})}this.assignSteeringProperties_(s);const c={contentSteeringInfo:a.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:c}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new fe.URL(e),r=new fe.URL(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(e){const n=JSON.parse(fe.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new fe.URL(e),r=this.getPathway(),a=this.getBandwidth_();if(r){const i=`_${this.manifestType_}_pathway`;n.searchParams.set(i,r)}if(a){const i=`_${this.manifestType_}_throughput`;n.searchParams.set(i,a)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(a=>{for(const i of a)if(this.availablePathways_.has(i))return i;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=a=>this.excludedSteeringManifestURLs.has(a);if(this.proxyServerUrl_){const a=this.setProxyServerUrl_(e);if(!n(a))return a}const r=this.setSteeringParams_(e);return n(r)?null:r}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=fe.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){fe.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new pF}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(ra(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const KDe=(t,e)=>{let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(null,r)},e)}},qDe=10;let Pl;const GDe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],YDe=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},XDe=function({currentPlaylist:t,buffered:e,currentTime:n,nextPlaylist:r,bufferLowWaterLine:a,bufferHighWaterLine:i,duration:o,bufferBasedABR:s,log:c}){if(!r)return xe.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${t&&t.id||"null"} -> ${r.id}`;if(!t)return c(`${u} as current playlist is not set`),!0;if(r.id===t.id)return!1;const d=!!Vu(e,n).length;if(!t.endList)return!d&&typeof t.partTargetDuration=="number"?(c(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${u} as current playlist is live`),!0);const f=$x(e,n),h=s?rr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:rr.MAX_BUFFER_LOW_WATER_LINE;if(o<h)return c(`${u} as duration < max low water line (${o} < ${h})`),!0;const v=r.attributes.BANDWIDTH,p=t.attributes.BANDWIDTH;if(v<p&&(!s||f<i)){let g=`${u} as next bandwidth < current bandwidth (${v} < ${p})`;return s&&(g+=` and forwardBuffer < bufferHighWaterLine (${f} < ${i})`),c(g),!0}if((!s||v>p)&&f>=a){let g=`${u} as forwardBuffer >= bufferLowWaterLine (${f} >= ${a})`;return s&&(g+=` and next bandwidth > current bandwidth (${v} > ${p})`),c(g),!0}return c(`not ${u} as no switching criteria met`),!1};class JDe extends xe.EventTarget{constructor(e){super(),this.fastQualityChange_=KDe(this.fastQualityChange_.bind(this),100);const{src:n,withCredentials:r,tech:a,bandwidth:i,externVhs:o,useCueTags:s,playlistExclusionDuration:c,enableLowInitialPlaylist:u,sourceType:d,cacheEncryptionKeys:f,bufferBasedABR:h,leastPixelDiffSelector:v,captionServices:p,experimentalUseMMS:g}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=e;(m===null||typeof m>"u")&&(m=1/0),Pl=o,this.bufferBasedABR=!!h,this.leastPixelDiffSelector=!!v,this.withCredentials=r,this.tech_=a,this.vhs_=a.vhs,this.player_=e.player_,this.sourceType_=d,this.useCueTags_=s,this.playlistExclusionDuration=c,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=HDe(),g&&fe.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new fe.ManagedMediaSource,this.usingManagedMediaSource_=!0,xe.log("Using ManagedMediaSource")):fe.MediaSource&&(this.mediaSource=new fe.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=nr(),this.hasPlayed_=!1,this.syncController_=new IDe(e),this.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new DDe,this.sourceUpdater_=new oF(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new ADe,this.keyStatusMap_=new Map;const y={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:p,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:i,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:f,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Qx(n,this.vhs_,Zt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new nd(n,this.vhs_,Zt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new rC(Zt(y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new rC(Zt(y,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new TDe(Zt(y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((x,C)=>{function S(){a.off("vttjserror",_),x()}function _(){a.off("vttjsloaded",S),C()}a.one("vttjsloaded",S),a.one("vttjserror",_),a.addWebVttScript_()})}),e);const b=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new WDe(this.vhs_.xhr,b),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),GDe.forEach(x=>{this[x+"_"]=YDe.bind(this,x)}),this.logger_=Wa("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const w=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(w,()=>{const x=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-x,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,r){const a=this.media(),i=a&&(a.id||a.uri),o=e&&(e.id||e.uri);if(i&&i!==o){this.logger_(`switch media ${i} -> ${o} from ${n}`);const s={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:s}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],r=n?n.activeGroup():null,a=this.contentSteeringController_.getPathway();if(r&&a){const o=(r.length?r[0].playlists:r.playlists).filter(s=>s.attributes.serviceLocation===a);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=fe.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(fe.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const r=e.mediaGroups.AUDIO,a=Object.keys(r);let i;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{const s=r.main||a.length&&r[a[0]];for(const c in s)if(s[c].default){i={label:c};break}}if(!i)return n;const o=[];for(const s in r)if(r[s][i.label]){const c=r[s][i.label];if(c.playlists&&c.playlists.length)o.push.apply(o,c.playlists);else if(c.uri)o.push(c);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const d=e.playlists[u];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===s&&o.push(d)}}return o.length?o:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),r=n.targetDuration*1.5*1e3;Wx(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),zDe({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let r;if(this.enableLowInitialPlaylist&&(r=this.selectInitialPlaylist()),r||(r=this.selectPlaylist()),!r||!this.shouldSwitchToMedia_(r)||(this.initialMedia_=r,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),r=n.targetDuration*1.5*1e3;Wx(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,r=>{this.player_.trigger(Mn({},r))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const r=e.mediaGroups||{};let a=!0;const i=Object.keys(r.AUDIO);for(const o in r.AUDIO)for(const s in r.AUDIO[o])r.AUDIO[o][s].uri||(a=!1);a&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Pl.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),a=this.bufferLowWaterLine(),i=this.bufferHighWaterLine(),o=this.tech_.buffered();return XDe({buffered:o,currentTime:r,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:a,bufferHighWaterLine:i,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const r=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:r.playlist,error:r})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const r=this.audioSegmentLoader_.pendingSegment_;if(!r||!r.segment||!r.segment.syncInfo)return;const a=r.segment.syncInfo.end+.01;this.tech_.setCurrentTime(a)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",r=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:qDe}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const r=this.getCodecsOrExclude_();r&&this.sourceUpdater_.addOrChangeSourceBuffers(r)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(r=>{this.mainSegmentLoader_.on(r,a=>{this.player_.trigger(Mn({},a))}),this.audioSegmentLoader_.on(r,a=>{this.player_.trigger(Mn({},a))}),this.subtitleSegmentLoader_.on(r,a=>{this.player_.trigger(Mn({},a))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const r=n.end(0);let a=r;if(e.start){const i=e.start.timeOffset;i<0?a=Math.max(r+i,n.start(0)):a=Math.min(r,i)}this.trigger("firstplay"),this.tech_.setCurrentTime(a)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(r===null)return!1;const a=Pl.Playlist.playlistEnd(e,r),i=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return a-i<=Qi;const s=o.end(o.length-1);return s-i<=Qi&&a-s<=Qi}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const a=this.mainPlaylistLoader_.main.playlists,i=a.filter(Im),o=i.length===1&&i[0]===e;if(a.length===1&&r!==1/0)return xe.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const p=this.pathwayAttribute_(e),g=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(p),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(p)},g);return}let v=!1;a.forEach(p=>{if(p===e)return;const g=p.excludeUntil;typeof g<"u"&&g!==1/0&&(v=!0,delete p.excludeUntil)}),v&&(xe.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let s;e.playlistErrors_>this.maxPlaylistRetries?s=1/0:s=Date.now()+r*1e3,e.excludeUntil=s,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=n.internal?this.logger_:xe.log.warn,d=n.message?" "+n.message:"";u(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const f=c.targetDuration/2*1e3||5*1e3,h=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=f;return this.switchMedia_(c,"exclude",o||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const r=[],a=e==="all";(a||e==="main")&&r.push(this.mainPlaylistLoader_);const i=[];(a||e==="audio")&&i.push("AUDIO"),(a||e==="subtitle")&&(i.push("CLOSED-CAPTIONS"),i.push("SUBTITLES")),i.forEach(o=>{const s=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;s&&r.push(s)}),["main","audio","subtitle"].forEach(o=>{const s=this[`${o}SegmentLoader_`];s&&(e===o||e==="all")&&r.push(s)}),r.forEach(o=>n.forEach(s=>{typeof o[s]=="function"&&o[s]()}))}setCurrentTime(e){const n=Vu(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Pl.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,n){const r=e.media();if(!r)return null;const a=this.syncController_.getMediaSequenceSync(n);if(a&&a.isReliable){const s=a.start,c=a.end;if(!isFinite(s)||!isFinite(c))return null;const u=Pl.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,r),d=Math.max(0,c-u);return d<s?null:nr([[s,d]])}const i=this.syncController_.getExpiredTime(r,this.duration());if(i===null)return null;const o=Pl.Playlist.seekable(r,i,Pl.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,r));return o.length?o:null}computeFinalSeekable_(e,n){if(!n)return e;const r=e.start(0),a=e.end(0),i=n.start(0),o=n.end(0);return i>a||r>o?e:nr([[Math.max(r,i),Math.min(a,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let n;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!n))return;const r=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,n),!this.seekable_||r&&r.length&&this.seekable_.length&&r.start(0)===this.seekable_.start(0)&&r.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${iL(this.seekable_)}]`);const a={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:a}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}const n=this.tech_.buffered();let r=Pl.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const r in n)n[r].forEach(a=>{a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=mh(this.main(),n),a={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(a.video=r.video||e.main.videoCodec||mPe),e.main.isMuxed&&(a.video+=`,${r.audio||e.main.audioCodec||eR}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(a.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||eR,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!a.audio&&!a.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(u,d)=>u?zf(d,this.usingManagedMediaSource_):xw(d),s={};let c;if(["video","audio"].forEach(function(u){if(a.hasOwnProperty(u)&&!o(e[u].isFmp4,a[u])){const d=e[u].isFmp4?"browser":"muxer";s[d]=s[d]||[],s[d].push(a[u]),u==="audio"&&(c=d)}}),i&&c&&n.attributes.AUDIO){const u=n.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===u&&d!==n&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${c} does not support codec(s): "${a.audio}"`)}if(Object.keys(s).length){const u=Object.keys(s).reduce((d,f)=>(d&&(d+=", "),d+=`${f} does not support codec(s): "${s[f].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(d=>{const f=(zi(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,h=(zi(a[d]||"")[0]||{}).type;f&&h&&f.toLowerCase()!==h.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[d]}" -> "${a[d]}"`)}),u.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return a}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(r=>{const a=e[r];if(n.indexOf(a.id)!==-1)return;n.push(a.id);const i=mh(this.main,a),o=[];i.audio&&!xw(i.audio)&&!zf(i.audio,this.usingManagedMediaSource_)&&o.push(`audio codec ${i.audio}`),i.video&&!xw(i.video)&&!zf(i.video,this.usingManagedMediaSource_)&&o.push(`video codec ${i.video}`),i.text&&i.text==="stpp.ttml.im1t"&&o.push(`text codec ${i.text}`),o.length&&(a.excludeUntil=1/0,this.logger_(`excluding ${a.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],r=this.main().playlists,a=Nm(zi(e)),i=YL(a),o=a.video&&zi(a.video)[0]||null,s=a.audio&&zi(a.audio)[0]||null;Object.keys(r).forEach(c=>{const u=r[c];if(n.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;n.push(u.id);const d=[],f=mh(this.mainPlaylistLoader_.main,u),h=YL(f);if(!(!f.audio&&!f.video)){if(h!==i&&d.push(`codec count "${h}" !== "${i}"`),!this.sourceUpdater_.canChangeType()){const v=f.video&&zi(f.video)[0]||null,p=f.audio&&zi(f.audio)[0]||null;v&&o&&v.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`video codec "${v.type}" !== "${o.type}"`),p&&s&&p.type.toLowerCase()!==s.type.toLowerCase()&&d.push(`audio codec "${p.type}" !== "${s.type}"`)}d.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let n=0;const r=this.seekable();r.length&&(n=r.start(0)),ODe(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=rr.GOAL_BUFFER_LENGTH,r=rr.GOAL_BUFFER_LENGTH_RATE,a=Math.max(n,rr.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*r,a)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=rr.BUFFER_LOW_WATER_LINE,r=rr.BUFFER_LOW_WATER_LINE_RATE,a=Math.max(n,rr.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(n,rr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*r,this.bufferBasedABR?i:a)}bufferHighWaterLine(){return rr.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){VL(this.inbandTextTracks_,"com.apple.streaming",this.tech_),oDe({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,r){const a=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();VL(this.inbandTextTracks_,e,this.tech_),rDe({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:a,videoDuration:r})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,r=>{this.trigger(Mn({},r))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const i=this.contentSteeringController_.getAvailablePathways(),o=[];for(const s of n.playlists){const c=s.attributes.serviceLocation;if(c&&(o.push(c),!i.has(c)))return!0}return!!(!o.length&&i.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const r=this.main().playlists,a=new Set;let i=!1;Object.keys(r).forEach(o=>{const s=r[o],c=this.pathwayAttribute_(s),u=c&&e!==c;s.excludeUntil===1/0&&s.lastExcludeReason_==="content-steering"&&!u&&(delete s.excludeUntil,delete s.lastExcludeReason_,i=!0);const f=!s.excludeUntil&&s.excludeUntil!==1/0;!a.has(s.id)&&u&&f&&(a.add(s.id),s.excludeUntil=1/0,s.lastExcludeReason_="content-steering",this.logger_(`excluding ${s.id} for ${s.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const s=this.mediaTypes_[o];if(s.activePlaylistLoader){const c=s.activePlaylistLoader.media_;c&&c.attributes.serviceLocation!==e&&(i=!0)}}),i&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,r=this.contentSteeringController_.currentPathwayClones,a=this.contentSteeringController_.nextPathwayClones;if(r&&r.size||a&&a.size){for(const[o,s]of r.entries())a.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(s),this.contentSteeringController_.excludePathway(o));for(const[o,s]of a.entries()){const c=r.get(o);if(!c){n.filter(d=>d.attributes["PATHWAY-ID"]===s["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(s,d)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(c,s)||(this.mainPlaylistLoader_.updateOrDeleteClone(s,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...a])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const r=e["URI-REPLACEMENT"].PARAMS,a=n["URI-REPLACEMENT"].PARAMS;for(const i in r)if(r[i]!==a[i])return!1;for(const i in a)if(r[i]!==a[i])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(r=>{const a=this.mainPlaylistLoader_.getKeyIdSet(r);!a||!a.size||a.forEach(i=>{const o="usable",s=this.keyStatusMap_.has(i)&&this.keyStatusMap_.get(i)===o,c=r.lastExcludeReason_===n&&r.excludeUntil===1/0;s?s&&c&&(delete r.excludeUntil,delete r.lastExcludeReason_,this.logger_(`enabling playlist ${r.id} because key ID ${i} is ${o}`)):(r.excludeUntil!==1/0&&r.lastExcludeReason_!==n&&(r.excludeUntil=1/0,r.lastExcludeReason_=n,this.logger_(`excluding playlist ${r.id} because the key ID ${i} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(r=>{const a=r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.height<720,i=r.excludeUntil===1/0&&r.lastExcludeReason_===n;a&&i&&(delete r.excludeUntil,xe.log.warn(`enabling non-HD playlist ${r.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const i=(typeof e=="string"?e:_De(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${i} added to the keyStatusMap`),this.keyStatusMap_.set(i,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const QDe=(t,e,n)=>r=>{const a=t.main.playlists[e],i=Hx(a),o=Im(a);if(typeof r>"u")return o;r?delete a.disabled:a.disabled=!0;const s={renditionInfo:{id:e,bandwidth:a.attributes.BANDWIDTH,resolution:a.attributes.RESOLUTION,codecs:a.attributes.CODECS},cause:"fast-quality"};return r!==o&&!i&&(r?(n(a),t.trigger({type:"renditionenabled",metadata:s})):t.trigger({type:"renditiondisabled",metadata:s})),r};class ZDe{constructor(e,n,r){const{playlistController_:a}=e,i=a.fastQualityChange_.bind(a);if(n.attributes){const o=n.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=mh(a.main(),n),this.playlist=n,this.id=r,this.enabled=QDe(e.playlists,n.id,i)}}const VDe=function(t){t.representations=()=>{const e=t.playlistController_.main(),n=gh(e)?t.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(r=>!Hx(r)).map((r,a)=>new ZDe(t,r,r.id)):[]}},gF=["seeking","seeked","pause","playing","error"];class e3e extends xe.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Wa("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),a=()=>this.techWaiting_(),i=()=>this.resetTimeUpdate_(),o=this.playlistController_,s=["main","subtitle","audio"],c={};s.forEach(d=>{c[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},o[`${d}SegmentLoader_`].on("appendsdone",c[d].updateend),o[`${d}SegmentLoader_`].on("playlistupdate",c[d].reset),this.tech_.on(["seeked","seeking"],c[d].reset)});const u=d=>{["main","audio"].forEach(f=>{o[`${f}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(gF,i),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",a),this.tech_.off(gF,i),this.tech_.off("canplay",r),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),s.forEach(d=>{o[`${d}SegmentLoader_`].off("appendsdone",c[d].updateend),o[`${d}SegmentLoader_`].off("playlistupdate",c[d].reset),this.tech_.off(["seeked","seeking"],c[d].reset)}),this.checkCurrentTimeTimeout_&&fe.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&fe.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=fe.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,r=n[`${e}SegmentLoader_`],a=r.buffered_(),i=UNe(this[`${e}Buffered_`],a);if(this[`${e}Buffered_`]=a,i){const o={bufferedRanges:a};n.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:js(a)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+Qi>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(nr([this.lastRecordedTime,e]));const r={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:r}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),r=this.tech_.currentTime(),a=this.afterSeekableWindow_(n,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let i;if(a&&(i=n.end(n.length-1)),this.beforeSeekableWindow_(n,r)){const p=n.start(0);i=p+(p===n.end(0)?0:Qi)}if(typeof i<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${iL(n)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;const o=this.playlistController_.sourceUpdater_,s=this.tech_.buffered(),c=o.audioBuffer?o.audioBuffered():null,u=o.videoBuffer?o.videoBuffered():null,d=this.media(),f=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-Ji)*2,h=[c,u];for(let p=0;p<h.length;p++){if(!h[p])continue;if($x(h[p],r)<f)return!1}const v=Pm(s,r);return v.length===0?!1:(i=v.start(0)+Qi,this.logger_(`Buffered region starts (${v.start(0)})  just beyond seek point (${r}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),r=Vu(n,e);if(r.length&&e+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const s=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${s}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,a=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=Pm(a,n);return o.length>0?(this.logger_(`Stopped at ${n} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,r,a=!1){if(!e.length)return!1;let i=e.end(e.length-1)+Qi;const o=!r.endList,s=typeof r.partTargetDuration=="number";return o&&(s||a)&&(i=e.end(e.length-1)+r.targetDuration*3),n>i}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:r}){if(!e)return;let a;if(e.length&&n.length){const i=Vu(e,r-3),o=Vu(e,r),s=Vu(n,r);s.length&&!o.length&&i.length&&(a={start:i.end(0),end:s.end(0)})}else Pm(e,r).length||(a=this.gapFromVideoUnderflow_(e,r));return a?(this.logger_(`Encountered a gap in video from ${a.start} to ${a.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),r=this.tech_.currentTime(),a=Pm(n,r);if(this.resetTimeUpdate_(),a.length===0||r!==e)return;this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+Ji);const i={gapInfo:{from:r,to:a.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:i}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const r=BNe(e);for(let a=0;a<r.length;a++){const i=r.start(a),o=r.end(a);if(n-i<4&&n-i>2)return{start:i,end:o}}return null}}const t3e={errorInterval:30,getSource(t){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return t(n)}},mF=function(t,e){let n=0,r=0;const a=Zt(t3e,e);t.ready(()=>{t.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const i=function(){r&&t.currentTime(r)},o=function(d){d!=null&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",i),t.src(d),t.trigger({type:"usage",name:"vhs-error-reload"}),t.play())},s=function(){if(Date.now()-n<a.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){xe.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(t,o)},c=function(){t.off("loadedmetadata",i),t.off("error",s),t.off("dispose",c)},u=function(d){c(),mF(t,d)};t.on("error",s),t.on("dispose",c),t.reloadSourceOnError=u},n3e=function(t){mF(this,t)};var yF="3.16.2",r3e="7.1.0",a3e="1.3.1",i3e="7.2.0",o3e="4.0.2";const On={PlaylistLoader:nd,Playlist:aa,utils:c5e,STANDARD_PLAYLIST_SELECTOR:QL,INITIAL_PLAYLIST_SELECTOR:Z5e,lastBandwidthSelector:QL,movingAverageBandwidthSelector:J5e,comparePlaylistBandwidth:tC,comparePlaylistResolution:X5e,xhr:TL()};Object.keys(rr).forEach(t=>{Object.defineProperty(On,t,{get(){return xe.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),rr[t]},set(e){if(xe.log.warn(`using Vhs.${t} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){xe.log.warn(`value of Vhs.${t} must be greater than or equal to 0`);return}rr[t]=e}})});const bF="videojs-vhs",wF=function(t,e){const n=e.media();let r=-1;for(let a=0;a<t.length;a++)if(t[a].id===n.id){r=a;break}t.selectedIndex_=r,t.trigger({selectedIndex:r,type:"change"})},l3e=function(t,e){e.representations().forEach(n=>{t.addQualityLevel(n)}),wF(t,e.playlists)};On.canPlaySource=function(){return xe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const s3e=(t,e,n)=>{if(!t)return t;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=Nm(zi(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);const a=Cu(r.video),i=Cu(r.audio),o={};for(const s in t)o[s]={},i&&(o[s].audioContentType=i),a&&(o[s].videoContentType=a),e.contentProtection&&e.contentProtection[s]&&e.contentProtection[s].pssh&&(o[s].pssh=e.contentProtection[s].pssh),typeof t[s]=="string"&&(o[s].url=t[s]);return Zt(t,o)},c3e=(t,e)=>t.reduce((n,r)=>{if(!r.contentProtection)return n;const a=e.reduce((i,o)=>{const s=r.contentProtection[o];return s&&s.pssh&&(i[o]={pssh:s.pssh}),i},{});return Object.keys(a).length&&n.push(a),n},[]),u3e=({player:t,sourceKeySystems:e,audioMedia:n,mainPlaylists:r})=>{if(!t.eme.initializeMediaKeys)return Promise.resolve();const a=n?r.concat([n]):r,i=c3e(a,Object.keys(e)),o=[],s=[];return i.forEach(c=>{s.push(new Promise((u,d)=>{t.tech_.one("keysessioncreated",u)})),o.push(new Promise((u,d)=>{t.eme.initializeMediaKeys({keySystems:c},f=>{if(f){d(f);return}u()})}))}),Promise.race([Promise.all(o),Promise.race(s)])},d3e=({player:t,sourceKeySystems:e,media:n,audioMedia:r})=>{const a=s3e(e,n,r);return a?(t.currentSource().keySystems=a,a&&!t.eme?(xe.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},xF=()=>{if(!fe.localStorage)return null;const t=fe.localStorage.getItem(bF);if(!t)return null;try{return JSON.parse(t)}catch{return null}},f3e=t=>{if(!fe.localStorage)return!1;let e=xF();e=e?Zt(e,t):t;try{fe.localStorage.setItem(bF,JSON.stringify(e))}catch{return!1}return e},h3e=t=>t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t,CF=(t,e)=>{t._requestCallbackSet||(t._requestCallbackSet=new Set),t._requestCallbackSet.add(e)},_F=(t,e)=>{t._responseCallbackSet||(t._responseCallbackSet=new Set),t._responseCallbackSet.add(e)},SF=(t,e)=>{t._requestCallbackSet&&(t._requestCallbackSet.delete(e),t._requestCallbackSet.size||delete t._requestCallbackSet)},TF=(t,e)=>{t._responseCallbackSet&&(t._responseCallbackSet.delete(e),t._responseCallbackSet.size||delete t._responseCallbackSet)};On.supportsNativeHls=function(){if(!He||!He.createElement)return!1;const t=He.createElement("video");return xe.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(t.canPlayType(n))}):!1}(),On.supportsNativeDash=function(){return!He||!He.createElement||!xe.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(He.createElement("video").canPlayType("application/dash+xml"))}(),On.supportsTypeNatively=t=>t==="hls"?On.supportsNativeHls:t==="dash"?On.supportsNativeDash:!1,On.isSupported=function(){return xe.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},On.xhr.onRequest=function(t){CF(On.xhr,t)},On.xhr.onResponse=function(t){_F(On.xhr,t)},On.xhr.offRequest=function(t){SF(On.xhr,t)},On.xhr.offResponse=function(t){TF(On.xhr,t)};const v3e=xe.getComponent("Component");class kF extends v3e{constructor(e,n,r){if(super(n,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Wa("VhsHandler"),n.options_&&n.options_.playerId){const a=xe.getPlayer(n.options_.playerId);this.player_=a}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(He,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],a=>{const i=He.fullscreenElement||He.webkitFullscreenElement||He.mozFullScreenElement||He.msFullscreenElement;i&&i.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Zt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const r=xF();r&&r.bandwidth&&(this.options_.bandwidth=r.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),r&&r.throughput&&(this.options_.throughput=r.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=rr.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===rr.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(r=>{typeof this.source_[r]<"u"&&(this.options_[r]=this.source_[r])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=h3e(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=On,this.options_.sourceType=tR(n),this.options_.seekTo=i=>{this.tech_.setCurrentTime(i)},this.options_.player_=this.player_,this.playlistController_=new JDe(this.options_);const r=Zt({liveRangeSafeTimeDelta:Qi},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new e3e(r),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const i=xe.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),i.error(o)});const a=this.options_.bufferBasedABR?On.movingAverageBandwidthSelector(.55):On.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.playlistController_.selectInitialPlaylist=On.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(i){this.playlistController_.selectPlaylist=i.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(i){this.playlistController_.mainSegmentLoader_.throughput.rate=i,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let i=this.playlistController_.mainSegmentLoader_.bandwidth;const o=fe.navigator.connection||fe.navigator.mozConnection||fe.navigator.webkitConnection,s=1e7;if(this.options_.useNetworkInformationApi&&o){const c=o.downlink*1e3*1e3;c>=s&&i>=s?i=Math.max(i,c):i=c}return i},set(i){this.playlistController_.mainSegmentLoader_.bandwidth=i,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const i=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(i+o))},set(){xe.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>js(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>js(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&f3e({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{VDe(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=fe.URL.createObjectURL(this.playlistController_.mediaSource),(xe.browser.IS_ANY_SAFARI||xe.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),u3e({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=d3e({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",r=>{this.playlistController_.updatePlaylistByKeyStatus(r.keyId,r.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=xe.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{l3e(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{wF(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":yF,"mux.js":r3e,"mpd-parser":a3e,"m3u8-parser":i3e,"aes-decrypter":o3e}}version(){return this.constructor.version()}canChangeType(){return oF.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&fe.URL.revokeObjectURL&&(fe.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return g5e({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,r=!0,a=2){return IL({programTime:e,playlist:this.playlistController_.media(),retryCount:a,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{CF(this.xhr,e)},this.xhr.onResponse=e=>{_F(this.xhr,e)},this.xhr.offRequest=e=>{SF(this.xhr,e)},this.xhr.offResponse=e=>{TF(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(r=>{this.playlistController_.on(r,a=>{this.player_.trigger(Mn({},a))})}),n.forEach(r=>{this.playbackWatcher_.on(r,a=>{this.player_.trigger(Mn({},a))})})}}const Fm={name:"videojs-http-streaming",VERSION:yF,canHandleSource(t,e={}){const n=Zt(xe.options,e);return!n.vhs.experimentalUseMMS&&!zf("avc1.4d400d,mp4a.40.2",!1)?!1:Fm.canPlayType(t.type,n)},handleSource(t,e,n={}){const r=Zt(xe.options,n);return e.vhs=new kF(t,e,r),e.vhs.xhr=TL(),e.vhs.setupXhrHooks_(),e.vhs.src(t.src,t.type),e.vhs},canPlayType(t,e){const n=tR(t);if(!n)return"";const r=Fm.getOverrideNative(e);return!On.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative(t={}){const{vhs:e={}}=t,n=!(xe.browser.IS_ANY_SAFARI||xe.browser.IS_IOS),{overrideNative:r=n}=e;return r}};zf("avc1.4d400d,mp4a.40.2",!0)&&xe.getTech("Html5").registerSourceHandler(Fm,0),xe.VhsHandler=kF,xe.VhsSourceHandler=Fm,xe.Vhs=On,xe.use||xe.registerComponent("Vhs",On),xe.options.vhs=xe.options.vhs||{},(!xe.getPlugin||!xe.getPlugin("reloadSourceOnError"))&&xe.registerPlugin("reloadSourceOnError",n3e);const p3e=["src"],g3e=Object.freeze(Object.defineProperty({__proto__:null,default:Gn(l.defineComponent({__name:"Video",props:{src:{},width:{},height:{}},emits:["ready","ended"],setup(t,{emit:e}){const n=t,r=e,a=l.ref(null);let i=null;const o=l.computed(()=>({width:n.width||"100%",height:n.height||"100%"})),s=()=>{const u={language:"zh-CN",controls:!0,preload:"auto",muted:!0,autoplay:!0,fluid:!0,src:n.src};a.value&&(i=xe(a.value,u,c),i.on("ended",d=>{r("ended",d,n)}))},c=()=>{r("ready",i)};return l.onMounted(()=>{s()}),(u,d)=>(l.openBlock(),l.createElementBlock("div",{style:l.normalizeStyle(o.value)},[l.createElementVNode("video",{id:"my-player",ref_key:"videoRef",ref:a,class:"video-js w-full h-full"},[l.createElementVNode("source",{src:u.src},null,8,p3e)],512)],4))}}),[["__scopeId","data-v-82c05b4e"]])},Symbol.toStringTag,{value:"Module"})),m3e=Gn(l.defineComponent({__name:"ViewCopy",props:{preview:{type:Boolean,default:!1},data:{type:Object},customWsHandler:{type:Function},isOpener:{type:Boolean,default:!1}},emits:["ready"],setup(t,{expose:e,emit:n}){const r=t,a={rule:!1,drawingLineName:"line",rotateCursor:"rotate.cur"},i=l.ref(!1);let o=l.reactive({id:"",Name:"",fault:0,State:0});const s=n;let c,u;l.onMounted(()=>{u=new h8("meta2d-sub",a),globalThis.meta2d=globalThis.mainMeta2d,ja(H8()),xf(W8()),ja(K8()),di(q8()),ja(G8()),ja(Y8()),di(X8()),J8(),di(o6()),di(c6()),ja(h6()),di(v6()),xf(p6());const g=r.data;if(g){const{resolver:m}=Rf(g);if(r.preview){g.locked=1,g.lockState&&(g.locked=g.lockState);const y=(g.msgTypes||[]).map(w=>Number(w)).filter(w=>!isNaN(w)),b=g.onMessageJsCode;g.wsUrl&&(c=Os.getInstance(g.wsUrl,{busName:g.busName,msgTypes:y,enableLog:!1,onReady:()=>{console.log("%c连接成功！","color: green; font-weight: bold;"),c.subscribe(g.busName,y,w=>{console.log("response: ",w);try{b?new Function("data",b)(w):r.customWsHandler?r.customWsHandler(w,meta2d):m(w)}catch(x){console.log("error: ",x)}})}}),c.connect())}else g.locked=0;u.open(g),s("ready",u)}});const d=g=>{const{resolver:m}=Rf(g);if(g.wsUrl){g.locked=1;const y=(g.msgTypes||[]).map(w=>Number(w)).filter(w=>!isNaN(w)),b=g.onMessageJsCode;c=Os.getInstance(g.wsUrl,{busName:g.busName,msgTypes:y,enableLog:!1,onReady:()=>{console.log("%c连接成功！","color: green; font-weight: bold;"),c.subscribe(g.busName,y,w=>{try{b?new Function("data",b)(w):r.customWsHandler?r.customWsHandler(w,meta2d):m(w)}catch(x){console.log("error: ",x)}})}}),c.connect()}},f=(g,m)=>{let y=localStorage.getItem("meta2d");(r.data||y)&&(y=r.data||JSON.parse(y)),y.wsUrl,y.wsUrl&&m==="setting"&&(c.sendMessage(y.busName,3e3,{Name:g.Name,Type:28,State:g.State}),u.setValue({id:g.id,showChild:g.State},{render:!1}))},h=()=>{let g=r.data;g.wsUrl&&c.sendMessage(g.busName,1002,{})},v=()=>{i.value=!1},p=g=>{i.value=!1,f(o,"setting")};return e({reconnectWebSocket:d,Sendrequestsyn:h}),l.onUnmounted(()=>{u.destroy(!0),c&&c.close()}),(g,m)=>{const y=l.resolveComponent("t-input"),b=l.resolveComponent("t-form-item"),w=l.resolveComponent("t-form"),x=l.resolveComponent("t-dialog");return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createElementVNode("div",{id:"meta2d-sub",class:l.normalizeClass({"is--preview":t.preview,"is--opener":t.isOpener})},null,2),l.createVNode(x,{visible:i.value,"close-btn":!0,"on-confirm":p,"cancel-btn":"取消","on-close":v},{header:l.withCtx(()=>m[3]||(m[3]=[l.createTextVNode("设置")])),body:l.withCtx(()=>[l.createVNode(w,{ref:"form",data:l.unref(o)},{default:l.withCtx(()=>[l.createVNode(b,{label:"ID",name:"id",disabled:""},{default:l.withCtx(()=>[l.createVNode(y,{placeholder:"请输入内容",modelValue:l.unref(o).id,"onUpdate:modelValue":m[0]||(m[0]=C=>l.unref(o).id=C),disabled:""},null,8,["modelValue"])]),_:1}),l.createVNode(b,{label:"名称",name:"Name"},{default:l.withCtx(()=>[l.createVNode(y,{placeholder:"请输入内容",modelValue:l.unref(o).Name,"onUpdate:modelValue":m[1]||(m[1]=C=>l.unref(o).Name=C),disabled:""},null,8,["modelValue"])]),_:1}),l.unref(o).State!=-1?(l.openBlock(),l.createBlock(b,{key:0,label:"设置状态值",name:"State"},{default:l.withCtx(()=>[l.createVNode(y,{placeholder:"请输入",modelValue:l.unref(o).State,"onUpdate:modelValue":m[2]||(m[2]=C=>l.unref(o).State=C),disabled:l.unref(o).fault==1},null,8,["modelValue","disabled"])]),_:1})):l.createCommentVNode("",!0)]),_:1},8,["data"])]),_:1},8,["visible"])],64)}}}),[["__scopeId","data-v-2e18c7a1"]]),y3e={class:"app-page is--opener"},b3e=Object.freeze(Object.defineProperty({__proto__:null,default:Gn(l.defineComponent({__name:"Opener",props:{url:{type:String,required:!0}},emits:["ready"],setup(t,{emit:e}){const n=t,r=l.ref(null),a=(s,c)=>{const{tasks:u}=A6(s,c);setTimeout(async()=>{for(const d of u)await d()})};n.url&&(globalThis.mainMeta2d=globalThis.meta2d,fetch(n.url).then(s=>s.json()).then(s=>{r.value=s}).catch(s=>{console.log("opener: fetch error: ",s)}));const{extendOn:i}=y6();l.onMounted(()=>{meta2d==null||meta2d.resize(),i()});const o=s=>{console.log("opener ready: ",s),s.fitView(!0,20),a(r.value,s)};return(s,c)=>{const u=l.resolveComponent("t-empty");return l.openBlock(),l.createElementBlock("div",y3e,[r.value?(l.openBlock(),l.createBlock(m3e,{key:0,preview:"",isOpener:"",data:r.value,onReady:o},null,8,["data"])):(l.openBlock(),l.createBlock(u,{key:1}))])}}}),[["__scopeId","data-v-8f65e257"]])},Symbol.toStringTag,{value:"Module"})),w3e=Object.freeze(Object.defineProperty({__proto__:null,default:l.defineComponent({__name:"Text",props:{text:{type:String,default:""},textColor:{type:String,default:""},height:{type:String,default:""}},setup(t){const e=t;console.log("xxxxxxxxxxxxx: ",e);const n=l.computed(()=>({color:e.textColor,height:e.height}));return(r,a)=>(l.openBlock(),l.createElementBlock("div",{class:"extend__text",style:l.normalizeStyle(n.value)},l.toDisplayString(e.text),5))}})},Symbol.toStringTag,{value:"Module"}));vr.Meta2DEditorLoader=txe,vr.Meta2DPreviewLoader=nxe,vr.TDesign=P3,vr.default=rxe,Object.defineProperties(vr,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=diagram-editor-vue3.umd.js.map
